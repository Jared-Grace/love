var app_index_main=(function(exports){"use strict";function _mergeNamespaces(e,t){for(var s=0;s<t.length;s++){const p=t[s];if(typeof p!="string"&&!Array.isArray(p)){for(const g in p)if(g!=="default"&&!(g in e)){const m=Object.getOwnPropertyDescriptor(p,g);m&&Object.defineProperty(e,g,m.get?m:{enumerable:!0,get:()=>p[g]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function error$1(e){throw new Error(e)}function json_to(e){return JSON.stringify(e)}function undefined_is(e){return typeof e>"u"}function undefined_not_is_assert_lambda(e,t){if(undefined_is(e)){const s=t();let p=json_to(s);error$1(p)}}function property_get(e,t){let s=e[t];undefined_not_is_assert_lambda(s,p);function p(){return{object:e,property_name:t}}return s}function html_component_element_get(e){return property_get(e,"element")}function html_style_set(e,t,s){let p=html_component_element_get(e);p.style[t]=s}function html_style_font_size(e,t){html_style_set(e,"font-size",t)}function html_mobile_default_font_size(e){html_style_font_size(e,"25px")}function html_mobile_default_font_size_context(e){let t=property_get(e,"root");return html_mobile_default_font_size(t),t}function html_text_set(e,t){let s=html_component_element_get(e);s.innerHTML=t}function html_parent_append(e,t){let s=html_component_element_get(e),p=html_component_element_get(t);s.appendChild(p)}function html_component_wrap(e){return{element:e}}function html_element(e,t){const s=document.createElement(t);let p=html_component_wrap(s);return html_parent_append(e,p),html_style_set(p,"box-sizing","border-box"),p}function html_document_head(){let e=document.head;return html_component_wrap(e)}function html_style_head(e){let t=html_document_head(),s=html_element(t,"style");html_text_set(s,e)}function html_style_button(e){html_style_head("button { "+e+" }")}function html_attribute_set(e,t,s){html_component_element_get(e).setAttribute(t,s)}function html_link(){let e=html_document_head();return html_element(e,"link")}function html_stylesheet(e){let t=html_link();html_attribute_set(t,"href",e),html_attribute_set(t,"rel","stylesheet")}function not(e){return!e}function property_set(e,t,s){e[t]=s}function property_exists(e,t){return e&&Object.hasOwn(e,t)}function property_initialize_lambda(e,t,s){const p=property_exists(e,t);if(not(p)){let m=s();property_set(e,t,m)}return property_get(e,t)}function assert(e){not(e)&&error$1()}function equal(e,t){return e===t}function equal_assert(e,t){let s=equal(e,t);assert(s)}function arguments_assert(e,t){let s=property_get(e,"length");equal_assert(s,t)}function assert_message_get(e,t){if(not(e)){let s=t();error$1(s)}}function assert_json_get(e,t){function s(){let p=t();return json_to(p)}assert_message_get(e,s)}function property_exists_assert(e,t){let s=property_exists(e,t);function p(){return{object:e,property_name:t}}assert_json_get(s,p)}function property_delete(e,t){property_exists_assert(e,t),delete e[t]}function global_function_set(e,t){let s=global_get();property_set(s,e.name,t)}function global_alternate_set(e){let t=global_get();return global_function_set(global_alternate_set,e),function(){property_delete(t,global_alternate_set.name)}}let global$1={};function global_get(){return property_exists(global$1,global_alternate_set.name)?property_get(global$1,global_alternate_set.name):global$1}function global_function_initialize_lambda(e,t){arguments_assert(arguments,2);let s=global_get();return property_initialize_lambda(s,e.name,t)}function global_function_once(e,t){function s(){return e(),!0}global_function_initialize_lambda(t,s)}function html_font_include(e,t){global_function_once(s,e);function s(){html_stylesheet(t)}}function html_roboto_include(){html_font_include(html_roboto_include,"https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap")}function html_font_set(e,t){html_style_set(e,"font-family",t)}function html_font_sans_serif_value(){return'"Roboto", Arial, Helvetica, sans-serif'}function html_document_root(){let e=document.documentElement;return html_component_wrap(e)}function html_font_sans_serif_set_html(){let e=html_document_root();html_roboto_include();let t=html_font_sans_serif_value();html_font_set(e,t);const s=":font-family: "+html_font_sans_serif_value();html_style_button(s)}function html_meta_viewport(){const e=html_document_head();let t=html_element(e,"meta");html_attribute_set(t,"name","viewport"),html_attribute_set(t,"content","width=device-width, initial-scale=1.0")}function html_mobile_default(e){let t=html_mobile_default_font_size_context(e);return html_meta_viewport(),html_font_sans_serif_set_html(),t}function list_is(e){return Array.isArray(e)}function json_format_to(e){return JSON.stringify(e,null,1)}function text_slice(e,t,s){return e.slice(t,s)}function text_take(e,t){return text_slice(e,0,t)}function json_format_to_truncated(e){let t=json_format_to(e);return text_take(t,1e4)}function error_json(e){let t=json_format_to_truncated(e);error$1(t)}function list_join(e,t){let s=list_is(e);return not(s)&&error_json({list:e}),e.join(t)}function list_join_slash_forward(e){return list_join(e,"/")}function firebase_deploy_function_destination(e,t){return list_join_slash_forward(["function",e,t])}function json_extension(){return".json"}function file_name_json(e){return e+json_extension()}function firebase_deploy_function_destination_json(e,t){let s=file_name_json(e);return firebase_deploy_function_destination(t,s)}function firebase_deploy_function_destination_production(e){return firebase_deploy_function_destination_json("version_production",e)}async function app_context_initialize_root(e,t){await t({root:e})}function html_document_body(){let e=document.body;return html_component_wrap(e)}async function app_context_initialize(e){const t=html_document_body();await app_context_initialize_root(t,e)}function fn_name(e){return e}function js_code_parenthesis_right(){return")"}function js_code_parenthesis_left(){return"("}function text_wrap_parenthesis(e){return js_code_parenthesis_left()+e+js_code_parenthesis_right()}function js_code_wrap_parenthesis(e){const t=" "+e+" ";return text_wrap_parenthesis(t)}function list_join_comma_space(e){return list_join(e,", ")}function js_code_call_args(e,t){arguments_assert(arguments,2);let s=list_join_comma_space(t);return e+js_code_wrap_parenthesis(s)}function js_code_semicolon(){return";"}function js_code_statement(e){return e+js_code_semicolon()}function js_code_call_args_statement(e,t){let s=js_code_call_args(e,t);return js_code_statement(s)}function js_code_call_app_context_initialize(e){return js_code_call_args_statement(app_context_initialize.name,[e])}function browser_is(){return typeof window<"u"&&typeof window.document<"u"}function newline(){return`
`}function list_join_newline(e){let t=newline();return list_join(e,t)}function global_name(){return"global"}function js_code_equals_padded(){return" = "}function js_code_assign(e,t){return e+js_code_equals_padded()+t}function js_keyword_let(){return"let"}function js_code_let_assign(e,t){return js_keyword_let()+" "+js_code_assign(e,t)+";"}function js_code_brace_right(){return"}"}function js_code_brace_left(){return"{"}function js_code_wrap_braces(e){return js_code_brace_left()+e+js_code_brace_right()}function js_code_braces_empty(){return js_code_wrap_braces("")}function js_code_global_init(){let e=js_code_braces_empty(),t=global_name();return js_code_let_assign(t,e)}function json_from(e){return JSON.parse(e)}function buffer_text_to(e){let t=null;if(browser_is())if(e instanceof ArrayBuffer)t=new TextDecoder("utf-8").decode(new Uint8Array(e));else if(e instanceof Uint8Array)t=new TextDecoder("utf-8").decode(e);else throw new Error("Unsupported buffer type");else t=e.toString("utf8");return t}function html_remove(e){html_component_element_get(e).remove()}function object_assign(e,t){Object.assign(e,t)}function html_style_assign(e,t){let s=html_component_element_get(e);object_assign(s.style,t)}function html_div(e){return html_element(e,"div")}async function html_loading(e){let t=null,s=browser_is();if(s){let g=html_document_body();t=html_div(g),html_style_assign(t,{position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh",background:"rgba(0, 0, 0, 0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:"1000"})}let p=null;try{p=await e()}catch(g){throw g}finally{s&&html_remove(t)}return p}function http_get_options(){return{method:"GET"}}function ternary(e,t,s){let p=null;return e?p=t:p=s,p}async function sleep(e){await new Promise(function(s){return setTimeout(s,e)})}function assert_message(e,t){not(e)&&error$1(t)}function assert_json(e,t){let s=json_to(t);assert_message(e,s)}function round(e){return Math.round(e)}function catch_call(e,t){return function(){let g=null;try{g=t(...arguments)}catch(m){e(m)}return g}}async function promise_wrap(e){return await new Promise(function(p,g){try{e(p,g)}catch(m){g(m)}})}function text_starts_with(e,t){return e.startsWith(t)}function each(e,t){for(let s of e)if(t(s)===!0)return}function assert_multiple(e,t){function s(p){let g=e(p);assert(g)}each(t,s)}function integer_is(e){return Number.isInteger(e)}function random$2(){return Math.random()}function floor(e){return Math.floor(e)}function integer_random(e,t){return assert_multiple(integer_is,[e,t]),floor(random$2()*(t-e+1))+e}async function http_sleep(){await sleep(integer_random(5,8)*1e3)}async function http_generic(e,t){const s=t.method||"GET",p=t.body||null;if(browser_is()){async function _(){const w={method:s};property_exists(t,"body")&&object_assign(w,{headers:{"Content-Type":"application/json",...t.headers||{}},body:json_to(p)});const I=await fetch(e,w);return not(I.ok)&&error$1("Failed to fetch file"),await I.arrayBuffer()}return await html_loading(_)}let m=!0;property_exists(t,"sleep")&&(m=property_get(t,"sleep")),m&&await http_sleep();let l=text_starts_with(e,"https://"),o=await import("http"+ternary(l,"s","")),h=await promise_wrap(v);function v(_,y){const w=new URL(e);function T(E){const C=[];function x(q){C.push(q)}let j=catch_call(y,x);E.on("data",j);function D(){let q=property_get(E,"statusCode");const G=q/100,$=round(G);assert_json($===2,{url:e,statusCode:q});let W=Buffer.concat(C);_(W)}let k=catch_call(y,D);E.on("end",k)}const I={hostname:w.hostname,port:w.port||(l?443:80),path:w.pathname+w.search,method:s,headers:{...t.headers||{},...p?{"Content-Type":"application/json"}:{}}},O=o.request(I,T);if(O.on("error",y),p){let E=json_to(p);O.write(E)}O.end()}return h}async function http(e){let t=http_get_options();return await http_generic(e,t)}async function global_function_async(e,t){let s=global_get();return await property_initialize_lambda(s,e.name,t)}function lambda_get(e){function t(){return e}return t}function global_function_initialize(e,t){arguments_assert(arguments,2);let s=lambda_get(t);return global_function_initialize_lambda(e,s)}function global_function_property_get(e,t){let s=global_function_initialize(e,{});return property_get(s,t)}function not_assert(e){e&&error$1()}function global_function_initialize_object(e){return global_function_initialize(e,{})}function global_function_property_exists(e,t){let s=global_function_initialize_object(e);return property_exists(s,t)}function global_function_property_set(e,t,s){let p=global_function_initialize(e,{});property_set(p,t,s)}async function file_read_cached(e){let t=global_function_property_exists(file_read_cached,e);if(t)return!1;not_assert(t);let s=await file_read(e);return global_function_property_set(file_read_cached,e,s),!0}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var s=function p(){var g=!1;try{g=this instanceof p}catch{}return g?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(p){var g=Object.getOwnPropertyDescriptor(e,p);Object.defineProperty(s,p,g.get?g:{enumerable:!0,get:function(){return e[p]}})}),s}var lzString$2={exports:{}},hasRequiredLzString;function requireLzString(){return hasRequiredLzString||(hasRequiredLzString=1,(function(e){var t=(function(){var s=String.fromCharCode,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",m={};function d(a,o){if(!m[a]){m[a]={};for(var h=0;h<a.length;h++)m[a][a.charAt(h)]=h}return m[a][o]}var l={compressToBase64:function(a){if(a==null)return"";var o=l._compress(a,6,function(h){return p.charAt(h)});switch(o.length%4){default:case 0:return o;case 1:return o+"===";case 2:return o+"==";case 3:return o+"="}},decompressFromBase64:function(a){return a==null?"":a==""?null:l._decompress(a.length,32,function(o){return d(p,a.charAt(o))})},compressToUTF16:function(a){return a==null?"":l._compress(a,15,function(o){return s(o+32)})+" "},decompressFromUTF16:function(a){return a==null?"":a==""?null:l._decompress(a.length,16384,function(o){return a.charCodeAt(o)-32})},compressToUint8Array:function(a){for(var o=l.compress(a),h=new Uint8Array(o.length*2),v=0,_=o.length;v<_;v++){var y=o.charCodeAt(v);h[v*2]=y>>>8,h[v*2+1]=y%256}return h},decompressFromUint8Array:function(a){if(a==null)return l.decompress(a);for(var o=new Array(a.length/2),h=0,v=o.length;h<v;h++)o[h]=a[h*2]*256+a[h*2+1];var _=[];return o.forEach(function(y){_.push(s(y))}),l.decompress(_.join(""))},compressToEncodedURIComponent:function(a){return a==null?"":l._compress(a,6,function(o){return g.charAt(o)})},decompressFromEncodedURIComponent:function(a){return a==null?"":a==""?null:(a=a.replace(/ /g,"+"),l._decompress(a.length,32,function(o){return d(g,a.charAt(o))}))},compress:function(a){return l._compress(a,16,function(o){return s(o)})},_compress:function(a,o,h){if(a==null)return"";var v,_,y={},w={},T="",I="",O="",E=2,C=3,x=2,j=[],D=0,k=0,q;for(q=0;q<a.length;q+=1)if(T=a.charAt(q),Object.prototype.hasOwnProperty.call(y,T)||(y[T]=C++,w[T]=!0),I=O+T,Object.prototype.hasOwnProperty.call(y,I))O=I;else{if(Object.prototype.hasOwnProperty.call(w,O)){if(O.charCodeAt(0)<256){for(v=0;v<x;v++)D=D<<1,k==o-1?(k=0,j.push(h(D)),D=0):k++;for(_=O.charCodeAt(0),v=0;v<8;v++)D=D<<1|_&1,k==o-1?(k=0,j.push(h(D)),D=0):k++,_=_>>1}else{for(_=1,v=0;v<x;v++)D=D<<1|_,k==o-1?(k=0,j.push(h(D)),D=0):k++,_=0;for(_=O.charCodeAt(0),v=0;v<16;v++)D=D<<1|_&1,k==o-1?(k=0,j.push(h(D)),D=0):k++,_=_>>1}E--,E==0&&(E=Math.pow(2,x),x++),delete w[O]}else for(_=y[O],v=0;v<x;v++)D=D<<1|_&1,k==o-1?(k=0,j.push(h(D)),D=0):k++,_=_>>1;E--,E==0&&(E=Math.pow(2,x),x++),y[I]=C++,O=String(T)}if(O!==""){if(Object.prototype.hasOwnProperty.call(w,O)){if(O.charCodeAt(0)<256){for(v=0;v<x;v++)D=D<<1,k==o-1?(k=0,j.push(h(D)),D=0):k++;for(_=O.charCodeAt(0),v=0;v<8;v++)D=D<<1|_&1,k==o-1?(k=0,j.push(h(D)),D=0):k++,_=_>>1}else{for(_=1,v=0;v<x;v++)D=D<<1|_,k==o-1?(k=0,j.push(h(D)),D=0):k++,_=0;for(_=O.charCodeAt(0),v=0;v<16;v++)D=D<<1|_&1,k==o-1?(k=0,j.push(h(D)),D=0):k++,_=_>>1}E--,E==0&&(E=Math.pow(2,x),x++),delete w[O]}else for(_=y[O],v=0;v<x;v++)D=D<<1|_&1,k==o-1?(k=0,j.push(h(D)),D=0):k++,_=_>>1;E--,E==0&&(E=Math.pow(2,x),x++)}for(_=2,v=0;v<x;v++)D=D<<1|_&1,k==o-1?(k=0,j.push(h(D)),D=0):k++,_=_>>1;for(;;)if(D=D<<1,k==o-1){j.push(h(D));break}else k++;return j.join("")},decompress:function(a){return a==null?"":a==""?null:l._decompress(a.length,32768,function(o){return a.charCodeAt(o)})},_decompress:function(a,o,h){var v=[],_=4,y=4,w=3,T="",I=[],O,E,C,x,j,D,k,q={val:h(0),position:o,index:1};for(O=0;O<3;O+=1)v[O]=O;for(C=0,j=Math.pow(2,2),D=1;D!=j;)x=q.val&q.position,q.position>>=1,q.position==0&&(q.position=o,q.val=h(q.index++)),C|=(x>0?1:0)*D,D<<=1;switch(C){case 0:for(C=0,j=Math.pow(2,8),D=1;D!=j;)x=q.val&q.position,q.position>>=1,q.position==0&&(q.position=o,q.val=h(q.index++)),C|=(x>0?1:0)*D,D<<=1;k=s(C);break;case 1:for(C=0,j=Math.pow(2,16),D=1;D!=j;)x=q.val&q.position,q.position>>=1,q.position==0&&(q.position=o,q.val=h(q.index++)),C|=(x>0?1:0)*D,D<<=1;k=s(C);break;case 2:return""}for(v[3]=k,E=k,I.push(k);;){if(q.index>a)return"";for(C=0,j=Math.pow(2,w),D=1;D!=j;)x=q.val&q.position,q.position>>=1,q.position==0&&(q.position=o,q.val=h(q.index++)),C|=(x>0?1:0)*D,D<<=1;switch(k=C){case 0:for(C=0,j=Math.pow(2,8),D=1;D!=j;)x=q.val&q.position,q.position>>=1,q.position==0&&(q.position=o,q.val=h(q.index++)),C|=(x>0?1:0)*D,D<<=1;v[y++]=s(C),k=y-1,_--;break;case 1:for(C=0,j=Math.pow(2,16),D=1;D!=j;)x=q.val&q.position,q.position>>=1,q.position==0&&(q.position=o,q.val=h(q.index++)),C|=(x>0?1:0)*D,D<<=1;v[y++]=s(C),k=y-1,_--;break;case 2:return I.join("")}if(_==0&&(_=Math.pow(2,w),w++),v[k])T=v[k];else if(k===y)T=E+E.charAt(0);else return null;I.push(T),v[y++]=E+T.charAt(0),_--,E=T,_==0&&(_=Math.pow(2,w),w++)}}};return l})();e!=null?e.exports=t:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return t})})(lzString$2)),lzString$2.exports}var lzStringExports=requireLzString();const lzString=getDefaultExportFromCjs(lzStringExports),lzString$1=_mergeNamespaces({__proto__:null,default:lzString},[lzStringExports]);async function text_decompress(e){let t=await Promise.resolve().then(()=>lzString$1);return(t.default??t).decompressFromUTF16(e)}async function json_decompress(e){let t=await text_decompress(e);return json_from(t)}function list_is_assert_json(e,t){let s=list_is(e);assert_json_get(s,t)}function list_is_assert(e){function t(){return{list:e}}list_is_assert_json(e,t)}function list_size(e){return list_is_assert(e),e.length}function list_empty_is(e){return list_size(e)===0}function list_empty_not_is(e){let t=list_empty_is(e);return not(t)}function list_empty_not_is_assert(e){let t=list_empty_not_is(e);assert(t)}function list_index_end(e,t){return list_size(e)-1-t}function integer_is_assert(e){let t=integer_is(e);assert_json(t,{index:e})}function list_get(e,t){integer_is_assert(t);let s=e[t];undefined_not_is_assert_lambda(s,p);function p(){return{list:e,index:t}}return s}function list_get_end(e,t){const s=list_index_end(e,t);return list_get(e,s)}function list_last(e){return list_empty_not_is_assert(e),list_get_end(e,0)}function text_starts_with_not(e,t){let s=text_starts_with(e,t);return not(s)}function path_normalize(e){return e.replace(/\\/g,"/").replace(/\/+/g,"/").replace(/\/\.\//g,"/").replace(/\/$/,"").replace(/^\.\/+/,"")}function file_path_normalize(e){e=path_normalize(e);const t="../";return text_starts_with_not(e,t)&&(e=t+"love/"+e),e}function app_a_indexeddb_path_key(){return"key"}async function app_a(){await app_main_production("app_a_main","jared-grace")}async function app_a_indexeddb_initialize(){const e=app_a.name,t=1,s="files";return await new Promise(function(m,d){const l=indexedDB.open(e,t);l.onupgradeneeded=function(){const o=l.result;let h=o.objectStoreNames.contains(s);not(h)&&o.createObjectStore(s,{keyPath:app_a_indexeddb_path_key()})},l.onsuccess=function(){return m(l.result)},l.onerror=function(){return d(l.error)}})}function app_a_file_system_store(){return"files"}function property_equals(e,t,s){let p=property_get(e,t);return equal(p,s)}function property_equals_lambda(e,t){return function(g){return property_equals(g,e,t)}}function list_filter(e,t){list_is_assert(e);function s(g){return t(g)}return e.filter(s)}function list_size_assert_message(e,t,s){let p=list_size(e)===t;not(p)&&error_json({message:s,list:e,size:t})}function list_size_1_assert_message(e,t){list_size_assert_message(e,1,t)}function list_size_1_assert(e){list_size_1_assert_message(e,{})}function list_first(e){return list_get(e,0)}function list_single(e){return list_size_1_assert(e),list_first(e)}function list_find(e,t){let s=list_filter(e,t);return list_single(s)}function list_find_property(e,t,s){let p=property_equals_lambda(t,s);return list_find(e,p)}async function indexeddb_get_all_backend(e,t){const g=(await e()).transaction(t,"readonly").objectStore(t);return await new Promise(function(l,a){const o=g.getAll();o.onsuccess=function(){return l(o.result)},o.onerror=function(){return a(o.error)}})}async function indexeddb_get_all(e,t){let s=global_function_property_exists(indexeddb_get_all,t);if(not(s)){let g=await indexeddb_get_all_backend(e,t);global_function_property_set(indexeddb_get_all,t,g)}return global_function_property_get(indexeddb_get_all,t)}async function indexeddb_get(e,t,s){let p=await indexeddb_get_all(e,t);return list_find_property(p,"key",s)}function log$1(e){log_keep(e)}function log_keep(e){console.log(e)}function property_exists_not_assert(e,t){if(property_exists(e,t)){let p=property_get(e,t);log_keep(t),error_json({object:e,property_name:t,value:p})}}function property_set_exists_not(e,t,s){property_exists_not_assert(e,t),property_set(e,t,s)}function text_is(e){return typeof e=="string"}function text_is_assert(e){let t=text_is(e);assert(t)}function server_url_api(){return"/api"}function server_port(){return 8080}function server_url(){return"http://localhost:"+server_port()}function server_url_get(){let e=null;return e=ternary(browser_is(),"",server_url()),e+=server_url_api(),e}function list_to(e){return Array.from(e)}function app_api_generic_f_name_args(e,t){let s=list_to(t);return{f_name:e,args:s}}function app_api_generic_url_body(e,t){let s=app_api_generic_f_name_args(e,t);return{url:server_url_get(),body:s}}function property_initialize(e,t,s){const p=property_exists(e,t);return not(p)&&property_set(e,t,s),property_get(e,t)}async function app_api_generic(e){arguments_assert(arguments,1);let t=property_get(e,"f_name"),s=property_initialize(e,"args",[]),p=property_get(e,"fn_http");var g=app_api_generic_url_body(t,s);let m=property_get(g,"body"),d=property_get(g,"url"),l=await p(d,m);return property_get(l,"result")}function properties_get(e){return Object.getOwnPropertyNames(e)}function object_merge_generic(e,t,s){function p(m){property_exists(t,m)&&error_json({to:t,from:s,property_name:m});let d=property_get(s,m);property_set(t,m,d)}let g=properties_get(s);each(g,p)}function object_merge(e,t){return object_merge_generic(!0,e,t),e}async function http_post_options(e,t,s){const p={method:"POST",body:t};return object_merge(p,s),await http_generic(e,p)}async function http_post(e,t){return await http_post_options(e,t,{})}function buffer_to_json(e){let t=buffer_text_to(e);return json_from(t)}async function http_post_json(e,t){let s=await http_post(e,t);return buffer_to_json(s)}async function app_api(e){arguments_assert(arguments,1);let t=property_get(e,"f_name");return text_is_assert(t),property_set_exists_not(e,"fn_http",http_post_json),await app_api_generic(e)}async function app_api_fn(e){let s=property_get(e,"fn").name;return property_set_exists_not(e,"f_name",s),await app_api(e)}function each_index(e,t){let s=0;function p(g){t(g,s),s++}each(e,p)}function property_exists_not(e,t){let s=property_exists(e,t);return not(s)}function list_property_exists_not_error(e,t){function s(p,g){property_exists_not(p,t)&&error$1({index:g})}each_index(e,s)}function list_add(e,t){e.push(t)}function list_to_dictionary(e,t,s){let p={};function g(m){let d=s(m),l=t(m);property_set_exists_not(p,d,l)}return each(e,g),p}function identity(e){return e}function list_to_dictionary_key(e,t){return list_to_dictionary(e,identity,t)}function list_to_dictionary_property(e,t){function s(g){return property_get(g,t)}return list_to_dictionary_key(e,s)}function list_add_multiple(e,t){e.push(...t)}function list_remove_at_count(e,t,s){return e.splice(t,s)}function list_remove_at(e,t){let s=list_remove_at_count(e,t,1);return list_single(s)}function list_index_of(e,t){let s=e.indexOf(t);return s<=-1&&error_json({list:e,item:t,index:s}),s}function list_remove(e,t){const s=list_index_of(e,t);list_remove_at(e,s)}function list_remove_multiple(e,t){function s(p){list_remove(e,p)}each(t,s)}function list_includes(e,t){return e.includes(t)}function property_get_curried_right(e){return function(p){return property_get(p,e)}}function list_map(e,t){return list_is_assert(e),e.map(t)}function list_map_property(e,t){let s=property_get_curried_right(t);return list_map(e,s)}function object_values(e){return Object.values(e)}function each_object(e,t){function s(g){let m=property_get(e,g);t(m,g)}let p=properties_get(e);each(p,s)}function each_object_values(e,t){function s(p,g){t(p)}each_object(e,s)}async function indexeddb_put_multiple_backend(e,t,s){const p=await e().transaction(t,"readwrite"),g=p.objectStore(t);function m(d){g.put(d)}each_object_values(s,m),await new Promise(function(l,a){p.oncomplete=l,p.onerror=function(){return a(p.error)},p.onabort=function(){return a(p.error)}})}function invoke(e){return e()}function promise_resolved(){return Promise.resolve(null)}function indexeddb_next(e){let t=promise_resolved(),s=global_function_initialize(indexeddb_next,t),p=invoke(e);s=s.then(p),global_function_set(indexeddb_next,s)}async function indexeddb_put_multiple(e,t,s){'at time of writing, indexeddb code only uses key value of "key" therefore this function could be made general to receive key name as param';let p="key",g=object_values(s),m=list_map_property(g,p),d=await indexeddb_get_all(e,t);function l(h){let v=property_get(h,p);return list_includes(m,v)}let a=list_filter(d,l);list_remove_multiple(d,a),list_add_multiple(d,g);async function o(){await indexeddb_put_multiple_backend(e,t,s)}indexeddb_next(o)}function undefined_is_if_null(e){return undefined_is(e)&&(e=null),e}function storage_local_specify_set(e,t){t=undefined_is_if_null(t);let s=json_to({value:t});localStorage.setItem(e,s)}function storage_local_key_get(e,t){return e.name+" "+t}function global_function_get(e){let t=global_get();return property_get(t,e.name)}function global_function_exists(e){let t=global_get();return property_exists(t,e.name)}function storage_local_enabled(){let e=global_function_exists(storage_local_enabled);return not(e)||global_function_get(storage_local_enabled)===!0}function storage_local_set(e,t,s){let p=storage_local_key_get(e,t);if(storage_local_enabled()){storage_local_specify_set(p,s);return}global_function_property_set(storage_local_set,p,s)}async function text_compress(e){const t=await Promise.resolve().then(()=>lzString$1);return(t.default??t).compressToUTF16(e)}async function json_compress(e){let t=json_to(e);return await text_compress(t)}async function json_compress_object(e){return{compressed:await json_compress(e)}}async function list_wait(e){return await Promise.all(e)}async function list_map_unordered_async(e,t){let s=list_map(e,t);return await list_wait(s)}function text_slash_forward(){return"/"}function folder_previous(){return".."}function path_join(e){arguments_assert(arguments,1);let t=[];for(let g of e){if(not(g))continue;let m=g.split(/[\\/]+/);for(let d of m)if(!(d===""||d==="."))if(d===folder_previous())if(t.length>0&&t[t.length-1]!==folder_previous())t.pop();else{let l=folder_previous();t.push(l)}else t.push(d)}let s=text_slash_forward();return t.join(s)}function list_map_path_join_left(e,t){function s(g){return path_join([t,g])}return list_map(e,s)}function folder_read_recursive_paths_to(e,t){let s=list_map_path_join_left(e,t);return list_map(s,path_normalize)}function list_includes_not(e,t){let s=list_includes(e,t);return not(s)}async function folder_read_recursive_skipped_async(e,t){const s=await Promise.resolve().then(()=>__viteBrowserExternal$1),p=await Promise.resolve().then(()=>__viteBrowserExternal$1);let g=[];const m=await s.readdir(e,{withFileTypes:!0});for(const d of m){let l=property_get(d,"name");if(d.isFile())g.push(l);else if(d.isDirectory()&&list_includes_not(t,l)){let v=function(_){return p.join(l,_)};const o=p.join(e,l),h=await folder_read_recursive_skipped_async(o,t);g.push(...h.map(v))}}return g}async function folder_read_recursive_skipped_paths_async(e,t){let s=await folder_read_recursive_skipped_async(e,t);return folder_read_recursive_paths_to(s,e)}function repos_folder(){return folder_previous()}function list_any(e,t){let s=list_filter(e,t);return list_empty_not_is(s)}function text_ends_with(e,t){return e.endsWith(t)}function list_filter_ends_with_any(e,t){function s(g){function m(l){return text_ends_with(g,l)}return list_any(t,m)}return list_filter(e,s)}function html_extension(){return".html"}function function_name_extension(){return".mjs"}async function app_a_download_paths(){let e=repos_folder(),t=await folder_read_recursive_skipped_paths_async(e,["node_modules",".git"]),s=function_name_extension(),p=html_extension(),g=json_extension();return list_filter_ends_with_any(t,[s,p,g])}async function app_a_download(){let e=await app_a_download_paths();async function t(p){let m={versions:[await file_read(p)]},d=await json_compress_object(m);return object_merge(d,{key:p}),d}let s=await list_map_unordered_async(e,t);return list_property_exists_not_error(s,"key"),s}async function app_a_file_system_initialize_download(){let e=await app_a_indexeddb_initialize(),t=lambda_get(e),s=await app_api_fn({fn:app_a_download});list_property_exists_not_error(s,"key");let p=list_to_dictionary_property(s,"key"),g=app_a_file_system_store();await indexeddb_put_multiple(t,g,p),storage_local_set(app_a,app_a_file_system_initialize.name,!0);let m=await indexeddb_get_all(t,g);list_property_exists_not_error(m,"key")}async function property_initialize_lambda_async(e,t,s){const p=property_exists(e,t);if(not(p)){let m=s();property_set(e,t,m)}return await property_get(e,t)}async function global_function_initialize_lambda_async(e,t){arguments_assert(arguments,2);let s=global_get();return await property_initialize_lambda_async(s,e.name,t)}function storage_local_specify_get_json(e){return localStorage.getItem(e)}function storage_local_exists_global(e){return global_function_property_exists(storage_local_set,e)}function storage_local_exists(e,t){let s=storage_local_key_get(e,t);return storage_local_enabled()?storage_local_specify_get_json(s)!==null:storage_local_exists_global(s)}async function app_a_file_system_initialize(){if(storage_local_exists(app_a,app_a_file_system_initialize.name))return;async function t(){return await app_a_file_system_initialize_download(),!0}await global_function_initialize_lambda_async(app_a_file_system_initialize,t)}async function file_read(e){if(global_function_property_exists(file_read_cached,e))return await global_function_property_get(file_read_cached,e);if(browser_is()){e=file_path_normalize(e),await app_a_file_system_initialize();let g=app_a_file_system_store(),m=await indexeddb_get(app_a_indexeddb_initialize,g,e),d=property_get(m,"compressed"),l=await json_decompress(d),a=property_get(l,"versions");return list_last(a)}return await(await Promise.resolve().then(()=>__viteBrowserExternal$1)).promises.readFile(e,"utf-8")}async function file_read_json(e){let t=await file_read(e);return json_from(t)}function repo_path(e){let t=repos_folder();return path_join([t,e])}function repo_path_combine(e,t){let s=repo_path(e);return path_join([s,t])}async function firebase_name_repo(e){let s=repo_path_combine(e,".firebaserc"),p=await file_read_json(s),g=property_get(p,"projects");return property_get(g,"default")}function list_includes_assert(e,t){let s=list_includes(e,t);assert(s)}function folder_vscode(){return".vscode"}function equal_not(e,t){let s=equal(e,t);return not(s)}function global_function_cache_generic(e,t,s){let p=json_to(e),g=property_get(t,"json");if(equal_not(p,g)){let d=s();property_set(t,"result",d),property_set(t,"json",p)}return property_get(t,"result")}function global_function_property_initialize(e,t,s){let p=global_get(),g=property_initialize(p,e.name,{});return property_initialize(g,t,s)}function global_function_property_cache(e,t,s,p){let g=global_function_property_initialize(e,t,{json:null,result:null});return global_function_cache_generic(s,g,p)}function set_add(e,t){e.add(t)}function set_new(){return new Set}function list_unique_set(e){let t=set_new();function s(p){set_add(t,p)}return each(e,s),t}function list_unique(e){return[...list_unique_set(e)]}function text_index_of_try(e,t){return e.indexOf(t)}function text_split_first(e,t){let s=text_index_of_try(e,t);return s<0?e:text_take(e,s)}function text_size(e){return e.length}function text_skip(e,t){let s=text_size(e);return text_slice(e,t,s)}function text_prefix_without_inner(e,t){let s=text_size(t);return text_skip(e,s)}function text_prefix_without(e,t){let s=text_starts_with(e,t);function p(){return{s:e,prefix:t}}return assert_json_get(s,p),not(s)&&error$1(),text_prefix_without_inner(e,t)}function list_map_prefix_without(e,t){function s(g){return text_prefix_without(g,t)}return list_map(e,s)}function list_filter_starts_with(e,t){function s(g){return text_starts_with(g,t)}return list_filter(e,s)}function list_filter_property_exclude_if_exists(e,t,s){function p(m){return property_exists(m,t)?property_get(m,t)!==s:!0}return list_filter(e,p)}async function app_a_files_paths(){let e=app_a_file_system_store(),t=await indexeddb_get_all(app_a_indexeddb_initialize,e),s=list_filter_property_exclude_if_exists(t,"deleted",!0),p=app_a_indexeddb_path_key();return list_map_property(s,p)}async function folder_read_browser(e){let t=await app_a_files_paths();return global_function_property_cache(folder_read_browser,e,t,p);function p(){let g=path_normalize(e),m=text_slash_forward(),d=""+g+m,l=list_filter_starts_with(t,d),a=list_map_prefix_without(l,d);function o(y){return text_split_first(y,m)}let h=list_map(a,o);return{unique:list_unique(h),prefix:d,filtered:l}}}async function folder_read(e){if(browser_is()){let p=await folder_read_browser(e);return property_get(p,"unique")}return await(await Promise.resolve().then(()=>__viteBrowserExternal$1)).promises.readdir(e)}async function repos_names(){let e=repos_folder(),t=await folder_read(e),p=[folder_vscode()];function g(d){return list_includes_not(p,d)}return list_filter(t,g)}async function repo_exists_assert(e){let t=await repos_names();list_includes_assert(t,e)}function list_size_1(e){return list_size(e)===1}function js_node_is(e){return property_exists(e,"type")}function js_node_type(e){return property_get(e,"type")}function js_node_type_is(e,t){return js_node_is(e)&&js_node_type(e)===t}function js_node_type_is_if(e,t,s){js_node_type_is(e,t)&&s()}function list_adder_generic(e,t){let s=[];function p(g){t(s,g)}return e(p),s}function list_adder(e){return list_adder_generic(e,list_add)}function list_adder_unique(e){let t=list_adder(e);return list_unique(t)}function js_node_types_is(e,t){function s(g){return js_node_type_is(e,g)}return list_any(t,s)}function promise_is(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"&&typeof e.catch=="function"}function promise_not_is(e){let t=promise_is(e);return not(t)}function list_pop(e){return e.pop()}function list_copy(e){return[...e]}function visit_filter_recursive(e,t,s,p,g){let m=s(e);if(not(m))return;list_add(g,e);let d=t(e);function l(h){visit_filter_recursive(h,t,s,p,g)}each(d,l);let a=list_copy(g);p({node:e,stack:a}),list_pop(g)!==e&&error$1()}function visit_filter(e,t,s,p){visit_filter_recursive(e,t,s,p,[])}function js_visit_children_get(e){if(list_is(e))return e;if(text_is(e))return[];function t(g){return property_get(e,g)}let s=properties_get(e);return list_map(s,t)}function js_visit_filter(e){return js_node_is(e)||list_is(e)}function js_visit(e,t){let s=promise_not_is(e);not(s)&&error$1(),visit_filter(e,js_visit_children_get,js_visit_filter,t)}function js_visit_types(e,t,s){function p(g){let m=property_get(g,"node");js_node_is(m)&&js_node_types_is(m,t)&&s(g)}js_visit(e,p)}function js_strings(e){function t(p){function g(m){let d=property_get(m,"node"),l=null;function a(){let v=property_get(d,"quasis");if(list_size_1(v)){let y=property_get(d,"expressions");if(list_empty_is(y)){let T=list_first(v),I=property_get(T,"value");l=property_get(I,"raw")}}}js_node_type_is_if(d,"TemplateLiteral",a);function o(){l=property_get(d,"value")}js_node_type_is_if(d,"Literal",o),text_is(l)&&p(l)}js_visit_types(e,["Literal","TemplateLiteral"],g)}return list_adder_unique(t)}function js_literal_is(e){return js_node_type_is(e,"Literal")}function js_literal_is_assert(e){let t=js_literal_is(e);assert(t)}function js_visit_type(e,t,s){js_visit_types(e,[t],s)}function js_visit_calls(e,t){js_visit_type(e,"CallExpression",t)}function js_node_type_not_is(e,t){let s=js_node_type_is(e,t);return not(s)}function js_identifier_not_is(e){return js_node_type_not_is(e,"Identifier")}function property_get_name(e){return property_get(e,"name")}function js_call_callee_name(e){let t=null;if(js_node_type_not_is(e,"CallExpression"))return t;let p=property_get(e,"callee");return js_identifier_not_is(p)||(t=property_get_name(p)),t}function js_visit_calls_named(e,t,s){function p(g){let m=property_get(g,"node"),d=js_call_callee_name(m);if(equal_not(d,t))return;let l=property_get(m,"arguments");s({v:g,args:l})}js_visit_calls(e,p)}function js_flo(e){function t(m){function d(l){let a=property_get(l,"node");m(a)}js_visit_type(e,"ExportNamedDeclaration",d)}let s=list_adder(t),p=list_single(s);return property_get(p,"declaration")}function list_difference(e,t){function s(g){function m(d){let l=list_includes(t,d);not(l)&&g(d)}each(e,m)}return list_adder(s)}function list_add_if_not_includes(e,t){"rename includes to exists todo";let s=list_includes(e,t);not(s)&&list_add(e,t)}function js_identifiers_names(e){function t(p){function g(m){let d=property_get(m,"node"),l=property_get(d,"name");p(l)}js_visit_type(e,"Identifier",g)}return list_adder_unique(t)}function path_base(e){return e.split(/[/\\]/).pop()}function path_name(e){const t=path_base(e);let s=t.lastIndexOf(".");return t.includes(".")?t.slice(0,s):t}function function_path_to_name(e){return path_name(e)}function data_file_update_inner(e,t){let s=property_get(e,"f_path"),p=function_path_to_name(s),g=property_get(e,"ast"),m=property_initialize(t,"functions",{}),d=property_initialize(m,p,{}),l=js_flo(g),a=property_get(l,"async");property_set(d,"async",a);function o(w,T){let I=property_initialize(t,w,{});function O(C){let x=property_initialize(I,C,[]);list_add_if_not_includes(x,p)}each(T,O);let E=property_initialize(d,w,[]);list_difference(E,T),property_set(d,w,T)}let h=js_identifiers_names(g);o("identifiers",h);let v=js_strings(g);o("strings",v);function _(w){js_visit_calls_named(g,fn_name.name,T);function T({args:I}){let O=list_first(I);js_literal_is_assert(O);let E=property_get(O,"value");w(E)}}let y=list_adder(_);o("identifiers_fn_names",y)}function data_file_update_inner_curried_right(e){return function(p){return data_file_update_inner(p,e)}}function js_parse_generic(e,t){let s=null;try{s=e.parse(t,{ecmaVersion:2020,sourceType:"module"})}catch(p){throw log_keep(t),p}return s}async function js_parse_async(e){const t=await Promise.resolve().then(()=>acorn);return js_parse_generic(t,e)}async function file_js_parse(e){let t=await file_read(e);return{ast:await js_parse_async(t),code:t,f_path:e}}function list_squash(e){function t(p){g(e);function g(m){function d(l){let a=list_is(l),o=null;o=ternary(a,g,p),o(l)}each(m,d)}}return list_adder(t)}async function repos_paths_map_unordered(e){let t=await repos_names();async function s(g){let m=repo_path(g);return await e(m)}return await list_map_unordered_async(t,s)}async function repos_paths_map_unordered_combine(e,t){let s=await repos_paths_map_unordered(p);async function p(g){let m=path_join([g,e]);return t(m)}return s}function folder_src(){return"src"}function folder_public(){return"public"}function folder_public_join(e){let t=folder_public();return path_join([t,e])}function functions_path(){const e=folder_src();return folder_public_join(e)}async function repos_paths_map_unordered_combine_squash(e){let t=functions_path(),s=await repos_paths_map_unordered_combine(t,e);return list_squash(s)}function text_slice_0(e,t){return text_slice(e,0,t)}function string_skip_end(e,t){const s=text_size(e)-t;return text_slice_0(e,s)}function text_suffix_without(e,t){let s=text_ends_with(e,t);not(s)&&error$1();const p=text_size(t);return string_skip_end(e,p)}function null_is(e){return e===null}function list_all(e,t){let s=list_filter(e,t);return list_size(s)===list_size(e)}function list_multiple_is(e){return list_size(e)>=2}function list_one_other(e,t,s,p,g){let m=null,d=null;return list_empty_not_is(e)&&(m=t(e),list_multiple_is(e)&&(d=s(e))),{[p]:m,[g]:d}}function list_first_second_generic(e,t,s){return list_one_other(e,list_first,t,"first",s)}function list_slice(e,t,s){return e.slice(t,s)}function list_skip(e,t){let s=list_size(e);return list_slice(e,t,s)}function list_skip_1(e){return list_skip(e,1)}function list_first_remaining(e){return list_first_second_generic(e,list_skip_1,"remaining")}function set_includes(e,t){return e.has(t)}function list_intersect_multiple(e){let t=list_first_remaining(e),s=property_get(t,"first"),p=property_get(t,"remaining");if(null_is(p))return list_copy(s);let m=list_map(p,list_unique_set);function d(a){function o(h){function v(y){return set_includes(y,h)}list_all(m,v)&&a(h)}each(s,o)}return list_adder(d)}function list_intersect(e,t){return list_intersect_multiple([e,t])}function list_map_combine_left(e,t){function s(g){return t+g}return list_map(e,s)}function list_sort_text_mapper(e,t){function s(p,g){const m=t(p),d=t(g),[l,a]=m.split(/[_\.]/),[o,h]=d.split(/[_\.]/);return l.localeCompare(o)||Number(a)-Number(h)}e.sort(s)}function list_sort_text(e){list_sort_text_mapper(e,identity)}async function folder_read_files(e){if(browser_is()){e=file_path_normalize(e);let m=await folder_read_browser(e),d=property_get(m,"filtered"),l=property_get(m,"prefix"),a=property_get(m,"unique"),o=list_map_combine_left(a,l),h=list_intersect(d,o);return list_map(h,path_base)}let t=await Promise.resolve().then(()=>__viteBrowserExternal$1);function s(m){let d=path_join([e,m]);return t.statSync(d).isFile()}let g=t.readdirSync(e).filter(s);return list_sort_text(g),g}async function functions_names_from_path(e){let t=await folder_read_files(e);function s(g){let m=function_name_extension();return text_suffix_without(g,m)}return list_map(t,s)}function function_name_to_base(e){return e+function_name_extension()}function function_name_folder_to_path(e,t){let s=function_name_to_base(e);return path_join([t,s])}async function functions_paths(){async function e(s){let p=await functions_names_from_path(s);function g(d){return function_name_folder_to_path(d,s)}return list_map(p,g)}return await repos_paths_map_unordered_combine_squash(e)}async function data_generate(e){let t=await functions_paths(),s=await list_map_unordered_async(t,file_js_parse),p=data_file_update_inner_curried_right(e);each(s,p)}function data_folder(){return"data"}function file_name_json_folder(e,t){let s=path_join([e,t]);return file_name_json(s)}function data_path_generic(e,t){const s=t+e,p=data_folder();return file_name_json_folder(p,s)}function data_path(){let e="";const t=data_folder();return data_path_generic(e,t)}function list_filter_property(e,t,s){let p=property_equals_lambda(t,s);return list_filter(e,p)}function list_find_property_exists(e,t,s){let p=list_filter_property(e,t,s);return list_size_1(p)}async function indexeddb_exists(e,t,s){let g=await indexeddb_get_all(e,t);return list_property_exists_not_error(g,"key"),list_find_property_exists(g,"key",s)}async function throws_not_async(e){let t=null;try{await e(),t=!0}catch{t=!1}return t}async function file_exists(e){if(browser_is()){e=file_path_normalize(e),await app_a_file_system_initialize();let l=app_a_file_system_store();return await indexeddb_exists(app_a_indexeddb_initialize,l,e)}promise_is(e)&&error$1();let t=await Promise.resolve().then(()=>__viteBrowserExternal$1),s=t.promises,p=property_get(s,"access"),g=property_get(t,"constants"),m=await throws_not_async(d);async function d(){await p(e,g.F_OK)}return m}async function file_exists_not_assert(e){await file_exists(e)&&error$1(e)}async function file_write_generic(e,t,s){await file_exists_not_assert(e),await t(e,s)}function property_delete_if_exists(e,t){property_exists(e,t)&&property_delete(e,t)}function text_empty_is(e){return e===""}async function functions_names(){let e=await repos_paths_map_unordered_combine_squash(t);async function t(s){return await functions_names_from_path(s)}return e}async function folder_exists_ensure(e){let t=await Promise.resolve().then(()=>__viteBrowserExternal$1),s=await Promise.resolve().then(()=>__viteBrowserExternal$1);return await t.promises.mkdir(e,{recursive:!0}),s}function text_empty_not_is(e){let t=text_empty_is(e);return not(t)}async function file_root_exists(e){let s=(await Promise.resolve().then(()=>__viteBrowserExternal$1)).parse(e),p=property_get(s,"root"),g=text_empty_not_is(p),m=!0;if(g){async function l(){await(await Promise.resolve().then(()=>__viteBrowserExternal$1)).promises.access(p)}m=await throws_not_async(l)}return{exists:m,root:p}}async function file_root_exists_assert(e){let{exists:t,root:s}=await file_root_exists(e);assert_json(t,{file_path:e,root:s,message:"root does not exist"})}async function file_parent_exists_ensure(e){await file_root_exists_assert(e);const s=(await Promise.resolve().then(()=>__viteBrowserExternal$1)).dirname(e);await folder_exists_ensure(s)}async function data_file_update(e){}function list_find_property_or_null(e,t,s){let p=property_equals_lambda(t,s),g=list_filter(e,p);return list_empty_is(g)?null:list_single(g)}async function indexeddb_put_backend(e,t,s,p){const m=(await e()).transaction(t,"readwrite");m.objectStore(t).put(p),await new Promise(function(a,o){m.oncomplete=a,m.onerror=function(){return o(m.error)},m.onabort=function(){return o(m.error)}})}function properties_delete_all(e){function t(p){return property_delete(e,p)}let s=properties_get(e);each(s,t)}function object_replace(e,t){equal_not(e,t)&&(properties_delete_all(e),object_merge(e,t))}async function indexeddb_put(e,t,s,p){let g=await indexeddb_get_all(e,t),m=list_find_property_or_null(g,"key",s);const d=await p(m);log$1({next:d}),null_is(m)?list_add(g,d):object_replace(m,d);async function l(){await indexeddb_put_backend(e,t,s,d)}return indexeddb_next(l),d}async function file_overwrite_uncached(e,t){if(browser_is()){e=file_path_normalize(e),await app_a_file_system_initialize();let s=app_a_file_system_store();async function p(g){const m="compressed";let d=null;if(null_is(g))d={versions:[""]},g={key:e};else{let v=property_get(g,m);d=await json_decompress(v)}text_empty_is(t)?property_set(g,"deleted",!0):property_delete_if_exists(g,"deleted");let o=property_get(d,"versions");list_add(o,t);let h=await json_compress(d);return property_set(g,m,h),g}await indexeddb_put(app_a_indexeddb_initialize,s,e,p);return}else await file_parent_exists_ensure(e),await(await Promise.resolve().then(()=>__viteBrowserExternal$1)).promises.writeFile(e,t,"utf-8");await data_file_update()}async function file_overwrite(e,t){text_is_assert(t);let s=global_function_property_exists(file_read_cached,e);s&&global_function_property_set(file_read_cached,e,t),not(s)&&await file_overwrite_uncached(e,t)}async function file_write(e,t){await file_write_generic(e,file_overwrite,t)}async function data_all_initialize(e){let t=await file_exists(e);if(not(t)){let s=json_format_to_truncated({});await file_write(e,s)}}async function data_all(e){let t={},s=data_path();return equal(e,s)?await data_generate(t):(await data_all_initialize(e),t=await file_read_json(e)),{data:t,file_path:e}}async function data_get(e,t,s){var p=await data_all(s);let g=property_get(p,"file_path"),m=property_get(p,"data");return{value:property_initialize(m,e,t),file_path:g,data:m}}function file_name_json_folder_gitignore(e){return file_name_json_folder("gitignore",e)}function user_repo_path(){return file_name_json_folder_gitignore("user")}async function user_repo_get(){let e=user_repo_path(),t=await data_get("repo_current",null,e),s=property_get(t,"value");return await repo_exists_assert(s),s}async function firebase_name(){if(browser_is())return global_function_get(firebase_name);let e=await user_repo_get();return await firebase_name_repo(e)}async function firebase_storage_url_project(){return await firebase_name()+".firebasestorage.app"}async function path_resolve(e){return(await Promise.resolve().then(()=>__viteBrowserExternal$1)).resolve(e)}function property_from(e,t,s){let p=property_get(s,t);property_set(e,t,p)}async function repos_paths_names_map_unordered(e){let t=await repos_names();async function s(g){let m=repo_path(g);return await e(g,m)}return await list_map_unordered_async(t,s)}async function repos_paths_names_map_unordered_combine(e,t){let s=await repos_paths_names_map_unordered(p);async function p(g,m){let d=path_join([m,e]);return{mapped:await t(d),repo_name:g}}return s}function true_is(e){return equal(e,!0)}function text_is_assert_message(e,t){let s=text_is(e);return assert_message(s,t)}function text_is_assert_json(e,t){let s=json_to(t);text_is_assert_message(e,s)}function text_includes(e,t){const s={input:e,part:t};return text_is_assert_json(e,s),text_is_assert_json(t,s),e.includes(t)}function function_name_to_path(e){text_includes(e,".")&&error_json({f_name:e});let t=functions_path();return function_name_folder_to_path(e,t)}async function function_name_to_path_search(e){let t=function_name_to_path(e);async function s(o){return{exists:await file_exists(o),f_path:o}}let p=await repos_paths_names_map_unordered_combine(t,s);function g(o){let h=property_get(o,"mapped"),v=property_get(h,"exists");return true_is(v)}let m=list_filter(p,g),d=list_multiple_is(m),l=list_size_1(m),a={f_name:e,exists:l,multiple:d};if(l){let o=list_single(m),h=property_get(o,"mapped");property_from(a,"f_path",h),property_from(a,"repo_name",o)}return a}async function function_import(e){let t=await function_name_to_path_search(e),s=property_get(t,"f_path");const m=(await import(`file://${await path_resolve(s)}`))[e];if(typeof m!="function")throw new Error(` The module "${e}" does not export a default function.`);return m}function global_function_cache(e,t,s){let p=global_function_initialize(e,{json:null,result:null});return global_function_cache_generic(t,p,s)}function undefined_not_is_assert(e){function t(){return{}}undefined_not_is_assert_lambda(e,t)}function object_invert(e){let t={};function s(p,g){undefined_not_is_assert(p);let m=property_initialize(t,p,[]);list_add(m,g)}return each_object(e,s),t}function text_empty(){return""}function list_join_empty(e){const t=text_empty();return list_join(e,t)}function text_split(e,t){return e.split(t)}function function_name_separator(){return"_"}function function_name_to_parts(e){let t=function_name_separator();return text_split(e,t)}function function_name_to_acronym(e){let t=function_name_to_parts(e),s=null;try{s=list_map(t,list_first)}catch(g){error_json({e:g,f_name:e})}return list_join_empty(s)}function list_to_dictionary_value(e,t){return list_to_dictionary(e,t,identity)}async function function_names_to_acronyms(){let e=await functions_names();return global_function_cache(function_names_to_acronyms,e,s);function s(){let p=list_to_dictionary_value(e,function_name_to_acronym);return object_invert(p)}}async function function_acronym_to_name(e){let t=null,s=null,p=await function_names_to_acronyms();return property_exists(p,e)&&(s=property_get(p,e),list_size_1(s)&&(t=list_single(s))),{expanded:t,expandeds:s}}function data_aliases_path(){return data_path_generic("","aliases")}async function function_alias_add_generic(e){let t=null,s=data_aliases_path();var{value:p,file_path:g,data:m}=await data_get("aliases",{},s);const d=property_exists(p,e);return d&&(t=property_get(p,e)),{exists:d,aliases:p,file_path:g,data:m,unaliased:t}}async function function_name_unalias(e){arguments_assert(arguments,1);var t=await function_alias_add_generic(e);let s=property_get(t,"unaliased"),p=property_get(t,"exists"),g=await function_acronym_to_name(e),m=property_get(g,"expandeds"),d=property_get(g,"expanded");return{unaliased:p?s:d!==null?d:e,expandeds:m}}async function function_import_unalias(e){let t=await function_name_unalias(e),s=property_get(t,"unaliased");return await function_import(s)}async function function_run_unalias(e,t){return await(await function_import_unalias(e))(...t)}function path_repo_combine(e,t){let s=repo_path(e);return path_join([s,t])}function path_repo_about(e){let t=data_path_generic("","about");return path_repo_combine(e,t)}async function repo_about_get(e,t){let s=path_repo_about(e),{value:p}=await data_get(t,null,s);return p}async function repo_firebase_service_account_get(e){return await repo_about_get(e,"firebase_service_account")}async function user_repo_firebase_service_account_get(){let e=await user_repo_get();return await repo_firebase_service_account_get(e)}async function firebase_service_account(){let e=await user_repo_firebase_service_account_get(),t=await function_run_unalias(e,[]);return await file_read_json(t)}async function firebase_admin_get(){const e=(await Promise.resolve().then(()=>index$1)).default;let t=await firebase_service_account();const s=await firebase_storage_url_project();return e.initializeApp({credential:e.credential.cert(t),storageBucket:s}),e}async function firebase_admin(){return await global_function_async(firebase_admin,firebase_admin_get)}async function firebase_bucket(){return(await firebase_admin()).storage().bucket()}function text_replace(e,t,s){let p=text_split(e,t);return list_join(p,s)}function firebase_path_fix(e){return text_replace(e,"\\","/")}async function firebase_storage_url(e){let t=text_replace(e,"/","%2F");return"https://firebasestorage.googleapis.com/v0/b/"+await firebase_storage_url_project()+"/o/"+t+"?alt=media"}async function firebase_storage_download(e){if(e=firebase_path_fix(e),browser_is()){async function g(){let d=await firebase_storage_url(e);return await http(d)}return await html_loading(g)}const s=await firebase_bucket();let[p]=await s.file(e).download();return p}async function firebase_storage_download_property(e,t){let s=await firebase_storage_download(e);const p=buffer_text_to(s);let g=json_from(p);return property_get(g,t)}async function firebase_storage_function_run_generic(version_get,f_name,call){let destination_version=version_get(f_name),destination=await firebase_storage_download_property(destination_version,"destination"),code=await firebase_storage_download_property(destination,"code"),global_init=js_code_global_init(),joined=list_join_newline([global_init,code,call]);if(browser_is()){let e=html_document_body(),t=html_element(e,"script");html_attribute_set(t,"type","module"),html_text_set(t,joined)}else eval(joined)}async function app_main(e,t,s){global_function_initialize(firebase_name,t);let p=js_code_call_app_context_initialize(e);await firebase_storage_function_run_generic(s,e,p)}async function app_main_production(e,t){return await app_main(e,t,firebase_deploy_function_destination_production)}async function app_search(){await app_main_production("app_search_main","jared-grace")}function html_centered(e){html_style_set(e,"text-align","center")}function html_div_text(e,t){let s=html_div(e);return html_text_set(s,t),s}function html_div_text_centered(e,t){let s=html_div_text(e,t);return html_centered(s),s}function html_p(e){return html_element(e,"p")}async function app_g(){await app_main_production("app_g_main","jared-grace")}function html_width_full(e){html_style_assign(e,{width:"100%"})}function function_is(e){return typeof e=="function"}function function_is_assert(e){let t=function_is(e);assert_json(t,{lambda:e})}function html_on(e,t,s){function_is_assert(s),html_component_element_get(e).addEventListener(t,s)}function html_on_click(e,t){html_on(e,"click",t)}function html_style_font_size_inherit(e){html_style_font_size(e,"inherit")}function html_button_element(e){let s=html_element(e,"button");return html_style_font_size_inherit(s),s}function html_button_notext(e,t){let s=html_button_element(e);return html_on_click(s,t),s}function html_button(e,t,s){arguments_assert(arguments,3);let p=html_button_notext(e,s);return html_text_set(p,t),p}function html_button_wide(e,t,s){let p=html_button(e,t,s);return html_width_full(p),p}function app_shared_name_prefix(){return"app"}function app_prefix_without(e){let t=app_shared_name_prefix()+function_name_separator()+"";return text_prefix_without(e.name,t)}function html_hash_symbol(){return"#"}function list_join_comma(e){return list_join(e,",")}function hash_to_url(e){function t(d){function l(a,o){let h=o+"="+a;d(h)}each_object(e,l)}let s=list_adder(t),p=list_join_comma(s);return html_hash_symbol()+p}function window_open(e){window.open(e,"_blank")}function file_name_html(e){return e+html_extension()}function window_open_app(e,t){let s=app_prefix_without(e),p=file_name_html(s),g=hash_to_url(t);window_open(p+g)}function window_open_app_curried_right(e){return function(p){return window_open_app(p,e)}}async function app_bible(){await app_main_production("app_bible_main","jared-grace")}async function app_reply(){await app_main_production("app_reply_main","jared-grace")}async function app_designs_universal(){await app_main_production("app_designs_universal_main","jared-grace")}async function app_replace(){await app_main_production("app_replace_main","jared-grace")}async function app_supper(){await app_main_production("app_supper_main","jared-grace")}async function app_ceb_bible(){await app_main_production("app_ceb_bible_main","jared-grace")}async function app_original_bible(){await app_main_production("app_original_bible_main","jared-grace")}function app_index_main(e){let t=property_get(e,"root");html_mobile_default(e);let s=[{app_fn:app_reply,text:"Allows you to choose languages, multiple encouraging bible verses and responses to copy and paste as messages"},{app_fn:app_search,text:"Allows search across multiple versions of the Bible in English and copying results in multiple languages"},{app_fn:app_bible,text:"Allows reading the Bible"},{app_fn:app_original_bible,text:"Allows learning the ancient Greek of the Bible by reading the Bible in ancient Greek (with word defintions and explanations) - Only John 1 and 1 Peter 4 at this time"},{app_fn:app_ceb_bible,text:"Allows learning the language Cebuano by reading the Bible in Cebuano (with word defintions and explanations) - Only Song of Solomon, James and John 1 at this time"},{app_fn:app_supper,text:"Bible verses and prayers for Lord's Supper"},{app_fn:app_g,text:"Gospel sharing game"},{app_fn:app_replace,text:"Teaches computer programming basics using substitution rules"},{app_fn:app_designs_universal,text:"Displays different possible designs"}],g=window_open_app_curried_right({});function m(d){let l=property_get(d,"app_fn"),a=app_prefix_without(l);function o(){g(l)}let h=html_p(t);html_button_wide(h,a,o);let v=property_get(d,"text");html_div_text_centered(h,v)}each(s,m)}const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"}));var astralIdentifierCodes=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],astralIdentifierStartCodes=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],nonASCIIidentifierChars="-----------------------------------------------------------------------------------------------------------------------------------------------------",nonASCIIidentifierStartChars="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",reservedWords={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},ecma5AndLessKeywords="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",keywords$1$1={5:ecma5AndLessKeywords,"5module":ecma5AndLessKeywords+" export import",6:ecma5AndLessKeywords+" const class extends export import super"},keywordRelationalOperator=/^in(stanceof)?$/,nonASCIIidentifierStart=new RegExp("["+nonASCIIidentifierStartChars+"]"),nonASCIIidentifier=new RegExp("["+nonASCIIidentifierStartChars+nonASCIIidentifierChars+"]");function isInAstralSet(e,t){for(var s=65536,p=0;p<t.length;p+=2){if(s+=t[p],s>e)return!1;if(s+=t[p+1],s>=e)return!0}return!1}function isIdentifierStart(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&nonASCIIidentifierStart.test(String.fromCharCode(e)):t===!1?!1:isInAstralSet(e,astralIdentifierStartCodes)}function isIdentifierChar(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&nonASCIIidentifier.test(String.fromCharCode(e)):t===!1?!1:isInAstralSet(e,astralIdentifierStartCodes)||isInAstralSet(e,astralIdentifierCodes)}var TokenType=function e(t,s){s===void 0&&(s={}),this.label=t,this.keyword=s.keyword,this.beforeExpr=!!s.beforeExpr,this.startsExpr=!!s.startsExpr,this.isLoop=!!s.isLoop,this.isAssign=!!s.isAssign,this.prefix=!!s.prefix,this.postfix=!!s.postfix,this.binop=s.binop||null,this.updateContext=null};function binop(e,t){return new TokenType(e,{beforeExpr:!0,binop:t})}var beforeExpr={beforeExpr:!0},startsExpr={startsExpr:!0},keywords$2={};function kw(e,t){return t===void 0&&(t={}),t.keyword=e,keywords$2[e]=new TokenType(e,t)}var types$1$1={num:new TokenType("num",startsExpr),regexp:new TokenType("regexp",startsExpr),string:new TokenType("string",startsExpr),name:new TokenType("name",startsExpr),privateId:new TokenType("privateId",startsExpr),eof:new TokenType("eof"),bracketL:new TokenType("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new TokenType("]"),braceL:new TokenType("{",{beforeExpr:!0,startsExpr:!0}),braceR:new TokenType("}"),parenL:new TokenType("(",{beforeExpr:!0,startsExpr:!0}),parenR:new TokenType(")"),comma:new TokenType(",",beforeExpr),semi:new TokenType(";",beforeExpr),colon:new TokenType(":",beforeExpr),dot:new TokenType("."),question:new TokenType("?",beforeExpr),questionDot:new TokenType("?."),arrow:new TokenType("=>",beforeExpr),template:new TokenType("template"),invalidTemplate:new TokenType("invalidTemplate"),ellipsis:new TokenType("...",beforeExpr),backQuote:new TokenType("`",startsExpr),dollarBraceL:new TokenType("${",{beforeExpr:!0,startsExpr:!0}),eq:new TokenType("=",{beforeExpr:!0,isAssign:!0}),assign:new TokenType("_=",{beforeExpr:!0,isAssign:!0}),incDec:new TokenType("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new TokenType("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:binop("||",1),logicalAND:binop("&&",2),bitwiseOR:binop("|",3),bitwiseXOR:binop("^",4),bitwiseAND:binop("&",5),equality:binop("==/!=/===/!==",6),relational:binop("</>/<=/>=",7),bitShift:binop("<</>>/>>>",8),plusMin:new TokenType("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:binop("%",10),star:binop("*",10),slash:binop("/",10),starstar:new TokenType("**",{beforeExpr:!0}),coalesce:binop("??",1),_break:kw("break"),_case:kw("case",beforeExpr),_catch:kw("catch"),_continue:kw("continue"),_debugger:kw("debugger"),_default:kw("default",beforeExpr),_do:kw("do",{isLoop:!0,beforeExpr:!0}),_else:kw("else",beforeExpr),_finally:kw("finally"),_for:kw("for",{isLoop:!0}),_function:kw("function",startsExpr),_if:kw("if"),_return:kw("return",beforeExpr),_switch:kw("switch"),_throw:kw("throw",beforeExpr),_try:kw("try"),_var:kw("var"),_const:kw("const"),_while:kw("while",{isLoop:!0}),_with:kw("with"),_new:kw("new",{beforeExpr:!0,startsExpr:!0}),_this:kw("this",startsExpr),_super:kw("super",startsExpr),_class:kw("class",startsExpr),_extends:kw("extends",beforeExpr),_export:kw("export"),_import:kw("import",startsExpr),_null:kw("null",startsExpr),_true:kw("true",startsExpr),_false:kw("false",startsExpr),_in:kw("in",{beforeExpr:!0,binop:7}),_instanceof:kw("instanceof",{beforeExpr:!0,binop:7}),_typeof:kw("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:kw("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:kw("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},lineBreak=/\r\n?|\n|\u2028|\u2029/,lineBreakG=new RegExp(lineBreak.source,"g");function isNewLine(e){return e===10||e===13||e===8232||e===8233}function nextLineBreak(e,t,s){s===void 0&&(s=e.length);for(var p=t;p<s;p++){var g=e.charCodeAt(p);if(isNewLine(g))return p<s-1&&g===13&&e.charCodeAt(p+1)===10?p+2:p+1}return-1}var nonASCIIwhitespace=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,skipWhiteSpace=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,ref=Object.prototype,hasOwnProperty=ref.hasOwnProperty,toString=ref.toString,hasOwn=Object.hasOwn||(function(e,t){return hasOwnProperty.call(e,t)}),isArray=Array.isArray||(function(e){return toString.call(e)==="[object Array]"}),regexpCache=Object.create(null);function wordsRegexp(e){return regexpCache[e]||(regexpCache[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function codePointToString(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var loneSurrogate=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Position=function e(t,s){this.line=t,this.column=s};Position.prototype.offset=function e(t){return new Position(this.line,this.column+t)};var SourceLocation=function e(t,s,p){this.start=s,this.end=p,t.sourceFile!==null&&(this.source=t.sourceFile)};function getLineInfo(e,t){for(var s=1,p=0;;){var g=nextLineBreak(e,p,t);if(g<0)return new Position(s,t-p);++s,p=g}}var defaultOptions={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},warnedAboutEcmaVersion=!1;function getOptions(e){var t={};for(var s in defaultOptions)t[s]=e&&hasOwn(e,s)?e[s]:defaultOptions[s];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!warnedAboutEcmaVersion&&typeof console=="object"&&console.warn&&(warnedAboutEcmaVersion=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),isArray(t.onToken)){var p=t.onToken;t.onToken=function(g){return p.push(g)}}return isArray(t.onComment)&&(t.onComment=pushComment(t,t.onComment)),t}function pushComment(e,t){return function(s,p,g,m,d,l){var a={type:s?"Block":"Line",value:p,start:g,end:m};e.locations&&(a.loc=new SourceLocation(this,d,l)),e.ranges&&(a.range=[g,m]),t.push(a)}}var SCOPE_TOP=1,SCOPE_FUNCTION=2,SCOPE_ASYNC=4,SCOPE_GENERATOR=8,SCOPE_ARROW=16,SCOPE_SIMPLE_CATCH=32,SCOPE_SUPER=64,SCOPE_DIRECT_SUPER=128,SCOPE_CLASS_STATIC_BLOCK=256,SCOPE_CLASS_FIELD_INIT=512,SCOPE_VAR=SCOPE_TOP|SCOPE_FUNCTION|SCOPE_CLASS_STATIC_BLOCK;function functionFlags(e,t){return SCOPE_FUNCTION|(e?SCOPE_ASYNC:0)|(t?SCOPE_GENERATOR:0)}var BIND_NONE=0,BIND_VAR=1,BIND_LEXICAL=2,BIND_FUNCTION=3,BIND_SIMPLE_CATCH=4,BIND_OUTSIDE=5,Parser=function e(t,s,p){this.options=t=getOptions(t),this.sourceFile=t.sourceFile,this.keywords=wordsRegexp(keywords$1$1[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var g="";t.allowReserved!==!0&&(g=reservedWords[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(g+=" await")),this.reservedWords=wordsRegexp(g);var m=(g?g+" ":"")+reservedWords.strict;this.reservedWordsStrict=wordsRegexp(m),this.reservedWordsStrictBind=wordsRegexp(m+" "+reservedWords.strictBind),this.input=String(s),this.containsEsc=!1,p?(this.pos=p,this.lineStart=this.input.lastIndexOf(`
`,p-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(lineBreak).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=types$1$1.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(SCOPE_TOP),this.regexpState=null,this.privateNameStack=[]},prototypeAccessors={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Parser.prototype.parse=function e(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},prototypeAccessors.inFunction.get=function(){return(this.currentVarScope().flags&SCOPE_FUNCTION)>0},prototypeAccessors.inGenerator.get=function(){return(this.currentVarScope().flags&SCOPE_GENERATOR)>0},prototypeAccessors.inAsync.get=function(){return(this.currentVarScope().flags&SCOPE_ASYNC)>0},prototypeAccessors.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e],s=t.flags;if(s&(SCOPE_CLASS_STATIC_BLOCK|SCOPE_CLASS_FIELD_INIT))return!1;if(s&SCOPE_FUNCTION)return(s&SCOPE_ASYNC)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},prototypeAccessors.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags;return(t&SCOPE_SUPER)>0||this.options.allowSuperOutsideMethod},prototypeAccessors.allowDirectSuper.get=function(){return(this.currentThisScope().flags&SCOPE_DIRECT_SUPER)>0},prototypeAccessors.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},prototypeAccessors.allowNewDotTarget.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e],s=t.flags;if(s&(SCOPE_CLASS_STATIC_BLOCK|SCOPE_CLASS_FIELD_INIT)||s&SCOPE_FUNCTION&&!(s&SCOPE_ARROW))return!0}return!1},prototypeAccessors.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&SCOPE_CLASS_STATIC_BLOCK)>0},Parser.extend=function e(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];for(var p=this,g=0;g<t.length;g++)p=t[g](p);return p},Parser.parse=function e(t,s){return new this(s,t).parse()},Parser.parseExpressionAt=function e(t,s,p){var g=new this(p,t,s);return g.nextToken(),g.parseExpression()},Parser.tokenizer=function e(t,s){return new this(s,t)},Object.defineProperties(Parser.prototype,prototypeAccessors);var pp$9=Parser.prototype,literal=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;pp$9.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){skipWhiteSpace.lastIndex=e,e+=skipWhiteSpace.exec(this.input)[0].length;var t=literal.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){skipWhiteSpace.lastIndex=e+t[0].length;var s=skipWhiteSpace.exec(this.input),p=s.index+s[0].length,g=this.input.charAt(p);return g===";"||g==="}"||lineBreak.test(s[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(g)||g==="!"&&this.input.charAt(p+1)==="=")}e+=t[0].length,skipWhiteSpace.lastIndex=e,e+=skipWhiteSpace.exec(this.input)[0].length,this.input[e]===";"&&e++}},pp$9.eat=function(e){return this.type===e?(this.next(),!0):!1},pp$9.isContextual=function(e){return this.type===types$1$1.name&&this.value===e&&!this.containsEsc},pp$9.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1},pp$9.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},pp$9.canInsertSemicolon=function(){return this.type===types$1$1.eof||this.type===types$1$1.braceR||lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},pp$9.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},pp$9.semicolon=function(){!this.eat(types$1$1.semi)&&!this.insertSemicolon()&&this.unexpected()},pp$9.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},pp$9.expect=function(e){this.eat(e)||this.unexpected()},pp$9.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var DestructuringErrors=function e(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};pp$9.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var s=t?e.parenthesizedAssign:e.parenthesizedBind;s>-1&&this.raiseRecoverable(s,t?"Assigning to rvalue":"Parenthesized pattern")}},pp$9.checkExpressionErrors=function(e,t){if(!e)return!1;var s=e.shorthandAssign,p=e.doubleProto;if(!t)return s>=0||p>=0;s>=0&&this.raise(s,"Shorthand property assignments are valid only in destructuring patterns"),p>=0&&this.raiseRecoverable(p,"Redefinition of __proto__ property")},pp$9.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},pp$9.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var pp$8=Parser.prototype;pp$8.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==types$1$1.eof;){var s=this.parseStatement(null,!0,t);e.body.push(s)}if(this.inModule)for(var p=0,g=Object.keys(this.undefinedExports);p<g.length;p+=1){var m=g[p];this.raiseRecoverable(this.undefinedExports[m].start,"Export '"+m+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var loopLabel={kind:"loop"},switchLabel={kind:"switch"};pp$8.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;skipWhiteSpace.lastIndex=this.pos;var t=skipWhiteSpace.exec(this.input),s=this.pos+t[0].length,p=this.input.charCodeAt(s);if(p===91||p===92)return!0;if(e)return!1;if(p===123||p>55295&&p<56320)return!0;if(isIdentifierStart(p,!0)){for(var g=s+1;isIdentifierChar(p=this.input.charCodeAt(g),!0);)++g;if(p===92||p>55295&&p<56320)return!0;var m=this.input.slice(s,g);if(!keywordRelationalOperator.test(m))return!0}return!1},pp$8.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;skipWhiteSpace.lastIndex=this.pos;var e=skipWhiteSpace.exec(this.input),t=this.pos+e[0].length,s;return!lineBreak.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(isIdentifierChar(s=this.input.charCodeAt(t+8))||s>55295&&s<56320))},pp$8.isUsingKeyword=function(e,t){if(this.options.ecmaVersion<17||!this.isContextual(e?"await":"using"))return!1;skipWhiteSpace.lastIndex=this.pos;var s=skipWhiteSpace.exec(this.input),p=this.pos+s[0].length;if(lineBreak.test(this.input.slice(this.pos,p)))return!1;if(e){var g=p+5,m;if(this.input.slice(p,g)!=="using"||g===this.input.length||isIdentifierChar(m=this.input.charCodeAt(g))||m>55295&&m<56320)return!1;skipWhiteSpace.lastIndex=g;var d=skipWhiteSpace.exec(this.input);if(d&&lineBreak.test(this.input.slice(g,g+d[0].length)))return!1}if(t){var l=p+2,a;if(this.input.slice(p,l)==="of"&&(l===this.input.length||!isIdentifierChar(a=this.input.charCodeAt(l))&&!(a>55295&&a<56320)))return!1}var o=this.input.charCodeAt(p);return isIdentifierStart(o,!0)||o===92},pp$8.isAwaitUsing=function(e){return this.isUsingKeyword(!0,e)},pp$8.isUsing=function(e){return this.isUsingKeyword(!1,e)},pp$8.parseStatement=function(e,t,s){var p=this.type,g=this.startNode(),m;switch(this.isLet(e)&&(p=types$1$1._var,m="let"),p){case types$1$1._break:case types$1$1._continue:return this.parseBreakContinueStatement(g,p.keyword);case types$1$1._debugger:return this.parseDebuggerStatement(g);case types$1$1._do:return this.parseDoStatement(g);case types$1$1._for:return this.parseForStatement(g);case types$1$1._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(g,!1,!e);case types$1$1._class:return e&&this.unexpected(),this.parseClass(g,!0);case types$1$1._if:return this.parseIfStatement(g);case types$1$1._return:return this.parseReturnStatement(g);case types$1$1._switch:return this.parseSwitchStatement(g);case types$1$1._throw:return this.parseThrowStatement(g);case types$1$1._try:return this.parseTryStatement(g);case types$1$1._const:case types$1$1._var:return m=m||this.value,e&&m!=="var"&&this.unexpected(),this.parseVarStatement(g,m);case types$1$1._while:return this.parseWhileStatement(g);case types$1$1._with:return this.parseWithStatement(g);case types$1$1.braceL:return this.parseBlock(!0,g);case types$1$1.semi:return this.parseEmptyStatement(g);case types$1$1._export:case types$1$1._import:if(this.options.ecmaVersion>10&&p===types$1$1._import){skipWhiteSpace.lastIndex=this.pos;var d=skipWhiteSpace.exec(this.input),l=this.pos+d[0].length,a=this.input.charCodeAt(l);if(a===40||a===46)return this.parseExpressionStatement(g,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),p===types$1$1._import?this.parseImport(g):this.parseExport(g,s);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(g,!0,!e);var o=this.isAwaitUsing(!1)?"await using":this.isUsing(!1)?"using":null;if(o)return t&&this.options.sourceType==="script"&&this.raise(this.start,"Using declaration cannot appear in the top level when source type is `script`"),o==="await using"&&(this.canAwait||this.raise(this.start,"Await using cannot appear outside of async function"),this.next()),this.next(),this.parseVar(g,!1,o),this.semicolon(),this.finishNode(g,"VariableDeclaration");var h=this.value,v=this.parseExpression();return p===types$1$1.name&&v.type==="Identifier"&&this.eat(types$1$1.colon)?this.parseLabeledStatement(g,h,v,e):this.parseExpressionStatement(g,v)}},pp$8.parseBreakContinueStatement=function(e,t){var s=t==="break";this.next(),this.eat(types$1$1.semi)||this.insertSemicolon()?e.label=null:this.type!==types$1$1.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var p=0;p<this.labels.length;++p){var g=this.labels[p];if((e.label==null||g.name===e.label.name)&&(g.kind!=null&&(s||g.kind==="loop")||e.label&&s))break}return p===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,s?"BreakStatement":"ContinueStatement")},pp$8.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},pp$8.parseDoStatement=function(e){return this.next(),this.labels.push(loopLabel),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(types$1$1._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(types$1$1.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},pp$8.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(loopLabel),this.enterScope(0),this.expect(types$1$1.parenL),this.type===types$1$1.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var s=this.isLet();if(this.type===types$1$1._var||this.type===types$1$1._const||s){var p=this.startNode(),g=s?"let":this.value;return this.next(),this.parseVar(p,!0,g),this.finishNode(p,"VariableDeclaration"),this.parseForAfterInit(e,p,t)}var m=this.isContextual("let"),d=!1,l=this.isUsing(!0)?"using":this.isAwaitUsing(!0)?"await using":null;if(l){var a=this.startNode();return this.next(),l==="await using"&&this.next(),this.parseVar(a,!0,l),this.finishNode(a,"VariableDeclaration"),this.parseForAfterInit(e,a,t)}var o=this.containsEsc,h=new DestructuringErrors,v=this.start,_=t>-1?this.parseExprSubscripts(h,"await"):this.parseExpression(!0,h);return this.type===types$1$1._in||(d=this.options.ecmaVersion>=6&&this.isContextual("of"))?(t>-1?(this.type===types$1$1._in&&this.unexpected(t),e.await=!0):d&&this.options.ecmaVersion>=8&&(_.start===v&&!o&&_.type==="Identifier"&&_.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(e.await=!1)),m&&d&&this.raise(_.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(_,!1,h),this.checkLValPattern(_),this.parseForIn(e,_)):(this.checkExpressionErrors(h,!0),t>-1&&this.unexpected(t),this.parseFor(e,_))},pp$8.parseForAfterInit=function(e,t,s){return(this.type===types$1$1._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&t.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===types$1$1._in?s>-1&&this.unexpected(s):e.await=s>-1),this.parseForIn(e,t)):(s>-1&&this.unexpected(s),this.parseFor(e,t))},pp$8.parseFunctionStatement=function(e,t,s){return this.next(),this.parseFunction(e,FUNC_STATEMENT|(s?0:FUNC_HANGING_STATEMENT),!1,t)},pp$8.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(types$1$1._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},pp$8.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(types$1$1.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},pp$8.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(types$1$1.braceL),this.labels.push(switchLabel),this.enterScope(0);for(var t,s=!1;this.type!==types$1$1.braceR;)if(this.type===types$1$1._case||this.type===types$1$1._default){var p=this.type===types$1$1._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),p?t.test=this.parseExpression():(s&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),s=!0,t.test=null),this.expect(types$1$1.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},pp$8.parseThrowStatement=function(e){return this.next(),lineBreak.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var empty$1=[];pp$8.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?SCOPE_SIMPLE_CATCH:0),this.checkLValPattern(e,t?BIND_SIMPLE_CATCH:BIND_LEXICAL),this.expect(types$1$1.parenR),e},pp$8.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===types$1$1._catch){var t=this.startNode();this.next(),this.eat(types$1$1.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(types$1$1._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},pp$8.parseVarStatement=function(e,t,s){return this.next(),this.parseVar(e,!1,t,s),this.semicolon(),this.finishNode(e,"VariableDeclaration")},pp$8.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(loopLabel),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},pp$8.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},pp$8.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},pp$8.parseLabeledStatement=function(e,t,s,p){for(var g=0,m=this.labels;g<m.length;g+=1){var d=m[g];d.name===t&&this.raise(s.start,"Label '"+t+"' is already declared")}for(var l=this.type.isLoop?"loop":this.type===types$1$1._switch?"switch":null,a=this.labels.length-1;a>=0;a--){var o=this.labels[a];if(o.statementStart===e.start)o.statementStart=this.start,o.kind=l;else break}return this.labels.push({name:t,kind:l,statementStart:this.start}),e.body=this.parseStatement(p?p.indexOf("label")===-1?p+"label":p:"label"),this.labels.pop(),e.label=s,this.finishNode(e,"LabeledStatement")},pp$8.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},pp$8.parseBlock=function(e,t,s){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(types$1$1.braceL),e&&this.enterScope(0);this.type!==types$1$1.braceR;){var p=this.parseStatement(null);t.body.push(p)}return s&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")},pp$8.parseFor=function(e,t){return e.init=t,this.expect(types$1$1.semi),e.test=this.type===types$1$1.semi?null:this.parseExpression(),this.expect(types$1$1.semi),e.update=this.type===types$1$1.parenR?null:this.parseExpression(),this.expect(types$1$1.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},pp$8.parseForIn=function(e,t){var s=this.type===types$1$1._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!s||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(s?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=s?this.parseExpression():this.parseMaybeAssign(),this.expect(types$1$1.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,s?"ForInStatement":"ForOfStatement")},pp$8.parseVar=function(e,t,s,p){for(e.declarations=[],e.kind=s;;){var g=this.startNode();if(this.parseVarId(g,s),this.eat(types$1$1.eq)?g.init=this.parseMaybeAssign(t):!p&&s==="const"&&!(this.type===types$1$1._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!p&&(s==="using"||s==="await using")&&this.options.ecmaVersion>=17&&this.type!==types$1$1._in&&!this.isContextual("of")?this.raise(this.lastTokEnd,"Missing initializer in "+s+" declaration"):!p&&g.id.type!=="Identifier"&&!(t&&(this.type===types$1$1._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):g.init=null,e.declarations.push(this.finishNode(g,"VariableDeclarator")),!this.eat(types$1$1.comma))break}return e},pp$8.parseVarId=function(e,t){e.id=t==="using"||t==="await using"?this.parseIdent():this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?BIND_VAR:BIND_LEXICAL,!1)};var FUNC_STATEMENT=1,FUNC_HANGING_STATEMENT=2,FUNC_NULLABLE_ID=4;pp$8.parseFunction=function(e,t,s,p,g){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!p)&&(this.type===types$1$1.star&&t&FUNC_HANGING_STATEMENT&&this.unexpected(),e.generator=this.eat(types$1$1.star)),this.options.ecmaVersion>=8&&(e.async=!!p),t&FUNC_STATEMENT&&(e.id=t&FUNC_NULLABLE_ID&&this.type!==types$1$1.name?null:this.parseIdent(),e.id&&!(t&FUNC_HANGING_STATEMENT)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?BIND_VAR:BIND_LEXICAL:BIND_FUNCTION));var m=this.yieldPos,d=this.awaitPos,l=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(functionFlags(e.async,e.generator)),t&FUNC_STATEMENT||(e.id=this.type===types$1$1.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,s,!1,g),this.yieldPos=m,this.awaitPos=d,this.awaitIdentPos=l,this.finishNode(e,t&FUNC_STATEMENT?"FunctionDeclaration":"FunctionExpression")},pp$8.parseFunctionParams=function(e){this.expect(types$1$1.parenL),e.params=this.parseBindingList(types$1$1.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},pp$8.parseClass=function(e,t){this.next();var s=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var p=this.enterClassBody(),g=this.startNode(),m=!1;for(g.body=[],this.expect(types$1$1.braceL);this.type!==types$1$1.braceR;){var d=this.parseClassElement(e.superClass!==null);d&&(g.body.push(d),d.type==="MethodDefinition"&&d.kind==="constructor"?(m&&this.raiseRecoverable(d.start,"Duplicate constructor in the same class"),m=!0):d.key&&d.key.type==="PrivateIdentifier"&&isPrivateNameConflicted(p,d)&&this.raiseRecoverable(d.key.start,"Identifier '#"+d.key.name+"' has already been declared"))}return this.strict=s,this.next(),e.body=this.finishNode(g,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},pp$8.parseClassElement=function(e){if(this.eat(types$1$1.semi))return null;var t=this.options.ecmaVersion,s=this.startNode(),p="",g=!1,m=!1,d="method",l=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(types$1$1.braceL))return this.parseClassStaticBlock(s),s;this.isClassElementNameStart()||this.type===types$1$1.star?l=!0:p="static"}if(s.static=l,!p&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===types$1$1.star)&&!this.canInsertSemicolon()?m=!0:p="async"),!p&&(t>=9||!m)&&this.eat(types$1$1.star)&&(g=!0),!p&&!m&&!g){var a=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?d=a:p=a)}if(p?(s.computed=!1,s.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),s.key.name=p,this.finishNode(s.key,"Identifier")):this.parseClassElementName(s),t<13||this.type===types$1$1.parenL||d!=="method"||g||m){var o=!s.static&&checkKeyName(s,"constructor"),h=o&&e;o&&d!=="method"&&this.raise(s.key.start,"Constructor can't have get/set modifier"),s.kind=o?"constructor":d,this.parseClassMethod(s,g,m,h)}else this.parseClassField(s);return s},pp$8.isClassElementNameStart=function(){return this.type===types$1$1.name||this.type===types$1$1.privateId||this.type===types$1$1.num||this.type===types$1$1.string||this.type===types$1$1.bracketL||this.type.keyword},pp$8.parseClassElementName=function(e){this.type===types$1$1.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)},pp$8.parseClassMethod=function(e,t,s,p){var g=e.key;e.kind==="constructor"?(t&&this.raise(g.start,"Constructor can't be a generator"),s&&this.raise(g.start,"Constructor can't be an async method")):e.static&&checkKeyName(e,"prototype")&&this.raise(g.start,"Classes may not have a static property named prototype");var m=e.value=this.parseMethod(t,s,p);return e.kind==="get"&&m.params.length!==0&&this.raiseRecoverable(m.start,"getter should have no params"),e.kind==="set"&&m.params.length!==1&&this.raiseRecoverable(m.start,"setter should have exactly one param"),e.kind==="set"&&m.params[0].type==="RestElement"&&this.raiseRecoverable(m.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")},pp$8.parseClassField=function(e){return checkKeyName(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&checkKeyName(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(types$1$1.eq)?(this.enterScope(SCOPE_CLASS_FIELD_INIT|SCOPE_SUPER),e.value=this.parseMaybeAssign(),this.exitScope()):e.value=null,this.semicolon(),this.finishNode(e,"PropertyDefinition")},pp$8.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(SCOPE_CLASS_STATIC_BLOCK|SCOPE_SUPER);this.type!==types$1$1.braceR;){var s=this.parseStatement(null);e.body.push(s)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")},pp$8.parseClassId=function(e,t){this.type===types$1$1.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,BIND_LEXICAL,!1)):(t===!0&&this.unexpected(),e.id=null)},pp$8.parseClassSuper=function(e){e.superClass=this.eat(types$1$1._extends)?this.parseExprSubscripts(null,!1):null},pp$8.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared},pp$8.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,s=e.used;if(this.options.checkPrivateFields)for(var p=this.privateNameStack.length,g=p===0?null:this.privateNameStack[p-1],m=0;m<s.length;++m){var d=s[m];hasOwn(t,d.name)||(g?g.used.push(d):this.raiseRecoverable(d.start,"Private field '#"+d.name+"' must be declared in an enclosing class"))}};function isPrivateNameConflicted(e,t){var s=t.key.name,p=e[s],g="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(g=(t.static?"s":"i")+t.kind),p==="iget"&&g==="iset"||p==="iset"&&g==="iget"||p==="sget"&&g==="sset"||p==="sset"&&g==="sget"?(e[s]="true",!1):p?!0:(e[s]=g,!1)}function checkKeyName(e,t){var s=e.computed,p=e.key;return!s&&(p.type==="Identifier"&&p.name===t||p.type==="Literal"&&p.value===t)}pp$8.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==types$1$1.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")},pp$8.parseExport=function(e,t){if(this.next(),this.eat(types$1$1.star))return this.parseExportAllDeclaration(e,t);if(this.eat(types$1$1._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null,this.options.ecmaVersion>=16&&(e.attributes=[]);else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==types$1$1.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause());else{for(var s=0,p=e.specifiers;s<p.length;s+=1){var g=p[s];this.checkUnreserved(g.local),this.checkLocalExport(g.local),g.local.type==="Literal"&&this.raise(g.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null,this.options.ecmaVersion>=16&&(e.attributes=[])}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},pp$8.parseExportDeclaration=function(e){return this.parseStatement(null)},pp$8.parseExportDefaultDeclaration=function(){var e;if(this.type===types$1$1._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,FUNC_STATEMENT|FUNC_NULLABLE_ID,!1,e)}else if(this.type===types$1$1._class){var s=this.startNode();return this.parseClass(s,"nullableID")}else{var p=this.parseMaybeAssign();return this.semicolon(),p}},pp$8.checkExport=function(e,t,s){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),hasOwn(e,t)&&this.raiseRecoverable(s,"Duplicate export '"+t+"'"),e[t]=!0)},pp$8.checkPatternExport=function(e,t){var s=t.type;if(s==="Identifier")this.checkExport(e,t,t.start);else if(s==="ObjectPattern")for(var p=0,g=t.properties;p<g.length;p+=1){var m=g[p];this.checkPatternExport(e,m)}else if(s==="ArrayPattern")for(var d=0,l=t.elements;d<l.length;d+=1){var a=l[d];a&&this.checkPatternExport(e,a)}else s==="Property"?this.checkPatternExport(e,t.value):s==="AssignmentPattern"?this.checkPatternExport(e,t.left):s==="RestElement"&&this.checkPatternExport(e,t.argument)},pp$8.checkVariableExport=function(e,t){if(e)for(var s=0,p=t;s<p.length;s+=1){var g=p[s];this.checkPatternExport(e,g.id)}},pp$8.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},pp$8.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")},pp$8.parseExportSpecifiers=function(e){var t=[],s=!0;for(this.expect(types$1$1.braceL);!this.eat(types$1$1.braceR);){if(s)s=!1;else if(this.expect(types$1$1.comma),this.afterTrailingComma(types$1$1.braceR))break;t.push(this.parseExportSpecifier(e))}return t},pp$8.parseImport=function(e){return this.next(),this.type===types$1$1.string?(e.specifiers=empty$1,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===types$1$1.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},pp$8.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,BIND_LEXICAL),this.finishNode(e,"ImportSpecifier")},pp$8.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,BIND_LEXICAL),this.finishNode(e,"ImportDefaultSpecifier")},pp$8.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,BIND_LEXICAL),this.finishNode(e,"ImportNamespaceSpecifier")},pp$8.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===types$1$1.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(types$1$1.comma)))return e;if(this.type===types$1$1.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(types$1$1.braceL);!this.eat(types$1$1.braceR);){if(t)t=!1;else if(this.expect(types$1$1.comma),this.afterTrailingComma(types$1$1.braceR))break;e.push(this.parseImportSpecifier())}return e},pp$8.parseWithClause=function(){var e=[];if(!this.eat(types$1$1._with))return e;this.expect(types$1$1.braceL);for(var t={},s=!0;!this.eat(types$1$1.braceR);){if(s)s=!1;else if(this.expect(types$1$1.comma),this.afterTrailingComma(types$1$1.braceR))break;var p=this.parseImportAttribute(),g=p.key.type==="Identifier"?p.key.name:p.key.value;hasOwn(t,g)&&this.raiseRecoverable(p.key.start,"Duplicate attribute key '"+g+"'"),t[g]=!0,e.push(p)}return e},pp$8.parseImportAttribute=function(){var e=this.startNode();return e.key=this.type===types$1$1.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(types$1$1.colon),this.type!==types$1$1.string&&this.unexpected(),e.value=this.parseExprAtom(),this.finishNode(e,"ImportAttribute")},pp$8.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===types$1$1.string){var e=this.parseLiteral(this.value);return loneSurrogate.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)},pp$8.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},pp$8.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var pp$7=Parser.prototype;pp$7.toAssignable=function(e,t,s){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",s&&this.checkPatternErrors(s,!0);for(var p=0,g=e.properties;p<g.length;p+=1){var m=g[p];this.toAssignable(m,t),m.type==="RestElement"&&(m.argument.type==="ArrayPattern"||m.argument.type==="ObjectPattern")&&this.raise(m.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",s&&this.checkPatternErrors(s,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,s);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else s&&this.checkPatternErrors(s,!0);return e},pp$7.toAssignableList=function(e,t){for(var s=e.length,p=0;p<s;p++){var g=e[p];g&&this.toAssignable(g,t)}if(s){var m=e[s-1];this.options.ecmaVersion===6&&t&&m&&m.type==="RestElement"&&m.argument.type!=="Identifier"&&this.unexpected(m.argument.start)}return e},pp$7.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},pp$7.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==types$1$1.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},pp$7.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case types$1$1.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(types$1$1.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case types$1$1.braceL:return this.parseObj(!0)}return this.parseIdent()},pp$7.parseBindingList=function(e,t,s,p){for(var g=[],m=!0;!this.eat(e);)if(m?m=!1:this.expect(types$1$1.comma),t&&this.type===types$1$1.comma)g.push(null);else{if(s&&this.afterTrailingComma(e))break;if(this.type===types$1$1.ellipsis){var d=this.parseRestBinding();this.parseBindingListItem(d),g.push(d),this.type===types$1$1.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else g.push(this.parseAssignableListItem(p))}return g},pp$7.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t},pp$7.parseBindingListItem=function(e){return e},pp$7.parseMaybeDefault=function(e,t,s){if(s=s||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(types$1$1.eq))return s;var p=this.startNodeAt(e,t);return p.left=s,p.right=this.parseMaybeAssign(),this.finishNode(p,"AssignmentPattern")},pp$7.checkLValSimple=function(e,t,s){t===void 0&&(t=BIND_NONE);var p=t!==BIND_NONE;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(p?"Binding ":"Assigning to ")+e.name+" in strict mode"),p&&(t===BIND_LEXICAL&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),s&&(hasOwn(s,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),s[e.name]=!0),t!==BIND_OUTSIDE&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":p&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return p&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,s);default:this.raise(e.start,(p?"Binding":"Assigning to")+" rvalue")}},pp$7.checkLValPattern=function(e,t,s){switch(t===void 0&&(t=BIND_NONE),e.type){case"ObjectPattern":for(var p=0,g=e.properties;p<g.length;p+=1){var m=g[p];this.checkLValInnerPattern(m,t,s)}break;case"ArrayPattern":for(var d=0,l=e.elements;d<l.length;d+=1){var a=l[d];a&&this.checkLValInnerPattern(a,t,s)}break;default:this.checkLValSimple(e,t,s)}},pp$7.checkLValInnerPattern=function(e,t,s){switch(t===void 0&&(t=BIND_NONE),e.type){case"Property":this.checkLValInnerPattern(e.value,t,s);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,s);break;case"RestElement":this.checkLValPattern(e.argument,t,s);break;default:this.checkLValPattern(e,t,s)}};var TokContext=function e(t,s,p,g,m){this.token=t,this.isExpr=!!s,this.preserveSpace=!!p,this.override=g,this.generator=!!m},types$6={b_stat:new TokContext("{",!1),b_expr:new TokContext("{",!0),b_tmpl:new TokContext("${",!1),p_stat:new TokContext("(",!1),p_expr:new TokContext("(",!0),q_tmpl:new TokContext("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new TokContext("function",!1),f_expr:new TokContext("function",!0),f_expr_gen:new TokContext("function",!0,!1,null,!0),f_gen:new TokContext("function",!1,!1,null,!0)},pp$6=Parser.prototype;pp$6.initialContext=function(){return[types$6.b_stat]},pp$6.curContext=function(){return this.context[this.context.length-1]},pp$6.braceIsBlock=function(e){var t=this.curContext();return t===types$6.f_expr||t===types$6.f_stat?!0:e===types$1$1.colon&&(t===types$6.b_stat||t===types$6.b_expr)?!t.isExpr:e===types$1$1._return||e===types$1$1.name&&this.exprAllowed?lineBreak.test(this.input.slice(this.lastTokEnd,this.start)):e===types$1$1._else||e===types$1$1.semi||e===types$1$1.eof||e===types$1$1.parenR||e===types$1$1.arrow?!0:e===types$1$1.braceL?t===types$6.b_stat:e===types$1$1._var||e===types$1$1._const||e===types$1$1.name?!1:!this.exprAllowed},pp$6.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1},pp$6.updateContext=function(e){var t,s=this.type;s.keyword&&e===types$1$1.dot?this.exprAllowed=!1:(t=s.updateContext)?t.call(this,e):this.exprAllowed=s.beforeExpr},pp$6.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)},types$1$1.parenR.updateContext=types$1$1.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===types$6.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr},types$1$1.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?types$6.b_stat:types$6.b_expr),this.exprAllowed=!0},types$1$1.dollarBraceL.updateContext=function(){this.context.push(types$6.b_tmpl),this.exprAllowed=!0},types$1$1.parenL.updateContext=function(e){var t=e===types$1$1._if||e===types$1$1._for||e===types$1$1._with||e===types$1$1._while;this.context.push(t?types$6.p_stat:types$6.p_expr),this.exprAllowed=!0},types$1$1.incDec.updateContext=function(){},types$1$1._function.updateContext=types$1$1._class.updateContext=function(e){e.beforeExpr&&e!==types$1$1._else&&!(e===types$1$1.semi&&this.curContext()!==types$6.p_stat)&&!(e===types$1$1._return&&lineBreak.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===types$1$1.colon||e===types$1$1.braceL)&&this.curContext()===types$6.b_stat)?this.context.push(types$6.f_expr):this.context.push(types$6.f_stat),this.exprAllowed=!1},types$1$1.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},types$1$1.backQuote.updateContext=function(){this.curContext()===types$6.q_tmpl?this.context.pop():this.context.push(types$6.q_tmpl),this.exprAllowed=!1},types$1$1.star.updateContext=function(e){if(e===types$1$1._function){var t=this.context.length-1;this.context[t]===types$6.f_expr?this.context[t]=types$6.f_expr_gen:this.context[t]=types$6.f_gen}this.exprAllowed=!0},types$1$1.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==types$1$1.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var pp$5=Parser.prototype;pp$5.checkPropClash=function(e,t,s){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var p=e.key,g;switch(p.type){case"Identifier":g=p.name;break;case"Literal":g=String(p.value);break;default:return}var m=e.kind;if(this.options.ecmaVersion>=6){g==="__proto__"&&m==="init"&&(t.proto&&(s?s.doubleProto<0&&(s.doubleProto=p.start):this.raiseRecoverable(p.start,"Redefinition of __proto__ property")),t.proto=!0);return}g="$"+g;var d=t[g];if(d){var l;m==="init"?l=this.strict&&d.init||d.get||d.set:l=d.init||d[m],l&&this.raiseRecoverable(p.start,"Redefinition of property")}else d=t[g]={init:!1,get:!1,set:!1};d[m]=!0}},pp$5.parseExpression=function(e,t){var s=this.start,p=this.startLoc,g=this.parseMaybeAssign(e,t);if(this.type===types$1$1.comma){var m=this.startNodeAt(s,p);for(m.expressions=[g];this.eat(types$1$1.comma);)m.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(m,"SequenceExpression")}return g},pp$5.parseMaybeAssign=function(e,t,s){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var p=!1,g=-1,m=-1,d=-1;t?(g=t.parenthesizedAssign,m=t.trailingComma,d=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new DestructuringErrors,p=!0);var l=this.start,a=this.startLoc;(this.type===types$1$1.parenL||this.type===types$1$1.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var o=this.parseMaybeConditional(e,t);if(s&&(o=s.call(this,o,l,a)),this.type.isAssign){var h=this.startNodeAt(l,a);return h.operator=this.value,this.type===types$1$1.eq&&(o=this.toAssignable(o,!1,t)),p||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=o.start&&(t.shorthandAssign=-1),this.type===types$1$1.eq?this.checkLValPattern(o):this.checkLValSimple(o),h.left=o,this.next(),h.right=this.parseMaybeAssign(e),d>-1&&(t.doubleProto=d),this.finishNode(h,"AssignmentExpression")}else p&&this.checkExpressionErrors(t,!0);return g>-1&&(t.parenthesizedAssign=g),m>-1&&(t.trailingComma=m),o},pp$5.parseMaybeConditional=function(e,t){var s=this.start,p=this.startLoc,g=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return g;if(this.eat(types$1$1.question)){var m=this.startNodeAt(s,p);return m.test=g,m.consequent=this.parseMaybeAssign(),this.expect(types$1$1.colon),m.alternate=this.parseMaybeAssign(e),this.finishNode(m,"ConditionalExpression")}return g},pp$5.parseExprOps=function(e,t){var s=this.start,p=this.startLoc,g=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||g.start===s&&g.type==="ArrowFunctionExpression"?g:this.parseExprOp(g,s,p,-1,e)},pp$5.parseExprOp=function(e,t,s,p,g){var m=this.type.binop;if(m!=null&&(!g||this.type!==types$1$1._in)&&m>p){var d=this.type===types$1$1.logicalOR||this.type===types$1$1.logicalAND,l=this.type===types$1$1.coalesce;l&&(m=types$1$1.logicalAND.binop);var a=this.value;this.next();var o=this.start,h=this.startLoc,v=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,g),o,h,m,g),_=this.buildBinary(t,s,e,v,a,d||l);return(d&&this.type===types$1$1.coalesce||l&&(this.type===types$1$1.logicalOR||this.type===types$1$1.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(_,t,s,p,g)}return e},pp$5.buildBinary=function(e,t,s,p,g,m){p.type==="PrivateIdentifier"&&this.raise(p.start,"Private identifier can only be left side of binary expression");var d=this.startNodeAt(e,t);return d.left=s,d.operator=g,d.right=p,this.finishNode(d,m?"LogicalExpression":"BinaryExpression")},pp$5.parseMaybeUnary=function(e,t,s,p){var g=this.start,m=this.startLoc,d;if(this.isContextual("await")&&this.canAwait)d=this.parseAwait(p),t=!0;else if(this.type.prefix){var l=this.startNode(),a=this.type===types$1$1.incDec;l.operator=this.value,l.prefix=!0,this.next(),l.argument=this.parseMaybeUnary(null,!0,a,p),this.checkExpressionErrors(e,!0),a?this.checkLValSimple(l.argument):this.strict&&l.operator==="delete"&&isLocalVariableAccess(l.argument)?this.raiseRecoverable(l.start,"Deleting local variable in strict mode"):l.operator==="delete"&&isPrivateFieldAccess(l.argument)?this.raiseRecoverable(l.start,"Private fields can not be deleted"):t=!0,d=this.finishNode(l,a?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===types$1$1.privateId)(p||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),d=this.parsePrivateIdent(),this.type!==types$1$1._in&&this.unexpected();else{if(d=this.parseExprSubscripts(e,p),this.checkExpressionErrors(e))return d;for(;this.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(g,m);o.operator=this.value,o.prefix=!1,o.argument=d,this.checkLValSimple(d),this.next(),d=this.finishNode(o,"UpdateExpression")}}if(!s&&this.eat(types$1$1.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(g,m,d,this.parseMaybeUnary(null,!1,!1,p),"**",!1);else return d};function isLocalVariableAccess(e){return e.type==="Identifier"||e.type==="ParenthesizedExpression"&&isLocalVariableAccess(e.expression)}function isPrivateFieldAccess(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&isPrivateFieldAccess(e.expression)||e.type==="ParenthesizedExpression"&&isPrivateFieldAccess(e.expression)}pp$5.parseExprSubscripts=function(e,t){var s=this.start,p=this.startLoc,g=this.parseExprAtom(e,t);if(g.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return g;var m=this.parseSubscripts(g,s,p,!1,t);return e&&m.type==="MemberExpression"&&(e.parenthesizedAssign>=m.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=m.start&&(e.parenthesizedBind=-1),e.trailingComma>=m.start&&(e.trailingComma=-1)),m},pp$5.parseSubscripts=function(e,t,s,p,g){for(var m=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,d=!1;;){var l=this.parseSubscript(e,t,s,p,m,d,g);if(l.optional&&(d=!0),l===e||l.type==="ArrowFunctionExpression"){if(d){var a=this.startNodeAt(t,s);a.expression=l,l=this.finishNode(a,"ChainExpression")}return l}e=l}},pp$5.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(types$1$1.arrow)},pp$5.parseSubscriptAsyncArrow=function(e,t,s,p){return this.parseArrowExpression(this.startNodeAt(e,t),s,!0,p)},pp$5.parseSubscript=function(e,t,s,p,g,m,d){var l=this.options.ecmaVersion>=11,a=l&&this.eat(types$1$1.questionDot);p&&a&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var o=this.eat(types$1$1.bracketL);if(o||a&&this.type!==types$1$1.parenL&&this.type!==types$1$1.backQuote||this.eat(types$1$1.dot)){var h=this.startNodeAt(t,s);h.object=e,o?(h.property=this.parseExpression(),this.expect(types$1$1.bracketR)):this.type===types$1$1.privateId&&e.type!=="Super"?h.property=this.parsePrivateIdent():h.property=this.parseIdent(this.options.allowReserved!=="never"),h.computed=!!o,l&&(h.optional=a),e=this.finishNode(h,"MemberExpression")}else if(!p&&this.eat(types$1$1.parenL)){var v=new DestructuringErrors,_=this.yieldPos,y=this.awaitPos,w=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var T=this.parseExprList(types$1$1.parenR,this.options.ecmaVersion>=8,!1,v);if(g&&!a&&this.shouldParseAsyncArrow())return this.checkPatternErrors(v,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=_,this.awaitPos=y,this.awaitIdentPos=w,this.parseSubscriptAsyncArrow(t,s,T,d);this.checkExpressionErrors(v,!0),this.yieldPos=_||this.yieldPos,this.awaitPos=y||this.awaitPos,this.awaitIdentPos=w||this.awaitIdentPos;var I=this.startNodeAt(t,s);I.callee=e,I.arguments=T,l&&(I.optional=a),e=this.finishNode(I,"CallExpression")}else if(this.type===types$1$1.backQuote){(a||m)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var O=this.startNodeAt(t,s);O.tag=e,O.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(O,"TaggedTemplateExpression")}return e},pp$5.parseExprAtom=function(e,t,s){this.type===types$1$1.slash&&this.readRegexp();var p,g=this.potentialArrowAt===this.start;switch(this.type){case types$1$1._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),p=this.startNode(),this.next(),this.type===types$1$1.parenL&&!this.allowDirectSuper&&this.raise(p.start,"super() call outside constructor of a subclass"),this.type!==types$1$1.dot&&this.type!==types$1$1.bracketL&&this.type!==types$1$1.parenL&&this.unexpected(),this.finishNode(p,"Super");case types$1$1._this:return p=this.startNode(),this.next(),this.finishNode(p,"ThisExpression");case types$1$1.name:var m=this.start,d=this.startLoc,l=this.containsEsc,a=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!l&&a.name==="async"&&!this.canInsertSemicolon()&&this.eat(types$1$1._function))return this.overrideContext(types$6.f_expr),this.parseFunction(this.startNodeAt(m,d),0,!1,!0,t);if(g&&!this.canInsertSemicolon()){if(this.eat(types$1$1.arrow))return this.parseArrowExpression(this.startNodeAt(m,d),[a],!1,t);if(this.options.ecmaVersion>=8&&a.name==="async"&&this.type===types$1$1.name&&!l&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return a=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(types$1$1.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(m,d),[a],!0,t)}return a;case types$1$1.regexp:var o=this.value;return p=this.parseLiteral(o.value),p.regex={pattern:o.pattern,flags:o.flags},p;case types$1$1.num:case types$1$1.string:return this.parseLiteral(this.value);case types$1$1._null:case types$1$1._true:case types$1$1._false:return p=this.startNode(),p.value=this.type===types$1$1._null?null:this.type===types$1$1._true,p.raw=this.type.keyword,this.next(),this.finishNode(p,"Literal");case types$1$1.parenL:var h=this.start,v=this.parseParenAndDistinguishExpression(g,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(v)&&(e.parenthesizedAssign=h),e.parenthesizedBind<0&&(e.parenthesizedBind=h)),v;case types$1$1.bracketL:return p=this.startNode(),this.next(),p.elements=this.parseExprList(types$1$1.bracketR,!0,!0,e),this.finishNode(p,"ArrayExpression");case types$1$1.braceL:return this.overrideContext(types$6.b_expr),this.parseObj(!1,e);case types$1$1._function:return p=this.startNode(),this.next(),this.parseFunction(p,0);case types$1$1._class:return this.parseClass(this.startNode(),!1);case types$1$1._new:return this.parseNew();case types$1$1.backQuote:return this.parseTemplate();case types$1$1._import:return this.options.ecmaVersion>=11?this.parseExprImport(s):this.unexpected();default:return this.parseExprAtomDefault()}},pp$5.parseExprAtomDefault=function(){this.unexpected()},pp$5.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===types$1$1.parenL&&!e)return this.parseDynamicImport(t);if(this.type===types$1$1.dot){var s=this.startNodeAt(t.start,t.loc&&t.loc.start);return s.name="import",t.meta=this.finishNode(s,"Identifier"),this.parseImportMeta(t)}else this.unexpected()},pp$5.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(types$1$1.parenR)?e.options=null:(this.expect(types$1$1.comma),this.afterTrailingComma(types$1$1.parenR)?e.options=null:(e.options=this.parseMaybeAssign(),this.eat(types$1$1.parenR)||(this.expect(types$1$1.comma),this.afterTrailingComma(types$1$1.parenR)||this.unexpected())));else if(!this.eat(types$1$1.parenR)){var t=this.start;this.eat(types$1$1.comma)&&this.eat(types$1$1.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")},pp$5.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")},pp$5.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.value!=null?t.value.toString():t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")},pp$5.parseParenExpression=function(){this.expect(types$1$1.parenL);var e=this.parseExpression();return this.expect(types$1$1.parenR),e},pp$5.shouldParseArrow=function(e){return!this.canInsertSemicolon()},pp$5.parseParenAndDistinguishExpression=function(e,t){var s=this.start,p=this.startLoc,g,m=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var d=this.start,l=this.startLoc,a=[],o=!0,h=!1,v=new DestructuringErrors,_=this.yieldPos,y=this.awaitPos,w;for(this.yieldPos=0,this.awaitPos=0;this.type!==types$1$1.parenR;)if(o?o=!1:this.expect(types$1$1.comma),m&&this.afterTrailingComma(types$1$1.parenR,!0)){h=!0;break}else if(this.type===types$1$1.ellipsis){w=this.start,a.push(this.parseParenItem(this.parseRestBinding())),this.type===types$1$1.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else a.push(this.parseMaybeAssign(!1,v,this.parseParenItem));var T=this.lastTokEnd,I=this.lastTokEndLoc;if(this.expect(types$1$1.parenR),e&&this.shouldParseArrow(a)&&this.eat(types$1$1.arrow))return this.checkPatternErrors(v,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=_,this.awaitPos=y,this.parseParenArrowList(s,p,a,t);(!a.length||h)&&this.unexpected(this.lastTokStart),w&&this.unexpected(w),this.checkExpressionErrors(v,!0),this.yieldPos=_||this.yieldPos,this.awaitPos=y||this.awaitPos,a.length>1?(g=this.startNodeAt(d,l),g.expressions=a,this.finishNodeAt(g,"SequenceExpression",T,I)):g=a[0]}else g=this.parseParenExpression();if(this.options.preserveParens){var O=this.startNodeAt(s,p);return O.expression=g,this.finishNode(O,"ParenthesizedExpression")}else return g},pp$5.parseParenItem=function(e){return e},pp$5.parseParenArrowList=function(e,t,s,p){return this.parseArrowExpression(this.startNodeAt(e,t),s,!1,p)};var empty=[];pp$5.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===types$1$1.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var s=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),s&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var p=this.start,g=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),p,g,!0,!1),this.eat(types$1$1.parenL)?e.arguments=this.parseExprList(types$1$1.parenR,this.options.ecmaVersion>=8,!1):e.arguments=empty,this.finishNode(e,"NewExpression")},pp$5.parseTemplateElement=function(e){var t=e.isTagged,s=this.startNode();return this.type===types$1$1.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),s.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):s.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),s.tail=this.type===types$1$1.backQuote,this.finishNode(s,"TemplateElement")},pp$5.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var s=this.startNode();this.next(),s.expressions=[];var p=this.parseTemplateElement({isTagged:t});for(s.quasis=[p];!p.tail;)this.type===types$1$1.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(types$1$1.dollarBraceL),s.expressions.push(this.parseExpression()),this.expect(types$1$1.braceR),s.quasis.push(p=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(s,"TemplateLiteral")},pp$5.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===types$1$1.name||this.type===types$1$1.num||this.type===types$1$1.string||this.type===types$1$1.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===types$1$1.star)&&!lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},pp$5.parseObj=function(e,t){var s=this.startNode(),p=!0,g={};for(s.properties=[],this.next();!this.eat(types$1$1.braceR);){if(p)p=!1;else if(this.expect(types$1$1.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(types$1$1.braceR))break;var m=this.parseProperty(e,t);e||this.checkPropClash(m,g,t),s.properties.push(m)}return this.finishNode(s,e?"ObjectPattern":"ObjectExpression")},pp$5.parseProperty=function(e,t){var s=this.startNode(),p,g,m,d;if(this.options.ecmaVersion>=9&&this.eat(types$1$1.ellipsis))return e?(s.argument=this.parseIdent(!1),this.type===types$1$1.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(s,"RestElement")):(s.argument=this.parseMaybeAssign(!1,t),this.type===types$1$1.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(s,"SpreadElement"));this.options.ecmaVersion>=6&&(s.method=!1,s.shorthand=!1,(e||t)&&(m=this.start,d=this.startLoc),e||(p=this.eat(types$1$1.star)));var l=this.containsEsc;return this.parsePropertyName(s),!e&&!l&&this.options.ecmaVersion>=8&&!p&&this.isAsyncProp(s)?(g=!0,p=this.options.ecmaVersion>=9&&this.eat(types$1$1.star),this.parsePropertyName(s)):g=!1,this.parsePropertyValue(s,e,p,g,m,d,t,l),this.finishNode(s,"Property")},pp$5.parseGetterSetter=function(e){var t=e.key.name;this.parsePropertyName(e),e.value=this.parseMethod(!1),e.kind=t;var s=e.kind==="get"?0:1;if(e.value.params.length!==s){var p=e.value.start;e.kind==="get"?this.raiseRecoverable(p,"getter should have no params"):this.raiseRecoverable(p,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")},pp$5.parsePropertyValue=function(e,t,s,p,g,m,d,l){(s||p)&&this.type===types$1$1.colon&&this.unexpected(),this.eat(types$1$1.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,d),e.kind="init"):this.options.ecmaVersion>=6&&this.type===types$1$1.parenL?(t&&this.unexpected(),e.method=!0,e.value=this.parseMethod(s,p),e.kind="init"):!t&&!l&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==types$1$1.comma&&this.type!==types$1$1.braceR&&this.type!==types$1$1.eq?((s||p)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((s||p)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=g),t?e.value=this.parseMaybeDefault(g,m,this.copyNode(e.key)):this.type===types$1$1.eq&&d?(d.shorthandAssign<0&&(d.shorthandAssign=this.start),e.value=this.parseMaybeDefault(g,m,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.kind="init",e.shorthand=!0):this.unexpected()},pp$5.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(types$1$1.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(types$1$1.bracketR),e.key;e.computed=!1}return e.key=this.type===types$1$1.num||this.type===types$1$1.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},pp$5.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},pp$5.parseMethod=function(e,t,s){var p=this.startNode(),g=this.yieldPos,m=this.awaitPos,d=this.awaitIdentPos;return this.initFunction(p),this.options.ecmaVersion>=6&&(p.generator=e),this.options.ecmaVersion>=8&&(p.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(functionFlags(t,p.generator)|SCOPE_SUPER|(s?SCOPE_DIRECT_SUPER:0)),this.expect(types$1$1.parenL),p.params=this.parseBindingList(types$1$1.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(p,!1,!0,!1),this.yieldPos=g,this.awaitPos=m,this.awaitIdentPos=d,this.finishNode(p,"FunctionExpression")},pp$5.parseArrowExpression=function(e,t,s,p){var g=this.yieldPos,m=this.awaitPos,d=this.awaitIdentPos;return this.enterScope(functionFlags(s,!1)|SCOPE_ARROW),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!s),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,p),this.yieldPos=g,this.awaitPos=m,this.awaitIdentPos=d,this.finishNode(e,"ArrowFunctionExpression")},pp$5.parseFunctionBody=function(e,t,s,p){var g=t&&this.type!==types$1$1.braceL,m=this.strict,d=!1;if(g)e.body=this.parseMaybeAssign(p),e.expression=!0,this.checkParams(e,!1);else{var l=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!m||l)&&(d=this.strictDirective(this.end),d&&l&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var a=this.labels;this.labels=[],d&&(this.strict=!0),this.checkParams(e,!m&&!d&&!t&&!s&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,BIND_OUTSIDE),e.body=this.parseBlock(!1,void 0,d&&!m),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=a}this.exitScope()},pp$5.isSimpleParamList=function(e){for(var t=0,s=e;t<s.length;t+=1){var p=s[t];if(p.type!=="Identifier")return!1}return!0},pp$5.checkParams=function(e,t){for(var s=Object.create(null),p=0,g=e.params;p<g.length;p+=1){var m=g[p];this.checkLValInnerPattern(m,BIND_VAR,t?null:s)}},pp$5.parseExprList=function(e,t,s,p){for(var g=[],m=!0;!this.eat(e);){if(m)m=!1;else if(this.expect(types$1$1.comma),t&&this.afterTrailingComma(e))break;var d=void 0;s&&this.type===types$1$1.comma?d=null:this.type===types$1$1.ellipsis?(d=this.parseSpread(p),p&&this.type===types$1$1.comma&&p.trailingComma<0&&(p.trailingComma=this.start)):d=this.parseMaybeAssign(!1,p),g.push(d)}return g},pp$5.checkUnreserved=function(e){var t=e.start,s=e.end,p=e.name;if(this.inGenerator&&p==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&p==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),!(this.currentThisScope().flags&SCOPE_VAR)&&p==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(p==="arguments"||p==="await")&&this.raise(t,"Cannot use "+p+" in class static initialization block"),this.keywords.test(p)&&this.raise(t,"Unexpected keyword '"+p+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,s).indexOf("\\")!==-1)){var g=this.strict?this.reservedWordsStrict:this.reservedWords;g.test(p)&&(!this.inAsync&&p==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+p+"' is reserved"))}},pp$5.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t},pp$5.parseIdentNode=function(){var e=this.startNode();return this.type===types$1$1.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=types$1$1.name):this.unexpected(),e},pp$5.parsePrivateIdent=function(){var e=this.startNode();return this.type===types$1$1.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e},pp$5.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===types$1$1.semi||this.canInsertSemicolon()||this.type!==types$1$1.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(types$1$1.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},pp$5.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var pp$4=Parser.prototype;pp$4.raise=function(e,t){var s=getLineInfo(this.input,e);t+=" ("+s.line+":"+s.column+")",this.sourceFile&&(t+=" in "+this.sourceFile);var p=new SyntaxError(t);throw p.pos=e,p.loc=s,p.raisedAt=this.pos,p},pp$4.raiseRecoverable=pp$4.raise,pp$4.curPosition=function(){if(this.options.locations)return new Position(this.curLine,this.pos-this.lineStart)};var pp$3=Parser.prototype,Scope=function e(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};pp$3.enterScope=function(e){this.scopeStack.push(new Scope(e))},pp$3.exitScope=function(){this.scopeStack.pop()},pp$3.treatFunctionsAsVarInScope=function(e){return e.flags&SCOPE_FUNCTION||!this.inModule&&e.flags&SCOPE_TOP},pp$3.declareName=function(e,t,s){var p=!1;if(t===BIND_LEXICAL){var g=this.currentScope();p=g.lexical.indexOf(e)>-1||g.functions.indexOf(e)>-1||g.var.indexOf(e)>-1,g.lexical.push(e),this.inModule&&g.flags&SCOPE_TOP&&delete this.undefinedExports[e]}else if(t===BIND_SIMPLE_CATCH){var m=this.currentScope();m.lexical.push(e)}else if(t===BIND_FUNCTION){var d=this.currentScope();this.treatFunctionsAsVar?p=d.lexical.indexOf(e)>-1:p=d.lexical.indexOf(e)>-1||d.var.indexOf(e)>-1,d.functions.push(e)}else for(var l=this.scopeStack.length-1;l>=0;--l){var a=this.scopeStack[l];if(a.lexical.indexOf(e)>-1&&!(a.flags&SCOPE_SIMPLE_CATCH&&a.lexical[0]===e)||!this.treatFunctionsAsVarInScope(a)&&a.functions.indexOf(e)>-1){p=!0;break}if(a.var.push(e),this.inModule&&a.flags&SCOPE_TOP&&delete this.undefinedExports[e],a.flags&SCOPE_VAR)break}p&&this.raiseRecoverable(s,"Identifier '"+e+"' has already been declared")},pp$3.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)},pp$3.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},pp$3.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&(SCOPE_VAR|SCOPE_CLASS_FIELD_INIT|SCOPE_CLASS_STATIC_BLOCK))return t}},pp$3.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&(SCOPE_VAR|SCOPE_CLASS_FIELD_INIT|SCOPE_CLASS_STATIC_BLOCK)&&!(t.flags&SCOPE_ARROW))return t}};var Node=function e(t,s,p){this.type="",this.start=s,this.end=0,t.options.locations&&(this.loc=new SourceLocation(t,p)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[s,0])},pp$2=Parser.prototype;pp$2.startNode=function(){return new Node(this,this.start,this.startLoc)},pp$2.startNodeAt=function(e,t){return new Node(this,e,t)};function finishNodeAt(e,t,s,p){return e.type=t,e.end=s,this.options.locations&&(e.loc.end=p),this.options.ranges&&(e.range[1]=s),e}pp$2.finishNode=function(e,t){return finishNodeAt.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},pp$2.finishNodeAt=function(e,t,s,p){return finishNodeAt.call(this,e,t,s,p)},pp$2.copyNode=function(e){var t=new Node(this,e.start,this.startLoc);for(var s in e)t[s]=e[s];return t};var scriptValuesAddedInUnicode="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",ecma9BinaryProperties="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",ecma10BinaryProperties=ecma9BinaryProperties+" Extended_Pictographic",ecma11BinaryProperties=ecma10BinaryProperties,ecma12BinaryProperties=ecma11BinaryProperties+" EBase EComp EMod EPres ExtPict",ecma13BinaryProperties=ecma12BinaryProperties,ecma14BinaryProperties=ecma13BinaryProperties,unicodeBinaryProperties={9:ecma9BinaryProperties,10:ecma10BinaryProperties,11:ecma11BinaryProperties,12:ecma12BinaryProperties,13:ecma13BinaryProperties,14:ecma14BinaryProperties},ecma14BinaryPropertiesOfStrings="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",unicodeBinaryPropertiesOfStrings={9:"",10:"",11:"",12:"",13:"",14:ecma14BinaryPropertiesOfStrings},unicodeGeneralCategoryValues="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",ecma9ScriptValues="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",ecma10ScriptValues=ecma9ScriptValues+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",ecma11ScriptValues=ecma10ScriptValues+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",ecma12ScriptValues=ecma11ScriptValues+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",ecma13ScriptValues=ecma12ScriptValues+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",ecma14ScriptValues=ecma13ScriptValues+" "+scriptValuesAddedInUnicode,unicodeScriptValues={9:ecma9ScriptValues,10:ecma10ScriptValues,11:ecma11ScriptValues,12:ecma12ScriptValues,13:ecma13ScriptValues,14:ecma14ScriptValues},data={};function buildUnicodeData(e){var t=data[e]={binary:wordsRegexp(unicodeBinaryProperties[e]+" "+unicodeGeneralCategoryValues),binaryOfStrings:wordsRegexp(unicodeBinaryPropertiesOfStrings[e]),nonBinary:{General_Category:wordsRegexp(unicodeGeneralCategoryValues),Script:wordsRegexp(unicodeScriptValues[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var i$1=0,list=[9,10,11,12,13,14];i$1<list.length;i$1+=1){var ecmaVersion=list[i$1];buildUnicodeData(ecmaVersion)}var pp$1=Parser.prototype,BranchID=function e(t,s){this.parent=t,this.base=s||this};BranchID.prototype.separatedFrom=function e(t){for(var s=this;s;s=s.parent)for(var p=t;p;p=p.parent)if(s.base===p.base&&s!==p)return!0;return!1},BranchID.prototype.sibling=function e(){return new BranchID(this.parent,this.base)};var RegExpValidationState=function e(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=data[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};RegExpValidationState.prototype.reset=function e(t,s,p){var g=p.indexOf("v")!==-1,m=p.indexOf("u")!==-1;this.start=t|0,this.source=s+"",this.flags=p,g&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=m&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=m&&this.parser.options.ecmaVersion>=9)},RegExpValidationState.prototype.raise=function e(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},RegExpValidationState.prototype.at=function e(t,s){s===void 0&&(s=!1);var p=this.source,g=p.length;if(t>=g)return-1;var m=p.charCodeAt(t);if(!(s||this.switchU)||m<=55295||m>=57344||t+1>=g)return m;var d=p.charCodeAt(t+1);return d>=56320&&d<=57343?(m<<10)+d-56613888:m},RegExpValidationState.prototype.nextIndex=function e(t,s){s===void 0&&(s=!1);var p=this.source,g=p.length;if(t>=g)return g;var m=p.charCodeAt(t),d;return!(s||this.switchU)||m<=55295||m>=57344||t+1>=g||(d=p.charCodeAt(t+1))<56320||d>57343?t+1:t+2},RegExpValidationState.prototype.current=function e(t){return t===void 0&&(t=!1),this.at(this.pos,t)},RegExpValidationState.prototype.lookahead=function e(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)},RegExpValidationState.prototype.advance=function e(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)},RegExpValidationState.prototype.eat=function e(t,s){return s===void 0&&(s=!1),this.current(s)===t?(this.advance(s),!0):!1},RegExpValidationState.prototype.eatChars=function e(t,s){s===void 0&&(s=!1);for(var p=this.pos,g=0,m=t;g<m.length;g+=1){var d=m[g],l=this.at(p,s);if(l===-1||l!==d)return!1;p=this.nextIndex(p,s)}return this.pos=p,!0},pp$1.validateRegExpFlags=function(e){for(var t=e.validFlags,s=e.flags,p=!1,g=!1,m=0;m<s.length;m++){var d=s.charAt(m);t.indexOf(d)===-1&&this.raise(e.start,"Invalid regular expression flag"),s.indexOf(d,m+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),d==="u"&&(p=!0),d==="v"&&(g=!0)}this.options.ecmaVersion>=15&&p&&g&&this.raise(e.start,"Invalid regular expression flag")};function hasProp(e){for(var t in e)return!0;return!1}pp$1.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&hasProp(e.groupNames)&&(e.switchN=!0,this.regexp_pattern(e))},pp$1.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames=Object.create(null),e.backReferenceNames.length=0,e.branchID=null,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,s=e.backReferenceNames;t<s.length;t+=1){var p=s[t];e.groupNames[p]||e.raise("Invalid named capture referenced")}},pp$1.regexp_disjunction=function(e){var t=this.options.ecmaVersion>=16;for(t&&(e.branchID=new BranchID(e.branchID,null)),this.regexp_alternative(e);e.eat(124);)t&&(e.branchID=e.branchID.sibling()),this.regexp_alternative(e);t&&(e.branchID=e.branchID.parent),this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},pp$1.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},pp$1.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1},pp$1.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var s=!1;if(this.options.ecmaVersion>=9&&(s=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!s,!0}return e.pos=t,!1},pp$1.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1},pp$1.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},pp$1.regexp_eatBracedQuantifier=function(e,t){var s=e.pos;if(e.eat(123)){var p=0,g=-1;if(this.regexp_eatDecimalDigits(e)&&(p=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(g=e.lastIntValue),e.eat(125)))return g!==-1&&g<p&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=s}return!1},pp$1.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},pp$1.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},pp$1.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)){if(this.options.ecmaVersion>=16){var s=this.regexp_eatModifiers(e),p=e.eat(45);if(s||p){for(var g=0;g<s.length;g++){var m=s.charAt(g);s.indexOf(m,g+1)>-1&&e.raise("Duplicate regular expression modifiers")}if(p){var d=this.regexp_eatModifiers(e);!s&&!d&&e.current()===58&&e.raise("Invalid regular expression modifiers");for(var l=0;l<d.length;l++){var a=d.charAt(l);(d.indexOf(a,l+1)>-1||s.indexOf(a)>-1)&&e.raise("Duplicate regular expression modifiers")}}}}if(e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}}e.pos=t}return!1},pp$1.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},pp$1.regexp_eatModifiers=function(e){for(var t="",s=0;(s=e.current())!==-1&&isRegularExpressionModifier(s);)t+=codePointToString(s),e.advance();return t};function isRegularExpressionModifier(e){return e===105||e===109||e===115}pp$1.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},pp$1.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},pp$1.regexp_eatSyntaxCharacter=function(e){var t=e.current();return isSyntaxCharacter(t)?(e.lastIntValue=t,e.advance(),!0):!1};function isSyntaxCharacter(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}pp$1.regexp_eatPatternCharacters=function(e){for(var t=e.pos,s=0;(s=e.current())!==-1&&!isSyntaxCharacter(s);)e.advance();return e.pos!==t},pp$1.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1},pp$1.regexp_groupSpecifier=function(e){if(e.eat(63)){this.regexp_eatGroupName(e)||e.raise("Invalid group");var t=this.options.ecmaVersion>=16,s=e.groupNames[e.lastStringValue];if(s)if(t)for(var p=0,g=s;p<g.length;p+=1){var m=g[p];m.separatedFrom(e.branchID)||e.raise("Duplicate capture group name")}else e.raise("Duplicate capture group name");t?(s||(e.groupNames[e.lastStringValue]=[])).push(e.branchID):e.groupNames[e.lastStringValue]=!0}},pp$1.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},pp$1.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=codePointToString(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=codePointToString(e.lastIntValue);return!0}return!1},pp$1.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,s=this.options.ecmaVersion>=11,p=e.current(s);return e.advance(s),p===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,s)&&(p=e.lastIntValue),isRegExpIdentifierStart(p)?(e.lastIntValue=p,!0):(e.pos=t,!1)};function isRegExpIdentifierStart(e){return isIdentifierStart(e,!0)||e===36||e===95}pp$1.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,s=this.options.ecmaVersion>=11,p=e.current(s);return e.advance(s),p===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,s)&&(p=e.lastIntValue),isRegExpIdentifierPart(p)?(e.lastIntValue=p,!0):(e.pos=t,!1)};function isRegExpIdentifierPart(e){return isIdentifierChar(e,!0)||e===36||e===95||e===8204||e===8205}pp$1.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},pp$1.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var s=e.lastIntValue;if(e.switchU)return s>e.maxBackReference&&(e.maxBackReference=s),!0;if(s<=e.numCapturingParens)return!0;e.pos=t}return!1},pp$1.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},pp$1.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},pp$1.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},pp$1.regexp_eatZero=function(e){return e.current()===48&&!isDecimalDigit(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1},pp$1.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1},pp$1.regexp_eatControlLetter=function(e){var t=e.current();return isControlLetter(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function isControlLetter(e){return e>=65&&e<=90||e>=97&&e<=122}pp$1.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var s=e.pos,p=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var g=e.lastIntValue;if(p&&g>=55296&&g<=56319){var m=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var d=e.lastIntValue;if(d>=56320&&d<=57343)return e.lastIntValue=(g-55296)*1024+(d-56320)+65536,!0}e.pos=m,e.lastIntValue=g}return!0}if(p&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&isValidUnicode(e.lastIntValue))return!0;p&&e.raise("Invalid unicode escape"),e.pos=s}return!1};function isValidUnicode(e){return e>=0&&e<=1114111}pp$1.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1},pp$1.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var CharSetNone=0,CharSetOk=1,CharSetString=2;pp$1.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(isCharacterClassEscape(t))return e.lastIntValue=-1,e.advance(),CharSetOk;var s=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((s=t===80)||t===112)){e.lastIntValue=-1,e.advance();var p;if(e.eat(123)&&(p=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return s&&p===CharSetString&&e.raise("Invalid property name"),p;e.raise("Invalid property name")}return CharSetNone};function isCharacterClassEscape(e){return e===100||e===68||e===115||e===83||e===119||e===87}pp$1.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var s=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var p=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,s,p),CharSetOk}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var g=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,g)}return CharSetNone},pp$1.regexp_validateUnicodePropertyNameAndValue=function(e,t,s){hasOwn(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(s)||e.raise("Invalid property value")},pp$1.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return CharSetOk;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return CharSetString;e.raise("Invalid property name")},pp$1.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";isUnicodePropertyNameCharacter(t=e.current());)e.lastStringValue+=codePointToString(t),e.advance();return e.lastStringValue!==""};function isUnicodePropertyNameCharacter(e){return isControlLetter(e)||e===95}pp$1.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";isUnicodePropertyValueCharacter(t=e.current());)e.lastStringValue+=codePointToString(t),e.advance();return e.lastStringValue!==""};function isUnicodePropertyValueCharacter(e){return isUnicodePropertyNameCharacter(e)||isDecimalDigit(e)}pp$1.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},pp$1.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),s=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&s===CharSetString&&e.raise("Negated character class may contain strings"),!0}return!1},pp$1.regexp_classContents=function(e){return e.current()===93?CharSetOk:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),CharSetOk)},pp$1.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var s=e.lastIntValue;e.switchU&&(t===-1||s===-1)&&e.raise("Invalid character class"),t!==-1&&s!==-1&&t>s&&e.raise("Range out of order in character class")}}},pp$1.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var s=e.current();(s===99||isOctalDigit(s))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var p=e.current();return p!==93?(e.lastIntValue=p,e.advance(),!0):!1},pp$1.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},pp$1.regexp_classSetExpression=function(e){var t=CharSetOk,s;if(!this.regexp_eatClassSetRange(e))if(s=this.regexp_eatClassSetOperand(e)){s===CharSetString&&(t=CharSetString);for(var p=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(s=this.regexp_eatClassSetOperand(e))){s!==CharSetString&&(t=CharSetOk);continue}e.raise("Invalid character in character class")}if(p!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(p!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(s=this.regexp_eatClassSetOperand(e),!s)return t;s===CharSetString&&(t=CharSetString)}},pp$1.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var s=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var p=e.lastIntValue;return s!==-1&&p!==-1&&s>p&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1},pp$1.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?CharSetOk:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)},pp$1.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var s=e.eat(94),p=this.regexp_classContents(e);if(e.eat(93))return s&&p===CharSetString&&e.raise("Negated character class may contain strings"),p;e.pos=t}if(e.eat(92)){var g=this.regexp_eatCharacterClassEscape(e);if(g)return g;e.pos=t}return null},pp$1.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var s=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return s}else e.raise("Invalid escape");e.pos=t}return null},pp$1.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===CharSetString&&(t=CharSetString);return t},pp$1.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?CharSetOk:CharSetString},pp$1.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var s=e.current();return s<0||s===e.lookahead()&&isClassSetReservedDoublePunctuatorCharacter(s)||isClassSetSyntaxCharacter(s)?!1:(e.advance(),e.lastIntValue=s,!0)};function isClassSetReservedDoublePunctuatorCharacter(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function isClassSetSyntaxCharacter(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}pp$1.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return isClassSetReservedPunctuator(t)?(e.lastIntValue=t,e.advance(),!0):!1};function isClassSetReservedPunctuator(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}pp$1.regexp_eatClassControlLetter=function(e){var t=e.current();return isDecimalDigit(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1},pp$1.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},pp$1.regexp_eatDecimalDigits=function(e){var t=e.pos,s=0;for(e.lastIntValue=0;isDecimalDigit(s=e.current());)e.lastIntValue=10*e.lastIntValue+(s-48),e.advance();return e.pos!==t};function isDecimalDigit(e){return e>=48&&e<=57}pp$1.regexp_eatHexDigits=function(e){var t=e.pos,s=0;for(e.lastIntValue=0;isHexDigit(s=e.current());)e.lastIntValue=16*e.lastIntValue+hexToInt(s),e.advance();return e.pos!==t};function isHexDigit(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function hexToInt(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}pp$1.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var s=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+s*8+e.lastIntValue:e.lastIntValue=t*8+s}else e.lastIntValue=t;return!0}return!1},pp$1.regexp_eatOctalDigit=function(e){var t=e.current();return isOctalDigit(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function isOctalDigit(e){return e>=48&&e<=55}pp$1.regexp_eatFixedHexDigits=function(e,t){var s=e.pos;e.lastIntValue=0;for(var p=0;p<t;++p){var g=e.current();if(!isHexDigit(g))return e.pos=s,!1;e.lastIntValue=16*e.lastIntValue+hexToInt(g),e.advance()}return!0};var Token=function e(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new SourceLocation(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},pp=Parser.prototype;pp.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Token(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},pp.getToken=function(){return this.next(),new Token(this)},typeof Symbol<"u"&&(pp[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===types$1$1.eof,value:t}}}}),pp.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(types$1$1.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())},pp.readToken=function(e){return isIdentifierStart(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)},pp.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888},pp.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,s=this.input.indexOf("*/",this.pos+=2);if(s===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=s+2,this.options.locations)for(var p=void 0,g=t;(p=nextLineBreak(this.input,g,this.pos))>-1;)++this.curLine,g=this.lineStart=p;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,s),t,this.pos,e,this.curPosition())},pp.skipLineComment=function(e){for(var t=this.pos,s=this.options.onComment&&this.curPosition(),p=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!isNewLine(p);)p=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,s,this.curPosition())},pp.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&nonASCIIwhitespace.test(String.fromCharCode(e)))++this.pos;else break e}}},pp.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var s=this.type;this.type=e,this.value=t,this.updateContext(s)},pp.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(types$1$1.ellipsis)):(++this.pos,this.finishToken(types$1$1.dot))},pp.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(types$1$1.assign,2):this.finishOp(types$1$1.slash,1)},pp.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),s=1,p=e===42?types$1$1.star:types$1$1.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++s,p=types$1$1.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(types$1$1.assign,s+1):this.finishOp(p,s)},pp.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var s=this.input.charCodeAt(this.pos+2);if(s===61)return this.finishOp(types$1$1.assign,3)}return this.finishOp(e===124?types$1$1.logicalOR:types$1$1.logicalAND,2)}return t===61?this.finishOp(types$1$1.assign,2):this.finishOp(e===124?types$1$1.bitwiseOR:types$1$1.bitwiseAND,1)},pp.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(types$1$1.assign,2):this.finishOp(types$1$1.bitwiseXOR,1)},pp.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||lineBreak.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(types$1$1.incDec,2):t===61?this.finishOp(types$1$1.assign,2):this.finishOp(types$1$1.plusMin,1)},pp.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),s=1;return t===e?(s=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+s)===61?this.finishOp(types$1$1.assign,s+1):this.finishOp(types$1$1.bitShift,s)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(s=2),this.finishOp(types$1$1.relational,s))},pp.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(types$1$1.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(types$1$1.arrow)):this.finishOp(e===61?types$1$1.eq:types$1$1.prefix,1)},pp.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var s=this.input.charCodeAt(this.pos+2);if(s<48||s>57)return this.finishOp(types$1$1.questionDot,2)}if(t===63){if(e>=12){var p=this.input.charCodeAt(this.pos+2);if(p===61)return this.finishOp(types$1$1.assign,3)}return this.finishOp(types$1$1.coalesce,2)}}return this.finishOp(types$1$1.question,1)},pp.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),isIdentifierStart(t,!0)||t===92))return this.finishToken(types$1$1.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+codePointToString(t)+"'")},pp.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(types$1$1.parenL);case 41:return++this.pos,this.finishToken(types$1$1.parenR);case 59:return++this.pos,this.finishToken(types$1$1.semi);case 44:return++this.pos,this.finishToken(types$1$1.comma);case 91:return++this.pos,this.finishToken(types$1$1.bracketL);case 93:return++this.pos,this.finishToken(types$1$1.bracketR);case 123:return++this.pos,this.finishToken(types$1$1.braceL);case 125:return++this.pos,this.finishToken(types$1$1.braceR);case 58:return++this.pos,this.finishToken(types$1$1.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(types$1$1.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(types$1$1.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+codePointToString(e)+"'")},pp.finishOp=function(e,t){var s=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,s)},pp.readRegexp=function(){for(var e,t,s=this.pos;;){this.pos>=this.input.length&&this.raise(s,"Unterminated regular expression");var p=this.input.charAt(this.pos);if(lineBreak.test(p)&&this.raise(s,"Unterminated regular expression"),e)e=!1;else{if(p==="[")t=!0;else if(p==="]"&&t)t=!1;else if(p==="/"&&!t)break;e=p==="\\"}++this.pos}var g=this.input.slice(s,this.pos);++this.pos;var m=this.pos,d=this.readWord1();this.containsEsc&&this.unexpected(m);var l=this.regexpState||(this.regexpState=new RegExpValidationState(this));l.reset(s,g,d),this.validateRegExpFlags(l),this.validateRegExpPattern(l);var a=null;try{a=new RegExp(g,d)}catch{}return this.finishToken(types$1$1.regexp,{pattern:g,flags:d,value:a})},pp.readInt=function(e,t,s){for(var p=this.options.ecmaVersion>=12&&t===void 0,g=s&&this.input.charCodeAt(this.pos)===48,m=this.pos,d=0,l=0,a=0,o=t??1/0;a<o;++a,++this.pos){var h=this.input.charCodeAt(this.pos),v=void 0;if(p&&h===95){g&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),l===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),a===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),l=h;continue}if(h>=97?v=h-97+10:h>=65?v=h-65+10:h>=48&&h<=57?v=h-48:v=1/0,v>=e)break;l=h,d=d*e+v}return p&&l===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===m||t!=null&&this.pos-m!==t?null:d};function stringToNumber(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function stringToBigInt(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}pp.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var s=this.readInt(e);return s==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(s=stringToBigInt(this.input.slice(t,this.pos)),++this.pos):isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(types$1$1.num,s)},pp.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var s=this.pos-t>=2&&this.input.charCodeAt(t)===48;s&&this.strict&&this.raise(t,"Invalid number");var p=this.input.charCodeAt(this.pos);if(!s&&!e&&this.options.ecmaVersion>=11&&p===110){var g=stringToBigInt(this.input.slice(t,this.pos));return++this.pos,isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(types$1$1.num,g)}s&&/[89]/.test(this.input.slice(t,this.pos))&&(s=!1),p===46&&!s&&(++this.pos,this.readInt(10),p=this.input.charCodeAt(this.pos)),(p===69||p===101)&&!s&&(p=this.input.charCodeAt(++this.pos),(p===43||p===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var m=stringToNumber(this.input.slice(t,this.pos),s);return this.finishToken(types$1$1.num,m)},pp.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var s=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(s,"Code point out of bounds")}else t=this.readHexChar(4);return t},pp.readString=function(e){for(var t="",s=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var p=this.input.charCodeAt(this.pos);if(p===e)break;p===92?(t+=this.input.slice(s,this.pos),t+=this.readEscapedChar(!1),s=this.pos):p===8232||p===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(isNewLine(p)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(s,this.pos++),this.finishToken(types$1$1.string,t)};var INVALID_TEMPLATE_ESCAPE_ERROR={};pp.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===INVALID_TEMPLATE_ESCAPE_ERROR)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1},pp.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw INVALID_TEMPLATE_ESCAPE_ERROR;this.raise(e,t)},pp.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var s=this.input.charCodeAt(this.pos);if(s===96||s===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===types$1$1.template||this.type===types$1$1.invalidTemplate)?s===36?(this.pos+=2,this.finishToken(types$1$1.dollarBraceL)):(++this.pos,this.finishToken(types$1$1.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(types$1$1.template,e));if(s===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(isNewLine(s)){switch(e+=this.input.slice(t,this.pos),++this.pos,s){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(s);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},pp.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(types$1$1.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")},pp.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return codePointToString(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var s=this.pos-1;this.invalidStringToken(s,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var p=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],g=parseInt(p,8);return g>255&&(p=p.slice(0,-1),g=parseInt(p,8)),this.pos+=p.length-1,t=this.input.charCodeAt(this.pos),(p!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-p.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(g)}return isNewLine(t)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(t)}},pp.readHexChar=function(e){var t=this.pos,s=this.readInt(16,e);return s===null&&this.invalidStringToken(t,"Bad character escape sequence"),s},pp.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,s=this.pos,p=this.options.ecmaVersion>=6;this.pos<this.input.length;){var g=this.fullCharCodeAtPos();if(isIdentifierChar(g,p))this.pos+=g<=65535?1:2;else if(g===92){this.containsEsc=!0,e+=this.input.slice(s,this.pos);var m=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var d=this.readCodePoint();(t?isIdentifierStart:isIdentifierChar)(d,p)||this.invalidStringToken(m,"Invalid Unicode escape"),e+=codePointToString(d),s=this.pos}else break;t=!1}return e+this.input.slice(s,this.pos)},pp.readWord=function(){var e=this.readWord1(),t=types$1$1.name;return this.keywords.test(e)&&(t=keywords$2[e]),this.finishToken(t,e)};var version$a="8.15.0";Parser.acorn={Parser,version:version$a,defaultOptions,Position,SourceLocation,getLineInfo,Node,TokenType,tokTypes:types$1$1,keywordTypes:keywords$2,TokContext,tokContexts:types$6,isIdentifierChar,isIdentifierStart,Token,isNewLine,lineBreak,lineBreakG,nonASCIIwhitespace};function parse3(e,t){return Parser.parse(e,t)}function parseExpressionAt2(e,t,s){return Parser.parseExpressionAt(e,t,s)}function tokenizer2(e,t){return Parser.tokenizer(e,t)}const acorn=Object.freeze(Object.defineProperty({__proto__:null,Node,Parser,Position,SourceLocation,TokContext,Token,TokenType,defaultOptions,getLineInfo,isIdentifierChar,isIdentifierStart,isNewLine,keywordTypes:keywords$2,lineBreak,lineBreakG,nonASCIIwhitespace,parse:parse3,parseExpressionAt:parseExpressionAt2,tokContexts:types$6,tokTypes:types$1$1,tokenizer:tokenizer2,version:version$a},Symbol.toStringTag,{value:"Module"}));var firebaseNamespace={},lifecycle={};const require$$1$3=getAugmentedNamespace(__viteBrowserExternal$1);var validator$1={};var hasRequiredValidator$1;function requireValidator$1(){if(hasRequiredValidator$1)return validator$1;hasRequiredValidator$1=1;Object.defineProperty(validator$1,"__esModule",{value:!0}),validator$1.isBuffer=t,validator$1.isArray=s,validator$1.isNonEmptyArray=p,validator$1.isBoolean=g,validator$1.isNumber=m,validator$1.isString=d,validator$1.isBase64String=l,validator$1.isNonEmptyString=a,validator$1.isObject=o,validator$1.isNonNullObject=h,validator$1.isUid=v,validator$1.isPassword=_,validator$1.isEmail=y,validator$1.isPhoneNumber=w,validator$1.isISODateString=T,validator$1.isUTCDateString=I,validator$1.isURL=O,validator$1.isTopic=E,validator$1.isTaskId=C;const e=require$$1$3;function t(x){return x instanceof Buffer}function s(x){return Array.isArray(x)}function p(x){return s(x)&&x.length!==0}function g(x){return typeof x=="boolean"}function m(x){return typeof x=="number"&&!isNaN(x)}function d(x){return typeof x=="string"}function l(x){return d(x)?/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(x):!1}function a(x){return d(x)&&x!==""}function o(x){return typeof x=="object"&&!s(x)}function h(x){return o(x)&&x!==null}function v(x){return typeof x=="string"&&x.length>0&&x.length<=128}function _(x){return typeof x=="string"&&x.length>=6}function y(x){return typeof x!="string"?!1:/^[^@]+@[^@]+$/.test(x)}function w(x){if(typeof x!="string")return!1;const j=/^\+/,D=/[\da-zA-Z]+/;return j.test(x)&&D.test(x)}function T(x){try{return a(x)&&new Date(x).toISOString()===x}catch{return!1}}function I(x){try{return a(x)&&new Date(x).toUTCString()===x}catch{return!1}}function O(x){if(typeof x!="string"||/[^a-z0-9:/?#[\]@!$&'()*+,;=.\-_~%]/i.test(x))return!1;try{const D=e.parse(x),k=D.protocol,q=D.slashes,G=D.hostname,$=D.pathname;if(k!=="http:"&&k!=="https:"||!q||!G||!/^[a-zA-Z0-9]+[\w-]*([.]?[a-zA-Z0-9]+[\w-]*)*$/.test(G)||$&&$!=="/"&&!/^(\/[\w\-.~!$'()*+,;=:@%]+)*\/?$/.test($))return!1}catch{return!1}return!0}function E(x){return typeof x!="string"?!1:/^(\/topics\/)?(private\/)?[a-zA-Z0-9-_.~%]+$/.test(x)}function C(x){return typeof x!="string"?!1:/^[A-Za-z0-9_-]+$/.test(x)}return validator$1}var error={},deepCopy={};var hasRequiredDeepCopy;function requireDeepCopy(){if(hasRequiredDeepCopy)return deepCopy;hasRequiredDeepCopy=1;Object.defineProperty(deepCopy,"__esModule",{value:!0}),deepCopy.deepCopy=e,deepCopy.deepExtend=t;function e(s){return t(void 0,s)}function t(s,p){if(!(p instanceof Object))return p;switch(p.constructor){case Date:{const g=p;return new Date(g.getTime())}case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return p}for(const g in p)Object.prototype.hasOwnProperty.call(p,g)&&(s[g]=t(s[g],p[g]));return s}return deepCopy}var hasRequiredError;function requireError(){if(hasRequiredError)return error;hasRequiredError=1;Object.defineProperty(error,"__esModule",{value:!0}),error.InstanceIdClientErrorCode=error.InstallationsClientErrorCode=error.MessagingClientErrorCode=error.AuthClientErrorCode=error.AppErrorCodes=error.FirebaseProjectManagementError=error.FirebaseMessagingSessionError=error.FirebaseMessagingError=error.FirebaseInstallationsError=error.FirebaseInstanceIdError=error.FirebaseFirestoreError=error.FirebaseDatabaseError=error.FirebaseAuthError=error.FirebaseAppError=error.PrefixedFirebaseError=error.FirebaseError=void 0;const e=requireDeepCopy();class t extends Error{constructor(j){super(j.message),this.errorInfo=j,this.__proto__=t.prototype}get code(){return this.errorInfo?.code}get message(){return this.errorInfo?.message}toJSON(){return{code:this.code,message:this.message}}}error.FirebaseError=t;class s extends t{constructor(j,D,k){super({code:`${j}/${D}`,message:k}),this.codePrefix=j,this.__proto__=s.prototype}hasCode(j){return`${this.codePrefix}/${j}`===this.code}}error.PrefixedFirebaseError=s;class p extends s{constructor(j,D){super("app",j,D),this.__proto__=p.prototype}}error.FirebaseAppError=p;class g extends s{static fromServerError(j,D,k){const q=(j||"").indexOf(":");let G=null;q!==-1&&(G=j.substring(q+1).trim(),j=j.substring(0,q).trim());const $=O[j]||"INTERNAL_ERROR",W=(0,e.deepCopy)(y[$]);if(W.message=G||D||W.message,$==="INTERNAL_ERROR"&&typeof k<"u")try{W.message+=` Raw server response: "${JSON.stringify(k)}"`}catch{}return new g(W)}constructor(j,D){super("auth",j.code,D||j.message),this.__proto__=g.prototype}}error.FirebaseAuthError=g;class m extends t{constructor(j,D){super({code:"database/"+j.code,message:D||j.message})}}error.FirebaseDatabaseError=m;class d extends t{constructor(j,D){super({code:"firestore/"+j.code,message:D||j.message})}}error.FirebaseFirestoreError=d;class l extends t{constructor(j,D){super({code:"instance-id/"+j.code,message:D||j.message}),this.__proto__=l.prototype}}error.FirebaseInstanceIdError=l;class a extends t{constructor(j,D){super({code:"installations/"+j.code,message:D||j.message}),this.__proto__=a.prototype}}error.FirebaseInstallationsError=a;class o extends s{static fromServerError(j,D,k){let q="UNKNOWN_ERROR";j&&j in E&&(q=E[j]);const G=(0,e.deepCopy)(w[q]);if(G.message=D||G.message,q==="UNKNOWN_ERROR"&&typeof k<"u")try{G.message+=` Raw server response: "${JSON.stringify(k)}"`}catch{}return new o(G)}static fromTopicManagementServerError(j,D,k){const q=C[j]||"UNKNOWN_ERROR",G=(0,e.deepCopy)(w[q]);if(G.message=D||G.message,q==="UNKNOWN_ERROR"&&typeof k<"u")try{G.message+=` Raw server response: "${JSON.stringify(k)}"`}catch{}return new o(G)}constructor(j,D){super("messaging",j.code,D||j.message),this.__proto__=o.prototype}}error.FirebaseMessagingError=o;class h extends o{constructor(j,D,k){super(j,D||j.message),this.pendingBatchResponse=k,this.__proto__=h.prototype}toJSON(){return{code:this.code,message:this.message,pendingBatchResponse:this.pendingBatchResponse}}}error.FirebaseMessagingSessionError=h;class v extends s{constructor(j,D){super("project-management",j,D),this.__proto__=v.prototype}}error.FirebaseProjectManagementError=v;class _{}error.AppErrorCodes=_,_.APP_DELETED="app-deleted",_.DUPLICATE_APP="duplicate-app",_.INVALID_ARGUMENT="invalid-argument",_.INTERNAL_ERROR="internal-error",_.INVALID_APP_NAME="invalid-app-name",_.INVALID_APP_OPTIONS="invalid-app-options",_.INVALID_CREDENTIAL="invalid-credential",_.NETWORK_ERROR="network-error",_.NETWORK_TIMEOUT="network-timeout",_.NO_APP="no-app",_.UNABLE_TO_PARSE_RESPONSE="unable-to-parse-response";class y{}error.AuthClientErrorCode=y,y.AUTH_BLOCKING_TOKEN_EXPIRED={code:"auth-blocking-token-expired",message:"The provided Firebase Auth Blocking token is expired."},y.BILLING_NOT_ENABLED={code:"billing-not-enabled",message:"Feature requires billing to be enabled."},y.CLAIMS_TOO_LARGE={code:"claims-too-large",message:"Developer claims maximum payload size exceeded."},y.CONFIGURATION_EXISTS={code:"configuration-exists",message:"A configuration already exists with the provided identifier."},y.CONFIGURATION_NOT_FOUND={code:"configuration-not-found",message:"There is no configuration corresponding to the provided identifier."},y.ID_TOKEN_EXPIRED={code:"id-token-expired",message:"The provided Firebase ID token is expired."},y.INVALID_ARGUMENT={code:"argument-error",message:"Invalid argument provided."},y.INVALID_CONFIG={code:"invalid-config",message:"The provided configuration is invalid."},y.EMAIL_ALREADY_EXISTS={code:"email-already-exists",message:"The email address is already in use by another account."},y.EMAIL_NOT_FOUND={code:"email-not-found",message:"There is no user record corresponding to the provided email."},y.FORBIDDEN_CLAIM={code:"reserved-claim",message:"The specified developer claim is reserved and cannot be specified."},y.INVALID_ID_TOKEN={code:"invalid-id-token",message:"The provided ID token is not a valid Firebase ID token."},y.ID_TOKEN_REVOKED={code:"id-token-revoked",message:"The Firebase ID token has been revoked."},y.INTERNAL_ERROR={code:"internal-error",message:"An internal error has occurred."},y.INVALID_CLAIMS={code:"invalid-claims",message:"The provided custom claim attributes are invalid."},y.INVALID_CONTINUE_URI={code:"invalid-continue-uri",message:"The continue URL must be a valid URL string."},y.INVALID_CREATION_TIME={code:"invalid-creation-time",message:"The creation time must be a valid UTC date string."},y.INVALID_CREDENTIAL={code:"invalid-credential",message:"Invalid credential object provided."},y.INVALID_DISABLED_FIELD={code:"invalid-disabled-field",message:"The disabled field must be a boolean."},y.INVALID_DISPLAY_NAME={code:"invalid-display-name",message:"The displayName field must be a valid string."},y.INVALID_DYNAMIC_LINK_DOMAIN={code:"invalid-dynamic-link-domain",message:"The provided dynamic link domain is not configured or authorized for the current project."},y.INVALID_HOSTING_LINK_DOMAIN={code:"invalid-hosting-link-domain",message:"The provided hosting link domain is not configured in Firebase Hosting or is not owned by the current project."},y.INVALID_EMAIL_VERIFIED={code:"invalid-email-verified",message:"The emailVerified field must be a boolean."},y.INVALID_EMAIL={code:"invalid-email",message:"The email address is improperly formatted."},y.INVALID_NEW_EMAIL={code:"invalid-new-email",message:"The new email address is improperly formatted."},y.INVALID_ENROLLED_FACTORS={code:"invalid-enrolled-factors",message:"The enrolled factors must be a valid array of MultiFactorInfo objects."},y.INVALID_ENROLLMENT_TIME={code:"invalid-enrollment-time",message:"The second factor enrollment time must be a valid UTC date string."},y.INVALID_HASH_ALGORITHM={code:"invalid-hash-algorithm",message:"The hash algorithm must match one of the strings in the list of supported algorithms."},y.INVALID_HASH_BLOCK_SIZE={code:"invalid-hash-block-size",message:"The hash block size must be a valid number."},y.INVALID_HASH_DERIVED_KEY_LENGTH={code:"invalid-hash-derived-key-length",message:"The hash derived key length must be a valid number."},y.INVALID_HASH_KEY={code:"invalid-hash-key",message:"The hash key must a valid byte buffer."},y.INVALID_HASH_MEMORY_COST={code:"invalid-hash-memory-cost",message:"The hash memory cost must be a valid number."},y.INVALID_HASH_PARALLELIZATION={code:"invalid-hash-parallelization",message:"The hash parallelization must be a valid number."},y.INVALID_HASH_ROUNDS={code:"invalid-hash-rounds",message:"The hash rounds must be a valid number."},y.INVALID_HASH_SALT_SEPARATOR={code:"invalid-hash-salt-separator",message:"The hashing algorithm salt separator field must be a valid byte buffer."},y.INVALID_LAST_SIGN_IN_TIME={code:"invalid-last-sign-in-time",message:"The last sign-in time must be a valid UTC date string."},y.INVALID_NAME={code:"invalid-name",message:"The resource name provided is invalid."},y.INVALID_OAUTH_CLIENT_ID={code:"invalid-oauth-client-id",message:"The provided OAuth client ID is invalid."},y.INVALID_PAGE_TOKEN={code:"invalid-page-token",message:"The page token must be a valid non-empty string."},y.INVALID_PASSWORD={code:"invalid-password",message:"The password must be a string with at least 6 characters."},y.INVALID_PASSWORD_HASH={code:"invalid-password-hash",message:"The password hash must be a valid byte buffer."},y.INVALID_PASSWORD_SALT={code:"invalid-password-salt",message:"The password salt must be a valid byte buffer."},y.INVALID_PHONE_NUMBER={code:"invalid-phone-number",message:"The phone number must be a non-empty E.164 standard compliant identifier string."},y.INVALID_PHOTO_URL={code:"invalid-photo-url",message:"The photoURL field must be a valid URL."},y.INVALID_PROJECT_ID={code:"invalid-project-id",message:"Invalid parent project. Either parent project doesn't exist or didn't enable multi-tenancy."},y.INVALID_PROVIDER_DATA={code:"invalid-provider-data",message:"The providerData must be a valid array of UserInfo objects."},y.INVALID_PROVIDER_ID={code:"invalid-provider-id",message:"The providerId must be a valid supported provider identifier string."},y.INVALID_PROVIDER_UID={code:"invalid-provider-uid",message:"The providerUid must be a valid provider uid string."},y.INVALID_OAUTH_RESPONSETYPE={code:"invalid-oauth-responsetype",message:"Only exactly one OAuth responseType should be set to true."},y.INVALID_SESSION_COOKIE_DURATION={code:"invalid-session-cookie-duration",message:"The session cookie duration must be a valid number in milliseconds between 5 minutes and 2 weeks."},y.INVALID_TENANT_ID={code:"invalid-tenant-id",message:"The tenant ID must be a valid non-empty string."},y.INVALID_TENANT_TYPE={code:"invalid-tenant-type",message:'Tenant type must be either "full_service" or "lightweight".'},y.INVALID_TESTING_PHONE_NUMBER={code:"invalid-testing-phone-number",message:"Invalid testing phone number or invalid test code provided."},y.INVALID_UID={code:"invalid-uid",message:"The uid must be a non-empty string with at most 128 characters."},y.INVALID_USER_IMPORT={code:"invalid-user-import",message:"The user record to import is invalid."},y.INVALID_TOKENS_VALID_AFTER_TIME={code:"invalid-tokens-valid-after-time",message:"The tokensValidAfterTime must be a valid UTC number in seconds."},y.MISMATCHING_TENANT_ID={code:"mismatching-tenant-id",message:"User tenant ID does not match with the current TenantAwareAuth tenant ID."},y.MISSING_ANDROID_PACKAGE_NAME={code:"missing-android-pkg-name",message:"An Android Package Name must be provided if the Android App is required to be installed."},y.MISSING_CONFIG={code:"missing-config",message:"The provided configuration is missing required attributes."},y.MISSING_CONTINUE_URI={code:"missing-continue-uri",message:"A valid continue URL must be provided in the request."},y.MISSING_DISPLAY_NAME={code:"missing-display-name",message:"The resource being created or edited is missing a valid display name."},y.MISSING_EMAIL={code:"missing-email",message:"The email is required for the specified action. For example, a multi-factor user requires a verified email."},y.MISSING_IOS_BUNDLE_ID={code:"missing-ios-bundle-id",message:"The request is missing an iOS Bundle ID."},y.MISSING_ISSUER={code:"missing-issuer",message:"The OAuth/OIDC configuration issuer must not be empty."},y.MISSING_HASH_ALGORITHM={code:"missing-hash-algorithm",message:"Importing users with password hashes requires that the hashing algorithm and its parameters be provided."},y.MISSING_OAUTH_CLIENT_ID={code:"missing-oauth-client-id",message:"The OAuth/OIDC configuration client ID must not be empty."},y.MISSING_OAUTH_CLIENT_SECRET={code:"missing-oauth-client-secret",message:"The OAuth configuration client secret is required to enable OIDC code flow."},y.MISSING_PROVIDER_ID={code:"missing-provider-id",message:"A valid provider ID must be provided in the request."},y.MISSING_SAML_RELYING_PARTY_CONFIG={code:"missing-saml-relying-party-config",message:"The SAML configuration provided is missing a relying party configuration."},y.MAXIMUM_TEST_PHONE_NUMBER_EXCEEDED={code:"test-phone-number-limit-exceeded",message:"The maximum allowed number of test phone number / code pairs has been exceeded."},y.MAXIMUM_USER_COUNT_EXCEEDED={code:"maximum-user-count-exceeded",message:"The maximum allowed number of users to import has been exceeded."},y.MISSING_UID={code:"missing-uid",message:"A uid identifier is required for the current operation."},y.OPERATION_NOT_ALLOWED={code:"operation-not-allowed",message:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."},y.PHONE_NUMBER_ALREADY_EXISTS={code:"phone-number-already-exists",message:"The user with the provided phone number already exists."},y.PROJECT_NOT_FOUND={code:"project-not-found",message:"No Firebase project was found for the provided credential."},y.INSUFFICIENT_PERMISSION={code:"insufficient-permission",message:'Credential implementation provided to initializeApp() via the "credential" property has insufficient permission to access the requested resource. See https://firebase.google.com/docs/admin/setup for details on how to authenticate this SDK with appropriate permissions.'},y.QUOTA_EXCEEDED={code:"quota-exceeded",message:"The project quota for the specified operation has been exceeded."},y.SECOND_FACTOR_LIMIT_EXCEEDED={code:"second-factor-limit-exceeded",message:"The maximum number of allowed second factors on a user has been exceeded."},y.SECOND_FACTOR_UID_ALREADY_EXISTS={code:"second-factor-uid-already-exists",message:'The specified second factor "uid" already exists.'},y.SESSION_COOKIE_EXPIRED={code:"session-cookie-expired",message:"The Firebase session cookie is expired."},y.SESSION_COOKIE_REVOKED={code:"session-cookie-revoked",message:"The Firebase session cookie has been revoked."},y.TENANT_NOT_FOUND={code:"tenant-not-found",message:"There is no tenant corresponding to the provided identifier."},y.UID_ALREADY_EXISTS={code:"uid-already-exists",message:"The user with the provided uid already exists."},y.UNAUTHORIZED_DOMAIN={code:"unauthorized-continue-uri",message:"The domain of the continue URL is not whitelisted. Whitelist the domain in the Firebase console."},y.UNSUPPORTED_FIRST_FACTOR={code:"unsupported-first-factor",message:"A multi-factor user requires a supported first factor."},y.UNSUPPORTED_SECOND_FACTOR={code:"unsupported-second-factor",message:"The request specified an unsupported type of second factor."},y.UNSUPPORTED_TENANT_OPERATION={code:"unsupported-tenant-operation",message:"This operation is not supported in a multi-tenant context."},y.UNVERIFIED_EMAIL={code:"unverified-email",message:"A verified email is required for the specified action. For example, a multi-factor user requires a verified email."},y.USER_NOT_FOUND={code:"user-not-found",message:"There is no user record corresponding to the provided identifier."},y.NOT_FOUND={code:"not-found",message:"The requested resource was not found."},y.USER_DISABLED={code:"user-disabled",message:"The user record is disabled."},y.USER_NOT_DISABLED={code:"user-not-disabled",message:"The user must be disabled in order to bulk delete it (or you must pass force=true)."},y.INVALID_RECAPTCHA_ACTION={code:"invalid-recaptcha-action",message:'reCAPTCHA action must be "BLOCK".'},y.INVALID_RECAPTCHA_ENFORCEMENT_STATE={code:"invalid-recaptcha-enforcement-state",message:'reCAPTCHA enforcement state must be either "OFF", "AUDIT" or "ENFORCE".'},y.RECAPTCHA_NOT_ENABLED={code:"racaptcha-not-enabled",message:"reCAPTCHA enterprise is not enabled."};class w{}error.MessagingClientErrorCode=w,w.INVALID_ARGUMENT={code:"invalid-argument",message:"Invalid argument provided."},w.INVALID_RECIPIENT={code:"invalid-recipient",message:"Invalid message recipient provided."},w.INVALID_PAYLOAD={code:"invalid-payload",message:"Invalid message payload provided."},w.INVALID_DATA_PAYLOAD_KEY={code:"invalid-data-payload-key",message:"The data message payload contains an invalid key. See the reference documentation for the DataMessagePayload type for restricted keys."},w.PAYLOAD_SIZE_LIMIT_EXCEEDED={code:"payload-size-limit-exceeded",message:"The provided message payload exceeds the FCM size limits. See the error documentation for more details."},w.INVALID_OPTIONS={code:"invalid-options",message:"Invalid message options provided."},w.INVALID_REGISTRATION_TOKEN={code:"invalid-registration-token",message:"Invalid registration token provided. Make sure it matches the registration token the client app receives from registering with FCM."},w.REGISTRATION_TOKEN_NOT_REGISTERED={code:"registration-token-not-registered",message:"The provided registration token is not registered. A previously valid registration token can be unregistered for a variety of reasons. See the error documentation for more details. Remove this registration token and stop using it to send messages."},w.MISMATCHED_CREDENTIAL={code:"mismatched-credential",message:"The credential used to authenticate this SDK does not have permission to send messages to the device corresponding to the provided registration token. Make sure the credential and registration token both belong to the same Firebase project."},w.INVALID_PACKAGE_NAME={code:"invalid-package-name",message:'The message was addressed to a registration token whose package name does not match the provided "restrictedPackageName" option.'},w.DEVICE_MESSAGE_RATE_EXCEEDED={code:"device-message-rate-exceeded",message:"The rate of messages to a particular device is too high. Reduce the number of messages sent to this device and do not immediately retry sending to this device."},w.TOPICS_MESSAGE_RATE_EXCEEDED={code:"topics-message-rate-exceeded",message:"The rate of messages to subscribers to a particular topic is too high. Reduce the number of messages sent for this topic, and do not immediately retry sending to this topic."},w.MESSAGE_RATE_EXCEEDED={code:"message-rate-exceeded",message:"Sending limit exceeded for the message target."},w.THIRD_PARTY_AUTH_ERROR={code:"third-party-auth-error",message:"A message targeted to an iOS device could not be sent because the required APNs SSL certificate was not uploaded or has expired. Check the validity of your development and production certificates."},w.TOO_MANY_TOPICS={code:"too-many-topics",message:"The maximum number of topics the provided registration token can be subscribed to has been exceeded."},w.AUTHENTICATION_ERROR={code:"authentication-error",message:"An error occurred when trying to authenticate to the FCM servers. Make sure the credential used to authenticate this SDK has the proper permissions. See https://firebase.google.com/docs/admin/setup for setup instructions."},w.SERVER_UNAVAILABLE={code:"server-unavailable",message:"The FCM server could not process the request in time. See the error documentation for more details."},w.INTERNAL_ERROR={code:"internal-error",message:"An internal error has occurred. Please retry the request."},w.UNKNOWN_ERROR={code:"unknown-error",message:"An unknown server error was returned."};class T{}error.InstallationsClientErrorCode=T,T.INVALID_ARGUMENT={code:"invalid-argument",message:"Invalid argument provided."},T.INVALID_PROJECT_ID={code:"invalid-project-id",message:"Invalid project ID provided."},T.INVALID_INSTALLATION_ID={code:"invalid-installation-id",message:"Invalid installation ID provided."},T.API_ERROR={code:"api-error",message:"Installation ID API call failed."};class I extends T{}error.InstanceIdClientErrorCode=I,I.INVALID_INSTANCE_ID={code:"invalid-instance-id",message:"Invalid instance ID provided."};const O={BILLING_NOT_ENABLED:"BILLING_NOT_ENABLED",CLAIMS_TOO_LARGE:"CLAIMS_TOO_LARGE",CONFIGURATION_EXISTS:"CONFIGURATION_EXISTS",CONFIGURATION_NOT_FOUND:"CONFIGURATION_NOT_FOUND",INSUFFICIENT_PERMISSION:"INSUFFICIENT_PERMISSION",INVALID_CONFIG:"INVALID_CONFIG",INVALID_CONFIG_ID:"INVALID_PROVIDER_ID",INVALID_CONTINUE_URI:"INVALID_CONTINUE_URI",INVALID_DYNAMIC_LINK_DOMAIN:"INVALID_DYNAMIC_LINK_DOMAIN",INVALID_HOSTING_LINK_DOMAIN:"INVALID_HOSTING_LINK_DOMAIN",DUPLICATE_EMAIL:"EMAIL_ALREADY_EXISTS",DUPLICATE_LOCAL_ID:"UID_ALREADY_EXISTS",DUPLICATE_MFA_ENROLLMENT_ID:"SECOND_FACTOR_UID_ALREADY_EXISTS",EMAIL_EXISTS:"EMAIL_ALREADY_EXISTS",EMAIL_NOT_FOUND:"EMAIL_NOT_FOUND",FORBIDDEN_CLAIM:"FORBIDDEN_CLAIM",INVALID_CLAIMS:"INVALID_CLAIMS",INVALID_DURATION:"INVALID_SESSION_COOKIE_DURATION",INVALID_EMAIL:"INVALID_EMAIL",INVALID_NEW_EMAIL:"INVALID_NEW_EMAIL",INVALID_DISPLAY_NAME:"INVALID_DISPLAY_NAME",INVALID_ID_TOKEN:"INVALID_ID_TOKEN",INVALID_NAME:"INVALID_NAME",INVALID_OAUTH_CLIENT_ID:"INVALID_OAUTH_CLIENT_ID",INVALID_PAGE_SELECTION:"INVALID_PAGE_TOKEN",INVALID_PHONE_NUMBER:"INVALID_PHONE_NUMBER",INVALID_PROJECT_ID:"INVALID_PROJECT_ID",INVALID_PROVIDER_ID:"INVALID_PROVIDER_ID",INVALID_SERVICE_ACCOUNT:"INVALID_SERVICE_ACCOUNT",INVALID_TESTING_PHONE_NUMBER:"INVALID_TESTING_PHONE_NUMBER",INVALID_TENANT_TYPE:"INVALID_TENANT_TYPE",MISSING_ANDROID_PACKAGE_NAME:"MISSING_ANDROID_PACKAGE_NAME",MISSING_CONFIG:"MISSING_CONFIG",MISSING_CONFIG_ID:"MISSING_PROVIDER_ID",MISSING_DISPLAY_NAME:"MISSING_DISPLAY_NAME",MISSING_EMAIL:"MISSING_EMAIL",MISSING_IOS_BUNDLE_ID:"MISSING_IOS_BUNDLE_ID",MISSING_ISSUER:"MISSING_ISSUER",MISSING_LOCAL_ID:"MISSING_UID",MISSING_OAUTH_CLIENT_ID:"MISSING_OAUTH_CLIENT_ID",MISSING_PROVIDER_ID:"MISSING_PROVIDER_ID",MISSING_SAML_RELYING_PARTY_CONFIG:"MISSING_SAML_RELYING_PARTY_CONFIG",MISSING_USER_ACCOUNT:"MISSING_UID",OPERATION_NOT_ALLOWED:"OPERATION_NOT_ALLOWED",PERMISSION_DENIED:"INSUFFICIENT_PERMISSION",PHONE_NUMBER_EXISTS:"PHONE_NUMBER_ALREADY_EXISTS",PROJECT_NOT_FOUND:"PROJECT_NOT_FOUND",QUOTA_EXCEEDED:"QUOTA_EXCEEDED",SECOND_FACTOR_LIMIT_EXCEEDED:"SECOND_FACTOR_LIMIT_EXCEEDED",TENANT_NOT_FOUND:"TENANT_NOT_FOUND",TENANT_ID_MISMATCH:"MISMATCHING_TENANT_ID",TOKEN_EXPIRED:"ID_TOKEN_EXPIRED",UNAUTHORIZED_DOMAIN:"UNAUTHORIZED_DOMAIN",UNSUPPORTED_FIRST_FACTOR:"UNSUPPORTED_FIRST_FACTOR",UNSUPPORTED_SECOND_FACTOR:"UNSUPPORTED_SECOND_FACTOR",UNSUPPORTED_TENANT_OPERATION:"UNSUPPORTED_TENANT_OPERATION",UNVERIFIED_EMAIL:"UNVERIFIED_EMAIL",USER_NOT_FOUND:"USER_NOT_FOUND",USER_DISABLED:"USER_DISABLED",WEAK_PASSWORD:"INVALID_PASSWORD",INVALID_RECAPTCHA_ACTION:"INVALID_RECAPTCHA_ACTION",INVALID_RECAPTCHA_ENFORCEMENT_STATE:"INVALID_RECAPTCHA_ENFORCEMENT_STATE",RECAPTCHA_NOT_ENABLED:"RECAPTCHA_NOT_ENABLED"},E={InvalidParameters:"INVALID_ARGUMENT",MismatchSenderId:"MISMATCHED_CREDENTIAL",Unavailable:"SERVER_UNAVAILABLE",InternalServerError:"INTERNAL_ERROR",InvalidRegistration:"INVALID_REGISTRATION_TOKEN",NotRegistered:"REGISTRATION_TOKEN_NOT_REGISTERED",InvalidPackageName:"INVALID_PACKAGE_NAME",MessageTooBig:"PAYLOAD_SIZE_LIMIT_EXCEEDED",InvalidDataKey:"INVALID_DATA_PAYLOAD_KEY",InvalidTtl:"INVALID_OPTIONS",DeviceMessageRateExceeded:"DEVICE_MESSAGE_RATE_EXCEEDED",TopicsMessageRateExceeded:"TOPICS_MESSAGE_RATE_EXCEEDED",InvalidApnsCredential:"THIRD_PARTY_AUTH_ERROR",NOT_FOUND:"REGISTRATION_TOKEN_NOT_REGISTERED",PERMISSION_DENIED:"MISMATCHED_CREDENTIAL",RESOURCE_EXHAUSTED:"MESSAGE_RATE_EXCEEDED",UNAUTHENTICATED:"THIRD_PARTY_AUTH_ERROR",APNS_AUTH_ERROR:"THIRD_PARTY_AUTH_ERROR",INTERNAL:"INTERNAL_ERROR",INVALID_ARGUMENT:"INVALID_ARGUMENT",QUOTA_EXCEEDED:"MESSAGE_RATE_EXCEEDED",SENDER_ID_MISMATCH:"MISMATCHED_CREDENTIAL",THIRD_PARTY_AUTH_ERROR:"THIRD_PARTY_AUTH_ERROR",UNAVAILABLE:"SERVER_UNAVAILABLE",UNREGISTERED:"REGISTRATION_TOKEN_NOT_REGISTERED",UNSPECIFIED_ERROR:"UNKNOWN_ERROR"},C={NOT_FOUND:"REGISTRATION_TOKEN_NOT_REGISTERED",INVALID_ARGUMENT:"INVALID_REGISTRATION_TOKEN",TOO_MANY_TOPICS:"TOO_MANY_TOPICS",RESOURCE_EXHAUSTED:"TOO_MANY_TOPICS",PERMISSION_DENIED:"AUTHENTICATION_ERROR",DEADLINE_EXCEEDED:"SERVER_UNAVAILABLE",INTERNAL:"INTERNAL_ERROR",UNKNOWN:"UNKNOWN_ERROR"};return error}var credentialInternal={},src$f={},googleauth={},src$e={},src$d={},gaxios={},extend,hasRequiredExtend;function requireExtend(){if(hasRequiredExtend)return extend;hasRequiredExtend=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,s=Object.defineProperty,p=Object.getOwnPropertyDescriptor,g=function(o){return typeof Array.isArray=="function"?Array.isArray(o):t.call(o)==="[object Array]"},m=function(o){if(!o||t.call(o)!=="[object Object]")return!1;var h=e.call(o,"constructor"),v=o.constructor&&o.constructor.prototype&&e.call(o.constructor.prototype,"isPrototypeOf");if(o.constructor&&!h&&!v)return!1;var _;for(_ in o);return typeof _>"u"||e.call(o,_)},d=function(o,h){s&&h.name==="__proto__"?s(o,h.name,{enumerable:!0,configurable:!0,value:h.newValue,writable:!0}):o[h.name]=h.newValue},l=function(o,h){if(h==="__proto__")if(e.call(o,h)){if(p)return p(o,h).value}else return;return o[h]};return extend=function a(){var o,h,v,_,y,w,T=arguments[0],I=1,O=arguments.length,E=!1;for(typeof T=="boolean"&&(E=T,T=arguments[1]||{},I=2),(T==null||typeof T!="object"&&typeof T!="function")&&(T={});I<O;++I)if(o=arguments[I],o!=null)for(h in o)v=l(T,h),_=l(o,h),T!==_&&(E&&_&&(m(_)||(y=g(_)))?(y?(y=!1,w=v&&g(v)?v:[]):w=v&&m(v)?v:{},d(T,{name:h,newValue:a(E,w,_)})):typeof _<"u"&&d(T,{name:h,newValue:_}));return T},extend}var browser$5={exports:{}},hasRequiredBrowser$3;function requireBrowser$3(){return hasRequiredBrowser$3||(hasRequiredBrowser$3=1,(function(e,t){var s=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal<"u")return commonjsGlobal;throw new Error("unable to locate global object")},p=s();e.exports=t=p.fetch,p.fetch&&(t.default=p.fetch.bind(p)),t.Headers=p.Headers,t.Request=p.Request,t.Response=p.Response})(browser$5,browser$5.exports)),browser$5.exports}var isStream_1,hasRequiredIsStream;function requireIsStream(){if(hasRequiredIsStream)return isStream_1;hasRequiredIsStream=1;const e=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";return e.writable=t=>e(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object",e.readable=t=>e(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object",e.duplex=t=>e.writable(t)&&e.readable(t),e.transform=t=>e.duplex(t)&&typeof t._transform=="function",isStream_1=e,isStream_1}var common$1={},util$9={};const name$2="gaxios",version$9="6.7.1",description$1="A simple common HTTP client specifically for Google APIs and services.",main$2="build/src/index.js",types$5="build/src/index.d.ts",files$1=["build/src"],scripts$1={lint:"gts check",test:"c8 mocha build/test","presystem-test":"npm run compile","system-test":"mocha build/system-test --timeout 80000",compile:"tsc -p .",fix:"gts fix",prepare:"npm run compile",pretest:"npm run compile",webpack:"webpack","prebrowser-test":"npm run compile","browser-test":"node build/browser-test/browser-test-runner.js",docs:"compodoc src/","docs-test":"linkinator docs","predocs-test":"npm run docs","samples-test":"cd samples/ && npm link ../ && npm test && cd ../",prelint:"cd samples; npm link ../; npm install",clean:"gts clean",precompile:"gts clean"},repository$1="googleapis/gaxios",keywords$1=["google"],engines$1={node:">=14"},author$1="Google, LLC",license$1="Apache-2.0",devDependencies$1={"@babel/plugin-proposal-private-methods":"^7.18.6","@compodoc/compodoc":"1.1.19","@types/cors":"^2.8.6","@types/express":"^4.16.1","@types/extend":"^3.0.1","@types/mocha":"^9.0.0","@types/multiparty":"0.0.36","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^20.0.0","@types/node-fetch":"^2.5.7","@types/sinon":"^17.0.0","@types/tmp":"0.2.6","@types/uuid":"^10.0.0","abort-controller":"^3.0.0",assert:"^2.0.0",browserify:"^17.0.0",c8:"^8.0.0",cheerio:"1.0.0-rc.10",cors:"^2.8.5",execa:"^5.0.0",express:"^4.16.4","form-data":"^4.0.0",gts:"^5.0.0","is-docker":"^2.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-remap-coverage":"^0.1.5","karma-sourcemap-loader":"^0.4.0","karma-webpack":"5.0.0",linkinator:"^3.0.0",mocha:"^8.0.0",multiparty:"^4.2.1",mv:"^2.1.1",ncp:"^2.0.0",nock:"^13.0.0","null-loader":"^4.0.0",puppeteer:"^19.0.0",sinon:"^18.0.0","stream-browserify":"^3.0.0",tmp:"0.2.3","ts-loader":"^8.0.0",typescript:"^5.1.6",webpack:"^5.35.0","webpack-cli":"^4.0.0"},dependencies$1={extend:"^3.0.2","https-proxy-agent":"^7.0.1","is-stream":"^2.0.0","node-fetch":"^2.6.9",uuid:"^9.0.1"},require$$0$4={name:name$2,version:version$9,description:description$1,main:main$2,types:types$5,files:files$1,scripts:scripts$1,repository:repository$1,keywords:keywords$1,engines:engines$1,author:author$1,license:license$1,devDependencies:devDependencies$1,dependencies:dependencies$1};var hasRequiredUtil$9;function requireUtil$9(){return hasRequiredUtil$9||(hasRequiredUtil$9=1,Object.defineProperty(util$9,"__esModule",{value:!0}),util$9.pkg=void 0,util$9.pkg=require$$0$4),util$9}var hasRequiredCommon$2;function requireCommon$2(){return hasRequiredCommon$2||(hasRequiredCommon$2=1,(function(e){var t=common$1&&common$1.__importDefault||function(o){return o&&o.__esModule?o:{default:o}},s;Object.defineProperty(e,"__esModule",{value:!0}),e.GaxiosError=e.GAXIOS_ERROR_SYMBOL=void 0,e.defaultErrorRedactor=a;const p=require$$1$3,g=requireUtil$9(),m=t(requireExtend());e.GAXIOS_ERROR_SYMBOL=Symbol.for(`${g.pkg.name}-gaxios-error`);class d extends Error{static[(s=e.GAXIOS_ERROR_SYMBOL,Symbol.hasInstance)](h){return h&&typeof h=="object"&&e.GAXIOS_ERROR_SYMBOL in h&&h[e.GAXIOS_ERROR_SYMBOL]===g.pkg.version?!0:Function.prototype[Symbol.hasInstance].call(d,h)}constructor(h,v,_,y){var w;if(super(h),this.config=v,this.response=_,this.error=y,this[s]=g.pkg.version,this.config=(0,m.default)(!0,{},v),this.response&&(this.response.config=(0,m.default)(!0,{},this.response.config)),this.response){try{this.response.data=l(this.config.responseType,(w=this.response)===null||w===void 0?void 0:w.data)}catch{}this.status=this.response.status}y&&"code"in y&&y.code&&(this.code=y.code),v.errorRedactor&&v.errorRedactor({config:this.config,response:this.response})}}e.GaxiosError=d;function l(o,h){switch(o){case"stream":return h;case"json":return JSON.parse(JSON.stringify(h));case"arraybuffer":return JSON.parse(Buffer.from(h).toString("utf8"));case"blob":return JSON.parse(h.text());default:return h}}function a(o){const h="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.";function v(w){if(w)for(const T of Object.keys(w))/^authentication$/i.test(T)&&(w[T]=h),/^authorization$/i.test(T)&&(w[T]=h),/secret/i.test(T)&&(w[T]=h)}function _(w,T){if(typeof w=="object"&&w!==null&&typeof w[T]=="string"){const I=w[T];(/grant_type=/i.test(I)||/assertion=/i.test(I)||/secret/i.test(I))&&(w[T]=h)}}function y(w){typeof w=="object"&&w!==null&&("grant_type"in w&&(w.grant_type=h),"assertion"in w&&(w.assertion=h),"client_secret"in w&&(w.client_secret=h))}if(o.config){v(o.config.headers),_(o.config,"data"),y(o.config.data),_(o.config,"body"),y(o.config.body);try{const w=new p.URL("",o.config.url);w.searchParams.has("token")&&w.searchParams.set("token",h),w.searchParams.has("client_secret")&&w.searchParams.set("client_secret",h),o.config.url=w.toString()}catch{}}return o.response&&(a({config:o.response.config}),v(o.response.headers),_(o.response,"data"),y(o.response.data)),o}})(common$1)),common$1}var retry$2={},hasRequiredRetry$2;function requireRetry$2(){if(hasRequiredRetry$2)return retry$2;hasRequiredRetry$2=1,Object.defineProperty(retry$2,"__esModule",{value:!0}),retry$2.getRetryConfig=e;async function e(g){let m=s(g);if(!g||!g.config||!m&&!g.config.retry)return{shouldRetry:!1};m=m||{},m.currentRetryAttempt=m.currentRetryAttempt||0,m.retry=m.retry===void 0||m.retry===null?3:m.retry,m.httpMethodsToRetry=m.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],m.noResponseRetries=m.noResponseRetries===void 0||m.noResponseRetries===null?2:m.noResponseRetries,m.retryDelayMultiplier=m.retryDelayMultiplier?m.retryDelayMultiplier:2,m.timeOfFirstRequest=m.timeOfFirstRequest?m.timeOfFirstRequest:Date.now(),m.totalTimeout=m.totalTimeout?m.totalTimeout:Number.MAX_SAFE_INTEGER,m.maxRetryDelay=m.maxRetryDelay?m.maxRetryDelay:Number.MAX_SAFE_INTEGER;const d=[[100,199],[408,408],[429,429],[500,599]];if(m.statusCodesToRetry=m.statusCodesToRetry||d,g.config.retryConfig=m,!await(m.shouldRetry||t)(g))return{shouldRetry:!1,config:g.config};const a=p(m);g.config.retryConfig.currentRetryAttempt+=1;const o=m.retryBackoff?m.retryBackoff(g,a):new Promise(h=>{setTimeout(h,a)});return m.onRetryAttempt&&m.onRetryAttempt(g),await o,{shouldRetry:!0,config:g.config}}function t(g){var m;const d=s(g);if(g.name==="AbortError"||((m=g.error)===null||m===void 0?void 0:m.name)==="AbortError"||!d||d.retry===0||!g.response&&(d.currentRetryAttempt||0)>=d.noResponseRetries||!g.config.method||d.httpMethodsToRetry.indexOf(g.config.method.toUpperCase())<0)return!1;if(g.response&&g.response.status){let l=!1;for(const[a,o]of d.statusCodesToRetry){const h=g.response.status;if(h>=a&&h<=o){l=!0;break}}if(!l)return!1}return d.currentRetryAttempt=d.currentRetryAttempt||0,!(d.currentRetryAttempt>=d.retry)}function s(g){if(g&&g.config&&g.config.retryConfig)return g.config.retryConfig}function p(g){var m;const l=(g.currentRetryAttempt?0:(m=g.retryDelay)!==null&&m!==void 0?m:100)+(Math.pow(g.retryDelayMultiplier,g.currentRetryAttempt)-1)/2*1e3,a=g.totalTimeout-(Date.now()-g.timeOfFirstRequest);return Math.min(l,a,g.maxRetryDelay)}return retry$2}var commonjsBrowser$2={},v1$4={},rng$3={},hasRequiredRng$2;function requireRng$2(){if(hasRequiredRng$2)return rng$3;hasRequiredRng$2=1,Object.defineProperty(rng$3,"__esModule",{value:!0}),rng$3.default=s;let e;const t=new Uint8Array(16);function s(){if(!e&&(e=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)}return rng$3}var stringify$4={},validate$4={},regex$2={},hasRequiredRegex$2;function requireRegex$2(){if(hasRequiredRegex$2)return regex$2;hasRequiredRegex$2=1,Object.defineProperty(regex$2,"__esModule",{value:!0}),regex$2.default=void 0;var e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return regex$2.default=e,regex$2}var hasRequiredValidate$3;function requireValidate$3(){if(hasRequiredValidate$3)return validate$4;hasRequiredValidate$3=1,Object.defineProperty(validate$4,"__esModule",{value:!0}),validate$4.default=void 0;var e=t(requireRegex$2());function t(g){return g&&g.__esModule?g:{default:g}}function s(g){return typeof g=="string"&&e.default.test(g)}var p=s;return validate$4.default=p,validate$4}var hasRequiredStringify$3;function requireStringify$3(){if(hasRequiredStringify$3)return stringify$4;hasRequiredStringify$3=1,Object.defineProperty(stringify$4,"__esModule",{value:!0}),stringify$4.default=void 0,stringify$4.unsafeStringify=p;var e=t(requireValidate$3());function t(d){return d&&d.__esModule?d:{default:d}}const s=[];for(let d=0;d<256;++d)s.push((d+256).toString(16).slice(1));function p(d,l=0){return s[d[l+0]]+s[d[l+1]]+s[d[l+2]]+s[d[l+3]]+"-"+s[d[l+4]]+s[d[l+5]]+"-"+s[d[l+6]]+s[d[l+7]]+"-"+s[d[l+8]]+s[d[l+9]]+"-"+s[d[l+10]]+s[d[l+11]]+s[d[l+12]]+s[d[l+13]]+s[d[l+14]]+s[d[l+15]]}function g(d,l=0){const a=p(d,l);if(!(0,e.default)(a))throw TypeError("Stringified UUID is invalid");return a}var m=g;return stringify$4.default=m,stringify$4}var hasRequiredV1$3;function requireV1$3(){if(hasRequiredV1$3)return v1$4;hasRequiredV1$3=1,Object.defineProperty(v1$4,"__esModule",{value:!0}),v1$4.default=void 0;var e=s(requireRng$2()),t=requireStringify$3();function s(o){return o&&o.__esModule?o:{default:o}}let p,g,m=0,d=0;function l(o,h,v){let _=h&&v||0;const y=h||new Array(16);o=o||{};let w=o.node||p,T=o.clockseq!==void 0?o.clockseq:g;if(w==null||T==null){const j=o.random||(o.rng||e.default)();w==null&&(w=p=[j[0]|1,j[1],j[2],j[3],j[4],j[5]]),T==null&&(T=g=(j[6]<<8|j[7])&16383)}let I=o.msecs!==void 0?o.msecs:Date.now(),O=o.nsecs!==void 0?o.nsecs:d+1;const E=I-m+(O-d)/1e4;if(E<0&&o.clockseq===void 0&&(T=T+1&16383),(E<0||I>m)&&o.nsecs===void 0&&(O=0),O>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");m=I,d=O,g=T,I+=122192928e5;const C=((I&268435455)*1e4+O)%4294967296;y[_++]=C>>>24&255,y[_++]=C>>>16&255,y[_++]=C>>>8&255,y[_++]=C&255;const x=I/4294967296*1e4&268435455;y[_++]=x>>>8&255,y[_++]=x&255,y[_++]=x>>>24&15|16,y[_++]=x>>>16&255,y[_++]=T>>>8|128,y[_++]=T&255;for(let j=0;j<6;++j)y[_+j]=w[j];return h||(0,t.unsafeStringify)(y)}var a=l;return v1$4.default=a,v1$4}var v3$3={},v35$3={},parse$5={},hasRequiredParse$5;function requireParse$5(){if(hasRequiredParse$5)return parse$5;hasRequiredParse$5=1,Object.defineProperty(parse$5,"__esModule",{value:!0}),parse$5.default=void 0;var e=t(requireValidate$3());function t(g){return g&&g.__esModule?g:{default:g}}function s(g){if(!(0,e.default)(g))throw TypeError("Invalid UUID");let m;const d=new Uint8Array(16);return d[0]=(m=parseInt(g.slice(0,8),16))>>>24,d[1]=m>>>16&255,d[2]=m>>>8&255,d[3]=m&255,d[4]=(m=parseInt(g.slice(9,13),16))>>>8,d[5]=m&255,d[6]=(m=parseInt(g.slice(14,18),16))>>>8,d[7]=m&255,d[8]=(m=parseInt(g.slice(19,23),16))>>>8,d[9]=m&255,d[10]=(m=parseInt(g.slice(24,36),16))/1099511627776&255,d[11]=m/4294967296&255,d[12]=m>>>24&255,d[13]=m>>>16&255,d[14]=m>>>8&255,d[15]=m&255,d}var p=s;return parse$5.default=p,parse$5}var hasRequiredV35$2;function requireV35$2(){if(hasRequiredV35$2)return v35$3;hasRequiredV35$2=1,Object.defineProperty(v35$3,"__esModule",{value:!0}),v35$3.URL=v35$3.DNS=void 0,v35$3.default=d;var e=requireStringify$3(),t=s(requireParse$5());function s(l){return l&&l.__esModule?l:{default:l}}function p(l){l=unescape(encodeURIComponent(l));const a=[];for(let o=0;o<l.length;++o)a.push(l.charCodeAt(o));return a}const g="6ba7b810-9dad-11d1-80b4-00c04fd430c8";v35$3.DNS=g;const m="6ba7b811-9dad-11d1-80b4-00c04fd430c8";v35$3.URL=m;function d(l,a,o){function h(v,_,y,w){var T;if(typeof v=="string"&&(v=p(v)),typeof _=="string"&&(_=(0,t.default)(_)),((T=_)===null||T===void 0?void 0:T.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let I=new Uint8Array(16+v.length);if(I.set(_),I.set(v,_.length),I=o(I),I[6]=I[6]&15|a,I[8]=I[8]&63|128,y){w=w||0;for(let O=0;O<16;++O)y[w+O]=I[O];return y}return(0,e.unsafeStringify)(I)}try{h.name=l}catch{}return h.DNS=g,h.URL=m,h}return v35$3}var md5$4={},hasRequiredMd5$3;function requireMd5$3(){if(hasRequiredMd5$3)return md5$4;hasRequiredMd5$3=1,Object.defineProperty(md5$4,"__esModule",{value:!0}),md5$4.default=void 0;function e(y){if(typeof y=="string"){const w=unescape(encodeURIComponent(y));y=new Uint8Array(w.length);for(let T=0;T<w.length;++T)y[T]=w.charCodeAt(T)}return t(p(g(y),y.length*8))}function t(y){const w=[],T=y.length*32,I="0123456789abcdef";for(let O=0;O<T;O+=8){const E=y[O>>5]>>>O%32&255,C=parseInt(I.charAt(E>>>4&15)+I.charAt(E&15),16);w.push(C)}return w}function s(y){return(y+64>>>9<<4)+14+1}function p(y,w){y[w>>5]|=128<<w%32,y[s(w)-1]=w;let T=1732584193,I=-271733879,O=-1732584194,E=271733878;for(let C=0;C<y.length;C+=16){const x=T,j=I,D=O,k=E;T=a(T,I,O,E,y[C],7,-680876936),E=a(E,T,I,O,y[C+1],12,-389564586),O=a(O,E,T,I,y[C+2],17,606105819),I=a(I,O,E,T,y[C+3],22,-1044525330),T=a(T,I,O,E,y[C+4],7,-176418897),E=a(E,T,I,O,y[C+5],12,1200080426),O=a(O,E,T,I,y[C+6],17,-1473231341),I=a(I,O,E,T,y[C+7],22,-45705983),T=a(T,I,O,E,y[C+8],7,1770035416),E=a(E,T,I,O,y[C+9],12,-1958414417),O=a(O,E,T,I,y[C+10],17,-42063),I=a(I,O,E,T,y[C+11],22,-1990404162),T=a(T,I,O,E,y[C+12],7,1804603682),E=a(E,T,I,O,y[C+13],12,-40341101),O=a(O,E,T,I,y[C+14],17,-1502002290),I=a(I,O,E,T,y[C+15],22,1236535329),T=o(T,I,O,E,y[C+1],5,-165796510),E=o(E,T,I,O,y[C+6],9,-1069501632),O=o(O,E,T,I,y[C+11],14,643717713),I=o(I,O,E,T,y[C],20,-373897302),T=o(T,I,O,E,y[C+5],5,-701558691),E=o(E,T,I,O,y[C+10],9,38016083),O=o(O,E,T,I,y[C+15],14,-660478335),I=o(I,O,E,T,y[C+4],20,-405537848),T=o(T,I,O,E,y[C+9],5,568446438),E=o(E,T,I,O,y[C+14],9,-1019803690),O=o(O,E,T,I,y[C+3],14,-187363961),I=o(I,O,E,T,y[C+8],20,1163531501),T=o(T,I,O,E,y[C+13],5,-1444681467),E=o(E,T,I,O,y[C+2],9,-51403784),O=o(O,E,T,I,y[C+7],14,1735328473),I=o(I,O,E,T,y[C+12],20,-1926607734),T=h(T,I,O,E,y[C+5],4,-378558),E=h(E,T,I,O,y[C+8],11,-2022574463),O=h(O,E,T,I,y[C+11],16,1839030562),I=h(I,O,E,T,y[C+14],23,-35309556),T=h(T,I,O,E,y[C+1],4,-1530992060),E=h(E,T,I,O,y[C+4],11,1272893353),O=h(O,E,T,I,y[C+7],16,-155497632),I=h(I,O,E,T,y[C+10],23,-1094730640),T=h(T,I,O,E,y[C+13],4,681279174),E=h(E,T,I,O,y[C],11,-358537222),O=h(O,E,T,I,y[C+3],16,-722521979),I=h(I,O,E,T,y[C+6],23,76029189),T=h(T,I,O,E,y[C+9],4,-640364487),E=h(E,T,I,O,y[C+12],11,-421815835),O=h(O,E,T,I,y[C+15],16,530742520),I=h(I,O,E,T,y[C+2],23,-995338651),T=v(T,I,O,E,y[C],6,-198630844),E=v(E,T,I,O,y[C+7],10,1126891415),O=v(O,E,T,I,y[C+14],15,-1416354905),I=v(I,O,E,T,y[C+5],21,-57434055),T=v(T,I,O,E,y[C+12],6,1700485571),E=v(E,T,I,O,y[C+3],10,-1894986606),O=v(O,E,T,I,y[C+10],15,-1051523),I=v(I,O,E,T,y[C+1],21,-2054922799),T=v(T,I,O,E,y[C+8],6,1873313359),E=v(E,T,I,O,y[C+15],10,-30611744),O=v(O,E,T,I,y[C+6],15,-1560198380),I=v(I,O,E,T,y[C+13],21,1309151649),T=v(T,I,O,E,y[C+4],6,-145523070),E=v(E,T,I,O,y[C+11],10,-1120210379),O=v(O,E,T,I,y[C+2],15,718787259),I=v(I,O,E,T,y[C+9],21,-343485551),T=m(T,x),I=m(I,j),O=m(O,D),E=m(E,k)}return[T,I,O,E]}function g(y){if(y.length===0)return[];const w=y.length*8,T=new Uint32Array(s(w));for(let I=0;I<w;I+=8)T[I>>5]|=(y[I/8]&255)<<I%32;return T}function m(y,w){const T=(y&65535)+(w&65535);return(y>>16)+(w>>16)+(T>>16)<<16|T&65535}function d(y,w){return y<<w|y>>>32-w}function l(y,w,T,I,O,E){return m(d(m(m(w,y),m(I,E)),O),T)}function a(y,w,T,I,O,E,C){return l(w&T|~w&I,y,w,O,E,C)}function o(y,w,T,I,O,E,C){return l(w&I|T&~I,y,w,O,E,C)}function h(y,w,T,I,O,E,C){return l(w^T^I,y,w,O,E,C)}function v(y,w,T,I,O,E,C){return l(T^(w|~I),y,w,O,E,C)}var _=e;return md5$4.default=_,md5$4}var hasRequiredV3$2;function requireV3$2(){if(hasRequiredV3$2)return v3$3;hasRequiredV3$2=1,Object.defineProperty(v3$3,"__esModule",{value:!0}),v3$3.default=void 0;var e=s(requireV35$2()),t=s(requireMd5$3());function s(m){return m&&m.__esModule?m:{default:m}}var g=(0,e.default)("v3",48,t.default);return v3$3.default=g,v3$3}var v4$3={},native$2={},hasRequiredNative$2;function requireNative$2(){if(hasRequiredNative$2)return native$2;hasRequiredNative$2=1,Object.defineProperty(native$2,"__esModule",{value:!0}),native$2.default=void 0;var t={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return native$2.default=t,native$2}var hasRequiredV4$2;function requireV4$2(){if(hasRequiredV4$2)return v4$3;hasRequiredV4$2=1,Object.defineProperty(v4$3,"__esModule",{value:!0}),v4$3.default=void 0;var e=p(requireNative$2()),t=p(requireRng$2()),s=requireStringify$3();function p(d){return d&&d.__esModule?d:{default:d}}function g(d,l,a){if(e.default.randomUUID&&!l&&!d)return e.default.randomUUID();d=d||{};const o=d.random||(d.rng||t.default)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,l){a=a||0;for(let h=0;h<16;++h)l[a+h]=o[h];return l}return(0,s.unsafeStringify)(o)}var m=g;return v4$3.default=m,v4$3}var v5$3={},sha1$4={},hasRequiredSha1$3;function requireSha1$3(){if(hasRequiredSha1$3)return sha1$4;hasRequiredSha1$3=1,Object.defineProperty(sha1$4,"__esModule",{value:!0}),sha1$4.default=void 0;function e(g,m,d,l){switch(g){case 0:return m&d^~m&l;case 1:return m^d^l;case 2:return m&d^m&l^d&l;case 3:return m^d^l}}function t(g,m){return g<<m|g>>>32-m}function s(g){const m=[1518500249,1859775393,2400959708,3395469782],d=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof g=="string"){const h=unescape(encodeURIComponent(g));g=[];for(let v=0;v<h.length;++v)g.push(h.charCodeAt(v))}else Array.isArray(g)||(g=Array.prototype.slice.call(g));g.push(128);const l=g.length/4+2,a=Math.ceil(l/16),o=new Array(a);for(let h=0;h<a;++h){const v=new Uint32Array(16);for(let _=0;_<16;++_)v[_]=g[h*64+_*4]<<24|g[h*64+_*4+1]<<16|g[h*64+_*4+2]<<8|g[h*64+_*4+3];o[h]=v}o[a-1][14]=(g.length-1)*8/Math.pow(2,32),o[a-1][14]=Math.floor(o[a-1][14]),o[a-1][15]=(g.length-1)*8&4294967295;for(let h=0;h<a;++h){const v=new Uint32Array(80);for(let O=0;O<16;++O)v[O]=o[h][O];for(let O=16;O<80;++O)v[O]=t(v[O-3]^v[O-8]^v[O-14]^v[O-16],1);let _=d[0],y=d[1],w=d[2],T=d[3],I=d[4];for(let O=0;O<80;++O){const E=Math.floor(O/20),C=t(_,5)+e(E,y,w,T)+I+m[E]+v[O]>>>0;I=T,T=w,w=t(y,30)>>>0,y=_,_=C}d[0]=d[0]+_>>>0,d[1]=d[1]+y>>>0,d[2]=d[2]+w>>>0,d[3]=d[3]+T>>>0,d[4]=d[4]+I>>>0}return[d[0]>>24&255,d[0]>>16&255,d[0]>>8&255,d[0]&255,d[1]>>24&255,d[1]>>16&255,d[1]>>8&255,d[1]&255,d[2]>>24&255,d[2]>>16&255,d[2]>>8&255,d[2]&255,d[3]>>24&255,d[3]>>16&255,d[3]>>8&255,d[3]&255,d[4]>>24&255,d[4]>>16&255,d[4]>>8&255,d[4]&255]}var p=s;return sha1$4.default=p,sha1$4}var hasRequiredV5$2;function requireV5$2(){if(hasRequiredV5$2)return v5$3;hasRequiredV5$2=1,Object.defineProperty(v5$3,"__esModule",{value:!0}),v5$3.default=void 0;var e=s(requireV35$2()),t=s(requireSha1$3());function s(m){return m&&m.__esModule?m:{default:m}}var g=(0,e.default)("v5",80,t.default);return v5$3.default=g,v5$3}var nil$3={},hasRequiredNil$2;function requireNil$2(){if(hasRequiredNil$2)return nil$3;hasRequiredNil$2=1,Object.defineProperty(nil$3,"__esModule",{value:!0}),nil$3.default=void 0;var e="00000000-0000-0000-0000-000000000000";return nil$3.default=e,nil$3}var version$8={},hasRequiredVersion$2;function requireVersion$2(){if(hasRequiredVersion$2)return version$8;hasRequiredVersion$2=1,Object.defineProperty(version$8,"__esModule",{value:!0}),version$8.default=void 0;var e=t(requireValidate$3());function t(g){return g&&g.__esModule?g:{default:g}}function s(g){if(!(0,e.default)(g))throw TypeError("Invalid UUID");return parseInt(g.slice(14,15),16)}var p=s;return version$8.default=p,version$8}var hasRequiredCommonjsBrowser$2;function requireCommonjsBrowser$2(){return hasRequiredCommonjsBrowser$2||(hasRequiredCommonjsBrowser$2=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return d.default}});var t=h(requireV1$3()),s=h(requireV3$2()),p=h(requireV4$2()),g=h(requireV5$2()),m=h(requireNil$2()),d=h(requireVersion$2()),l=h(requireValidate$3()),a=h(requireStringify$3()),o=h(requireParse$5());function h(v){return v&&v.__esModule?v:{default:v}}})(commonjsBrowser$2)),commonjsBrowser$2}var interceptor$1={},hasRequiredInterceptor$1;function requireInterceptor$1(){if(hasRequiredInterceptor$1)return interceptor$1;hasRequiredInterceptor$1=1,Object.defineProperty(interceptor$1,"__esModule",{value:!0}),interceptor$1.GaxiosInterceptorManager=void 0;class e extends Set{}return interceptor$1.GaxiosInterceptorManager=e,interceptor$1}var dist$4={},browser$4={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var e=1e3,t=e*60,s=t*60,p=s*24,g=p*7,m=p*365.25;ms=function(h,v){v=v||{};var _=typeof h;if(_==="string"&&h.length>0)return d(h);if(_==="number"&&isFinite(h))return v.long?a(h):l(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))};function d(h){if(h=String(h),!(h.length>100)){var v=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);if(v){var _=parseFloat(v[1]),y=(v[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return _*m;case"weeks":case"week":case"w":return _*g;case"days":case"day":case"d":return _*p;case"hours":case"hour":case"hrs":case"hr":case"h":return _*s;case"minutes":case"minute":case"mins":case"min":case"m":return _*t;case"seconds":case"second":case"secs":case"sec":case"s":return _*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return _;default:return}}}}function l(h){var v=Math.abs(h);return v>=p?Math.round(h/p)+"d":v>=s?Math.round(h/s)+"h":v>=t?Math.round(h/t)+"m":v>=e?Math.round(h/e)+"s":h+"ms"}function a(h){var v=Math.abs(h);return v>=p?o(h,v,p,"day"):v>=s?o(h,v,s,"hour"):v>=t?o(h,v,t,"minute"):v>=e?o(h,v,e,"second"):h+" ms"}function o(h,v,_,y){var w=v>=_*1.5;return Math.round(h/_)+" "+y+(w?"s":"")}return ms}var common,hasRequiredCommon$1;function requireCommon$1(){if(hasRequiredCommon$1)return common;hasRequiredCommon$1=1;function e(t){p.debug=p,p.default=p,p.coerce=o,p.disable=l,p.enable=m,p.enabled=a,p.humanize=requireMs(),p.destroy=h,Object.keys(t).forEach(v=>{p[v]=t[v]}),p.names=[],p.skips=[],p.formatters={};function s(v){let _=0;for(let y=0;y<v.length;y++)_=(_<<5)-_+v.charCodeAt(y),_|=0;return p.colors[Math.abs(_)%p.colors.length]}p.selectColor=s;function p(v){let _,y=null,w,T;function I(...O){if(!I.enabled)return;const E=I,C=Number(new Date),x=C-(_||C);E.diff=x,E.prev=_,E.curr=C,_=C,O[0]=p.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");let j=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,(k,q)=>{if(k==="%%")return"%";j++;const G=p.formatters[q];if(typeof G=="function"){const $=O[j];k=G.call(E,$),O.splice(j,1),j--}return k}),p.formatArgs.call(E,O),(E.log||p.log).apply(E,O)}return I.namespace=v,I.useColors=p.useColors(),I.color=p.selectColor(v),I.extend=g,I.destroy=p.destroy,Object.defineProperty(I,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(w!==p.namespaces&&(w=p.namespaces,T=p.enabled(v)),T),set:O=>{y=O}}),typeof p.init=="function"&&p.init(I),I}function g(v,_){const y=p(this.namespace+(typeof _>"u"?":":_)+v);return y.log=this.log,y}function m(v){p.save(v),p.namespaces=v,p.names=[],p.skips=[];const _=(typeof v=="string"?v:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const y of _)y[0]==="-"?p.skips.push(y.slice(1)):p.names.push(y)}function d(v,_){let y=0,w=0,T=-1,I=0;for(;y<v.length;)if(w<_.length&&(_[w]===v[y]||_[w]==="*"))_[w]==="*"?(T=w,I=y,w++):(y++,w++);else if(T!==-1)w=T+1,I++,y=I;else return!1;for(;w<_.length&&_[w]==="*";)w++;return w===_.length}function l(){const v=[...p.names,...p.skips.map(_=>"-"+_)].join(",");return p.enable(""),v}function a(v){for(const _ of p.skips)if(d(v,_))return!1;for(const _ of p.names)if(d(v,_))return!0;return!1}function o(v){return v instanceof Error?v.stack||v.message:v}function h(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return p.enable(p.load()),p}return common=e,common}var hasRequiredBrowser$2;function requireBrowser$2(){return hasRequiredBrowser$2||(hasRequiredBrowser$2=1,(function(e,t){var s={},p={};t.formatArgs=m,t.save=d,t.load=l,t.useColors=g,t.storage=a(),t.destroy=(()=>{let h=!1;return()=>{h||(h=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function g(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let h;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(h=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(h[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function m(h){if(h[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+h[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const v="color: "+this.color;h.splice(1,0,v,"color: inherit");let _=0,y=0;h[0].replace(/%[a-zA-Z%]/g,w=>{w!=="%%"&&(_++,w==="%c"&&(y=_))}),h.splice(y,0,v)}t.log=console.debug||console.log||(()=>{});function d(h){try{h?t.storage.setItem("debug",h):t.storage.removeItem("debug")}catch{}}function l(){let h;try{h=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!h&&typeof s<"u"&&"env"in s&&(h=p.DEBUG),h}function a(){try{return localStorage}catch{}}e.exports=requireCommon$1()(t);const{formatters:o}=e.exports;o.j=function(h){try{return JSON.stringify(h)}catch(v){return"[UnexpectedJSONParseError]: "+v.message}}})(browser$4,browser$4.exports)),browser$4.exports}var dist$3={},helpers$1={},hasRequiredHelpers$1;function requireHelpers$1(){if(hasRequiredHelpers$1)return helpers$1;hasRequiredHelpers$1=1;var e=helpers$1&&helpers$1.__createBinding||(Object.create?(function(a,o,h,v){v===void 0&&(v=h);var _=Object.getOwnPropertyDescriptor(o,h);(!_||("get"in _?!o.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return o[h]}}),Object.defineProperty(a,v,_)}):(function(a,o,h,v){v===void 0&&(v=h),a[v]=o[h]})),t=helpers$1&&helpers$1.__setModuleDefault||(Object.create?(function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}):function(a,o){a.default=o}),s=helpers$1&&helpers$1.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var h in a)h!=="default"&&Object.prototype.hasOwnProperty.call(a,h)&&e(o,a,h);return t(o,a),o};Object.defineProperty(helpers$1,"__esModule",{value:!0}),helpers$1.req=helpers$1.json=helpers$1.toBuffer=void 0;const p=s(require$$1$3),g=s(require$$1$3);async function m(a){let o=0;const h=[];for await(const v of a)o+=v.length,h.push(v);return Buffer.concat(h,o)}helpers$1.toBuffer=m;async function d(a){const h=(await m(a)).toString("utf8");try{return JSON.parse(h)}catch(v){const _=v;throw _.message+=` (input: ${h})`,_}}helpers$1.json=d;function l(a,o={}){const v=((typeof a=="string"?a:a.href).startsWith("https:")?g:p).request(a,o),_=new Promise((y,w)=>{v.once("response",y).once("error",w).end()});return v.then=_.then.bind(_),v}return helpers$1.req=l,helpers$1}var hasRequiredDist$4;function requireDist$4(){return hasRequiredDist$4||(hasRequiredDist$4=1,(function(e){var t=dist$3&&dist$3.__createBinding||(Object.create?(function(h,v,_,y){y===void 0&&(y=_);var w=Object.getOwnPropertyDescriptor(v,_);(!w||("get"in w?!v.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return v[_]}}),Object.defineProperty(h,y,w)}):(function(h,v,_,y){y===void 0&&(y=_),h[y]=v[_]})),s=dist$3&&dist$3.__setModuleDefault||(Object.create?(function(h,v){Object.defineProperty(h,"default",{enumerable:!0,value:v})}):function(h,v){h.default=v}),p=dist$3&&dist$3.__importStar||function(h){if(h&&h.__esModule)return h;var v={};if(h!=null)for(var _ in h)_!=="default"&&Object.prototype.hasOwnProperty.call(h,_)&&t(v,h,_);return s(v,h),v},g=dist$3&&dist$3.__exportStar||function(h,v){for(var _ in h)_!=="default"&&!Object.prototype.hasOwnProperty.call(v,_)&&t(v,h,_)};Object.defineProperty(e,"__esModule",{value:!0}),e.Agent=void 0;const m=p(require$$1$3),d=p(require$$1$3),l=require$$1$3;g(requireHelpers$1(),e);const a=Symbol("AgentBaseInternalState");class o extends d.Agent{constructor(v){super(v),this[a]={}}isSecureEndpoint(v){if(v){if(typeof v.secureEndpoint=="boolean")return v.secureEndpoint;if(typeof v.protocol=="string")return v.protocol==="https:"}const{stack:_}=new Error;return typeof _!="string"?!1:_.split(`
`).some(y=>y.indexOf("(https.js:")!==-1||y.indexOf("node:https:")!==-1)}incrementSockets(v){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[v]||(this.sockets[v]=[]);const _=new m.Socket({writable:!1});return this.sockets[v].push(_),this.totalSocketCount++,_}decrementSockets(v,_){if(!this.sockets[v]||_===null)return;const y=this.sockets[v],w=y.indexOf(_);w!==-1&&(y.splice(w,1),this.totalSocketCount--,y.length===0&&delete this.sockets[v])}getName(v){return this.isSecureEndpoint(v)?l.Agent.prototype.getName.call(this,v):super.getName(v)}createSocket(v,_,y){const w={..._,secureEndpoint:this.isSecureEndpoint(_)},T=this.getName(w),I=this.incrementSockets(T);Promise.resolve().then(()=>this.connect(v,w)).then(O=>{if(this.decrementSockets(T,I),O instanceof d.Agent)try{return O.addRequest(v,w)}catch(E){return y(E)}this[a].currentSocket=O,super.createSocket(v,_,y)},O=>{this.decrementSockets(T,I),y(O)})}createConnection(){const v=this[a].currentSocket;if(this[a].currentSocket=void 0,!v)throw new Error("No socket was returned in the `connect()` function");return v}get defaultPort(){return this[a].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(v){this[a]&&(this[a].defaultPort=v)}get protocol(){return this[a].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(v){this[a]&&(this[a].protocol=v)}}e.Agent=o})(dist$3)),dist$3}var parseProxyResponse$1={},hasRequiredParseProxyResponse$1;function requireParseProxyResponse$1(){if(hasRequiredParseProxyResponse$1)return parseProxyResponse$1;hasRequiredParseProxyResponse$1=1;var e=parseProxyResponse$1&&parseProxyResponse$1.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(parseProxyResponse$1,"__esModule",{value:!0}),parseProxyResponse$1.parseProxyResponse=void 0;const s=(0,e(requireBrowser$2()).default)("https-proxy-agent:parse-proxy-response");function p(g){return new Promise((m,d)=>{let l=0;const a=[];function o(){const w=g.read();w?y(w):g.once("readable",o)}function h(){g.removeListener("end",v),g.removeListener("error",_),g.removeListener("readable",o)}function v(){h(),s("onend"),d(new Error("Proxy connection ended before receiving CONNECT response"))}function _(w){h(),s("onerror %o",w),d(w)}function y(w){a.push(w),l+=w.length;const T=Buffer.concat(a,l),I=T.indexOf(`\r
\r
`);if(I===-1){s("have not received end of HTTP headers yet..."),o();return}const O=T.slice(0,I).toString("ascii").split(`\r
`),E=O.shift();if(!E)return g.destroy(),d(new Error("No header received from proxy CONNECT response"));const C=E.split(" "),x=+C[1],j=C.slice(2).join(" "),D={};for(const k of O){if(!k)continue;const q=k.indexOf(":");if(q===-1)return g.destroy(),d(new Error(`Invalid header from proxy CONNECT response: "${k}"`));const G=k.slice(0,q).toLowerCase(),$=k.slice(q+1).trimStart(),W=D[G];typeof W=="string"?D[G]=[W,$]:Array.isArray(W)?W.push($):D[G]=$}s("got proxy server response: %o %o",E,D),h(),m({connect:{statusCode:x,statusText:j,headers:D},buffered:T})}g.on("error",_),g.on("end",v),o()})}return parseProxyResponse$1.parseProxyResponse=p,parseProxyResponse$1}var hasRequiredDist$3;function requireDist$3(){if(hasRequiredDist$3)return dist$4;hasRequiredDist$3=1;var e=dist$4&&dist$4.__createBinding||(Object.create?(function(I,O,E,C){C===void 0&&(C=E);var x=Object.getOwnPropertyDescriptor(O,E);(!x||("get"in x?!O.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return O[E]}}),Object.defineProperty(I,C,x)}):(function(I,O,E,C){C===void 0&&(C=E),I[C]=O[E]})),t=dist$4&&dist$4.__setModuleDefault||(Object.create?(function(I,O){Object.defineProperty(I,"default",{enumerable:!0,value:O})}):function(I,O){I.default=O}),s=dist$4&&dist$4.__importStar||function(I){if(I&&I.__esModule)return I;var O={};if(I!=null)for(var E in I)E!=="default"&&Object.prototype.hasOwnProperty.call(I,E)&&e(O,I,E);return t(O,I),O},p=dist$4&&dist$4.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(dist$4,"__esModule",{value:!0}),dist$4.HttpsProxyAgent=void 0;const g=s(require$$1$3),m=s(require$$1$3),d=p(require$$1$3),l=p(requireBrowser$2()),a=requireDist$4(),o=require$$1$3,h=requireParseProxyResponse$1(),v=(0,l.default)("https-proxy-agent"),_=I=>I.servername===void 0&&I.host&&!g.isIP(I.host)?{...I,servername:I.host}:I;class y extends a.Agent{constructor(O,E){super(E),this.options={path:void 0},this.proxy=typeof O=="string"?new o.URL(O):O,this.proxyHeaders=E?.headers??{},v("Creating new HttpsProxyAgent instance: %o",this.proxy.href);const C=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),x=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...E?T(E,"headers"):null,host:C,port:x}}async connect(O,E){const{proxy:C}=this;if(!E.host)throw new TypeError('No "host" provided');let x;C.protocol==="https:"?(v("Creating `tls.Socket`: %o",this.connectOpts),x=m.connect(_(this.connectOpts))):(v("Creating `net.Socket`: %o",this.connectOpts),x=g.connect(this.connectOpts));const j=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},D=g.isIPv6(E.host)?`[${E.host}]`:E.host;let k=`CONNECT ${D}:${E.port} HTTP/1.1\r
`;if(C.username||C.password){const K=`${decodeURIComponent(C.username)}:${decodeURIComponent(C.password)}`;j["Proxy-Authorization"]=`Basic ${Buffer.from(K).toString("base64")}`}j.Host=`${D}:${E.port}`,j["Proxy-Connection"]||(j["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(const K of Object.keys(j))k+=`${K}: ${j[K]}\r
`;const q=(0,h.parseProxyResponse)(x);x.write(`${k}\r
`);const{connect:G,buffered:$}=await q;if(O.emit("proxyConnect",G),this.emit("proxyConnect",G,O),G.statusCode===200)return O.once("socket",w),E.secureEndpoint?(v("Upgrading socket connection to TLS"),m.connect({...T(_(E),"host","path","port"),socket:x})):x;x.destroy();const W=new g.Socket({writable:!1});return W.readable=!0,O.once("socket",K=>{v("Replaying proxy buffer for failed request"),(0,d.default)(K.listenerCount("data")>0),K.push($),K.push(null)}),W}}y.protocols=["http","https"],dist$4.HttpsProxyAgent=y;function w(I){I.resume()}function T(I,...O){const E={};let C;for(C in I)O.includes(C)||(E[C]=I[C]);return E}return dist$4}var hasRequiredGaxios;function requireGaxios(){if(hasRequiredGaxios)return gaxios;hasRequiredGaxios=1;var e={},t={},s=gaxios&&gaxios.__createBinding||(Object.create?(function(ue,ee,oe,de){de===void 0&&(de=oe);var he=Object.getOwnPropertyDescriptor(ee,oe);(!he||("get"in he?!ee.__esModule:he.writable||he.configurable))&&(he={enumerable:!0,get:function(){return ee[oe]}}),Object.defineProperty(ue,de,he)}):(function(ue,ee,oe,de){de===void 0&&(de=oe),ue[de]=ee[oe]})),p=gaxios&&gaxios.__setModuleDefault||(Object.create?(function(ue,ee){Object.defineProperty(ue,"default",{enumerable:!0,value:ee})}):function(ue,ee){ue.default=ee}),g=gaxios&&gaxios.__importStar||function(ue){if(ue&&ue.__esModule)return ue;var ee={};if(ue!=null)for(var oe in ue)oe!=="default"&&Object.prototype.hasOwnProperty.call(ue,oe)&&s(ee,ue,oe);return p(ee,ue),ee},m=gaxios&&gaxios.__classPrivateFieldGet||function(ue,ee,oe,de){if(oe==="a"&&!de)throw new TypeError("Private accessor was defined without a getter");if(typeof ee=="function"?ue!==ee||!de:!ee.has(ue))throw new TypeError("Cannot read private member from an object whose class did not declare it");return oe==="m"?de:oe==="a"?de.call(ue):de?de.value:ee.get(ue)},d=gaxios&&gaxios.__classPrivateFieldSet||function(ue,ee,oe,de,he){if(de==="m")throw new TypeError("Private method is not writable");if(de==="a"&&!he)throw new TypeError("Private accessor was defined without a setter");if(typeof ee=="function"?ue!==ee||!he:!ee.has(ue))throw new TypeError("Cannot write private member to an object whose class did not declare it");return de==="a"?he.call(ue,oe):he?he.value=oe:ee.set(ue,oe),oe},l=gaxios&&gaxios.__importDefault||function(ue){return ue&&ue.__esModule?ue:{default:ue}},a,o,h,v,_,y,w,T;Object.defineProperty(gaxios,"__esModule",{value:!0}),gaxios.Gaxios=void 0;const I=l(requireExtend()),O=require$$1$3,E=l(requireBrowser$3()),C=l(require$$1$3),x=l(requireIsStream()),j=require$$1$3,D=requireCommon$2(),k=requireRetry$2(),q=require$$1$3,G=requireCommonjsBrowser$2(),$=requireInterceptor$1(),W=z()?window.fetch:E.default;function K(){return typeof window<"u"&&!!window}function z(){return K()&&!!window.fetch}function Q(){return typeof Buffer<"u"}function Y(ue,ee){return!!te(ue,ee)}function te(ue,ee){ee=ee.toLowerCase();for(const oe of Object.keys(ue?.headers||{}))if(ee===oe.toLowerCase())return ue.headers[oe]}class ae{constructor(ee){a.add(this),this.agentCache=new Map,this.defaults=ee||{},this.interceptors={request:new $.GaxiosInterceptorManager,response:new $.GaxiosInterceptorManager}}async request(ee={}){return ee=await m(this,a,"m",y).call(this,ee),ee=await m(this,a,"m",v).call(this,ee),m(this,a,"m",_).call(this,this._request(ee))}async _defaultAdapter(ee){const de=await(ee.fetchImplementation||W)(ee.url,ee),he=await this.getResponseData(ee,de);return this.translateResponse(ee,de,he)}async _request(ee={}){var oe;try{let de;if(ee.adapter?de=await ee.adapter(ee,this._defaultAdapter.bind(this)):de=await this._defaultAdapter(ee),!ee.validateStatus(de.status)){if(ee.responseType==="stream"){let he="";await new Promise(Ee=>{(de?.data).on("data",fe=>{he+=fe}),(de?.data).on("end",Ee)}),de.data=he}throw new D.GaxiosError(`Request failed with status code ${de.status}`,ee,de)}return de}catch(de){const he=de instanceof D.GaxiosError?de:new D.GaxiosError(de.message,ee,void 0,de),{shouldRetry:Ee,config:fe}=await(0,k.getRetryConfig)(he);if(Ee&&fe)return he.config.retryConfig.currentRetryAttempt=fe.retryConfig.currentRetryAttempt,ee.retryConfig=(oe=he.config)===null||oe===void 0?void 0:oe.retryConfig,this._request(ee);throw he}}async getResponseData(ee,oe){switch(ee.responseType){case"stream":return oe.body;case"json":{let de=await oe.text();try{de=JSON.parse(de)}catch{}return de}case"arraybuffer":return oe.arrayBuffer();case"blob":return oe.blob();case"text":return oe.text();default:return this.getResponseDataFromContentType(oe)}}validateStatus(ee){return ee>=200&&ee<300}paramsSerializer(ee){return C.default.stringify(ee)}translateResponse(ee,oe,de){const he={};return oe.headers.forEach((Ee,fe)=>{he[fe]=Ee}),{config:ee,data:de,headers:he,status:oe.status,statusText:oe.statusText,request:{responseURL:oe.url}}}async getResponseDataFromContentType(ee){let oe=ee.headers.get("Content-Type");if(oe===null)return ee.text();if(oe=oe.toLowerCase(),oe.includes("application/json")){let de=await ee.text();try{de=JSON.parse(de)}catch{}return de}else return oe.match(/^text\//)?ee.text():ee.blob()}async*getMultipartRequest(ee,oe){const de=`--${oe}--`;for(const he of ee){const Ee=he.headers["Content-Type"]||"application/octet-stream";yield`--${oe}\r
Content-Type: ${Ee}\r
\r
`,typeof he.content=="string"?yield he.content:yield*he.content,yield`\r
`}yield de}}return gaxios.Gaxios=ae,o=ae,a=new WeakSet,h=function(ee,oe=[]){var de,he;const Ee=new j.URL(ee),fe=[...oe],Se=((he=(de=t.NO_PROXY)!==null&&de!==void 0?de:t.no_proxy)===null||he===void 0?void 0:he.split(","))||[];for(const be of Se)fe.push(be.trim());for(const be of fe)if(be instanceof RegExp){if(be.test(Ee.toString()))return!1}else if(be instanceof j.URL){if(be.origin===Ee.origin)return!1}else if(be.startsWith("*.")||be.startsWith(".")){const Oe=be.replace(/^\*\./,".");if(Ee.hostname.endsWith(Oe))return!1}else if(be===Ee.origin||be===Ee.hostname||be===Ee.href)return!1;return!0},v=async function(ee){let oe=Promise.resolve(ee);for(const de of this.interceptors.request.values())de&&(oe=oe.then(de.resolved,de.rejected));return oe},_=async function(ee){let oe=Promise.resolve(ee);for(const de of this.interceptors.response.values())de&&(oe=oe.then(de.resolved,de.rejected));return oe},y=async function(ee){var oe,de,he,Ee;const fe=(0,I.default)(!0,{},this.defaults,ee);if(!fe.url)throw new Error("URL is required.");const Se=fe.baseUrl||fe.baseURL;if(Se&&(fe.url=Se.toString()+fe.url),fe.paramsSerializer=fe.paramsSerializer||this.paramsSerializer,fe.params&&Object.keys(fe.params).length>0){let ge=fe.paramsSerializer(fe.params);ge.startsWith("?")&&(ge=ge.slice(1));const J=fe.url.toString().includes("?")?"&":"?";fe.url=fe.url+J+ge}if(typeof ee.maxContentLength=="number"&&(fe.size=ee.maxContentLength),typeof ee.maxRedirects=="number"&&(fe.follow=ee.maxRedirects),fe.headers=fe.headers||{},fe.multipart===void 0&&fe.data){const ge=typeof FormData>"u"?!1:fe?.data instanceof FormData;x.default.readable(fe.data)?fe.body=fe.data:Q()&&Buffer.isBuffer(fe.data)?(fe.body=fe.data,Y(fe,"Content-Type")||(fe.headers["Content-Type"]="application/json")):typeof fe.data=="object"?ge||(te(fe,"content-type")==="application/x-www-form-urlencoded"?fe.body=fe.paramsSerializer(fe.data):(Y(fe,"Content-Type")||(fe.headers["Content-Type"]="application/json"),fe.body=JSON.stringify(fe.data))):fe.body=fe.data}else if(fe.multipart&&fe.multipart.length>0){const ge=(0,G.v4)();fe.headers["Content-Type"]=`multipart/related; boundary=${ge}`;const J=new q.PassThrough;fe.body=J,(0,q.pipeline)(this.getMultipartRequest(fe.multipart,ge),J,()=>{})}fe.validateStatus=fe.validateStatus||this.validateStatus,fe.responseType=fe.responseType||"unknown",!fe.headers.Accept&&fe.responseType==="json"&&(fe.headers.Accept="application/json"),fe.method=fe.method||"GET";const be=fe.proxy||((oe=e==null?void 0:t)===null||oe===void 0?void 0:oe.HTTPS_PROXY)||((de=e==null?void 0:t)===null||de===void 0?void 0:de.https_proxy)||((he=e==null?void 0:t)===null||he===void 0?void 0:he.HTTP_PROXY)||((Ee=e==null?void 0:t)===null||Ee===void 0?void 0:Ee.http_proxy),Oe=m(this,a,"m",h).call(this,fe.url,fe.noProxy);if(!fe.agent)if(be&&Oe){const ge=await m(o,o,"m",T).call(o);this.agentCache.has(be)?fe.agent=this.agentCache.get(be):(fe.agent=new ge(be,{cert:fe.cert,key:fe.key}),this.agentCache.set(be,fe.agent))}else fe.cert&&fe.key&&(this.agentCache.has(fe.key)?fe.agent=this.agentCache.get(fe.key):(fe.agent=new O.Agent({cert:fe.cert,key:fe.key}),this.agentCache.set(fe.key,fe.agent)));return typeof fe.errorRedactor!="function"&&fe.errorRedactor!==!1&&(fe.errorRedactor=D.defaultErrorRedactor),fe},T=async function(){return d(this,o,m(this,o,"f",w)||(await Promise.resolve().then(()=>g(requireDist$3()))).HttpsProxyAgent,"f",w),m(this,o,"f",w)},w={value:void 0},gaxios}var hasRequiredSrc$f;function requireSrc$f(){return hasRequiredSrc$f||(hasRequiredSrc$f=1,(function(e){var t=src$d&&src$d.__createBinding||(Object.create?(function(d,l,a,o){o===void 0&&(o=a);var h=Object.getOwnPropertyDescriptor(l,a);(!h||("get"in h?!l.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return l[a]}}),Object.defineProperty(d,o,h)}):(function(d,l,a,o){o===void 0&&(o=a),d[o]=l[a]})),s=src$d&&src$d.__exportStar||function(d,l){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(l,a)&&t(l,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),e.instance=e.Gaxios=e.GaxiosError=void 0,e.request=m;const p=requireGaxios();Object.defineProperty(e,"Gaxios",{enumerable:!0,get:function(){return p.Gaxios}});var g=requireCommon$2();Object.defineProperty(e,"GaxiosError",{enumerable:!0,get:function(){return g.GaxiosError}}),s(requireInterceptor$1(),e),e.instance=new p.Gaxios;async function m(d){return e.instance.request(d)}})(src$d)),src$d}var jsonBigint={exports:{}},stringify$3={exports:{}},bignumber$1={exports:{}},bignumber=bignumber$1.exports,hasRequiredBignumber;function requireBignumber(){return hasRequiredBignumber||(hasRequiredBignumber=1,(function(e){(function(t){var s,p=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,g=Math.ceil,m=Math.floor,d="[BigNumber Error] ",l=d+"Number primitive has more than 15 significant digits: ",a=1e14,o=14,h=9007199254740991,v=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],_=1e7,y=1e9;function w(D){var k,q,G,$=fe.prototype={constructor:fe,toString:null,valueOf:null},W=new fe(1),K=20,z=4,Q=-7,Y=21,te=-1e7,ae=1e7,ue=!1,ee=1,oe=0,de={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},he="0123456789abcdefghijklmnopqrstuvwxyz",Ee=!0;function fe(c,N){var A,V,ne,ce,ie,u,P,M,n=this;if(!(n instanceof fe))return new fe(c,N);if(N==null){if(c&&c._isBigNumber===!0){n.s=c.s,!c.c||c.e>ae?n.c=n.e=null:c.e<te?n.c=[n.e=0]:(n.e=c.e,n.c=c.c.slice());return}if((u=typeof c=="number")&&c*0==0){if(n.s=1/c<0?(c=-c,-1):1,c===~~c){for(ce=0,ie=c;ie>=10;ie/=10,ce++);ce>ae?n.c=n.e=null:(n.e=ce,n.c=[c]);return}M=String(c)}else{if(!p.test(M=String(c)))return G(n,M,u);n.s=M.charCodeAt(0)==45?(M=M.slice(1),-1):1}(ce=M.indexOf("."))>-1&&(M=M.replace(".","")),(ie=M.search(/e/i))>0?(ce<0&&(ce=ie),ce+=+M.slice(ie+1),M=M.substring(0,ie)):ce<0&&(ce=M.length)}else{if(E(N,2,he.length,"Base"),N==10&&Ee)return n=new fe(c),ge(n,K+n.e+1,z);if(M=String(c),u=typeof c=="number"){if(c*0!=0)return G(n,M,u,N);if(n.s=1/c<0?(M=M.slice(1),-1):1,fe.DEBUG&&M.replace(/^0\.0*|\./,"").length>15)throw Error(l+c)}else n.s=M.charCodeAt(0)===45?(M=M.slice(1),-1):1;for(A=he.slice(0,N),ce=ie=0,P=M.length;ie<P;ie++)if(A.indexOf(V=M.charAt(ie))<0){if(V=="."){if(ie>ce){ce=P;continue}}else if(!ne&&(M==M.toUpperCase()&&(M=M.toLowerCase())||M==M.toLowerCase()&&(M=M.toUpperCase()))){ne=!0,ie=-1,ce=0;continue}return G(n,String(c),u,N)}u=!1,M=q(M,N,10,n.s),(ce=M.indexOf("."))>-1?M=M.replace(".",""):ce=M.length}for(ie=0;M.charCodeAt(ie)===48;ie++);for(P=M.length;M.charCodeAt(--P)===48;);if(M=M.slice(ie,++P)){if(P-=ie,u&&fe.DEBUG&&P>15&&(c>h||c!==m(c)))throw Error(l+n.s*c);if((ce=ce-ie-1)>ae)n.c=n.e=null;else if(ce<te)n.c=[n.e=0];else{if(n.e=ce,n.c=[],ie=(ce+1)%o,ce<0&&(ie+=o),ie<P){for(ie&&n.c.push(+M.slice(0,ie)),P-=o;ie<P;)n.c.push(+M.slice(ie,ie+=o));ie=o-(M=M.slice(ie)).length}else ie-=P;for(;ie--;M+="0");n.c.push(+M)}}else n.c=[n.e=0]}fe.clone=w,fe.ROUND_UP=0,fe.ROUND_DOWN=1,fe.ROUND_CEIL=2,fe.ROUND_FLOOR=3,fe.ROUND_HALF_UP=4,fe.ROUND_HALF_DOWN=5,fe.ROUND_HALF_EVEN=6,fe.ROUND_HALF_CEIL=7,fe.ROUND_HALF_FLOOR=8,fe.EUCLID=9,fe.config=fe.set=function(c){var N,A;if(c!=null)if(typeof c=="object"){if(c.hasOwnProperty(N="DECIMAL_PLACES")&&(A=c[N],E(A,0,y,N),K=A),c.hasOwnProperty(N="ROUNDING_MODE")&&(A=c[N],E(A,0,8,N),z=A),c.hasOwnProperty(N="EXPONENTIAL_AT")&&(A=c[N],A&&A.pop?(E(A[0],-y,0,N),E(A[1],0,y,N),Q=A[0],Y=A[1]):(E(A,-y,y,N),Q=-(Y=A<0?-A:A))),c.hasOwnProperty(N="RANGE"))if(A=c[N],A&&A.pop)E(A[0],-y,-1,N),E(A[1],1,y,N),te=A[0],ae=A[1];else if(E(A,-y,y,N),A)te=-(ae=A<0?-A:A);else throw Error(d+N+" cannot be zero: "+A);if(c.hasOwnProperty(N="CRYPTO"))if(A=c[N],A===!!A)if(A)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ue=A;else throw ue=!A,Error(d+"crypto unavailable");else ue=A;else throw Error(d+N+" not true or false: "+A);if(c.hasOwnProperty(N="MODULO_MODE")&&(A=c[N],E(A,0,9,N),ee=A),c.hasOwnProperty(N="POW_PRECISION")&&(A=c[N],E(A,0,y,N),oe=A),c.hasOwnProperty(N="FORMAT"))if(A=c[N],typeof A=="object")de=A;else throw Error(d+N+" not an object: "+A);if(c.hasOwnProperty(N="ALPHABET"))if(A=c[N],typeof A=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(A))Ee=A.slice(0,10)=="0123456789",he=A;else throw Error(d+N+" invalid: "+A)}else throw Error(d+"Object expected: "+c);return{DECIMAL_PLACES:K,ROUNDING_MODE:z,EXPONENTIAL_AT:[Q,Y],RANGE:[te,ae],CRYPTO:ue,MODULO_MODE:ee,POW_PRECISION:oe,FORMAT:de,ALPHABET:he}},fe.isBigNumber=function(c){if(!c||c._isBigNumber!==!0)return!1;if(!fe.DEBUG)return!0;var N,A,V=c.c,ne=c.e,ce=c.s;e:if({}.toString.call(V)=="[object Array]"){if((ce===1||ce===-1)&&ne>=-y&&ne<=y&&ne===m(ne)){if(V[0]===0){if(ne===0&&V.length===1)return!0;break e}if(N=(ne+1)%o,N<1&&(N+=o),String(V[0]).length==N){for(N=0;N<V.length;N++)if(A=V[N],A<0||A>=a||A!==m(A))break e;if(A!==0)return!0}}}else if(V===null&&ne===null&&(ce===null||ce===1||ce===-1))return!0;throw Error(d+"Invalid BigNumber: "+c)},fe.maximum=fe.max=function(){return be(arguments,-1)},fe.minimum=fe.min=function(){return be(arguments,1)},fe.random=(function(){var c=9007199254740992,N=Math.random()*c&2097151?function(){return m(Math.random()*c)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(A){var V,ne,ce,ie,u,P=0,M=[],n=new fe(W);if(A==null?A=K:E(A,0,y),ie=g(A/o),ue)if(crypto.getRandomValues){for(V=crypto.getRandomValues(new Uint32Array(ie*=2));P<ie;)u=V[P]*131072+(V[P+1]>>>11),u>=9e15?(ne=crypto.getRandomValues(new Uint32Array(2)),V[P]=ne[0],V[P+1]=ne[1]):(M.push(u%1e14),P+=2);P=ie/2}else if(crypto.randomBytes){for(V=crypto.randomBytes(ie*=7);P<ie;)u=(V[P]&31)*281474976710656+V[P+1]*1099511627776+V[P+2]*4294967296+V[P+3]*16777216+(V[P+4]<<16)+(V[P+5]<<8)+V[P+6],u>=9e15?crypto.randomBytes(7).copy(V,P):(M.push(u%1e14),P+=7);P=ie/7}else throw ue=!1,Error(d+"crypto unavailable");if(!ue)for(;P<ie;)u=N(),u<9e15&&(M[P++]=u%1e14);for(ie=M[--P],A%=o,ie&&A&&(u=v[o-A],M[P]=m(ie/u)*u);M[P]===0;M.pop(),P--);if(P<0)M=[ce=0];else{for(ce=-1;M[0]===0;M.splice(0,1),ce-=o);for(P=1,u=M[0];u>=10;u/=10,P++);P<o&&(ce-=o-P)}return n.e=ce,n.c=M,n}})(),fe.sum=function(){for(var c=1,N=arguments,A=new fe(N[0]);c<N.length;)A=A.plus(N[c++]);return A},q=(function(){var c="0123456789";function N(A,V,ne,ce){for(var ie,u=[0],P,M=0,n=A.length;M<n;){for(P=u.length;P--;u[P]*=V);for(u[0]+=ce.indexOf(A.charAt(M++)),ie=0;ie<u.length;ie++)u[ie]>ne-1&&(u[ie+1]==null&&(u[ie+1]=0),u[ie+1]+=u[ie]/ne|0,u[ie]%=ne)}return u.reverse()}return function(A,V,ne,ce,ie){var u,P,M,n,L,U,X,me,Ie=A.indexOf("."),Le=K,ke=z;for(Ie>=0&&(n=oe,oe=0,A=A.replace(".",""),me=new fe(V),U=me.pow(A.length-Ie),oe=n,me.c=N(j(I(U.c),U.e,"0"),10,ne,c),me.e=me.c.length),X=N(A,V,ne,ie?(u=he,c):(u=c,he)),M=n=X.length;X[--n]==0;X.pop());if(!X[0])return u.charAt(0);if(Ie<0?--M:(U.c=X,U.e=M,U.s=ce,U=k(U,me,Le,ke,ne),X=U.c,L=U.r,M=U.e),P=M+Le+1,Ie=X[P],n=ne/2,L=L||P<0||X[P+1]!=null,L=ke<4?(Ie!=null||L)&&(ke==0||ke==(U.s<0?3:2)):Ie>n||Ie==n&&(ke==4||L||ke==6&&X[P-1]&1||ke==(U.s<0?8:7)),P<1||!X[0])A=L?j(u.charAt(1),-Le,u.charAt(0)):u.charAt(0);else{if(X.length=P,L)for(--ne;++X[--P]>ne;)X[P]=0,P||(++M,X=[1].concat(X));for(n=X.length;!X[--n];);for(Ie=0,A="";Ie<=n;A+=u.charAt(X[Ie++]));A=j(A,M,u.charAt(0))}return A}})(),k=(function(){function c(V,ne,ce){var ie,u,P,M,n=0,L=V.length,U=ne%_,X=ne/_|0;for(V=V.slice();L--;)P=V[L]%_,M=V[L]/_|0,ie=X*P+M*U,u=U*P+ie%_*_+n,n=(u/ce|0)+(ie/_|0)+X*M,V[L]=u%ce;return n&&(V=[n].concat(V)),V}function N(V,ne,ce,ie){var u,P;if(ce!=ie)P=ce>ie?1:-1;else for(u=P=0;u<ce;u++)if(V[u]!=ne[u]){P=V[u]>ne[u]?1:-1;break}return P}function A(V,ne,ce,ie){for(var u=0;ce--;)V[ce]-=u,u=V[ce]<ne[ce]?1:0,V[ce]=u*ie+V[ce]-ne[ce];for(;!V[0]&&V.length>1;V.splice(0,1));}return function(V,ne,ce,ie,u){var P,M,n,L,U,X,me,Ie,Le,ke,ze,nt,bt,dt,Et,lt,Be,Me=V.s==ne.s?1:-1,Ve=V.c,Je=ne.c;if(!Ve||!Ve[0]||!Je||!Je[0])return new fe(!V.s||!ne.s||(Ve?Je&&Ve[0]==Je[0]:!Je)?NaN:Ve&&Ve[0]==0||!Je?Me*0:Me/0);for(Ie=new fe(Me),Le=Ie.c=[],M=V.e-ne.e,Me=ce+M+1,u||(u=a,M=T(V.e/o)-T(ne.e/o),Me=Me/o|0),n=0;Je[n]==(Ve[n]||0);n++);if(Je[n]>(Ve[n]||0)&&M--,Me<0)Le.push(1),L=!0;else{for(dt=Ve.length,lt=Je.length,n=0,Me+=2,U=m(u/(Je[0]+1)),U>1&&(Je=c(Je,U,u),Ve=c(Ve,U,u),lt=Je.length,dt=Ve.length),bt=lt,ke=Ve.slice(0,lt),ze=ke.length;ze<lt;ke[ze++]=0);Be=Je.slice(),Be=[0].concat(Be),Et=Je[0],Je[1]>=u/2&&Et++;do{if(U=0,P=N(Je,ke,lt,ze),P<0){if(nt=ke[0],lt!=ze&&(nt=nt*u+(ke[1]||0)),U=m(nt/Et),U>1)for(U>=u&&(U=u-1),X=c(Je,U,u),me=X.length,ze=ke.length;N(X,ke,me,ze)==1;)U--,A(X,lt<me?Be:Je,me,u),me=X.length,P=1;else U==0&&(P=U=1),X=Je.slice(),me=X.length;if(me<ze&&(X=[0].concat(X)),A(ke,X,ze,u),ze=ke.length,P==-1)for(;N(Je,ke,lt,ze)<1;)U++,A(ke,lt<ze?Be:Je,ze,u),ze=ke.length}else P===0&&(U++,ke=[0]);Le[n++]=U,ke[0]?ke[ze++]=Ve[bt]||0:(ke=[Ve[bt]],ze=1)}while((bt++<dt||ke[0]!=null)&&Me--);L=ke[0]!=null,Le[0]||Le.splice(0,1)}if(u==a){for(n=1,Me=Le[0];Me>=10;Me/=10,n++);ge(Ie,ce+(Ie.e=n+M*o-1)+1,ie,L)}else Ie.e=M,Ie.r=+L;return Ie}})();function Se(c,N,A,V){var ne,ce,ie,u,P;if(A==null?A=z:E(A,0,8),!c.c)return c.toString();if(ne=c.c[0],ie=c.e,N==null)P=I(c.c),P=V==1||V==2&&(ie<=Q||ie>=Y)?x(P,ie):j(P,ie,"0");else if(c=ge(new fe(c),N,A),ce=c.e,P=I(c.c),u=P.length,V==1||V==2&&(N<=ce||ce<=Q)){for(;u<N;P+="0",u++);P=x(P,ce)}else if(N-=ie+(V===2&&ce>ie),P=j(P,ce,"0"),ce+1>u){if(--N>0)for(P+=".";N--;P+="0");}else if(N+=ce-u,N>0)for(ce+1==u&&(P+=".");N--;P+="0");return c.s<0&&ne?"-"+P:P}function be(c,N){for(var A,V,ne=1,ce=new fe(c[0]);ne<c.length;ne++)V=new fe(c[ne]),(!V.s||(A=O(ce,V))===N||A===0&&ce.s===N)&&(ce=V);return ce}function Oe(c,N,A){for(var V=1,ne=N.length;!N[--ne];N.pop());for(ne=N[0];ne>=10;ne/=10,V++);return(A=V+A*o-1)>ae?c.c=c.e=null:A<te?c.c=[c.e=0]:(c.e=A,c.c=N),c}G=(function(){var c=/^(-?)0([xbo])(?=\w[\w.]*$)/i,N=/^([^.]+)\.$/,A=/^\.([^.]+)$/,V=/^-?(Infinity|NaN)$/,ne=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(ce,ie,u,P){var M,n=u?ie:ie.replace(ne,"");if(V.test(n))ce.s=isNaN(n)?null:n<0?-1:1;else{if(!u&&(n=n.replace(c,function(L,U,X){return M=(X=X.toLowerCase())=="x"?16:X=="b"?2:8,!P||P==M?U:L}),P&&(M=P,n=n.replace(N,"$1").replace(A,"0.$1")),ie!=n))return new fe(n,M);if(fe.DEBUG)throw Error(d+"Not a"+(P?" base "+P:"")+" number: "+ie);ce.s=null}ce.c=ce.e=null}})();function ge(c,N,A,V){var ne,ce,ie,u,P,M,n,L=c.c,U=v;if(L){e:{for(ne=1,u=L[0];u>=10;u/=10,ne++);if(ce=N-ne,ce<0)ce+=o,ie=N,P=L[M=0],n=m(P/U[ne-ie-1]%10);else if(M=g((ce+1)/o),M>=L.length)if(V){for(;L.length<=M;L.push(0));P=n=0,ne=1,ce%=o,ie=ce-o+1}else break e;else{for(P=u=L[M],ne=1;u>=10;u/=10,ne++);ce%=o,ie=ce-o+ne,n=ie<0?0:m(P/U[ne-ie-1]%10)}if(V=V||N<0||L[M+1]!=null||(ie<0?P:P%U[ne-ie-1]),V=A<4?(n||V)&&(A==0||A==(c.s<0?3:2)):n>5||n==5&&(A==4||V||A==6&&(ce>0?ie>0?P/U[ne-ie]:0:L[M-1])%10&1||A==(c.s<0?8:7)),N<1||!L[0])return L.length=0,V?(N-=c.e+1,L[0]=U[(o-N%o)%o],c.e=-N||0):L[0]=c.e=0,c;if(ce==0?(L.length=M,u=1,M--):(L.length=M+1,u=U[o-ce],L[M]=ie>0?m(P/U[ne-ie]%U[ie])*u:0),V)for(;;)if(M==0){for(ce=1,ie=L[0];ie>=10;ie/=10,ce++);for(ie=L[0]+=u,u=1;ie>=10;ie/=10,u++);ce!=u&&(c.e++,L[0]==a&&(L[0]=1));break}else{if(L[M]+=u,L[M]!=a)break;L[M--]=0,u=1}for(ce=L.length;L[--ce]===0;L.pop());}c.e>ae?c.c=c.e=null:c.e<te&&(c.c=[c.e=0])}return c}function J(c){var N,A=c.e;return A===null?c.toString():(N=I(c.c),N=A<=Q||A>=Y?x(N,A):j(N,A,"0"),c.s<0?"-"+N:N)}return $.absoluteValue=$.abs=function(){var c=new fe(this);return c.s<0&&(c.s=1),c},$.comparedTo=function(c,N){return O(this,new fe(c,N))},$.decimalPlaces=$.dp=function(c,N){var A,V,ne,ce=this;if(c!=null)return E(c,0,y),N==null?N=z:E(N,0,8),ge(new fe(ce),c+ce.e+1,N);if(!(A=ce.c))return null;if(V=((ne=A.length-1)-T(this.e/o))*o,ne=A[ne])for(;ne%10==0;ne/=10,V--);return V<0&&(V=0),V},$.dividedBy=$.div=function(c,N){return k(this,new fe(c,N),K,z)},$.dividedToIntegerBy=$.idiv=function(c,N){return k(this,new fe(c,N),0,1)},$.exponentiatedBy=$.pow=function(c,N){var A,V,ne,ce,ie,u,P,M,n,L=this;if(c=new fe(c),c.c&&!c.isInteger())throw Error(d+"Exponent not an integer: "+J(c));if(N!=null&&(N=new fe(N)),u=c.e>14,!L.c||!L.c[0]||L.c[0]==1&&!L.e&&L.c.length==1||!c.c||!c.c[0])return n=new fe(Math.pow(+J(L),u?c.s*(2-C(c)):+J(c))),N?n.mod(N):n;if(P=c.s<0,N){if(N.c?!N.c[0]:!N.s)return new fe(NaN);V=!P&&L.isInteger()&&N.isInteger(),V&&(L=L.mod(N))}else{if(c.e>9&&(L.e>0||L.e<-1||(L.e==0?L.c[0]>1||u&&L.c[1]>=24e7:L.c[0]<8e13||u&&L.c[0]<=9999975e7)))return ce=L.s<0&&C(c)?-0:0,L.e>-1&&(ce=1/ce),new fe(P?1/ce:ce);oe&&(ce=g(oe/o+2))}for(u?(A=new fe(.5),P&&(c.s=1),M=C(c)):(ne=Math.abs(+J(c)),M=ne%2),n=new fe(W);;){if(M){if(n=n.times(L),!n.c)break;ce?n.c.length>ce&&(n.c.length=ce):V&&(n=n.mod(N))}if(ne){if(ne=m(ne/2),ne===0)break;M=ne%2}else if(c=c.times(A),ge(c,c.e+1,1),c.e>14)M=C(c);else{if(ne=+J(c),ne===0)break;M=ne%2}L=L.times(L),ce?L.c&&L.c.length>ce&&(L.c.length=ce):V&&(L=L.mod(N))}return V?n:(P&&(n=W.div(n)),N?n.mod(N):ce?ge(n,oe,z,ie):n)},$.integerValue=function(c){var N=new fe(this);return c==null?c=z:E(c,0,8),ge(N,N.e+1,c)},$.isEqualTo=$.eq=function(c,N){return O(this,new fe(c,N))===0},$.isFinite=function(){return!!this.c},$.isGreaterThan=$.gt=function(c,N){return O(this,new fe(c,N))>0},$.isGreaterThanOrEqualTo=$.gte=function(c,N){return(N=O(this,new fe(c,N)))===1||N===0},$.isInteger=function(){return!!this.c&&T(this.e/o)>this.c.length-2},$.isLessThan=$.lt=function(c,N){return O(this,new fe(c,N))<0},$.isLessThanOrEqualTo=$.lte=function(c,N){return(N=O(this,new fe(c,N)))===-1||N===0},$.isNaN=function(){return!this.s},$.isNegative=function(){return this.s<0},$.isPositive=function(){return this.s>0},$.isZero=function(){return!!this.c&&this.c[0]==0},$.minus=function(c,N){var A,V,ne,ce,ie=this,u=ie.s;if(c=new fe(c,N),N=c.s,!u||!N)return new fe(NaN);if(u!=N)return c.s=-N,ie.plus(c);var P=ie.e/o,M=c.e/o,n=ie.c,L=c.c;if(!P||!M){if(!n||!L)return n?(c.s=-N,c):new fe(L?ie:NaN);if(!n[0]||!L[0])return L[0]?(c.s=-N,c):new fe(n[0]?ie:z==3?-0:0)}if(P=T(P),M=T(M),n=n.slice(),u=P-M){for((ce=u<0)?(u=-u,ne=n):(M=P,ne=L),ne.reverse(),N=u;N--;ne.push(0));ne.reverse()}else for(V=(ce=(u=n.length)<(N=L.length))?u:N,u=N=0;N<V;N++)if(n[N]!=L[N]){ce=n[N]<L[N];break}if(ce&&(ne=n,n=L,L=ne,c.s=-c.s),N=(V=L.length)-(A=n.length),N>0)for(;N--;n[A++]=0);for(N=a-1;V>u;){if(n[--V]<L[V]){for(A=V;A&&!n[--A];n[A]=N);--n[A],n[V]+=a}n[V]-=L[V]}for(;n[0]==0;n.splice(0,1),--M);return n[0]?Oe(c,n,M):(c.s=z==3?-1:1,c.c=[c.e=0],c)},$.modulo=$.mod=function(c,N){var A,V,ne=this;return c=new fe(c,N),!ne.c||!c.s||c.c&&!c.c[0]?new fe(NaN):!c.c||ne.c&&!ne.c[0]?new fe(ne):(ee==9?(V=c.s,c.s=1,A=k(ne,c,0,3),c.s=V,A.s*=V):A=k(ne,c,0,ee),c=ne.minus(A.times(c)),!c.c[0]&&ee==1&&(c.s=ne.s),c)},$.multipliedBy=$.times=function(c,N){var A,V,ne,ce,ie,u,P,M,n,L,U,X,me,Ie,Le,ke=this,ze=ke.c,nt=(c=new fe(c,N)).c;if(!ze||!nt||!ze[0]||!nt[0])return!ke.s||!c.s||ze&&!ze[0]&&!nt||nt&&!nt[0]&&!ze?c.c=c.e=c.s=null:(c.s*=ke.s,!ze||!nt?c.c=c.e=null:(c.c=[0],c.e=0)),c;for(V=T(ke.e/o)+T(c.e/o),c.s*=ke.s,P=ze.length,L=nt.length,P<L&&(me=ze,ze=nt,nt=me,ne=P,P=L,L=ne),ne=P+L,me=[];ne--;me.push(0));for(Ie=a,Le=_,ne=L;--ne>=0;){for(A=0,U=nt[ne]%Le,X=nt[ne]/Le|0,ie=P,ce=ne+ie;ce>ne;)M=ze[--ie]%Le,n=ze[ie]/Le|0,u=X*M+n*U,M=U*M+u%Le*Le+me[ce]+A,A=(M/Ie|0)+(u/Le|0)+X*n,me[ce--]=M%Ie;me[ce]=A}return A?++V:me.splice(0,1),Oe(c,me,V)},$.negated=function(){var c=new fe(this);return c.s=-c.s||null,c},$.plus=function(c,N){var A,V=this,ne=V.s;if(c=new fe(c,N),N=c.s,!ne||!N)return new fe(NaN);if(ne!=N)return c.s=-N,V.minus(c);var ce=V.e/o,ie=c.e/o,u=V.c,P=c.c;if(!ce||!ie){if(!u||!P)return new fe(ne/0);if(!u[0]||!P[0])return P[0]?c:new fe(u[0]?V:ne*0)}if(ce=T(ce),ie=T(ie),u=u.slice(),ne=ce-ie){for(ne>0?(ie=ce,A=P):(ne=-ne,A=u),A.reverse();ne--;A.push(0));A.reverse()}for(ne=u.length,N=P.length,ne-N<0&&(A=P,P=u,u=A,N=ne),ne=0;N;)ne=(u[--N]=u[N]+P[N]+ne)/a|0,u[N]=a===u[N]?0:u[N]%a;return ne&&(u=[ne].concat(u),++ie),Oe(c,u,ie)},$.precision=$.sd=function(c,N){var A,V,ne,ce=this;if(c!=null&&c!==!!c)return E(c,1,y),N==null?N=z:E(N,0,8),ge(new fe(ce),c,N);if(!(A=ce.c))return null;if(ne=A.length-1,V=ne*o+1,ne=A[ne]){for(;ne%10==0;ne/=10,V--);for(ne=A[0];ne>=10;ne/=10,V++);}return c&&ce.e+1>V&&(V=ce.e+1),V},$.shiftedBy=function(c){return E(c,-h,h),this.times("1e"+c)},$.squareRoot=$.sqrt=function(){var c,N,A,V,ne,ce=this,ie=ce.c,u=ce.s,P=ce.e,M=K+4,n=new fe("0.5");if(u!==1||!ie||!ie[0])return new fe(!u||u<0&&(!ie||ie[0])?NaN:ie?ce:1/0);if(u=Math.sqrt(+J(ce)),u==0||u==1/0?(N=I(ie),(N.length+P)%2==0&&(N+="0"),u=Math.sqrt(+N),P=T((P+1)/2)-(P<0||P%2),u==1/0?N="5e"+P:(N=u.toExponential(),N=N.slice(0,N.indexOf("e")+1)+P),A=new fe(N)):A=new fe(u+""),A.c[0]){for(P=A.e,u=P+M,u<3&&(u=0);;)if(ne=A,A=n.times(ne.plus(k(ce,ne,M,1))),I(ne.c).slice(0,u)===(N=I(A.c)).slice(0,u))if(A.e<P&&--u,N=N.slice(u-3,u+1),N=="9999"||!V&&N=="4999"){if(!V&&(ge(ne,ne.e+K+2,0),ne.times(ne).eq(ce))){A=ne;break}M+=4,u+=4,V=1}else{(!+N||!+N.slice(1)&&N.charAt(0)=="5")&&(ge(A,A.e+K+2,1),c=!A.times(A).eq(ce));break}}return ge(A,A.e+K+1,z,c)},$.toExponential=function(c,N){return c!=null&&(E(c,0,y),c++),Se(this,c,N,1)},$.toFixed=function(c,N){return c!=null&&(E(c,0,y),c=c+this.e+1),Se(this,c,N)},$.toFormat=function(c,N,A){var V,ne=this;if(A==null)c!=null&&N&&typeof N=="object"?(A=N,N=null):c&&typeof c=="object"?(A=c,c=N=null):A=de;else if(typeof A!="object")throw Error(d+"Argument not an object: "+A);if(V=ne.toFixed(c,N),ne.c){var ce,ie=V.split("."),u=+A.groupSize,P=+A.secondaryGroupSize,M=A.groupSeparator||"",n=ie[0],L=ie[1],U=ne.s<0,X=U?n.slice(1):n,me=X.length;if(P&&(ce=u,u=P,P=ce,me-=ce),u>0&&me>0){for(ce=me%u||u,n=X.substr(0,ce);ce<me;ce+=u)n+=M+X.substr(ce,u);P>0&&(n+=M+X.slice(ce)),U&&(n="-"+n)}V=L?n+(A.decimalSeparator||"")+((P=+A.fractionGroupSize)?L.replace(new RegExp("\\d{"+P+"}\\B","g"),"$&"+(A.fractionGroupSeparator||"")):L):n}return(A.prefix||"")+V+(A.suffix||"")},$.toFraction=function(c){var N,A,V,ne,ce,ie,u,P,M,n,L,U,X=this,me=X.c;if(c!=null&&(u=new fe(c),!u.isInteger()&&(u.c||u.s!==1)||u.lt(W)))throw Error(d+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+J(u));if(!me)return new fe(X);for(N=new fe(W),M=A=new fe(W),V=P=new fe(W),U=I(me),ce=N.e=U.length-X.e-1,N.c[0]=v[(ie=ce%o)<0?o+ie:ie],c=!c||u.comparedTo(N)>0?ce>0?N:M:u,ie=ae,ae=1/0,u=new fe(U),P.c[0]=0;n=k(u,N,0,1),ne=A.plus(n.times(V)),ne.comparedTo(c)!=1;)A=V,V=ne,M=P.plus(n.times(ne=M)),P=ne,N=u.minus(n.times(ne=N)),u=ne;return ne=k(c.minus(A),V,0,1),P=P.plus(ne.times(M)),A=A.plus(ne.times(V)),P.s=M.s=X.s,ce=ce*2,L=k(M,V,ce,z).minus(X).abs().comparedTo(k(P,A,ce,z).minus(X).abs())<1?[M,V]:[P,A],ae=ie,L},$.toNumber=function(){return+J(this)},$.toPrecision=function(c,N){return c!=null&&E(c,1,y),Se(this,c,N,2)},$.toString=function(c){var N,A=this,V=A.s,ne=A.e;return ne===null?V?(N="Infinity",V<0&&(N="-"+N)):N="NaN":(c==null?N=ne<=Q||ne>=Y?x(I(A.c),ne):j(I(A.c),ne,"0"):c===10&&Ee?(A=ge(new fe(A),K+ne+1,z),N=j(I(A.c),A.e,"0")):(E(c,2,he.length,"Base"),N=q(j(I(A.c),ne,"0"),10,c,V,!0)),V<0&&A.c[0]&&(N="-"+N)),N},$.valueOf=$.toJSON=function(){return J(this)},$._isBigNumber=!0,D!=null&&fe.set(D),fe}function T(D){var k=D|0;return D>0||D===k?k:k-1}function I(D){for(var k,q,G=1,$=D.length,W=D[0]+"";G<$;){for(k=D[G++]+"",q=o-k.length;q--;k="0"+k);W+=k}for($=W.length;W.charCodeAt(--$)===48;);return W.slice(0,$+1||1)}function O(D,k){var q,G,$=D.c,W=k.c,K=D.s,z=k.s,Q=D.e,Y=k.e;if(!K||!z)return null;if(q=$&&!$[0],G=W&&!W[0],q||G)return q?G?0:-z:K;if(K!=z)return K;if(q=K<0,G=Q==Y,!$||!W)return G?0:!$^q?1:-1;if(!G)return Q>Y^q?1:-1;for(z=(Q=$.length)<(Y=W.length)?Q:Y,K=0;K<z;K++)if($[K]!=W[K])return $[K]>W[K]^q?1:-1;return Q==Y?0:Q>Y^q?1:-1}function E(D,k,q,G){if(D<k||D>q||D!==m(D))throw Error(d+(G||"Argument")+(typeof D=="number"?D<k||D>q?" out of range: ":" not an integer: ":" not a primitive number: ")+String(D))}function C(D){var k=D.c.length-1;return T(D.e/o)==k&&D.c[k]%2!=0}function x(D,k){return(D.length>1?D.charAt(0)+"."+D.slice(1):D)+(k<0?"e":"e+")+k}function j(D,k,q){var G,$;if(k<0){for($=q+".";++k;$+=q);D=$+D}else if(G=D.length,++k>G){for($=q,k-=G;--k;$+=q);D+=$}else k<G&&(D=D.slice(0,k)+"."+D.slice(k));return D}s=w(),s.default=s.BigNumber=s,e.exports?e.exports=s:(t||(t=typeof self<"u"&&self?self:window),t.BigNumber=s)})(bignumber)})(bignumber$1)),bignumber$1.exports}var hasRequiredStringify$2;function requireStringify$2(){return hasRequiredStringify$2||(hasRequiredStringify$2=1,(function(e){var t=requireBignumber(),s=e.exports;(function(){var p=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,m,d={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;function a(h){return p.lastIndex=0,p.test(h)?'"'+h.replace(p,function(v){var _=d[v];return typeof _=="string"?_:"\\u"+("0000"+v.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+h+'"'}function o(h,v){var _,y,w,T,I=g,O,E=v[h],C=E!=null&&(E instanceof t||t.isBigNumber(E));switch(E&&typeof E=="object"&&typeof E.toJSON=="function"&&(E=E.toJSON(h)),typeof l=="function"&&(E=l.call(v,h,E)),typeof E){case"string":return C?E:a(E);case"number":return isFinite(E)?String(E):"null";case"boolean":case"null":case"bigint":return String(E);case"object":if(!E)return"null";if(g+=m,O=[],Object.prototype.toString.apply(E)==="[object Array]"){for(T=E.length,_=0;_<T;_+=1)O[_]=o(_,E)||"null";return w=O.length===0?"[]":g?`[
`+g+O.join(`,
`+g)+`
`+I+"]":"["+O.join(",")+"]",g=I,w}if(l&&typeof l=="object")for(T=l.length,_=0;_<T;_+=1)typeof l[_]=="string"&&(y=l[_],w=o(y,E),w&&O.push(a(y)+(g?": ":":")+w));else Object.keys(E).forEach(function(x){var j=o(x,E);j&&O.push(a(x)+(g?": ":":")+j)});return w=O.length===0?"{}":g?`{
`+g+O.join(`,
`+g)+`
`+I+"}":"{"+O.join(",")+"}",g=I,w}}typeof s.stringify!="function"&&(s.stringify=function(h,v,_){var y;if(g="",m="",typeof _=="number")for(y=0;y<_;y+=1)m+=" ";else typeof _=="string"&&(m=_);if(l=v,v&&typeof v!="function"&&(typeof v!="object"||typeof v.length!="number"))throw new Error("JSON.stringify");return o("",{"":h})})})()})(stringify$3)),stringify$3.exports}var parse$4,hasRequiredParse$4;function requireParse$4(){if(hasRequiredParse$4)return parse$4;hasRequiredParse$4=1;var e=null;const t=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,s=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;var p=function(g){var m={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(g!=null){if(g.strict===!0&&(m.strict=!0),g.storeAsString===!0&&(m.storeAsString=!0),m.alwaysParseAsBig=g.alwaysParseAsBig===!0?g.alwaysParseAsBig:!1,m.useNativeBigInt=g.useNativeBigInt===!0?g.useNativeBigInt:!1,typeof g.constructorAction<"u")if(g.constructorAction==="error"||g.constructorAction==="ignore"||g.constructorAction==="preserve")m.constructorAction=g.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${g.constructorAction}`);if(typeof g.protoAction<"u")if(g.protoAction==="error"||g.protoAction==="ignore"||g.protoAction==="preserve")m.protoAction=g.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${g.protoAction}`)}var d,l,a={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},o,h=function(C){throw{name:"SyntaxError",message:C,at:d,text:o}},v=function(C){return C&&C!==l&&h("Expected '"+C+"' instead of '"+l+"'"),l=o.charAt(d),d+=1,l},_=function(){var C,x="";for(l==="-"&&(x="-",v("-"));l>="0"&&l<="9";)x+=l,v();if(l===".")for(x+=".";v()&&l>="0"&&l<="9";)x+=l;if(l==="e"||l==="E")for(x+=l,v(),(l==="-"||l==="+")&&(x+=l,v());l>="0"&&l<="9";)x+=l,v();if(C=+x,!isFinite(C))h("Bad number");else return e==null&&(e=requireBignumber()),x.length>15?m.storeAsString?x:m.useNativeBigInt?BigInt(x):new e(x):m.alwaysParseAsBig?m.useNativeBigInt?BigInt(C):new e(C):C},y=function(){var C,x,j="",D;if(l==='"')for(var k=d;v();){if(l==='"')return d-1>k&&(j+=o.substring(k,d-1)),v(),j;if(l==="\\"){if(d-1>k&&(j+=o.substring(k,d-1)),v(),l==="u"){for(D=0,x=0;x<4&&(C=parseInt(v(),16),!!isFinite(C));x+=1)D=D*16+C;j+=String.fromCharCode(D)}else if(typeof a[l]=="string")j+=a[l];else break;k=d}}h("Bad string")},w=function(){for(;l&&l<=" ";)v()},T=function(){switch(l){case"t":return v("t"),v("r"),v("u"),v("e"),!0;case"f":return v("f"),v("a"),v("l"),v("s"),v("e"),!1;case"n":return v("n"),v("u"),v("l"),v("l"),null}h("Unexpected '"+l+"'")},I,O=function(){var C=[];if(l==="["){if(v("["),w(),l==="]")return v("]"),C;for(;l;){if(C.push(I()),w(),l==="]")return v("]"),C;v(","),w()}}h("Bad array")},E=function(){var C,x=Object.create(null);if(l==="{"){if(v("{"),w(),l==="}")return v("}"),x;for(;l;){if(C=y(),w(),v(":"),m.strict===!0&&Object.hasOwnProperty.call(x,C)&&h('Duplicate key "'+C+'"'),t.test(C)===!0?m.protoAction==="error"?h("Object contains forbidden prototype property"):m.protoAction==="ignore"?I():x[C]=I():s.test(C)===!0?m.constructorAction==="error"?h("Object contains forbidden constructor property"):m.constructorAction==="ignore"?I():x[C]=I():x[C]=I(),w(),l==="}")return v("}"),x;v(","),w()}}h("Bad object")};return I=function(){switch(w(),l){case"{":return E();case"[":return O();case'"':return y();case"-":return _();default:return l>="0"&&l<="9"?_():T()}},function(C,x){var j;return o=C+"",d=0,l=" ",j=I(),w(),l&&h("Syntax error"),typeof x=="function"?(function D(k,q){var G,$=k[q];return $&&typeof $=="object"&&Object.keys($).forEach(function(W){G=D($,W),G!==void 0?$[W]=G:delete $[W]}),x.call(k,q,$)})({"":j},""):j}};return parse$4=p,parse$4}var hasRequiredJsonBigint;function requireJsonBigint(){if(hasRequiredJsonBigint)return jsonBigint.exports;hasRequiredJsonBigint=1;var e=requireStringify$2().stringify,t=requireParse$4();return jsonBigint.exports=function(s){return{parse:t(s),stringify:e}},jsonBigint.exports.parse=t(),jsonBigint.exports.stringify=e,jsonBigint.exports}var gcpResidency={},hasRequiredGcpResidency;function requireGcpResidency(){return hasRequiredGcpResidency||(hasRequiredGcpResidency=1,(function(e){var t={};Object.defineProperty(e,"__esModule",{value:!0}),e.GCE_LINUX_BIOS_PATHS=void 0,e.isGoogleCloudServerless=m,e.isGoogleComputeEngineLinux=d,e.isGoogleComputeEngineMACAddress=l,e.isGoogleComputeEngine=a,e.detectGCPResidency=o;const s=require$$1$3,p=require$$1$3;e.GCE_LINUX_BIOS_PATHS={BIOS_DATE:"/sys/class/dmi/id/bios_date",BIOS_VENDOR:"/sys/class/dmi/id/bios_vendor"};const g=/^42:01/;function m(){return!!(t.CLOUD_RUN_JOB||t.FUNCTION_NAME||t.K_SERVICE)}function d(){if((0,p.platform)()!=="linux")return!1;try{(0,s.statSync)(e.GCE_LINUX_BIOS_PATHS.BIOS_DATE);const h=(0,s.readFileSync)(e.GCE_LINUX_BIOS_PATHS.BIOS_VENDOR,"utf8");return/Google/.test(h)}catch{return!1}}function l(){const h=(0,p.networkInterfaces)();for(const v of Object.values(h))if(v){for(const{mac:_}of v)if(g.test(_))return!0}return!1}function a(){return d()||l()}function o(){return m()||a()}})(gcpResidency)),gcpResidency}var src$c={},loggingUtils={},colours={},hasRequiredColours;function requireColours(){if(hasRequiredColours)return colours;hasRequiredColours=1;var e={};Object.defineProperty(colours,"__esModule",{value:!0}),colours.Colours=void 0;class t{static isEnabled(p){return p.isTTY&&(typeof p.getColorDepth=="function"?p.getColorDepth()>2:!0)}static refresh(){t.enabled=t.isEnabled(e.stderr),this.enabled?(t.reset="\x1B[0m",t.bright="\x1B[1m",t.dim="\x1B[2m",t.red="\x1B[31m",t.green="\x1B[32m",t.yellow="\x1B[33m",t.blue="\x1B[34m",t.magenta="\x1B[35m",t.cyan="\x1B[36m",t.white="\x1B[37m",t.grey="\x1B[90m"):(t.reset="",t.bright="",t.dim="",t.red="",t.green="",t.yellow="",t.blue="",t.magenta="",t.cyan="",t.white="",t.grey="")}}return colours.Colours=t,t.enabled=!1,t.reset="",t.bright="",t.dim="",t.red="",t.green="",t.yellow="",t.blue="",t.magenta="",t.cyan="",t.white="",t.grey="",t.refresh(),colours}var hasRequiredLoggingUtils;function requireLoggingUtils(){return hasRequiredLoggingUtils||(hasRequiredLoggingUtils=1,(function(e){var t=loggingUtils&&loggingUtils.__createBinding||(Object.create?(function(j,D,k,q){q===void 0&&(q=k);var G=Object.getOwnPropertyDescriptor(D,k);(!G||("get"in G?!D.__esModule:G.writable||G.configurable))&&(G={enumerable:!0,get:function(){return D[k]}}),Object.defineProperty(j,q,G)}):(function(j,D,k,q){q===void 0&&(q=k),j[q]=D[k]})),s=loggingUtils&&loggingUtils.__setModuleDefault||(Object.create?(function(j,D){Object.defineProperty(j,"default",{enumerable:!0,value:D})}):function(j,D){j.default=D}),p=loggingUtils&&loggingUtils.__importStar||function(j){if(j&&j.__esModule)return j;var D={};if(j!=null)for(var k in j)k!=="default"&&Object.prototype.hasOwnProperty.call(j,k)&&t(D,j,k);return s(D,j),D};Object.defineProperty(e,"__esModule",{value:!0}),e.env=e.DebugLogBackendBase=e.placeholder=e.AdhocDebugLogger=e.LogSeverity=void 0,e.getNodeBackend=_,e.getDebugBackend=w,e.getStructuredBackend=I,e.setBackend=C,e.log=x;const g=require$$1$3,m=p(require$$1$3),d=p(require$$1$3),l=requireColours();var a;(function(j){j.DEFAULT="DEFAULT",j.DEBUG="DEBUG",j.INFO="INFO",j.WARNING="WARNING",j.ERROR="ERROR"})(a||(e.LogSeverity=a={}));class o extends g.EventEmitter{constructor(D,k){super(),this.namespace=D,this.upstream=k,this.func=Object.assign(this.invoke.bind(this),{instance:this,on:(q,G)=>this.on(q,G)}),this.func.debug=(...q)=>this.invokeSeverity(a.DEBUG,...q),this.func.info=(...q)=>this.invokeSeverity(a.INFO,...q),this.func.warn=(...q)=>this.invokeSeverity(a.WARNING,...q),this.func.error=(...q)=>this.invokeSeverity(a.ERROR,...q),this.func.sublog=q=>x(q,this.func)}invoke(D,...k){this.upstream&&this.upstream(D,...k),this.emit("log",D,k)}invokeSeverity(D,...k){this.invoke({severity:D},...k)}}e.AdhocDebugLogger=o,e.placeholder=new o("",()=>{}).func;class h{constructor(){var D;this.cached=new Map,this.filters=[],this.filtersSet=!1;let k=(D=m.env[e.env.nodeEnables])!==null&&D!==void 0?D:"*";k==="all"&&(k="*"),this.filters=k.split(",")}log(D,k,...q){try{this.filtersSet||(this.setFilters(),this.filtersSet=!0);let G=this.cached.get(D);G||(G=this.makeLogger(D),this.cached.set(D,G)),G(k,...q)}catch(G){console.error(G)}}}e.DebugLogBackendBase=h;class v extends h{constructor(){super(...arguments),this.enabledRegexp=/.*/g}isEnabled(D){return this.enabledRegexp.test(D)}makeLogger(D){return this.enabledRegexp.test(D)?(k,...q)=>{var G;const $=`${l.Colours.green}${D}${l.Colours.reset}`,W=`${l.Colours.yellow}${m.pid}${l.Colours.reset}`;let K;switch(k.severity){case a.ERROR:K=`${l.Colours.red}${k.severity}${l.Colours.reset}`;break;case a.INFO:K=`${l.Colours.magenta}${k.severity}${l.Colours.reset}`;break;case a.WARNING:K=`${l.Colours.yellow}${k.severity}${l.Colours.reset}`;break;default:K=(G=k.severity)!==null&&G!==void 0?G:a.DEFAULT;break}const z=d.formatWithOptions({colors:l.Colours.enabled},...q),Q=Object.assign({},k);delete Q.severity;const Y=Object.getOwnPropertyNames(Q).length?JSON.stringify(Q):"",te=Y?`${l.Colours.grey}${Y}${l.Colours.reset}`:"";console.error("%s [%s|%s] %s%s",W,$,K,z,Y?` ${te}`:"")}:()=>{}}setFilters(){const k=this.filters.join(",").replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^");this.enabledRegexp=new RegExp(`^${k}$`,"i")}}function _(){return new v}class y extends h{constructor(D){super(),this.debugPkg=D}makeLogger(D){const k=this.debugPkg(D);return(q,...G)=>{k(G[0],...G.slice(1))}}setFilters(){var D;const k=(D=m.env.NODE_DEBUG)!==null&&D!==void 0?D:"";m.env.NODE_DEBUG=`${k}${k?",":""}${this.filters.join(",")}`}}function w(j){return new y(j)}class T extends h{constructor(D){var k;super(),this.upstream=(k=D)!==null&&k!==void 0?k:new v}makeLogger(D){const k=this.upstream.makeLogger(D);return(q,...G)=>{var $;const W=($=q.severity)!==null&&$!==void 0?$:a.INFO,K=Object.assign({severity:W,message:d.format(...G)},q),z=JSON.stringify(K);k(q,z)}}setFilters(){this.upstream.setFilters()}}function I(j){return new T(j)}e.env={nodeEnables:"GOOGLE_SDK_NODE_LOGGING"};const O=new Map;let E;function C(j){E=j,O.clear()}function x(j,D){if(!m.env[e.env.nodeEnables]||!j)return e.placeholder;D&&(j=`${D.instance.namespace}:${j}`);const q=O.get(j);if(q)return q.func;if(E===null)return e.placeholder;E===void 0&&(E=_());const G=(()=>{let $;return new o(j,(K,...z)=>{if($!==E){if(E===null)return;E===void 0&&(E=_()),$=E}E?.log(j,K,...z)})})();return O.set(j,G),G.func}})(loggingUtils)),loggingUtils}var hasRequiredSrc$e;function requireSrc$e(){return hasRequiredSrc$e||(hasRequiredSrc$e=1,(function(e){var t=src$c&&src$c.__createBinding||(Object.create?(function(p,g,m,d){d===void 0&&(d=m);var l=Object.getOwnPropertyDescriptor(g,m);(!l||("get"in l?!g.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return g[m]}}),Object.defineProperty(p,d,l)}):(function(p,g,m,d){d===void 0&&(d=m),p[d]=g[m]})),s=src$c&&src$c.__exportStar||function(p,g){for(var m in p)m!=="default"&&!Object.prototype.hasOwnProperty.call(g,m)&&t(g,p,m)};Object.defineProperty(e,"__esModule",{value:!0}),s(requireLoggingUtils(),e)})(src$c)),src$c}var hasRequiredSrc$d;function requireSrc$d(){return hasRequiredSrc$d||(hasRequiredSrc$d=1,(function(e){var t={},s={},p=src$e&&src$e.__createBinding||(Object.create?(function(G,$,W,K){K===void 0&&(K=W);var z=Object.getOwnPropertyDescriptor($,W);(!z||("get"in z?!$.__esModule:z.writable||z.configurable))&&(z={enumerable:!0,get:function(){return $[W]}}),Object.defineProperty(G,K,z)}):(function(G,$,W,K){K===void 0&&(K=W),G[K]=$[W]})),g=src$e&&src$e.__exportStar||function(G,$){for(var W in G)W!=="default"&&!Object.prototype.hasOwnProperty.call($,W)&&p($,G,W)};Object.defineProperty(e,"__esModule",{value:!0}),e.gcpResidencyCache=e.METADATA_SERVER_DETECTION=e.HEADERS=e.HEADER_VALUE=e.HEADER_NAME=e.SECONDARY_HOST_ADDRESS=e.HOST_ADDRESS=e.BASE_PATH=void 0,e.instance=w,e.project=T,e.universe=I,e.bulk=O,e.isAvailable=x,e.resetIsAvailableCache=j,e.getGCPResidency=D,e.setGCPResidency=k,e.requestTimeout=q;const m=requireSrc$f(),d=requireJsonBigint(),l=requireGcpResidency(),a=requireSrc$e();e.BASE_PATH="/computeMetadata/v1",e.HOST_ADDRESS="http://169.254.169.254",e.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.",e.HEADER_NAME="Metadata-Flavor",e.HEADER_VALUE="Google",e.HEADERS=Object.freeze({[e.HEADER_NAME]:e.HEADER_VALUE});const o=a.log("gcp metadata");e.METADATA_SERVER_DETECTION=Object.freeze({"assume-present":"don't try to ping the metadata server, but assume it's present",none:"don't try to ping the metadata server, but don't try to use it either","bios-only":"treat the result of a BIOS probe as canonical (don't fall back to pinging)","ping-only":"skip the BIOS probe, and go straight to pinging"});function h(G){return G||(G=s.GCE_METADATA_IP||s.GCE_METADATA_HOST||e.HOST_ADDRESS),/^https?:\/\//.test(G)||(G=`http://${G}`),new URL(e.BASE_PATH,G).href}function v(G){Object.keys(G).forEach($=>{switch($){case"params":case"property":case"headers":break;case"qs":throw new Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw new Error(`'${$}' is not a valid configuration option.`)}})}async function _(G,$={},W=3,K=!1){let z="",Q={},Y={};if(typeof G=="object"){const ee=G;z=ee.metadataKey,Q=ee.params||Q,Y=ee.headers||Y,W=ee.noResponseRetries||W,K=ee.fastFail||K}else z=G;typeof $=="string"?z+=`/${$}`:(v($),$.property&&(z+=`/${$.property}`),Y=$.headers||Y,Q=$.params||Q);const te=K?y:m.request,ae={url:`${h()}/${z}`,headers:{...e.HEADERS,...Y},retryConfig:{noResponseRetries:W},params:Q,responseType:"text",timeout:q()};o.info("instance request %j",ae);const ue=await te(ae);if(o.info("instance metadata is %s",ue.data),ue.headers[e.HEADER_NAME.toLowerCase()]!==e.HEADER_VALUE)throw new Error(`Invalid response from metadata service: incorrect ${e.HEADER_NAME} header. Expected '${e.HEADER_VALUE}', got ${ue.headers[e.HEADER_NAME.toLowerCase()]?`'${ue.headers[e.HEADER_NAME.toLowerCase()]}'`:"no header"}`);if(typeof ue.data=="string")try{return d.parse(ue.data)}catch{}return ue.data}async function y(G){var $;const W={...G,url:($=G.url)===null||$===void 0?void 0:$.toString().replace(h(),h(e.SECONDARY_HOST_ADDRESS))};let K=!1;const z=(0,m.request)(G).then(Y=>(K=!0,Y)).catch(Y=>{if(K)return Q;throw K=!0,Y}),Q=(0,m.request)(W).then(Y=>(K=!0,Y)).catch(Y=>{if(K)return z;throw K=!0,Y});return Promise.race([z,Q])}function w(G){return _("instance",G)}function T(G){return _("project",G)}function I(G){return _("universe",G)}async function O(G){const $={};return await Promise.all(G.map(W=>(async()=>{const K=await _(W),z=W.metadataKey;$[z]=K})())),$}function E(){return s.DETECT_GCP_RETRIES?Number(s.DETECT_GCP_RETRIES):0}let C;async function x(){if(s.METADATA_SERVER_DETECTION){const G=s.METADATA_SERVER_DETECTION.trim().toLocaleLowerCase();if(!(G in e.METADATA_SERVER_DETECTION))throw new RangeError(`Unknown \`METADATA_SERVER_DETECTION\` env variable. Got \`${G}\`, but it should be \`${Object.keys(e.METADATA_SERVER_DETECTION).join("`, `")}\`, or unset`);switch(G){case"assume-present":return!0;case"none":return!1;case"bios-only":return D()}}try{return C===void 0&&(C=_("instance",void 0,E(),!(s.GCE_METADATA_IP||s.GCE_METADATA_HOST))),await C,!0}catch(G){const $=G;if(s.DEBUG_AUTH&&console.info($),$.type==="request-timeout"||$.response&&$.response.status===404)return!1;if(!($.response&&$.response.status===404)&&(!$.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes($.code))){let W="UNKNOWN";$.code&&(W=$.code),t.emitWarning(`received unexpected error = ${$.message} code = ${W}`,"MetadataLookupWarning")}return!1}}function j(){C=void 0}e.gcpResidencyCache=null;function D(){return e.gcpResidencyCache===null&&k(),e.gcpResidencyCache}function k(G=null){e.gcpResidencyCache=G!==null?G:(0,l.detectGCPResidency)()}function q(){return D()?0:3e3}g(requireGcpResidency(),e)})(src$e)),src$e}var crypto$4={},crypto$3={},base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=l,base64Js.toByteArray=o,base64Js.fromByteArray=_;for(var e=[],t=[],s=typeof Uint8Array<"u"?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,m=p.length;g<m;++g)e[g]=p[g],t[p.charCodeAt(g)]=g;t[45]=62,t[95]=63;function d(y){var w=y.length;if(w%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var T=y.indexOf("=");T===-1&&(T=w);var I=T===w?0:4-T%4;return[T,I]}function l(y){var w=d(y),T=w[0],I=w[1];return(T+I)*3/4-I}function a(y,w,T){return(w+T)*3/4-T}function o(y){var w,T=d(y),I=T[0],O=T[1],E=new s(a(y,I,O)),C=0,x=O>0?I-4:I,j;for(j=0;j<x;j+=4)w=t[y.charCodeAt(j)]<<18|t[y.charCodeAt(j+1)]<<12|t[y.charCodeAt(j+2)]<<6|t[y.charCodeAt(j+3)],E[C++]=w>>16&255,E[C++]=w>>8&255,E[C++]=w&255;return O===2&&(w=t[y.charCodeAt(j)]<<2|t[y.charCodeAt(j+1)]>>4,E[C++]=w&255),O===1&&(w=t[y.charCodeAt(j)]<<10|t[y.charCodeAt(j+1)]<<4|t[y.charCodeAt(j+2)]>>2,E[C++]=w>>8&255,E[C++]=w&255),E}function h(y){return e[y>>18&63]+e[y>>12&63]+e[y>>6&63]+e[y&63]}function v(y,w,T){for(var I,O=[],E=w;E<T;E+=3)I=(y[E]<<16&16711680)+(y[E+1]<<8&65280)+(y[E+2]&255),O.push(h(I));return O.join("")}function _(y){for(var w,T=y.length,I=T%3,O=[],E=16383,C=0,x=T-I;C<x;C+=E)O.push(v(y,C,C+E>x?x:C+E));return I===1?(w=y[T-1],O.push(e[w>>2]+e[w<<4&63]+"==")):I===2&&(w=(y[T-2]<<8)+y[T-1],O.push(e[w>>10]+e[w>>4&63]+e[w<<2&63]+"=")),O.join("")}return base64Js}var hasRequiredCrypto$2;function requireCrypto$2(){if(hasRequiredCrypto$2)return crypto$3;hasRequiredCrypto$2=1,Object.defineProperty(crypto$3,"__esModule",{value:!0}),crypto$3.BrowserCrypto=void 0;const e=requireBase64Js(),t=requireCrypto();class s{constructor(){if(typeof window>"u"||window.crypto===void 0||window.crypto.subtle===void 0)throw new Error("SubtleCrypto not found. Make sure it's an https:// website.")}async sha256DigestBase64(g){const m=new TextEncoder().encode(g),d=await window.crypto.subtle.digest("SHA-256",m);return e.fromByteArray(new Uint8Array(d))}randomBytesBase64(g){const m=new Uint8Array(g);return window.crypto.getRandomValues(m),e.fromByteArray(m)}static padBase64(g){for(;g.length%4!==0;)g+="=";return g}async verify(g,m,d){const l={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},a=new TextEncoder().encode(m),o=e.toByteArray(s.padBase64(d)),h=await window.crypto.subtle.importKey("jwk",g,l,!0,["verify"]);return await window.crypto.subtle.verify(l,h,o,a)}async sign(g,m){const d={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},l=new TextEncoder().encode(m),a=await window.crypto.subtle.importKey("jwk",g,d,!0,["sign"]),o=await window.crypto.subtle.sign(d,a,l);return e.fromByteArray(new Uint8Array(o))}decodeBase64StringUtf8(g){const m=e.toByteArray(s.padBase64(g));return new TextDecoder().decode(m)}encodeBase64StringUtf8(g){const m=new TextEncoder().encode(g);return e.fromByteArray(m)}async sha256DigestHex(g){const m=new TextEncoder().encode(g),d=await window.crypto.subtle.digest("SHA-256",m);return(0,t.fromArrayBufferToHex)(d)}async signWithHmacSha256(g,m){const d=typeof g=="string"?g:String.fromCharCode(...new Uint16Array(g)),l=new TextEncoder,a=await window.crypto.subtle.importKey("raw",l.encode(d),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",a,l.encode(m))}}return crypto$3.BrowserCrypto=s,crypto$3}var crypto$2={},hasRequiredCrypto$1;function requireCrypto$1(){if(hasRequiredCrypto$1)return crypto$2;hasRequiredCrypto$1=1,Object.defineProperty(crypto$2,"__esModule",{value:!0}),crypto$2.NodeCrypto=void 0;const e=require$$1$3;class t{async sha256DigestBase64(m){return e.createHash("sha256").update(m).digest("base64")}randomBytesBase64(m){return e.randomBytes(m).toString("base64")}async verify(m,d,l){const a=e.createVerify("RSA-SHA256");return a.update(d),a.end(),a.verify(m,l,"base64")}async sign(m,d){const l=e.createSign("RSA-SHA256");return l.update(d),l.end(),l.sign(m,"base64")}decodeBase64StringUtf8(m){return Buffer.from(m,"base64").toString("utf-8")}encodeBase64StringUtf8(m){return Buffer.from(m,"utf-8").toString("base64")}async sha256DigestHex(m){return e.createHash("sha256").update(m).digest("hex")}async signWithHmacSha256(m,d){const l=typeof m=="string"?m:p(m);return s(e.createHmac("sha256",l).update(d).digest())}}crypto$2.NodeCrypto=t;function s(g){return g.buffer.slice(g.byteOffset,g.byteOffset+g.byteLength)}function p(g){return Buffer.from(g)}return crypto$2}var hasRequiredCrypto;function requireCrypto(){if(hasRequiredCrypto)return crypto$4;hasRequiredCrypto=1,Object.defineProperty(crypto$4,"__esModule",{value:!0}),crypto$4.createCrypto=s,crypto$4.hasBrowserCrypto=p,crypto$4.fromArrayBufferToHex=g;const e=requireCrypto$2(),t=requireCrypto$1();function s(){return p()?new e.BrowserCrypto:new t.NodeCrypto}function p(){return typeof window<"u"&&typeof window.crypto<"u"&&typeof window.crypto.subtle<"u"}function g(m){return Array.from(new Uint8Array(m)).map(l=>l.toString(16).padStart(2,"0")).join("")}return crypto$4}var transporters={},options$3={},hasRequiredOptions;function requireOptions(){if(hasRequiredOptions)return options$3;hasRequiredOptions=1,Object.defineProperty(options$3,"__esModule",{value:!0}),options$3.validate=e;function e(t){const s=[{invalid:"uri",expected:"url"},{invalid:"json",expected:"data"},{invalid:"qs",expected:"params"}];for(const p of s)if(t[p.invalid]){const g=`'${p.invalid}' is not a valid configuration option. Please use '${p.expected}' instead. This library is using Axios for requests. Please see https://github.com/axios/axios to learn more about the valid request options.`;throw new Error(g)}}return options$3}const version$7="9.15.1",require$$4$2={version:version$7};var hasRequiredTransporters;function requireTransporters(){if(hasRequiredTransporters)return transporters;hasRequiredTransporters=1;var e={};Object.defineProperty(transporters,"__esModule",{value:!0}),transporters.DefaultTransporter=void 0;const t=requireSrc$f(),s=requireOptions(),p=require$$4$2,g="google-api-nodejs-client";class m{constructor(){this.instance=new t.Gaxios}configure(l={}){if(l.headers=l.headers||{},typeof window>"u"){const a=l.headers["User-Agent"];if(a?a.includes(`${g}/`)||(l.headers["User-Agent"]=`${a} ${m.USER_AGENT}`):l.headers["User-Agent"]=m.USER_AGENT,!l.headers["x-goog-api-client"]){const o=e.version.replace(/^v/,"");l.headers["x-goog-api-client"]=`gl-node/${o}`}}return l}request(l){return l=this.configure(l),(0,s.validate)(l),this.instance.request(l).catch(a=>{throw this.processError(a)})}get defaults(){return this.instance.defaults}set defaults(l){this.instance.defaults=l}processError(l){const a=l.response,o=l,h=a?a.data:null;return a&&h&&h.error&&a.status!==200?typeof h.error=="string"?(o.message=h.error,o.status=a.status):Array.isArray(h.error.errors)?(o.message=h.error.errors.map(v=>v.message).join(`
`),o.code=h.error.code,o.errors=h.error.errors):(o.message=h.error.message,o.code=h.error.code):a&&a.status>=400&&(o.message=h,o.status=a.status),o}}return transporters.DefaultTransporter=m,m.USER_AGENT=`${g}/${p.version}`,transporters}var computeclient={},oauth2client={},safeBuffer={exports:{}},buffer={},ieee754={};var hasRequiredIeee754;function requireIeee754(){return hasRequiredIeee754||(hasRequiredIeee754=1,ieee754.read=function(e,t,s,p,g){var m,d,l=g*8-p-1,a=(1<<l)-1,o=a>>1,h=-7,v=s?g-1:0,_=s?-1:1,y=e[t+v];for(v+=_,m=y&(1<<-h)-1,y>>=-h,h+=l;h>0;m=m*256+e[t+v],v+=_,h-=8);for(d=m&(1<<-h)-1,m>>=-h,h+=p;h>0;d=d*256+e[t+v],v+=_,h-=8);if(m===0)m=1-o;else{if(m===a)return d?NaN:(y?-1:1)*(1/0);d=d+Math.pow(2,p),m=m-o}return(y?-1:1)*d*Math.pow(2,m-p)},ieee754.write=function(e,t,s,p,g,m){var d,l,a,o=m*8-g-1,h=(1<<o)-1,v=h>>1,_=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=p?0:m-1,w=p?1:-1,T=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,d=h):(d=Math.floor(Math.log(t)/Math.LN2),t*(a=Math.pow(2,-d))<1&&(d--,a*=2),d+v>=1?t+=_/a:t+=_*Math.pow(2,1-v),t*a>=2&&(d++,a/=2),d+v>=h?(l=0,d=h):d+v>=1?(l=(t*a-1)*Math.pow(2,g),d=d+v):(l=t*Math.pow(2,v-1)*Math.pow(2,g),d=0));g>=8;e[s+y]=l&255,y+=w,l/=256,g-=8);for(d=d<<g|l,o+=g;o>0;e[s+y]=d&255,y+=w,d/=256,o-=8);e[s+y-w]|=T*128}),ieee754}var hasRequiredBuffer;function requireBuffer(){return hasRequiredBuffer||(hasRequiredBuffer=1,(function(e){var t=requireBase64Js(),s=requireIeee754(),p=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=E,e.INSPECT_MAX_BYTES=50;var g=2147483647;e.kMaxLength=g,l.TYPED_ARRAY_SUPPORT=m(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function m(){try{var ie=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(ie,u),ie.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function d(ie){if(ie>g)throw new RangeError('The value "'+ie+'" is invalid for option "size"');var u=new Uint8Array(ie);return Object.setPrototypeOf(u,l.prototype),u}function l(ie,u,P){if(typeof ie=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(ie)}return a(ie,u,P)}l.poolSize=8192;function a(ie,u,P){if(typeof ie=="string")return _(ie,u);if(ArrayBuffer.isView(ie))return w(ie);if(ie==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie);if(V(ie,ArrayBuffer)||ie&&V(ie.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(V(ie,SharedArrayBuffer)||ie&&V(ie.buffer,SharedArrayBuffer)))return T(ie,u,P);if(typeof ie=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var M=ie.valueOf&&ie.valueOf();if(M!=null&&M!==ie)return l.from(M,u,P);var n=I(ie);if(n)return n;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ie[Symbol.toPrimitive]=="function")return l.from(ie[Symbol.toPrimitive]("string"),u,P);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie)}l.from=function(ie,u,P){return a(ie,u,P)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function o(ie){if(typeof ie!="number")throw new TypeError('"size" argument must be of type number');if(ie<0)throw new RangeError('The value "'+ie+'" is invalid for option "size"')}function h(ie,u,P){return o(ie),ie<=0?d(ie):u!==void 0?typeof P=="string"?d(ie).fill(u,P):d(ie).fill(u):d(ie)}l.alloc=function(ie,u,P){return h(ie,u,P)};function v(ie){return o(ie),d(ie<0?0:O(ie)|0)}l.allocUnsafe=function(ie){return v(ie)},l.allocUnsafeSlow=function(ie){return v(ie)};function _(ie,u){if((typeof u!="string"||u==="")&&(u="utf8"),!l.isEncoding(u))throw new TypeError("Unknown encoding: "+u);var P=C(ie,u)|0,M=d(P),n=M.write(ie,u);return n!==P&&(M=M.slice(0,n)),M}function y(ie){for(var u=ie.length<0?0:O(ie.length)|0,P=d(u),M=0;M<u;M+=1)P[M]=ie[M]&255;return P}function w(ie){if(V(ie,Uint8Array)){var u=new Uint8Array(ie);return T(u.buffer,u.byteOffset,u.byteLength)}return y(ie)}function T(ie,u,P){if(u<0||ie.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(ie.byteLength<u+(P||0))throw new RangeError('"length" is outside of buffer bounds');var M;return u===void 0&&P===void 0?M=new Uint8Array(ie):P===void 0?M=new Uint8Array(ie,u):M=new Uint8Array(ie,u,P),Object.setPrototypeOf(M,l.prototype),M}function I(ie){if(l.isBuffer(ie)){var u=O(ie.length)|0,P=d(u);return P.length===0||ie.copy(P,0,0,u),P}if(ie.length!==void 0)return typeof ie.length!="number"||ne(ie.length)?d(0):y(ie);if(ie.type==="Buffer"&&Array.isArray(ie.data))return y(ie.data)}function O(ie){if(ie>=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g.toString(16)+" bytes");return ie|0}function E(ie){return+ie!=ie&&(ie=0),l.alloc(+ie)}l.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==l.prototype},l.compare=function(u,P){if(V(u,Uint8Array)&&(u=l.from(u,u.offset,u.byteLength)),V(P,Uint8Array)&&(P=l.from(P,P.offset,P.byteLength)),!l.isBuffer(u)||!l.isBuffer(P))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===P)return 0;for(var M=u.length,n=P.length,L=0,U=Math.min(M,n);L<U;++L)if(u[L]!==P[L]){M=u[L],n=P[L];break}return M<n?-1:n<M?1:0},l.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(u,P){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return l.alloc(0);var M;if(P===void 0)for(P=0,M=0;M<u.length;++M)P+=u[M].length;var n=l.allocUnsafe(P),L=0;for(M=0;M<u.length;++M){var U=u[M];if(V(U,Uint8Array))L+U.length>n.length?l.from(U).copy(n,L):Uint8Array.prototype.set.call(n,U,L);else if(l.isBuffer(U))U.copy(n,L);else throw new TypeError('"list" argument must be an Array of Buffers');L+=U.length}return n};function C(ie,u){if(l.isBuffer(ie))return ie.length;if(ArrayBuffer.isView(ie)||V(ie,ArrayBuffer))return ie.byteLength;if(typeof ie!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ie);var P=ie.length,M=arguments.length>2&&arguments[2]===!0;if(!M&&P===0)return 0;for(var n=!1;;)switch(u){case"ascii":case"latin1":case"binary":return P;case"utf8":case"utf-8":return ge(ie).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P*2;case"hex":return P>>>1;case"base64":return N(ie).length;default:if(n)return M?-1:ge(ie).length;u=(""+u).toLowerCase(),n=!0}}l.byteLength=C;function x(ie,u,P){var M=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((P===void 0||P>this.length)&&(P=this.length),P<=0)||(P>>>=0,u>>>=0,P<=u))return"";for(ie||(ie="utf8");;)switch(ie){case"hex":return ee(this,u,P);case"utf8":case"utf-8":return Q(this,u,P);case"ascii":return ae(this,u,P);case"latin1":case"binary":return ue(this,u,P);case"base64":return z(this,u,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe(this,u,P);default:if(M)throw new TypeError("Unknown encoding: "+ie);ie=(ie+"").toLowerCase(),M=!0}}l.prototype._isBuffer=!0;function j(ie,u,P){var M=ie[u];ie[u]=ie[P],ie[P]=M}l.prototype.swap16=function(){var u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var P=0;P<u;P+=2)j(this,P,P+1);return this},l.prototype.swap32=function(){var u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var P=0;P<u;P+=4)j(this,P,P+3),j(this,P+1,P+2);return this},l.prototype.swap64=function(){var u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var P=0;P<u;P+=8)j(this,P,P+7),j(this,P+1,P+6),j(this,P+2,P+5),j(this,P+3,P+4);return this},l.prototype.toString=function(){var u=this.length;return u===0?"":arguments.length===0?Q(this,0,u):x.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(u){if(!l.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:l.compare(this,u)===0},l.prototype.inspect=function(){var u="",P=e.INSPECT_MAX_BYTES;return u=this.toString("hex",0,P).replace(/(.{2})/g,"$1 ").trim(),this.length>P&&(u+=" ... "),"<Buffer "+u+">"},p&&(l.prototype[p]=l.prototype.inspect),l.prototype.compare=function(u,P,M,n,L){if(V(u,Uint8Array)&&(u=l.from(u,u.offset,u.byteLength)),!l.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(P===void 0&&(P=0),M===void 0&&(M=u?u.length:0),n===void 0&&(n=0),L===void 0&&(L=this.length),P<0||M>u.length||n<0||L>this.length)throw new RangeError("out of range index");if(n>=L&&P>=M)return 0;if(n>=L)return-1;if(P>=M)return 1;if(P>>>=0,M>>>=0,n>>>=0,L>>>=0,this===u)return 0;for(var U=L-n,X=M-P,me=Math.min(U,X),Ie=this.slice(n,L),Le=u.slice(P,M),ke=0;ke<me;++ke)if(Ie[ke]!==Le[ke]){U=Ie[ke],X=Le[ke];break}return U<X?-1:X<U?1:0};function D(ie,u,P,M,n){if(ie.length===0)return-1;if(typeof P=="string"?(M=P,P=0):P>2147483647?P=2147483647:P<-2147483648&&(P=-2147483648),P=+P,ne(P)&&(P=n?0:ie.length-1),P<0&&(P=ie.length+P),P>=ie.length){if(n)return-1;P=ie.length-1}else if(P<0)if(n)P=0;else return-1;if(typeof u=="string"&&(u=l.from(u,M)),l.isBuffer(u))return u.length===0?-1:k(ie,u,P,M,n);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(ie,u,P):Uint8Array.prototype.lastIndexOf.call(ie,u,P):k(ie,[u],P,M,n);throw new TypeError("val must be string, number or Buffer")}function k(ie,u,P,M,n){var L=1,U=ie.length,X=u.length;if(M!==void 0&&(M=String(M).toLowerCase(),M==="ucs2"||M==="ucs-2"||M==="utf16le"||M==="utf-16le")){if(ie.length<2||u.length<2)return-1;L=2,U/=2,X/=2,P/=2}function me(nt,bt){return L===1?nt[bt]:nt.readUInt16BE(bt*L)}var Ie;if(n){var Le=-1;for(Ie=P;Ie<U;Ie++)if(me(ie,Ie)===me(u,Le===-1?0:Ie-Le)){if(Le===-1&&(Le=Ie),Ie-Le+1===X)return Le*L}else Le!==-1&&(Ie-=Ie-Le),Le=-1}else for(P+X>U&&(P=U-X),Ie=P;Ie>=0;Ie--){for(var ke=!0,ze=0;ze<X;ze++)if(me(ie,Ie+ze)!==me(u,ze)){ke=!1;break}if(ke)return Ie}return-1}l.prototype.includes=function(u,P,M){return this.indexOf(u,P,M)!==-1},l.prototype.indexOf=function(u,P,M){return D(this,u,P,M,!0)},l.prototype.lastIndexOf=function(u,P,M){return D(this,u,P,M,!1)};function q(ie,u,P,M){P=Number(P)||0;var n=ie.length-P;M?(M=Number(M),M>n&&(M=n)):M=n;var L=u.length;M>L/2&&(M=L/2);for(var U=0;U<M;++U){var X=parseInt(u.substr(U*2,2),16);if(ne(X))return U;ie[P+U]=X}return U}function G(ie,u,P,M){return A(ge(u,ie.length-P),ie,P,M)}function $(ie,u,P,M){return A(J(u),ie,P,M)}function W(ie,u,P,M){return A(N(u),ie,P,M)}function K(ie,u,P,M){return A(c(u,ie.length-P),ie,P,M)}l.prototype.write=function(u,P,M,n){if(P===void 0)n="utf8",M=this.length,P=0;else if(M===void 0&&typeof P=="string")n=P,M=this.length,P=0;else if(isFinite(P))P=P>>>0,isFinite(M)?(M=M>>>0,n===void 0&&(n="utf8")):(n=M,M=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var L=this.length-P;if((M===void 0||M>L)&&(M=L),u.length>0&&(M<0||P<0)||P>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var U=!1;;)switch(n){case"hex":return q(this,u,P,M);case"utf8":case"utf-8":return G(this,u,P,M);case"ascii":case"latin1":case"binary":return $(this,u,P,M);case"base64":return W(this,u,P,M);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,u,P,M);default:if(U)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),U=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(ie,u,P){return u===0&&P===ie.length?t.fromByteArray(ie):t.fromByteArray(ie.slice(u,P))}function Q(ie,u,P){P=Math.min(ie.length,P);for(var M=[],n=u;n<P;){var L=ie[n],U=null,X=L>239?4:L>223?3:L>191?2:1;if(n+X<=P){var me,Ie,Le,ke;switch(X){case 1:L<128&&(U=L);break;case 2:me=ie[n+1],(me&192)===128&&(ke=(L&31)<<6|me&63,ke>127&&(U=ke));break;case 3:me=ie[n+1],Ie=ie[n+2],(me&192)===128&&(Ie&192)===128&&(ke=(L&15)<<12|(me&63)<<6|Ie&63,ke>2047&&(ke<55296||ke>57343)&&(U=ke));break;case 4:me=ie[n+1],Ie=ie[n+2],Le=ie[n+3],(me&192)===128&&(Ie&192)===128&&(Le&192)===128&&(ke=(L&15)<<18|(me&63)<<12|(Ie&63)<<6|Le&63,ke>65535&&ke<1114112&&(U=ke))}}U===null?(U=65533,X=1):U>65535&&(U-=65536,M.push(U>>>10&1023|55296),U=56320|U&1023),M.push(U),n+=X}return te(M)}var Y=4096;function te(ie){var u=ie.length;if(u<=Y)return String.fromCharCode.apply(String,ie);for(var P="",M=0;M<u;)P+=String.fromCharCode.apply(String,ie.slice(M,M+=Y));return P}function ae(ie,u,P){var M="";P=Math.min(ie.length,P);for(var n=u;n<P;++n)M+=String.fromCharCode(ie[n]&127);return M}function ue(ie,u,P){var M="";P=Math.min(ie.length,P);for(var n=u;n<P;++n)M+=String.fromCharCode(ie[n]);return M}function ee(ie,u,P){var M=ie.length;(!u||u<0)&&(u=0),(!P||P<0||P>M)&&(P=M);for(var n="",L=u;L<P;++L)n+=ce[ie[L]];return n}function oe(ie,u,P){for(var M=ie.slice(u,P),n="",L=0;L<M.length-1;L+=2)n+=String.fromCharCode(M[L]+M[L+1]*256);return n}l.prototype.slice=function(u,P){var M=this.length;u=~~u,P=P===void 0?M:~~P,u<0?(u+=M,u<0&&(u=0)):u>M&&(u=M),P<0?(P+=M,P<0&&(P=0)):P>M&&(P=M),P<u&&(P=u);var n=this.subarray(u,P);return Object.setPrototypeOf(n,l.prototype),n};function de(ie,u,P){if(ie%1!==0||ie<0)throw new RangeError("offset is not uint");if(ie+u>P)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(u,P,M){u=u>>>0,P=P>>>0,M||de(u,P,this.length);for(var n=this[u],L=1,U=0;++U<P&&(L*=256);)n+=this[u+U]*L;return n},l.prototype.readUintBE=l.prototype.readUIntBE=function(u,P,M){u=u>>>0,P=P>>>0,M||de(u,P,this.length);for(var n=this[u+--P],L=1;P>0&&(L*=256);)n+=this[u+--P]*L;return n},l.prototype.readUint8=l.prototype.readUInt8=function(u,P){return u=u>>>0,P||de(u,1,this.length),this[u]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(u,P){return u=u>>>0,P||de(u,2,this.length),this[u]|this[u+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(u,P){return u=u>>>0,P||de(u,2,this.length),this[u]<<8|this[u+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(u,P){return u=u>>>0,P||de(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(u,P){return u=u>>>0,P||de(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},l.prototype.readIntLE=function(u,P,M){u=u>>>0,P=P>>>0,M||de(u,P,this.length);for(var n=this[u],L=1,U=0;++U<P&&(L*=256);)n+=this[u+U]*L;return L*=128,n>=L&&(n-=Math.pow(2,8*P)),n},l.prototype.readIntBE=function(u,P,M){u=u>>>0,P=P>>>0,M||de(u,P,this.length);for(var n=P,L=1,U=this[u+--n];n>0&&(L*=256);)U+=this[u+--n]*L;return L*=128,U>=L&&(U-=Math.pow(2,8*P)),U},l.prototype.readInt8=function(u,P){return u=u>>>0,P||de(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},l.prototype.readInt16LE=function(u,P){u=u>>>0,P||de(u,2,this.length);var M=this[u]|this[u+1]<<8;return M&32768?M|4294901760:M},l.prototype.readInt16BE=function(u,P){u=u>>>0,P||de(u,2,this.length);var M=this[u+1]|this[u]<<8;return M&32768?M|4294901760:M},l.prototype.readInt32LE=function(u,P){return u=u>>>0,P||de(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},l.prototype.readInt32BE=function(u,P){return u=u>>>0,P||de(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},l.prototype.readFloatLE=function(u,P){return u=u>>>0,P||de(u,4,this.length),s.read(this,u,!0,23,4)},l.prototype.readFloatBE=function(u,P){return u=u>>>0,P||de(u,4,this.length),s.read(this,u,!1,23,4)},l.prototype.readDoubleLE=function(u,P){return u=u>>>0,P||de(u,8,this.length),s.read(this,u,!0,52,8)},l.prototype.readDoubleBE=function(u,P){return u=u>>>0,P||de(u,8,this.length),s.read(this,u,!1,52,8)};function he(ie,u,P,M,n,L){if(!l.isBuffer(ie))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>n||u<L)throw new RangeError('"value" argument is out of bounds');if(P+M>ie.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(u,P,M,n){if(u=+u,P=P>>>0,M=M>>>0,!n){var L=Math.pow(2,8*M)-1;he(this,u,P,M,L,0)}var U=1,X=0;for(this[P]=u&255;++X<M&&(U*=256);)this[P+X]=u/U&255;return P+M},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(u,P,M,n){if(u=+u,P=P>>>0,M=M>>>0,!n){var L=Math.pow(2,8*M)-1;he(this,u,P,M,L,0)}var U=M-1,X=1;for(this[P+U]=u&255;--U>=0&&(X*=256);)this[P+U]=u/X&255;return P+M},l.prototype.writeUint8=l.prototype.writeUInt8=function(u,P,M){return u=+u,P=P>>>0,M||he(this,u,P,1,255,0),this[P]=u&255,P+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(u,P,M){return u=+u,P=P>>>0,M||he(this,u,P,2,65535,0),this[P]=u&255,this[P+1]=u>>>8,P+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(u,P,M){return u=+u,P=P>>>0,M||he(this,u,P,2,65535,0),this[P]=u>>>8,this[P+1]=u&255,P+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(u,P,M){return u=+u,P=P>>>0,M||he(this,u,P,4,4294967295,0),this[P+3]=u>>>24,this[P+2]=u>>>16,this[P+1]=u>>>8,this[P]=u&255,P+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(u,P,M){return u=+u,P=P>>>0,M||he(this,u,P,4,4294967295,0),this[P]=u>>>24,this[P+1]=u>>>16,this[P+2]=u>>>8,this[P+3]=u&255,P+4},l.prototype.writeIntLE=function(u,P,M,n){if(u=+u,P=P>>>0,!n){var L=Math.pow(2,8*M-1);he(this,u,P,M,L-1,-L)}var U=0,X=1,me=0;for(this[P]=u&255;++U<M&&(X*=256);)u<0&&me===0&&this[P+U-1]!==0&&(me=1),this[P+U]=(u/X>>0)-me&255;return P+M},l.prototype.writeIntBE=function(u,P,M,n){if(u=+u,P=P>>>0,!n){var L=Math.pow(2,8*M-1);he(this,u,P,M,L-1,-L)}var U=M-1,X=1,me=0;for(this[P+U]=u&255;--U>=0&&(X*=256);)u<0&&me===0&&this[P+U+1]!==0&&(me=1),this[P+U]=(u/X>>0)-me&255;return P+M},l.prototype.writeInt8=function(u,P,M){return u=+u,P=P>>>0,M||he(this,u,P,1,127,-128),u<0&&(u=255+u+1),this[P]=u&255,P+1},l.prototype.writeInt16LE=function(u,P,M){return u=+u,P=P>>>0,M||he(this,u,P,2,32767,-32768),this[P]=u&255,this[P+1]=u>>>8,P+2},l.prototype.writeInt16BE=function(u,P,M){return u=+u,P=P>>>0,M||he(this,u,P,2,32767,-32768),this[P]=u>>>8,this[P+1]=u&255,P+2},l.prototype.writeInt32LE=function(u,P,M){return u=+u,P=P>>>0,M||he(this,u,P,4,2147483647,-2147483648),this[P]=u&255,this[P+1]=u>>>8,this[P+2]=u>>>16,this[P+3]=u>>>24,P+4},l.prototype.writeInt32BE=function(u,P,M){return u=+u,P=P>>>0,M||he(this,u,P,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[P]=u>>>24,this[P+1]=u>>>16,this[P+2]=u>>>8,this[P+3]=u&255,P+4};function Ee(ie,u,P,M,n,L){if(P+M>ie.length)throw new RangeError("Index out of range");if(P<0)throw new RangeError("Index out of range")}function fe(ie,u,P,M,n){return u=+u,P=P>>>0,n||Ee(ie,u,P,4),s.write(ie,u,P,M,23,4),P+4}l.prototype.writeFloatLE=function(u,P,M){return fe(this,u,P,!0,M)},l.prototype.writeFloatBE=function(u,P,M){return fe(this,u,P,!1,M)};function Se(ie,u,P,M,n){return u=+u,P=P>>>0,n||Ee(ie,u,P,8),s.write(ie,u,P,M,52,8),P+8}l.prototype.writeDoubleLE=function(u,P,M){return Se(this,u,P,!0,M)},l.prototype.writeDoubleBE=function(u,P,M){return Se(this,u,P,!1,M)},l.prototype.copy=function(u,P,M,n){if(!l.isBuffer(u))throw new TypeError("argument should be a Buffer");if(M||(M=0),!n&&n!==0&&(n=this.length),P>=u.length&&(P=u.length),P||(P=0),n>0&&n<M&&(n=M),n===M||u.length===0||this.length===0)return 0;if(P<0)throw new RangeError("targetStart out of bounds");if(M<0||M>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),u.length-P<n-M&&(n=u.length-P+M);var L=n-M;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(P,M,n):Uint8Array.prototype.set.call(u,this.subarray(M,n),P),L},l.prototype.fill=function(u,P,M,n){if(typeof u=="string"){if(typeof P=="string"?(n=P,P=0,M=this.length):typeof M=="string"&&(n=M,M=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(u.length===1){var L=u.charCodeAt(0);(n==="utf8"&&L<128||n==="latin1")&&(u=L)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(P<0||this.length<P||this.length<M)throw new RangeError("Out of range index");if(M<=P)return this;P=P>>>0,M=M===void 0?this.length:M>>>0,u||(u=0);var U;if(typeof u=="number")for(U=P;U<M;++U)this[U]=u;else{var X=l.isBuffer(u)?u:l.from(u,n),me=X.length;if(me===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(U=0;U<M-P;++U)this[U+P]=X[U%me]}return this};var be=/[^+/0-9A-Za-z-_]/g;function Oe(ie){if(ie=ie.split("=")[0],ie=ie.trim().replace(be,""),ie.length<2)return"";for(;ie.length%4!==0;)ie=ie+"=";return ie}function ge(ie,u){u=u||1/0;for(var P,M=ie.length,n=null,L=[],U=0;U<M;++U){if(P=ie.charCodeAt(U),P>55295&&P<57344){if(!n){if(P>56319){(u-=3)>-1&&L.push(239,191,189);continue}else if(U+1===M){(u-=3)>-1&&L.push(239,191,189);continue}n=P;continue}if(P<56320){(u-=3)>-1&&L.push(239,191,189),n=P;continue}P=(n-55296<<10|P-56320)+65536}else n&&(u-=3)>-1&&L.push(239,191,189);if(n=null,P<128){if((u-=1)<0)break;L.push(P)}else if(P<2048){if((u-=2)<0)break;L.push(P>>6|192,P&63|128)}else if(P<65536){if((u-=3)<0)break;L.push(P>>12|224,P>>6&63|128,P&63|128)}else if(P<1114112){if((u-=4)<0)break;L.push(P>>18|240,P>>12&63|128,P>>6&63|128,P&63|128)}else throw new Error("Invalid code point")}return L}function J(ie){for(var u=[],P=0;P<ie.length;++P)u.push(ie.charCodeAt(P)&255);return u}function c(ie,u){for(var P,M,n,L=[],U=0;U<ie.length&&!((u-=2)<0);++U)P=ie.charCodeAt(U),M=P>>8,n=P%256,L.push(n),L.push(M);return L}function N(ie){return t.toByteArray(Oe(ie))}function A(ie,u,P,M){for(var n=0;n<M&&!(n+P>=u.length||n>=ie.length);++n)u[n+P]=ie[n];return n}function V(ie,u){return ie instanceof u||ie!=null&&ie.constructor!=null&&ie.constructor.name!=null&&ie.constructor.name===u.name}function ne(ie){return ie!==ie}var ce=(function(){for(var ie="0123456789abcdef",u=new Array(256),P=0;P<16;++P)for(var M=P*16,n=0;n<16;++n)u[M+n]=ie[P]+ie[n];return u})()})(buffer)),buffer}var hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,(function(e,t){var s=requireBuffer(),p=s.Buffer;function g(d,l){for(var a in d)l[a]=d[a]}p.from&&p.alloc&&p.allocUnsafe&&p.allocUnsafeSlow?e.exports=s:(g(s,t),t.Buffer=m);function m(d,l,a){return p(d,l,a)}m.prototype=Object.create(p.prototype),g(p,m),m.from=function(d,l,a){if(typeof d=="number")throw new TypeError("Argument must not be a number");return p(d,l,a)},m.alloc=function(d,l,a){if(typeof d!="number")throw new TypeError("Argument must be a number");var o=p(d);return l!==void 0?typeof a=="string"?o.fill(l,a):o.fill(l):o.fill(0),o},m.allocUnsafe=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return p(d)},m.allocUnsafeSlow=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return s.SlowBuffer(d)}})(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var paramBytesForAlg_1,hasRequiredParamBytesForAlg;function requireParamBytesForAlg(){if(hasRequiredParamBytesForAlg)return paramBytesForAlg_1;hasRequiredParamBytesForAlg=1;function e(p){var g=(p/8|0)+(p%8===0?0:1);return g}var t={ES256:e(256),ES384:e(384),ES512:e(521)};function s(p){var g=t[p];if(g)return g;throw new Error('Unknown algorithm "'+p+'"')}return paramBytesForAlg_1=s,paramBytesForAlg_1}var ecdsaSigFormatter,hasRequiredEcdsaSigFormatter;function requireEcdsaSigFormatter(){if(hasRequiredEcdsaSigFormatter)return ecdsaSigFormatter;hasRequiredEcdsaSigFormatter=1;var e=requireSafeBuffer().Buffer,t=requireParamBytesForAlg(),s=128,p=0,g=32,m=16,d=2,l=m|g|p<<6,a=d|p<<6;function o(w){return w.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function h(w){if(e.isBuffer(w))return w;if(typeof w=="string")return e.from(w,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function v(w,T){w=h(w);var I=t(T),O=I+1,E=w.length,C=0;if(w[C++]!==l)throw new Error('Could not find expected "seq"');var x=w[C++];if(x===(s|1)&&(x=w[C++]),E-C<x)throw new Error('"seq" specified length of "'+x+'", only "'+(E-C)+'" remaining');if(w[C++]!==a)throw new Error('Could not find expected "int" for "r"');var j=w[C++];if(E-C-2<j)throw new Error('"r" specified length of "'+j+'", only "'+(E-C-2)+'" available');if(O<j)throw new Error('"r" specified length of "'+j+'", max of "'+O+'" is acceptable');var D=C;if(C+=j,w[C++]!==a)throw new Error('Could not find expected "int" for "s"');var k=w[C++];if(E-C!==k)throw new Error('"s" specified length of "'+k+'", expected "'+(E-C)+'"');if(O<k)throw new Error('"s" specified length of "'+k+'", max of "'+O+'" is acceptable');var q=C;if(C+=k,C!==E)throw new Error('Expected to consume entire buffer, but "'+(E-C)+'" bytes remain');var G=I-j,$=I-k,W=e.allocUnsafe(G+j+$+k);for(C=0;C<G;++C)W[C]=0;w.copy(W,C,D+Math.max(-G,0),D+j),C=I;for(var K=C;C<K+$;++C)W[C]=0;return w.copy(W,C,q+Math.max(-$,0),q+k),W=W.toString("base64"),W=o(W),W}function _(w,T,I){for(var O=0;T+O<I&&w[T+O]===0;)++O;var E=w[T+O]>=s;return E&&--O,O}function y(w,T){w=h(w);var I=t(T),O=w.length;if(O!==I*2)throw new TypeError('"'+T+'" signatures must be "'+I*2+'" bytes, saw "'+O+'"');var E=_(w,0,I),C=_(w,I,w.length),x=I-E,j=I-C,D=2+x+1+1+j,k=D<s,q=e.allocUnsafe((k?2:3)+D),G=0;return q[G++]=l,k?q[G++]=D:(q[G++]=s|1,q[G++]=D&255),q[G++]=a,q[G++]=x,E<0?(q[G++]=0,G+=w.copy(q,G,0,I)):G+=w.copy(q,G,E,I),q[G++]=a,q[G++]=j,C<0?(q[G++]=0,w.copy(q,G,I)):w.copy(q,G,I+C),q}return ecdsaSigFormatter={derToJose:v,joseToDer:y},ecdsaSigFormatter}var authclient={},util$8={},hasRequiredUtil$8;function requireUtil$8(){if(hasRequiredUtil$8)return util$8;hasRequiredUtil$8=1;var e=util$8&&util$8.__classPrivateFieldGet||function(a,o,h,v){if(h==="a"&&!v)throw new TypeError("Private accessor was defined without a getter");if(typeof o=="function"?a!==o||!v:!o.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return h==="m"?v:h==="a"?v.call(a):v?v.value:o.get(a)},t,s,p,g;Object.defineProperty(util$8,"__esModule",{value:!0}),util$8.LRUCache=void 0,util$8.snakeToCamel=m,util$8.originalOrCamelOptions=d;function m(a){return a.replace(/([_][^_])/g,o=>o.slice(1).toUpperCase())}function d(a){function o(h){var v;const _=a||{};return(v=_[h])!==null&&v!==void 0?v:_[m(h)]}return{get:o}}class l{constructor(o){t.add(this),s.set(this,new Map),this.capacity=o.capacity,this.maxAge=o.maxAge}set(o,h){e(this,t,"m",p).call(this,o,h),e(this,t,"m",g).call(this)}get(o){const h=e(this,s,"f").get(o);if(h)return e(this,t,"m",p).call(this,o,h.value),e(this,t,"m",g).call(this),h.value}}return util$8.LRUCache=l,s=new WeakMap,t=new WeakSet,p=function(o,h){e(this,s,"f").delete(o),e(this,s,"f").set(o,{value:h,lastAccessed:Date.now()})},g=function(){const o=this.maxAge?Date.now()-this.maxAge:0;let h=e(this,s,"f").entries().next();for(;!h.done&&(e(this,s,"f").size>this.capacity||h.value[1].lastAccessed<o);)e(this,s,"f").delete(h.value[0]),h=e(this,s,"f").entries().next()},util$8}var hasRequiredAuthclient;function requireAuthclient(){return hasRequiredAuthclient||(hasRequiredAuthclient=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AuthClient=e.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=e.DEFAULT_UNIVERSE=void 0;const t=require$$1$3,s=requireSrc$f(),p=requireTransporters(),g=requireUtil$8();e.DEFAULT_UNIVERSE="googleapis.com",e.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=3e5;class m extends t.EventEmitter{constructor(l={}){var a,o,h,v,_;super(),this.credentials={},this.eagerRefreshThresholdMillis=e.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS,this.forceRefreshOnFailure=!1,this.universeDomain=e.DEFAULT_UNIVERSE;const y=(0,g.originalOrCamelOptions)(l);this.apiKey=l.apiKey,this.projectId=(a=y.get("project_id"))!==null&&a!==void 0?a:null,this.quotaProjectId=y.get("quota_project_id"),this.credentials=(o=y.get("credentials"))!==null&&o!==void 0?o:{},this.universeDomain=(h=y.get("universe_domain"))!==null&&h!==void 0?h:e.DEFAULT_UNIVERSE,this.transporter=(v=l.transporter)!==null&&v!==void 0?v:new p.DefaultTransporter,l.transporterOptions&&(this.transporter.defaults=l.transporterOptions),l.eagerRefreshThresholdMillis&&(this.eagerRefreshThresholdMillis=l.eagerRefreshThresholdMillis),this.forceRefreshOnFailure=(_=l.forceRefreshOnFailure)!==null&&_!==void 0?_:!1}get gaxios(){return this.transporter instanceof s.Gaxios?this.transporter:this.transporter instanceof p.DefaultTransporter?this.transporter.instance:"instance"in this.transporter&&this.transporter.instance instanceof s.Gaxios?this.transporter.instance:null}setCredentials(l){this.credentials=l}addSharedMetadataHeaders(l){return!l["x-goog-user-project"]&&this.quotaProjectId&&(l["x-goog-user-project"]=this.quotaProjectId),l}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}}e.AuthClient=m})(authclient)),authclient}var loginticket={},hasRequiredLoginticket;function requireLoginticket(){if(hasRequiredLoginticket)return loginticket;hasRequiredLoginticket=1,Object.defineProperty(loginticket,"__esModule",{value:!0}),loginticket.LoginTicket=void 0;class e{constructor(s,p){this.envelope=s,this.payload=p}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){const s=this.getPayload();return s&&s.sub?s.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}}return loginticket.LoginTicket=e,loginticket}var hasRequiredOauth2client;function requireOauth2client(){if(hasRequiredOauth2client)return oauth2client;hasRequiredOauth2client=1,Object.defineProperty(oauth2client,"__esModule",{value:!0}),oauth2client.OAuth2Client=oauth2client.ClientAuthentication=oauth2client.CertificateFormat=oauth2client.CodeChallengeMethod=void 0;const e=requireSrc$f(),t=require$$1$3,s=require$$1$3,p=requireEcdsaSigFormatter(),g=requireCrypto(),m=requireAuthclient(),d=requireLoginticket();var l;(function(v){v.Plain="plain",v.S256="S256"})(l||(oauth2client.CodeChallengeMethod=l={}));var a;(function(v){v.PEM="PEM",v.JWK="JWK"})(a||(oauth2client.CertificateFormat=a={}));var o;(function(v){v.ClientSecretPost="ClientSecretPost",v.ClientSecretBasic="ClientSecretBasic",v.None="None"})(o||(oauth2client.ClientAuthentication=o={}));class h extends m.AuthClient{constructor(_,y,w){const T=_&&typeof _=="object"?_:{clientId:_,clientSecret:y,redirectUri:w};super(T),this.certificateCache={},this.certificateExpiry=null,this.certificateCacheFormat=a.PEM,this.refreshTokenPromises=new Map,this._clientId=T.clientId,this._clientSecret=T.clientSecret,this.redirectUri=T.redirectUri,this.endpoints={tokenInfoUrl:"https://oauth2.googleapis.com/tokeninfo",oauth2AuthBaseUrl:"https://accounts.google.com/o/oauth2/v2/auth",oauth2TokenUrl:"https://oauth2.googleapis.com/token",oauth2RevokeUrl:"https://oauth2.googleapis.com/revoke",oauth2FederatedSignonPemCertsUrl:"https://www.googleapis.com/oauth2/v1/certs",oauth2FederatedSignonJwkCertsUrl:"https://www.googleapis.com/oauth2/v3/certs",oauth2IapPublicKeyUrl:"https://www.gstatic.com/iap/verify/public_key",...T.endpoints},this.clientAuthentication=T.clientAuthentication||o.ClientSecretPost,this.issuers=T.issuers||["accounts.google.com","https://accounts.google.com",this.universeDomain]}generateAuthUrl(_={}){if(_.code_challenge_method&&!_.code_challenge)throw new Error("If a code_challenge_method is provided, code_challenge must be included.");return _.response_type=_.response_type||"code",_.client_id=_.client_id||this._clientId,_.redirect_uri=_.redirect_uri||this.redirectUri,Array.isArray(_.scope)&&(_.scope=_.scope.join(" ")),this.endpoints.oauth2AuthBaseUrl.toString()+"?"+t.stringify(_)}generateCodeVerifier(){throw new Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}async generateCodeVerifierAsync(){const _=(0,g.createCrypto)(),w=_.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),I=(await _.sha256DigestBase64(w)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:w,codeChallenge:I}}getToken(_,y){const w=typeof _=="string"?{code:_}:_;if(y)this.getTokenAsync(w).then(T=>y(null,T.tokens,T.res),T=>y(T,null,T.response));else return this.getTokenAsync(w)}async getTokenAsync(_){const y=this.endpoints.oauth2TokenUrl.toString(),w={"Content-Type":"application/x-www-form-urlencoded"},T={client_id:_.client_id||this._clientId,code_verifier:_.codeVerifier,code:_.code,grant_type:"authorization_code",redirect_uri:_.redirect_uri||this.redirectUri};if(this.clientAuthentication===o.ClientSecretBasic){const E=Buffer.from(`${this._clientId}:${this._clientSecret}`);w.Authorization=`Basic ${E.toString("base64")}`}this.clientAuthentication===o.ClientSecretPost&&(T.client_secret=this._clientSecret);const I=await this.transporter.request({...h.RETRY_CONFIG,method:"POST",url:y,data:t.stringify(T),headers:w}),O=I.data;return I.data&&I.data.expires_in&&(O.expiry_date=new Date().getTime()+I.data.expires_in*1e3,delete O.expires_in),this.emit("tokens",O),{tokens:O,res:I}}async refreshToken(_){if(!_)return this.refreshTokenNoCache(_);if(this.refreshTokenPromises.has(_))return this.refreshTokenPromises.get(_);const y=this.refreshTokenNoCache(_).then(w=>(this.refreshTokenPromises.delete(_),w),w=>{throw this.refreshTokenPromises.delete(_),w});return this.refreshTokenPromises.set(_,y),y}async refreshTokenNoCache(_){var y;if(!_)throw new Error("No refresh token is set.");const w=this.endpoints.oauth2TokenUrl.toString(),T={refresh_token:_,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"};let I;try{I=await this.transporter.request({...h.RETRY_CONFIG,method:"POST",url:w,data:t.stringify(T),headers:{"Content-Type":"application/x-www-form-urlencoded"}})}catch(E){throw E instanceof e.GaxiosError&&E.message==="invalid_grant"&&(!((y=E.response)===null||y===void 0)&&y.data)&&/ReAuth/i.test(E.response.data.error_description)&&(E.message=JSON.stringify(E.response.data)),E}const O=I.data;return I.data&&I.data.expires_in&&(O.expiry_date=new Date().getTime()+I.data.expires_in*1e3,delete O.expires_in),this.emit("tokens",O),{tokens:O,res:I}}refreshAccessToken(_){if(_)this.refreshAccessTokenAsync().then(y=>_(null,y.credentials,y.res),_);else return this.refreshAccessTokenAsync()}async refreshAccessTokenAsync(){const _=await this.refreshToken(this.credentials.refresh_token),y=_.tokens;return y.refresh_token=this.credentials.refresh_token,this.credentials=y,{credentials:this.credentials,res:_.res}}getAccessToken(_){if(_)this.getAccessTokenAsync().then(y=>_(null,y.token,y.res),_);else return this.getAccessTokenAsync()}async getAccessTokenAsync(){if(!this.credentials.access_token||this.isTokenExpiring()){if(!this.credentials.refresh_token)if(this.refreshHandler){const w=await this.processAndValidateRefreshHandler();if(w?.access_token)return this.setCredentials(w),{token:this.credentials.access_token}}else throw new Error("No refresh token or refresh handler callback is set.");const y=await this.refreshAccessTokenAsync();if(!y.credentials||y.credentials&&!y.credentials.access_token)throw new Error("Could not refresh access token.");return{token:y.credentials.access_token,res:y.res}}else return{token:this.credentials.access_token}}async getRequestHeaders(_){return(await this.getRequestMetadataAsync(_)).headers}async getRequestMetadataAsync(_){const y=this.credentials;if(!y.access_token&&!y.refresh_token&&!this.apiKey&&!this.refreshHandler)throw new Error("No access, refresh token, API key or refresh handler callback is set.");if(y.access_token&&!this.isTokenExpiring()){y.token_type=y.token_type||"Bearer";const E={Authorization:y.token_type+" "+y.access_token};return{headers:this.addSharedMetadataHeaders(E)}}if(this.refreshHandler){const E=await this.processAndValidateRefreshHandler();if(E?.access_token){this.setCredentials(E);const C={Authorization:"Bearer "+this.credentials.access_token};return{headers:this.addSharedMetadataHeaders(C)}}}if(this.apiKey)return{headers:{"X-Goog-Api-Key":this.apiKey}};let w=null,T=null;try{w=await this.refreshToken(y.refresh_token),T=w.tokens}catch(E){const C=E;throw C.response&&(C.response.status===403||C.response.status===404)&&(C.message=`Could not refresh access token: ${C.message}`),C}const I=this.credentials;I.token_type=I.token_type||"Bearer",T.refresh_token=I.refresh_token,this.credentials=T;const O={Authorization:I.token_type+" "+T.access_token};return{headers:this.addSharedMetadataHeaders(O),res:w.res}}static getRevokeTokenUrl(_){return new h().getRevokeTokenURL(_).toString()}getRevokeTokenURL(_){const y=new URL(this.endpoints.oauth2RevokeUrl);return y.searchParams.append("token",_),y}revokeToken(_,y){const w={...h.RETRY_CONFIG,url:this.getRevokeTokenURL(_).toString(),method:"POST"};if(y)this.transporter.request(w).then(T=>y(null,T),y);else return this.transporter.request(w)}revokeCredentials(_){if(_)this.revokeCredentialsAsync().then(y=>_(null,y),_);else return this.revokeCredentialsAsync()}async revokeCredentialsAsync(){const _=this.credentials.access_token;if(this.credentials={},_)return this.revokeToken(_);throw new Error("No access token to revoke.")}request(_,y){if(y)this.requestAsync(_).then(w=>y(null,w),w=>y(w,w.response));else return this.requestAsync(_)}async requestAsync(_,y=!1){let w;try{const T=await this.getRequestMetadataAsync(_.url);_.headers=_.headers||{},T.headers&&T.headers["x-goog-user-project"]&&(_.headers["x-goog-user-project"]=T.headers["x-goog-user-project"]),T.headers&&T.headers.Authorization&&(_.headers.Authorization=T.headers.Authorization),this.apiKey&&(_.headers["X-Goog-Api-Key"]=this.apiKey),w=await this.transporter.request(_)}catch(T){const I=T.response;if(I){const O=I.status,E=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),C=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,x=I.config.data instanceof s.Readable,j=O===401||O===403;if(!y&&j&&!x&&E)return await this.refreshAccessTokenAsync(),this.requestAsync(_,!0);if(!y&&j&&!x&&C){const D=await this.processAndValidateRefreshHandler();return D?.access_token&&this.setCredentials(D),this.requestAsync(_,!0)}}throw T}return w}verifyIdToken(_,y){if(y&&typeof y!="function")throw new Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(y)this.verifyIdTokenAsync(_).then(w=>y(null,w),y);else return this.verifyIdTokenAsync(_)}async verifyIdTokenAsync(_){if(!_.idToken)throw new Error("The verifyIdToken method requires an ID Token");const y=await this.getFederatedSignonCertsAsync();return await this.verifySignedJwtWithCertsAsync(_.idToken,y.certs,_.audience,this.issuers,_.maxExpiry)}async getTokenInfo(_){const{data:y}=await this.transporter.request({...h.RETRY_CONFIG,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Bearer ${_}`},url:this.endpoints.tokenInfoUrl.toString()}),w=Object.assign({expiry_date:new Date().getTime()+y.expires_in*1e3,scopes:y.scope.split(" ")},y);return delete w.expires_in,delete w.scope,w}getFederatedSignonCerts(_){if(_)this.getFederatedSignonCertsAsync().then(y=>_(null,y.certs,y.res),_);else return this.getFederatedSignonCertsAsync()}async getFederatedSignonCertsAsync(){const _=new Date().getTime(),y=(0,g.hasBrowserCrypto)()?a.JWK:a.PEM;if(this.certificateExpiry&&_<this.certificateExpiry.getTime()&&this.certificateCacheFormat===y)return{certs:this.certificateCache,format:y};let w,T;switch(y){case a.PEM:T=this.endpoints.oauth2FederatedSignonPemCertsUrl.toString();break;case a.JWK:T=this.endpoints.oauth2FederatedSignonJwkCertsUrl.toString();break;default:throw new Error(`Unsupported certificate format ${y}`)}try{w=await this.transporter.request({...h.RETRY_CONFIG,url:T})}catch(x){throw x instanceof Error&&(x.message=`Failed to retrieve verification certificates: ${x.message}`),x}const I=w?w.headers["cache-control"]:void 0;let O=-1;if(I){const j=new RegExp("max-age=([0-9]*)").exec(I);j&&j.length===2&&(O=Number(j[1])*1e3)}let E={};switch(y){case a.PEM:E=w.data;break;case a.JWK:for(const x of w.data.keys)E[x.kid]=x;break;default:throw new Error(`Unsupported certificate format ${y}`)}const C=new Date;return this.certificateExpiry=O===-1?null:new Date(C.getTime()+O),this.certificateCache=E,this.certificateCacheFormat=y,{certs:E,format:y,res:w}}getIapPublicKeys(_){if(_)this.getIapPublicKeysAsync().then(y=>_(null,y.pubkeys,y.res),_);else return this.getIapPublicKeysAsync()}async getIapPublicKeysAsync(){let _;const y=this.endpoints.oauth2IapPublicKeyUrl.toString();try{_=await this.transporter.request({...h.RETRY_CONFIG,url:y})}catch(w){throw w instanceof Error&&(w.message=`Failed to retrieve verification certificates: ${w.message}`),w}return{pubkeys:_.data,res:_}}verifySignedJwtWithCerts(){throw new Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}async verifySignedJwtWithCertsAsync(_,y,w,T,I){const O=(0,g.createCrypto)();I||(I=h.DEFAULT_MAX_TOKEN_LIFETIME_SECS_);const E=_.split(".");if(E.length!==3)throw new Error("Wrong number of segments in token: "+_);const C=E[0]+"."+E[1];let x=E[2],j,D;try{j=JSON.parse(O.decodeBase64StringUtf8(E[0]))}catch(Q){throw Q instanceof Error&&(Q.message=`Can't parse token envelope: ${E[0]}': ${Q.message}`),Q}if(!j)throw new Error("Can't parse token envelope: "+E[0]);try{D=JSON.parse(O.decodeBase64StringUtf8(E[1]))}catch(Q){throw Q instanceof Error&&(Q.message=`Can't parse token payload '${E[0]}`),Q}if(!D)throw new Error("Can't parse token payload: "+E[1]);if(!Object.prototype.hasOwnProperty.call(y,j.kid))throw new Error("No pem found for envelope: "+JSON.stringify(j));const k=y[j.kid];if(j.alg==="ES256"&&(x=p.joseToDer(x,"ES256").toString("base64")),!await O.verify(k,C,x))throw new Error("Invalid token signature: "+_);if(!D.iat)throw new Error("No issue time in token: "+JSON.stringify(D));if(!D.exp)throw new Error("No expiration time in token: "+JSON.stringify(D));const G=Number(D.iat);if(isNaN(G))throw new Error("iat field using invalid format");const $=Number(D.exp);if(isNaN($))throw new Error("exp field using invalid format");const W=new Date().getTime()/1e3;if($>=W+I)throw new Error("Expiration time too far in future: "+JSON.stringify(D));const K=G-h.CLOCK_SKEW_SECS_,z=$+h.CLOCK_SKEW_SECS_;if(W<K)throw new Error("Token used too early, "+W+" < "+K+": "+JSON.stringify(D));if(W>z)throw new Error("Token used too late, "+W+" > "+z+": "+JSON.stringify(D));if(T&&T.indexOf(D.iss)<0)throw new Error("Invalid issuer, expected one of ["+T+"], but got "+D.iss);if(typeof w<"u"&&w!==null){const Q=D.aud;let Y=!1;if(w.constructor===Array?Y=w.indexOf(Q)>-1:Y=Q===w,!Y)throw new Error("Wrong recipient, payload audience != requiredAudience")}return new d.LoginTicket(j,D)}async processAndValidateRefreshHandler(){if(this.refreshHandler){const _=await this.refreshHandler();if(!_.access_token)throw new Error("No access token is returned by the refreshHandler callback.");return _}}isTokenExpiring(){const _=this.credentials.expiry_date;return _?_<=new Date().getTime()+this.eagerRefreshThresholdMillis:!1}}return oauth2client.OAuth2Client=h,h.GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo",h.CLOCK_SKEW_SECS_=300,h.DEFAULT_MAX_TOKEN_LIFETIME_SECS_=86400,oauth2client}var hasRequiredComputeclient;function requireComputeclient(){if(hasRequiredComputeclient)return computeclient;hasRequiredComputeclient=1,Object.defineProperty(computeclient,"__esModule",{value:!0}),computeclient.Compute=void 0;const e=requireSrc$f(),t=requireSrc$d(),s=requireOauth2client();class p extends s.OAuth2Client{constructor(m={}){super(m),this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=m.serviceAccountEmail||"default",this.scopes=Array.isArray(m.scopes)?m.scopes:m.scopes?[m.scopes]:[]}async refreshTokenNoCache(m){const d=`service-accounts/${this.serviceAccountEmail}/token`;let l;try{const o={property:d};this.scopes.length>0&&(o.params={scopes:this.scopes.join(",")}),l=await t.instance(o)}catch(o){throw o instanceof e.GaxiosError&&(o.message=`Could not refresh access token: ${o.message}`,this.wrapError(o)),o}const a=l;return l&&l.expires_in&&(a.expiry_date=new Date().getTime()+l.expires_in*1e3,delete a.expires_in),this.emit("tokens",a),{tokens:a,res:null}}async fetchIdToken(m){const d=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${m}`;let l;try{const a={property:d};l=await t.instance(a)}catch(a){throw a instanceof Error&&(a.message=`Could not fetch ID token: ${a.message}`),a}return l}wrapError(m){const d=m.response;d&&d.status&&(m.status=d.status,d.status===403?m.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+m.message:d.status===404&&(m.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+m.message))}}return computeclient.Compute=p,computeclient}var idtokenclient={},hasRequiredIdtokenclient;function requireIdtokenclient(){if(hasRequiredIdtokenclient)return idtokenclient;hasRequiredIdtokenclient=1,Object.defineProperty(idtokenclient,"__esModule",{value:!0}),idtokenclient.IdTokenClient=void 0;const e=requireOauth2client();class t extends e.OAuth2Client{constructor(p){super(p),this.targetAudience=p.targetAudience,this.idTokenProvider=p.idTokenProvider}async getRequestMetadataAsync(p){if(!this.credentials.id_token||!this.credentials.expiry_date||this.isTokenExpiring()){const m=await this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:m,expiry_date:this.getIdTokenExpiryDate(m)}}return{headers:{Authorization:"Bearer "+this.credentials.id_token}}}getIdTokenExpiryDate(p){const g=p.split(".")[1];if(g)return JSON.parse(Buffer.from(g,"base64").toString("ascii")).exp*1e3}}return idtokenclient.IdTokenClient=t,idtokenclient}var envDetect={},hasRequiredEnvDetect;function requireEnvDetect(){if(hasRequiredEnvDetect)return envDetect;hasRequiredEnvDetect=1;var e={};Object.defineProperty(envDetect,"__esModule",{value:!0}),envDetect.GCPEnv=void 0,envDetect.clear=g,envDetect.getEnv=m;const t=requireSrc$d();var s;(function(_){_.APP_ENGINE="APP_ENGINE",_.KUBERNETES_ENGINE="KUBERNETES_ENGINE",_.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",_.COMPUTE_ENGINE="COMPUTE_ENGINE",_.CLOUD_RUN="CLOUD_RUN",_.NONE="NONE"})(s||(envDetect.GCPEnv=s={}));let p;function g(){p=void 0}async function m(){return p||(p=d(),p)}async function d(){let _=s.NONE;return l()?_=s.APP_ENGINE:a()?_=s.CLOUD_FUNCTIONS:await v()?await h()?_=s.KUBERNETES_ENGINE:o()?_=s.CLOUD_RUN:_=s.COMPUTE_ENGINE:_=s.NONE,_}function l(){return!!(e.GAE_SERVICE||e.GAE_MODULE_NAME)}function a(){return!!(e.FUNCTION_NAME||e.FUNCTION_TARGET)}function o(){return!!e.K_CONFIGURATION}async function h(){try{return await t.instance("attributes/cluster-name"),!0}catch{return!1}}async function v(){return t.isAvailable()}return envDetect}var jwtclient={},src$b={},jws$1={},dataStream$1,hasRequiredDataStream$1;function requireDataStream$1(){if(hasRequiredDataStream$1)return dataStream$1;hasRequiredDataStream$1=1;var e={},t=requireSafeBuffer().Buffer,s=require$$1$3,p=require$$1$3;function g(m){if(this.buffer=null,this.writable=!0,this.readable=!0,!m)return this.buffer=t.alloc(0),this;if(typeof m.pipe=="function")return this.buffer=t.alloc(0),m.pipe(this),this;if(m.length||typeof m=="object")return this.buffer=m,this.writable=!1,e.nextTick((function(){this.emit("end",m),this.readable=!1,this.emit("close")}).bind(this)),this;throw new TypeError("Unexpected data type ("+typeof m+")")}return p.inherits(g,s),g.prototype.write=function(d){this.buffer=t.concat([this.buffer,t.from(d)]),this.emit("data",d)},g.prototype.end=function(d){d&&this.write(d),this.emit("end",d),this.emit("close"),this.writable=!1,this.readable=!1},dataStream$1=g,dataStream$1}var bufferEqualConstantTime,hasRequiredBufferEqualConstantTime;function requireBufferEqualConstantTime(){if(hasRequiredBufferEqualConstantTime)return bufferEqualConstantTime;hasRequiredBufferEqualConstantTime=1;var e=requireBuffer().Buffer,t=requireBuffer().SlowBuffer;bufferEqualConstantTime=s;function s(m,d){if(!e.isBuffer(m)||!e.isBuffer(d)||m.length!==d.length)return!1;for(var l=0,a=0;a<m.length;a++)l|=m[a]^d[a];return l===0}s.install=function(){e.prototype.equal=t.prototype.equal=function(d){return s(this,d)}};var p=e.prototype.equal,g=t.prototype.equal;return s.restore=function(){e.prototype.equal=p,t.prototype.equal=g},bufferEqualConstantTime}var jwa$1,hasRequiredJwa$1;function requireJwa$1(){if(hasRequiredJwa$1)return jwa$1;hasRequiredJwa$1=1;var e=requireSafeBuffer().Buffer,t=require$$1$3,s=requireEcdsaSigFormatter(),p=require$$1$3,g=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,m="secret must be a string or buffer",d="key must be a string or a buffer",l="key must be a string, a buffer or an object",a=typeof t.createPublicKey=="function";a&&(d+=" or a KeyObject",m+="or a KeyObject");function o(z){if(!e.isBuffer(z)&&typeof z!="string"&&(!a||typeof z!="object"||typeof z.type!="string"||typeof z.asymmetricKeyType!="string"||typeof z.export!="function"))throw w(d)}function h(z){if(!e.isBuffer(z)&&typeof z!="string"&&typeof z!="object")throw w(l)}function v(z){if(!e.isBuffer(z)){if(typeof z=="string")return z;if(!a||typeof z!="object"||z.type!=="secret"||typeof z.export!="function")throw w(m)}}function _(z){return z.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function y(z){z=z.toString();var Q=4-z.length%4;if(Q!==4)for(var Y=0;Y<Q;++Y)z+="=";return z.replace(/\-/g,"+").replace(/_/g,"/")}function w(z){var Q=[].slice.call(arguments,1),Y=p.format.bind(p,z).apply(null,Q);return new TypeError(Y)}function T(z){return e.isBuffer(z)||typeof z=="string"}function I(z){return T(z)||(z=JSON.stringify(z)),z}function O(z){return function(Y,te){v(te),Y=I(Y);var ae=t.createHmac("sha"+z,te),ue=(ae.update(Y),ae.digest("base64"));return _(ue)}}var E,C="timingSafeEqual"in t?function(Q,Y){return Q.byteLength!==Y.byteLength?!1:t.timingSafeEqual(Q,Y)}:function(Q,Y){return E||(E=requireBufferEqualConstantTime()),E(Q,Y)};function x(z){return function(Y,te,ae){var ue=O(z)(Y,ae);return C(e.from(te),e.from(ue))}}function j(z){return function(Y,te){h(te),Y=I(Y);var ae=t.createSign("RSA-SHA"+z),ue=(ae.update(Y),ae.sign(te,"base64"));return _(ue)}}function D(z){return function(Y,te,ae){o(ae),Y=I(Y),te=y(te);var ue=t.createVerify("RSA-SHA"+z);return ue.update(Y),ue.verify(ae,te,"base64")}}function k(z){return function(Y,te){h(te),Y=I(Y);var ae=t.createSign("RSA-SHA"+z),ue=(ae.update(Y),ae.sign({key:te,padding:t.constants.RSA_PKCS1_PSS_PADDING,saltLength:t.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return _(ue)}}function q(z){return function(Y,te,ae){o(ae),Y=I(Y),te=y(te);var ue=t.createVerify("RSA-SHA"+z);return ue.update(Y),ue.verify({key:ae,padding:t.constants.RSA_PKCS1_PSS_PADDING,saltLength:t.constants.RSA_PSS_SALTLEN_DIGEST},te,"base64")}}function G(z){var Q=j(z);return function(){var te=Q.apply(null,arguments);return te=s.derToJose(te,"ES"+z),te}}function $(z){var Q=D(z);return function(te,ae,ue){ae=s.joseToDer(ae,"ES"+z).toString("base64");var ee=Q(te,ae,ue);return ee}}function W(){return function(){return""}}function K(){return function(Q,Y){return Y===""}}return jwa$1=function(Q){var Y={hs:O,rs:j,ps:k,es:G,none:W},te={hs:x,rs:D,ps:q,es:$,none:K},ae=Q.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!ae)throw w(g,Q);var ue=(ae[1]||ae[3]).toLowerCase(),ee=ae[2];return{sign:Y[ue](ee),verify:te[ue](ee)}},jwa$1}var tostring$1,hasRequiredTostring$1;function requireTostring$1(){if(hasRequiredTostring$1)return tostring$1;hasRequiredTostring$1=1;var e=requireBuffer().Buffer;return tostring$1=function(s){return typeof s=="string"?s:typeof s=="number"||e.isBuffer(s)?s.toString():JSON.stringify(s)},tostring$1}var signStream$1,hasRequiredSignStream$1;function requireSignStream$1(){if(hasRequiredSignStream$1)return signStream$1;hasRequiredSignStream$1=1;var e=requireSafeBuffer().Buffer,t=requireDataStream$1(),s=requireJwa$1(),p=require$$1$3,g=requireTostring$1(),m=require$$1$3;function d(h,v){return e.from(h,v).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function l(h,v,_){_=_||"utf8";var y=d(g(h),"binary"),w=d(g(v),_);return m.format("%s.%s",y,w)}function a(h){var v=h.header,_=h.payload,y=h.secret||h.privateKey,w=h.encoding,T=s(v.alg),I=l(v,_,w),O=T.sign(I,y);return m.format("%s.%s",I,O)}function o(h){var v=h.secret||h.privateKey||h.key,_=new t(v);this.readable=!0,this.header=h.header,this.encoding=h.encoding,this.secret=this.privateKey=this.key=_,this.payload=new t(h.payload),this.secret.once("close",(function(){!this.payload.writable&&this.readable&&this.sign()}).bind(this)),this.payload.once("close",(function(){!this.secret.writable&&this.readable&&this.sign()}).bind(this))}return m.inherits(o,p),o.prototype.sign=function(){try{var v=a({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",v),this.emit("data",v),this.emit("end"),this.readable=!1,v}catch(_){this.readable=!1,this.emit("error",_),this.emit("close")}},o.sign=a,signStream$1=o,signStream$1}var verifyStream$1,hasRequiredVerifyStream$1;function requireVerifyStream$1(){if(hasRequiredVerifyStream$1)return verifyStream$1;hasRequiredVerifyStream$1=1;var e=requireSafeBuffer().Buffer,t=requireDataStream$1(),s=requireJwa$1(),p=require$$1$3,g=requireTostring$1(),m=require$$1$3,d=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function l(O){return Object.prototype.toString.call(O)==="[object Object]"}function a(O){if(l(O))return O;try{return JSON.parse(O)}catch{return}}function o(O){var E=O.split(".",1)[0];return a(e.from(E,"base64").toString("binary"))}function h(O){return O.split(".",2).join(".")}function v(O){return O.split(".")[2]}function _(O,E){E=E||"utf8";var C=O.split(".")[1];return e.from(C,"base64").toString(E)}function y(O){return d.test(O)&&!!o(O)}function w(O,E,C){if(!E){var x=new Error("Missing algorithm parameter for jws.verify");throw x.code="MISSING_ALGORITHM",x}O=g(O);var j=v(O),D=h(O),k=s(E);return k.verify(D,j,C)}function T(O,E){if(E=E||{},O=g(O),!y(O))return null;var C=o(O);if(!C)return null;var x=_(O);return(C.typ==="JWT"||E.json)&&(x=JSON.parse(x,E.encoding)),{header:C,payload:x,signature:v(O)}}function I(O){O=O||{};var E=O.secret||O.publicKey||O.key,C=new t(E);this.readable=!0,this.algorithm=O.algorithm,this.encoding=O.encoding,this.secret=this.publicKey=this.key=C,this.signature=new t(O.signature),this.secret.once("close",(function(){!this.signature.writable&&this.readable&&this.verify()}).bind(this)),this.signature.once("close",(function(){!this.secret.writable&&this.readable&&this.verify()}).bind(this))}return m.inherits(I,p),I.prototype.verify=function(){try{var E=w(this.signature.buffer,this.algorithm,this.key.buffer),C=T(this.signature.buffer,this.encoding);return this.emit("done",E,C),this.emit("data",E),this.emit("end"),this.readable=!1,E}catch(x){this.readable=!1,this.emit("error",x),this.emit("close")}},I.decode=T,I.isValid=y,I.verify=w,verifyStream$1=I,verifyStream$1}var hasRequiredJws$1;function requireJws$1(){if(hasRequiredJws$1)return jws$1;hasRequiredJws$1=1;var e=requireSignStream$1(),t=requireVerifyStream$1(),s=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];return jws$1.ALGORITHMS=s,jws$1.sign=e.sign,jws$1.verify=t.verify,jws$1.decode=t.decode,jws$1.isValid=t.isValid,jws$1.createSign=function(g){return new e(g)},jws$1.createVerify=function(g){return new t(g)},jws$1}var hasRequiredSrc$c;function requireSrc$c(){if(hasRequiredSrc$c)return src$b;hasRequiredSrc$c=1;var e=src$b&&src$b.__classPrivateFieldGet||function(x,j,D,k){if(D==="a"&&!k)throw new TypeError("Private accessor was defined without a getter");if(typeof j=="function"?x!==j||!k:!j.has(x))throw new TypeError("Cannot read private member from an object whose class did not declare it");return D==="m"?k:D==="a"?k.call(x):k?k.value:j.get(x)},t=src$b&&src$b.__classPrivateFieldSet||function(x,j,D,k,q){if(k==="m")throw new TypeError("Private method is not writable");if(k==="a"&&!q)throw new TypeError("Private accessor was defined without a setter");if(typeof j=="function"?x!==j||!q:!j.has(x))throw new TypeError("Cannot write private member to an object whose class did not declare it");return k==="a"?q.call(x,D):q?q.value=D:j.set(x,D),D},s,p,g,m,d,l,a,o;Object.defineProperty(src$b,"__esModule",{value:!0}),src$b.GoogleToken=void 0;const h=require$$1$3,v=requireSrc$f(),_=requireJws$1(),y=require$$1$3,w=require$$1$3,T=h.readFile?(0,w.promisify)(h.readFile):async()=>{throw new E("use key rather than keyFile.","MISSING_CREDENTIALS")},I="https://www.googleapis.com/oauth2/v4/token",O="https://accounts.google.com/o/oauth2/revoke?token=";class E extends Error{constructor(j,D){super(j),this.code=D}}class C{get accessToken(){return this.rawToken?this.rawToken.access_token:void 0}get idToken(){return this.rawToken?this.rawToken.id_token:void 0}get tokenType(){return this.rawToken?this.rawToken.token_type:void 0}get refreshToken(){return this.rawToken?this.rawToken.refresh_token:void 0}constructor(j){s.add(this),this.transporter={request:D=>(0,v.request)(D)},p.set(this,void 0),e(this,s,"m",a).call(this,j)}hasExpired(){const j=new Date().getTime();return this.rawToken&&this.expiresAt?j>=this.expiresAt:!0}isTokenExpiring(){var j;const D=new Date().getTime(),k=(j=this.eagerRefreshThresholdMillis)!==null&&j!==void 0?j:0;return this.rawToken&&this.expiresAt?this.expiresAt<=D+k:!0}getToken(j,D={}){if(typeof j=="object"&&(D=j,j=void 0),D=Object.assign({forceRefresh:!1},D),j){const k=j;e(this,s,"m",g).call(this,D).then(q=>k(null,q),j);return}return e(this,s,"m",g).call(this,D)}async getCredentials(j){switch(y.extname(j)){case".json":{const k=await T(j,"utf8"),q=JSON.parse(k),G=q.private_key,$=q.client_email;if(!G||!$)throw new E("private_key and client_email are required.","MISSING_CREDENTIALS");return{privateKey:G,clientEmail:$}}case".der":case".crt":case".pem":return{privateKey:await T(j,"utf8")};case".p12":case".pfx":throw new E("*.p12 certificates are not supported after v6.1.2. Consider utilizing *.json format or converting *.p12 to *.pem using the OpenSSL CLI.","UNKNOWN_CERTIFICATE_TYPE");default:throw new E("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, and *.pem.","UNKNOWN_CERTIFICATE_TYPE")}}revokeToken(j){if(j){e(this,s,"m",l).call(this).then(()=>j(),j);return}return e(this,s,"m",l).call(this)}}return src$b.GoogleToken=C,p=new WeakMap,s=new WeakSet,g=async function(j){if(e(this,p,"f")&&!j.forceRefresh)return e(this,p,"f");try{return await t(this,p,e(this,s,"m",m).call(this,j),"f")}finally{t(this,p,void 0,"f")}},m=async function(j){if(this.isTokenExpiring()===!1&&j.forceRefresh===!1)return Promise.resolve(this.rawToken);if(!this.key&&!this.keyFile)throw new Error("No key or keyFile set.");if(!this.key&&this.keyFile){const D=await this.getCredentials(this.keyFile);this.key=D.privateKey,this.iss=D.clientEmail||this.iss,D.clientEmail||e(this,s,"m",d).call(this)}return e(this,s,"m",o).call(this)},d=function(){if(!this.iss)throw new E("email is required.","MISSING_CREDENTIALS")},l=async function(){if(!this.accessToken)throw new Error("No token to revoke.");const j=O+this.accessToken;await this.transporter.request({url:j,retry:!0}),e(this,s,"m",a).call(this,{email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims})},a=function(j={}){this.keyFile=j.keyFile,this.key=j.key,this.rawToken=void 0,this.iss=j.email||j.iss,this.sub=j.sub,this.additionalClaims=j.additionalClaims,typeof j.scope=="object"?this.scope=j.scope.join(" "):this.scope=j.scope,this.eagerRefreshThresholdMillis=j.eagerRefreshThresholdMillis,j.transporter&&(this.transporter=j.transporter)},o=async function(){var j,D;const k=Math.floor(new Date().getTime()/1e3),q=this.additionalClaims||{},G=Object.assign({iss:this.iss,scope:this.scope,aud:I,exp:k+3600,iat:k,sub:this.sub},q),$=_.sign({header:{alg:"RS256"},payload:G,secret:this.key});try{const W=await this.transporter.request({method:"POST",url:I,data:{grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:$},headers:{"Content-Type":"application/x-www-form-urlencoded"},responseType:"json",retryConfig:{httpMethodsToRetry:["POST"]}});return this.rawToken=W.data,this.expiresAt=W.data.expires_in===null||W.data.expires_in===void 0?void 0:(k+W.data.expires_in)*1e3,this.rawToken}catch(W){this.rawToken=void 0,this.tokenExpires=void 0;const K=W.response&&(!((j=W.response)===null||j===void 0)&&j.data)?(D=W.response)===null||D===void 0?void 0:D.data:{};if(K.error){const z=K.error_description?`: ${K.error_description}`:"";W.message=`${K.error}${z}`}throw W}},src$b}var jwtaccess={},hasRequiredJwtaccess;function requireJwtaccess(){if(hasRequiredJwtaccess)return jwtaccess;hasRequiredJwtaccess=1,Object.defineProperty(jwtaccess,"__esModule",{value:!0}),jwtaccess.JWTAccess=void 0;const e=requireJws$1(),t=requireUtil$8(),s={alg:"RS256",typ:"JWT"};class p{constructor(m,d,l,a){this.cache=new t.LRUCache({capacity:500,maxAge:36e5}),this.email=m,this.key=d,this.keyId=l,this.eagerRefreshThresholdMillis=a??3e5}getCachedKey(m,d){let l=m;if(d&&Array.isArray(d)&&d.length?l=m?`${m}_${d.join("_")}`:`${d.join("_")}`:typeof d=="string"&&(l=m?`${m}_${d}`:d),!l)throw Error("Scopes or url must be provided");return l}getRequestHeaders(m,d,l){const a=this.getCachedKey(m,l),o=this.cache.get(a),h=Date.now();if(o&&o.expiration-h>this.eagerRefreshThresholdMillis)return o.headers;const v=Math.floor(Date.now()/1e3),_=p.getExpirationTime(v);let y;if(Array.isArray(l)&&(l=l.join(" ")),l?y={iss:this.email,sub:this.email,scope:l,exp:_,iat:v}:y={iss:this.email,sub:this.email,aud:m,exp:_,iat:v},d){for(const E in y)if(d[E])throw new Error(`The '${E}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}const w=this.keyId?{...s,kid:this.keyId}:s,T=Object.assign(y,d),O={Authorization:`Bearer ${e.sign({header:w,payload:T,secret:this.key})}`};return this.cache.set(a,{expiration:_*1e3,headers:O}),O}static getExpirationTime(m){return m+3600}fromJSON(m){if(!m)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!m.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!m.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=m.client_email,this.key=m.private_key,this.keyId=m.private_key_id,this.projectId=m.project_id}fromStream(m,d){if(d)this.fromStreamAsync(m).then(()=>d(),d);else return this.fromStreamAsync(m)}fromStreamAsync(m){return new Promise((d,l)=>{m||l(new Error("Must pass in a stream containing the service account auth settings."));let a="";m.setEncoding("utf8").on("data",o=>a+=o).on("error",l).on("end",()=>{try{const o=JSON.parse(a);this.fromJSON(o),d()}catch(o){l(o)}})})}}return jwtaccess.JWTAccess=p,jwtaccess}var hasRequiredJwtclient;function requireJwtclient(){if(hasRequiredJwtclient)return jwtclient;hasRequiredJwtclient=1,Object.defineProperty(jwtclient,"__esModule",{value:!0}),jwtclient.JWT=void 0;const e=requireSrc$c(),t=requireJwtaccess(),s=requireOauth2client(),p=requireAuthclient();class g extends s.OAuth2Client{constructor(d,l,a,o,h,v){const _=d&&typeof d=="object"?d:{email:d,keyFile:l,key:a,keyId:v,scopes:o,subject:h};super(_),this.email=_.email,this.keyFile=_.keyFile,this.key=_.key,this.keyId=_.keyId,this.scopes=_.scopes,this.subject=_.subject,this.additionalClaims=_.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(d){const l=new g(this);return l.scopes=d,l}async getRequestMetadataAsync(d){d=this.defaultServicePath?`https://${this.defaultServicePath}/`:d;const l=!this.hasUserScopes()&&d||this.useJWTAccessWithScope&&this.hasAnyScopes()||this.universeDomain!==p.DEFAULT_UNIVERSE;if(this.subject&&this.universeDomain!==p.DEFAULT_UNIVERSE)throw new RangeError(`Service Account user is configured for the credential. Domain-wide delegation is not supported in universes other than ${p.DEFAULT_UNIVERSE}`);if(!this.apiKey&&l)if(this.additionalClaims&&this.additionalClaims.target_audience){const{tokens:a}=await this.refreshToken();return{headers:this.addSharedMetadataHeaders({Authorization:`Bearer ${a.id_token}`})}}else{this.access||(this.access=new t.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis));let a;this.hasUserScopes()?a=this.scopes:d||(a=this.defaultScopes);const o=this.useJWTAccessWithScope||this.universeDomain!==p.DEFAULT_UNIVERSE,h=await this.access.getRequestHeaders(d??void 0,this.additionalClaims,o?a:void 0);return{headers:this.addSharedMetadataHeaders(h)}}else return this.hasAnyScopes()||this.apiKey?super.getRequestMetadataAsync(d):{headers:{}}}async fetchIdToken(d){const l=new e.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:d},transporter:this.transporter});if(await l.getToken({forceRefresh:!0}),!l.idToken)throw new Error("Unknown error: Failed to fetch ID token");return l.idToken}hasUserScopes(){return this.scopes?this.scopes.length>0:!1}hasAnyScopes(){return!!(this.scopes&&this.scopes.length>0||this.defaultScopes&&this.defaultScopes.length>0)}authorize(d){if(d)this.authorizeAsync().then(l=>d(null,l),d);else return this.authorizeAsync()}async authorizeAsync(){const d=await this.refreshToken();if(!d)throw new Error("No result returned");return this.credentials=d.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,d.tokens}async refreshTokenNoCache(d){const l=this.createGToken(),o={access_token:(await l.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:l.expiresAt,id_token:l.idToken};return this.emit("tokens",o),{res:null,tokens:o}}createGToken(){return this.gtoken||(this.gtoken=new e.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims,transporter:this.transporter})),this.gtoken}fromJSON(d){if(!d)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!d.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!d.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=d.client_email,this.key=d.private_key,this.keyId=d.private_key_id,this.projectId=d.project_id,this.quotaProjectId=d.quota_project_id,this.universeDomain=d.universe_domain||this.universeDomain}fromStream(d,l){if(l)this.fromStreamAsync(d).then(()=>l(),l);else return this.fromStreamAsync(d)}fromStreamAsync(d){return new Promise((l,a)=>{if(!d)throw new Error("Must pass in a stream containing the service account auth settings.");let o="";d.setEncoding("utf8").on("error",a).on("data",h=>o+=h).on("end",()=>{try{const h=JSON.parse(o);this.fromJSON(h),l()}catch(h){a(h)}})})}fromAPIKey(d){if(typeof d!="string")throw new Error("Must provide an API Key string.");this.apiKey=d}async getCredentials(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){const l=await this.createGToken().getCredentials(this.keyFile);return{private_key:l.privateKey,client_email:l.clientEmail}}throw new Error("A key or a keyFile must be provided to getCredentials.")}}return jwtclient.JWT=g,jwtclient}var refreshclient={},hasRequiredRefreshclient;function requireRefreshclient(){if(hasRequiredRefreshclient)return refreshclient;hasRequiredRefreshclient=1,Object.defineProperty(refreshclient,"__esModule",{value:!0}),refreshclient.UserRefreshClient=refreshclient.USER_REFRESH_ACCOUNT_TYPE=void 0;const e=requireOauth2client(),t=require$$1$3;refreshclient.USER_REFRESH_ACCOUNT_TYPE="authorized_user";class s extends e.OAuth2Client{constructor(g,m,d,l,a){const o=g&&typeof g=="object"?g:{clientId:g,clientSecret:m,refreshToken:d,eagerRefreshThresholdMillis:l,forceRefreshOnFailure:a};super(o),this._refreshToken=o.refreshToken,this.credentials.refresh_token=o.refreshToken}async refreshTokenNoCache(g){return super.refreshTokenNoCache(this._refreshToken)}async fetchIdToken(g){return(await this.transporter.request({...s.RETRY_CONFIG,url:this.endpoints.oauth2TokenUrl,headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",data:(0,t.stringify)({client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token",refresh_token:this._refreshToken,target_audience:g})})).data.id_token}fromJSON(g){if(!g)throw new Error("Must pass in a JSON object containing the user refresh token");if(g.type!=="authorized_user")throw new Error('The incoming JSON object does not have the "authorized_user" type');if(!g.client_id)throw new Error("The incoming JSON object does not contain a client_id field");if(!g.client_secret)throw new Error("The incoming JSON object does not contain a client_secret field");if(!g.refresh_token)throw new Error("The incoming JSON object does not contain a refresh_token field");this._clientId=g.client_id,this._clientSecret=g.client_secret,this._refreshToken=g.refresh_token,this.credentials.refresh_token=g.refresh_token,this.quotaProjectId=g.quota_project_id,this.universeDomain=g.universe_domain||this.universeDomain}fromStream(g,m){if(m)this.fromStreamAsync(g).then(()=>m(),m);else return this.fromStreamAsync(g)}async fromStreamAsync(g){return new Promise((m,d)=>{if(!g)return d(new Error("Must pass in a stream containing the user refresh token."));let l="";g.setEncoding("utf8").on("error",d).on("data",a=>l+=a).on("end",()=>{try{const a=JSON.parse(l);return this.fromJSON(a),m()}catch(a){return d(a)}})})}static fromJSON(g){const m=new s;return m.fromJSON(g),m}}return refreshclient.UserRefreshClient=s,refreshclient}var impersonated={},hasRequiredImpersonated;function requireImpersonated(){if(hasRequiredImpersonated)return impersonated;hasRequiredImpersonated=1,Object.defineProperty(impersonated,"__esModule",{value:!0}),impersonated.Impersonated=impersonated.IMPERSONATED_ACCOUNT_TYPE=void 0;const e=requireOauth2client(),t=requireSrc$f(),s=requireUtil$8();impersonated.IMPERSONATED_ACCOUNT_TYPE="impersonated_service_account";class p extends e.OAuth2Client{constructor(m={}){var d,l,a,o,h,v;if(super(m),this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=(d=m.sourceClient)!==null&&d!==void 0?d:new e.OAuth2Client,this.targetPrincipal=(l=m.targetPrincipal)!==null&&l!==void 0?l:"",this.delegates=(a=m.delegates)!==null&&a!==void 0?a:[],this.targetScopes=(o=m.targetScopes)!==null&&o!==void 0?o:[],this.lifetime=(h=m.lifetime)!==null&&h!==void 0?h:3600,!!!(0,s.originalOrCamelOptions)(m).get("universe_domain"))this.universeDomain=this.sourceClient.universeDomain;else if(this.sourceClient.universeDomain!==this.universeDomain)throw new RangeError(`Universe domain ${this.sourceClient.universeDomain} in source credentials does not match ${this.universeDomain} universe domain set for impersonated credentials.`);this.endpoint=(v=m.endpoint)!==null&&v!==void 0?v:`https://iamcredentials.${this.universeDomain}`}async sign(m){await this.sourceClient.getAccessToken();const d=`projects/-/serviceAccounts/${this.targetPrincipal}`,l=`${this.endpoint}/v1/${d}:signBlob`,a={delegates:this.delegates,payload:Buffer.from(m).toString("base64")};return(await this.sourceClient.request({...p.RETRY_CONFIG,url:l,data:a,method:"POST"})).data}getTargetPrincipal(){return this.targetPrincipal}async refreshToken(){var m,d,l,a,o,h;try{await this.sourceClient.getAccessToken();const v="projects/-/serviceAccounts/"+this.targetPrincipal,_=`${this.endpoint}/v1/${v}:generateAccessToken`,y={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},w=await this.sourceClient.request({...p.RETRY_CONFIG,url:_,data:y,method:"POST"}),T=w.data;return this.credentials.access_token=T.accessToken,this.credentials.expiry_date=Date.parse(T.expireTime),{tokens:this.credentials,res:w}}catch(v){if(!(v instanceof Error))throw v;let _=0,y="";throw v instanceof t.GaxiosError&&(_=(l=(d=(m=v?.response)===null||m===void 0?void 0:m.data)===null||d===void 0?void 0:d.error)===null||l===void 0?void 0:l.status,y=(h=(o=(a=v?.response)===null||a===void 0?void 0:a.data)===null||o===void 0?void 0:o.error)===null||h===void 0?void 0:h.message),_&&y?(v.message=`${_}: unable to impersonate: ${y}`,v):(v.message=`unable to impersonate: ${v}`,v)}}async fetchIdToken(m,d){var l,a;await this.sourceClient.getAccessToken();const o=`projects/-/serviceAccounts/${this.targetPrincipal}`,h=`${this.endpoint}/v1/${o}:generateIdToken`,v={delegates:this.delegates,audience:m,includeEmail:(l=d?.includeEmail)!==null&&l!==void 0?l:!0,useEmailAzp:(a=d?.includeEmail)!==null&&a!==void 0?a:!0};return(await this.sourceClient.request({...p.RETRY_CONFIG,url:h,data:v,method:"POST"})).data.token}}return impersonated.Impersonated=p,impersonated}var externalclient={},baseexternalclient={},stscredentials={},oauth2common={},hasRequiredOauth2common;function requireOauth2common(){if(hasRequiredOauth2common)return oauth2common;hasRequiredOauth2common=1,Object.defineProperty(oauth2common,"__esModule",{value:!0}),oauth2common.OAuthClientAuthHandler=void 0,oauth2common.getErrorFromOAuthErrorResponse=g;const e=require$$1$3,t=requireCrypto(),s=["PUT","POST","PATCH"];class p{constructor(d){this.clientAuthentication=d,this.crypto=(0,t.createCrypto)()}applyClientAuthenticationOptions(d,l){this.injectAuthenticatedHeaders(d,l),l||this.injectAuthenticatedRequestBody(d)}injectAuthenticatedHeaders(d,l){var a;if(l)d.headers=d.headers||{},Object.assign(d.headers,{Authorization:`Bearer ${l}}`});else if(((a=this.clientAuthentication)===null||a===void 0?void 0:a.confidentialClientType)==="basic"){d.headers=d.headers||{};const o=this.clientAuthentication.clientId,h=this.clientAuthentication.clientSecret||"",v=this.crypto.encodeBase64StringUtf8(`${o}:${h}`);Object.assign(d.headers,{Authorization:`Basic ${v}`})}}injectAuthenticatedRequestBody(d){var l;if(((l=this.clientAuthentication)===null||l===void 0?void 0:l.confidentialClientType)==="request-body"){const a=(d.method||"GET").toUpperCase();if(s.indexOf(a)!==-1){let o;const h=d.headers||{};for(const v in h)if(v.toLowerCase()==="content-type"&&h[v]){o=h[v].toLowerCase();break}if(o==="application/x-www-form-urlencoded"){d.data=d.data||"";const v=e.parse(d.data);Object.assign(v,{client_id:this.clientAuthentication.clientId,client_secret:this.clientAuthentication.clientSecret||""}),d.data=e.stringify(v)}else if(o==="application/json")d.data=d.data||{},Object.assign(d.data,{client_id:this.clientAuthentication.clientId,client_secret:this.clientAuthentication.clientSecret||""});else throw new Error(`${o} content-types are not supported with ${this.clientAuthentication.confidentialClientType} client authentication`)}else throw new Error(`${a} HTTP method does not support ${this.clientAuthentication.confidentialClientType} client authentication`)}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}}oauth2common.OAuthClientAuthHandler=p;function g(m,d){const l=m.error,a=m.error_description,o=m.error_uri;let h=`Error code ${l}`;typeof a<"u"&&(h+=`: ${a}`),typeof o<"u"&&(h+=` - ${o}`);const v=new Error(h);if(d){const _=Object.keys(d);d.stack&&_.push("stack"),_.forEach(y=>{y!=="message"&&Object.defineProperty(v,y,{value:d[y],writable:!1,enumerable:!0})})}return v}return oauth2common}var hasRequiredStscredentials;function requireStscredentials(){if(hasRequiredStscredentials)return stscredentials;hasRequiredStscredentials=1,Object.defineProperty(stscredentials,"__esModule",{value:!0}),stscredentials.StsCredentials=void 0;const e=requireSrc$f(),t=require$$1$3,s=requireTransporters(),p=requireOauth2common();class g extends p.OAuthClientAuthHandler{constructor(d,l){super(l),this.tokenExchangeEndpoint=d,this.transporter=new s.DefaultTransporter}async exchangeToken(d,l,a){var o,h,v;const _={grant_type:d.grantType,resource:d.resource,audience:d.audience,scope:(o=d.scope)===null||o===void 0?void 0:o.join(" "),requested_token_type:d.requestedTokenType,subject_token:d.subjectToken,subject_token_type:d.subjectTokenType,actor_token:(h=d.actingParty)===null||h===void 0?void 0:h.actorToken,actor_token_type:(v=d.actingParty)===null||v===void 0?void 0:v.actorTokenType,options:a&&JSON.stringify(a)};Object.keys(_).forEach(T=>{typeof _[T]>"u"&&delete _[T]});const y={"Content-Type":"application/x-www-form-urlencoded"};Object.assign(y,l||{});const w={...g.RETRY_CONFIG,url:this.tokenExchangeEndpoint.toString(),method:"POST",headers:y,data:t.stringify(_),responseType:"json"};this.applyClientAuthenticationOptions(w);try{const T=await this.transporter.request(w),I=T.data;return I.res=T,I}catch(T){throw T instanceof e.GaxiosError&&T.response?(0,p.getErrorFromOAuthErrorResponse)(T.response.data,T):T}}}return stscredentials.StsCredentials=g,stscredentials}var hasRequiredBaseexternalclient;function requireBaseexternalclient(){return hasRequiredBaseexternalclient||(hasRequiredBaseexternalclient=1,(function(e){var t={},s=baseexternalclient&&baseexternalclient.__classPrivateFieldGet||function(x,j,D,k){if(D==="a"&&!k)throw new TypeError("Private accessor was defined without a getter");if(typeof j=="function"?x!==j||!k:!j.has(x))throw new TypeError("Cannot read private member from an object whose class did not declare it");return D==="m"?k:D==="a"?k.call(x):k?k.value:j.get(x)},p=baseexternalclient&&baseexternalclient.__classPrivateFieldSet||function(x,j,D,k,q){if(k==="m")throw new TypeError("Private method is not writable");if(k==="a"&&!q)throw new TypeError("Private accessor was defined without a setter");if(typeof j=="function"?x!==j||!q:!j.has(x))throw new TypeError("Cannot write private member to an object whose class did not declare it");return k==="a"?q.call(x,D):q?q.value=D:j.set(x,D),D},g,m,d;Object.defineProperty(e,"__esModule",{value:!0}),e.BaseExternalAccountClient=e.DEFAULT_UNIVERSE=e.CLOUD_RESOURCE_MANAGER=e.EXTERNAL_ACCOUNT_TYPE=e.EXPIRATION_TIME_OFFSET=void 0;const l=require$$1$3,a=requireAuthclient(),o=requireStscredentials(),h=requireUtil$8(),v="urn:ietf:params:oauth:grant-type:token-exchange",_="urn:ietf:params:oauth:token-type:access_token",y="https://www.googleapis.com/auth/cloud-platform",w=3600;e.EXPIRATION_TIME_OFFSET=3e5,e.EXTERNAL_ACCOUNT_TYPE="external_account",e.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";const T="//iam\\.googleapis\\.com/locations/[^/]+/workforcePools/[^/]+/providers/.+",I="https://sts.{universeDomain}/v1/token",O=require$$4$2;var E=requireAuthclient();Object.defineProperty(e,"DEFAULT_UNIVERSE",{enumerable:!0,get:function(){return E.DEFAULT_UNIVERSE}});class C extends a.AuthClient{constructor(j,D){var k;super({...j,...D}),g.add(this),m.set(this,null);const q=(0,h.originalOrCamelOptions)(j),G=q.get("type");if(G&&G!==e.EXTERNAL_ACCOUNT_TYPE)throw new Error(`Expected "${e.EXTERNAL_ACCOUNT_TYPE}" type but received "${j.type}"`);const $=q.get("client_id"),W=q.get("client_secret"),K=(k=q.get("token_url"))!==null&&k!==void 0?k:I.replace("{universeDomain}",this.universeDomain),z=q.get("subject_token_type"),Q=q.get("workforce_pool_user_project"),Y=q.get("service_account_impersonation_url"),te=q.get("service_account_impersonation"),ae=(0,h.originalOrCamelOptions)(te).get("token_lifetime_seconds");this.cloudResourceManagerURL=new URL(q.get("cloud_resource_manager_url")||`https://cloudresourcemanager.${this.universeDomain}/v1/projects/`),$&&(this.clientAuth={confidentialClientType:"basic",clientId:$,clientSecret:W}),this.stsCredential=new o.StsCredentials(K,this.clientAuth),this.scopes=q.get("scopes")||[y],this.cachedAccessToken=null,this.audience=q.get("audience"),this.subjectTokenType=z,this.workforcePoolUserProject=Q;const ue=new RegExp(T);if(this.workforcePoolUserProject&&!this.audience.match(ue))throw new Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");this.serviceAccountImpersonationUrl=Y,this.serviceAccountImpersonationLifetime=ae,this.serviceAccountImpersonationLifetime?this.configLifetimeRequested=!0:(this.configLifetimeRequested=!1,this.serviceAccountImpersonationLifetime=w),this.projectNumber=this.getProjectNumber(this.audience),this.supplierContext={audience:this.audience,subjectTokenType:this.subjectTokenType,transporter:this.transporter}}getServiceAccountEmail(){var j;if(this.serviceAccountImpersonationUrl){if(this.serviceAccountImpersonationUrl.length>256)throw new RangeError(`URL is too long: ${this.serviceAccountImpersonationUrl}`);const k=/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl);return((j=k?.groups)===null||j===void 0?void 0:j.email)||null}return null}setCredentials(j){super.setCredentials(j),this.cachedAccessToken=j}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){const D={Authorization:`Bearer ${(await this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(D)}request(j,D){if(D)this.requestAsync(j).then(k=>D(null,k),k=>D(k,k.response));else return this.requestAsync(j)}async getProjectId(){const j=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;if(j){const D=await this.getRequestHeaders(),k=await this.transporter.request({...C.RETRY_CONFIG,headers:D,url:`${this.cloudResourceManagerURL.toString()}${j}`,responseType:"json"});return this.projectId=k.data.projectId,this.projectId}return null}async requestAsync(j,D=!1){let k;try{const q=await this.getRequestHeaders();j.headers=j.headers||{},q&&q["x-goog-user-project"]&&(j.headers["x-goog-user-project"]=q["x-goog-user-project"]),q&&q.Authorization&&(j.headers.Authorization=q.Authorization),k=await this.transporter.request(j)}catch(q){const G=q.response;if(G){const $=G.status,W=G.config.data instanceof l.Readable;if(!D&&($===401||$===403)&&!W&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(j,!0)}throw q}return k}async refreshAccessTokenAsync(){p(this,m,s(this,m,"f")||s(this,g,"m",d).call(this),"f");try{return await s(this,m,"f")}finally{p(this,m,null,"f")}}getProjectNumber(j){const D=j.match(/\/projects\/([^/]+)/);return D?D[1]:null}async getImpersonatedAccessToken(j){const D={...C.RETRY_CONFIG,url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${j}`},data:{scope:this.getScopesArray(),lifetime:this.serviceAccountImpersonationLifetime+"s"},responseType:"json"},k=await this.transporter.request(D),q=k.data;return{access_token:q.accessToken,expiry_date:new Date(q.expireTime).getTime(),res:k}}isExpired(j){const D=new Date().getTime();return j.expiry_date?D>=j.expiry_date-this.eagerRefreshThresholdMillis:!1}getScopesArray(){return typeof this.scopes=="string"?[this.scopes]:this.scopes||[y]}getMetricsHeaderValue(){const j=t.version.replace(/^v/,""),D=this.serviceAccountImpersonationUrl!==void 0,k=this.credentialSourceType?this.credentialSourceType:"unknown";return`gl-node/${j} auth/${O.version} google-byoid-sdk source/${k} sa-impersonation/${D} config-lifetime/${this.configLifetimeRequested}`}}e.BaseExternalAccountClient=C,m=new WeakMap,g=new WeakSet,d=async function(){const j=await this.retrieveSubjectToken(),D={grantType:v,audience:this.audience,requestedTokenType:_,subjectToken:j,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[y]:this.getScopesArray()},k=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,q={"x-goog-api-client":this.getMetricsHeaderValue()},G=await this.stsCredential.exchangeToken(D,q,k);return this.serviceAccountImpersonationUrl?this.cachedAccessToken=await this.getImpersonatedAccessToken(G.access_token):G.expires_in?this.cachedAccessToken={access_token:G.access_token,expiry_date:new Date().getTime()+G.expires_in*1e3,res:G.res}:this.cachedAccessToken={access_token:G.access_token,res:G.res},this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken}})(baseexternalclient)),baseexternalclient}var identitypoolclient={},filesubjecttokensupplier={},hasRequiredFilesubjecttokensupplier;function requireFilesubjecttokensupplier(){if(hasRequiredFilesubjecttokensupplier)return filesubjecttokensupplier;hasRequiredFilesubjecttokensupplier=1;var e,t,s;Object.defineProperty(filesubjecttokensupplier,"__esModule",{value:!0}),filesubjecttokensupplier.FileSubjectTokenSupplier=void 0;const p=require$$1$3,g=require$$1$3,m=(0,p.promisify)((e=g.readFile)!==null&&e!==void 0?e:(()=>{})),d=(0,p.promisify)((t=g.realpath)!==null&&t!==void 0?t:(()=>{})),l=(0,p.promisify)((s=g.lstat)!==null&&s!==void 0?s:(()=>{}));class a{constructor(h){this.filePath=h.filePath,this.formatType=h.formatType,this.subjectTokenFieldName=h.subjectTokenFieldName}async getSubjectToken(h){let v=this.filePath;try{if(v=await d(v),!(await l(v)).isFile())throw new Error}catch(w){throw w instanceof Error&&(w.message=`The file at ${v} does not exist, or it is not a file. ${w.message}`),w}let _;const y=await m(v,{encoding:"utf8"});if(this.formatType==="text"?_=y:this.formatType==="json"&&this.subjectTokenFieldName&&(_=JSON.parse(y)[this.subjectTokenFieldName]),!_)throw new Error("Unable to parse the subject_token from the credential_source file");return _}}return filesubjecttokensupplier.FileSubjectTokenSupplier=a,filesubjecttokensupplier}var urlsubjecttokensupplier={},hasRequiredUrlsubjecttokensupplier;function requireUrlsubjecttokensupplier(){if(hasRequiredUrlsubjecttokensupplier)return urlsubjecttokensupplier;hasRequiredUrlsubjecttokensupplier=1,Object.defineProperty(urlsubjecttokensupplier,"__esModule",{value:!0}),urlsubjecttokensupplier.UrlSubjectTokenSupplier=void 0;class e{constructor(s){this.url=s.url,this.formatType=s.formatType,this.subjectTokenFieldName=s.subjectTokenFieldName,this.headers=s.headers,this.additionalGaxiosOptions=s.additionalGaxiosOptions}async getSubjectToken(s){const p={...this.additionalGaxiosOptions,url:this.url,method:"GET",headers:this.headers,responseType:this.formatType};let g;if(this.formatType==="text"?g=(await s.transporter.request(p)).data:this.formatType==="json"&&this.subjectTokenFieldName&&(g=(await s.transporter.request(p)).data[this.subjectTokenFieldName]),!g)throw new Error("Unable to parse the subject_token from the credential_source URL");return g}}return urlsubjecttokensupplier.UrlSubjectTokenSupplier=e,urlsubjecttokensupplier}var hasRequiredIdentitypoolclient;function requireIdentitypoolclient(){if(hasRequiredIdentitypoolclient)return identitypoolclient;hasRequiredIdentitypoolclient=1,Object.defineProperty(identitypoolclient,"__esModule",{value:!0}),identitypoolclient.IdentityPoolClient=void 0;const e=requireBaseexternalclient(),t=requireUtil$8(),s=requireFilesubjecttokensupplier(),p=requireUrlsubjecttokensupplier();class g extends e.BaseExternalAccountClient{constructor(d,l){super(d,l);const a=(0,t.originalOrCamelOptions)(d),o=a.get("credential_source"),h=a.get("subject_token_supplier");if(!o&&!h)throw new Error("A credential source or subject token supplier must be specified.");if(o&&h)throw new Error("Only one of credential source or subject token supplier can be specified.");if(h)this.subjectTokenSupplier=h,this.credentialSourceType="programmatic";else{const v=(0,t.originalOrCamelOptions)(o),_=(0,t.originalOrCamelOptions)(v.get("format")),y=_.get("type")||"text",w=_.get("subject_token_field_name");if(y!=="json"&&y!=="text")throw new Error(`Invalid credential_source format "${y}"`);if(y==="json"&&!w)throw new Error("Missing subject_token_field_name for JSON credential_source format");const T=v.get("file"),I=v.get("url"),O=v.get("headers");if(T&&I)throw new Error('No valid Identity Pool "credential_source" provided, must be either file or url.');if(T&&!I)this.credentialSourceType="file",this.subjectTokenSupplier=new s.FileSubjectTokenSupplier({filePath:T,formatType:y,subjectTokenFieldName:w});else if(!T&&I)this.credentialSourceType="url",this.subjectTokenSupplier=new p.UrlSubjectTokenSupplier({url:I,formatType:y,subjectTokenFieldName:w,headers:O,additionalGaxiosOptions:g.RETRY_CONFIG});else throw new Error('No valid Identity Pool "credential_source" provided, must be either file or url.')}}async retrieveSubjectToken(){return this.subjectTokenSupplier.getSubjectToken(this.supplierContext)}}return identitypoolclient.IdentityPoolClient=g,identitypoolclient}var awsclient={},awsrequestsigner={},hasRequiredAwsrequestsigner;function requireAwsrequestsigner(){if(hasRequiredAwsrequestsigner)return awsrequestsigner;hasRequiredAwsrequestsigner=1,Object.defineProperty(awsrequestsigner,"__esModule",{value:!0}),awsrequestsigner.AwsRequestSigner=void 0;const e=requireCrypto(),t="AWS4-HMAC-SHA256",s="aws4_request";class p{constructor(a,o){this.getCredentials=a,this.region=o,this.crypto=(0,e.createCrypto)()}async getRequestOptions(a){if(!a.url)throw new Error('"url" is required in "amzOptions"');const o=typeof a.data=="object"?JSON.stringify(a.data):a.data,h=a.url,v=a.method||"GET",_=a.body||o,y=a.headers,w=await this.getCredentials(),T=new URL(h),I=await d({crypto:this.crypto,host:T.host,canonicalUri:T.pathname,canonicalQuerystring:T.search.substr(1),method:v,region:this.region,securityCredentials:w,requestPayload:_,additionalAmzHeaders:y}),O=Object.assign(I.amzDate?{"x-amz-date":I.amzDate}:{},{Authorization:I.authorizationHeader,host:T.host},y||{});w.token&&Object.assign(O,{"x-amz-security-token":w.token});const E={url:h,method:v,headers:O};return typeof _<"u"&&(E.body=_),E}}awsrequestsigner.AwsRequestSigner=p;async function g(l,a,o){return await l.signWithHmacSha256(a,o)}async function m(l,a,o,h,v){const _=await g(l,`AWS4${a}`,o),y=await g(l,_,h),w=await g(l,y,v);return await g(l,w,"aws4_request")}async function d(l){const a=l.additionalAmzHeaders||{},o=l.requestPayload||"",h=l.host.split(".")[0],v=new Date,_=v.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),y=v.toISOString().replace(/[-]/g,"").replace(/T.*/,""),w={};Object.keys(a).forEach($=>{w[$.toLowerCase()]=a[$]}),l.securityCredentials.token&&(w["x-amz-security-token"]=l.securityCredentials.token);const T=Object.assign({host:l.host},w.date?{}:{"x-amz-date":_},w);let I="";const O=Object.keys(T).sort();O.forEach($=>{I+=`${$}:${T[$]}
`});const E=O.join(";"),C=await l.crypto.sha256DigestHex(o),x=`${l.method}
${l.canonicalUri}
${l.canonicalQuerystring}
${I}
${E}
${C}`,j=`${y}/${l.region}/${h}/${s}`,D=`${t}
${_}
${j}
`+await l.crypto.sha256DigestHex(x),k=await m(l.crypto,l.securityCredentials.secretAccessKey,y,l.region,h),q=await g(l.crypto,k,D),G=`${t} Credential=${l.securityCredentials.accessKeyId}/${j}, SignedHeaders=${E}, Signature=${(0,e.fromArrayBufferToHex)(q)}`;return{amzDate:w.date?void 0:_,authorizationHeader:G,canonicalQuerystring:l.canonicalQuerystring}}return awsrequestsigner}var defaultawssecuritycredentialssupplier={},hasRequiredDefaultawssecuritycredentialssupplier;function requireDefaultawssecuritycredentialssupplier(){if(hasRequiredDefaultawssecuritycredentialssupplier)return defaultawssecuritycredentialssupplier;hasRequiredDefaultawssecuritycredentialssupplier=1;var e={},t=defaultawssecuritycredentialssupplier&&defaultawssecuritycredentialssupplier.__classPrivateFieldGet||function(o,h,v,_){if(v==="a"&&!_)throw new TypeError("Private accessor was defined without a getter");if(typeof h=="function"?o!==h||!_:!h.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return v==="m"?_:v==="a"?_.call(o):_?_.value:h.get(o)},s,p,g,m,d,l;Object.defineProperty(defaultawssecuritycredentialssupplier,"__esModule",{value:!0}),defaultawssecuritycredentialssupplier.DefaultAwsSecurityCredentialsSupplier=void 0;class a{constructor(h){s.add(this),this.regionUrl=h.regionUrl,this.securityCredentialsUrl=h.securityCredentialsUrl,this.imdsV2SessionTokenUrl=h.imdsV2SessionTokenUrl,this.additionalGaxiosOptions=h.additionalGaxiosOptions}async getAwsRegion(h){if(t(this,s,"a",d))return t(this,s,"a",d);const v={};if(!t(this,s,"a",d)&&this.imdsV2SessionTokenUrl&&(v["x-aws-ec2-metadata-token"]=await t(this,s,"m",p).call(this,h.transporter)),!this.regionUrl)throw new Error('Unable to determine AWS region due to missing "options.credential_source.region_url"');const _={...this.additionalGaxiosOptions,url:this.regionUrl,method:"GET",responseType:"text",headers:v},y=await h.transporter.request(_);return y.data.substr(0,y.data.length-1)}async getAwsSecurityCredentials(h){if(t(this,s,"a",l))return t(this,s,"a",l);const v={};this.imdsV2SessionTokenUrl&&(v["x-aws-ec2-metadata-token"]=await t(this,s,"m",p).call(this,h.transporter));const _=await t(this,s,"m",g).call(this,v,h.transporter),y=await t(this,s,"m",m).call(this,_,v,h.transporter);return{accessKeyId:y.AccessKeyId,secretAccessKey:y.SecretAccessKey,token:y.Token}}}return defaultawssecuritycredentialssupplier.DefaultAwsSecurityCredentialsSupplier=a,s=new WeakSet,p=async function(h){const v={...this.additionalGaxiosOptions,url:this.imdsV2SessionTokenUrl,method:"PUT",responseType:"text",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return(await h.request(v)).data},g=async function(h,v){if(!this.securityCredentialsUrl)throw new Error('Unable to determine AWS role name due to missing "options.credential_source.url"');const _={...this.additionalGaxiosOptions,url:this.securityCredentialsUrl,method:"GET",responseType:"text",headers:h};return(await v.request(_)).data},m=async function(h,v,_){return(await _.request({...this.additionalGaxiosOptions,url:`${this.securityCredentialsUrl}/${h}`,responseType:"json",headers:v})).data},d=function(){return e.AWS_REGION||e.AWS_DEFAULT_REGION||null},l=function(){return e.AWS_ACCESS_KEY_ID&&e.AWS_SECRET_ACCESS_KEY?{accessKeyId:e.AWS_ACCESS_KEY_ID,secretAccessKey:e.AWS_SECRET_ACCESS_KEY,token:e.AWS_SESSION_TOKEN}:null},defaultawssecuritycredentialssupplier}var hasRequiredAwsclient;function requireAwsclient(){if(hasRequiredAwsclient)return awsclient;hasRequiredAwsclient=1;var e=awsclient&&awsclient.__classPrivateFieldGet||function(a,o,h,v){if(h==="a"&&!v)throw new TypeError("Private accessor was defined without a getter");if(typeof o=="function"?a!==o||!v:!o.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return h==="m"?v:h==="a"?v.call(a):v?v.value:o.get(a)},t,s;Object.defineProperty(awsclient,"__esModule",{value:!0}),awsclient.AwsClient=void 0;const p=requireAwsrequestsigner(),g=requireBaseexternalclient(),m=requireDefaultawssecuritycredentialssupplier(),d=requireUtil$8();class l extends g.BaseExternalAccountClient{constructor(o,h){super(o,h);const v=(0,d.originalOrCamelOptions)(o),_=v.get("credential_source"),y=v.get("aws_security_credentials_supplier");if(!_&&!y)throw new Error("A credential source or AWS security credentials supplier must be specified.");if(_&&y)throw new Error("Only one of credential source or AWS security credentials supplier can be specified.");if(y)this.awsSecurityCredentialsSupplier=y,this.regionalCredVerificationUrl=e(t,t,"f",s),this.credentialSourceType="programmatic";else{const w=(0,d.originalOrCamelOptions)(_);this.environmentId=w.get("environment_id");const T=w.get("region_url"),I=w.get("url"),O=w.get("imdsv2_session_token_url");this.awsSecurityCredentialsSupplier=new m.DefaultAwsSecurityCredentialsSupplier({regionUrl:T,securityCredentialsUrl:I,imdsV2SessionTokenUrl:O}),this.regionalCredVerificationUrl=w.get("regional_cred_verification_url"),this.credentialSourceType="aws",this.validateEnvironmentId()}this.awsRequestSigner=null,this.region=""}validateEnvironmentId(){var o;const h=(o=this.environmentId)===null||o===void 0?void 0:o.match(/^(aws)(\d+)$/);if(!h||!this.regionalCredVerificationUrl)throw new Error('No valid AWS "credential_source" provided');if(parseInt(h[2],10)!==1)throw new Error(`aws version "${h[2]}" is not supported in the current build.`)}async retrieveSubjectToken(){this.awsRequestSigner||(this.region=await this.awsSecurityCredentialsSupplier.getAwsRegion(this.supplierContext),this.awsRequestSigner=new p.AwsRequestSigner(async()=>this.awsSecurityCredentialsSupplier.getAwsSecurityCredentials(this.supplierContext),this.region));const o=await this.awsRequestSigner.getRequestOptions({...t.RETRY_CONFIG,url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),h=[],v=Object.assign({"x-goog-cloud-target-resource":this.audience},o.headers);for(const _ in v)h.push({key:_,value:v[_]});return encodeURIComponent(JSON.stringify({url:o.url,method:o.method,headers:h}))}}return awsclient.AwsClient=l,t=l,s={value:"https://sts.{region}.amazonaws.com?Action=GetCallerIdentity&Version=2011-06-15"},l.AWS_EC2_METADATA_IPV4_ADDRESS="169.254.169.254",l.AWS_EC2_METADATA_IPV6_ADDRESS="fd00:ec2::254",awsclient}var pluggableAuthClient={},executableResponse={},hasRequiredExecutableResponse;function requireExecutableResponse(){if(hasRequiredExecutableResponse)return executableResponse;hasRequiredExecutableResponse=1,Object.defineProperty(executableResponse,"__esModule",{value:!0}),executableResponse.InvalidSubjectTokenError=executableResponse.InvalidMessageFieldError=executableResponse.InvalidCodeFieldError=executableResponse.InvalidTokenTypeFieldError=executableResponse.InvalidExpirationTimeFieldError=executableResponse.InvalidSuccessFieldError=executableResponse.InvalidVersionFieldError=executableResponse.ExecutableResponseError=executableResponse.ExecutableResponse=void 0;const e="urn:ietf:params:oauth:token-type:saml2",t="urn:ietf:params:oauth:token-type:id_token",s="urn:ietf:params:oauth:token-type:jwt";class p{constructor(y){if(!y.version)throw new m("Executable response must contain a 'version' field.");if(y.success===void 0)throw new d("Executable response must contain a 'success' field.");if(this.version=y.version,this.success=y.success,this.success){if(this.expirationTime=y.expiration_time,this.tokenType=y.token_type,this.tokenType!==e&&this.tokenType!==t&&this.tokenType!==s)throw new a(`Executable response must contain a 'token_type' field when successful and it must be one of ${t}, ${s}, or ${e}.`);if(this.tokenType===e){if(!y.saml_response)throw new v(`Executable response must contain a 'saml_response' field when token_type=${e}.`);this.subjectToken=y.saml_response}else{if(!y.id_token)throw new v(`Executable response must contain a 'id_token' field when token_type=${t} or ${s}.`);this.subjectToken=y.id_token}}else{if(!y.code)throw new o("Executable response must contain a 'code' field when unsuccessful.");if(!y.message)throw new h("Executable response must contain a 'message' field when unsuccessful.");this.errorCode=y.code,this.errorMessage=y.message}}isValid(){return!this.isExpired()&&this.success}isExpired(){return this.expirationTime!==void 0&&this.expirationTime<Math.round(Date.now()/1e3)}}executableResponse.ExecutableResponse=p;class g extends Error{constructor(y){super(y),Object.setPrototypeOf(this,new.target.prototype)}}executableResponse.ExecutableResponseError=g;class m extends g{}executableResponse.InvalidVersionFieldError=m;class d extends g{}executableResponse.InvalidSuccessFieldError=d;class l extends g{}executableResponse.InvalidExpirationTimeFieldError=l;class a extends g{}executableResponse.InvalidTokenTypeFieldError=a;class o extends g{}executableResponse.InvalidCodeFieldError=o;class h extends g{}executableResponse.InvalidMessageFieldError=h;class v extends g{}return executableResponse.InvalidSubjectTokenError=v,executableResponse}var pluggableAuthHandler={},hasRequiredPluggableAuthHandler;function requirePluggableAuthHandler(){if(hasRequiredPluggableAuthHandler)return pluggableAuthHandler;hasRequiredPluggableAuthHandler=1;var e={};Object.defineProperty(pluggableAuthHandler,"__esModule",{value:!0}),pluggableAuthHandler.PluggableAuthHandler=void 0;const t=requirePluggableAuthClient(),s=requireExecutableResponse(),p=require$$1$3,g=require$$1$3;class m{constructor(l){if(!l.command)throw new Error("No command provided.");if(this.commandComponents=m.parseCommand(l.command),this.timeoutMillis=l.timeoutMillis,!this.timeoutMillis)throw new Error("No timeoutMillis provided.");this.outputFile=l.outputFile}retrieveResponseFromExecutable(l){return new Promise((a,o)=>{const h=p.spawn(this.commandComponents[0],this.commandComponents.slice(1),{env:{...e,...Object.fromEntries(l)}});let v="";h.stdout.on("data",y=>{v+=y}),h.stderr.on("data",y=>{v+=y});const _=setTimeout(()=>(h.removeAllListeners(),h.kill(),o(new Error("The executable failed to finish within the timeout specified."))),this.timeoutMillis);h.on("close",y=>{if(clearTimeout(_),y===0)try{const w=JSON.parse(v),T=new s.ExecutableResponse(w);return a(T)}catch(w){return w instanceof s.ExecutableResponseError?o(w):o(new s.ExecutableResponseError(`The executable returned an invalid response: ${v}`))}else return o(new t.ExecutableError(v,y.toString()))})})}async retrieveCachedResponse(){if(!this.outputFile||this.outputFile.length===0)return;let l;try{l=await g.promises.realpath(this.outputFile)}catch{return}if(!(await g.promises.lstat(l)).isFile())return;const a=await g.promises.readFile(l,{encoding:"utf8"});if(a!=="")try{const o=JSON.parse(a);return new s.ExecutableResponse(o).isValid()?new s.ExecutableResponse(o):void 0}catch(o){throw o instanceof s.ExecutableResponseError?o:new s.ExecutableResponseError(`The output file contained an invalid response: ${a}`)}}static parseCommand(l){const a=l.match(/(?:[^\s"]+|"[^"]*")+/g);if(!a)throw new Error(`Provided command: "${l}" could not be parsed.`);for(let o=0;o<a.length;o++)a[o][0]==='"'&&a[o].slice(-1)==='"'&&(a[o]=a[o].slice(1,-1));return a}}return pluggableAuthHandler.PluggableAuthHandler=m,pluggableAuthHandler}var hasRequiredPluggableAuthClient;function requirePluggableAuthClient(){if(hasRequiredPluggableAuthClient)return pluggableAuthClient;hasRequiredPluggableAuthClient=1;var e={};Object.defineProperty(pluggableAuthClient,"__esModule",{value:!0}),pluggableAuthClient.PluggableAuthClient=pluggableAuthClient.ExecutableError=void 0;const t=requireBaseexternalclient(),s=requireExecutableResponse(),p=requirePluggableAuthHandler();class g extends Error{constructor(_,y){super(`The executable failed with exit code: ${y} and error message: ${_}.`),this.code=y,Object.setPrototypeOf(this,new.target.prototype)}}pluggableAuthClient.ExecutableError=g;const m=30*1e3,d=5*1e3,l=120*1e3,a="GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES",o=1;class h extends t.BaseExternalAccountClient{constructor(_,y){if(super(_,y),!_.credential_source.executable)throw new Error('No valid Pluggable Auth "credential_source" provided.');if(this.command=_.credential_source.executable.command,!this.command)throw new Error('No valid Pluggable Auth "credential_source" provided.');if(_.credential_source.executable.timeout_millis===void 0)this.timeoutMillis=m;else if(this.timeoutMillis=_.credential_source.executable.timeout_millis,this.timeoutMillis<d||this.timeoutMillis>l)throw new Error(`Timeout must be between ${d} and ${l} milliseconds.`);this.outputFile=_.credential_source.executable.output_file,this.handler=new p.PluggableAuthHandler({command:this.command,timeoutMillis:this.timeoutMillis,outputFile:this.outputFile}),this.credentialSourceType="executable"}async retrieveSubjectToken(){if(e[a]!=="1")throw new Error("Pluggable Auth executables need to be explicitly allowed to run by setting the GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES environment Variable to 1.");let _;if(this.outputFile&&(_=await this.handler.retrieveCachedResponse()),!_){const y=new Map;y.set("GOOGLE_EXTERNAL_ACCOUNT_AUDIENCE",this.audience),y.set("GOOGLE_EXTERNAL_ACCOUNT_TOKEN_TYPE",this.subjectTokenType),y.set("GOOGLE_EXTERNAL_ACCOUNT_INTERACTIVE","0"),this.outputFile&&y.set("GOOGLE_EXTERNAL_ACCOUNT_OUTPUT_FILE",this.outputFile);const w=this.getServiceAccountEmail();w&&y.set("GOOGLE_EXTERNAL_ACCOUNT_IMPERSONATED_EMAIL",w),_=await this.handler.retrieveResponseFromExecutable(y)}if(_.version>o)throw new Error(`Version of executable is not currently supported, maximum supported version is ${o}.`);if(!_.success)throw new g(_.errorMessage,_.errorCode);if(this.outputFile&&!_.expirationTime)throw new s.InvalidExpirationTimeFieldError("The executable response must contain the `expiration_time` field for successful responses when an output_file has been specified in the configuration.");if(_.isExpired())throw new Error("Executable response is expired.");return _.subjectToken}}return pluggableAuthClient.PluggableAuthClient=h,pluggableAuthClient}var hasRequiredExternalclient;function requireExternalclient(){if(hasRequiredExternalclient)return externalclient;hasRequiredExternalclient=1,Object.defineProperty(externalclient,"__esModule",{value:!0}),externalclient.ExternalAccountClient=void 0;const e=requireBaseexternalclient(),t=requireIdentitypoolclient(),s=requireAwsclient(),p=requirePluggableAuthClient();class g{constructor(){throw new Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options), newPluggableAuthClientOptions, or via new GoogleAuth(options).getClient()")}static fromJSON(d,l){var a,o;return d&&d.type===e.EXTERNAL_ACCOUNT_TYPE?!((a=d.credential_source)===null||a===void 0)&&a.environment_id?new s.AwsClient(d,l):!((o=d.credential_source)===null||o===void 0)&&o.executable?new p.PluggableAuthClient(d,l):new t.IdentityPoolClient(d,l):null}}return externalclient.ExternalAccountClient=g,externalclient}var externalAccountAuthorizedUserClient={},hasRequiredExternalAccountAuthorizedUserClient;function requireExternalAccountAuthorizedUserClient(){if(hasRequiredExternalAccountAuthorizedUserClient)return externalAccountAuthorizedUserClient;hasRequiredExternalAccountAuthorizedUserClient=1,Object.defineProperty(externalAccountAuthorizedUserClient,"__esModule",{value:!0}),externalAccountAuthorizedUserClient.ExternalAccountAuthorizedUserClient=externalAccountAuthorizedUserClient.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=void 0;const e=requireAuthclient(),t=requireOauth2common(),s=requireSrc$f(),p=require$$1$3,g=requireBaseexternalclient();externalAccountAuthorizedUserClient.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE="external_account_authorized_user";const m="https://sts.{universeDomain}/v1/oauthtoken";class d extends t.OAuthClientAuthHandler{constructor(o,h,v){super(v),this.url=o,this.transporter=h}async refreshToken(o,h){const v=new URLSearchParams({grant_type:"refresh_token",refresh_token:o}),_={"Content-Type":"application/x-www-form-urlencoded",...h},y={...d.RETRY_CONFIG,url:this.url,method:"POST",headers:_,data:v.toString(),responseType:"json"};this.applyClientAuthenticationOptions(y);try{const w=await this.transporter.request(y),T=w.data;return T.res=w,T}catch(w){throw w instanceof s.GaxiosError&&w.response?(0,t.getErrorFromOAuthErrorResponse)(w.response.data,w):w}}}class l extends e.AuthClient{constructor(o,h){var v;super({...o,...h}),o.universe_domain&&(this.universeDomain=o.universe_domain),this.refreshToken=o.refresh_token;const _={confidentialClientType:"basic",clientId:o.client_id,clientSecret:o.client_secret};this.externalAccountAuthorizedUserHandler=new d((v=o.token_url)!==null&&v!==void 0?v:m.replace("{universeDomain}",this.universeDomain),this.transporter,_),this.cachedAccessToken=null,this.quotaProjectId=o.quota_project_id,typeof h?.eagerRefreshThresholdMillis!="number"?this.eagerRefreshThresholdMillis=g.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=h.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!h?.forceRefreshOnFailure}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){const h={Authorization:`Bearer ${(await this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(h)}request(o,h){if(h)this.requestAsync(o).then(v=>h(null,v),v=>h(v,v.response));else return this.requestAsync(o)}async requestAsync(o,h=!1){let v;try{const _=await this.getRequestHeaders();o.headers=o.headers||{},_&&_["x-goog-user-project"]&&(o.headers["x-goog-user-project"]=_["x-goog-user-project"]),_&&_.Authorization&&(o.headers.Authorization=_.Authorization),v=await this.transporter.request(o)}catch(_){const y=_.response;if(y){const w=y.status,T=y.config.data instanceof p.Readable;if(!h&&(w===401||w===403)&&!T&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(o,!0)}throw _}return v}async refreshAccessTokenAsync(){const o=await this.externalAccountAuthorizedUserHandler.refreshToken(this.refreshToken);return this.cachedAccessToken={access_token:o.access_token,expiry_date:new Date().getTime()+o.expires_in*1e3,res:o.res},o.refresh_token!==void 0&&(this.refreshToken=o.refresh_token),this.cachedAccessToken}isExpired(o){const h=new Date().getTime();return o.expiry_date?h>=o.expiry_date-this.eagerRefreshThresholdMillis:!1}}return externalAccountAuthorizedUserClient.ExternalAccountAuthorizedUserClient=l,externalAccountAuthorizedUserClient}var hasRequiredGoogleauth;function requireGoogleauth(){return hasRequiredGoogleauth||(hasRequiredGoogleauth=1,(function(e){var t={},s=googleauth&&googleauth.__classPrivateFieldGet||function(W,K,z,Q){if(z==="a"&&!Q)throw new TypeError("Private accessor was defined without a getter");if(typeof K=="function"?W!==K||!Q:!K.has(W))throw new TypeError("Cannot read private member from an object whose class did not declare it");return z==="m"?Q:z==="a"?Q.call(W):Q?Q.value:K.get(W)},p=googleauth&&googleauth.__classPrivateFieldSet||function(W,K,z,Q,Y){if(Q==="m")throw new TypeError("Private method is not writable");if(Q==="a"&&!Y)throw new TypeError("Private accessor was defined without a setter");if(typeof K=="function"?W!==K||!Y:!K.has(W))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Q==="a"?Y.call(W,z):Y?Y.value=z:K.set(W,z),z},g,m,d,l;Object.defineProperty(e,"__esModule",{value:!0}),e.GoogleAuth=e.GoogleAuthExceptionMessages=e.CLOUD_SDK_CLIENT_ID=void 0;const a=require$$1$3,o=require$$1$3,h=requireSrc$d(),v=require$$1$3,_=require$$1$3,y=requireCrypto(),w=requireTransporters(),T=requireComputeclient(),I=requireIdtokenclient(),O=requireEnvDetect(),E=requireJwtclient(),C=requireRefreshclient(),x=requireImpersonated(),j=requireExternalclient(),D=requireBaseexternalclient(),k=requireAuthclient(),q=requireExternalAccountAuthorizedUserClient(),G=requireUtil$8();e.CLOUD_SDK_CLIENT_ID="764086051850-6qr4p6gpi6hn506pt8ejuq83di341hur.apps.googleusercontent.com",e.GoogleAuthExceptionMessages={API_KEY_WITH_CREDENTIALS:"API Keys and Credentials are mutually exclusive authentication methods and cannot be used together.",NO_PROJECT_ID_FOUND:`Unable to detect a Project Id in the current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`,NO_CREDENTIALS_FOUND:`Unable to find credentials in current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`,NO_ADC_FOUND:"Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.",NO_UNIVERSE_DOMAIN_FOUND:`Unable to detect a Universe Domain in the current environment.
To learn more about Universe Domain retrieval, visit: 
https://cloud.google.com/compute/docs/metadata/predefined-metadata-keys`};class ${get isGCE(){return this.checkIsGCE}constructor(K={}){if(g.add(this),this.checkIsGCE=void 0,this.jsonContent=null,this.cachedCredential=null,m.set(this,null),this.clientOptions={},this._cachedProjectId=K.projectId||null,this.cachedCredential=K.authClient||null,this.keyFilename=K.keyFilename||K.keyFile,this.scopes=K.scopes,this.clientOptions=K.clientOptions||{},this.jsonContent=K.credentials||null,this.apiKey=K.apiKey||this.clientOptions.apiKey||null,this.apiKey&&(this.jsonContent||this.clientOptions.credentials))throw new RangeError(e.GoogleAuthExceptionMessages.API_KEY_WITH_CREDENTIALS);K.universeDomain&&(this.clientOptions.universeDomain=K.universeDomain)}setGapicJWTValues(K){K.defaultServicePath=this.defaultServicePath,K.useJWTAccessWithScope=this.useJWTAccessWithScope,K.defaultScopes=this.defaultScopes}getProjectId(K){if(K)this.getProjectIdAsync().then(z=>K(null,z),K);else return this.getProjectIdAsync()}async getProjectIdOptional(){try{return await this.getProjectId()}catch(K){if(K instanceof Error&&K.message===e.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)return null;throw K}}async findAndCacheProjectId(){let K=null;if(K||(K=await this.getProductionProjectId()),K||(K=await this.getFileProjectId()),K||(K=await this.getDefaultServiceProjectId()),K||(K=await this.getGCEProjectId()),K||(K=await this.getExternalAccountClientProjectId()),K)return this._cachedProjectId=K,K;throw new Error(e.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)}async getProjectIdAsync(){return this._cachedProjectId?this._cachedProjectId:(this._findProjectIdPromise||(this._findProjectIdPromise=this.findAndCacheProjectId()),this._findProjectIdPromise)}async getUniverseDomainFromMetadataServer(){var K;let z;try{z=await h.universe("universe-domain"),z||(z=k.DEFAULT_UNIVERSE)}catch(Q){if(Q&&((K=Q?.response)===null||K===void 0?void 0:K.status)===404)z=k.DEFAULT_UNIVERSE;else throw Q}return z}async getUniverseDomain(){let K=(0,G.originalOrCamelOptions)(this.clientOptions).get("universe_domain");try{K??(K=(await this.getClient()).universeDomain)}catch{K??(K=k.DEFAULT_UNIVERSE)}return K}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault(K={},z){let Q;if(typeof K=="function"?z=K:Q=K,z)this.getApplicationDefaultAsync(Q).then(Y=>z(null,Y.credential,Y.projectId),z);else return this.getApplicationDefaultAsync(Q)}async getApplicationDefaultAsync(K={}){if(this.cachedCredential)return await s(this,g,"m",d).call(this,this.cachedCredential,null);let z;if(z=await this._tryGetApplicationCredentialsFromEnvironmentVariable(K),z)return z instanceof E.JWT?z.scopes=this.scopes:z instanceof D.BaseExternalAccountClient&&(z.scopes=this.getAnyScopes()),await s(this,g,"m",d).call(this,z);if(z=await this._tryGetApplicationCredentialsFromWellKnownFile(K),z)return z instanceof E.JWT?z.scopes=this.scopes:z instanceof D.BaseExternalAccountClient&&(z.scopes=this.getAnyScopes()),await s(this,g,"m",d).call(this,z);if(await this._checkIsGCE())return K.scopes=this.getAnyScopes(),await s(this,g,"m",d).call(this,new T.Compute(K));throw new Error(e.GoogleAuthExceptionMessages.NO_ADC_FOUND)}async _checkIsGCE(){return this.checkIsGCE===void 0&&(this.checkIsGCE=h.getGCPResidency()||await h.isAvailable()),this.checkIsGCE}async _tryGetApplicationCredentialsFromEnvironmentVariable(K){const z=t.GOOGLE_APPLICATION_CREDENTIALS||t.google_application_credentials;if(!z||z.length===0)return null;try{return this._getApplicationCredentialsFromFilePath(z,K)}catch(Q){throw Q instanceof Error&&(Q.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${Q.message}`),Q}}async _tryGetApplicationCredentialsFromWellKnownFile(K){let z=null;if(this._isWindows())z=t.APPDATA;else{const Y=t.HOME;Y&&(z=_.join(Y,".config"))}return z&&(z=_.join(z,"gcloud","application_default_credentials.json"),o.existsSync(z)||(z=null)),z?await this._getApplicationCredentialsFromFilePath(z,K):null}async _getApplicationCredentialsFromFilePath(K,z={}){if(!K||K.length===0)throw new Error("The file path is invalid.");try{if(K=o.realpathSync(K),!o.lstatSync(K).isFile())throw new Error}catch(Y){throw Y instanceof Error&&(Y.message=`The file at ${K} does not exist, or it is not a file. ${Y.message}`),Y}const Q=o.createReadStream(K);return this.fromStream(Q,z)}fromImpersonatedJSON(K){var z,Q,Y,te;if(!K)throw new Error("Must pass in a JSON object containing an  impersonated refresh token");if(K.type!==x.IMPERSONATED_ACCOUNT_TYPE)throw new Error(`The incoming JSON object does not have the "${x.IMPERSONATED_ACCOUNT_TYPE}" type`);if(!K.source_credentials)throw new Error("The incoming JSON object does not contain a source_credentials field");if(!K.service_account_impersonation_url)throw new Error("The incoming JSON object does not contain a service_account_impersonation_url field");const ae=this.fromJSON(K.source_credentials);if(((z=K.service_account_impersonation_url)===null||z===void 0?void 0:z.length)>256)throw new RangeError(`Target principal is too long: ${K.service_account_impersonation_url}`);const ue=(Y=(Q=/(?<target>[^/]+):(generateAccessToken|generateIdToken)$/.exec(K.service_account_impersonation_url))===null||Q===void 0?void 0:Q.groups)===null||Y===void 0?void 0:Y.target;if(!ue)throw new RangeError(`Cannot extract target principal from ${K.service_account_impersonation_url}`);const ee=(te=this.getAnyScopes())!==null&&te!==void 0?te:[];return new x.Impersonated({...K,sourceClient:ae,targetPrincipal:ue,targetScopes:Array.isArray(ee)?ee:[ee]})}fromJSON(K,z={}){let Q;const Y=(0,G.originalOrCamelOptions)(z).get("universe_domain");return K.type===C.USER_REFRESH_ACCOUNT_TYPE?(Q=new C.UserRefreshClient(z),Q.fromJSON(K)):K.type===x.IMPERSONATED_ACCOUNT_TYPE?Q=this.fromImpersonatedJSON(K):K.type===D.EXTERNAL_ACCOUNT_TYPE?(Q=j.ExternalAccountClient.fromJSON(K,z),Q.scopes=this.getAnyScopes()):K.type===q.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE?Q=new q.ExternalAccountAuthorizedUserClient(K,z):(z.scopes=this.scopes,Q=new E.JWT(z),this.setGapicJWTValues(Q),Q.fromJSON(K)),Y&&(Q.universeDomain=Y),Q}_cacheClientFromJSON(K,z){const Q=this.fromJSON(K,z);return this.jsonContent=K,this.cachedCredential=Q,Q}fromStream(K,z={},Q){let Y={};if(typeof z=="function"?Q=z:Y=z,Q)this.fromStreamAsync(K,Y).then(te=>Q(null,te),Q);else return this.fromStreamAsync(K,Y)}fromStreamAsync(K,z){return new Promise((Q,Y)=>{if(!K)throw new Error("Must pass in a stream containing the Google auth settings.");const te=[];K.setEncoding("utf8").on("error",Y).on("data",ae=>te.push(ae)).on("end",()=>{try{try{const ae=JSON.parse(te.join("")),ue=this._cacheClientFromJSON(ae,z);return Q(ue)}catch(ae){if(!this.keyFilename)throw ae;const ue=new E.JWT({...this.clientOptions,keyFile:this.keyFilename});return this.cachedCredential=ue,this.setGapicJWTValues(ue),Q(ue)}}catch(ae){return Y(ae)}})})}fromAPIKey(K,z={}){return new E.JWT({...z,apiKey:K})}_isWindows(){const K=v.platform();return!!(K&&K.length>=3&&K.substring(0,3).toLowerCase()==="win")}async getDefaultServiceProjectId(){return new Promise(K=>{(0,a.exec)("gcloud config config-helper --format json",(z,Q)=>{if(!z&&Q)try{const Y=JSON.parse(Q).configuration.properties.core.project;K(Y);return}catch{}K(null)})})}getProductionProjectId(){return t.GCLOUD_PROJECT||t.GOOGLE_CLOUD_PROJECT||t.gcloud_project||t.google_cloud_project}async getFileProjectId(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){const z=await this.getClient();if(z&&z.projectId)return z.projectId}const K=await this._tryGetApplicationCredentialsFromEnvironmentVariable();return K?K.projectId:null}async getExternalAccountClientProjectId(){return!this.jsonContent||this.jsonContent.type!==D.EXTERNAL_ACCOUNT_TYPE?null:await(await this.getClient()).getProjectId()}async getGCEProjectId(){try{return await h.project("project-id")}catch{return null}}getCredentials(K){if(K)this.getCredentialsAsync().then(z=>K(null,z),K);else return this.getCredentialsAsync()}async getCredentialsAsync(){const K=await this.getClient();if(K instanceof x.Impersonated)return{client_email:K.getTargetPrincipal()};if(K instanceof D.BaseExternalAccountClient){const z=K.getServiceAccountEmail();if(z)return{client_email:z,universe_domain:K.universeDomain}}if(this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key,universe_domain:this.jsonContent.universe_domain};if(await this._checkIsGCE()){const[z,Q]=await Promise.all([h.instance("service-accounts/default/email"),this.getUniverseDomain()]);return{client_email:z,universe_domain:Q}}throw new Error(e.GoogleAuthExceptionMessages.NO_CREDENTIALS_FOUND)}async getClient(){if(this.cachedCredential)return this.cachedCredential;p(this,m,s(this,m,"f")||s(this,g,"m",l).call(this),"f");try{return await s(this,m,"f")}finally{p(this,m,null,"f")}}async getIdTokenClient(K){const z=await this.getClient();if(!("fetchIdToken"in z))throw new Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new I.IdTokenClient({targetAudience:K,idTokenProvider:z})}async getAccessToken(){return(await(await this.getClient()).getAccessToken()).token}async getRequestHeaders(K){return(await this.getClient()).getRequestHeaders(K)}async authorizeRequest(K){K=K||{};const z=K.url||K.uri,Y=await(await this.getClient()).getRequestHeaders(z);return K.headers=Object.assign(K.headers||{},Y),K}async request(K){return(await this.getClient()).request(K)}getEnv(){return(0,O.getEnv)()}async sign(K,z){const Q=await this.getClient(),Y=await this.getUniverseDomain();if(z=z||`https://iamcredentials.${Y}/v1/projects/-/serviceAccounts/`,Q instanceof x.Impersonated)return(await Q.sign(K)).signedBlob;const te=(0,y.createCrypto)();if(Q instanceof E.JWT&&Q.key)return await te.sign(Q.key,K);const ae=await this.getCredentials();if(!ae.client_email)throw new Error("Cannot sign data without `client_email`.");return this.signBlob(te,ae.client_email,K,z)}async signBlob(K,z,Q,Y){const te=new URL(Y+`${z}:signBlob`);return(await this.request({method:"POST",url:te.href,data:{payload:K.encodeBase64StringUtf8(Q)},retry:!0,retryConfig:{httpMethodsToRetry:["POST"]}})).data.signedBlob}}e.GoogleAuth=$,m=new WeakMap,g=new WeakSet,d=async function(K,z=t.GOOGLE_CLOUD_QUOTA_PROJECT||null){const Q=await this.getProjectIdOptional();return z&&(K.quotaProjectId=z),this.cachedCredential=K,{credential:K,projectId:Q}},l=async function(){if(this.jsonContent)return this._cacheClientFromJSON(this.jsonContent,this.clientOptions);if(this.keyFilename){const K=_.resolve(this.keyFilename),z=o.createReadStream(K);return await this.fromStreamAsync(z,this.clientOptions)}else if(this.apiKey){const K=await this.fromAPIKey(this.apiKey,this.clientOptions);K.scopes=this.scopes;const{credential:z}=await s(this,g,"m",d).call(this,K);return z}else{const{credential:K}=await this.getApplicationDefaultAsync(this.clientOptions);return K}},$.DefaultTransporter=w.DefaultTransporter})(googleauth)),googleauth}var iam$1={},hasRequiredIam$1;function requireIam$1(){if(hasRequiredIam$1)return iam$1;hasRequiredIam$1=1,Object.defineProperty(iam$1,"__esModule",{value:!0}),iam$1.IAMAuth=void 0;class e{constructor(s,p){this.selector=s,this.token=p,this.selector=s,this.token=p}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}}return iam$1.IAMAuth=e,iam$1}var downscopedclient={},hasRequiredDownscopedclient;function requireDownscopedclient(){return hasRequiredDownscopedclient||(hasRequiredDownscopedclient=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DownscopedClient=e.EXPIRATION_TIME_OFFSET=e.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;const t=require$$1$3,s=requireAuthclient(),p=requireStscredentials(),g="urn:ietf:params:oauth:grant-type:token-exchange",m="urn:ietf:params:oauth:token-type:access_token",d="urn:ietf:params:oauth:token-type:access_token";e.MAX_ACCESS_BOUNDARY_RULES_COUNT=10,e.EXPIRATION_TIME_OFFSET=3e5;class l extends s.AuthClient{constructor(o,h,v,_){if(super({...v,quotaProjectId:_}),this.authClient=o,this.credentialAccessBoundary=h,h.accessBoundary.accessBoundaryRules.length===0)throw new Error("At least one access boundary rule needs to be defined.");if(h.accessBoundary.accessBoundaryRules.length>e.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw new Error(`The provided access boundary has more than ${e.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(const y of h.accessBoundary.accessBoundaryRules)if(y.availablePermissions.length===0)throw new Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new p.StsCredentials(`https://sts.${this.universeDomain}/v1/token`),this.cachedDownscopedAccessToken=null}setCredentials(o){if(!o.expiry_date)throw new Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials(o),this.cachedDownscopedAccessToken=o}async getAccessToken(){return(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}}async getRequestHeaders(){const h={Authorization:`Bearer ${(await this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(h)}request(o,h){if(h)this.requestAsync(o).then(v=>h(null,v),v=>h(v,v.response));else return this.requestAsync(o)}async requestAsync(o,h=!1){let v;try{const _=await this.getRequestHeaders();o.headers=o.headers||{},_&&_["x-goog-user-project"]&&(o.headers["x-goog-user-project"]=_["x-goog-user-project"]),_&&_.Authorization&&(o.headers.Authorization=_.Authorization),v=await this.transporter.request(o)}catch(_){const y=_.response;if(y){const w=y.status,T=y.config.data instanceof t.Readable;if(!h&&(w===401||w===403)&&!T&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(o,!0)}throw _}return v}async refreshAccessTokenAsync(){var o;const h=(await this.authClient.getAccessToken()).token,v={grantType:g,requestedTokenType:m,subjectToken:h,subjectTokenType:d},_=await this.stsCredential.exchangeToken(v,void 0,this.credentialAccessBoundary),y=((o=this.authClient.credentials)===null||o===void 0?void 0:o.expiry_date)||null,w=_.expires_in?new Date().getTime()+_.expires_in*1e3:y;return this.cachedDownscopedAccessToken={access_token:_.access_token,expiry_date:w,res:_.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken}isExpired(o){const h=new Date().getTime();return o.expiry_date?h>=o.expiry_date-this.eagerRefreshThresholdMillis:!1}}e.DownscopedClient=l})(downscopedclient)),downscopedclient}var passthrough={},hasRequiredPassthrough;function requirePassthrough(){if(hasRequiredPassthrough)return passthrough;hasRequiredPassthrough=1,Object.defineProperty(passthrough,"__esModule",{value:!0}),passthrough.PassThroughClient=void 0;const e=requireAuthclient();class t extends e.AuthClient{async request(g){return this.transporter.request(g)}async getAccessToken(){return{}}async getRequestHeaders(){return{}}}return passthrough.PassThroughClient=t,new t().getAccessToken(),passthrough}var hasRequiredSrc$b;function requireSrc$b(){return hasRequiredSrc$b||(hasRequiredSrc$b=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.GoogleAuth=e.auth=e.DefaultTransporter=e.PassThroughClient=e.ExecutableError=e.PluggableAuthClient=e.DownscopedClient=e.BaseExternalAccountClient=e.ExternalAccountClient=e.IdentityPoolClient=e.AwsRequestSigner=e.AwsClient=e.UserRefreshClient=e.LoginTicket=e.ClientAuthentication=e.OAuth2Client=e.CodeChallengeMethod=e.Impersonated=e.JWT=e.JWTAccess=e.IdTokenClient=e.IAMAuth=e.GCPEnv=e.Compute=e.DEFAULT_UNIVERSE=e.AuthClient=e.gaxios=e.gcpMetadata=void 0;const t=requireGoogleauth();Object.defineProperty(e,"GoogleAuth",{enumerable:!0,get:function(){return t.GoogleAuth}}),e.gcpMetadata=requireSrc$d(),e.gaxios=requireSrc$f();var s=requireAuthclient();Object.defineProperty(e,"AuthClient",{enumerable:!0,get:function(){return s.AuthClient}}),Object.defineProperty(e,"DEFAULT_UNIVERSE",{enumerable:!0,get:function(){return s.DEFAULT_UNIVERSE}});var p=requireComputeclient();Object.defineProperty(e,"Compute",{enumerable:!0,get:function(){return p.Compute}});var g=requireEnvDetect();Object.defineProperty(e,"GCPEnv",{enumerable:!0,get:function(){return g.GCPEnv}});var m=requireIam$1();Object.defineProperty(e,"IAMAuth",{enumerable:!0,get:function(){return m.IAMAuth}});var d=requireIdtokenclient();Object.defineProperty(e,"IdTokenClient",{enumerable:!0,get:function(){return d.IdTokenClient}});var l=requireJwtaccess();Object.defineProperty(e,"JWTAccess",{enumerable:!0,get:function(){return l.JWTAccess}});var a=requireJwtclient();Object.defineProperty(e,"JWT",{enumerable:!0,get:function(){return a.JWT}});var o=requireImpersonated();Object.defineProperty(e,"Impersonated",{enumerable:!0,get:function(){return o.Impersonated}});var h=requireOauth2client();Object.defineProperty(e,"CodeChallengeMethod",{enumerable:!0,get:function(){return h.CodeChallengeMethod}}),Object.defineProperty(e,"OAuth2Client",{enumerable:!0,get:function(){return h.OAuth2Client}}),Object.defineProperty(e,"ClientAuthentication",{enumerable:!0,get:function(){return h.ClientAuthentication}});var v=requireLoginticket();Object.defineProperty(e,"LoginTicket",{enumerable:!0,get:function(){return v.LoginTicket}});var _=requireRefreshclient();Object.defineProperty(e,"UserRefreshClient",{enumerable:!0,get:function(){return _.UserRefreshClient}});var y=requireAwsclient();Object.defineProperty(e,"AwsClient",{enumerable:!0,get:function(){return y.AwsClient}});var w=requireAwsrequestsigner();Object.defineProperty(e,"AwsRequestSigner",{enumerable:!0,get:function(){return w.AwsRequestSigner}});var T=requireIdentitypoolclient();Object.defineProperty(e,"IdentityPoolClient",{enumerable:!0,get:function(){return T.IdentityPoolClient}});var I=requireExternalclient();Object.defineProperty(e,"ExternalAccountClient",{enumerable:!0,get:function(){return I.ExternalAccountClient}});var O=requireBaseexternalclient();Object.defineProperty(e,"BaseExternalAccountClient",{enumerable:!0,get:function(){return O.BaseExternalAccountClient}});var E=requireDownscopedclient();Object.defineProperty(e,"DownscopedClient",{enumerable:!0,get:function(){return E.DownscopedClient}});var C=requirePluggableAuthClient();Object.defineProperty(e,"PluggableAuthClient",{enumerable:!0,get:function(){return C.PluggableAuthClient}}),Object.defineProperty(e,"ExecutableError",{enumerable:!0,get:function(){return C.ExecutableError}});var x=requirePassthrough();Object.defineProperty(e,"PassThroughClient",{enumerable:!0,get:function(){return x.PassThroughClient}});var j=requireTransporters();Object.defineProperty(e,"DefaultTransporter",{enumerable:!0,get:function(){return j.DefaultTransporter}});const D=new t.GoogleAuth;e.auth=D})(src$f)),src$f}var forge,hasRequiredForge;function requireForge(){return hasRequiredForge||(hasRequiredForge=1,forge={options:{usePureJavaScript:!1}}),forge}var util$7={exports:{}},baseN,hasRequiredBaseN;function requireBaseN(){if(hasRequiredBaseN)return baseN;hasRequiredBaseN=1;var e={};baseN=e;var t={};e.encode=function(p,g,m){if(typeof g!="string")throw new TypeError('"alphabet" must be a string.');if(m!==void 0&&typeof m!="number")throw new TypeError('"maxline" must be a number.');var d="";if(!(p instanceof Uint8Array))d=s(p,g);else{var l=0,a=g.length,o=g.charAt(0),h=[0];for(l=0;l<p.length;++l){for(var v=0,_=p[l];v<h.length;++v)_+=h[v]<<8,h[v]=_%a,_=_/a|0;for(;_>0;)h.push(_%a),_=_/a|0}for(l=0;p[l]===0&&l<p.length-1;++l)d+=o;for(l=h.length-1;l>=0;--l)d+=g[h[l]]}if(m){var y=new RegExp(".{1,"+m+"}","g");d=d.match(y).join(`\r
`)}return d},e.decode=function(p,g){if(typeof p!="string")throw new TypeError('"input" must be a string.');if(typeof g!="string")throw new TypeError('"alphabet" must be a string.');var m=t[g];if(!m){m=t[g]=[];for(var d=0;d<g.length;++d)m[g.charCodeAt(d)]=d}p=p.replace(/\s/g,"");for(var l=g.length,a=g.charAt(0),o=[0],d=0;d<p.length;d++){var h=m[p.charCodeAt(d)];if(h===void 0)return;for(var v=0,_=h;v<o.length;++v)_+=o[v]*l,o[v]=_&255,_>>=8;for(;_>0;)o.push(_&255),_>>=8}for(var y=0;p[y]===a&&y<p.length-1;++y)o.push(0);return typeof Buffer<"u"?Buffer.from(o.reverse()):new Uint8Array(o.reverse())};function s(p,g){var m=0,d=g.length,l=g.charAt(0),a=[0];for(m=0;m<p.length();++m){for(var o=0,h=p.at(m);o<a.length;++o)h+=a[o]<<8,a[o]=h%d,h=h/d|0;for(;h>0;)a.push(h%d),h=h/d|0}var v="";for(m=0;p.at(m)===0&&m<p.length()-1;++m)v+=l;for(m=a.length-1;m>=0;--m)v+=g[a[m]];return v}return baseN}var hasRequiredUtil$7;function requireUtil$7(){if(hasRequiredUtil$7)return util$7.exports;hasRequiredUtil$7=1;var e={},t=requireForge(),s=requireBaseN(),p=util$7.exports=t.util=t.util||{};(function(){if(typeof e<"u"&&e.nextTick&&!e.browser){p.nextTick=e.nextTick,typeof setImmediate=="function"?p.setImmediate=setImmediate:p.setImmediate=p.nextTick;return}if(typeof setImmediate=="function"){p.setImmediate=function(){return setImmediate.apply(void 0,arguments)},p.nextTick=function(q){return setImmediate(q)};return}if(p.setImmediate=function(q){setTimeout(q,0)},typeof window<"u"&&typeof window.postMessage=="function"){let q=function(G){if(G.source===window&&G.data===E){G.stopPropagation();var $=C.slice();C.length=0,$.forEach(function(W){W()})}};var E="forge.setImmediate",C=[];p.setImmediate=function(G){C.push(G),C.length===1&&window.postMessage(E,"*")},window.addEventListener("message",q,!0)}if(typeof MutationObserver<"u"){var x=Date.now(),j=!0,D=document.createElement("div"),C=[];new MutationObserver(function(){var G=C.slice();C.length=0,G.forEach(function($){$()})}).observe(D,{attributes:!0});var k=p.setImmediate;p.setImmediate=function(G){Date.now()-x>15?(x=Date.now(),k(G)):(C.push(G),C.length===1&&D.setAttribute("a",j=!j))}}p.nextTick=p.setImmediate})(),p.isNodejs=typeof e<"u"&&e.versions&&e.versions.node,p.globalScope=(function(){return p.isNodejs?commonjsGlobal:typeof self>"u"?window:self})(),p.isArray=Array.isArray||function(E){return Object.prototype.toString.call(E)==="[object Array]"},p.isArrayBuffer=function(E){return typeof ArrayBuffer<"u"&&E instanceof ArrayBuffer},p.isArrayBufferView=function(E){return E&&p.isArrayBuffer(E.buffer)&&E.byteLength!==void 0};function g(E){if(!(E===8||E===16||E===24||E===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+E)}p.ByteBuffer=m;function m(E){if(this.data="",this.read=0,typeof E=="string")this.data=E;else if(p.isArrayBuffer(E)||p.isArrayBufferView(E))if(typeof Buffer<"u"&&E instanceof Buffer)this.data=E.toString("binary");else{var C=new Uint8Array(E);try{this.data=String.fromCharCode.apply(null,C)}catch{for(var x=0;x<C.length;++x)this.putByte(C[x])}}else(E instanceof m||typeof E=="object"&&typeof E.data=="string"&&typeof E.read=="number")&&(this.data=E.data,this.read=E.read);this._constructedStringLength=0}p.ByteStringBuffer=m;var d=4096;p.ByteStringBuffer.prototype._optimizeConstructedString=function(E){this._constructedStringLength+=E,this._constructedStringLength>d&&(this.data.substr(0,1),this._constructedStringLength=0)},p.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},p.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},p.ByteStringBuffer.prototype.putByte=function(E){return this.putBytes(String.fromCharCode(E))},p.ByteStringBuffer.prototype.fillWithByte=function(E,C){E=String.fromCharCode(E);for(var x=this.data;C>0;)C&1&&(x+=E),C>>>=1,C>0&&(E+=E);return this.data=x,this._optimizeConstructedString(C),this},p.ByteStringBuffer.prototype.putBytes=function(E){return this.data+=E,this._optimizeConstructedString(E.length),this},p.ByteStringBuffer.prototype.putString=function(E){return this.putBytes(p.encodeUtf8(E))},p.ByteStringBuffer.prototype.putInt16=function(E){return this.putBytes(String.fromCharCode(E>>8&255)+String.fromCharCode(E&255))},p.ByteStringBuffer.prototype.putInt24=function(E){return this.putBytes(String.fromCharCode(E>>16&255)+String.fromCharCode(E>>8&255)+String.fromCharCode(E&255))},p.ByteStringBuffer.prototype.putInt32=function(E){return this.putBytes(String.fromCharCode(E>>24&255)+String.fromCharCode(E>>16&255)+String.fromCharCode(E>>8&255)+String.fromCharCode(E&255))},p.ByteStringBuffer.prototype.putInt16Le=function(E){return this.putBytes(String.fromCharCode(E&255)+String.fromCharCode(E>>8&255))},p.ByteStringBuffer.prototype.putInt24Le=function(E){return this.putBytes(String.fromCharCode(E&255)+String.fromCharCode(E>>8&255)+String.fromCharCode(E>>16&255))},p.ByteStringBuffer.prototype.putInt32Le=function(E){return this.putBytes(String.fromCharCode(E&255)+String.fromCharCode(E>>8&255)+String.fromCharCode(E>>16&255)+String.fromCharCode(E>>24&255))},p.ByteStringBuffer.prototype.putInt=function(E,C){g(C);var x="";do C-=8,x+=String.fromCharCode(E>>C&255);while(C>0);return this.putBytes(x)},p.ByteStringBuffer.prototype.putSignedInt=function(E,C){return E<0&&(E+=2<<C-1),this.putInt(E,C)},p.ByteStringBuffer.prototype.putBuffer=function(E){return this.putBytes(E.getBytes())},p.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},p.ByteStringBuffer.prototype.getInt16=function(){var E=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,E},p.ByteStringBuffer.prototype.getInt24=function(){var E=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,E},p.ByteStringBuffer.prototype.getInt32=function(){var E=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,E},p.ByteStringBuffer.prototype.getInt16Le=function(){var E=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,E},p.ByteStringBuffer.prototype.getInt24Le=function(){var E=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,E},p.ByteStringBuffer.prototype.getInt32Le=function(){var E=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,E},p.ByteStringBuffer.prototype.getInt=function(E){g(E);var C=0;do C=(C<<8)+this.data.charCodeAt(this.read++),E-=8;while(E>0);return C},p.ByteStringBuffer.prototype.getSignedInt=function(E){var C=this.getInt(E),x=2<<E-2;return C>=x&&(C-=x<<1),C},p.ByteStringBuffer.prototype.getBytes=function(E){var C;return E?(E=Math.min(this.length(),E),C=this.data.slice(this.read,this.read+E),this.read+=E):E===0?C="":(C=this.read===0?this.data:this.data.slice(this.read),this.clear()),C},p.ByteStringBuffer.prototype.bytes=function(E){return typeof E>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+E)},p.ByteStringBuffer.prototype.at=function(E){return this.data.charCodeAt(this.read+E)},p.ByteStringBuffer.prototype.setAt=function(E,C){return this.data=this.data.substr(0,this.read+E)+String.fromCharCode(C)+this.data.substr(this.read+E+1),this},p.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},p.ByteStringBuffer.prototype.copy=function(){var E=p.createBuffer(this.data);return E.read=this.read,E},p.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},p.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},p.ByteStringBuffer.prototype.truncate=function(E){var C=Math.max(0,this.length()-E);return this.data=this.data.substr(this.read,C),this.read=0,this},p.ByteStringBuffer.prototype.toHex=function(){for(var E="",C=this.read;C<this.data.length;++C){var x=this.data.charCodeAt(C);x<16&&(E+="0"),E+=x.toString(16)}return E},p.ByteStringBuffer.prototype.toString=function(){return p.decodeUtf8(this.bytes())};function l(E,C){C=C||{},this.read=C.readOffset||0,this.growSize=C.growSize||1024;var x=p.isArrayBuffer(E),j=p.isArrayBufferView(E);if(x||j){x?this.data=new DataView(E):this.data=new DataView(E.buffer,E.byteOffset,E.byteLength),this.write="writeOffset"in C?C.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,E!=null&&this.putBytes(E),"writeOffset"in C&&(this.write=C.writeOffset)}p.DataBuffer=l,p.DataBuffer.prototype.length=function(){return this.write-this.read},p.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},p.DataBuffer.prototype.accommodate=function(E,C){if(this.length()>=E)return this;C=Math.max(C||this.growSize,E);var x=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),j=new Uint8Array(this.length()+C);return j.set(x),this.data=new DataView(j.buffer),this},p.DataBuffer.prototype.putByte=function(E){return this.accommodate(1),this.data.setUint8(this.write++,E),this},p.DataBuffer.prototype.fillWithByte=function(E,C){this.accommodate(C);for(var x=0;x<C;++x)this.data.setUint8(E);return this},p.DataBuffer.prototype.putBytes=function(E,C){if(p.isArrayBufferView(E)){var x=new Uint8Array(E.buffer,E.byteOffset,E.byteLength),j=x.byteLength-x.byteOffset;this.accommodate(j);var D=new Uint8Array(this.data.buffer,this.write);return D.set(x),this.write+=j,this}if(p.isArrayBuffer(E)){var x=new Uint8Array(E);this.accommodate(x.byteLength);var D=new Uint8Array(this.data.buffer);return D.set(x,this.write),this.write+=x.byteLength,this}if(E instanceof p.DataBuffer||typeof E=="object"&&typeof E.read=="number"&&typeof E.write=="number"&&p.isArrayBufferView(E.data)){var x=new Uint8Array(E.data.byteLength,E.read,E.length());this.accommodate(x.byteLength);var D=new Uint8Array(E.data.byteLength,this.write);return D.set(x),this.write+=x.byteLength,this}if(E instanceof p.ByteStringBuffer&&(E=E.data,C="binary"),C=C||"binary",typeof E=="string"){var k;if(C==="hex")return this.accommodate(Math.ceil(E.length/2)),k=new Uint8Array(this.data.buffer,this.write),this.write+=p.binary.hex.decode(E,k,this.write),this;if(C==="base64")return this.accommodate(Math.ceil(E.length/4)*3),k=new Uint8Array(this.data.buffer,this.write),this.write+=p.binary.base64.decode(E,k,this.write),this;if(C==="utf8"&&(E=p.encodeUtf8(E),C="binary"),C==="binary"||C==="raw")return this.accommodate(E.length),k=new Uint8Array(this.data.buffer,this.write),this.write+=p.binary.raw.decode(k),this;if(C==="utf16")return this.accommodate(E.length*2),k=new Uint16Array(this.data.buffer,this.write),this.write+=p.text.utf16.encode(k),this;throw new Error("Invalid encoding: "+C)}throw Error("Invalid parameter: "+E)},p.DataBuffer.prototype.putBuffer=function(E){return this.putBytes(E),E.clear(),this},p.DataBuffer.prototype.putString=function(E){return this.putBytes(E,"utf16")},p.DataBuffer.prototype.putInt16=function(E){return this.accommodate(2),this.data.setInt16(this.write,E),this.write+=2,this},p.DataBuffer.prototype.putInt24=function(E){return this.accommodate(3),this.data.setInt16(this.write,E>>8&65535),this.data.setInt8(this.write,E>>16&255),this.write+=3,this},p.DataBuffer.prototype.putInt32=function(E){return this.accommodate(4),this.data.setInt32(this.write,E),this.write+=4,this},p.DataBuffer.prototype.putInt16Le=function(E){return this.accommodate(2),this.data.setInt16(this.write,E,!0),this.write+=2,this},p.DataBuffer.prototype.putInt24Le=function(E){return this.accommodate(3),this.data.setInt8(this.write,E>>16&255),this.data.setInt16(this.write,E>>8&65535,!0),this.write+=3,this},p.DataBuffer.prototype.putInt32Le=function(E){return this.accommodate(4),this.data.setInt32(this.write,E,!0),this.write+=4,this},p.DataBuffer.prototype.putInt=function(E,C){g(C),this.accommodate(C/8);do C-=8,this.data.setInt8(this.write++,E>>C&255);while(C>0);return this},p.DataBuffer.prototype.putSignedInt=function(E,C){return g(C),this.accommodate(C/8),E<0&&(E+=2<<C-1),this.putInt(E,C)},p.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},p.DataBuffer.prototype.getInt16=function(){var E=this.data.getInt16(this.read);return this.read+=2,E},p.DataBuffer.prototype.getInt24=function(){var E=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,E},p.DataBuffer.prototype.getInt32=function(){var E=this.data.getInt32(this.read);return this.read+=4,E},p.DataBuffer.prototype.getInt16Le=function(){var E=this.data.getInt16(this.read,!0);return this.read+=2,E},p.DataBuffer.prototype.getInt24Le=function(){var E=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,E},p.DataBuffer.prototype.getInt32Le=function(){var E=this.data.getInt32(this.read,!0);return this.read+=4,E},p.DataBuffer.prototype.getInt=function(E){g(E);var C=0;do C=(C<<8)+this.data.getInt8(this.read++),E-=8;while(E>0);return C},p.DataBuffer.prototype.getSignedInt=function(E){var C=this.getInt(E),x=2<<E-2;return C>=x&&(C-=x<<1),C},p.DataBuffer.prototype.getBytes=function(E){var C;return E?(E=Math.min(this.length(),E),C=this.data.slice(this.read,this.read+E),this.read+=E):E===0?C="":(C=this.read===0?this.data:this.data.slice(this.read),this.clear()),C},p.DataBuffer.prototype.bytes=function(E){return typeof E>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+E)},p.DataBuffer.prototype.at=function(E){return this.data.getUint8(this.read+E)},p.DataBuffer.prototype.setAt=function(E,C){return this.data.setUint8(E,C),this},p.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},p.DataBuffer.prototype.copy=function(){return new p.DataBuffer(this)},p.DataBuffer.prototype.compact=function(){if(this.read>0){var E=new Uint8Array(this.data.buffer,this.read),C=new Uint8Array(E.byteLength);C.set(E),this.data=new DataView(C),this.write-=this.read,this.read=0}return this},p.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},p.DataBuffer.prototype.truncate=function(E){return this.write=Math.max(0,this.length()-E),this.read=Math.min(this.read,this.write),this},p.DataBuffer.prototype.toHex=function(){for(var E="",C=this.read;C<this.data.byteLength;++C){var x=this.data.getUint8(C);x<16&&(E+="0"),E+=x.toString(16)}return E},p.DataBuffer.prototype.toString=function(E){var C=new Uint8Array(this.data,this.read,this.length());if(E=E||"utf8",E==="binary"||E==="raw")return p.binary.raw.encode(C);if(E==="hex")return p.binary.hex.encode(C);if(E==="base64")return p.binary.base64.encode(C);if(E==="utf8")return p.text.utf8.decode(C);if(E==="utf16")return p.text.utf16.decode(C);throw new Error("Invalid encoding: "+E)},p.createBuffer=function(E,C){return C=C||"raw",E!==void 0&&C==="utf8"&&(E=p.encodeUtf8(E)),new p.ByteBuffer(E)},p.fillString=function(E,C){for(var x="";C>0;)C&1&&(x+=E),C>>>=1,C>0&&(E+=E);return x},p.xorBytes=function(E,C,x){for(var j="",D="",k="",q=0,G=0;x>0;--x,++q)D=E.charCodeAt(q)^C.charCodeAt(q),G>=10&&(j+=k,k="",G=0),k+=String.fromCharCode(D),++G;return j+=k,j},p.hexToBytes=function(E){var C="",x=0;for(E.length&!0&&(x=1,C+=String.fromCharCode(parseInt(E[0],16)));x<E.length;x+=2)C+=String.fromCharCode(parseInt(E.substr(x,2),16));return C},p.bytesToHex=function(E){return p.createBuffer(E).toHex()},p.int32ToBytes=function(E){return String.fromCharCode(E>>24&255)+String.fromCharCode(E>>16&255)+String.fromCharCode(E>>8&255)+String.fromCharCode(E&255)};var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],h="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";p.encode64=function(E,C){for(var x="",j="",D,k,q,G=0;G<E.length;)D=E.charCodeAt(G++),k=E.charCodeAt(G++),q=E.charCodeAt(G++),x+=a.charAt(D>>2),x+=a.charAt((D&3)<<4|k>>4),isNaN(k)?x+="==":(x+=a.charAt((k&15)<<2|q>>6),x+=isNaN(q)?"=":a.charAt(q&63)),C&&x.length>C&&(j+=x.substr(0,C)+`\r
`,x=x.substr(C));return j+=x,j},p.decode64=function(E){E=E.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var C="",x,j,D,k,q=0;q<E.length;)x=o[E.charCodeAt(q++)-43],j=o[E.charCodeAt(q++)-43],D=o[E.charCodeAt(q++)-43],k=o[E.charCodeAt(q++)-43],C+=String.fromCharCode(x<<2|j>>4),D!==64&&(C+=String.fromCharCode((j&15)<<4|D>>2),k!==64&&(C+=String.fromCharCode((D&3)<<6|k)));return C},p.encodeUtf8=function(E){return unescape(encodeURIComponent(E))},p.decodeUtf8=function(E){return decodeURIComponent(escape(E))},p.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:s.encode,decode:s.decode}},p.binary.raw.encode=function(E){return String.fromCharCode.apply(null,E)},p.binary.raw.decode=function(E,C,x){var j=C;j||(j=new Uint8Array(E.length)),x=x||0;for(var D=x,k=0;k<E.length;++k)j[D++]=E.charCodeAt(k);return C?D-x:j},p.binary.hex.encode=p.bytesToHex,p.binary.hex.decode=function(E,C,x){var j=C;j||(j=new Uint8Array(Math.ceil(E.length/2))),x=x||0;var D=0,k=x;for(E.length&1&&(D=1,j[k++]=parseInt(E[0],16));D<E.length;D+=2)j[k++]=parseInt(E.substr(D,2),16);return C?k-x:j},p.binary.base64.encode=function(E,C){for(var x="",j="",D,k,q,G=0;G<E.byteLength;)D=E[G++],k=E[G++],q=E[G++],x+=a.charAt(D>>2),x+=a.charAt((D&3)<<4|k>>4),isNaN(k)?x+="==":(x+=a.charAt((k&15)<<2|q>>6),x+=isNaN(q)?"=":a.charAt(q&63)),C&&x.length>C&&(j+=x.substr(0,C)+`\r
`,x=x.substr(C));return j+=x,j},p.binary.base64.decode=function(E,C,x){var j=C;j||(j=new Uint8Array(Math.ceil(E.length/4)*3)),E=E.replace(/[^A-Za-z0-9\+\/\=]/g,""),x=x||0;for(var D,k,q,G,$=0,W=x;$<E.length;)D=o[E.charCodeAt($++)-43],k=o[E.charCodeAt($++)-43],q=o[E.charCodeAt($++)-43],G=o[E.charCodeAt($++)-43],j[W++]=D<<2|k>>4,q!==64&&(j[W++]=(k&15)<<4|q>>2,G!==64&&(j[W++]=(q&3)<<6|G));return C?W-x:j.subarray(0,W)},p.binary.base58.encode=function(E,C){return p.binary.baseN.encode(E,h,C)},p.binary.base58.decode=function(E,C){return p.binary.baseN.decode(E,h,C)},p.text={utf8:{},utf16:{}},p.text.utf8.encode=function(E,C,x){E=p.encodeUtf8(E);var j=C;j||(j=new Uint8Array(E.length)),x=x||0;for(var D=x,k=0;k<E.length;++k)j[D++]=E.charCodeAt(k);return C?D-x:j},p.text.utf8.decode=function(E){return p.decodeUtf8(String.fromCharCode.apply(null,E))},p.text.utf16.encode=function(E,C,x){var j=C;j||(j=new Uint8Array(E.length*2));var D=new Uint16Array(j.buffer);x=x||0;for(var k=x,q=x,G=0;G<E.length;++G)D[q++]=E.charCodeAt(G),k+=2;return C?k-x:j},p.text.utf16.decode=function(E){return String.fromCharCode.apply(null,new Uint16Array(E.buffer))},p.deflate=function(E,C,x){if(C=p.decode64(E.deflate(p.encode64(C)).rval),x){var j=2,D=C.charCodeAt(1);D&32&&(j=6),C=C.substring(j,C.length-4)}return C},p.inflate=function(E,C,x){var j=E.inflate(p.encode64(C)).rval;return j===null?null:p.decode64(j)};var v=function(E,C,x){if(!E)throw new Error("WebStorage not available.");var j;if(x===null?j=E.removeItem(C):(x=p.encode64(JSON.stringify(x)),j=E.setItem(C,x)),typeof j<"u"&&j.rval!==!0){var D=new Error(j.error.message);throw D.id=j.error.id,D.name=j.error.name,D}},_=function(E,C){if(!E)throw new Error("WebStorage not available.");var x=E.getItem(C);if(E.init)if(x.rval===null){if(x.error){var j=new Error(x.error.message);throw j.id=x.error.id,j.name=x.error.name,j}x=null}else x=x.rval;return x!==null&&(x=JSON.parse(p.decode64(x))),x},y=function(E,C,x,j){var D=_(E,C);D===null&&(D={}),D[x]=j,v(E,C,D)},w=function(E,C,x){var j=_(E,C);return j!==null&&(j=x in j?j[x]:null),j},T=function(E,C,x){var j=_(E,C);if(j!==null&&x in j){delete j[x];var D=!0;for(var k in j){D=!1;break}D&&(j=null),v(E,C,j)}},I=function(E,C){v(E,C,null)},O=function(E,C,x){var j=null;typeof x>"u"&&(x=["web","flash"]);var D,k=!1,q=null;for(var G in x){D=x[G];try{if(D==="flash"||D==="both"){if(C[0]===null)throw new Error("Flash local storage not available.");j=E.apply(this,C),k=D==="flash"}(D==="web"||D==="both")&&(C[0]=localStorage,j=E.apply(this,C),k=!0)}catch($){q=$}if(k)break}if(!k)throw q;return j};return p.setItem=function(E,C,x,j,D){O(y,arguments,D)},p.getItem=function(E,C,x,j){return O(w,arguments,j)},p.removeItem=function(E,C,x,j){O(T,arguments,j)},p.clearItems=function(E,C,x){O(I,arguments,x)},p.isEmpty=function(E){for(var C in E)if(E.hasOwnProperty(C))return!1;return!0},p.format=function(E){for(var C=/%./g,x,j,D=0,k=[],q=0;x=C.exec(E);){j=E.substring(q,C.lastIndex-2),j.length>0&&k.push(j),q=C.lastIndex;var G=x[0][1];switch(G){case"s":case"o":D<arguments.length?k.push(arguments[D+++1]):k.push("<?>");break;case"%":k.push("%");break;default:k.push("<%"+G+"?>")}}return k.push(E.substring(q)),k.join("")},p.formatNumber=function(E,C,x,j){var D=E,k=isNaN(C=Math.abs(C))?2:C,q=x===void 0?",":x,G=j===void 0?".":j,$=D<0?"-":"",W=parseInt(D=Math.abs(+D||0).toFixed(k),10)+"",K=W.length>3?W.length%3:0;return $+(K?W.substr(0,K)+G:"")+W.substr(K).replace(/(\d{3})(?=\d)/g,"$1"+G)+(k?q+Math.abs(D-W).toFixed(k).slice(2):"")},p.formatSize=function(E){return E>=1073741824?E=p.formatNumber(E/1073741824,2,".","")+" GiB":E>=1048576?E=p.formatNumber(E/1048576,2,".","")+" MiB":E>=1024?E=p.formatNumber(E/1024,0)+" KiB":E=p.formatNumber(E,0)+" bytes",E},p.bytesFromIP=function(E){return E.indexOf(".")!==-1?p.bytesFromIPv4(E):E.indexOf(":")!==-1?p.bytesFromIPv6(E):null},p.bytesFromIPv4=function(E){if(E=E.split("."),E.length!==4)return null;for(var C=p.createBuffer(),x=0;x<E.length;++x){var j=parseInt(E[x],10);if(isNaN(j))return null;C.putByte(j)}return C.getBytes()},p.bytesFromIPv6=function(E){var C=0;E=E.split(":").filter(function(q){return q.length===0&&++C,!0});for(var x=(8-E.length+C)*2,j=p.createBuffer(),D=0;D<8;++D){if(!E[D]||E[D].length===0){j.fillWithByte(0,x),x=0;continue}var k=p.hexToBytes(E[D]);k.length<2&&j.putByte(0),j.putBytes(k)}return j.getBytes()},p.bytesToIP=function(E){return E.length===4?p.bytesToIPv4(E):E.length===16?p.bytesToIPv6(E):null},p.bytesToIPv4=function(E){if(E.length!==4)return null;for(var C=[],x=0;x<E.length;++x)C.push(E.charCodeAt(x));return C.join(".")},p.bytesToIPv6=function(E){if(E.length!==16)return null;for(var C=[],x=[],j=0,D=0;D<E.length;D+=2){for(var k=p.bytesToHex(E[D]+E[D+1]);k[0]==="0"&&k!=="0";)k=k.substr(1);if(k==="0"){var q=x[x.length-1],G=C.length;!q||G!==q.end+1?x.push({start:G,end:G}):(q.end=G,q.end-q.start>x[j].end-x[j].start&&(j=x.length-1))}C.push(k)}if(x.length>0){var $=x[j];$.end-$.start>0&&(C.splice($.start,$.end-$.start+1,""),$.start===0&&C.unshift(""),$.end===7&&C.push(""))}return C.join(":")},p.estimateCores=function(E,C){if(typeof E=="function"&&(C=E,E={}),E=E||{},"cores"in p&&!E.update)return C(null,p.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return p.cores=navigator.hardwareConcurrency,C(null,p.cores);if(typeof Worker>"u")return p.cores=1,C(null,p.cores);if(typeof Blob>"u")return p.cores=2,C(null,p.cores);var x=URL.createObjectURL(new Blob(["(",(function(){self.addEventListener("message",function(q){var G=Date.now(),$=G+4;self.postMessage({st:G,et:$})})}).toString(),")()"],{type:"application/javascript"}));j([],5,16);function j(q,G,$){if(G===0){var W=Math.floor(q.reduce(function(K,z){return K+z},0)/q.length);return p.cores=Math.max(1,W),URL.revokeObjectURL(x),C(null,p.cores)}D($,function(K,z){q.push(k($,z)),j(q,G-1,$)})}function D(q,G){for(var $=[],W=[],K=0;K<q;++K){var z=new Worker(x);z.addEventListener("message",function(Q){if(W.push(Q.data),W.length===q){for(var Y=0;Y<q;++Y)$[Y].terminate();G(null,W)}}),$.push(z)}for(var K=0;K<q;++K)$[K].postMessage(K)}function k(q,G){for(var $=[],W=0;W<q;++W)for(var K=G[W],z=$[W]=[],Q=0;Q<q;++Q)if(W!==Q){var Y=G[Q];(K.st>Y.st&&K.st<Y.et||Y.st>K.st&&Y.st<K.et)&&z.push(Q)}return $.reduce(function(te,ae){return Math.max(te,ae.length)},0)}},util$7.exports}var cipher,hasRequiredCipher;function requireCipher(){if(hasRequiredCipher)return cipher;hasRequiredCipher=1;var e=requireForge();requireUtil$7(),cipher=e.cipher=e.cipher||{},e.cipher.algorithms=e.cipher.algorithms||{},e.cipher.createCipher=function(s,p){var g=s;if(typeof g=="string"&&(g=e.cipher.getAlgorithm(g),g&&(g=g())),!g)throw new Error("Unsupported algorithm: "+s);return new e.cipher.BlockCipher({algorithm:g,key:p,decrypt:!1})},e.cipher.createDecipher=function(s,p){var g=s;if(typeof g=="string"&&(g=e.cipher.getAlgorithm(g),g&&(g=g())),!g)throw new Error("Unsupported algorithm: "+s);return new e.cipher.BlockCipher({algorithm:g,key:p,decrypt:!0})},e.cipher.registerAlgorithm=function(s,p){s=s.toUpperCase(),e.cipher.algorithms[s]=p},e.cipher.getAlgorithm=function(s){return s=s.toUpperCase(),s in e.cipher.algorithms?e.cipher.algorithms[s]:null};var t=e.cipher.BlockCipher=function(s){this.algorithm=s.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=s.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=s.decrypt,this.algorithm.initialize(s)};return t.prototype.start=function(s){s=s||{};var p={};for(var g in s)p[g]=s[g];p.decrypt=this._decrypt,this._finish=!1,this._input=e.util.createBuffer(),this.output=s.output||e.util.createBuffer(),this.mode.start(p)},t.prototype.update=function(s){for(s&&this._input.putBuffer(s);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},t.prototype.finish=function(s){s&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(g){return s(this.blockSize,g,!1)},this.mode.unpad=function(g){return s(this.blockSize,g,!0)});var p={};return p.decrypt=this._decrypt,p.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,p)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,p))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,p))},cipher}var cipherModes={exports:{}},hasRequiredCipherModes;function requireCipherModes(){if(hasRequiredCipherModes)return cipherModes.exports;hasRequiredCipherModes=1;var e=requireForge();requireUtil$7(),e.cipher=e.cipher||{};var t=cipherModes.exports=e.cipher.modes=e.cipher.modes||{};t.ecb=function(m){m=m||{},this.name="ECB",this.cipher=m.cipher,this.blockSize=m.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},t.ecb.prototype.start=function(m){},t.ecb.prototype.encrypt=function(m,d,l){if(m.length()<this.blockSize&&!(l&&m.length()>0))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=m.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)d.putInt32(this._outBlock[a])},t.ecb.prototype.decrypt=function(m,d,l){if(m.length()<this.blockSize&&!(l&&m.length()>0))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=m.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)d.putInt32(this._outBlock[a])},t.ecb.prototype.pad=function(m,d){var l=m.length()===this.blockSize?this.blockSize:this.blockSize-m.length();return m.fillWithByte(l,l),!0},t.ecb.prototype.unpad=function(m,d){if(d.overflow>0)return!1;var l=m.length(),a=m.at(l-1);return a>this.blockSize<<2?!1:(m.truncate(a),!0)},t.cbc=function(m){m=m||{},this.name="CBC",this.cipher=m.cipher,this.blockSize=m.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},t.cbc.prototype.start=function(m){if(m.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in m)this._iv=s(m.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")},t.cbc.prototype.encrypt=function(m,d,l){if(m.length()<this.blockSize&&!(l&&m.length()>0))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=this._prev[a]^m.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)d.putInt32(this._outBlock[a]);this._prev=this._outBlock},t.cbc.prototype.decrypt=function(m,d,l){if(m.length()<this.blockSize&&!(l&&m.length()>0))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=m.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)d.putInt32(this._prev[a]^this._outBlock[a]);this._prev=this._inBlock.slice(0)},t.cbc.prototype.pad=function(m,d){var l=m.length()===this.blockSize?this.blockSize:this.blockSize-m.length();return m.fillWithByte(l,l),!0},t.cbc.prototype.unpad=function(m,d){if(d.overflow>0)return!1;var l=m.length(),a=m.at(l-1);return a>this.blockSize<<2?!1:(m.truncate(a),!0)},t.cfb=function(m){m=m||{},this.name="CFB",this.cipher=m.cipher,this.blockSize=m.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0},t.cfb.prototype.start=function(m){if(!("iv"in m))throw new Error("Invalid IV parameter.");this._iv=s(m.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.cfb.prototype.encrypt=function(m,d,l){var a=m.length();if(a===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&a>=this.blockSize){for(var o=0;o<this._ints;++o)this._inBlock[o]=m.getInt32()^this._outBlock[o],d.putInt32(this._inBlock[o]);return}var h=(this.blockSize-a)%this.blockSize;h>0&&(h=this.blockSize-h),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialBlock[o]=m.getInt32()^this._outBlock[o],this._partialOutput.putInt32(this._partialBlock[o]);if(h>0)m.read-=this.blockSize;else for(var o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),h>0&&!l)return d.putBytes(this._partialOutput.getBytes(h-this._partialBytes)),this._partialBytes=h,!0;d.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0},t.cfb.prototype.decrypt=function(m,d,l){var a=m.length();if(a===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&a>=this.blockSize){for(var o=0;o<this._ints;++o)this._inBlock[o]=m.getInt32(),d.putInt32(this._inBlock[o]^this._outBlock[o]);return}var h=(this.blockSize-a)%this.blockSize;h>0&&(h=this.blockSize-h),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialBlock[o]=m.getInt32(),this._partialOutput.putInt32(this._partialBlock[o]^this._outBlock[o]);if(h>0)m.read-=this.blockSize;else for(var o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),h>0&&!l)return d.putBytes(this._partialOutput.getBytes(h-this._partialBytes)),this._partialBytes=h,!0;d.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0},t.ofb=function(m){m=m||{},this.name="OFB",this.cipher=m.cipher,this.blockSize=m.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0},t.ofb.prototype.start=function(m){if(!("iv"in m))throw new Error("Invalid IV parameter.");this._iv=s(m.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.ofb.prototype.encrypt=function(m,d,l){var a=m.length();if(m.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&a>=this.blockSize){for(var o=0;o<this._ints;++o)d.putInt32(m.getInt32()^this._outBlock[o]),this._inBlock[o]=this._outBlock[o];return}var h=(this.blockSize-a)%this.blockSize;h>0&&(h=this.blockSize-h),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(m.getInt32()^this._outBlock[o]);if(h>0)m.read-=this.blockSize;else for(var o=0;o<this._ints;++o)this._inBlock[o]=this._outBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),h>0&&!l)return d.putBytes(this._partialOutput.getBytes(h-this._partialBytes)),this._partialBytes=h,!0;d.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0},t.ofb.prototype.decrypt=t.ofb.prototype.encrypt,t.ctr=function(m){m=m||{},this.name="CTR",this.cipher=m.cipher,this.blockSize=m.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0},t.ctr.prototype.start=function(m){if(!("iv"in m))throw new Error("Invalid IV parameter.");this._iv=s(m.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.ctr.prototype.encrypt=function(m,d,l){var a=m.length();if(a===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&a>=this.blockSize)for(var o=0;o<this._ints;++o)d.putInt32(m.getInt32()^this._outBlock[o]);else{var h=(this.blockSize-a)%this.blockSize;h>0&&(h=this.blockSize-h),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(m.getInt32()^this._outBlock[o]);if(h>0&&(m.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),h>0&&!l)return d.putBytes(this._partialOutput.getBytes(h-this._partialBytes)),this._partialBytes=h,!0;d.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0}p(this._inBlock)},t.ctr.prototype.decrypt=t.ctr.prototype.encrypt,t.gcm=function(m){m=m||{},this.name="GCM",this.cipher=m.cipher,this.blockSize=m.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0,this._R=3774873600},t.gcm.prototype.start=function(m){if(!("iv"in m))throw new Error("Invalid IV parameter.");var d=e.util.createBuffer(m.iv);this._cipherLength=0;var l;if("additionalData"in m?l=e.util.createBuffer(m.additionalData):l=e.util.createBuffer(),"tagLength"in m?this._tagLength=m.tagLength:this._tagLength=128,this._tag=null,m.decrypt&&(this._tag=e.util.createBuffer(m.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var a=d.length();if(a===12)this._j0=[d.getInt32(),d.getInt32(),d.getInt32(),1];else{for(this._j0=[0,0,0,0];d.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[d.getInt32(),d.getInt32(),d.getInt32(),d.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(g(a*8)))}this._inBlock=this._j0.slice(0),p(this._inBlock),this._partialBytes=0,l=e.util.createBuffer(l),this._aDataLength=g(l.length()*8);var o=l.length()%this.blockSize;for(o&&l.fillWithByte(0,this.blockSize-o),this._s=[0,0,0,0];l.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[l.getInt32(),l.getInt32(),l.getInt32(),l.getInt32()])},t.gcm.prototype.encrypt=function(m,d,l){var a=m.length();if(a===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&a>=this.blockSize){for(var o=0;o<this._ints;++o)d.putInt32(this._outBlock[o]^=m.getInt32());this._cipherLength+=this.blockSize}else{var h=(this.blockSize-a)%this.blockSize;h>0&&(h=this.blockSize-h),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(m.getInt32()^this._outBlock[o]);if(h<=0||l){if(l){var v=a%this.blockSize;this._cipherLength+=v,this._partialOutput.truncate(this.blockSize-v)}else this._cipherLength+=this.blockSize;for(var o=0;o<this._ints;++o)this._outBlock[o]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),h>0&&!l)return m.read-=this.blockSize,d.putBytes(this._partialOutput.getBytes(h-this._partialBytes)),this._partialBytes=h,!0;d.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),p(this._inBlock)},t.gcm.prototype.decrypt=function(m,d,l){var a=m.length();if(a<this.blockSize&&!(l&&a>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),p(this._inBlock),this._hashBlock[0]=m.getInt32(),this._hashBlock[1]=m.getInt32(),this._hashBlock[2]=m.getInt32(),this._hashBlock[3]=m.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var o=0;o<this._ints;++o)d.putInt32(this._outBlock[o]^this._hashBlock[o]);a<this.blockSize?this._cipherLength+=a%this.blockSize:this._cipherLength+=this.blockSize},t.gcm.prototype.afterFinish=function(m,d){var l=!0;d.decrypt&&d.overflow&&m.truncate(this.blockSize-d.overflow),this.tag=e.util.createBuffer();var a=this._aDataLength.concat(g(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,a);var o=[];this.cipher.encrypt(this._j0,o);for(var h=0;h<this._ints;++h)this.tag.putInt32(this._s[h]^o[h]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),d.decrypt&&this.tag.bytes()!==this._tag&&(l=!1),l},t.gcm.prototype.multiply=function(m,d){for(var l=[0,0,0,0],a=d.slice(0),o=0;o<128;++o){var h=m[o/32|0]&1<<31-o%32;h&&(l[0]^=a[0],l[1]^=a[1],l[2]^=a[2],l[3]^=a[3]),this.pow(a,a)}return l},t.gcm.prototype.pow=function(m,d){for(var l=m[3]&1,a=3;a>0;--a)d[a]=m[a]>>>1|(m[a-1]&1)<<31;d[0]=m[0]>>>1,l&&(d[0]^=this._R)},t.gcm.prototype.tableMultiply=function(m){for(var d=[0,0,0,0],l=0;l<32;++l){var a=l/8|0,o=m[a]>>>(7-l%8)*4&15,h=this._m[l][o];d[0]^=h[0],d[1]^=h[1],d[2]^=h[2],d[3]^=h[3]}return d},t.gcm.prototype.ghash=function(m,d,l){return d[0]^=l[0],d[1]^=l[1],d[2]^=l[2],d[3]^=l[3],this.tableMultiply(d)},t.gcm.prototype.generateHashTable=function(m,d){for(var l=8/d,a=4*l,o=16*l,h=new Array(o),v=0;v<o;++v){var _=[0,0,0,0],y=v/a|0,w=(a-1-v%a)*d;_[y]=1<<d-1<<w,h[v]=this.generateSubHashTable(this.multiply(_,m),d)}return h},t.gcm.prototype.generateSubHashTable=function(m,d){var l=1<<d,a=l>>>1,o=new Array(l);o[a]=m.slice(0);for(var h=a>>>1;h>0;)this.pow(o[2*h],o[h]=[]),h>>=1;for(h=2;h<a;){for(var v=1;v<h;++v){var _=o[h],y=o[v];o[h+v]=[_[0]^y[0],_[1]^y[1],_[2]^y[2],_[3]^y[3]]}h*=2}for(o[0]=[0,0,0,0],h=a+1;h<l;++h){var w=o[h^a];o[h]=[m[0]^w[0],m[1]^w[1],m[2]^w[2],m[3]^w[3]]}return o};function s(m,d){if(typeof m=="string"&&(m=e.util.createBuffer(m)),e.util.isArray(m)&&m.length>4){var l=m;m=e.util.createBuffer();for(var a=0;a<l.length;++a)m.putByte(l[a])}if(m.length()<d)throw new Error("Invalid IV length; got "+m.length()+" bytes and expected "+d+" bytes.");if(!e.util.isArray(m)){for(var o=[],h=d/4,a=0;a<h;++a)o.push(m.getInt32());m=o}return m}function p(m){m[m.length-1]=m[m.length-1]+1&4294967295}function g(m){return[m/4294967296|0,m&4294967295]}return cipherModes.exports}var aes,hasRequiredAes;function requireAes(){if(hasRequiredAes)return aes;hasRequiredAes=1;var e=requireForge();requireCipher(),requireCipherModes(),requireUtil$7(),aes=e.aes=e.aes||{},e.aes.startEncrypting=function(y,w,T,I){var O=_({key:y,output:T,decrypt:!1,mode:I});return O.start(w),O},e.aes.createEncryptionCipher=function(y,w){return _({key:y,output:null,decrypt:!1,mode:w})},e.aes.startDecrypting=function(y,w,T,I){var O=_({key:y,output:T,decrypt:!0,mode:I});return O.start(w),O},e.aes.createDecryptionCipher=function(y,w){return _({key:y,output:null,decrypt:!0,mode:w})},e.aes.Algorithm=function(y,w){s||o();var T=this;T.name=y,T.mode=new w({blockSize:16,cipher:{encrypt:function(I,O){return v(T._w,I,O,!1)},decrypt:function(I,O){return v(T._w,I,O,!0)}}}),T._init=!1},e.aes.Algorithm.prototype.initialize=function(y){if(!this._init){var w=y.key,T;if(typeof w=="string"&&(w.length===16||w.length===24||w.length===32))w=e.util.createBuffer(w);else if(e.util.isArray(w)&&(w.length===16||w.length===24||w.length===32)){T=w,w=e.util.createBuffer();for(var I=0;I<T.length;++I)w.putByte(T[I])}if(!e.util.isArray(w)){T=w,w=[];var O=T.length();if(O===16||O===24||O===32){O=O>>>2;for(var I=0;I<O;++I)w.push(T.getInt32())}}if(!e.util.isArray(w)||!(w.length===4||w.length===6||w.length===8))throw new Error("Invalid key parameter.");var E=this.mode.name,C=["CFB","OFB","CTR","GCM"].indexOf(E)!==-1;this._w=h(w,y.decrypt&&!C),this._init=!0}},e.aes._expandKey=function(y,w){return s||o(),h(y,w)},e.aes._updateBlock=v,t("AES-ECB",e.cipher.modes.ecb),t("AES-CBC",e.cipher.modes.cbc),t("AES-CFB",e.cipher.modes.cfb),t("AES-OFB",e.cipher.modes.ofb),t("AES-CTR",e.cipher.modes.ctr),t("AES-GCM",e.cipher.modes.gcm);function t(y,w){var T=function(){return new e.aes.Algorithm(y,w)};e.cipher.registerAlgorithm(y,T)}var s=!1,p=4,g,m,d,l,a;function o(){s=!0,d=[0,1,2,4,8,16,32,64,128,27,54];for(var y=new Array(256),w=0;w<128;++w)y[w]=w<<1,y[w+128]=w+128<<1^283;g=new Array(256),m=new Array(256),l=new Array(4),a=new Array(4);for(var w=0;w<4;++w)l[w]=new Array(256),a[w]=new Array(256);for(var T=0,I=0,O,E,C,x,j,D,k,w=0;w<256;++w){x=I^I<<1^I<<2^I<<3^I<<4,x=x>>8^x&255^99,g[T]=x,m[x]=T,j=y[x],O=y[T],E=y[O],C=y[E],D=j<<24^x<<16^x<<8^(x^j),k=(O^E^C)<<24^(T^C)<<16^(T^E^C)<<8^(T^O^C);for(var q=0;q<4;++q)l[q][T]=D,a[q][x]=k,D=D<<24|D>>>8,k=k<<24|k>>>8;T===0?T=I=1:(T=O^y[y[y[O^C]]],I^=y[y[I]])}}function h(y,w){for(var T=y.slice(0),I,O=1,E=T.length,C=E+6+1,x=p*C,j=E;j<x;++j)I=T[j-1],j%E===0?(I=g[I>>>16&255]<<24^g[I>>>8&255]<<16^g[I&255]<<8^g[I>>>24]^d[O]<<24,O++):E>6&&j%E===4&&(I=g[I>>>24]<<24^g[I>>>16&255]<<16^g[I>>>8&255]<<8^g[I&255]),T[j]=T[j-E]^I;if(w){var D,k=a[0],q=a[1],G=a[2],$=a[3],W=T.slice(0);x=T.length;for(var j=0,K=x-p;j<x;j+=p,K-=p)if(j===0||j===x-p)W[j]=T[K],W[j+1]=T[K+3],W[j+2]=T[K+2],W[j+3]=T[K+1];else for(var z=0;z<p;++z)D=T[K+z],W[j+(3&-z)]=k[g[D>>>24]]^q[g[D>>>16&255]]^G[g[D>>>8&255]]^$[g[D&255]];T=W}return T}function v(y,w,T,I){var O=y.length/4-1,E,C,x,j,D;I?(E=a[0],C=a[1],x=a[2],j=a[3],D=m):(E=l[0],C=l[1],x=l[2],j=l[3],D=g);var k,q,G,$,W,K,z;k=w[0]^y[0],q=w[I?3:1]^y[1],G=w[2]^y[2],$=w[I?1:3]^y[3];for(var Q=3,Y=1;Y<O;++Y)W=E[k>>>24]^C[q>>>16&255]^x[G>>>8&255]^j[$&255]^y[++Q],K=E[q>>>24]^C[G>>>16&255]^x[$>>>8&255]^j[k&255]^y[++Q],z=E[G>>>24]^C[$>>>16&255]^x[k>>>8&255]^j[q&255]^y[++Q],$=E[$>>>24]^C[k>>>16&255]^x[q>>>8&255]^j[G&255]^y[++Q],k=W,q=K,G=z;T[0]=D[k>>>24]<<24^D[q>>>16&255]<<16^D[G>>>8&255]<<8^D[$&255]^y[++Q],T[I?3:1]=D[q>>>24]<<24^D[G>>>16&255]<<16^D[$>>>8&255]<<8^D[k&255]^y[++Q],T[2]=D[G>>>24]<<24^D[$>>>16&255]<<16^D[k>>>8&255]<<8^D[q&255]^y[++Q],T[I?1:3]=D[$>>>24]<<24^D[k>>>16&255]<<16^D[q>>>8&255]<<8^D[G&255]^y[++Q]}function _(y){y=y||{};var w=(y.mode||"CBC").toUpperCase(),T="AES-"+w,I;y.decrypt?I=e.cipher.createDecipher(T,y.key):I=e.cipher.createCipher(T,y.key);var O=I.start;return I.start=function(E,C){var x=null;C instanceof e.util.ByteBuffer&&(x=C,C={}),C=C||{},C.output=x,C.iv=E,O.call(I,C)},I}return aes}var aesCipherSuites={exports:{}},asn1={exports:{}},oids={exports:{}},hasRequiredOids;function requireOids(){if(hasRequiredOids)return oids.exports;hasRequiredOids=1;var e=requireForge();e.pki=e.pki||{};var t=oids.exports=e.pki.oids=e.oids=e.oids||{};function s(g,m){t[g]=m,t[m]=g}function p(g,m){t[g]=m}return s("1.2.840.113549.1.1.1","rsaEncryption"),s("1.2.840.113549.1.1.4","md5WithRSAEncryption"),s("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),s("1.2.840.113549.1.1.7","RSAES-OAEP"),s("1.2.840.113549.1.1.8","mgf1"),s("1.2.840.113549.1.1.9","pSpecified"),s("1.2.840.113549.1.1.10","RSASSA-PSS"),s("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),s("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),s("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),s("1.3.101.112","EdDSA25519"),s("1.2.840.10040.4.3","dsa-with-sha1"),s("1.3.14.3.2.7","desCBC"),s("1.3.14.3.2.26","sha1"),s("1.3.14.3.2.29","sha1WithRSASignature"),s("2.16.840.1.101.3.4.2.1","sha256"),s("2.16.840.1.101.3.4.2.2","sha384"),s("2.16.840.1.101.3.4.2.3","sha512"),s("2.16.840.1.101.3.4.2.4","sha224"),s("2.16.840.1.101.3.4.2.5","sha512-224"),s("2.16.840.1.101.3.4.2.6","sha512-256"),s("1.2.840.113549.2.2","md2"),s("1.2.840.113549.2.5","md5"),s("1.2.840.113549.1.7.1","data"),s("1.2.840.113549.1.7.2","signedData"),s("1.2.840.113549.1.7.3","envelopedData"),s("1.2.840.113549.1.7.4","signedAndEnvelopedData"),s("1.2.840.113549.1.7.5","digestedData"),s("1.2.840.113549.1.7.6","encryptedData"),s("1.2.840.113549.1.9.1","emailAddress"),s("1.2.840.113549.1.9.2","unstructuredName"),s("1.2.840.113549.1.9.3","contentType"),s("1.2.840.113549.1.9.4","messageDigest"),s("1.2.840.113549.1.9.5","signingTime"),s("1.2.840.113549.1.9.6","counterSignature"),s("1.2.840.113549.1.9.7","challengePassword"),s("1.2.840.113549.1.9.8","unstructuredAddress"),s("1.2.840.113549.1.9.14","extensionRequest"),s("1.2.840.113549.1.9.20","friendlyName"),s("1.2.840.113549.1.9.21","localKeyId"),s("1.2.840.113549.1.9.22.1","x509Certificate"),s("1.2.840.113549.1.12.10.1.1","keyBag"),s("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),s("1.2.840.113549.1.12.10.1.3","certBag"),s("1.2.840.113549.1.12.10.1.4","crlBag"),s("1.2.840.113549.1.12.10.1.5","secretBag"),s("1.2.840.113549.1.12.10.1.6","safeContentsBag"),s("1.2.840.113549.1.5.13","pkcs5PBES2"),s("1.2.840.113549.1.5.12","pkcs5PBKDF2"),s("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),s("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),s("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),s("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),s("1.2.840.113549.2.7","hmacWithSHA1"),s("1.2.840.113549.2.8","hmacWithSHA224"),s("1.2.840.113549.2.9","hmacWithSHA256"),s("1.2.840.113549.2.10","hmacWithSHA384"),s("1.2.840.113549.2.11","hmacWithSHA512"),s("1.2.840.113549.3.7","des-EDE3-CBC"),s("2.16.840.1.101.3.4.1.2","aes128-CBC"),s("2.16.840.1.101.3.4.1.22","aes192-CBC"),s("2.16.840.1.101.3.4.1.42","aes256-CBC"),s("2.5.4.3","commonName"),s("2.5.4.4","surname"),s("2.5.4.5","serialNumber"),s("2.5.4.6","countryName"),s("2.5.4.7","localityName"),s("2.5.4.8","stateOrProvinceName"),s("2.5.4.9","streetAddress"),s("2.5.4.10","organizationName"),s("2.5.4.11","organizationalUnitName"),s("2.5.4.12","title"),s("2.5.4.13","description"),s("2.5.4.15","businessCategory"),s("2.5.4.17","postalCode"),s("2.5.4.42","givenName"),s("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),s("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),s("2.16.840.1.113730.1.1","nsCertType"),s("2.16.840.1.113730.1.13","nsComment"),p("2.5.29.1","authorityKeyIdentifier"),p("2.5.29.2","keyAttributes"),p("2.5.29.3","certificatePolicies"),p("2.5.29.4","keyUsageRestriction"),p("2.5.29.5","policyMapping"),p("2.5.29.6","subtreesConstraint"),p("2.5.29.7","subjectAltName"),p("2.5.29.8","issuerAltName"),p("2.5.29.9","subjectDirectoryAttributes"),p("2.5.29.10","basicConstraints"),p("2.5.29.11","nameConstraints"),p("2.5.29.12","policyConstraints"),p("2.5.29.13","basicConstraints"),s("2.5.29.14","subjectKeyIdentifier"),s("2.5.29.15","keyUsage"),p("2.5.29.16","privateKeyUsagePeriod"),s("2.5.29.17","subjectAltName"),s("2.5.29.18","issuerAltName"),s("2.5.29.19","basicConstraints"),p("2.5.29.20","cRLNumber"),p("2.5.29.21","cRLReason"),p("2.5.29.22","expirationDate"),p("2.5.29.23","instructionCode"),p("2.5.29.24","invalidityDate"),p("2.5.29.25","cRLDistributionPoints"),p("2.5.29.26","issuingDistributionPoint"),p("2.5.29.27","deltaCRLIndicator"),p("2.5.29.28","issuingDistributionPoint"),p("2.5.29.29","certificateIssuer"),p("2.5.29.30","nameConstraints"),s("2.5.29.31","cRLDistributionPoints"),s("2.5.29.32","certificatePolicies"),p("2.5.29.33","policyMappings"),p("2.5.29.34","policyConstraints"),s("2.5.29.35","authorityKeyIdentifier"),p("2.5.29.36","policyConstraints"),s("2.5.29.37","extKeyUsage"),p("2.5.29.46","freshestCRL"),p("2.5.29.54","inhibitAnyPolicy"),s("1.3.6.1.4.1.11129.2.4.2","timestampList"),s("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),s("1.3.6.1.5.5.7.3.1","serverAuth"),s("1.3.6.1.5.5.7.3.2","clientAuth"),s("1.3.6.1.5.5.7.3.3","codeSigning"),s("1.3.6.1.5.5.7.3.4","emailProtection"),s("1.3.6.1.5.5.7.3.8","timeStamping"),oids.exports}var hasRequiredAsn1;function requireAsn1(){if(hasRequiredAsn1)return asn1.exports;hasRequiredAsn1=1;var e=requireForge();requireUtil$7(),requireOids();var t=asn1.exports=e.asn1=e.asn1||{};t.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},t.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},t.create=function(d,l,a,o,h){if(e.util.isArray(o)){for(var v=[],_=0;_<o.length;++_)o[_]!==void 0&&v.push(o[_]);o=v}var y={tagClass:d,type:l,constructed:a,composed:a||e.util.isArray(o),value:o};return h&&"bitStringContents"in h&&(y.bitStringContents=h.bitStringContents,y.original=t.copy(y)),y},t.copy=function(d,l){var a;if(e.util.isArray(d)){a=[];for(var o=0;o<d.length;++o)a.push(t.copy(d[o],l));return a}return typeof d=="string"?d:(a={tagClass:d.tagClass,type:d.type,constructed:d.constructed,composed:d.composed,value:t.copy(d.value,l)},l&&!l.excludeBitStringContents&&(a.bitStringContents=d.bitStringContents),a)},t.equals=function(d,l,a){if(e.util.isArray(d)){if(!e.util.isArray(l)||d.length!==l.length)return!1;for(var o=0;o<d.length;++o)if(!t.equals(d[o],l[o]))return!1;return!0}if(typeof d!=typeof l)return!1;if(typeof d=="string")return d===l;var h=d.tagClass===l.tagClass&&d.type===l.type&&d.constructed===l.constructed&&d.composed===l.composed&&t.equals(d.value,l.value);return a&&a.includeBitStringContents&&(h=h&&d.bitStringContents===l.bitStringContents),h},t.getBerValueLength=function(d){var l=d.getByte();if(l!==128){var a,o=l&128;return o?a=d.getInt((l&127)<<3):a=l,a}};function s(d,l,a){if(a>l){var o=new Error("Too few bytes to parse DER.");throw o.available=d.length(),o.remaining=l,o.requested=a,o}}var p=function(d,l){var a=d.getByte();if(l--,a!==128){var o,h=a&128;if(!h)o=a;else{var v=a&127;s(d,l,v),o=d.getInt(v<<3)}if(o<0)throw new Error("Negative length: "+o);return o}};t.fromDer=function(d,l){l===void 0&&(l={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof l=="boolean"&&(l={strict:l,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in l||(l.strict=!0),"parseAllBytes"in l||(l.parseAllBytes=!0),"decodeBitStrings"in l||(l.decodeBitStrings=!0),typeof d=="string"&&(d=e.util.createBuffer(d));var a=d.length(),o=g(d,d.length(),0,l);if(l.parseAllBytes&&d.length()!==0){var h=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw h.byteCount=a,h.remaining=d.length(),h}return o};function g(d,l,a,o){var h;s(d,l,2);var v=d.getByte();l--;var _=v&192,y=v&31;h=d.length();var w=p(d,l);if(l-=h-d.length(),w!==void 0&&w>l){if(o.strict){var T=new Error("Too few bytes to read ASN.1 value.");throw T.available=d.length(),T.remaining=l,T.requested=w,T}w=l}var I,O,E=(v&32)===32;if(E)if(I=[],w===void 0)for(;;){if(s(d,l,2),d.bytes(2)==="\0\0"){d.getBytes(2),l-=2;break}h=d.length(),I.push(g(d,l,a+1,o)),l-=h-d.length()}else for(;w>0;)h=d.length(),I.push(g(d,w,a+1,o)),l-=h-d.length(),w-=h-d.length();if(I===void 0&&_===t.Class.UNIVERSAL&&y===t.Type.BITSTRING&&(O=d.bytes(w)),I===void 0&&o.decodeBitStrings&&_===t.Class.UNIVERSAL&&y===t.Type.BITSTRING&&w>1){var C=d.read,x=l,j=0;if(y===t.Type.BITSTRING&&(s(d,l,1),j=d.getByte(),l--),j===0)try{h=d.length();var D={strict:!0,decodeBitStrings:!0},k=g(d,l,a+1,D),q=h-d.length();l-=q,y==t.Type.BITSTRING&&q++;var G=k.tagClass;q===w&&(G===t.Class.UNIVERSAL||G===t.Class.CONTEXT_SPECIFIC)&&(I=[k])}catch{}I===void 0&&(d.read=C,l=x)}if(I===void 0){if(w===void 0){if(o.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");w=l}if(y===t.Type.BMPSTRING)for(I="";w>0;w-=2)s(d,l,2),I+=String.fromCharCode(d.getInt16()),l-=2;else I=d.getBytes(w),l-=w}var $=O===void 0?null:{bitStringContents:O};return t.create(_,y,E,I,$)}t.toDer=function(d){var l=e.util.createBuffer(),a=d.tagClass|d.type,o=e.util.createBuffer(),h=!1;if("bitStringContents"in d&&(h=!0,d.original&&(h=t.equals(d,d.original))),h)o.putBytes(d.bitStringContents);else if(d.composed){d.constructed?a|=32:o.putByte(0);for(var v=0;v<d.value.length;++v)d.value[v]!==void 0&&o.putBuffer(t.toDer(d.value[v]))}else if(d.type===t.Type.BMPSTRING)for(var v=0;v<d.value.length;++v)o.putInt16(d.value.charCodeAt(v));else d.type===t.Type.INTEGER&&d.value.length>1&&(d.value.charCodeAt(0)===0&&(d.value.charCodeAt(1)&128)===0||d.value.charCodeAt(0)===255&&(d.value.charCodeAt(1)&128)===128)?o.putBytes(d.value.substr(1)):o.putBytes(d.value);if(l.putByte(a),o.length()<=127)l.putByte(o.length()&127);else{var _=o.length(),y="";do y+=String.fromCharCode(_&255),_=_>>>8;while(_>0);l.putByte(y.length|128);for(var v=y.length-1;v>=0;--v)l.putByte(y.charCodeAt(v))}return l.putBuffer(o),l},t.oidToDer=function(d){var l=d.split("."),a=e.util.createBuffer();a.putByte(40*parseInt(l[0],10)+parseInt(l[1],10));for(var o,h,v,_,y=2;y<l.length;++y){o=!0,h=[],v=parseInt(l[y],10);do _=v&127,v=v>>>7,o||(_|=128),h.push(_),o=!1;while(v>0);for(var w=h.length-1;w>=0;--w)a.putByte(h[w])}return a},t.derToOid=function(d){var l;typeof d=="string"&&(d=e.util.createBuffer(d));var a=d.getByte();l=Math.floor(a/40)+"."+a%40;for(var o=0;d.length()>0;)a=d.getByte(),o=o<<7,a&128?o+=a&127:(l+="."+(o+a),o=0);return l},t.utcTimeToDate=function(d){var l=new Date,a=parseInt(d.substr(0,2),10);a=a>=50?1900+a:2e3+a;var o=parseInt(d.substr(2,2),10)-1,h=parseInt(d.substr(4,2),10),v=parseInt(d.substr(6,2),10),_=parseInt(d.substr(8,2),10),y=0;if(d.length>11){var w=d.charAt(10),T=10;w!=="+"&&w!=="-"&&(y=parseInt(d.substr(10,2),10),T+=2)}if(l.setUTCFullYear(a,o,h),l.setUTCHours(v,_,y,0),T&&(w=d.charAt(T),w==="+"||w==="-")){var I=parseInt(d.substr(T+1,2),10),O=parseInt(d.substr(T+4,2),10),E=I*60+O;E*=6e4,w==="+"?l.setTime(+l-E):l.setTime(+l+E)}return l},t.generalizedTimeToDate=function(d){var l=new Date,a=parseInt(d.substr(0,4),10),o=parseInt(d.substr(4,2),10)-1,h=parseInt(d.substr(6,2),10),v=parseInt(d.substr(8,2),10),_=parseInt(d.substr(10,2),10),y=parseInt(d.substr(12,2),10),w=0,T=0,I=!1;d.charAt(d.length-1)==="Z"&&(I=!0);var O=d.length-5,E=d.charAt(O);if(E==="+"||E==="-"){var C=parseInt(d.substr(O+1,2),10),x=parseInt(d.substr(O+4,2),10);T=C*60+x,T*=6e4,E==="+"&&(T*=-1),I=!0}return d.charAt(14)==="."&&(w=parseFloat(d.substr(14),10)*1e3),I?(l.setUTCFullYear(a,o,h),l.setUTCHours(v,_,y,w),l.setTime(+l+T)):(l.setFullYear(a,o,h),l.setHours(v,_,y,w)),l},t.dateToUtcTime=function(d){if(typeof d=="string")return d;var l="",a=[];a.push((""+d.getUTCFullYear()).substr(2)),a.push(""+(d.getUTCMonth()+1)),a.push(""+d.getUTCDate()),a.push(""+d.getUTCHours()),a.push(""+d.getUTCMinutes()),a.push(""+d.getUTCSeconds());for(var o=0;o<a.length;++o)a[o].length<2&&(l+="0"),l+=a[o];return l+="Z",l},t.dateToGeneralizedTime=function(d){if(typeof d=="string")return d;var l="",a=[];a.push(""+d.getUTCFullYear()),a.push(""+(d.getUTCMonth()+1)),a.push(""+d.getUTCDate()),a.push(""+d.getUTCHours()),a.push(""+d.getUTCMinutes()),a.push(""+d.getUTCSeconds());for(var o=0;o<a.length;++o)a[o].length<2&&(l+="0"),l+=a[o];return l+="Z",l},t.integerToDer=function(d){var l=e.util.createBuffer();if(d>=-128&&d<128)return l.putSignedInt(d,8);if(d>=-32768&&d<32768)return l.putSignedInt(d,16);if(d>=-8388608&&d<8388608)return l.putSignedInt(d,24);if(d>=-2147483648&&d<2147483648)return l.putSignedInt(d,32);var a=new Error("Integer too large; max is 32-bits.");throw a.integer=d,a},t.derToInteger=function(d){typeof d=="string"&&(d=e.util.createBuffer(d));var l=d.length()*8;if(l>32)throw new Error("Integer too large; max is 32-bits.");return d.getSignedInt(l)},t.validate=function(d,l,a,o){var h=!1;if((d.tagClass===l.tagClass||typeof l.tagClass>"u")&&(d.type===l.type||typeof l.type>"u"))if(d.constructed===l.constructed||typeof l.constructed>"u"){if(h=!0,l.value&&e.util.isArray(l.value))for(var v=0,_=0;h&&_<l.value.length;++_)h=l.value[_].optional||!1,d.value[v]&&(h=t.validate(d.value[v],l.value[_],a,o),h?++v:l.value[_].optional&&(h=!0)),!h&&o&&o.push("["+l.name+'] Tag class "'+l.tagClass+'", type "'+l.type+'" expected value length "'+l.value.length+'", got "'+d.value.length+'"');if(h&&a&&(l.capture&&(a[l.capture]=d.value),l.captureAsn1&&(a[l.captureAsn1]=d),l.captureBitStringContents&&"bitStringContents"in d&&(a[l.captureBitStringContents]=d.bitStringContents),l.captureBitStringValue&&"bitStringContents"in d))if(d.bitStringContents.length<2)a[l.captureBitStringValue]="";else{var y=d.bitStringContents.charCodeAt(0);if(y!==0)throw new Error("captureBitStringValue only supported for zero unused bits");a[l.captureBitStringValue]=d.bitStringContents.slice(1)}}else o&&o.push("["+l.name+'] Expected constructed "'+l.constructed+'", got "'+d.constructed+'"');else o&&(d.tagClass!==l.tagClass&&o.push("["+l.name+'] Expected tag class "'+l.tagClass+'", got "'+d.tagClass+'"'),d.type!==l.type&&o.push("["+l.name+'] Expected type "'+l.type+'", got "'+d.type+'"'));return h};var m=/[^\\u0000-\\u00ff]/;return t.prettyPrint=function(d,l,a){var o="";l=l||0,a=a||2,l>0&&(o+=`
`);for(var h="",v=0;v<l*a;++v)h+=" ";switch(o+=h+"Tag: ",d.tagClass){case t.Class.UNIVERSAL:o+="Universal:";break;case t.Class.APPLICATION:o+="Application:";break;case t.Class.CONTEXT_SPECIFIC:o+="Context-Specific:";break;case t.Class.PRIVATE:o+="Private:";break}if(d.tagClass===t.Class.UNIVERSAL)switch(o+=d.type,d.type){case t.Type.NONE:o+=" (None)";break;case t.Type.BOOLEAN:o+=" (Boolean)";break;case t.Type.INTEGER:o+=" (Integer)";break;case t.Type.BITSTRING:o+=" (Bit string)";break;case t.Type.OCTETSTRING:o+=" (Octet string)";break;case t.Type.NULL:o+=" (Null)";break;case t.Type.OID:o+=" (Object Identifier)";break;case t.Type.ODESC:o+=" (Object Descriptor)";break;case t.Type.EXTERNAL:o+=" (External or Instance of)";break;case t.Type.REAL:o+=" (Real)";break;case t.Type.ENUMERATED:o+=" (Enumerated)";break;case t.Type.EMBEDDED:o+=" (Embedded PDV)";break;case t.Type.UTF8:o+=" (UTF8)";break;case t.Type.ROID:o+=" (Relative Object Identifier)";break;case t.Type.SEQUENCE:o+=" (Sequence)";break;case t.Type.SET:o+=" (Set)";break;case t.Type.PRINTABLESTRING:o+=" (Printable String)";break;case t.Type.IA5String:o+=" (IA5String (ASCII))";break;case t.Type.UTCTIME:o+=" (UTC time)";break;case t.Type.GENERALIZEDTIME:o+=" (Generalized time)";break;case t.Type.BMPSTRING:o+=" (BMP String)";break}else o+=d.type;if(o+=`
`,o+=h+"Constructed: "+d.constructed+`
`,d.composed){for(var _=0,y="",v=0;v<d.value.length;++v)d.value[v]!==void 0&&(_+=1,y+=t.prettyPrint(d.value[v],l+1,a),v+1<d.value.length&&(y+=","));o+=h+"Sub values: "+_+y}else{if(o+=h+"Value: ",d.type===t.Type.OID){var w=t.derToOid(d.value);o+=w,e.pki&&e.pki.oids&&w in e.pki.oids&&(o+=" ("+e.pki.oids[w]+") ")}if(d.type===t.Type.INTEGER)try{o+=t.derToInteger(d.value)}catch{o+="0x"+e.util.bytesToHex(d.value)}else if(d.type===t.Type.BITSTRING){if(d.value.length>1?o+="0x"+e.util.bytesToHex(d.value.slice(1)):o+="(none)",d.value.length>0){var T=d.value.charCodeAt(0);T==1?o+=" (1 unused bit shown)":T>1&&(o+=" ("+T+" unused bits shown)")}}else if(d.type===t.Type.OCTETSTRING)m.test(d.value)||(o+="("+d.value+") "),o+="0x"+e.util.bytesToHex(d.value);else if(d.type===t.Type.UTF8)try{o+=e.util.decodeUtf8(d.value)}catch(I){if(I.message==="URI malformed")o+="0x"+e.util.bytesToHex(d.value)+" (malformed UTF8)";else throw I}else d.type===t.Type.PRINTABLESTRING||d.type===t.Type.IA5String?o+=d.value:m.test(d.value)?o+="0x"+e.util.bytesToHex(d.value):d.value.length===0?o+="[null]":o+=d.value}return o},asn1.exports}var hmac={exports:{}},md,hasRequiredMd;function requireMd(){if(hasRequiredMd)return md;hasRequiredMd=1;var e=requireForge();return md=e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},md}var hasRequiredHmac;function requireHmac(){if(hasRequiredHmac)return hmac.exports;hasRequiredHmac=1;var e=requireForge();requireMd(),requireUtil$7();var t=hmac.exports=e.hmac=e.hmac||{};return t.create=function(){var s=null,p=null,g=null,m=null,d={};return d.start=function(l,a){if(l!==null)if(typeof l=="string")if(l=l.toLowerCase(),l in e.md.algorithms)p=e.md.algorithms[l].create();else throw new Error('Unknown hash algorithm "'+l+'"');else p=l;if(a===null)a=s;else{if(typeof a=="string")a=e.util.createBuffer(a);else if(e.util.isArray(a)){var o=a;a=e.util.createBuffer();for(var h=0;h<o.length;++h)a.putByte(o[h])}var v=a.length();v>p.blockLength&&(p.start(),p.update(a.bytes()),a=p.digest()),g=e.util.createBuffer(),m=e.util.createBuffer(),v=a.length();for(var h=0;h<v;++h){var o=a.at(h);g.putByte(54^o),m.putByte(92^o)}if(v<p.blockLength)for(var o=p.blockLength-v,h=0;h<o;++h)g.putByte(54),m.putByte(92);s=a,g=g.bytes(),m=m.bytes()}p.start(),p.update(g)},d.update=function(l){p.update(l)},d.getMac=function(){var l=p.digest().bytes();return p.start(),p.update(m),p.update(l),p.digest()},d.digest=d.getMac,d},hmac.exports}var md5$3={exports:{}},hasRequiredMd5$2;function requireMd5$2(){if(hasRequiredMd5$2)return md5$3.exports;hasRequiredMd5$2=1;var e=requireForge();requireMd(),requireUtil$7();var t=md5$3.exports=e.md5=e.md5||{};e.md.md5=e.md.algorithms.md5=t,t.create=function(){d||l();var o=null,h=e.util.createBuffer(),v=new Array(16),_={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return _.start=function(){_.messageLength=0,_.fullMessageLength=_.messageLength64=[];for(var y=_.messageLengthSize/4,w=0;w<y;++w)_.fullMessageLength.push(0);return h=e.util.createBuffer(),o={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},_},_.start(),_.update=function(y,w){w==="utf8"&&(y=e.util.encodeUtf8(y));var T=y.length;_.messageLength+=T,T=[T/4294967296>>>0,T>>>0];for(var I=_.fullMessageLength.length-1;I>=0;--I)_.fullMessageLength[I]+=T[1],T[1]=T[0]+(_.fullMessageLength[I]/4294967296>>>0),_.fullMessageLength[I]=_.fullMessageLength[I]>>>0,T[0]=T[1]/4294967296>>>0;return h.putBytes(y),a(o,v,h),(h.read>2048||h.length()===0)&&h.compact(),_},_.digest=function(){var y=e.util.createBuffer();y.putBytes(h.bytes());var w=_.fullMessageLength[_.fullMessageLength.length-1]+_.messageLengthSize,T=w&_.blockLength-1;y.putBytes(s.substr(0,_.blockLength-T));for(var I,O=0,E=_.fullMessageLength.length-1;E>=0;--E)I=_.fullMessageLength[E]*8+O,O=I/4294967296>>>0,y.putInt32Le(I>>>0);var C={h0:o.h0,h1:o.h1,h2:o.h2,h3:o.h3};a(C,v,y);var x=e.util.createBuffer();return x.putInt32Le(C.h0),x.putInt32Le(C.h1),x.putInt32Le(C.h2),x.putInt32Le(C.h3),x},_};var s=null,p=null,g=null,m=null,d=!1;function l(){s="",s+=e.util.fillString("\0",64),p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],g=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],m=new Array(64);for(var o=0;o<64;++o)m[o]=Math.floor(Math.abs(Math.sin(o+1))*4294967296);d=!0}function a(o,h,v){for(var _,y,w,T,I,O,E,C,x=v.length();x>=64;){for(y=o.h0,w=o.h1,T=o.h2,I=o.h3,C=0;C<16;++C)h[C]=v.getInt32Le(),O=I^w&(T^I),_=y+O+m[C]+h[C],E=g[C],y=I,I=T,T=w,w+=_<<E|_>>>32-E;for(;C<32;++C)O=T^I&(w^T),_=y+O+m[C]+h[p[C]],E=g[C],y=I,I=T,T=w,w+=_<<E|_>>>32-E;for(;C<48;++C)O=w^T^I,_=y+O+m[C]+h[p[C]],E=g[C],y=I,I=T,T=w,w+=_<<E|_>>>32-E;for(;C<64;++C)O=T^(w|~I),_=y+O+m[C]+h[p[C]],E=g[C],y=I,I=T,T=w,w+=_<<E|_>>>32-E;o.h0=o.h0+y|0,o.h1=o.h1+w|0,o.h2=o.h2+T|0,o.h3=o.h3+I|0,x-=64}}return md5$3.exports}var pem={exports:{}},hasRequiredPem;function requirePem(){if(hasRequiredPem)return pem.exports;hasRequiredPem=1;var e=requireForge();requireUtil$7();var t=pem.exports=e.pem=e.pem||{};t.encode=function(g,m){m=m||{};var d="-----BEGIN "+g.type+`-----\r
`,l;if(g.procType&&(l={name:"Proc-Type",values:[String(g.procType.version),g.procType.type]},d+=s(l)),g.contentDomain&&(l={name:"Content-Domain",values:[g.contentDomain]},d+=s(l)),g.dekInfo&&(l={name:"DEK-Info",values:[g.dekInfo.algorithm]},g.dekInfo.parameters&&l.values.push(g.dekInfo.parameters),d+=s(l)),g.headers)for(var a=0;a<g.headers.length;++a)d+=s(g.headers[a]);return g.procType&&(d+=`\r
`),d+=e.util.encode64(g.body,m.maxline||64)+`\r
`,d+="-----END "+g.type+`-----\r
`,d},t.decode=function(g){for(var m=[],d=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,l=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,a=/\r?\n/,o;o=d.exec(g),!!o;){var h=o[1];h==="NEW CERTIFICATE REQUEST"&&(h="CERTIFICATE REQUEST");var v={type:h,procType:null,contentDomain:null,dekInfo:null,headers:[],body:e.util.decode64(o[3])};if(m.push(v),!!o[2]){for(var _=o[2].split(a),y=0;o&&y<_.length;){for(var w=_[y].replace(/\s+$/,""),T=y+1;T<_.length;++T){var I=_[T];if(!/\s/.test(I[0]))break;w+=I,y=T}if(o=w.match(l),o){for(var O={name:o[1],values:[]},E=o[2].split(","),C=0;C<E.length;++C)O.values.push(p(E[C]));if(v.procType)if(!v.contentDomain&&O.name==="Content-Domain")v.contentDomain=E[0]||"";else if(!v.dekInfo&&O.name==="DEK-Info"){if(O.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');v.dekInfo={algorithm:E[0],parameters:E[1]||null}}else v.headers.push(O);else{if(O.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(O.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');v.procType={version:E[0],type:E[1]}}}++y}if(v.procType==="ENCRYPTED"&&!v.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(m.length===0)throw new Error("Invalid PEM formatted message.");return m};function s(g){for(var m=g.name+": ",d=[],l=function(_,y){return" "+y},a=0;a<g.values.length;++a)d.push(g.values[a].replace(/^(\S+\r\n)/,l));m+=d.join(",")+`\r
`;for(var o=0,h=-1,a=0;a<m.length;++a,++o)if(o>65&&h!==-1){var v=m[h];v===","?(++h,m=m.substr(0,h)+`\r
 `+m.substr(h)):m=m.substr(0,h)+`\r
`+v+m.substr(h+1),o=a-h-1,h=-1,++a}else(m[a]===" "||m[a]==="	"||m[a]===",")&&(h=a);return m}function p(g){return g.replace(/^\s+/,"")}return pem.exports}var pki={exports:{}},des,hasRequiredDes;function requireDes(){if(hasRequiredDes)return des;hasRequiredDes=1;var e=requireForge();requireCipher(),requireCipherModes(),requireUtil$7(),des=e.des=e.des||{},e.des.startEncrypting=function(y,w,T,I){var O=_({key:y,output:T,decrypt:!1,mode:I||(w===null?"ECB":"CBC")});return O.start(w),O},e.des.createEncryptionCipher=function(y,w){return _({key:y,output:null,decrypt:!1,mode:w})},e.des.startDecrypting=function(y,w,T,I){var O=_({key:y,output:T,decrypt:!0,mode:I||(w===null?"ECB":"CBC")});return O.start(w),O},e.des.createDecryptionCipher=function(y,w){return _({key:y,output:null,decrypt:!0,mode:w})},e.des.Algorithm=function(y,w){var T=this;T.name=y,T.mode=new w({blockSize:8,cipher:{encrypt:function(I,O){return v(T._keys,I,O,!1)},decrypt:function(I,O){return v(T._keys,I,O,!0)}}}),T._init=!1},e.des.Algorithm.prototype.initialize=function(y){if(!this._init){var w=e.util.createBuffer(y.key);if(this.name.indexOf("3DES")===0&&w.length()!==24)throw new Error("Invalid Triple-DES key size: "+w.length()*8);this._keys=h(w),this._init=!0}},t("DES-ECB",e.cipher.modes.ecb),t("DES-CBC",e.cipher.modes.cbc),t("DES-CFB",e.cipher.modes.cfb),t("DES-OFB",e.cipher.modes.ofb),t("DES-CTR",e.cipher.modes.ctr),t("3DES-ECB",e.cipher.modes.ecb),t("3DES-CBC",e.cipher.modes.cbc),t("3DES-CFB",e.cipher.modes.cfb),t("3DES-OFB",e.cipher.modes.ofb),t("3DES-CTR",e.cipher.modes.ctr);function t(y,w){var T=function(){return new e.des.Algorithm(y,w)};e.cipher.registerAlgorithm(y,T)}var s=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],p=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],g=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],m=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],d=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],l=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],a=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],o=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function h(y){for(var w=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],T=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],I=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],O=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],E=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],C=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],x=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],j=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],D=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],k=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],q=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],G=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],$=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],W=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],K=y.length()>8?3:1,z=[],Q=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],Y=0,te,ae=0;ae<K;ae++){var ue=y.getInt32(),ee=y.getInt32();te=(ue>>>4^ee)&252645135,ee^=te,ue^=te<<4,te=(ee>>>-16^ue)&65535,ue^=te,ee^=te<<-16,te=(ue>>>2^ee)&858993459,ee^=te,ue^=te<<2,te=(ee>>>-16^ue)&65535,ue^=te,ee^=te<<-16,te=(ue>>>1^ee)&1431655765,ee^=te,ue^=te<<1,te=(ee>>>8^ue)&16711935,ue^=te,ee^=te<<8,te=(ue>>>1^ee)&1431655765,ee^=te,ue^=te<<1,te=ue<<8|ee>>>20&240,ue=ee<<24|ee<<8&16711680|ee>>>8&65280|ee>>>24&240,ee=te;for(var oe=0;oe<Q.length;++oe){Q[oe]?(ue=ue<<2|ue>>>26,ee=ee<<2|ee>>>26):(ue=ue<<1|ue>>>27,ee=ee<<1|ee>>>27),ue&=-15,ee&=-15;var de=w[ue>>>28]|T[ue>>>24&15]|I[ue>>>20&15]|O[ue>>>16&15]|E[ue>>>12&15]|C[ue>>>8&15]|x[ue>>>4&15],he=j[ee>>>28]|D[ee>>>24&15]|k[ee>>>20&15]|q[ee>>>16&15]|G[ee>>>12&15]|$[ee>>>8&15]|W[ee>>>4&15];te=(he>>>16^de)&65535,z[Y++]=de^te,z[Y++]=he^te<<16}}return z}function v(y,w,T,I){var O=y.length===32?3:9,E;O===3?E=I?[30,-2,-2]:[0,32,2]:E=I?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var C,x=w[0],j=w[1];C=(x>>>4^j)&252645135,j^=C,x^=C<<4,C=(x>>>16^j)&65535,j^=C,x^=C<<16,C=(j>>>2^x)&858993459,x^=C,j^=C<<2,C=(j>>>8^x)&16711935,x^=C,j^=C<<8,C=(x>>>1^j)&1431655765,j^=C,x^=C<<1,x=x<<1|x>>>31,j=j<<1|j>>>31;for(var D=0;D<O;D+=3){for(var k=E[D+1],q=E[D+2],G=E[D];G!=k;G+=q){var $=j^y[G],W=(j>>>4|j<<28)^y[G+1];C=x,x=j,j=C^(p[$>>>24&63]|m[$>>>16&63]|l[$>>>8&63]|o[$&63]|s[W>>>24&63]|g[W>>>16&63]|d[W>>>8&63]|a[W&63])}C=x,x=j,j=C}x=x>>>1|x<<31,j=j>>>1|j<<31,C=(x>>>1^j)&1431655765,j^=C,x^=C<<1,C=(j>>>8^x)&16711935,x^=C,j^=C<<8,C=(j>>>2^x)&858993459,x^=C,j^=C<<2,C=(x>>>16^j)&65535,j^=C,x^=C<<16,C=(x>>>4^j)&252645135,j^=C,x^=C<<4,T[0]=x,T[1]=j}function _(y){y=y||{};var w=(y.mode||"CBC").toUpperCase(),T="DES-"+w,I;y.decrypt?I=e.cipher.createDecipher(T,y.key):I=e.cipher.createCipher(T,y.key);var O=I.start;return I.start=function(E,C){var x=null;C instanceof e.util.ByteBuffer&&(x=C,C={}),C=C||{},C.output=x,C.iv=E,O.call(I,C)},I}return des}var pbkdf2,hasRequiredPbkdf2;function requirePbkdf2(){if(hasRequiredPbkdf2)return pbkdf2;hasRequiredPbkdf2=1;var e=requireForge();requireHmac(),requireMd(),requireUtil$7();var t=e.pkcs5=e.pkcs5||{},s;return e.util.isNodejs&&!e.options.usePureJavaScript&&(s=require$$1$3),pbkdf2=e.pbkdf2=t.pbkdf2=function(p,g,m,d,l,a){if(typeof l=="function"&&(a=l,l=null),e.util.isNodejs&&!e.options.usePureJavaScript&&s.pbkdf2&&(l===null||typeof l!="object")&&(s.pbkdf2Sync.length>4||!l||l==="sha1"))return typeof l!="string"&&(l="sha1"),p=Buffer.from(p,"binary"),g=Buffer.from(g,"binary"),a?s.pbkdf2Sync.length===4?s.pbkdf2(p,g,m,d,function(D,k){if(D)return a(D);a(null,k.toString("binary"))}):s.pbkdf2(p,g,m,d,l,function(D,k){if(D)return a(D);a(null,k.toString("binary"))}):s.pbkdf2Sync.length===4?s.pbkdf2Sync(p,g,m,d).toString("binary"):s.pbkdf2Sync(p,g,m,d,l).toString("binary");if((typeof l>"u"||l===null)&&(l="sha1"),typeof l=="string"){if(!(l in e.md.algorithms))throw new Error("Unknown hash algorithm: "+l);l=e.md[l].create()}var o=l.digestLength;if(d>4294967295*o){var h=new Error("Derived key is too long.");if(a)return a(h);throw h}var v=Math.ceil(d/o),_=d-(v-1)*o,y=e.hmac.create();y.start(l,p);var w="",T,I,O;if(!a){for(var E=1;E<=v;++E){y.start(null,null),y.update(g),y.update(e.util.int32ToBytes(E)),T=O=y.digest().getBytes();for(var C=2;C<=m;++C)y.start(null,null),y.update(O),I=y.digest().getBytes(),T=e.util.xorBytes(T,I,o),O=I;w+=E<v?T:T.substr(0,_)}return w}var E=1,C;function x(){if(E>v)return a(null,w);y.start(null,null),y.update(g),y.update(e.util.int32ToBytes(E)),T=O=y.digest().getBytes(),C=2,j()}function j(){if(C<=m)return y.start(null,null),y.update(O),I=y.digest().getBytes(),T=e.util.xorBytes(T,I,o),O=I,++C,e.util.setImmediate(j);w+=E<v?T:T.substr(0,_),++E,x()}x()},pbkdf2}var random$1={exports:{}},sha256={exports:{}},hasRequiredSha256;function requireSha256(){if(hasRequiredSha256)return sha256.exports;hasRequiredSha256=1;var e=requireForge();requireMd(),requireUtil$7();var t=sha256.exports=e.sha256=e.sha256||{};e.md.sha256=e.md.algorithms.sha256=t,t.create=function(){p||m();var l=null,a=e.util.createBuffer(),o=new Array(64),h={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return h.start=function(){h.messageLength=0,h.fullMessageLength=h.messageLength64=[];for(var v=h.messageLengthSize/4,_=0;_<v;++_)h.fullMessageLength.push(0);return a=e.util.createBuffer(),l={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},h},h.start(),h.update=function(v,_){_==="utf8"&&(v=e.util.encodeUtf8(v));var y=v.length;h.messageLength+=y,y=[y/4294967296>>>0,y>>>0];for(var w=h.fullMessageLength.length-1;w>=0;--w)h.fullMessageLength[w]+=y[1],y[1]=y[0]+(h.fullMessageLength[w]/4294967296>>>0),h.fullMessageLength[w]=h.fullMessageLength[w]>>>0,y[0]=y[1]/4294967296>>>0;return a.putBytes(v),d(l,o,a),(a.read>2048||a.length()===0)&&a.compact(),h},h.digest=function(){var v=e.util.createBuffer();v.putBytes(a.bytes());var _=h.fullMessageLength[h.fullMessageLength.length-1]+h.messageLengthSize,y=_&h.blockLength-1;v.putBytes(s.substr(0,h.blockLength-y));for(var w,T,I=h.fullMessageLength[0]*8,O=0;O<h.fullMessageLength.length-1;++O)w=h.fullMessageLength[O+1]*8,T=w/4294967296>>>0,I+=T,v.putInt32(I>>>0),I=w>>>0;v.putInt32(I);var E={h0:l.h0,h1:l.h1,h2:l.h2,h3:l.h3,h4:l.h4,h5:l.h5,h6:l.h6,h7:l.h7};d(E,o,v);var C=e.util.createBuffer();return C.putInt32(E.h0),C.putInt32(E.h1),C.putInt32(E.h2),C.putInt32(E.h3),C.putInt32(E.h4),C.putInt32(E.h5),C.putInt32(E.h6),C.putInt32(E.h7),C},h};var s=null,p=!1,g=null;function m(){s="",s+=e.util.fillString("\0",64),g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],p=!0}function d(l,a,o){for(var h,v,_,y,w,T,I,O,E,C,x,j,D,k,q,G=o.length();G>=64;){for(I=0;I<16;++I)a[I]=o.getInt32();for(;I<64;++I)h=a[I-2],h=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10,v=a[I-15],v=(v>>>7|v<<25)^(v>>>18|v<<14)^v>>>3,a[I]=h+a[I-7]+v+a[I-16]|0;for(O=l.h0,E=l.h1,C=l.h2,x=l.h3,j=l.h4,D=l.h5,k=l.h6,q=l.h7,I=0;I<64;++I)y=(j>>>6|j<<26)^(j>>>11|j<<21)^(j>>>25|j<<7),w=k^j&(D^k),_=(O>>>2|O<<30)^(O>>>13|O<<19)^(O>>>22|O<<10),T=O&E|C&(O^E),h=q+y+w+g[I]+a[I],v=_+T,q=k,k=D,D=j,j=x+h>>>0,x=C,C=E,E=O,O=h+v>>>0;l.h0=l.h0+O|0,l.h1=l.h1+E|0,l.h2=l.h2+C|0,l.h3=l.h3+x|0,l.h4=l.h4+j|0,l.h5=l.h5+D|0,l.h6=l.h6+k|0,l.h7=l.h7+q|0,G-=64}}return sha256.exports}var prng={exports:{}},hasRequiredPrng;function requirePrng(){if(hasRequiredPrng)return prng.exports;hasRequiredPrng=1;var e={},t=requireForge();requireUtil$7();var s=null;t.util.isNodejs&&!t.options.usePureJavaScript&&!e.versions["node-webkit"]&&(s=require$$1$3);var p=prng.exports=t.prng=t.prng||{};return p.create=function(g){for(var m={plugin:g,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},d=g.md,l=new Array(32),a=0;a<32;++a)l[a]=d.create();m.pools=l,m.pool=0,m.generate=function(y,w){if(!w)return m.generateSync(y);var T=m.plugin.cipher,I=m.plugin.increment,O=m.plugin.formatKey,E=m.plugin.formatSeed,C=t.util.createBuffer();m.key=null,x();function x(j){if(j)return w(j);if(C.length()>=y)return w(null,C.getBytes(y));if(m.generated>1048575&&(m.key=null),m.key===null)return t.util.nextTick(function(){o(x)});var D=T(m.key,m.seed);m.generated+=D.length,C.putBytes(D),m.key=O(T(m.key,I(m.seed))),m.seed=E(T(m.key,m.seed)),t.util.setImmediate(x)}},m.generateSync=function(y){var w=m.plugin.cipher,T=m.plugin.increment,I=m.plugin.formatKey,O=m.plugin.formatSeed;m.key=null;for(var E=t.util.createBuffer();E.length()<y;){m.generated>1048575&&(m.key=null),m.key===null&&h();var C=w(m.key,m.seed);m.generated+=C.length,E.putBytes(C),m.key=I(w(m.key,T(m.seed))),m.seed=O(w(m.key,m.seed))}return E.getBytes(y)};function o(y){if(m.pools[0].messageLength>=32)return v(),y();var w=32-m.pools[0].messageLength<<5;m.seedFile(w,function(T,I){if(T)return y(T);m.collect(I),v(),y()})}function h(){if(m.pools[0].messageLength>=32)return v();var y=32-m.pools[0].messageLength<<5;m.collect(m.seedFileSync(y)),v()}function v(){m.reseeds=m.reseeds===4294967295?0:m.reseeds+1;var y=m.plugin.md.create();y.update(m.keyBytes);for(var w=1,T=0;T<32;++T)m.reseeds%w===0&&(y.update(m.pools[T].digest().getBytes()),m.pools[T].start()),w=w<<1;m.keyBytes=y.digest().getBytes(),y.start(),y.update(m.keyBytes);var I=y.digest().getBytes();m.key=m.plugin.formatKey(m.keyBytes),m.seed=m.plugin.formatSeed(I),m.generated=0}function _(y){var w=null,T=t.util.globalScope,I=T.crypto||T.msCrypto;I&&I.getRandomValues&&(w=function(G){return I.getRandomValues(G)});var O=t.util.createBuffer();if(w)for(;O.length()<y;){var E=Math.max(1,Math.min(y-O.length(),65536)/4),C=new Uint32Array(Math.floor(E));try{w(C);for(var x=0;x<C.length;++x)O.putInt32(C[x])}catch(G){if(!(typeof QuotaExceededError<"u"&&G instanceof QuotaExceededError))throw G}}if(O.length()<y)for(var j,D,k,q=Math.floor(Math.random()*65536);O.length()<y;){D=16807*(q&65535),j=16807*(q>>16),D+=(j&32767)<<16,D+=j>>15,D=(D&2147483647)+(D>>31),q=D&4294967295;for(var x=0;x<3;++x)k=q>>>(x<<3),k^=Math.floor(Math.random()*256),O.putByte(k&255)}return O.getBytes(y)}return s?(m.seedFile=function(y,w){s.randomBytes(y,function(T,I){if(T)return w(T);w(null,I.toString())})},m.seedFileSync=function(y){return s.randomBytes(y).toString()}):(m.seedFile=function(y,w){try{w(null,_(y))}catch(T){w(T)}},m.seedFileSync=_),m.collect=function(y){for(var w=y.length,T=0;T<w;++T)m.pools[m.pool].update(y.substr(T,1)),m.pool=m.pool===31?0:m.pool+1},m.collectInt=function(y,w){for(var T="",I=0;I<w;I+=8)T+=String.fromCharCode(y>>I&255);m.collect(T)},m.registerWorker=function(y){if(y===self)m.seedFile=function(T,I){function O(E){var C=E.data;C.forge&&C.forge.prng&&(self.removeEventListener("message",O),I(C.forge.prng.err,C.forge.prng.bytes))}self.addEventListener("message",O),self.postMessage({forge:{prng:{needed:T}}})};else{var w=function(T){var I=T.data;I.forge&&I.forge.prng&&m.seedFile(I.forge.prng.needed,function(O,E){y.postMessage({forge:{prng:{err:O,bytes:E}}})})};y.addEventListener("message",w)}},m},prng.exports}var hasRequiredRandom;function requireRandom(){if(hasRequiredRandom)return random$1.exports;hasRequiredRandom=1;var e=requireForge();return requireAes(),requireSha256(),requirePrng(),requireUtil$7(),(function(){if(e.random&&e.random.getBytes){random$1.exports=e.random;return}(function(t){var s={},p=new Array(4),g=e.util.createBuffer();s.formatKey=function(_){var y=e.util.createBuffer(_);return _=new Array(4),_[0]=y.getInt32(),_[1]=y.getInt32(),_[2]=y.getInt32(),_[3]=y.getInt32(),e.aes._expandKey(_,!1)},s.formatSeed=function(_){var y=e.util.createBuffer(_);return _=new Array(4),_[0]=y.getInt32(),_[1]=y.getInt32(),_[2]=y.getInt32(),_[3]=y.getInt32(),_},s.cipher=function(_,y){return e.aes._updateBlock(_,y,p,!1),g.putInt32(p[0]),g.putInt32(p[1]),g.putInt32(p[2]),g.putInt32(p[3]),g.getBytes()},s.increment=function(_){return++_[3],_},s.md=e.md.sha256;function m(){var _=e.prng.create(s);return _.getBytes=function(y,w){return _.generate(y,w)},_.getBytesSync=function(y){return _.generate(y)},_}var d=m(),l=null,a=e.util.globalScope,o=a.crypto||a.msCrypto;if(o&&o.getRandomValues&&(l=function(_){return o.getRandomValues(_)}),e.options.usePureJavaScript||!e.util.isNodejs&&!l){if(d.collectInt(+new Date,32),typeof navigator<"u"){var h="";for(var v in navigator)try{typeof navigator[v]=="string"&&(h+=navigator[v])}catch{}d.collect(h),h=null}t&&(t().mousemove(function(_){d.collectInt(_.clientX,16),d.collectInt(_.clientY,16)}),t().keypress(function(_){d.collectInt(_.charCode,8)}))}if(!e.random)e.random=d;else for(var v in d)e.random[v]=d[v];e.random.createInstance=m,random$1.exports=e.random})(typeof jQuery<"u"?jQuery:null)})(),random$1.exports}var rc2,hasRequiredRc2;function requireRc2(){if(hasRequiredRc2)return rc2;hasRequiredRc2=1;var e=requireForge();requireUtil$7();var t=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s=[1,2,3,5],p=function(d,l){return d<<l&65535|(d&65535)>>16-l},g=function(d,l){return(d&65535)>>l|d<<16-l&65535};rc2=e.rc2=e.rc2||{},e.rc2.expandKey=function(d,l){typeof d=="string"&&(d=e.util.createBuffer(d)),l=l||128;var a=d,o=d.length(),h=l,v=Math.ceil(h/8),_=255>>(h&7),y;for(y=o;y<128;y++)a.putByte(t[a.at(y-1)+a.at(y-o)&255]);for(a.setAt(128-v,t[a.at(128-v)&_]),y=127-v;y>=0;y--)a.setAt(y,t[a.at(y+1)^a.at(y+v)]);return a};var m=function(d,l,a){var o=!1,h=null,v=null,_=null,y,w,T,I,O=[];for(d=e.rc2.expandKey(d,l),T=0;T<64;T++)O.push(d.getInt16Le());a?(y=function(x){for(T=0;T<4;T++)x[T]+=O[I]+(x[(T+3)%4]&x[(T+2)%4])+(~x[(T+3)%4]&x[(T+1)%4]),x[T]=p(x[T],s[T]),I++},w=function(x){for(T=0;T<4;T++)x[T]+=O[x[(T+3)%4]&63]}):(y=function(x){for(T=3;T>=0;T--)x[T]=g(x[T],s[T]),x[T]-=O[I]+(x[(T+3)%4]&x[(T+2)%4])+(~x[(T+3)%4]&x[(T+1)%4]),I--},w=function(x){for(T=3;T>=0;T--)x[T]-=O[x[(T+3)%4]&63]});var E=function(x){var j=[];for(T=0;T<4;T++){var D=h.getInt16Le();_!==null&&(a?D^=_.getInt16Le():_.putInt16Le(D)),j.push(D&65535)}I=a?0:63;for(var k=0;k<x.length;k++)for(var q=0;q<x[k][0];q++)x[k][1](j);for(T=0;T<4;T++)_!==null&&(a?_.putInt16Le(j[T]):j[T]^=_.getInt16Le()),v.putInt16Le(j[T])},C=null;return C={start:function(x,j){x&&typeof x=="string"&&(x=e.util.createBuffer(x)),o=!1,h=e.util.createBuffer(),v=j||new e.util.createBuffer,_=x,C.output=v},update:function(x){for(o||h.putBuffer(x);h.length()>=8;)E([[5,y],[1,w],[6,y],[1,w],[5,y]])},finish:function(x){var j=!0;if(a)if(x)j=x(8,h,!a);else{var D=h.length()===8?8:8-h.length();h.fillWithByte(D,D)}if(j&&(o=!0,C.update()),!a&&(j=h.length()===0,j))if(x)j=x(8,v,!a);else{var k=v.length(),q=v.at(k-1);q>k?j=!1:v.truncate(q)}return j}},C};return e.rc2.startEncrypting=function(d,l,a){var o=e.rc2.createEncryptionCipher(d,128);return o.start(l,a),o},e.rc2.createEncryptionCipher=function(d,l){return m(d,l,!0)},e.rc2.startDecrypting=function(d,l,a){var o=e.rc2.createDecryptionCipher(d,128);return o.start(l,a),o},e.rc2.createDecryptionCipher=function(d,l){return m(d,l,!1)},rc2}var jsbn,hasRequiredJsbn;function requireJsbn(){if(hasRequiredJsbn)return jsbn;hasRequiredJsbn=1;var e=requireForge();jsbn=e.jsbn=e.jsbn||{};var t;function s(ye,_e,Te){this.data=[],ye!=null&&(typeof ye=="number"?this.fromNumber(ye,_e,Te):_e==null&&typeof ye!="string"?this.fromString(ye,256):this.fromString(ye,_e))}e.jsbn.BigInteger=s;function p(){return new s(null)}function g(ye,_e,Te,De,$e,Ge){for(;--Ge>=0;){var Ze=_e*this.data[ye++]+Te.data[De]+$e;$e=Math.floor(Ze/67108864),Te.data[De++]=Ze&67108863}return $e}function m(ye,_e,Te,De,$e,Ge){for(var Ze=_e&32767,Ye=_e>>15;--Ge>=0;){var At=this.data[ye]&32767,Kt=this.data[ye++]>>15,er=Ye*At+Kt*Ze;At=Ze*At+((er&32767)<<15)+Te.data[De]+($e&1073741823),$e=(At>>>30)+(er>>>15)+Ye*Kt+($e>>>30),Te.data[De++]=At&1073741823}return $e}function d(ye,_e,Te,De,$e,Ge){for(var Ze=_e&16383,Ye=_e>>14;--Ge>=0;){var At=this.data[ye]&16383,Kt=this.data[ye++]>>14,er=Ye*At+Kt*Ze;At=Ze*At+((er&16383)<<14)+Te.data[De]+$e,$e=(At>>28)+(er>>14)+Ye*Kt,Te.data[De++]=At&268435455}return $e}typeof navigator>"u"?(s.prototype.am=d,t=28):navigator.appName=="Microsoft Internet Explorer"?(s.prototype.am=m,t=30):navigator.appName!="Netscape"?(s.prototype.am=g,t=26):(s.prototype.am=d,t=28),s.prototype.DB=t,s.prototype.DM=(1<<t)-1,s.prototype.DV=1<<t;var l=52;s.prototype.FV=Math.pow(2,l),s.prototype.F1=l-t,s.prototype.F2=2*t-l;var a="0123456789abcdefghijklmnopqrstuvwxyz",o=new Array,h,v;for(h=48,v=0;v<=9;++v)o[h++]=v;for(h=97,v=10;v<36;++v)o[h++]=v;for(h=65,v=10;v<36;++v)o[h++]=v;function _(ye){return a.charAt(ye)}function y(ye,_e){var Te=o[ye.charCodeAt(_e)];return Te??-1}function w(ye){for(var _e=this.t-1;_e>=0;--_e)ye.data[_e]=this.data[_e];ye.t=this.t,ye.s=this.s}function T(ye){this.t=1,this.s=ye<0?-1:0,ye>0?this.data[0]=ye:ye<-1?this.data[0]=ye+this.DV:this.t=0}function I(ye){var _e=p();return _e.fromInt(ye),_e}function O(ye,_e){var Te;if(_e==16)Te=4;else if(_e==8)Te=3;else if(_e==256)Te=8;else if(_e==2)Te=1;else if(_e==32)Te=5;else if(_e==4)Te=2;else{this.fromRadix(ye,_e);return}this.t=0,this.s=0;for(var De=ye.length,$e=!1,Ge=0;--De>=0;){var Ze=Te==8?ye[De]&255:y(ye,De);if(Ze<0){ye.charAt(De)=="-"&&($e=!0);continue}$e=!1,Ge==0?this.data[this.t++]=Ze:Ge+Te>this.DB?(this.data[this.t-1]|=(Ze&(1<<this.DB-Ge)-1)<<Ge,this.data[this.t++]=Ze>>this.DB-Ge):this.data[this.t-1]|=Ze<<Ge,Ge+=Te,Ge>=this.DB&&(Ge-=this.DB)}Te==8&&(ye[0]&128)!=0&&(this.s=-1,Ge>0&&(this.data[this.t-1]|=(1<<this.DB-Ge)-1<<Ge)),this.clamp(),$e&&s.ZERO.subTo(this,this)}function E(){for(var ye=this.s&this.DM;this.t>0&&this.data[this.t-1]==ye;)--this.t}function C(ye){if(this.s<0)return"-"+this.negate().toString(ye);var _e;if(ye==16)_e=4;else if(ye==8)_e=3;else if(ye==2)_e=1;else if(ye==32)_e=5;else if(ye==4)_e=2;else return this.toRadix(ye);var Te=(1<<_e)-1,De,$e=!1,Ge="",Ze=this.t,Ye=this.DB-Ze*this.DB%_e;if(Ze-- >0)for(Ye<this.DB&&(De=this.data[Ze]>>Ye)>0&&($e=!0,Ge=_(De));Ze>=0;)Ye<_e?(De=(this.data[Ze]&(1<<Ye)-1)<<_e-Ye,De|=this.data[--Ze]>>(Ye+=this.DB-_e)):(De=this.data[Ze]>>(Ye-=_e)&Te,Ye<=0&&(Ye+=this.DB,--Ze)),De>0&&($e=!0),$e&&(Ge+=_(De));return $e?Ge:"0"}function x(){var ye=p();return s.ZERO.subTo(this,ye),ye}function j(){return this.s<0?this.negate():this}function D(ye){var _e=this.s-ye.s;if(_e!=0)return _e;var Te=this.t;if(_e=Te-ye.t,_e!=0)return this.s<0?-_e:_e;for(;--Te>=0;)if((_e=this.data[Te]-ye.data[Te])!=0)return _e;return 0}function k(ye){var _e=1,Te;return(Te=ye>>>16)!=0&&(ye=Te,_e+=16),(Te=ye>>8)!=0&&(ye=Te,_e+=8),(Te=ye>>4)!=0&&(ye=Te,_e+=4),(Te=ye>>2)!=0&&(ye=Te,_e+=2),(Te=ye>>1)!=0&&(ye=Te,_e+=1),_e}function q(){return this.t<=0?0:this.DB*(this.t-1)+k(this.data[this.t-1]^this.s&this.DM)}function G(ye,_e){var Te;for(Te=this.t-1;Te>=0;--Te)_e.data[Te+ye]=this.data[Te];for(Te=ye-1;Te>=0;--Te)_e.data[Te]=0;_e.t=this.t+ye,_e.s=this.s}function $(ye,_e){for(var Te=ye;Te<this.t;++Te)_e.data[Te-ye]=this.data[Te];_e.t=Math.max(this.t-ye,0),_e.s=this.s}function W(ye,_e){var Te=ye%this.DB,De=this.DB-Te,$e=(1<<De)-1,Ge=Math.floor(ye/this.DB),Ze=this.s<<Te&this.DM,Ye;for(Ye=this.t-1;Ye>=0;--Ye)_e.data[Ye+Ge+1]=this.data[Ye]>>De|Ze,Ze=(this.data[Ye]&$e)<<Te;for(Ye=Ge-1;Ye>=0;--Ye)_e.data[Ye]=0;_e.data[Ge]=Ze,_e.t=this.t+Ge+1,_e.s=this.s,_e.clamp()}function K(ye,_e){_e.s=this.s;var Te=Math.floor(ye/this.DB);if(Te>=this.t){_e.t=0;return}var De=ye%this.DB,$e=this.DB-De,Ge=(1<<De)-1;_e.data[0]=this.data[Te]>>De;for(var Ze=Te+1;Ze<this.t;++Ze)_e.data[Ze-Te-1]|=(this.data[Ze]&Ge)<<$e,_e.data[Ze-Te]=this.data[Ze]>>De;De>0&&(_e.data[this.t-Te-1]|=(this.s&Ge)<<$e),_e.t=this.t-Te,_e.clamp()}function z(ye,_e){for(var Te=0,De=0,$e=Math.min(ye.t,this.t);Te<$e;)De+=this.data[Te]-ye.data[Te],_e.data[Te++]=De&this.DM,De>>=this.DB;if(ye.t<this.t){for(De-=ye.s;Te<this.t;)De+=this.data[Te],_e.data[Te++]=De&this.DM,De>>=this.DB;De+=this.s}else{for(De+=this.s;Te<ye.t;)De-=ye.data[Te],_e.data[Te++]=De&this.DM,De>>=this.DB;De-=ye.s}_e.s=De<0?-1:0,De<-1?_e.data[Te++]=this.DV+De:De>0&&(_e.data[Te++]=De),_e.t=Te,_e.clamp()}function Q(ye,_e){var Te=this.abs(),De=ye.abs(),$e=Te.t;for(_e.t=$e+De.t;--$e>=0;)_e.data[$e]=0;for($e=0;$e<De.t;++$e)_e.data[$e+Te.t]=Te.am(0,De.data[$e],_e,$e,0,Te.t);_e.s=0,_e.clamp(),this.s!=ye.s&&s.ZERO.subTo(_e,_e)}function Y(ye){for(var _e=this.abs(),Te=ye.t=2*_e.t;--Te>=0;)ye.data[Te]=0;for(Te=0;Te<_e.t-1;++Te){var De=_e.am(Te,_e.data[Te],ye,2*Te,0,1);(ye.data[Te+_e.t]+=_e.am(Te+1,2*_e.data[Te],ye,2*Te+1,De,_e.t-Te-1))>=_e.DV&&(ye.data[Te+_e.t]-=_e.DV,ye.data[Te+_e.t+1]=1)}ye.t>0&&(ye.data[ye.t-1]+=_e.am(Te,_e.data[Te],ye,2*Te,0,1)),ye.s=0,ye.clamp()}function te(ye,_e,Te){var De=ye.abs();if(!(De.t<=0)){var $e=this.abs();if($e.t<De.t){_e?.fromInt(0),Te!=null&&this.copyTo(Te);return}Te==null&&(Te=p());var Ge=p(),Ze=this.s,Ye=ye.s,At=this.DB-k(De.data[De.t-1]);At>0?(De.lShiftTo(At,Ge),$e.lShiftTo(At,Te)):(De.copyTo(Ge),$e.copyTo(Te));var Kt=Ge.t,er=Ge.data[Kt-1];if(er!=0){var nr=er*(1<<this.F1)+(Kt>1?Ge.data[Kt-2]>>this.F2:0),ur=this.FV/nr,mr=(1<<this.F1)/nr,Wt=1<<this.F2,hr=Te.t,tr=hr-Kt,ar=_e??p();for(Ge.dlShiftTo(tr,ar),Te.compareTo(ar)>=0&&(Te.data[Te.t++]=1,Te.subTo(ar,Te)),s.ONE.dlShiftTo(Kt,ar),ar.subTo(Ge,Ge);Ge.t<Kt;)Ge.data[Ge.t++]=0;for(;--tr>=0;){var vr=Te.data[--hr]==er?this.DM:Math.floor(Te.data[hr]*ur+(Te.data[hr-1]+Wt)*mr);if((Te.data[hr]+=Ge.am(0,vr,Te,tr,0,Kt))<vr)for(Ge.dlShiftTo(tr,ar),Te.subTo(ar,Te);Te.data[hr]<--vr;)Te.subTo(ar,Te)}_e!=null&&(Te.drShiftTo(Kt,_e),Ze!=Ye&&s.ZERO.subTo(_e,_e)),Te.t=Kt,Te.clamp(),At>0&&Te.rShiftTo(At,Te),Ze<0&&s.ZERO.subTo(Te,Te)}}}function ae(ye){var _e=p();return this.abs().divRemTo(ye,null,_e),this.s<0&&_e.compareTo(s.ZERO)>0&&ye.subTo(_e,_e),_e}function ue(ye){this.m=ye}function ee(ye){return ye.s<0||ye.compareTo(this.m)>=0?ye.mod(this.m):ye}function oe(ye){return ye}function de(ye){ye.divRemTo(this.m,null,ye)}function he(ye,_e,Te){ye.multiplyTo(_e,Te),this.reduce(Te)}function Ee(ye,_e){ye.squareTo(_e),this.reduce(_e)}ue.prototype.convert=ee,ue.prototype.revert=oe,ue.prototype.reduce=de,ue.prototype.mulTo=he,ue.prototype.sqrTo=Ee;function fe(){if(this.t<1)return 0;var ye=this.data[0];if((ye&1)==0)return 0;var _e=ye&3;return _e=_e*(2-(ye&15)*_e)&15,_e=_e*(2-(ye&255)*_e)&255,_e=_e*(2-((ye&65535)*_e&65535))&65535,_e=_e*(2-ye*_e%this.DV)%this.DV,_e>0?this.DV-_e:-_e}function Se(ye){this.m=ye,this.mp=ye.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<ye.DB-15)-1,this.mt2=2*ye.t}function be(ye){var _e=p();return ye.abs().dlShiftTo(this.m.t,_e),_e.divRemTo(this.m,null,_e),ye.s<0&&_e.compareTo(s.ZERO)>0&&this.m.subTo(_e,_e),_e}function Oe(ye){var _e=p();return ye.copyTo(_e),this.reduce(_e),_e}function ge(ye){for(;ye.t<=this.mt2;)ye.data[ye.t++]=0;for(var _e=0;_e<this.m.t;++_e){var Te=ye.data[_e]&32767,De=Te*this.mpl+((Te*this.mph+(ye.data[_e]>>15)*this.mpl&this.um)<<15)&ye.DM;for(Te=_e+this.m.t,ye.data[Te]+=this.m.am(0,De,ye,_e,0,this.m.t);ye.data[Te]>=ye.DV;)ye.data[Te]-=ye.DV,ye.data[++Te]++}ye.clamp(),ye.drShiftTo(this.m.t,ye),ye.compareTo(this.m)>=0&&ye.subTo(this.m,ye)}function J(ye,_e){ye.squareTo(_e),this.reduce(_e)}function c(ye,_e,Te){ye.multiplyTo(_e,Te),this.reduce(Te)}Se.prototype.convert=be,Se.prototype.revert=Oe,Se.prototype.reduce=ge,Se.prototype.mulTo=c,Se.prototype.sqrTo=J;function N(){return(this.t>0?this.data[0]&1:this.s)==0}function A(ye,_e){if(ye>4294967295||ye<1)return s.ONE;var Te=p(),De=p(),$e=_e.convert(this),Ge=k(ye)-1;for($e.copyTo(Te);--Ge>=0;)if(_e.sqrTo(Te,De),(ye&1<<Ge)>0)_e.mulTo(De,$e,Te);else{var Ze=Te;Te=De,De=Ze}return _e.revert(Te)}function V(ye,_e){var Te;return ye<256||_e.isEven()?Te=new ue(_e):Te=new Se(_e),this.exp(ye,Te)}s.prototype.copyTo=w,s.prototype.fromInt=T,s.prototype.fromString=O,s.prototype.clamp=E,s.prototype.dlShiftTo=G,s.prototype.drShiftTo=$,s.prototype.lShiftTo=W,s.prototype.rShiftTo=K,s.prototype.subTo=z,s.prototype.multiplyTo=Q,s.prototype.squareTo=Y,s.prototype.divRemTo=te,s.prototype.invDigit=fe,s.prototype.isEven=N,s.prototype.exp=A,s.prototype.toString=C,s.prototype.negate=x,s.prototype.abs=j,s.prototype.compareTo=D,s.prototype.bitLength=q,s.prototype.mod=ae,s.prototype.modPowInt=V,s.ZERO=I(0),s.ONE=I(1);function ne(){var ye=p();return this.copyTo(ye),ye}function ce(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function ie(){return this.t==0?this.s:this.data[0]<<24>>24}function u(){return this.t==0?this.s:this.data[0]<<16>>16}function P(ye){return Math.floor(Math.LN2*this.DB/Math.log(ye))}function M(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function n(ye){if(ye==null&&(ye=10),this.signum()==0||ye<2||ye>36)return"0";var _e=this.chunkSize(ye),Te=Math.pow(ye,_e),De=I(Te),$e=p(),Ge=p(),Ze="";for(this.divRemTo(De,$e,Ge);$e.signum()>0;)Ze=(Te+Ge.intValue()).toString(ye).substr(1)+Ze,$e.divRemTo(De,$e,Ge);return Ge.intValue().toString(ye)+Ze}function L(ye,_e){this.fromInt(0),_e==null&&(_e=10);for(var Te=this.chunkSize(_e),De=Math.pow(_e,Te),$e=!1,Ge=0,Ze=0,Ye=0;Ye<ye.length;++Ye){var At=y(ye,Ye);if(At<0){ye.charAt(Ye)=="-"&&this.signum()==0&&($e=!0);continue}Ze=_e*Ze+At,++Ge>=Te&&(this.dMultiply(De),this.dAddOffset(Ze,0),Ge=0,Ze=0)}Ge>0&&(this.dMultiply(Math.pow(_e,Ge)),this.dAddOffset(Ze,0)),$e&&s.ZERO.subTo(this,this)}function U(ye,_e,Te){if(typeof _e=="number")if(ye<2)this.fromInt(1);else for(this.fromNumber(ye,Te),this.testBit(ye-1)||this.bitwiseTo(s.ONE.shiftLeft(ye-1),bt,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(_e);)this.dAddOffset(2,0),this.bitLength()>ye&&this.subTo(s.ONE.shiftLeft(ye-1),this);else{var De=new Array,$e=ye&7;De.length=(ye>>3)+1,_e.nextBytes(De),$e>0?De[0]&=(1<<$e)-1:De[0]=0,this.fromString(De,256)}}function X(){var ye=this.t,_e=new Array;_e[0]=this.s;var Te=this.DB-ye*this.DB%8,De,$e=0;if(ye-- >0)for(Te<this.DB&&(De=this.data[ye]>>Te)!=(this.s&this.DM)>>Te&&(_e[$e++]=De|this.s<<this.DB-Te);ye>=0;)Te<8?(De=(this.data[ye]&(1<<Te)-1)<<8-Te,De|=this.data[--ye]>>(Te+=this.DB-8)):(De=this.data[ye]>>(Te-=8)&255,Te<=0&&(Te+=this.DB,--ye)),(De&128)!=0&&(De|=-256),$e==0&&(this.s&128)!=(De&128)&&++$e,($e>0||De!=this.s)&&(_e[$e++]=De);return _e}function me(ye){return this.compareTo(ye)==0}function Ie(ye){return this.compareTo(ye)<0?this:ye}function Le(ye){return this.compareTo(ye)>0?this:ye}function ke(ye,_e,Te){var De,$e,Ge=Math.min(ye.t,this.t);for(De=0;De<Ge;++De)Te.data[De]=_e(this.data[De],ye.data[De]);if(ye.t<this.t){for($e=ye.s&this.DM,De=Ge;De<this.t;++De)Te.data[De]=_e(this.data[De],$e);Te.t=this.t}else{for($e=this.s&this.DM,De=Ge;De<ye.t;++De)Te.data[De]=_e($e,ye.data[De]);Te.t=ye.t}Te.s=_e(this.s,ye.s),Te.clamp()}function ze(ye,_e){return ye&_e}function nt(ye){var _e=p();return this.bitwiseTo(ye,ze,_e),_e}function bt(ye,_e){return ye|_e}function dt(ye){var _e=p();return this.bitwiseTo(ye,bt,_e),_e}function Et(ye,_e){return ye^_e}function lt(ye){var _e=p();return this.bitwiseTo(ye,Et,_e),_e}function Be(ye,_e){return ye&~_e}function Me(ye){var _e=p();return this.bitwiseTo(ye,Be,_e),_e}function Ve(){for(var ye=p(),_e=0;_e<this.t;++_e)ye.data[_e]=this.DM&~this.data[_e];return ye.t=this.t,ye.s=~this.s,ye}function Je(ye){var _e=p();return ye<0?this.rShiftTo(-ye,_e):this.lShiftTo(ye,_e),_e}function Qe(ye){var _e=p();return ye<0?this.lShiftTo(-ye,_e):this.rShiftTo(ye,_e),_e}function st(ye){if(ye==0)return-1;var _e=0;return(ye&65535)==0&&(ye>>=16,_e+=16),(ye&255)==0&&(ye>>=8,_e+=8),(ye&15)==0&&(ye>>=4,_e+=4),(ye&3)==0&&(ye>>=2,_e+=2),(ye&1)==0&&++_e,_e}function gt(){for(var ye=0;ye<this.t;++ye)if(this.data[ye]!=0)return ye*this.DB+st(this.data[ye]);return this.s<0?this.t*this.DB:-1}function St(ye){for(var _e=0;ye!=0;)ye&=ye-1,++_e;return _e}function mt(){for(var ye=0,_e=this.s&this.DM,Te=0;Te<this.t;++Te)ye+=St(this.data[Te]^_e);return ye}function zt(ye){var _e=Math.floor(ye/this.DB);return _e>=this.t?this.s!=0:(this.data[_e]&1<<ye%this.DB)!=0}function Yt(ye,_e){var Te=s.ONE.shiftLeft(ye);return this.bitwiseTo(Te,_e,Te),Te}function Tt(ye){return this.changeBit(ye,bt)}function qt(ye){return this.changeBit(ye,Be)}function Ut(ye){return this.changeBit(ye,Et)}function Rt(ye,_e){for(var Te=0,De=0,$e=Math.min(ye.t,this.t);Te<$e;)De+=this.data[Te]+ye.data[Te],_e.data[Te++]=De&this.DM,De>>=this.DB;if(ye.t<this.t){for(De+=ye.s;Te<this.t;)De+=this.data[Te],_e.data[Te++]=De&this.DM,De>>=this.DB;De+=this.s}else{for(De+=this.s;Te<ye.t;)De+=ye.data[Te],_e.data[Te++]=De&this.DM,De>>=this.DB;De+=ye.s}_e.s=De<0?-1:0,De>0?_e.data[Te++]=De:De<-1&&(_e.data[Te++]=this.DV+De),_e.t=Te,_e.clamp()}function Ft(ye){var _e=p();return this.addTo(ye,_e),_e}function Nt(ye){var _e=p();return this.subTo(ye,_e),_e}function yt(ye){var _e=p();return this.multiplyTo(ye,_e),_e}function Mt(ye){var _e=p();return this.divRemTo(ye,_e,null),_e}function jt(ye){var _e=p();return this.divRemTo(ye,null,_e),_e}function Ot(ye){var _e=p(),Te=p();return this.divRemTo(ye,_e,Te),new Array(_e,Te)}function vt(ye){this.data[this.t]=this.am(0,ye-1,this,0,0,this.t),++this.t,this.clamp()}function wt(ye,_e){if(ye!=0){for(;this.t<=_e;)this.data[this.t++]=0;for(this.data[_e]+=ye;this.data[_e]>=this.DV;)this.data[_e]-=this.DV,++_e>=this.t&&(this.data[this.t++]=0),++this.data[_e]}}function Lt(){}function Pe(ye){return ye}function Ce(ye,_e,Te){ye.multiplyTo(_e,Te)}function Ne(ye,_e){ye.squareTo(_e)}Lt.prototype.convert=Pe,Lt.prototype.revert=Pe,Lt.prototype.mulTo=Ce,Lt.prototype.sqrTo=Ne;function He(ye){return this.exp(ye,new Lt)}function je(ye,_e,Te){var De=Math.min(this.t+ye.t,_e);for(Te.s=0,Te.t=De;De>0;)Te.data[--De]=0;var $e;for($e=Te.t-this.t;De<$e;++De)Te.data[De+this.t]=this.am(0,ye.data[De],Te,De,0,this.t);for($e=Math.min(ye.t,_e);De<$e;++De)this.am(0,ye.data[De],Te,De,0,_e-De);Te.clamp()}function ot(ye,_e,Te){--_e;var De=Te.t=this.t+ye.t-_e;for(Te.s=0;--De>=0;)Te.data[De]=0;for(De=Math.max(_e-this.t,0);De<ye.t;++De)Te.data[this.t+De-_e]=this.am(_e-De,ye.data[De],Te,0,0,this.t+De-_e);Te.clamp(),Te.drShiftTo(1,Te)}function ct(ye){this.r2=p(),this.q3=p(),s.ONE.dlShiftTo(2*ye.t,this.r2),this.mu=this.r2.divide(ye),this.m=ye}function Ct(ye){if(ye.s<0||ye.t>2*this.m.t)return ye.mod(this.m);if(ye.compareTo(this.m)<0)return ye;var _e=p();return ye.copyTo(_e),this.reduce(_e),_e}function Qt(ye){return ye}function Ht(ye){for(ye.drShiftTo(this.m.t-1,this.r2),ye.t>this.m.t+1&&(ye.t=this.m.t+1,ye.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);ye.compareTo(this.r2)<0;)ye.dAddOffset(1,this.m.t+1);for(ye.subTo(this.r2,ye);ye.compareTo(this.m)>=0;)ye.subTo(this.m,ye)}function Dt(ye,_e){ye.squareTo(_e),this.reduce(_e)}function _t(ye,_e,Te){ye.multiplyTo(_e,Te),this.reduce(Te)}ct.prototype.convert=Ct,ct.prototype.revert=Qt,ct.prototype.reduce=Ht,ct.prototype.mulTo=_t,ct.prototype.sqrTo=Dt;function pt(ye,_e){var Te=ye.bitLength(),De,$e=I(1),Ge;if(Te<=0)return $e;Te<18?De=1:Te<48?De=3:Te<144?De=4:Te<768?De=5:De=6,Te<8?Ge=new ue(_e):_e.isEven()?Ge=new ct(_e):Ge=new Se(_e);var Ze=new Array,Ye=3,At=De-1,Kt=(1<<De)-1;if(Ze[1]=Ge.convert(this),De>1){var er=p();for(Ge.sqrTo(Ze[1],er);Ye<=Kt;)Ze[Ye]=p(),Ge.mulTo(er,Ze[Ye-2],Ze[Ye]),Ye+=2}var nr=ye.t-1,ur,mr=!0,Wt=p(),hr;for(Te=k(ye.data[nr])-1;nr>=0;){for(Te>=At?ur=ye.data[nr]>>Te-At&Kt:(ur=(ye.data[nr]&(1<<Te+1)-1)<<At-Te,nr>0&&(ur|=ye.data[nr-1]>>this.DB+Te-At)),Ye=De;(ur&1)==0;)ur>>=1,--Ye;if((Te-=Ye)<0&&(Te+=this.DB,--nr),mr)Ze[ur].copyTo($e),mr=!1;else{for(;Ye>1;)Ge.sqrTo($e,Wt),Ge.sqrTo(Wt,$e),Ye-=2;Ye>0?Ge.sqrTo($e,Wt):(hr=$e,$e=Wt,Wt=hr),Ge.mulTo(Wt,Ze[ur],$e)}for(;nr>=0&&(ye.data[nr]&1<<Te)==0;)Ge.sqrTo($e,Wt),hr=$e,$e=Wt,Wt=hr,--Te<0&&(Te=this.DB-1,--nr)}return Ge.revert($e)}function kt(ye){var _e=this.s<0?this.negate():this.clone(),Te=ye.s<0?ye.negate():ye.clone();if(_e.compareTo(Te)<0){var De=_e;_e=Te,Te=De}var $e=_e.getLowestSetBit(),Ge=Te.getLowestSetBit();if(Ge<0)return _e;for($e<Ge&&(Ge=$e),Ge>0&&(_e.rShiftTo(Ge,_e),Te.rShiftTo(Ge,Te));_e.signum()>0;)($e=_e.getLowestSetBit())>0&&_e.rShiftTo($e,_e),($e=Te.getLowestSetBit())>0&&Te.rShiftTo($e,Te),_e.compareTo(Te)>=0?(_e.subTo(Te,_e),_e.rShiftTo(1,_e)):(Te.subTo(_e,Te),Te.rShiftTo(1,Te));return Ge>0&&Te.lShiftTo(Ge,Te),Te}function Gt(ye){if(ye<=0)return 0;var _e=this.DV%ye,Te=this.s<0?ye-1:0;if(this.t>0)if(_e==0)Te=this.data[0]%ye;else for(var De=this.t-1;De>=0;--De)Te=(_e*Te+this.data[De])%ye;return Te}function wr(ye){var _e=ye.isEven();if(this.isEven()&&_e||ye.signum()==0)return s.ZERO;for(var Te=ye.clone(),De=this.clone(),$e=I(1),Ge=I(0),Ze=I(0),Ye=I(1);Te.signum()!=0;){for(;Te.isEven();)Te.rShiftTo(1,Te),_e?((!$e.isEven()||!Ge.isEven())&&($e.addTo(this,$e),Ge.subTo(ye,Ge)),$e.rShiftTo(1,$e)):Ge.isEven()||Ge.subTo(ye,Ge),Ge.rShiftTo(1,Ge);for(;De.isEven();)De.rShiftTo(1,De),_e?((!Ze.isEven()||!Ye.isEven())&&(Ze.addTo(this,Ze),Ye.subTo(ye,Ye)),Ze.rShiftTo(1,Ze)):Ye.isEven()||Ye.subTo(ye,Ye),Ye.rShiftTo(1,Ye);Te.compareTo(De)>=0?(Te.subTo(De,Te),_e&&$e.subTo(Ze,$e),Ge.subTo(Ye,Ge)):(De.subTo(Te,De),_e&&Ze.subTo($e,Ze),Ye.subTo(Ge,Ye))}if(De.compareTo(s.ONE)!=0)return s.ZERO;if(Ye.compareTo(ye)>=0)return Ye.subtract(ye);if(Ye.signum()<0)Ye.addTo(ye,Ye);else return Ye;return Ye.signum()<0?Ye.add(ye):Ye}var rr=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],yr=(1<<26)/rr[rr.length-1];function Zt(ye){var _e,Te=this.abs();if(Te.t==1&&Te.data[0]<=rr[rr.length-1]){for(_e=0;_e<rr.length;++_e)if(Te.data[0]==rr[_e])return!0;return!1}if(Te.isEven())return!1;for(_e=1;_e<rr.length;){for(var De=rr[_e],$e=_e+1;$e<rr.length&&De<yr;)De*=rr[$e++];for(De=Te.modInt(De);_e<$e;)if(De%rr[_e++]==0)return!1}return Te.millerRabin(ye)}function Xt(ye){var _e=this.subtract(s.ONE),Te=_e.getLowestSetBit();if(Te<=0)return!1;for(var De=_e.shiftRight(Te),$e=Nr(),Ge,Ze=0;Ze<ye;++Ze){do Ge=new s(this.bitLength(),$e);while(Ge.compareTo(s.ONE)<=0||Ge.compareTo(_e)>=0);var Ye=Ge.modPow(De,this);if(Ye.compareTo(s.ONE)!=0&&Ye.compareTo(_e)!=0){for(var At=1;At++<Te&&Ye.compareTo(_e)!=0;)if(Ye=Ye.modPowInt(2,this),Ye.compareTo(s.ONE)==0)return!1;if(Ye.compareTo(_e)!=0)return!1}}return!0}function Nr(){return{nextBytes:function(ye){for(var _e=0;_e<ye.length;++_e)ye[_e]=Math.floor(Math.random()*256)}}}return s.prototype.chunkSize=P,s.prototype.toRadix=n,s.prototype.fromRadix=L,s.prototype.fromNumber=U,s.prototype.bitwiseTo=ke,s.prototype.changeBit=Yt,s.prototype.addTo=Rt,s.prototype.dMultiply=vt,s.prototype.dAddOffset=wt,s.prototype.multiplyLowerTo=je,s.prototype.multiplyUpperTo=ot,s.prototype.modInt=Gt,s.prototype.millerRabin=Xt,s.prototype.clone=ne,s.prototype.intValue=ce,s.prototype.byteValue=ie,s.prototype.shortValue=u,s.prototype.signum=M,s.prototype.toByteArray=X,s.prototype.equals=me,s.prototype.min=Ie,s.prototype.max=Le,s.prototype.and=nt,s.prototype.or=dt,s.prototype.xor=lt,s.prototype.andNot=Me,s.prototype.not=Ve,s.prototype.shiftLeft=Je,s.prototype.shiftRight=Qe,s.prototype.getLowestSetBit=gt,s.prototype.bitCount=mt,s.prototype.testBit=zt,s.prototype.setBit=Tt,s.prototype.clearBit=qt,s.prototype.flipBit=Ut,s.prototype.add=Ft,s.prototype.subtract=Nt,s.prototype.multiply=yt,s.prototype.divide=Mt,s.prototype.remainder=jt,s.prototype.divideAndRemainder=Ot,s.prototype.modPow=pt,s.prototype.modInverse=wr,s.prototype.pow=He,s.prototype.gcd=kt,s.prototype.isProbablePrime=Zt,jsbn}var pkcs1={exports:{}},sha1$3={exports:{}},hasRequiredSha1$2;function requireSha1$2(){if(hasRequiredSha1$2)return sha1$3.exports;hasRequiredSha1$2=1;var e=requireForge();requireMd(),requireUtil$7();var t=sha1$3.exports=e.sha1=e.sha1||{};e.md.sha1=e.md.algorithms.sha1=t,t.create=function(){p||g();var d=null,l=e.util.createBuffer(),a=new Array(80),o={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var h=o.messageLengthSize/4,v=0;v<h;++v)o.fullMessageLength.push(0);return l=e.util.createBuffer(),d={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},o},o.start(),o.update=function(h,v){v==="utf8"&&(h=e.util.encodeUtf8(h));var _=h.length;o.messageLength+=_,_=[_/4294967296>>>0,_>>>0];for(var y=o.fullMessageLength.length-1;y>=0;--y)o.fullMessageLength[y]+=_[1],_[1]=_[0]+(o.fullMessageLength[y]/4294967296>>>0),o.fullMessageLength[y]=o.fullMessageLength[y]>>>0,_[0]=_[1]/4294967296>>>0;return l.putBytes(h),m(d,a,l),(l.read>2048||l.length()===0)&&l.compact(),o},o.digest=function(){var h=e.util.createBuffer();h.putBytes(l.bytes());var v=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,_=v&o.blockLength-1;h.putBytes(s.substr(0,o.blockLength-_));for(var y,w,T=o.fullMessageLength[0]*8,I=0;I<o.fullMessageLength.length-1;++I)y=o.fullMessageLength[I+1]*8,w=y/4294967296>>>0,T+=w,h.putInt32(T>>>0),T=y>>>0;h.putInt32(T);var O={h0:d.h0,h1:d.h1,h2:d.h2,h3:d.h3,h4:d.h4};m(O,a,h);var E=e.util.createBuffer();return E.putInt32(O.h0),E.putInt32(O.h1),E.putInt32(O.h2),E.putInt32(O.h3),E.putInt32(O.h4),E},o};var s=null,p=!1;function g(){s="",s+=e.util.fillString("\0",64),p=!0}function m(d,l,a){for(var o,h,v,_,y,w,T,I,O=a.length();O>=64;){for(h=d.h0,v=d.h1,_=d.h2,y=d.h3,w=d.h4,I=0;I<16;++I)o=a.getInt32(),l[I]=o,T=y^v&(_^y),o=(h<<5|h>>>27)+T+w+1518500249+o,w=y,y=_,_=(v<<30|v>>>2)>>>0,v=h,h=o;for(;I<20;++I)o=l[I-3]^l[I-8]^l[I-14]^l[I-16],o=o<<1|o>>>31,l[I]=o,T=y^v&(_^y),o=(h<<5|h>>>27)+T+w+1518500249+o,w=y,y=_,_=(v<<30|v>>>2)>>>0,v=h,h=o;for(;I<32;++I)o=l[I-3]^l[I-8]^l[I-14]^l[I-16],o=o<<1|o>>>31,l[I]=o,T=v^_^y,o=(h<<5|h>>>27)+T+w+1859775393+o,w=y,y=_,_=(v<<30|v>>>2)>>>0,v=h,h=o;for(;I<40;++I)o=l[I-6]^l[I-16]^l[I-28]^l[I-32],o=o<<2|o>>>30,l[I]=o,T=v^_^y,o=(h<<5|h>>>27)+T+w+1859775393+o,w=y,y=_,_=(v<<30|v>>>2)>>>0,v=h,h=o;for(;I<60;++I)o=l[I-6]^l[I-16]^l[I-28]^l[I-32],o=o<<2|o>>>30,l[I]=o,T=v&_|y&(v^_),o=(h<<5|h>>>27)+T+w+2400959708+o,w=y,y=_,_=(v<<30|v>>>2)>>>0,v=h,h=o;for(;I<80;++I)o=l[I-6]^l[I-16]^l[I-28]^l[I-32],o=o<<2|o>>>30,l[I]=o,T=v^_^y,o=(h<<5|h>>>27)+T+w+3395469782+o,w=y,y=_,_=(v<<30|v>>>2)>>>0,v=h,h=o;d.h0=d.h0+h|0,d.h1=d.h1+v|0,d.h2=d.h2+_|0,d.h3=d.h3+y|0,d.h4=d.h4+w|0,O-=64}}return sha1$3.exports}var hasRequiredPkcs1;function requirePkcs1(){if(hasRequiredPkcs1)return pkcs1.exports;hasRequiredPkcs1=1;var e=requireForge();requireUtil$7(),requireRandom(),requireSha1$2();var t=pkcs1.exports=e.pkcs1=e.pkcs1||{};t.encode_rsa_oaep=function(p,g,m){var d,l,a,o;typeof m=="string"?(d=m,l=arguments[3]||void 0,a=arguments[4]||void 0):m&&(d=m.label||void 0,l=m.seed||void 0,a=m.md||void 0,m.mgf1&&m.mgf1.md&&(o=m.mgf1.md)),a?a.start():a=e.md.sha1.create(),o||(o=a);var h=Math.ceil(p.n.bitLength()/8),v=h-2*a.digestLength-2;if(g.length>v){var _=new Error("RSAES-OAEP input message length is too long.");throw _.length=g.length,_.maxLength=v,_}d||(d=""),a.update(d,"raw");for(var y=a.digest(),w="",T=v-g.length,I=0;I<T;I++)w+="\0";var O=y.getBytes()+w+""+g;if(!l)l=e.random.getBytes(a.digestLength);else if(l.length!==a.digestLength){var _=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw _.seedLength=l.length,_.digestLength=a.digestLength,_}var E=s(l,h-a.digestLength-1,o),C=e.util.xorBytes(O,E,O.length),x=s(C,a.digestLength,o),j=e.util.xorBytes(l,x,l.length);return"\0"+j+C},t.decode_rsa_oaep=function(p,g,m){var d,l,a;typeof m=="string"?(d=m,l=arguments[3]||void 0):m&&(d=m.label||void 0,l=m.md||void 0,m.mgf1&&m.mgf1.md&&(a=m.mgf1.md));var o=Math.ceil(p.n.bitLength()/8);if(g.length!==o){var C=new Error("RSAES-OAEP encoded message length is invalid.");throw C.length=g.length,C.expectedLength=o,C}if(l===void 0?l=e.md.sha1.create():l.start(),a||(a=l),o<2*l.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");d||(d=""),l.update(d,"raw");for(var h=l.digest().getBytes(),v=g.charAt(0),_=g.substring(1,l.digestLength+1),y=g.substring(1+l.digestLength),w=s(y,l.digestLength,a),T=e.util.xorBytes(_,w,_.length),I=s(T,o-l.digestLength-1,a),O=e.util.xorBytes(y,I,y.length),E=O.substring(0,l.digestLength),C=v!=="\0",x=0;x<l.digestLength;++x)C|=h.charAt(x)!==E.charAt(x);for(var j=1,D=l.digestLength,k=l.digestLength;k<O.length;k++){var q=O.charCodeAt(k),G=q&1^1,$=j?65534:0;C|=q&$,j=j&G,D+=j}if(C||O.charCodeAt(D)!==1)throw new Error("Invalid RSAES-OAEP padding.");return O.substring(D+1)};function s(p,g,m){m||(m=e.md.sha1.create());for(var d="",l=Math.ceil(g/m.digestLength),a=0;a<l;++a){var o=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255);m.start(),m.update(p+o),d+=m.digest().getBytes()}return d.substring(0,g)}return pkcs1.exports}var prime={exports:{}},hasRequiredPrime;function requirePrime(){if(hasRequiredPrime)return prime.exports;hasRequiredPrime=1;var e=requireForge();return requireUtil$7(),requireJsbn(),requireRandom(),(function(){if(e.prime){prime.exports=e.prime;return}var t=prime.exports=e.prime=e.prime||{},s=e.jsbn.BigInteger,p=[6,4,2,4,2,4,6,2],g=new s(null);g.fromInt(30);var m=function(_,y){return _|y};t.generateProbablePrime=function(_,y,w){typeof y=="function"&&(w=y,y={}),y=y||{};var T=y.algorithm||"PRIMEINC";typeof T=="string"&&(T={name:T}),T.options=T.options||{};var I=y.prng||e.random,O={nextBytes:function(E){for(var C=I.getBytesSync(E.length),x=0;x<E.length;++x)E[x]=C.charCodeAt(x)}};if(T.name==="PRIMEINC")return d(_,O,T.options,w);throw new Error("Invalid prime generation algorithm: "+T.name)};function d(_,y,w,T){return"workers"in w?o(_,y,w,T):l(_,y,w,T)}function l(_,y,w,T){var I=h(_,y),O=0,E=v(I.bitLength());"millerRabinTests"in w&&(E=w.millerRabinTests);var C=10;"maxBlockTime"in w&&(C=w.maxBlockTime),a(I,_,y,O,E,C,T)}function a(_,y,w,T,I,O,E){var C=+new Date;do{if(_.bitLength()>y&&(_=h(y,w)),_.isProbablePrime(I))return E(null,_);_.dAddOffset(p[T++%8],0)}while(O<0||+new Date-C<O);e.util.setImmediate(function(){a(_,y,w,T,I,O,E)})}function o(_,y,w,T){if(typeof Worker>"u")return l(_,y,w,T);var I=h(_,y),O=w.workers,E=w.workLoad||100,C=E*30/8,x=w.workerScript||"forge/prime.worker.js";if(O===-1)return e.util.estimateCores(function(D,k){D&&(k=2),O=k-1,j()});j();function j(){O=Math.max(1,O);for(var D=[],k=0;k<O;++k)D[k]=new Worker(x);for(var k=0;k<O;++k)D[k].addEventListener("message",G);var q=!1;function G($){if(!q){var W=$.data;if(W.found){for(var K=0;K<D.length;++K)D[K].terminate();return q=!0,T(null,new s(W.prime,16))}I.bitLength()>_&&(I=h(_,y));var z=I.toString(16);$.target.postMessage({hex:z,workLoad:E}),I.dAddOffset(C,0)}}}}function h(_,y){var w=new s(_,y),T=_-1;return w.testBit(T)||w.bitwiseTo(s.ONE.shiftLeft(T),m,w),w.dAddOffset(31-w.mod(g).byteValue(),0),w}function v(_){return _<=100?27:_<=150?18:_<=200?15:_<=250?12:_<=300?9:_<=350?8:_<=400?7:_<=500?6:_<=600?5:_<=800?4:_<=1250?3:2}})(),prime.exports}var rsa,hasRequiredRsa;function requireRsa(){if(hasRequiredRsa)return rsa;hasRequiredRsa=1;var e=requireForge();if(requireAsn1(),requireJsbn(),requireOids(),requirePkcs1(),requirePrime(),requireRandom(),requireUtil$7(),typeof t>"u")var t=e.jsbn.BigInteger;var s=e.util.isNodejs?require$$1$3:null,p=e.asn1,g=e.util;e.pki=e.pki||{},rsa=e.pki.rsa=e.rsa=e.rsa||{};var m=e.pki,d=[6,4,2,4,2,4,6,2],l={name:"PrivateKeyInfo",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:p.Class.UNIVERSAL,type:p.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},a={name:"RSAPrivateKey",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},o={name:"RSAPublicKey",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},h=e.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:p.Class.UNIVERSAL,type:p.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},v={name:"DigestInfo",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:p.Class.UNIVERSAL,type:p.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:p.Class.UNIVERSAL,type:p.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},_=function(k){var q;if(k.algorithm in m.oids)q=m.oids[k.algorithm];else{var G=new Error("Unknown message digest algorithm.");throw G.algorithm=k.algorithm,G}var $=p.oidToDer(q).getBytes(),W=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]),K=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]);K.value.push(p.create(p.Class.UNIVERSAL,p.Type.OID,!1,$)),K.value.push(p.create(p.Class.UNIVERSAL,p.Type.NULL,!1,""));var z=p.create(p.Class.UNIVERSAL,p.Type.OCTETSTRING,!1,k.digest().getBytes());return W.value.push(K),W.value.push(z),p.toDer(W).getBytes()},y=function(k,q,G){if(G)return k.modPow(q.e,q.n);if(!q.p||!q.q)return k.modPow(q.d,q.n);q.dP||(q.dP=q.d.mod(q.p.subtract(t.ONE))),q.dQ||(q.dQ=q.d.mod(q.q.subtract(t.ONE))),q.qInv||(q.qInv=q.q.modInverse(q.p));var $;do $=new t(e.util.bytesToHex(e.random.getBytes(q.n.bitLength()/8)),16);while($.compareTo(q.n)>=0||!$.gcd(q.n).equals(t.ONE));k=k.multiply($.modPow(q.e,q.n)).mod(q.n);for(var W=k.mod(q.p).modPow(q.dP,q.p),K=k.mod(q.q).modPow(q.dQ,q.q);W.compareTo(K)<0;)W=W.add(q.p);var z=W.subtract(K).multiply(q.qInv).mod(q.p).multiply(q.q).add(K);return z=z.multiply($.modInverse(q.n)).mod(q.n),z};m.rsa.encrypt=function(k,q,G){var $=G,W,K=Math.ceil(q.n.bitLength()/8);G!==!1&&G!==!0?($=G===2,W=w(k,q,G)):(W=e.util.createBuffer(),W.putBytes(k));for(var z=new t(W.toHex(),16),Q=y(z,q,$),Y=Q.toString(16),te=e.util.createBuffer(),ae=K-Math.ceil(Y.length/2);ae>0;)te.putByte(0),--ae;return te.putBytes(e.util.hexToBytes(Y)),te.getBytes()},m.rsa.decrypt=function(k,q,G,$){var W=Math.ceil(q.n.bitLength()/8);if(k.length!==W){var K=new Error("Encrypted message length is invalid.");throw K.length=k.length,K.expected=W,K}var z=new t(e.util.createBuffer(k).toHex(),16);if(z.compareTo(q.n)>=0)throw new Error("Encrypted message is invalid.");for(var Q=y(z,q,G),Y=Q.toString(16),te=e.util.createBuffer(),ae=W-Math.ceil(Y.length/2);ae>0;)te.putByte(0),--ae;return te.putBytes(e.util.hexToBytes(Y)),$!==!1?T(te.getBytes(),q,G):te.getBytes()},m.rsa.createKeyPairGenerationState=function(k,q,G){typeof k=="string"&&(k=parseInt(k,10)),k=k||2048,G=G||{};var $=G.prng||e.random,W={nextBytes:function(Q){for(var Y=$.getBytesSync(Q.length),te=0;te<Q.length;++te)Q[te]=Y.charCodeAt(te)}},K=G.algorithm||"PRIMEINC",z;if(K==="PRIMEINC")z={algorithm:K,state:0,bits:k,rng:W,eInt:q||65537,e:new t(null),p:null,q:null,qBits:k>>1,pBits:k-(k>>1),pqState:0,num:null,keys:null},z.e.fromInt(z.eInt);else throw new Error("Invalid key generation algorithm: "+K);return z},m.rsa.stepKeyPairGenerationState=function(k,q){"algorithm"in k||(k.algorithm="PRIMEINC");var G=new t(null);G.fromInt(30);for(var $=0,W=function(ue,ee){return ue|ee},K=+new Date,z,Q=0;k.keys===null&&(q<=0||Q<q);){if(k.state===0){var Y=k.p===null?k.pBits:k.qBits,te=Y-1;k.pqState===0?(k.num=new t(Y,k.rng),k.num.testBit(te)||k.num.bitwiseTo(t.ONE.shiftLeft(te),W,k.num),k.num.dAddOffset(31-k.num.mod(G).byteValue(),0),$=0,++k.pqState):k.pqState===1?k.num.bitLength()>Y?k.pqState=0:k.num.isProbablePrime(E(k.num.bitLength()))?++k.pqState:k.num.dAddOffset(d[$++%8],0):k.pqState===2?k.pqState=k.num.subtract(t.ONE).gcd(k.e).compareTo(t.ONE)===0?3:0:k.pqState===3&&(k.pqState=0,k.p===null?k.p=k.num:k.q=k.num,k.p!==null&&k.q!==null&&++k.state,k.num=null)}else if(k.state===1)k.p.compareTo(k.q)<0&&(k.num=k.p,k.p=k.q,k.q=k.num),++k.state;else if(k.state===2)k.p1=k.p.subtract(t.ONE),k.q1=k.q.subtract(t.ONE),k.phi=k.p1.multiply(k.q1),++k.state;else if(k.state===3)k.phi.gcd(k.e).compareTo(t.ONE)===0?++k.state:(k.p=null,k.q=null,k.state=0);else if(k.state===4)k.n=k.p.multiply(k.q),k.n.bitLength()===k.bits?++k.state:(k.q=null,k.state=0);else if(k.state===5){var ae=k.e.modInverse(k.phi);k.keys={privateKey:m.rsa.setPrivateKey(k.n,k.e,ae,k.p,k.q,ae.mod(k.p1),ae.mod(k.q1),k.q.modInverse(k.p)),publicKey:m.rsa.setPublicKey(k.n,k.e)}}z=+new Date,Q+=z-K,K=z}return k.keys!==null},m.rsa.generateKeyPair=function(k,q,G,$){if(arguments.length===1?typeof k=="object"?(G=k,k=void 0):typeof k=="function"&&($=k,k=void 0):arguments.length===2?typeof k=="number"?typeof q=="function"?($=q,q=void 0):typeof q!="number"&&(G=q,q=void 0):(G=k,$=q,k=void 0,q=void 0):arguments.length===3&&(typeof q=="number"?typeof G=="function"&&($=G,G=void 0):($=G,G=q,q=void 0)),G=G||{},k===void 0&&(k=G.bits||2048),q===void 0&&(q=G.e||65537),!e.options.usePureJavaScript&&!G.prng&&k>=256&&k<=16384&&(q===65537||q===3)){if($){if(C("generateKeyPair"))return s.generateKeyPair("rsa",{modulusLength:k,publicExponent:q,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(Q,Y,te){if(Q)return $(Q);$(null,{privateKey:m.privateKeyFromPem(te),publicKey:m.publicKeyFromPem(Y)})});if(x("generateKey")&&x("exportKey"))return g.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:k,publicExponent:D(q),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(Q){return g.globalScope.crypto.subtle.exportKey("pkcs8",Q.privateKey)}).then(void 0,function(Q){$(Q)}).then(function(Q){if(Q){var Y=m.privateKeyFromAsn1(p.fromDer(e.util.createBuffer(Q)));$(null,{privateKey:Y,publicKey:m.setRsaPublicKey(Y.n,Y.e)})}});if(j("generateKey")&&j("exportKey")){var W=g.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:k,publicExponent:D(q),hash:{name:"SHA-256"}},!0,["sign","verify"]);W.oncomplete=function(Q){var Y=Q.target.result,te=g.globalScope.msCrypto.subtle.exportKey("pkcs8",Y.privateKey);te.oncomplete=function(ae){var ue=ae.target.result,ee=m.privateKeyFromAsn1(p.fromDer(e.util.createBuffer(ue)));$(null,{privateKey:ee,publicKey:m.setRsaPublicKey(ee.n,ee.e)})},te.onerror=function(ae){$(ae)}},W.onerror=function(Q){$(Q)};return}}else if(C("generateKeyPairSync")){var K=s.generateKeyPairSync("rsa",{modulusLength:k,publicExponent:q,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:m.privateKeyFromPem(K.privateKey),publicKey:m.publicKeyFromPem(K.publicKey)}}}var z=m.rsa.createKeyPairGenerationState(k,q,G);if(!$)return m.rsa.stepKeyPairGenerationState(z,0),z.keys;I(z,G,$)},m.setRsaPublicKey=m.rsa.setPublicKey=function(k,q){var G={n:k,e:q};return G.encrypt=function($,W,K){if(typeof W=="string"?W=W.toUpperCase():W===void 0&&(W="RSAES-PKCS1-V1_5"),W==="RSAES-PKCS1-V1_5")W={encode:function(Q,Y,te){return w(Q,Y,2).getBytes()}};else if(W==="RSA-OAEP"||W==="RSAES-OAEP")W={encode:function(Q,Y){return e.pkcs1.encode_rsa_oaep(Y,Q,K)}};else if(["RAW","NONE","NULL",null].indexOf(W)!==-1)W={encode:function(Q){return Q}};else if(typeof W=="string")throw new Error('Unsupported encryption scheme: "'+W+'".');var z=W.encode($,G,!0);return m.rsa.encrypt(z,G,!0)},G.verify=function($,W,K,z){typeof K=="string"?K=K.toUpperCase():K===void 0&&(K="RSASSA-PKCS1-V1_5"),z===void 0&&(z={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in z||(z._parseAllDigestBytes=!0),K==="RSASSA-PKCS1-V1_5"?K={verify:function(Y,te){te=T(te,G,!0);var ae=p.fromDer(te,{parseAllBytes:z._parseAllDigestBytes}),ue={},ee=[];if(!p.validate(ae,v,ue,ee)){var oe=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw oe.errors=ee,oe}var de=p.derToOid(ue.algorithmIdentifier);if(!(de===e.oids.md2||de===e.oids.md5||de===e.oids.sha1||de===e.oids.sha224||de===e.oids.sha256||de===e.oids.sha384||de===e.oids.sha512||de===e.oids["sha512-224"]||de===e.oids["sha512-256"])){var oe=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw oe.oid=de,oe}if((de===e.oids.md2||de===e.oids.md5)&&!("parameters"in ue))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return Y===ue.digest}}:(K==="NONE"||K==="NULL"||K===null)&&(K={verify:function(Y,te){return te=T(te,G,!0),Y===te}});var Q=m.rsa.decrypt(W,G,!0,!1);return K.verify($,Q,G.n.bitLength())},G},m.setRsaPrivateKey=m.rsa.setPrivateKey=function(k,q,G,$,W,K,z,Q){var Y={n:k,e:q,d:G,p:$,q:W,dP:K,dQ:z,qInv:Q};return Y.decrypt=function(te,ae,ue){typeof ae=="string"?ae=ae.toUpperCase():ae===void 0&&(ae="RSAES-PKCS1-V1_5");var ee=m.rsa.decrypt(te,Y,!1,!1);if(ae==="RSAES-PKCS1-V1_5")ae={decode:T};else if(ae==="RSA-OAEP"||ae==="RSAES-OAEP")ae={decode:function(oe,de){return e.pkcs1.decode_rsa_oaep(de,oe,ue)}};else if(["RAW","NONE","NULL",null].indexOf(ae)!==-1)ae={decode:function(oe){return oe}};else throw new Error('Unsupported encryption scheme: "'+ae+'".');return ae.decode(ee,Y,!1)},Y.sign=function(te,ae){var ue=!1;typeof ae=="string"&&(ae=ae.toUpperCase()),ae===void 0||ae==="RSASSA-PKCS1-V1_5"?(ae={encode:_},ue=1):(ae==="NONE"||ae==="NULL"||ae===null)&&(ae={encode:function(){return te}},ue=1);var ee=ae.encode(te,Y.n.bitLength());return m.rsa.encrypt(ee,Y,ue)},Y},m.wrapRsaPrivateKey=function(k){return p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,p.integerToDer(0).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(m.oids.rsaEncryption).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.NULL,!1,"")]),p.create(p.Class.UNIVERSAL,p.Type.OCTETSTRING,!1,p.toDer(k).getBytes())])},m.privateKeyFromAsn1=function(k){var q={},G=[];if(p.validate(k,l,q,G)&&(k=p.fromDer(e.util.createBuffer(q.privateKey))),q={},G=[],!p.validate(k,a,q,G)){var $=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw $.errors=G,$}var W,K,z,Q,Y,te,ae,ue;return W=e.util.createBuffer(q.privateKeyModulus).toHex(),K=e.util.createBuffer(q.privateKeyPublicExponent).toHex(),z=e.util.createBuffer(q.privateKeyPrivateExponent).toHex(),Q=e.util.createBuffer(q.privateKeyPrime1).toHex(),Y=e.util.createBuffer(q.privateKeyPrime2).toHex(),te=e.util.createBuffer(q.privateKeyExponent1).toHex(),ae=e.util.createBuffer(q.privateKeyExponent2).toHex(),ue=e.util.createBuffer(q.privateKeyCoefficient).toHex(),m.setRsaPrivateKey(new t(W,16),new t(K,16),new t(z,16),new t(Q,16),new t(Y,16),new t(te,16),new t(ae,16),new t(ue,16))},m.privateKeyToAsn1=m.privateKeyToRSAPrivateKey=function(k){return p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,p.integerToDer(0).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,O(k.n)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,O(k.e)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,O(k.d)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,O(k.p)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,O(k.q)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,O(k.dP)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,O(k.dQ)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,O(k.qInv))])},m.publicKeyFromAsn1=function(k){var q={},G=[];if(p.validate(k,h,q,G)){var $=p.derToOid(q.publicKeyOid);if($!==m.oids.rsaEncryption){var W=new Error("Cannot read public key. Unknown OID.");throw W.oid=$,W}k=q.rsaPublicKey}if(G=[],!p.validate(k,o,q,G)){var W=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw W.errors=G,W}var K=e.util.createBuffer(q.publicKeyModulus).toHex(),z=e.util.createBuffer(q.publicKeyExponent).toHex();return m.setRsaPublicKey(new t(K,16),new t(z,16))},m.publicKeyToAsn1=m.publicKeyToSubjectPublicKeyInfo=function(k){return p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(m.oids.rsaEncryption).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.NULL,!1,"")]),p.create(p.Class.UNIVERSAL,p.Type.BITSTRING,!1,[m.publicKeyToRSAPublicKey(k)])])},m.publicKeyToRSAPublicKey=function(k){return p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,O(k.n)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,O(k.e))])};function w(k,q,G){var $=e.util.createBuffer(),W=Math.ceil(q.n.bitLength()/8);if(k.length>W-11){var K=new Error("Message is too long for PKCS#1 v1.5 padding.");throw K.length=k.length,K.max=W-11,K}$.putByte(0),$.putByte(G);var z=W-3-k.length,Q;if(G===0||G===1){Q=G===0?0:255;for(var Y=0;Y<z;++Y)$.putByte(Q)}else for(;z>0;){for(var te=0,ae=e.random.getBytes(z),Y=0;Y<z;++Y)Q=ae.charCodeAt(Y),Q===0?++te:$.putByte(Q);z=te}return $.putByte(0),$.putBytes(k),$}function T(k,q,G,$){var W=Math.ceil(q.n.bitLength()/8),K=e.util.createBuffer(k),z=K.getByte(),Q=K.getByte();if(z!==0||G&&Q!==0&&Q!==1||!G&&Q!=2||G&&Q===0&&typeof $>"u")throw new Error("Encryption block is invalid.");var Y=0;if(Q===0){Y=W-3-$;for(var te=0;te<Y;++te)if(K.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(Q===1)for(Y=0;K.length()>1;){if(K.getByte()!==255){--K.read;break}++Y}else if(Q===2)for(Y=0;K.length()>1;){if(K.getByte()===0){--K.read;break}++Y}var ae=K.getByte();if(ae!==0||Y!==W-3-K.length())throw new Error("Encryption block is invalid.");return K.getBytes()}function I(k,q,G){typeof q=="function"&&(G=q,q={}),q=q||{};var $={algorithm:{name:q.algorithm||"PRIMEINC",options:{workers:q.workers||2,workLoad:q.workLoad||100,workerScript:q.workerScript}}};"prng"in q&&($.prng=q.prng),W();function W(){K(k.pBits,function(Q,Y){if(Q)return G(Q);if(k.p=Y,k.q!==null)return z(Q,k.q);K(k.qBits,z)})}function K(Q,Y){e.prime.generateProbablePrime(Q,$,Y)}function z(Q,Y){if(Q)return G(Q);if(k.q=Y,k.p.compareTo(k.q)<0){var te=k.p;k.p=k.q,k.q=te}if(k.p.subtract(t.ONE).gcd(k.e).compareTo(t.ONE)!==0){k.p=null,W();return}if(k.q.subtract(t.ONE).gcd(k.e).compareTo(t.ONE)!==0){k.q=null,K(k.qBits,z);return}if(k.p1=k.p.subtract(t.ONE),k.q1=k.q.subtract(t.ONE),k.phi=k.p1.multiply(k.q1),k.phi.gcd(k.e).compareTo(t.ONE)!==0){k.p=k.q=null,W();return}if(k.n=k.p.multiply(k.q),k.n.bitLength()!==k.bits){k.q=null,K(k.qBits,z);return}var ae=k.e.modInverse(k.phi);k.keys={privateKey:m.rsa.setPrivateKey(k.n,k.e,ae,k.p,k.q,ae.mod(k.p1),ae.mod(k.q1),k.q.modInverse(k.p)),publicKey:m.rsa.setPublicKey(k.n,k.e)},G(null,k.keys)}}function O(k){var q=k.toString(16);q[0]>="8"&&(q="00"+q);var G=e.util.hexToBytes(q);return G.length>1&&(G.charCodeAt(0)===0&&(G.charCodeAt(1)&128)===0||G.charCodeAt(0)===255&&(G.charCodeAt(1)&128)===128)?G.substr(1):G}function E(k){return k<=100?27:k<=150?18:k<=200?15:k<=250?12:k<=300?9:k<=350?8:k<=400?7:k<=500?6:k<=600?5:k<=800?4:k<=1250?3:2}function C(k){return e.util.isNodejs&&typeof s[k]=="function"}function x(k){return typeof g.globalScope<"u"&&typeof g.globalScope.crypto=="object"&&typeof g.globalScope.crypto.subtle=="object"&&typeof g.globalScope.crypto.subtle[k]=="function"}function j(k){return typeof g.globalScope<"u"&&typeof g.globalScope.msCrypto=="object"&&typeof g.globalScope.msCrypto.subtle=="object"&&typeof g.globalScope.msCrypto.subtle[k]=="function"}function D(k){for(var q=e.util.hexToBytes(k.toString(16)),G=new Uint8Array(q.length),$=0;$<q.length;++$)G[$]=q.charCodeAt($);return G}return rsa}var pbe,hasRequiredPbe;function requirePbe(){if(hasRequiredPbe)return pbe;hasRequiredPbe=1;var e=requireForge();if(requireAes(),requireAsn1(),requireDes(),requireMd(),requireOids(),requirePbkdf2(),requirePem(),requireRandom(),requireRc2(),requireRsa(),requireUtil$7(),typeof t>"u")var t=e.jsbn.BigInteger;var s=e.asn1,p=e.pki=e.pki||{};pbe=p.pbe=e.pbe=e.pbe||{};var g=p.oids,m={name:"EncryptedPrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},d={name:"PBES2Algorithms",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},l={name:"pkcs-12PbeParams",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"iterations"}]};p.encryptPrivateKeyInfo=function(_,y,w){w=w||{},w.saltSize=w.saltSize||8,w.count=w.count||2048,w.algorithm=w.algorithm||"aes128",w.prfAlgorithm=w.prfAlgorithm||"sha1";var T=e.random.getBytesSync(w.saltSize),I=w.count,O=s.integerToDer(I),E,C,x;if(w.algorithm.indexOf("aes")===0||w.algorithm==="des"){var j,D,k;switch(w.algorithm){case"aes128":E=16,j=16,D=g["aes128-CBC"],k=e.aes.createEncryptionCipher;break;case"aes192":E=24,j=16,D=g["aes192-CBC"],k=e.aes.createEncryptionCipher;break;case"aes256":E=32,j=16,D=g["aes256-CBC"],k=e.aes.createEncryptionCipher;break;case"des":E=8,j=8,D=g.desCBC,k=e.des.createEncryptionCipher;break;default:var q=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw q.algorithm=w.algorithm,q}var G="hmacWith"+w.prfAlgorithm.toUpperCase(),$=h(G),W=e.pkcs5.pbkdf2(y,T,I,E,$),K=e.random.getBytesSync(j),z=k(W);z.start(K),z.update(s.toDer(_)),z.finish(),x=z.output.getBytes();var Q=v(T,O,E,G);C=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(g.pkcs5PBES2).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(g.pkcs5PBKDF2).getBytes()),Q]),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(D).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,K)])])])}else if(w.algorithm==="3des"){E=24;var Y=new e.util.ByteBuffer(T),W=p.pbe.generatePkcs12Key(y,Y,1,I,E),K=p.pbe.generatePkcs12Key(y,Y,2,I,E),z=e.des.createEncryptionCipher(W);z.start(K),z.update(s.toDer(_)),z.finish(),x=z.output.getBytes(),C=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(g["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,T),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,O.getBytes())])])}else{var q=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw q.algorithm=w.algorithm,q}var te=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[C,s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,x)]);return te},p.decryptPrivateKeyInfo=function(_,y){var w=null,T={},I=[];if(!s.validate(_,m,T,I)){var O=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw O.errors=I,O}var E=s.derToOid(T.encryptionOid),C=p.pbe.getCipher(E,T.encryptionParams,y),x=e.util.createBuffer(T.encryptedData);return C.update(x),C.finish()&&(w=s.fromDer(C.output)),w},p.encryptedPrivateKeyToPem=function(_,y){var w={type:"ENCRYPTED PRIVATE KEY",body:s.toDer(_).getBytes()};return e.pem.encode(w,{maxline:y})},p.encryptedPrivateKeyFromPem=function(_){var y=e.pem.decode(_)[0];if(y.type!=="ENCRYPTED PRIVATE KEY"){var w=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw w.headerType=y.type,w}if(y.procType&&y.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return s.fromDer(y.body)},p.encryptRsaPrivateKey=function(_,y,w){if(w=w||{},!w.legacy){var T=p.wrapRsaPrivateKey(p.privateKeyToAsn1(_));return T=p.encryptPrivateKeyInfo(T,y,w),p.encryptedPrivateKeyToPem(T)}var I,O,E,C;switch(w.algorithm){case"aes128":I="AES-128-CBC",E=16,O=e.random.getBytesSync(16),C=e.aes.createEncryptionCipher;break;case"aes192":I="AES-192-CBC",E=24,O=e.random.getBytesSync(16),C=e.aes.createEncryptionCipher;break;case"aes256":I="AES-256-CBC",E=32,O=e.random.getBytesSync(16),C=e.aes.createEncryptionCipher;break;case"3des":I="DES-EDE3-CBC",E=24,O=e.random.getBytesSync(8),C=e.des.createEncryptionCipher;break;case"des":I="DES-CBC",E=8,O=e.random.getBytesSync(8),C=e.des.createEncryptionCipher;break;default:var x=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+w.algorithm+'".');throw x.algorithm=w.algorithm,x}var j=e.pbe.opensslDeriveBytes(y,O.substr(0,8),E),D=C(j);D.start(O),D.update(s.toDer(p.privateKeyToAsn1(_))),D.finish();var k={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:I,parameters:e.util.bytesToHex(O).toUpperCase()},body:D.output.getBytes()};return e.pem.encode(k)},p.decryptRsaPrivateKey=function(_,y){var w=null,T=e.pem.decode(_)[0];if(T.type!=="ENCRYPTED PRIVATE KEY"&&T.type!=="PRIVATE KEY"&&T.type!=="RSA PRIVATE KEY"){var I=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw I.headerType=I,I}if(T.procType&&T.procType.type==="ENCRYPTED"){var O,E;switch(T.dekInfo.algorithm){case"DES-CBC":O=8,E=e.des.createDecryptionCipher;break;case"DES-EDE3-CBC":O=24,E=e.des.createDecryptionCipher;break;case"AES-128-CBC":O=16,E=e.aes.createDecryptionCipher;break;case"AES-192-CBC":O=24,E=e.aes.createDecryptionCipher;break;case"AES-256-CBC":O=32,E=e.aes.createDecryptionCipher;break;case"RC2-40-CBC":O=5,E=function(k){return e.rc2.createDecryptionCipher(k,40)};break;case"RC2-64-CBC":O=8,E=function(k){return e.rc2.createDecryptionCipher(k,64)};break;case"RC2-128-CBC":O=16,E=function(k){return e.rc2.createDecryptionCipher(k,128)};break;default:var I=new Error('Could not decrypt private key; unsupported encryption algorithm "'+T.dekInfo.algorithm+'".');throw I.algorithm=T.dekInfo.algorithm,I}var C=e.util.hexToBytes(T.dekInfo.parameters),x=e.pbe.opensslDeriveBytes(y,C.substr(0,8),O),j=E(x);if(j.start(C),j.update(e.util.createBuffer(T.body)),j.finish())w=j.output.getBytes();else return w}else w=T.body;return T.type==="ENCRYPTED PRIVATE KEY"?w=p.decryptPrivateKeyInfo(s.fromDer(w),y):w=s.fromDer(w),w!==null&&(w=p.privateKeyFromAsn1(w)),w},p.pbe.generatePkcs12Key=function(_,y,w,T,I,O){var E,C;if(typeof O>"u"||O===null){if(!("sha1"in e.md))throw new Error('"sha1" hash algorithm unavailable.');O=e.md.sha1.create()}var x=O.digestLength,j=O.blockLength,D=new e.util.ByteBuffer,k=new e.util.ByteBuffer;if(_!=null){for(C=0;C<_.length;C++)k.putInt16(_.charCodeAt(C));k.putInt16(0)}var q=k.length(),G=y.length(),$=new e.util.ByteBuffer;$.fillWithByte(w,j);var W=j*Math.ceil(G/j),K=new e.util.ByteBuffer;for(C=0;C<W;C++)K.putByte(y.at(C%G));var z=j*Math.ceil(q/j),Q=new e.util.ByteBuffer;for(C=0;C<z;C++)Q.putByte(k.at(C%q));var Y=K;Y.putBuffer(Q);for(var te=Math.ceil(I/x),ae=1;ae<=te;ae++){var ue=new e.util.ByteBuffer;ue.putBytes($.bytes()),ue.putBytes(Y.bytes());for(var ee=0;ee<T;ee++)O.start(),O.update(ue.getBytes()),ue=O.digest();var oe=new e.util.ByteBuffer;for(C=0;C<j;C++)oe.putByte(ue.at(C%x));var de=Math.ceil(G/j)+Math.ceil(q/j),he=new e.util.ByteBuffer;for(E=0;E<de;E++){var Ee=new e.util.ByteBuffer(Y.getBytes(j)),fe=511;for(C=oe.length()-1;C>=0;C--)fe=fe>>8,fe+=oe.at(C)+Ee.at(C),Ee.setAt(C,fe&255);he.putBuffer(Ee)}Y=he,D.putBuffer(ue)}return D.truncate(D.length()-I),D},p.pbe.getCipher=function(_,y,w){switch(_){case p.oids.pkcs5PBES2:return p.pbe.getCipherForPBES2(_,y,w);case p.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case p.oids["pbewithSHAAnd40BitRC2-CBC"]:return p.pbe.getCipherForPKCS12PBE(_,y,w);default:var T=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw T.oid=_,T.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],T}},p.pbe.getCipherForPBES2=function(_,y,w){var T={},I=[];if(!s.validate(y,d,T,I)){var O=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw O.errors=I,O}if(_=s.derToOid(T.kdfOid),_!==p.oids.pkcs5PBKDF2){var O=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw O.oid=_,O.supportedOids=["pkcs5PBKDF2"],O}if(_=s.derToOid(T.encOid),_!==p.oids["aes128-CBC"]&&_!==p.oids["aes192-CBC"]&&_!==p.oids["aes256-CBC"]&&_!==p.oids["des-EDE3-CBC"]&&_!==p.oids.desCBC){var O=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw O.oid=_,O.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],O}var E=T.kdfSalt,C=e.util.createBuffer(T.kdfIterationCount);C=C.getInt(C.length()<<3);var x,j;switch(p.oids[_]){case"aes128-CBC":x=16,j=e.aes.createDecryptionCipher;break;case"aes192-CBC":x=24,j=e.aes.createDecryptionCipher;break;case"aes256-CBC":x=32,j=e.aes.createDecryptionCipher;break;case"des-EDE3-CBC":x=24,j=e.des.createDecryptionCipher;break;case"desCBC":x=8,j=e.des.createDecryptionCipher;break}var D=o(T.prfOid),k=e.pkcs5.pbkdf2(w,E,C,x,D),q=T.encIv,G=j(k);return G.start(q),G},p.pbe.getCipherForPKCS12PBE=function(_,y,w){var T={},I=[];if(!s.validate(y,l,T,I)){var O=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw O.errors=I,O}var E=e.util.createBuffer(T.salt),C=e.util.createBuffer(T.iterations);C=C.getInt(C.length()<<3);var x,j,D;switch(_){case p.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:x=24,j=8,D=e.des.startDecrypting;break;case p.oids["pbewithSHAAnd40BitRC2-CBC"]:x=5,j=8,D=function(W,K){var z=e.rc2.createDecryptionCipher(W,40);return z.start(K,null),z};break;default:var O=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw O.oid=_,O}var k=o(T.prfOid),q=p.pbe.generatePkcs12Key(w,E,1,C,x,k);k.start();var G=p.pbe.generatePkcs12Key(w,E,2,C,j,k);return D(q,G)},p.pbe.opensslDeriveBytes=function(_,y,w,T){if(typeof T>"u"||T===null){if(!("md5"in e.md))throw new Error('"md5" hash algorithm unavailable.');T=e.md.md5.create()}y===null&&(y="");for(var I=[a(T,_+y)],O=16,E=1;O<w;++E,O+=16)I.push(a(T,I[E-1]+_+y));return I.join("").substr(0,w)};function a(_,y){return _.start().update(y).digest().getBytes()}function o(_){var y;if(!_)y="hmacWithSHA1";else if(y=p.oids[s.derToOid(_)],!y){var w=new Error("Unsupported PRF OID.");throw w.oid=_,w.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],w}return h(y)}function h(_){var y=e.md;switch(_){case"hmacWithSHA224":y=e.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":_=_.substr(8).toLowerCase();break;default:var w=new Error("Unsupported PRF algorithm.");throw w.algorithm=_,w.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],w}if(!y||!(_ in y))throw new Error("Unknown hash algorithm: "+_);return y[_].create()}function v(_,y,w,T){var I=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,_),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,y.getBytes())]);return T!=="hmacWithSHA1"&&I.value.push(s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,e.util.hexToBytes(w.toString(16))),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(p.oids[T]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")])),I}return pbe}var pkcs12={exports:{}},pkcs7asn1={exports:{}},hasRequiredPkcs7asn1;function requirePkcs7asn1(){if(hasRequiredPkcs7asn1)return pkcs7asn1.exports;hasRequiredPkcs7asn1=1;var e=requireForge();requireAsn1(),requireUtil$7();var t=e.asn1,s=pkcs7asn1.exports=e.pkcs7asn1=e.pkcs7asn1||{};e.pkcs7=e.pkcs7||{},e.pkcs7.asn1=s;var p={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};s.contentInfoValidator=p;var g={name:"EncryptedContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};s.envelopedDataValidator={name:"EnvelopedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(g)},s.encryptedDataValidator={name:"EncryptedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"}].concat(g)};var m={name:"SignerInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};return s.signedDataValidator={name:"SignedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},p,{name:"SignedData.Certificates",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,capture:"signerInfos",optional:!0,value:[m]}]},s.recipientInfoValidator={name:"RecipientInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]},pkcs7asn1.exports}var x509={exports:{}},mgf1={exports:{}},hasRequiredMgf1;function requireMgf1(){if(hasRequiredMgf1)return mgf1.exports;hasRequiredMgf1=1;var e=requireForge();requireUtil$7(),e.mgf=e.mgf||{};var t=mgf1.exports=e.mgf.mgf1=e.mgf1=e.mgf1||{};return t.create=function(s){var p={generate:function(g,m){for(var d=new e.util.ByteBuffer,l=Math.ceil(m/s.digestLength),a=0;a<l;a++){var o=new e.util.ByteBuffer;o.putInt32(a),s.start(),s.update(g+o.getBytes()),d.putBuffer(s.digest())}return d.truncate(d.length()-m),d.getBytes()}};return p},mgf1.exports}var mgf,hasRequiredMgf;function requireMgf(){if(hasRequiredMgf)return mgf;hasRequiredMgf=1;var e=requireForge();return requireMgf1(),mgf=e.mgf=e.mgf||{},e.mgf.mgf1=e.mgf1,mgf}var pss={exports:{}},hasRequiredPss;function requirePss(){if(hasRequiredPss)return pss.exports;hasRequiredPss=1;var e=requireForge();requireRandom(),requireUtil$7();var t=pss.exports=e.pss=e.pss||{};return t.create=function(s){arguments.length===3&&(s={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var p=s.md,g=s.mgf,m=p.digestLength,d=s.salt||null;typeof d=="string"&&(d=e.util.createBuffer(d));var l;if("saltLength"in s)l=s.saltLength;else if(d!==null)l=d.length();else throw new Error("Salt length not specified or specific salt not given.");if(d!==null&&d.length()!==l)throw new Error("Given salt length does not match length of given salt.");var a=s.prng||e.random,o={};return o.encode=function(h,v){var _,y=v-1,w=Math.ceil(y/8),T=h.digest().getBytes();if(w<m+l+2)throw new Error("Message is too long to encrypt.");var I;d===null?I=a.getBytesSync(l):I=d.bytes();var O=new e.util.ByteBuffer;O.fillWithByte(0,8),O.putBytes(T),O.putBytes(I),p.start(),p.update(O.getBytes());var E=p.digest().getBytes(),C=new e.util.ByteBuffer;C.fillWithByte(0,w-l-m-2),C.putByte(1),C.putBytes(I);var x=C.getBytes(),j=w-m-1,D=g.generate(E,j),k="";for(_=0;_<j;_++)k+=String.fromCharCode(x.charCodeAt(_)^D.charCodeAt(_));var q=65280>>8*w-y&255;return k=String.fromCharCode(k.charCodeAt(0)&~q)+k.substr(1),k+E+""},o.verify=function(h,v,_){var y,w=_-1,T=Math.ceil(w/8);if(v=v.substr(-T),T<m+l+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(v.charCodeAt(T-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var I=T-m-1,O=v.substr(0,I),E=v.substr(I,m),C=65280>>8*T-w&255;if((O.charCodeAt(0)&C)!==0)throw new Error("Bits beyond keysize not zero as expected.");var x=g.generate(E,I),j="";for(y=0;y<I;y++)j+=String.fromCharCode(O.charCodeAt(y)^x.charCodeAt(y));j=String.fromCharCode(j.charCodeAt(0)&~C)+j.substr(1);var D=T-m-l-2;for(y=0;y<D;y++)if(j.charCodeAt(y)!==0)throw new Error("Leftmost octets not zero as expected");if(j.charCodeAt(D)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var k=j.substr(-l),q=new e.util.ByteBuffer;q.fillWithByte(0,8),q.putBytes(h),q.putBytes(k),p.start(),p.update(q.getBytes());var G=p.digest().getBytes();return E===G},o},pss.exports}var hasRequiredX509;function requireX509(){if(hasRequiredX509)return x509.exports;hasRequiredX509=1;var e=requireForge();requireAes(),requireAsn1(),requireDes(),requireMd(),requireMgf(),requireOids(),requirePem(),requirePss(),requireRsa(),requireUtil$7();var t=e.asn1,s=x509.exports=e.pki=e.pki||{},p=s.oids,g={};g.CN=p.commonName,g.commonName="CN",g.C=p.countryName,g.countryName="C",g.L=p.localityName,g.localityName="L",g.ST=p.stateOrProvinceName,g.stateOrProvinceName="ST",g.O=p.organizationName,g.organizationName="O",g.OU=p.organizationalUnitName,g.organizationalUnitName="OU",g.E=p.emailAddress,g.emailAddress="E";var m=e.pki.rsa.publicKeyValidator,d={name:"Certificate",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:t.Class.UNIVERSAL,type:t.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:t.Class.UNIVERSAL,type:t.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:t.Class.UNIVERSAL,type:t.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:t.Class.UNIVERSAL,type:t.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},m,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:t.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:t.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},l={name:"rsapss",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:t.Class.UNIVERSAL,type:t.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:t.Class.UNIVERSAL,type:t.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:t.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:t.Class.UNIVERSAL,type:t.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:t.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:t.Class.UNIVERSAL,type:t.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},a={name:"CertificationRequestInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},m,{name:"CertificationRequestInfo.attributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0}]}]}]},o={name:"CertificationRequest",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[a,{name:"CertificationRequest.signatureAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};s.RDNAttributesAsArray=function(D,k){for(var q=[],G,$,W,K=0;K<D.value.length;++K){G=D.value[K];for(var z=0;z<G.value.length;++z)W={},$=G.value[z],W.type=t.derToOid($.value[0].value),W.value=$.value[1].value,W.valueTagClass=$.value[1].type,W.type in p&&(W.name=p[W.type],W.name in g&&(W.shortName=g[W.name])),k&&(k.update(W.type),k.update(W.value)),q.push(W)}return q},s.CRIAttributesAsArray=function(D){for(var k=[],q=0;q<D.length;++q)for(var G=D[q],$=t.derToOid(G.value[0].value),W=G.value[1].value,K=0;K<W.length;++K){var z={};if(z.type=$,z.value=W[K].value,z.valueTagClass=W[K].type,z.type in p&&(z.name=p[z.type],z.name in g&&(z.shortName=g[z.name])),z.type===p.extensionRequest){z.extensions=[];for(var Q=0;Q<z.value.length;++Q)z.extensions.push(s.certificateExtensionFromAsn1(z.value[Q]))}k.push(z)}return k};function h(D,k){typeof k=="string"&&(k={shortName:k});for(var q=null,G,$=0;q===null&&$<D.attributes.length;++$)G=D.attributes[$],(k.type&&k.type===G.type||k.name&&k.name===G.name||k.shortName&&k.shortName===G.shortName)&&(q=G);return q}var v=function(D,k,q){var G={};if(D!==p["RSASSA-PSS"])return G;q&&(G={hash:{algorithmOid:p.sha1},mgf:{algorithmOid:p.mgf1,hash:{algorithmOid:p.sha1}},saltLength:20});var $={},W=[];if(!t.validate(k,l,$,W)){var K=new Error("Cannot read RSASSA-PSS parameter block.");throw K.errors=W,K}return $.hashOid!==void 0&&(G.hash=G.hash||{},G.hash.algorithmOid=t.derToOid($.hashOid)),$.maskGenOid!==void 0&&(G.mgf=G.mgf||{},G.mgf.algorithmOid=t.derToOid($.maskGenOid),G.mgf.hash=G.mgf.hash||{},G.mgf.hash.algorithmOid=t.derToOid($.maskGenHashOid)),$.saltLength!==void 0&&(G.saltLength=$.saltLength.charCodeAt(0)),G},_=function(D){switch(p[D.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return e.md.sha1.create();case"md5WithRSAEncryption":return e.md.md5.create();case"sha256WithRSAEncryption":return e.md.sha256.create();case"sha384WithRSAEncryption":return e.md.sha384.create();case"sha512WithRSAEncryption":return e.md.sha512.create();case"RSASSA-PSS":return e.md.sha256.create();default:var k=new Error("Could not compute "+D.type+" digest. Unknown signature OID.");throw k.signatureOid=D.signatureOid,k}},y=function(D){var k=D.certificate,q;switch(k.signatureOid){case p.sha1WithRSAEncryption:case p.sha1WithRSASignature:break;case p["RSASSA-PSS"]:var G,$;if(G=p[k.signatureParameters.mgf.hash.algorithmOid],G===void 0||e.md[G]===void 0){var W=new Error("Unsupported MGF hash function.");throw W.oid=k.signatureParameters.mgf.hash.algorithmOid,W.name=G,W}if($=p[k.signatureParameters.mgf.algorithmOid],$===void 0||e.mgf[$]===void 0){var W=new Error("Unsupported MGF function.");throw W.oid=k.signatureParameters.mgf.algorithmOid,W.name=$,W}if($=e.mgf[$].create(e.md[G].create()),G=p[k.signatureParameters.hash.algorithmOid],G===void 0||e.md[G]===void 0){var W=new Error("Unsupported RSASSA-PSS hash function.");throw W.oid=k.signatureParameters.hash.algorithmOid,W.name=G,W}q=e.pss.create(e.md[G].create(),$,k.signatureParameters.saltLength);break}return k.publicKey.verify(D.md.digest().getBytes(),D.signature,q)};s.certificateFromPem=function(D,k,q){var G=e.pem.decode(D)[0];if(G.type!=="CERTIFICATE"&&G.type!=="X509 CERTIFICATE"&&G.type!=="TRUSTED CERTIFICATE"){var $=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw $.headerType=G.type,$}if(G.procType&&G.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var W=t.fromDer(G.body,q);return s.certificateFromAsn1(W,k)},s.certificateToPem=function(D,k){var q={type:"CERTIFICATE",body:t.toDer(s.certificateToAsn1(D)).getBytes()};return e.pem.encode(q,{maxline:k})},s.publicKeyFromPem=function(D){var k=e.pem.decode(D)[0];if(k.type!=="PUBLIC KEY"&&k.type!=="RSA PUBLIC KEY"){var q=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw q.headerType=k.type,q}if(k.procType&&k.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var G=t.fromDer(k.body);return s.publicKeyFromAsn1(G)},s.publicKeyToPem=function(D,k){var q={type:"PUBLIC KEY",body:t.toDer(s.publicKeyToAsn1(D)).getBytes()};return e.pem.encode(q,{maxline:k})},s.publicKeyToRSAPublicKeyPem=function(D,k){var q={type:"RSA PUBLIC KEY",body:t.toDer(s.publicKeyToRSAPublicKey(D)).getBytes()};return e.pem.encode(q,{maxline:k})},s.getPublicKeyFingerprint=function(D,k){k=k||{};var q=k.md||e.md.sha1.create(),G=k.type||"RSAPublicKey",$;switch(G){case"RSAPublicKey":$=t.toDer(s.publicKeyToRSAPublicKey(D)).getBytes();break;case"SubjectPublicKeyInfo":$=t.toDer(s.publicKeyToAsn1(D)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+k.type+'".')}q.start(),q.update($);var W=q.digest();if(k.encoding==="hex"){var K=W.toHex();return k.delimiter?K.match(/.{2}/g).join(k.delimiter):K}else{if(k.encoding==="binary")return W.getBytes();if(k.encoding)throw new Error('Unknown encoding "'+k.encoding+'".')}return W},s.certificationRequestFromPem=function(D,k,q){var G=e.pem.decode(D)[0];if(G.type!=="CERTIFICATE REQUEST"){var $=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw $.headerType=G.type,$}if(G.procType&&G.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var W=t.fromDer(G.body,q);return s.certificationRequestFromAsn1(W,k)},s.certificationRequestToPem=function(D,k){var q={type:"CERTIFICATE REQUEST",body:t.toDer(s.certificationRequestToAsn1(D)).getBytes()};return e.pem.encode(q,{maxline:k})},s.createCertificate=function(){var D={};return D.version=2,D.serialNumber="00",D.signatureOid=null,D.signature=null,D.siginfo={},D.siginfo.algorithmOid=null,D.validity={},D.validity.notBefore=new Date,D.validity.notAfter=new Date,D.issuer={},D.issuer.getField=function(k){return h(D.issuer,k)},D.issuer.addField=function(k){T([k]),D.issuer.attributes.push(k)},D.issuer.attributes=[],D.issuer.hash=null,D.subject={},D.subject.getField=function(k){return h(D.subject,k)},D.subject.addField=function(k){T([k]),D.subject.attributes.push(k)},D.subject.attributes=[],D.subject.hash=null,D.extensions=[],D.publicKey=null,D.md=null,D.setSubject=function(k,q){T(k),D.subject.attributes=k,delete D.subject.uniqueId,q&&(D.subject.uniqueId=q),D.subject.hash=null},D.setIssuer=function(k,q){T(k),D.issuer.attributes=k,delete D.issuer.uniqueId,q&&(D.issuer.uniqueId=q),D.issuer.hash=null},D.setExtensions=function(k){for(var q=0;q<k.length;++q)I(k[q],{cert:D});D.extensions=k},D.getExtension=function(k){typeof k=="string"&&(k={name:k});for(var q=null,G,$=0;q===null&&$<D.extensions.length;++$)G=D.extensions[$],(k.id&&G.id===k.id||k.name&&G.name===k.name)&&(q=G);return q},D.sign=function(k,q){D.md=q||e.md.sha1.create();var G=p[D.md.algorithm+"WithRSAEncryption"];if(!G){var $=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw $.algorithm=D.md.algorithm,$}D.signatureOid=D.siginfo.algorithmOid=G,D.tbsCertificate=s.getTBSCertificate(D);var W=t.toDer(D.tbsCertificate);D.md.update(W.getBytes()),D.signature=k.sign(D.md)},D.verify=function(k){var q=!1;if(!D.issued(k)){var G=k.issuer,$=D.subject,W=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw W.expectedIssuer=$.attributes,W.actualIssuer=G.attributes,W}var K=k.md;if(K===null){K=_({signatureOid:k.signatureOid,type:"certificate"});var z=k.tbsCertificate||s.getTBSCertificate(k),Q=t.toDer(z);K.update(Q.getBytes())}return K!==null&&(q=y({certificate:D,md:K,signature:k.signature})),q},D.isIssuer=function(k){var q=!1,G=D.issuer,$=k.subject;if(G.hash&&$.hash)q=G.hash===$.hash;else if(G.attributes.length===$.attributes.length){q=!0;for(var W,K,z=0;q&&z<G.attributes.length;++z)W=G.attributes[z],K=$.attributes[z],(W.type!==K.type||W.value!==K.value)&&(q=!1)}return q},D.issued=function(k){return k.isIssuer(D)},D.generateSubjectKeyIdentifier=function(){return s.getPublicKeyFingerprint(D.publicKey,{type:"RSAPublicKey"})},D.verifySubjectKeyIdentifier=function(){for(var k=p.subjectKeyIdentifier,q=0;q<D.extensions.length;++q){var G=D.extensions[q];if(G.id===k){var $=D.generateSubjectKeyIdentifier().getBytes();return e.util.hexToBytes(G.subjectKeyIdentifier)===$}}return!1},D},s.certificateFromAsn1=function(D,k){var q={},G=[];if(!t.validate(D,d,q,G)){var $=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw $.errors=G,$}var W=t.derToOid(q.publicKeyOid);if(W!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var K=s.createCertificate();K.version=q.certVersion?q.certVersion.charCodeAt(0):0;var z=e.util.createBuffer(q.certSerialNumber);K.serialNumber=z.toHex(),K.signatureOid=e.asn1.derToOid(q.certSignatureOid),K.signatureParameters=v(K.signatureOid,q.certSignatureParams,!0),K.siginfo.algorithmOid=e.asn1.derToOid(q.certinfoSignatureOid),K.siginfo.parameters=v(K.siginfo.algorithmOid,q.certinfoSignatureParams,!1),K.signature=q.certSignature;var Q=[];if(q.certValidity1UTCTime!==void 0&&Q.push(t.utcTimeToDate(q.certValidity1UTCTime)),q.certValidity2GeneralizedTime!==void 0&&Q.push(t.generalizedTimeToDate(q.certValidity2GeneralizedTime)),q.certValidity3UTCTime!==void 0&&Q.push(t.utcTimeToDate(q.certValidity3UTCTime)),q.certValidity4GeneralizedTime!==void 0&&Q.push(t.generalizedTimeToDate(q.certValidity4GeneralizedTime)),Q.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(Q.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(K.validity.notBefore=Q[0],K.validity.notAfter=Q[1],K.tbsCertificate=q.tbsCertificate,k){K.md=_({signatureOid:K.signatureOid,type:"certificate"});var Y=t.toDer(K.tbsCertificate);K.md.update(Y.getBytes())}var te=e.md.sha1.create(),ae=t.toDer(q.certIssuer);te.update(ae.getBytes()),K.issuer.getField=function(oe){return h(K.issuer,oe)},K.issuer.addField=function(oe){T([oe]),K.issuer.attributes.push(oe)},K.issuer.attributes=s.RDNAttributesAsArray(q.certIssuer),q.certIssuerUniqueId&&(K.issuer.uniqueId=q.certIssuerUniqueId),K.issuer.hash=te.digest().toHex();var ue=e.md.sha1.create(),ee=t.toDer(q.certSubject);return ue.update(ee.getBytes()),K.subject.getField=function(oe){return h(K.subject,oe)},K.subject.addField=function(oe){T([oe]),K.subject.attributes.push(oe)},K.subject.attributes=s.RDNAttributesAsArray(q.certSubject),q.certSubjectUniqueId&&(K.subject.uniqueId=q.certSubjectUniqueId),K.subject.hash=ue.digest().toHex(),q.certExtensions?K.extensions=s.certificateExtensionsFromAsn1(q.certExtensions):K.extensions=[],K.publicKey=s.publicKeyFromAsn1(q.subjectPublicKeyInfo),K},s.certificateExtensionsFromAsn1=function(D){for(var k=[],q=0;q<D.value.length;++q)for(var G=D.value[q],$=0;$<G.value.length;++$)k.push(s.certificateExtensionFromAsn1(G.value[$]));return k},s.certificateExtensionFromAsn1=function(D){var k={};if(k.id=t.derToOid(D.value[0].value),k.critical=!1,D.value[1].type===t.Type.BOOLEAN?(k.critical=D.value[1].value.charCodeAt(0)!==0,k.value=D.value[2].value):k.value=D.value[1].value,k.id in p){if(k.name=p[k.id],k.name==="keyUsage"){var q=t.fromDer(k.value),G=0,$=0;q.value.length>1&&(G=q.value.charCodeAt(1),$=q.value.length>2?q.value.charCodeAt(2):0),k.digitalSignature=(G&128)===128,k.nonRepudiation=(G&64)===64,k.keyEncipherment=(G&32)===32,k.dataEncipherment=(G&16)===16,k.keyAgreement=(G&8)===8,k.keyCertSign=(G&4)===4,k.cRLSign=(G&2)===2,k.encipherOnly=(G&1)===1,k.decipherOnly=($&128)===128}else if(k.name==="basicConstraints"){var q=t.fromDer(k.value);q.value.length>0&&q.value[0].type===t.Type.BOOLEAN?k.cA=q.value[0].value.charCodeAt(0)!==0:k.cA=!1;var W=null;q.value.length>0&&q.value[0].type===t.Type.INTEGER?W=q.value[0].value:q.value.length>1&&(W=q.value[1].value),W!==null&&(k.pathLenConstraint=t.derToInteger(W))}else if(k.name==="extKeyUsage")for(var q=t.fromDer(k.value),K=0;K<q.value.length;++K){var z=t.derToOid(q.value[K].value);z in p?k[p[z]]=!0:k[z]=!0}else if(k.name==="nsCertType"){var q=t.fromDer(k.value),G=0;q.value.length>1&&(G=q.value.charCodeAt(1)),k.client=(G&128)===128,k.server=(G&64)===64,k.email=(G&32)===32,k.objsign=(G&16)===16,k.reserved=(G&8)===8,k.sslCA=(G&4)===4,k.emailCA=(G&2)===2,k.objCA=(G&1)===1}else if(k.name==="subjectAltName"||k.name==="issuerAltName"){k.altNames=[];for(var Q,q=t.fromDer(k.value),Y=0;Y<q.value.length;++Y){Q=q.value[Y];var te={type:Q.type,value:Q.value};switch(k.altNames.push(te),Q.type){case 1:case 2:case 6:break;case 7:te.ip=e.util.bytesToIP(Q.value);break;case 8:te.oid=t.derToOid(Q.value);break}}}else if(k.name==="subjectKeyIdentifier"){var q=t.fromDer(k.value);k.subjectKeyIdentifier=e.util.bytesToHex(q.value)}}return k},s.certificationRequestFromAsn1=function(D,k){var q={},G=[];if(!t.validate(D,o,q,G)){var $=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw $.errors=G,$}var W=t.derToOid(q.publicKeyOid);if(W!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var K=s.createCertificationRequest();if(K.version=q.csrVersion?q.csrVersion.charCodeAt(0):0,K.signatureOid=e.asn1.derToOid(q.csrSignatureOid),K.signatureParameters=v(K.signatureOid,q.csrSignatureParams,!0),K.siginfo.algorithmOid=e.asn1.derToOid(q.csrSignatureOid),K.siginfo.parameters=v(K.siginfo.algorithmOid,q.csrSignatureParams,!1),K.signature=q.csrSignature,K.certificationRequestInfo=q.certificationRequestInfo,k){K.md=_({signatureOid:K.signatureOid,type:"certification request"});var z=t.toDer(K.certificationRequestInfo);K.md.update(z.getBytes())}var Q=e.md.sha1.create();return K.subject.getField=function(Y){return h(K.subject,Y)},K.subject.addField=function(Y){T([Y]),K.subject.attributes.push(Y)},K.subject.attributes=s.RDNAttributesAsArray(q.certificationRequestInfoSubject,Q),K.subject.hash=Q.digest().toHex(),K.publicKey=s.publicKeyFromAsn1(q.subjectPublicKeyInfo),K.getAttribute=function(Y){return h(K,Y)},K.addAttribute=function(Y){T([Y]),K.attributes.push(Y)},K.attributes=s.CRIAttributesAsArray(q.certificationRequestInfoAttributes||[]),K},s.createCertificationRequest=function(){var D={};return D.version=0,D.signatureOid=null,D.signature=null,D.siginfo={},D.siginfo.algorithmOid=null,D.subject={},D.subject.getField=function(k){return h(D.subject,k)},D.subject.addField=function(k){T([k]),D.subject.attributes.push(k)},D.subject.attributes=[],D.subject.hash=null,D.publicKey=null,D.attributes=[],D.getAttribute=function(k){return h(D,k)},D.addAttribute=function(k){T([k]),D.attributes.push(k)},D.md=null,D.setSubject=function(k){T(k),D.subject.attributes=k,D.subject.hash=null},D.setAttributes=function(k){T(k),D.attributes=k},D.sign=function(k,q){D.md=q||e.md.sha1.create();var G=p[D.md.algorithm+"WithRSAEncryption"];if(!G){var $=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw $.algorithm=D.md.algorithm,$}D.signatureOid=D.siginfo.algorithmOid=G,D.certificationRequestInfo=s.getCertificationRequestInfo(D);var W=t.toDer(D.certificationRequestInfo);D.md.update(W.getBytes()),D.signature=k.sign(D.md)},D.verify=function(){var k=!1,q=D.md;if(q===null){q=_({signatureOid:D.signatureOid,type:"certification request"});var G=D.certificationRequestInfo||s.getCertificationRequestInfo(D),$=t.toDer(G);q.update($.getBytes())}return q!==null&&(k=y({certificate:D,md:q,signature:D.signature})),k},D};function w(D){for(var k=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),q,G,$=D.attributes,W=0;W<$.length;++W){q=$[W];var K=q.value,z=t.Type.PRINTABLESTRING;"valueTagClass"in q&&(z=q.valueTagClass,z===t.Type.UTF8&&(K=e.util.encodeUtf8(K))),G=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(q.type).getBytes()),t.create(t.Class.UNIVERSAL,z,!1,K)])]),k.value.push(G)}return k}function T(D){for(var k,q=0;q<D.length;++q){if(k=D[q],typeof k.name>"u"&&(k.type&&k.type in s.oids?k.name=s.oids[k.type]:k.shortName&&k.shortName in g&&(k.name=s.oids[g[k.shortName]])),typeof k.type>"u")if(k.name&&k.name in s.oids)k.type=s.oids[k.name];else{var G=new Error("Attribute type not specified.");throw G.attribute=k,G}if(typeof k.shortName>"u"&&k.name&&k.name in g&&(k.shortName=g[k.name]),k.type===p.extensionRequest&&(k.valueConstructed=!0,k.valueTagClass=t.Type.SEQUENCE,!k.value&&k.extensions)){k.value=[];for(var $=0;$<k.extensions.length;++$)k.value.push(s.certificateExtensionToAsn1(I(k.extensions[$])))}if(typeof k.value>"u"){var G=new Error("Attribute value not specified.");throw G.attribute=k,G}}}function I(D,k){if(k=k||{},typeof D.name>"u"&&D.id&&D.id in s.oids&&(D.name=s.oids[D.id]),typeof D.id>"u")if(D.name&&D.name in s.oids)D.id=s.oids[D.name];else{var q=new Error("Extension ID not specified.");throw q.extension=D,q}if(typeof D.value<"u")return D;if(D.name==="keyUsage"){var G=0,$=0,W=0;D.digitalSignature&&($|=128,G=7),D.nonRepudiation&&($|=64,G=6),D.keyEncipherment&&($|=32,G=5),D.dataEncipherment&&($|=16,G=4),D.keyAgreement&&($|=8,G=3),D.keyCertSign&&($|=4,G=2),D.cRLSign&&($|=2,G=1),D.encipherOnly&&($|=1,G=0),D.decipherOnly&&(W|=128,G=7);var K=String.fromCharCode(G);W!==0?K+=String.fromCharCode($)+String.fromCharCode(W):$!==0&&(K+=String.fromCharCode($)),D.value=t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,K)}else if(D.name==="basicConstraints")D.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),D.cA&&D.value.value.push(t.create(t.Class.UNIVERSAL,t.Type.BOOLEAN,!1,"")),"pathLenConstraint"in D&&D.value.value.push(t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(D.pathLenConstraint).getBytes()));else if(D.name==="extKeyUsage"){D.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);var z=D.value.value;for(var Q in D)D[Q]===!0&&(Q in p?z.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(p[Q]).getBytes())):Q.indexOf(".")!==-1&&z.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(Q).getBytes())))}else if(D.name==="nsCertType"){var G=0,$=0;D.client&&($|=128,G=7),D.server&&($|=64,G=6),D.email&&($|=32,G=5),D.objsign&&($|=16,G=4),D.reserved&&($|=8,G=3),D.sslCA&&($|=4,G=2),D.emailCA&&($|=2,G=1),D.objCA&&($|=1,G=0);var K=String.fromCharCode(G);$!==0&&(K+=String.fromCharCode($)),D.value=t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,K)}else if(D.name==="subjectAltName"||D.name==="issuerAltName"){D.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);for(var Y,te=0;te<D.altNames.length;++te){Y=D.altNames[te];var K=Y.value;if(Y.type===7&&Y.ip){if(K=e.util.bytesFromIP(Y.ip),K===null){var q=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw q.extension=D,q}}else Y.type===8&&(Y.oid?K=t.oidToDer(t.oidToDer(Y.oid)):K=t.oidToDer(K));D.value.value.push(t.create(t.Class.CONTEXT_SPECIFIC,Y.type,!1,K))}}else if(D.name==="nsComment"&&k.cert){if(!/^[\x00-\x7F]*$/.test(D.comment)||D.comment.length<1||D.comment.length>128)throw new Error('Invalid "nsComment" content.');D.value=t.create(t.Class.UNIVERSAL,t.Type.IA5STRING,!1,D.comment)}else if(D.name==="subjectKeyIdentifier"&&k.cert){var ae=k.cert.generateSubjectKeyIdentifier();D.subjectKeyIdentifier=ae.toHex(),D.value=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,ae.getBytes())}else if(D.name==="authorityKeyIdentifier"&&k.cert){D.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);var z=D.value.value;if(D.keyIdentifier){var ue=D.keyIdentifier===!0?k.cert.generateSubjectKeyIdentifier().getBytes():D.keyIdentifier;z.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!1,ue))}if(D.authorityCertIssuer){var ee=[t.create(t.Class.CONTEXT_SPECIFIC,4,!0,[w(D.authorityCertIssuer===!0?k.cert.issuer:D.authorityCertIssuer)])];z.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,ee))}if(D.serialNumber){var oe=e.util.hexToBytes(D.serialNumber===!0?k.cert.serialNumber:D.serialNumber);z.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!1,oe))}}else if(D.name==="cRLDistributionPoints"){D.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);for(var z=D.value.value,de=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),he=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]),Y,te=0;te<D.altNames.length;++te){Y=D.altNames[te];var K=Y.value;if(Y.type===7&&Y.ip){if(K=e.util.bytesFromIP(Y.ip),K===null){var q=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw q.extension=D,q}}else Y.type===8&&(Y.oid?K=t.oidToDer(t.oidToDer(Y.oid)):K=t.oidToDer(K));he.value.push(t.create(t.Class.CONTEXT_SPECIFIC,Y.type,!1,K))}de.value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[he])),z.push(de)}if(typeof D.value>"u"){var q=new Error("Extension value not specified.");throw q.extension=D,q}return D}function O(D,k){if(D===p["RSASSA-PSS"]){var q=[];return k.hash.algorithmOid!==void 0&&q.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(k.hash.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])])),k.mgf.algorithmOid!==void 0&&q.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(k.mgf.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(k.mgf.hash.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])])])),k.saltLength!==void 0&&q.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(k.saltLength).getBytes())])),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,q)}else return t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")}function E(D){var k=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);if(D.attributes.length===0)return k;for(var q=D.attributes,G=0;G<q.length;++G){var $=q[G],W=$.value,K=t.Type.UTF8;"valueTagClass"in $&&(K=$.valueTagClass),K===t.Type.UTF8&&(W=e.util.encodeUtf8(W));var z=!1;"valueConstructed"in $&&(z=$.valueConstructed);var Q=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer($.type).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,K,z,W)])]);k.value.push(Q)}return k}var C=new Date("1950-01-01T00:00:00Z"),x=new Date("2050-01-01T00:00:00Z");function j(D){return D>=C&&D<x?t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(D)):t.create(t.Class.UNIVERSAL,t.Type.GENERALIZEDTIME,!1,t.dateToGeneralizedTime(D))}return s.getTBSCertificate=function(D){var k=j(D.validity.notBefore),q=j(D.validity.notAfter),G=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(D.version).getBytes())]),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,e.util.hexToBytes(D.serialNumber)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(D.siginfo.algorithmOid).getBytes()),O(D.siginfo.algorithmOid,D.siginfo.parameters)]),w(D.issuer),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[k,q]),w(D.subject),s.publicKeyToAsn1(D.publicKey)]);return D.issuer.uniqueId&&G.value.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,"\0"+D.issuer.uniqueId)])),D.subject.uniqueId&&G.value.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!0,[t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,"\0"+D.subject.uniqueId)])),D.extensions.length>0&&G.value.push(s.certificateExtensionsToAsn1(D.extensions)),G},s.getCertificationRequestInfo=function(D){var k=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(D.version).getBytes()),w(D.subject),s.publicKeyToAsn1(D.publicKey),E(D)]);return k},s.distinguishedNameToAsn1=function(D){return w(D)},s.certificateToAsn1=function(D){var k=D.tbsCertificate||s.getTBSCertificate(D);return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[k,t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(D.signatureOid).getBytes()),O(D.signatureOid,D.signatureParameters)]),t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,"\0"+D.signature)])},s.certificateExtensionsToAsn1=function(D){var k=t.create(t.Class.CONTEXT_SPECIFIC,3,!0,[]),q=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);k.value.push(q);for(var G=0;G<D.length;++G)q.value.push(s.certificateExtensionToAsn1(D[G]));return k},s.certificateExtensionToAsn1=function(D){var k=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);k.value.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(D.id).getBytes())),D.critical&&k.value.push(t.create(t.Class.UNIVERSAL,t.Type.BOOLEAN,!1,""));var q=D.value;return typeof D.value!="string"&&(q=t.toDer(q).getBytes()),k.value.push(t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,q)),k},s.certificationRequestToAsn1=function(D){var k=D.certificationRequestInfo||s.getCertificationRequestInfo(D);return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[k,t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(D.signatureOid).getBytes()),O(D.signatureOid,D.signatureParameters)]),t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,"\0"+D.signature)])},s.createCaStore=function(D){var k={certs:{}};k.getIssuer=function(K){var z=q(K.issuer);return z},k.addCertificate=function(K){if(typeof K=="string"&&(K=e.pki.certificateFromPem(K)),G(K.subject),!k.hasCertificate(K))if(K.subject.hash in k.certs){var z=k.certs[K.subject.hash];e.util.isArray(z)||(z=[z]),z.push(K),k.certs[K.subject.hash]=z}else k.certs[K.subject.hash]=K},k.hasCertificate=function(K){typeof K=="string"&&(K=e.pki.certificateFromPem(K));var z=q(K.subject);if(!z)return!1;e.util.isArray(z)||(z=[z]);for(var Q=t.toDer(s.certificateToAsn1(K)).getBytes(),Y=0;Y<z.length;++Y){var te=t.toDer(s.certificateToAsn1(z[Y])).getBytes();if(Q===te)return!0}return!1},k.listAllCertificates=function(){var K=[];for(var z in k.certs)if(k.certs.hasOwnProperty(z)){var Q=k.certs[z];if(!e.util.isArray(Q))K.push(Q);else for(var Y=0;Y<Q.length;++Y)K.push(Q[Y])}return K},k.removeCertificate=function(K){var z;if(typeof K=="string"&&(K=e.pki.certificateFromPem(K)),G(K.subject),!k.hasCertificate(K))return null;var Q=q(K.subject);if(!e.util.isArray(Q))return z=k.certs[K.subject.hash],delete k.certs[K.subject.hash],z;for(var Y=t.toDer(s.certificateToAsn1(K)).getBytes(),te=0;te<Q.length;++te){var ae=t.toDer(s.certificateToAsn1(Q[te])).getBytes();Y===ae&&(z=Q[te],Q.splice(te,1))}return Q.length===0&&delete k.certs[K.subject.hash],z};function q(K){return G(K),k.certs[K.hash]||null}function G(K){if(!K.hash){var z=e.md.sha1.create();K.attributes=s.RDNAttributesAsArray(w(K),z),K.hash=z.digest().toHex()}}if(D)for(var $=0;$<D.length;++$){var W=D[$];k.addCertificate(W)}return k},s.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},s.verifyCertificateChain=function(D,k,q){typeof q=="function"&&(q={verify:q}),q=q||{},k=k.slice(0);var G=k.slice(0),$=q.validityCheckDate;typeof $>"u"&&($=new Date);var W=!0,K=null,z=0;do{var Q=k.shift(),Y=null,te=!1;if($&&($<Q.validity.notBefore||$>Q.validity.notAfter)&&(K={message:"Certificate is not valid yet or has expired.",error:s.certificateError.certificate_expired,notBefore:Q.validity.notBefore,notAfter:Q.validity.notAfter,now:$}),K===null){if(Y=k[0]||D.getIssuer(Q),Y===null&&Q.isIssuer(Q)&&(te=!0,Y=Q),Y){var ae=Y;e.util.isArray(ae)||(ae=[ae]);for(var ue=!1;!ue&&ae.length>0;){Y=ae.shift();try{ue=Y.verify(Q)}catch{}}ue||(K={message:"Certificate signature is invalid.",error:s.certificateError.bad_certificate})}K===null&&(!Y||te)&&!D.hasCertificate(Q)&&(K={message:"Certificate is not trusted.",error:s.certificateError.unknown_ca})}if(K===null&&Y&&!Q.isIssuer(Y)&&(K={message:"Certificate issuer is invalid.",error:s.certificateError.bad_certificate}),K===null)for(var ee={keyUsage:!0,basicConstraints:!0},oe=0;K===null&&oe<Q.extensions.length;++oe){var de=Q.extensions[oe];de.critical&&!(de.name in ee)&&(K={message:"Certificate has an unsupported critical extension.",error:s.certificateError.unsupported_certificate})}if(K===null&&(!W||k.length===0&&(!Y||te))){var he=Q.getExtension("basicConstraints"),Ee=Q.getExtension("keyUsage");if(Ee!==null&&(!Ee.keyCertSign||he===null)&&(K={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:s.certificateError.bad_certificate}),K===null&&he!==null&&!he.cA&&(K={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:s.certificateError.bad_certificate}),K===null&&Ee!==null&&"pathLenConstraint"in he){var fe=z-1;fe>he.pathLenConstraint&&(K={message:"Certificate basicConstraints pathLenConstraint violated.",error:s.certificateError.bad_certificate})}}var Se=K===null?!0:K.error,be=q.verify?q.verify(Se,z,G):Se;if(be===!0)K=null;else throw Se===!0&&(K={message:"The application rejected the certificate.",error:s.certificateError.bad_certificate}),(be||be===0)&&(typeof be=="object"&&!e.util.isArray(be)?(be.message&&(K.message=be.message),be.error&&(K.error=be.error)):typeof be=="string"&&(K.error=be)),K;W=!1,++z}while(k.length>0);return!0},x509.exports}var hasRequiredPkcs12;function requirePkcs12(){if(hasRequiredPkcs12)return pkcs12.exports;hasRequiredPkcs12=1;var e=requireForge();requireAsn1(),requireHmac(),requireOids(),requirePkcs7asn1(),requirePbe(),requireRandom(),requireRsa(),requireSha1$2(),requireUtil$7(),requireX509();var t=e.asn1,s=e.pki,p=pkcs12.exports=e.pkcs12=e.pkcs12||{},g={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},m={name:"PFX",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},g,{name:"PFX.macData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:t.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},d={name:"SafeBag",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},l={name:"Attribute",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,capture:"values"}]},a={name:"CertBag",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:t.Class.UNIVERSAL,type:t.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function o(T,I,O,E){for(var C=[],x=0;x<T.length;x++)for(var j=0;j<T[x].safeBags.length;j++){var D=T[x].safeBags[j];if(!(E!==void 0&&D.type!==E)){if(I===null){C.push(D);continue}D.attributes[I]!==void 0&&D.attributes[I].indexOf(O)>=0&&C.push(D)}}return C}p.pkcs12FromAsn1=function(T,I,O){typeof I=="string"?(O=I,I=!0):I===void 0&&(I=!0);var E={},C=[];if(!t.validate(T,m,E,C)){var x=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw x.errors=x,x}var j={version:E.version.charCodeAt(0),safeContents:[],getBags:function(Y){var te={},ae;return"localKeyId"in Y?ae=Y.localKeyId:"localKeyIdHex"in Y&&(ae=e.util.hexToBytes(Y.localKeyIdHex)),ae===void 0&&!("friendlyName"in Y)&&"bagType"in Y&&(te[Y.bagType]=o(j.safeContents,null,null,Y.bagType)),ae!==void 0&&(te.localKeyId=o(j.safeContents,"localKeyId",ae,Y.bagType)),"friendlyName"in Y&&(te.friendlyName=o(j.safeContents,"friendlyName",Y.friendlyName,Y.bagType)),te},getBagsByFriendlyName:function(Y,te){return o(j.safeContents,"friendlyName",Y,te)},getBagsByLocalKeyId:function(Y,te){return o(j.safeContents,"localKeyId",Y,te)}};if(E.version.charCodeAt(0)!==3){var x=new Error("PKCS#12 PFX of version other than 3 not supported.");throw x.version=E.version.charCodeAt(0),x}if(t.derToOid(E.contentType)!==s.oids.data){var x=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw x.oid=t.derToOid(E.contentType),x}var D=E.content.value[0];if(D.tagClass!==t.Class.UNIVERSAL||D.type!==t.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(D=h(D),E.mac){var k=null,q=0,G=t.derToOid(E.macAlgorithm);switch(G){case s.oids.sha1:k=e.md.sha1.create(),q=20;break;case s.oids.sha256:k=e.md.sha256.create(),q=32;break;case s.oids.sha384:k=e.md.sha384.create(),q=48;break;case s.oids.sha512:k=e.md.sha512.create(),q=64;break;case s.oids.md5:k=e.md.md5.create(),q=16;break}if(k===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+G);var $=new e.util.ByteBuffer(E.macSalt),W="macIterations"in E?parseInt(e.util.bytesToHex(E.macIterations),16):1,K=p.generateKey(O,$,3,W,q,k),z=e.hmac.create();z.start(k,K),z.update(D.value);var Q=z.getMac();if(Q.getBytes()!==E.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return v(j,D.value,I,O),j};function h(T){if(T.composed||T.constructed){for(var I=e.util.createBuffer(),O=0;O<T.value.length;++O)I.putBytes(T.value[O].value);T.composed=T.constructed=!1,T.value=I.getBytes()}return T}function v(T,I,O,E){if(I=t.fromDer(I,O),I.tagClass!==t.Class.UNIVERSAL||I.type!==t.Type.SEQUENCE||I.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var C=0;C<I.value.length;C++){var x=I.value[C],j={},D=[];if(!t.validate(x,g,j,D)){var k=new Error("Cannot read ContentInfo.");throw k.errors=D,k}var q={encrypted:!1},G=null,$=j.content.value[0];switch(t.derToOid(j.contentType)){case s.oids.data:if($.tagClass!==t.Class.UNIVERSAL||$.type!==t.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");G=h($).value;break;case s.oids.encryptedData:G=_($,E),q.encrypted=!0;break;default:var k=new Error("Unsupported PKCS#12 contentType.");throw k.contentType=t.derToOid(j.contentType),k}q.safeBags=y(G,O,E),T.safeContents.push(q)}}function _(T,I){var O={},E=[];if(!t.validate(T,e.pkcs7.asn1.encryptedDataValidator,O,E)){var C=new Error("Cannot read EncryptedContentInfo.");throw C.errors=E,C}var x=t.derToOid(O.contentType);if(x!==s.oids.data){var C=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw C.oid=x,C}x=t.derToOid(O.encAlgorithm);var j=s.pbe.getCipher(x,O.encParameter,I),D=h(O.encryptedContentAsn1),k=e.util.createBuffer(D.value);if(j.update(k),!j.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return j.output.getBytes()}function y(T,I,O){if(!I&&T.length===0)return[];if(T=t.fromDer(T,I),T.tagClass!==t.Class.UNIVERSAL||T.type!==t.Type.SEQUENCE||T.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var E=[],C=0;C<T.value.length;C++){var x=T.value[C],j={},D=[];if(!t.validate(x,d,j,D)){var k=new Error("Cannot read SafeBag.");throw k.errors=D,k}var q={type:t.derToOid(j.bagId),attributes:w(j.bagAttributes)};E.push(q);var G,$,W=j.bagValue.value[0];switch(q.type){case s.oids.pkcs8ShroudedKeyBag:if(W=s.decryptPrivateKeyInfo(W,O),W===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case s.oids.keyBag:try{q.key=s.privateKeyFromAsn1(W)}catch{q.key=null,q.asn1=W}continue;case s.oids.certBag:G=a,$=function(){if(t.derToOid(j.certId)!==s.oids.x509Certificate){var z=new Error("Unsupported certificate type, only X.509 supported.");throw z.oid=t.derToOid(j.certId),z}var Q=t.fromDer(j.cert,I);try{q.cert=s.certificateFromAsn1(Q,!0)}catch{q.cert=null,q.asn1=Q}};break;default:var k=new Error("Unsupported PKCS#12 SafeBag type.");throw k.oid=q.type,k}if(G!==void 0&&!t.validate(W,G,j,D)){var k=new Error("Cannot read PKCS#12 "+G.name);throw k.errors=D,k}$()}return E}function w(T){var I={};if(T!==void 0)for(var O=0;O<T.length;++O){var E={},C=[];if(!t.validate(T[O],l,E,C)){var x=new Error("Cannot read PKCS#12 BagAttribute.");throw x.errors=C,x}var j=t.derToOid(E.oid);if(s.oids[j]!==void 0){I[s.oids[j]]=[];for(var D=0;D<E.values.length;++D)I[s.oids[j]].push(E.values[D].value)}}return I}return p.toPkcs12Asn1=function(T,I,O,E){E=E||{},E.saltSize=E.saltSize||8,E.count=E.count||2048,E.algorithm=E.algorithm||E.encAlgorithm||"aes128","useMac"in E||(E.useMac=!0),"localKeyId"in E||(E.localKeyId=null),"generateLocalKeyId"in E||(E.generateLocalKeyId=!0);var C=E.localKeyId,x;if(C!==null)C=e.util.hexToBytes(C);else if(E.generateLocalKeyId)if(I){var j=e.util.isArray(I)?I[0]:I;typeof j=="string"&&(j=s.certificateFromPem(j));var D=e.md.sha1.create();D.update(t.toDer(s.certificateToAsn1(j)).getBytes()),C=D.digest().getBytes()}else C=e.random.getBytes(20);var k=[];C!==null&&k.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(s.oids.localKeyId).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,C)])])),"friendlyName"in E&&k.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(s.oids.friendlyName).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.BMPSTRING,!1,E.friendlyName)])])),k.length>0&&(x=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,k));var q=[],G=[];I!==null&&(e.util.isArray(I)?G=I:G=[I]);for(var $=[],W=0;W<G.length;++W){I=G[W],typeof I=="string"&&(I=s.certificateFromPem(I));var K=W===0?x:void 0,z=s.certificateToAsn1(I),Q=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(s.oids.certBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(s.oids.x509Certificate).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(z).getBytes())])])]),K]);$.push(Q)}if($.length>0){var Y=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,$),te=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(s.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(Y).getBytes())])]);q.push(te)}var ae=null;if(T!==null){var ue=s.wrapRsaPrivateKey(s.privateKeyToAsn1(T));O===null?ae=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(s.oids.keyBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[ue]),x]):ae=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(s.oids.pkcs8ShroudedKeyBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[s.encryptPrivateKeyInfo(ue,O,E)]),x]);var ee=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[ae]),oe=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(s.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(ee).getBytes())])]);q.push(oe)}var de=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,q),he;if(E.useMac){var D=e.md.sha1.create(),Ee=new e.util.ByteBuffer(e.random.getBytes(E.saltSize)),fe=E.count,T=p.generateKey(O,Ee,3,fe,20),Se=e.hmac.create();Se.start(D,T),Se.update(t.toDer(de).getBytes());var be=Se.getMac();he=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(s.oids.sha1).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,be.getBytes())]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,Ee.getBytes()),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(fe).getBytes())])}return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(3).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(s.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(de).getBytes())])]),he])},p.generateKey=e.pbe.generatePkcs12Key,pkcs12.exports}var hasRequiredPki;function requirePki(){if(hasRequiredPki)return pki.exports;hasRequiredPki=1;var e=requireForge();requireAsn1(),requireOids(),requirePbe(),requirePem(),requirePbkdf2(),requirePkcs12(),requirePss(),requireRsa(),requireUtil$7(),requireX509();var t=e.asn1,s=pki.exports=e.pki=e.pki||{};return s.pemToDer=function(p){var g=e.pem.decode(p)[0];if(g.procType&&g.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return e.util.createBuffer(g.body)},s.privateKeyFromPem=function(p){var g=e.pem.decode(p)[0];if(g.type!=="PRIVATE KEY"&&g.type!=="RSA PRIVATE KEY"){var m=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw m.headerType=g.type,m}if(g.procType&&g.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var d=t.fromDer(g.body);return s.privateKeyFromAsn1(d)},s.privateKeyToPem=function(p,g){var m={type:"RSA PRIVATE KEY",body:t.toDer(s.privateKeyToAsn1(p)).getBytes()};return e.pem.encode(m,{maxline:g})},s.privateKeyInfoToPem=function(p,g){var m={type:"PRIVATE KEY",body:t.toDer(p).getBytes()};return e.pem.encode(m,{maxline:g})},pki.exports}var tls_1,hasRequiredTls;function requireTls(){if(hasRequiredTls)return tls_1;hasRequiredTls=1;var e=requireForge();requireAsn1(),requireHmac(),requireMd5$2(),requirePem(),requirePki(),requireRandom(),requireSha1$2(),requireUtil$7();var t=function(J,c,N,A){var V=e.util.createBuffer(),ne=J.length>>1,ce=ne+(J.length&1),ie=J.substr(0,ce),u=J.substr(ne,ce),P=e.util.createBuffer(),M=e.hmac.create();N=c+N;var n=Math.ceil(A/16),L=Math.ceil(A/20);M.start("MD5",ie);var U=e.util.createBuffer();P.putBytes(N);for(var X=0;X<n;++X)M.start(null,null),M.update(P.getBytes()),P.putBuffer(M.digest()),M.start(null,null),M.update(P.bytes()+N),U.putBuffer(M.digest());M.start("SHA1",u);var me=e.util.createBuffer();P.clear(),P.putBytes(N);for(var X=0;X<L;++X)M.start(null,null),M.update(P.getBytes()),P.putBuffer(M.digest()),M.start(null,null),M.update(P.bytes()+N),me.putBuffer(M.digest());return V.putBytes(e.util.xorBytes(U.getBytes(),me.getBytes(),A)),V},s=function(J,c,N){var A=e.hmac.create();A.start("SHA1",J);var V=e.util.createBuffer();return V.putInt32(c[0]),V.putInt32(c[1]),V.putByte(N.type),V.putByte(N.version.major),V.putByte(N.version.minor),V.putInt16(N.length),V.putBytes(N.fragment.bytes()),A.update(V.getBytes()),A.digest().getBytes()},p=function(J,c,N){var A=!1;try{var V=J.deflate(c.fragment.getBytes());c.fragment=e.util.createBuffer(V),c.length=V.length,A=!0}catch{}return A},g=function(J,c,N){var A=!1;try{var V=J.inflate(c.fragment.getBytes());c.fragment=e.util.createBuffer(V),c.length=V.length,A=!0}catch{}return A},m=function(J,c){var N=0;switch(c){case 1:N=J.getByte();break;case 2:N=J.getInt16();break;case 3:N=J.getInt24();break;case 4:N=J.getInt32();break}return e.util.createBuffer(J.getBytes(N))},d=function(J,c,N){J.putInt(N.length(),c<<3),J.putBuffer(N)},l={};l.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}},l.SupportedVersions=[l.Versions.TLS_1_1,l.Versions.TLS_1_0],l.Version=l.SupportedVersions[0],l.MaxFragment=15360,l.ConnectionEnd={server:0,client:1},l.PRFAlgorithm={tls_prf_sha256:0},l.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},l.CipherType={stream:0,block:1,aead:2},l.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},l.CompressionMethod={none:0,deflate:1},l.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},l.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},l.Alert={},l.Alert.Level={warning:1,fatal:2},l.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},l.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},l.CipherSuites={},l.getCipherSuite=function(J){var c=null;for(var N in l.CipherSuites){var A=l.CipherSuites[N];if(A.id[0]===J.charCodeAt(0)&&A.id[1]===J.charCodeAt(1)){c=A;break}}return c},l.handleUnexpected=function(J,c){var N=!J.open&&J.entity===l.ConnectionEnd.client;N||J.error(J,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.unexpected_message}})},l.handleHelloRequest=function(J,c,N){!J.handshaking&&J.handshakes>0&&(l.queue(J,l.createAlert(J,{level:l.Alert.Level.warning,description:l.Alert.Description.no_renegotiation})),l.flush(J)),J.process()},l.parseHelloMessage=function(J,c,N){var A=null,V=J.entity===l.ConnectionEnd.client;if(N<38)J.error(J,{message:V?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});else{var ne=c.fragment,ce=ne.length();if(A={version:{major:ne.getByte(),minor:ne.getByte()},random:e.util.createBuffer(ne.getBytes(32)),session_id:m(ne,1),extensions:[]},V?(A.cipher_suite=ne.getBytes(2),A.compression_method=ne.getByte()):(A.cipher_suites=m(ne,2),A.compression_methods=m(ne,1)),ce=N-(ce-ne.length()),ce>0){for(var ie=m(ne,2);ie.length()>0;)A.extensions.push({type:[ie.getByte(),ie.getByte()],data:m(ie,2)});if(!V)for(var u=0;u<A.extensions.length;++u){var P=A.extensions[u];if(P.type[0]===0&&P.type[1]===0)for(var M=m(P.data,2);M.length()>0;){var n=M.getByte();if(n!==0)break;J.session.extensions.server_name.serverNameList.push(m(M,2).getBytes())}}}if(J.session.version&&(A.version.major!==J.session.version.major||A.version.minor!==J.session.version.minor))return J.error(J,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.protocol_version}});if(V)J.session.cipherSuite=l.getCipherSuite(A.cipher_suite);else for(var L=e.util.createBuffer(A.cipher_suites.bytes());L.length()>0&&(J.session.cipherSuite=l.getCipherSuite(L.getBytes(2)),J.session.cipherSuite===null););if(J.session.cipherSuite===null)return J.error(J,{message:"No cipher suites in common.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.handshake_failure},cipherSuite:e.util.bytesToHex(A.cipher_suite)});V?J.session.compressionMethod=A.compression_method:J.session.compressionMethod=l.CompressionMethod.none}return A},l.createSecurityParameters=function(J,c){var N=J.entity===l.ConnectionEnd.client,A=c.random.bytes(),V=N?J.session.sp.client_random:A,ne=N?A:l.createRandom().getBytes();J.session.sp={entity:J.entity,prf_algorithm:l.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:J.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:V,server_random:ne}},l.handleServerHello=function(J,c,N){var A=l.parseHelloMessage(J,c,N);if(!J.fail){if(A.version.minor<=J.version.minor)J.version.minor=A.version.minor;else return J.error(J,{message:"Incompatible TLS version.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.protocol_version}});J.session.version=J.version;var V=A.session_id.bytes();V.length>0&&V===J.session.id?(J.expect=y,J.session.resuming=!0,J.session.sp.server_random=A.random.bytes()):(J.expect=o,J.session.resuming=!1,l.createSecurityParameters(J,A)),J.session.id=V,J.process()}},l.handleClientHello=function(J,c,N){var A=l.parseHelloMessage(J,c,N);if(!J.fail){var V=A.session_id.bytes(),ne=null;if(J.sessionCache&&(ne=J.sessionCache.getSession(V),ne===null?V="":(ne.version.major!==A.version.major||ne.version.minor>A.version.minor)&&(ne=null,V="")),V.length===0&&(V=e.random.getBytes(32)),J.session.id=V,J.session.clientHelloVersion=A.version,J.session.sp={},ne)J.version=J.session.version=ne.version,J.session.sp=ne.sp;else{for(var ce,ie=1;ie<l.SupportedVersions.length&&(ce=l.SupportedVersions[ie],!(ce.minor<=A.version.minor));++ie);J.version={major:ce.major,minor:ce.minor},J.session.version=J.version}ne!==null?(J.expect=j,J.session.resuming=!0,J.session.sp.client_random=A.random.bytes()):(J.expect=J.verifyClient!==!1?E:C,J.session.resuming=!1,l.createSecurityParameters(J,A)),J.open=!0,l.queue(J,l.createRecord(J,{type:l.ContentType.handshake,data:l.createServerHello(J)})),J.session.resuming?(l.queue(J,l.createRecord(J,{type:l.ContentType.change_cipher_spec,data:l.createChangeCipherSpec()})),J.state.pending=l.createConnectionState(J),J.state.current.write=J.state.pending.write,l.queue(J,l.createRecord(J,{type:l.ContentType.handshake,data:l.createFinished(J)}))):(l.queue(J,l.createRecord(J,{type:l.ContentType.handshake,data:l.createCertificate(J)})),J.fail||(l.queue(J,l.createRecord(J,{type:l.ContentType.handshake,data:l.createServerKeyExchange(J)})),J.verifyClient!==!1&&l.queue(J,l.createRecord(J,{type:l.ContentType.handshake,data:l.createCertificateRequest(J)})),l.queue(J,l.createRecord(J,{type:l.ContentType.handshake,data:l.createServerHelloDone(J)})))),l.flush(J),J.process()}},l.handleCertificate=function(J,c,N){if(N<3)return J.error(J,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});var A=c.fragment,V={certificate_list:m(A,3)},ne,ce,ie=[];try{for(;V.certificate_list.length()>0;)ne=m(V.certificate_list,3),ce=e.asn1.fromDer(ne),ne=e.pki.certificateFromAsn1(ce,!0),ie.push(ne)}catch(P){return J.error(J,{message:"Could not parse certificate list.",cause:P,send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.bad_certificate}})}var u=J.entity===l.ConnectionEnd.client;(u||J.verifyClient===!0)&&ie.length===0?J.error(J,{message:u?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}}):ie.length===0?J.expect=u?h:C:(u?J.session.serverCertificate=ie[0]:J.session.clientCertificate=ie[0],l.verifyCertificateChain(J,ie)&&(J.expect=u?h:C)),J.process()},l.handleServerKeyExchange=function(J,c,N){if(N>0)return J.error(J,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.unsupported_certificate}});J.expect=v,J.process()},l.handleClientKeyExchange=function(J,c,N){if(N<48)return J.error(J,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.unsupported_certificate}});var A=c.fragment,V={enc_pre_master_secret:m(A,2).getBytes()},ne=null;if(J.getPrivateKey)try{ne=J.getPrivateKey(J,J.session.serverCertificate),ne=e.pki.privateKeyFromPem(ne)}catch(u){J.error(J,{message:"Could not get private key.",cause:u,send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}})}if(ne===null)return J.error(J,{message:"No private key set.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}});try{var ce=J.session.sp;ce.pre_master_secret=ne.decrypt(V.enc_pre_master_secret);var ie=J.session.clientHelloVersion;if(ie.major!==ce.pre_master_secret.charCodeAt(0)||ie.minor!==ce.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{ce.pre_master_secret=e.random.getBytes(48)}J.expect=j,J.session.clientCertificate!==null&&(J.expect=x),J.process()},l.handleCertificateRequest=function(J,c,N){if(N<3)return J.error(J,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});var A=c.fragment,V={certificate_types:m(A,1),certificate_authorities:m(A,2)};J.session.certificateRequest=V,J.expect=_,J.process()},l.handleCertificateVerify=function(J,c,N){if(N<2)return J.error(J,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});var A=c.fragment;A.read-=4;var V=A.bytes();A.read+=4;var ne={signature:m(A,2).getBytes()},ce=e.util.createBuffer();ce.putBuffer(J.session.md5.digest()),ce.putBuffer(J.session.sha1.digest()),ce=ce.getBytes();try{var ie=J.session.clientCertificate;if(!ie.publicKey.verify(ce,ne.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");J.session.md5.update(V),J.session.sha1.update(V)}catch{return J.error(J,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.handshake_failure}})}J.expect=j,J.process()},l.handleServerHelloDone=function(J,c,N){if(N>0)return J.error(J,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.record_overflow}});if(J.serverCertificate===null){var A={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.insufficient_security}},V=0,ne=J.verify(J,A.alert.description,V,[]);if(ne!==!0)return(ne||ne===0)&&(typeof ne=="object"&&!e.util.isArray(ne)?(ne.message&&(A.message=ne.message),ne.alert&&(A.alert.description=ne.alert)):typeof ne=="number"&&(A.alert.description=ne)),J.error(J,A)}J.session.certificateRequest!==null&&(c=l.createRecord(J,{type:l.ContentType.handshake,data:l.createCertificate(J)}),l.queue(J,c)),c=l.createRecord(J,{type:l.ContentType.handshake,data:l.createClientKeyExchange(J)}),l.queue(J,c),J.expect=I;var ce=function(ie,u){ie.session.certificateRequest!==null&&ie.session.clientCertificate!==null&&l.queue(ie,l.createRecord(ie,{type:l.ContentType.handshake,data:l.createCertificateVerify(ie,u)})),l.queue(ie,l.createRecord(ie,{type:l.ContentType.change_cipher_spec,data:l.createChangeCipherSpec()})),ie.state.pending=l.createConnectionState(ie),ie.state.current.write=ie.state.pending.write,l.queue(ie,l.createRecord(ie,{type:l.ContentType.handshake,data:l.createFinished(ie)})),ie.expect=y,l.flush(ie),ie.process()};if(J.session.certificateRequest===null||J.session.clientCertificate===null)return ce(J,null);l.getClientSignature(J,ce)},l.handleChangeCipherSpec=function(J,c){if(c.fragment.getByte()!==1)return J.error(J,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});var N=J.entity===l.ConnectionEnd.client;(J.session.resuming&&N||!J.session.resuming&&!N)&&(J.state.pending=l.createConnectionState(J)),J.state.current.read=J.state.pending.read,(!J.session.resuming&&N||J.session.resuming&&!N)&&(J.state.pending=null),J.expect=N?w:D,J.process()},l.handleFinished=function(J,c,N){var A=c.fragment;A.read-=4;var V=A.bytes();A.read+=4;var ne=c.fragment.getBytes();A=e.util.createBuffer(),A.putBuffer(J.session.md5.digest()),A.putBuffer(J.session.sha1.digest());var ce=J.entity===l.ConnectionEnd.client,ie=ce?"server finished":"client finished",u=J.session.sp,P=12,M=t;if(A=M(u.master_secret,ie,A.getBytes(),P),A.getBytes()!==ne)return J.error(J,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.decrypt_error}});J.session.md5.update(V),J.session.sha1.update(V),(J.session.resuming&&ce||!J.session.resuming&&!ce)&&(l.queue(J,l.createRecord(J,{type:l.ContentType.change_cipher_spec,data:l.createChangeCipherSpec()})),J.state.current.write=J.state.pending.write,J.state.pending=null,l.queue(J,l.createRecord(J,{type:l.ContentType.handshake,data:l.createFinished(J)}))),J.expect=ce?T:k,J.handshaking=!1,++J.handshakes,J.peerCertificate=ce?J.session.serverCertificate:J.session.clientCertificate,l.flush(J),J.isConnected=!0,J.connected(J),J.process()},l.handleAlert=function(J,c){var N=c.fragment,A={level:N.getByte(),description:N.getByte()},V;switch(A.description){case l.Alert.Description.close_notify:V="Connection closed.";break;case l.Alert.Description.unexpected_message:V="Unexpected message.";break;case l.Alert.Description.bad_record_mac:V="Bad record MAC.";break;case l.Alert.Description.decryption_failed:V="Decryption failed.";break;case l.Alert.Description.record_overflow:V="Record overflow.";break;case l.Alert.Description.decompression_failure:V="Decompression failed.";break;case l.Alert.Description.handshake_failure:V="Handshake failure.";break;case l.Alert.Description.bad_certificate:V="Bad certificate.";break;case l.Alert.Description.unsupported_certificate:V="Unsupported certificate.";break;case l.Alert.Description.certificate_revoked:V="Certificate revoked.";break;case l.Alert.Description.certificate_expired:V="Certificate expired.";break;case l.Alert.Description.certificate_unknown:V="Certificate unknown.";break;case l.Alert.Description.illegal_parameter:V="Illegal parameter.";break;case l.Alert.Description.unknown_ca:V="Unknown certificate authority.";break;case l.Alert.Description.access_denied:V="Access denied.";break;case l.Alert.Description.decode_error:V="Decode error.";break;case l.Alert.Description.decrypt_error:V="Decrypt error.";break;case l.Alert.Description.export_restriction:V="Export restriction.";break;case l.Alert.Description.protocol_version:V="Unsupported protocol version.";break;case l.Alert.Description.insufficient_security:V="Insufficient security.";break;case l.Alert.Description.internal_error:V="Internal error.";break;case l.Alert.Description.user_canceled:V="User canceled.";break;case l.Alert.Description.no_renegotiation:V="Renegotiation not supported.";break;default:V="Unknown error.";break}if(A.description===l.Alert.Description.close_notify)return J.close();J.error(J,{message:V,send:!1,origin:J.entity===l.ConnectionEnd.client?"server":"client",alert:A}),J.process()},l.handleHandshake=function(J,c){var N=c.fragment,A=N.getByte(),V=N.getInt24();if(V>N.length())return J.fragmented=c,c.fragment=e.util.createBuffer(),N.read-=4,J.process();J.fragmented=null,N.read-=4;var ne=N.bytes(V+4);N.read+=4,A in he[J.entity][J.expect]?(J.entity===l.ConnectionEnd.server&&!J.open&&!J.fail&&(J.handshaking=!0,J.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:e.md.md5.create(),sha1:e.md.sha1.create()}),A!==l.HandshakeType.hello_request&&A!==l.HandshakeType.certificate_verify&&A!==l.HandshakeType.finished&&(J.session.md5.update(ne),J.session.sha1.update(ne)),he[J.entity][J.expect][A](J,c,V)):l.handleUnexpected(J,c)},l.handleApplicationData=function(J,c){J.data.putBuffer(c.fragment),J.dataReady(J),J.process()},l.handleHeartbeat=function(J,c){var N=c.fragment,A=N.getByte(),V=N.getInt16(),ne=N.getBytes(V);if(A===l.HeartbeatMessageType.heartbeat_request){if(J.handshaking||V>ne.length)return J.process();l.queue(J,l.createRecord(J,{type:l.ContentType.heartbeat,data:l.createHeartbeat(l.HeartbeatMessageType.heartbeat_response,ne)})),l.flush(J)}else if(A===l.HeartbeatMessageType.heartbeat_response){if(ne!==J.expectedHeartbeatPayload)return J.process();J.heartbeatReceived&&J.heartbeatReceived(J,e.util.createBuffer(ne))}J.process()};var a=0,o=1,h=2,v=3,_=4,y=5,w=6,T=7,I=8,O=0,E=1,C=2,x=3,j=4,D=5,k=6,q=l.handleUnexpected,G=l.handleChangeCipherSpec,$=l.handleAlert,W=l.handleHandshake,K=l.handleApplicationData,z=l.handleHeartbeat,Q=[];Q[l.ConnectionEnd.client]=[[q,$,W,q,z],[q,$,W,q,z],[q,$,W,q,z],[q,$,W,q,z],[q,$,W,q,z],[G,$,q,q,z],[q,$,W,q,z],[q,$,W,K,z],[q,$,W,q,z]],Q[l.ConnectionEnd.server]=[[q,$,W,q,z],[q,$,W,q,z],[q,$,W,q,z],[q,$,W,q,z],[G,$,q,q,z],[q,$,W,q,z],[q,$,W,K,z],[q,$,W,q,z]];var Y=l.handleHelloRequest,te=l.handleServerHello,ae=l.handleCertificate,ue=l.handleServerKeyExchange,ee=l.handleCertificateRequest,oe=l.handleServerHelloDone,de=l.handleFinished,he=[];he[l.ConnectionEnd.client]=[[q,q,te,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q],[Y,q,q,q,q,q,q,q,q,q,q,ae,ue,ee,oe,q,q,q,q,q,q],[Y,q,q,q,q,q,q,q,q,q,q,q,ue,ee,oe,q,q,q,q,q,q],[Y,q,q,q,q,q,q,q,q,q,q,q,q,ee,oe,q,q,q,q,q,q],[Y,q,q,q,q,q,q,q,q,q,q,q,q,q,oe,q,q,q,q,q,q],[Y,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q],[Y,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,de],[Y,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q],[Y,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q]];var Ee=l.handleClientHello,fe=l.handleClientKeyExchange,Se=l.handleCertificateVerify;he[l.ConnectionEnd.server]=[[q,Ee,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q],[q,q,q,q,q,q,q,q,q,q,q,ae,q,q,q,q,q,q,q,q,q],[q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,fe,q,q,q,q],[q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,Se,q,q,q,q,q],[q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q],[q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,de],[q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q],[q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q]],l.generateKeys=function(J,c){var N=t,A=c.client_random+c.server_random;J.session.resuming||(c.master_secret=N(c.pre_master_secret,"master secret",A,48).bytes(),c.pre_master_secret=null),A=c.server_random+c.client_random;var V=2*c.mac_key_length+2*c.enc_key_length,ne=J.version.major===l.Versions.TLS_1_0.major&&J.version.minor===l.Versions.TLS_1_0.minor;ne&&(V+=2*c.fixed_iv_length);var ce=N(c.master_secret,"key expansion",A,V),ie={client_write_MAC_key:ce.getBytes(c.mac_key_length),server_write_MAC_key:ce.getBytes(c.mac_key_length),client_write_key:ce.getBytes(c.enc_key_length),server_write_key:ce.getBytes(c.enc_key_length)};return ne&&(ie.client_write_IV=ce.getBytes(c.fixed_iv_length),ie.server_write_IV=ce.getBytes(c.fixed_iv_length)),ie},l.createConnectionState=function(J){var c=J.entity===l.ConnectionEnd.client,N=function(){var ne={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(ce){return!0},compressionState:null,compressFunction:function(ce){return!0},updateSequenceNumber:function(){ne.sequenceNumber[1]===4294967295?(ne.sequenceNumber[1]=0,++ne.sequenceNumber[0]):++ne.sequenceNumber[1]}};return ne},A={read:N(),write:N()};if(A.read.update=function(ne,ce){return A.read.cipherFunction(ce,A.read)?A.read.compressFunction(ne,ce,A.read)||ne.error(ne,{message:"Could not decompress record.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.decompression_failure}}):ne.error(ne,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.bad_record_mac}}),!ne.fail},A.write.update=function(ne,ce){return A.write.compressFunction(ne,ce,A.write)?A.write.cipherFunction(ce,A.write)||ne.error(ne,{message:"Could not encrypt record.",send:!1,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}}):ne.error(ne,{message:"Could not compress record.",send:!1,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}}),!ne.fail},J.session){var V=J.session.sp;switch(J.session.cipherSuite.initSecurityParameters(V),V.keys=l.generateKeys(J,V),A.read.macKey=c?V.keys.server_write_MAC_key:V.keys.client_write_MAC_key,A.write.macKey=c?V.keys.client_write_MAC_key:V.keys.server_write_MAC_key,J.session.cipherSuite.initConnectionState(A,J,V),V.compression_algorithm){case l.CompressionMethod.none:break;case l.CompressionMethod.deflate:A.read.compressFunction=g,A.write.compressFunction=p;break;default:throw new Error("Unsupported compression algorithm.")}}return A},l.createRandom=function(){var J=new Date,c=+J+J.getTimezoneOffset()*6e4,N=e.util.createBuffer();return N.putInt32(c),N.putBytes(e.random.getBytes(28)),N},l.createRecord=function(J,c){if(!c.data)return null;var N={type:c.type,version:{major:J.version.major,minor:J.version.minor},length:c.data.length(),fragment:c.data};return N},l.createAlert=function(J,c){var N=e.util.createBuffer();return N.putByte(c.level),N.putByte(c.description),l.createRecord(J,{type:l.ContentType.alert,data:N})},l.createClientHello=function(J){J.session.clientHelloVersion={major:J.version.major,minor:J.version.minor};for(var c=e.util.createBuffer(),N=0;N<J.cipherSuites.length;++N){var A=J.cipherSuites[N];c.putByte(A.id[0]),c.putByte(A.id[1])}var V=c.length(),ne=e.util.createBuffer();ne.putByte(l.CompressionMethod.none);var ce=ne.length(),ie=e.util.createBuffer();if(J.virtualHost){var u=e.util.createBuffer();u.putByte(0),u.putByte(0);var P=e.util.createBuffer();P.putByte(0),d(P,2,e.util.createBuffer(J.virtualHost));var M=e.util.createBuffer();d(M,2,P),d(u,2,M),ie.putBuffer(u)}var n=ie.length();n>0&&(n+=2);var L=J.session.id,U=L.length+1+2+4+28+2+V+1+ce+n,X=e.util.createBuffer();return X.putByte(l.HandshakeType.client_hello),X.putInt24(U),X.putByte(J.version.major),X.putByte(J.version.minor),X.putBytes(J.session.sp.client_random),d(X,1,e.util.createBuffer(L)),d(X,2,c),d(X,1,ne),n>0&&d(X,2,ie),X},l.createServerHello=function(J){var c=J.session.id,N=c.length+1+2+4+28+2+1,A=e.util.createBuffer();return A.putByte(l.HandshakeType.server_hello),A.putInt24(N),A.putByte(J.version.major),A.putByte(J.version.minor),A.putBytes(J.session.sp.server_random),d(A,1,e.util.createBuffer(c)),A.putByte(J.session.cipherSuite.id[0]),A.putByte(J.session.cipherSuite.id[1]),A.putByte(J.session.compressionMethod),A},l.createCertificate=function(J){var c=J.entity===l.ConnectionEnd.client,N=null;if(J.getCertificate){var A;c?A=J.session.certificateRequest:A=J.session.extensions.server_name.serverNameList,N=J.getCertificate(J,A)}var V=e.util.createBuffer();if(N!==null)try{e.util.isArray(N)||(N=[N]);for(var ne=null,ce=0;ce<N.length;++ce){var ie=e.pem.decode(N[ce])[0];if(ie.type!=="CERTIFICATE"&&ie.type!=="X509 CERTIFICATE"&&ie.type!=="TRUSTED CERTIFICATE"){var u=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw u.headerType=ie.type,u}if(ie.procType&&ie.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var P=e.util.createBuffer(ie.body);ne===null&&(ne=e.asn1.fromDer(P.bytes(),!1));var M=e.util.createBuffer();d(M,3,P),V.putBuffer(M)}N=e.pki.certificateFromAsn1(ne),c?J.session.clientCertificate=N:J.session.serverCertificate=N}catch(U){return J.error(J,{message:"Could not send certificate list.",cause:U,send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.bad_certificate}})}var n=3+V.length(),L=e.util.createBuffer();return L.putByte(l.HandshakeType.certificate),L.putInt24(n),d(L,3,V),L},l.createClientKeyExchange=function(J){var c=e.util.createBuffer();c.putByte(J.session.clientHelloVersion.major),c.putByte(J.session.clientHelloVersion.minor),c.putBytes(e.random.getBytes(46));var N=J.session.sp;N.pre_master_secret=c.getBytes();var A=J.session.serverCertificate.publicKey;c=A.encrypt(N.pre_master_secret);var V=c.length+2,ne=e.util.createBuffer();return ne.putByte(l.HandshakeType.client_key_exchange),ne.putInt24(V),ne.putInt16(c.length),ne.putBytes(c),ne},l.createServerKeyExchange=function(J){var c=e.util.createBuffer();return c},l.getClientSignature=function(J,c){var N=e.util.createBuffer();N.putBuffer(J.session.md5.digest()),N.putBuffer(J.session.sha1.digest()),N=N.getBytes(),J.getSignature=J.getSignature||function(A,V,ne){var ce=null;if(A.getPrivateKey)try{ce=A.getPrivateKey(A,A.session.clientCertificate),ce=e.pki.privateKeyFromPem(ce)}catch(ie){A.error(A,{message:"Could not get private key.",cause:ie,send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}})}ce===null?A.error(A,{message:"No private key set.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}}):V=ce.sign(V,null),ne(A,V)},J.getSignature(J,N,c)},l.createCertificateVerify=function(J,c){var N=c.length+2,A=e.util.createBuffer();return A.putByte(l.HandshakeType.certificate_verify),A.putInt24(N),A.putInt16(c.length),A.putBytes(c),A},l.createCertificateRequest=function(J){var c=e.util.createBuffer();c.putByte(1);var N=e.util.createBuffer();for(var A in J.caStore.certs){var V=J.caStore.certs[A],ne=e.pki.distinguishedNameToAsn1(V.subject),ce=e.asn1.toDer(ne);N.putInt16(ce.length()),N.putBuffer(ce)}var ie=1+c.length()+2+N.length(),u=e.util.createBuffer();return u.putByte(l.HandshakeType.certificate_request),u.putInt24(ie),d(u,1,c),d(u,2,N),u},l.createServerHelloDone=function(J){var c=e.util.createBuffer();return c.putByte(l.HandshakeType.server_hello_done),c.putInt24(0),c},l.createChangeCipherSpec=function(){var J=e.util.createBuffer();return J.putByte(1),J},l.createFinished=function(J){var c=e.util.createBuffer();c.putBuffer(J.session.md5.digest()),c.putBuffer(J.session.sha1.digest());var N=J.entity===l.ConnectionEnd.client,A=J.session.sp,V=12,ne=t,ce=N?"client finished":"server finished";c=ne(A.master_secret,ce,c.getBytes(),V);var ie=e.util.createBuffer();return ie.putByte(l.HandshakeType.finished),ie.putInt24(c.length()),ie.putBuffer(c),ie},l.createHeartbeat=function(J,c,N){typeof N>"u"&&(N=c.length);var A=e.util.createBuffer();A.putByte(J),A.putInt16(N),A.putBytes(c);var V=A.length(),ne=Math.max(16,V-N-3);return A.putBytes(e.random.getBytes(ne)),A},l.queue=function(J,c){if(c&&!(c.fragment.length()===0&&(c.type===l.ContentType.handshake||c.type===l.ContentType.alert||c.type===l.ContentType.change_cipher_spec))){if(c.type===l.ContentType.handshake){var N=c.fragment.bytes();J.session.md5.update(N),J.session.sha1.update(N),N=null}var A;if(c.fragment.length()<=l.MaxFragment)A=[c];else{A=[];for(var V=c.fragment.bytes();V.length>l.MaxFragment;)A.push(l.createRecord(J,{type:c.type,data:e.util.createBuffer(V.slice(0,l.MaxFragment))})),V=V.slice(l.MaxFragment);V.length>0&&A.push(l.createRecord(J,{type:c.type,data:e.util.createBuffer(V)}))}for(var ne=0;ne<A.length&&!J.fail;++ne){var ce=A[ne],ie=J.state.current.write;ie.update(J,ce)&&J.records.push(ce)}}},l.flush=function(J){for(var c=0;c<J.records.length;++c){var N=J.records[c];J.tlsData.putByte(N.type),J.tlsData.putByte(N.version.major),J.tlsData.putByte(N.version.minor),J.tlsData.putInt16(N.fragment.length()),J.tlsData.putBuffer(J.records[c].fragment)}return J.records=[],J.tlsDataReady(J)};var be=function(J){switch(J){case!0:return!0;case e.pki.certificateError.bad_certificate:return l.Alert.Description.bad_certificate;case e.pki.certificateError.unsupported_certificate:return l.Alert.Description.unsupported_certificate;case e.pki.certificateError.certificate_revoked:return l.Alert.Description.certificate_revoked;case e.pki.certificateError.certificate_expired:return l.Alert.Description.certificate_expired;case e.pki.certificateError.certificate_unknown:return l.Alert.Description.certificate_unknown;case e.pki.certificateError.unknown_ca:return l.Alert.Description.unknown_ca;default:return l.Alert.Description.bad_certificate}},Oe=function(J){switch(J){case!0:return!0;case l.Alert.Description.bad_certificate:return e.pki.certificateError.bad_certificate;case l.Alert.Description.unsupported_certificate:return e.pki.certificateError.unsupported_certificate;case l.Alert.Description.certificate_revoked:return e.pki.certificateError.certificate_revoked;case l.Alert.Description.certificate_expired:return e.pki.certificateError.certificate_expired;case l.Alert.Description.certificate_unknown:return e.pki.certificateError.certificate_unknown;case l.Alert.Description.unknown_ca:return e.pki.certificateError.unknown_ca;default:return e.pki.certificateError.bad_certificate}};l.verifyCertificateChain=function(J,c){try{var N={};for(var A in J.verifyOptions)N[A]=J.verifyOptions[A];N.verify=function(ne,ce,ie){var u=be(ne),P=J.verify(J,ne,ce,ie);if(P!==!0){if(typeof P=="object"&&!e.util.isArray(P)){var M=new Error("The application rejected the certificate.");throw M.send=!0,M.alert={level:l.Alert.Level.fatal,description:l.Alert.Description.bad_certificate},P.message&&(M.message=P.message),P.alert&&(M.alert.description=P.alert),M}P!==ne&&(P=Oe(P))}return P},e.pki.verifyCertificateChain(J.caStore,c,N)}catch(ne){var V=ne;(typeof V!="object"||e.util.isArray(V))&&(V={send:!0,alert:{level:l.Alert.Level.fatal,description:be(ne)}}),"send"in V||(V.send=!0),"alert"in V||(V.alert={level:l.Alert.Level.fatal,description:be(V.error)}),J.error(J,V)}return!J.fail},l.createSessionCache=function(J,c){var N=null;if(J&&J.getSession&&J.setSession&&J.order)N=J;else{N={},N.cache=J||{},N.capacity=Math.max(c||100,1),N.order=[];for(var A in J)N.order.length<=c?N.order.push(A):delete J[A];N.getSession=function(V){var ne=null,ce=null;if(V?ce=e.util.bytesToHex(V):N.order.length>0&&(ce=N.order[0]),ce!==null&&ce in N.cache){ne=N.cache[ce],delete N.cache[ce];for(var ie in N.order)if(N.order[ie]===ce){N.order.splice(ie,1);break}}return ne},N.setSession=function(V,ne){if(N.order.length===N.capacity){var ce=N.order.shift();delete N.cache[ce]}var ce=e.util.bytesToHex(V);N.order.push(ce),N.cache[ce]=ne}}return N},l.createConnection=function(J){var c=null;J.caStore?e.util.isArray(J.caStore)?c=e.pki.createCaStore(J.caStore):c=J.caStore:c=e.pki.createCaStore();var N=J.cipherSuites||null;if(N===null){N=[];for(var A in l.CipherSuites)N.push(l.CipherSuites[A])}var V=J.server?l.ConnectionEnd.server:l.ConnectionEnd.client,ne=J.sessionCache?l.createSessionCache(J.sessionCache):null,ce={version:{major:l.Version.major,minor:l.Version.minor},entity:V,sessionId:J.sessionId,caStore:c,sessionCache:ne,cipherSuites:N,connected:J.connected,virtualHost:J.virtualHost||null,verifyClient:J.verifyClient||!1,verify:J.verify||function(M,n,L,U){return n},verifyOptions:J.verifyOptions||{},getCertificate:J.getCertificate||null,getPrivateKey:J.getPrivateKey||null,getSignature:J.getSignature||null,input:e.util.createBuffer(),tlsData:e.util.createBuffer(),data:e.util.createBuffer(),tlsDataReady:J.tlsDataReady,dataReady:J.dataReady,heartbeatReceived:J.heartbeatReceived,closed:J.closed,error:function(M,n){n.origin=n.origin||(M.entity===l.ConnectionEnd.client?"client":"server"),n.send&&(l.queue(M,l.createAlert(M,n.alert)),l.flush(M));var L=n.fatal!==!1;L&&(M.fail=!0),J.error(M,n),L&&M.close(!1)},deflate:J.deflate||null,inflate:J.inflate||null};ce.reset=function(M){ce.version={major:l.Version.major,minor:l.Version.minor},ce.record=null,ce.session=null,ce.peerCertificate=null,ce.state={pending:null,current:null},ce.expect=ce.entity===l.ConnectionEnd.client?a:O,ce.fragmented=null,ce.records=[],ce.open=!1,ce.handshakes=0,ce.handshaking=!1,ce.isConnected=!1,ce.fail=!(M||typeof M>"u"),ce.input.clear(),ce.tlsData.clear(),ce.data.clear(),ce.state.current=l.createConnectionState(ce)},ce.reset();var ie=function(M,n){var L=n.type-l.ContentType.change_cipher_spec,U=Q[M.entity][M.expect];L in U?U[L](M,n):l.handleUnexpected(M,n)},u=function(M){var n=0,L=M.input,U=L.length();if(U<5)n=5-U;else{M.record={type:L.getByte(),version:{major:L.getByte(),minor:L.getByte()},length:L.getInt16(),fragment:e.util.createBuffer(),ready:!1};var X=M.record.version.major===M.version.major;X&&M.session&&M.session.version&&(X=M.record.version.minor===M.version.minor),X||M.error(M,{message:"Incompatible TLS version.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.protocol_version}})}return n},P=function(M){var n=0,L=M.input,U=L.length();if(U<M.record.length)n=M.record.length-U;else{M.record.fragment.putBytes(L.getBytes(M.record.length)),L.compact();var X=M.state.current.read;X.update(M,M.record)&&(M.fragmented!==null&&(M.fragmented.type===M.record.type?(M.fragmented.fragment.putBuffer(M.record.fragment),M.record=M.fragmented):M.error(M,{message:"Invalid fragmented record.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.unexpected_message}})),M.record.ready=!0)}return n};return ce.handshake=function(M){if(ce.entity!==l.ConnectionEnd.client)ce.error(ce,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(ce.handshaking)ce.error(ce,{message:"Handshake already in progress.",fatal:!1});else{ce.fail&&!ce.open&&ce.handshakes===0&&(ce.fail=!1),ce.handshaking=!0,M=M||"";var n=null;M.length>0&&(ce.sessionCache&&(n=ce.sessionCache.getSession(M)),n===null&&(M="")),M.length===0&&ce.sessionCache&&(n=ce.sessionCache.getSession(),n!==null&&(M=n.id)),ce.session={id:M,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:e.md.md5.create(),sha1:e.md.sha1.create()},n&&(ce.version=n.version,ce.session.sp=n.sp),ce.session.sp.client_random=l.createRandom().getBytes(),ce.open=!0,l.queue(ce,l.createRecord(ce,{type:l.ContentType.handshake,data:l.createClientHello(ce)})),l.flush(ce)}},ce.process=function(M){var n=0;return M&&ce.input.putBytes(M),ce.fail||(ce.record!==null&&ce.record.ready&&ce.record.fragment.isEmpty()&&(ce.record=null),ce.record===null&&(n=u(ce)),!ce.fail&&ce.record!==null&&!ce.record.ready&&(n=P(ce)),!ce.fail&&ce.record!==null&&ce.record.ready&&ie(ce,ce.record)),n},ce.prepare=function(M){return l.queue(ce,l.createRecord(ce,{type:l.ContentType.application_data,data:e.util.createBuffer(M)})),l.flush(ce)},ce.prepareHeartbeatRequest=function(M,n){return M instanceof e.util.ByteBuffer&&(M=M.bytes()),typeof n>"u"&&(n=M.length),ce.expectedHeartbeatPayload=M,l.queue(ce,l.createRecord(ce,{type:l.ContentType.heartbeat,data:l.createHeartbeat(l.HeartbeatMessageType.heartbeat_request,M,n)})),l.flush(ce)},ce.close=function(M){if(!ce.fail&&ce.sessionCache&&ce.session){var n={id:ce.session.id,version:ce.session.version,sp:ce.session.sp};n.sp.keys=null,ce.sessionCache.setSession(n.id,n)}ce.open&&(ce.open=!1,ce.input.clear(),(ce.isConnected||ce.handshaking)&&(ce.isConnected=ce.handshaking=!1,l.queue(ce,l.createAlert(ce,{level:l.Alert.Level.warning,description:l.Alert.Description.close_notify})),l.flush(ce)),ce.closed(ce)),ce.reset(M)},ce},tls_1=e.tls=e.tls||{};for(var ge in l)typeof l[ge]!="function"&&(e.tls[ge]=l[ge]);return e.tls.prf_tls1=t,e.tls.hmac_sha1=s,e.tls.createSessionCache=l.createSessionCache,e.tls.createConnection=l.createConnection,tls_1}var hasRequiredAesCipherSuites;function requireAesCipherSuites(){if(hasRequiredAesCipherSuites)return aesCipherSuites.exports;hasRequiredAesCipherSuites=1;var e=requireForge();requireAes(),requireTls();var t=aesCipherSuites.exports=e.tls;t.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(a){a.bulk_cipher_algorithm=t.BulkCipherAlgorithm.aes,a.cipher_type=t.CipherType.block,a.enc_key_length=16,a.block_length=16,a.fixed_iv_length=16,a.record_iv_length=16,a.mac_algorithm=t.MACAlgorithm.hmac_sha1,a.mac_length=20,a.mac_key_length=20},initConnectionState:s},t.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(a){a.bulk_cipher_algorithm=t.BulkCipherAlgorithm.aes,a.cipher_type=t.CipherType.block,a.enc_key_length=32,a.block_length=16,a.fixed_iv_length=16,a.record_iv_length=16,a.mac_algorithm=t.MACAlgorithm.hmac_sha1,a.mac_length=20,a.mac_key_length=20},initConnectionState:s};function s(a,o,h){var v=o.entity===e.tls.ConnectionEnd.client;a.read.cipherState={init:!1,cipher:e.cipher.createDecipher("AES-CBC",v?h.keys.server_write_key:h.keys.client_write_key),iv:v?h.keys.server_write_IV:h.keys.client_write_IV},a.write.cipherState={init:!1,cipher:e.cipher.createCipher("AES-CBC",v?h.keys.client_write_key:h.keys.server_write_key),iv:v?h.keys.client_write_IV:h.keys.server_write_IV},a.read.cipherFunction=d,a.write.cipherFunction=p,a.read.macLength=a.write.macLength=h.mac_length,a.read.macFunction=a.write.macFunction=t.hmac_sha1}function p(a,o){var h=!1,v=o.macFunction(o.macKey,o.sequenceNumber,a);a.fragment.putBytes(v),o.updateSequenceNumber();var _;a.version.minor===t.Versions.TLS_1_0.minor?_=o.cipherState.init?null:o.cipherState.iv:_=e.random.getBytesSync(16),o.cipherState.init=!0;var y=o.cipherState.cipher;return y.start({iv:_}),a.version.minor>=t.Versions.TLS_1_1.minor&&y.output.putBytes(_),y.update(a.fragment),y.finish(g)&&(a.fragment=y.output,a.length=a.fragment.length(),h=!0),h}function g(a,o,h){if(!h){var v=a-o.length()%a;o.fillWithByte(v-1,v)}return!0}function m(a,o,h){var v=!0;if(h){for(var _=o.length(),y=o.last(),w=_-1-y;w<_-1;++w)v=v&&o.at(w)==y;v&&o.truncate(y+1)}return v}function d(a,o){var h=!1,v;a.version.minor===t.Versions.TLS_1_0.minor?v=o.cipherState.init?null:o.cipherState.iv:v=a.fragment.getBytes(16),o.cipherState.init=!0;var _=o.cipherState.cipher;_.start({iv:v}),_.update(a.fragment),h=_.finish(m);var y=o.macLength,w=e.random.getBytesSync(y),T=_.output.length();T>=y?(a.fragment=_.output.getBytes(T-y),w=_.output.getBytes(y)):a.fragment=_.output.getBytes(),a.fragment=e.util.createBuffer(a.fragment),a.length=a.fragment.length();var I=o.macFunction(o.macKey,o.sequenceNumber,a);return o.updateSequenceNumber(),h=l(o.macKey,w,I)&&h,h}function l(a,o,h){var v=e.hmac.create();return v.start("SHA1",a),v.update(o),o=v.digest().getBytes(),v.start(null,null),v.update(h),h=v.digest().getBytes(),o===h}return aesCipherSuites.exports}var sha512={exports:{}},hasRequiredSha512;function requireSha512(){if(hasRequiredSha512)return sha512.exports;hasRequiredSha512=1;var e=requireForge();requireMd(),requireUtil$7();var t=sha512.exports=e.sha512=e.sha512||{};e.md.sha512=e.md.algorithms.sha512=t;var s=e.sha384=e.sha512.sha384=e.sha512.sha384||{};s.create=function(){return t.create("SHA-384")},e.md.sha384=e.md.algorithms.sha384=s,e.sha512.sha256=e.sha512.sha256||{create:function(){return t.create("SHA-512/256")}},e.md["sha512/256"]=e.md.algorithms["sha512/256"]=e.sha512.sha256,e.sha512.sha224=e.sha512.sha224||{create:function(){return t.create("SHA-512/224")}},e.md["sha512/224"]=e.md.algorithms["sha512/224"]=e.sha512.sha224,t.create=function(o){if(g||l(),typeof o>"u"&&(o="SHA-512"),!(o in d))throw new Error("Invalid SHA-512 algorithm: "+o);for(var h=d[o],v=null,_=e.util.createBuffer(),y=new Array(80),w=0;w<80;++w)y[w]=new Array(2);var T=64;switch(o){case"SHA-384":T=48;break;case"SHA-512/256":T=32;break;case"SHA-512/224":T=28;break}var I={algorithm:o.replace("-","").toLowerCase(),blockLength:128,digestLength:T,messageLength:0,fullMessageLength:null,messageLengthSize:16};return I.start=function(){I.messageLength=0,I.fullMessageLength=I.messageLength128=[];for(var O=I.messageLengthSize/4,E=0;E<O;++E)I.fullMessageLength.push(0);_=e.util.createBuffer(),v=new Array(h.length);for(var E=0;E<h.length;++E)v[E]=h[E].slice(0);return I},I.start(),I.update=function(O,E){E==="utf8"&&(O=e.util.encodeUtf8(O));var C=O.length;I.messageLength+=C,C=[C/4294967296>>>0,C>>>0];for(var x=I.fullMessageLength.length-1;x>=0;--x)I.fullMessageLength[x]+=C[1],C[1]=C[0]+(I.fullMessageLength[x]/4294967296>>>0),I.fullMessageLength[x]=I.fullMessageLength[x]>>>0,C[0]=C[1]/4294967296>>>0;return _.putBytes(O),a(v,y,_),(_.read>2048||_.length()===0)&&_.compact(),I},I.digest=function(){var O=e.util.createBuffer();O.putBytes(_.bytes());var E=I.fullMessageLength[I.fullMessageLength.length-1]+I.messageLengthSize,C=E&I.blockLength-1;O.putBytes(p.substr(0,I.blockLength-C));for(var x,j,D=I.fullMessageLength[0]*8,k=0;k<I.fullMessageLength.length-1;++k)x=I.fullMessageLength[k+1]*8,j=x/4294967296>>>0,D+=j,O.putInt32(D>>>0),D=x>>>0;O.putInt32(D);for(var q=new Array(v.length),k=0;k<v.length;++k)q[k]=v[k].slice(0);a(q,y,O);var G=e.util.createBuffer(),$;o==="SHA-512"?$=q.length:o==="SHA-384"?$=q.length-2:$=q.length-4;for(var k=0;k<$;++k)G.putInt32(q[k][0]),(k!==$-1||o!=="SHA-512/224")&&G.putInt32(q[k][1]);return G},I};var p=null,g=!1,m=null,d=null;function l(){p="",p+=e.util.fillString("\0",128),m=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],d={},d["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],d["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],d["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],d["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],g=!0}function a(o,h,v){for(var _,y,w,T,I,O,E,C,x,j,D,k,q,G,$,W,K,z,Q,Y,te,ae,ue,ee,oe,de,he,Ee,fe,Se,be,Oe,ge,J,c,N=v.length();N>=128;){for(fe=0;fe<16;++fe)h[fe][0]=v.getInt32()>>>0,h[fe][1]=v.getInt32()>>>0;for(;fe<80;++fe)Oe=h[fe-2],Se=Oe[0],be=Oe[1],_=((Se>>>19|be<<13)^(be>>>29|Se<<3)^Se>>>6)>>>0,y=((Se<<13|be>>>19)^(be<<3|Se>>>29)^(Se<<26|be>>>6))>>>0,J=h[fe-15],Se=J[0],be=J[1],w=((Se>>>1|be<<31)^(Se>>>8|be<<24)^Se>>>7)>>>0,T=((Se<<31|be>>>1)^(Se<<24|be>>>8)^(Se<<25|be>>>7))>>>0,ge=h[fe-7],c=h[fe-16],be=y+ge[1]+T+c[1],h[fe][0]=_+ge[0]+w+c[0]+(be/4294967296>>>0)>>>0,h[fe][1]=be>>>0;for(q=o[0][0],G=o[0][1],$=o[1][0],W=o[1][1],K=o[2][0],z=o[2][1],Q=o[3][0],Y=o[3][1],te=o[4][0],ae=o[4][1],ue=o[5][0],ee=o[5][1],oe=o[6][0],de=o[6][1],he=o[7][0],Ee=o[7][1],fe=0;fe<80;++fe)E=((te>>>14|ae<<18)^(te>>>18|ae<<14)^(ae>>>9|te<<23))>>>0,C=((te<<18|ae>>>14)^(te<<14|ae>>>18)^(ae<<23|te>>>9))>>>0,x=(oe^te&(ue^oe))>>>0,j=(de^ae&(ee^de))>>>0,I=((q>>>28|G<<4)^(G>>>2|q<<30)^(G>>>7|q<<25))>>>0,O=((q<<4|G>>>28)^(G<<30|q>>>2)^(G<<25|q>>>7))>>>0,D=(q&$|K&(q^$))>>>0,k=(G&W|z&(G^W))>>>0,be=Ee+C+j+m[fe][1]+h[fe][1],_=he+E+x+m[fe][0]+h[fe][0]+(be/4294967296>>>0)>>>0,y=be>>>0,be=O+k,w=I+D+(be/4294967296>>>0)>>>0,T=be>>>0,he=oe,Ee=de,oe=ue,de=ee,ue=te,ee=ae,be=Y+y,te=Q+_+(be/4294967296>>>0)>>>0,ae=be>>>0,Q=K,Y=z,K=$,z=W,$=q,W=G,be=y+T,q=_+w+(be/4294967296>>>0)>>>0,G=be>>>0;be=o[0][1]+G,o[0][0]=o[0][0]+q+(be/4294967296>>>0)>>>0,o[0][1]=be>>>0,be=o[1][1]+W,o[1][0]=o[1][0]+$+(be/4294967296>>>0)>>>0,o[1][1]=be>>>0,be=o[2][1]+z,o[2][0]=o[2][0]+K+(be/4294967296>>>0)>>>0,o[2][1]=be>>>0,be=o[3][1]+Y,o[3][0]=o[3][0]+Q+(be/4294967296>>>0)>>>0,o[3][1]=be>>>0,be=o[4][1]+ae,o[4][0]=o[4][0]+te+(be/4294967296>>>0)>>>0,o[4][1]=be>>>0,be=o[5][1]+ee,o[5][0]=o[5][0]+ue+(be/4294967296>>>0)>>>0,o[5][1]=be>>>0,be=o[6][1]+de,o[6][0]=o[6][0]+oe+(be/4294967296>>>0)>>>0,o[6][1]=be>>>0,be=o[7][1]+Ee,o[7][0]=o[7][0]+he+(be/4294967296>>>0)>>>0,o[7][1]=be>>>0,N-=128}}return sha512.exports}var asn1Validator={},hasRequiredAsn1Validator;function requireAsn1Validator(){if(hasRequiredAsn1Validator)return asn1Validator;hasRequiredAsn1Validator=1;var e=requireForge();requireAsn1();var t=e.asn1;return asn1Validator.privateKeyValidator={name:"PrivateKeyInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},asn1Validator.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]},asn1Validator}var ed25519_1,hasRequiredEd25519;function requireEd25519(){if(hasRequiredEd25519)return ed25519_1;hasRequiredEd25519=1;var e=requireForge();requireJsbn(),requireRandom(),requireSha512(),requireUtil$7();var t=requireAsn1Validator(),s=t.publicKeyValidator,p=t.privateKeyValidator;if(typeof g>"u")var g=e.jsbn.BigInteger;var m=e.util.ByteBuffer,d=typeof Buffer>"u"?Uint8Array:Buffer;e.pki=e.pki||{},ed25519_1=e.pki.ed25519=e.ed25519=e.ed25519||{};var l=e.ed25519;l.constants={},l.constants.PUBLIC_KEY_BYTE_LENGTH=32,l.constants.PRIVATE_KEY_BYTE_LENGTH=64,l.constants.SEED_BYTE_LENGTH=32,l.constants.SIGN_BYTE_LENGTH=64,l.constants.HASH_BYTE_LENGTH=64,l.generateKeyPair=function(J){J=J||{};var c=J.seed;if(c===void 0)c=e.random.getBytesSync(l.constants.SEED_BYTE_LENGTH);else if(typeof c=="string"){if(c.length!==l.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+l.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(c instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');c=a({message:c,encoding:"binary"});for(var N=new d(l.constants.PUBLIC_KEY_BYTE_LENGTH),A=new d(l.constants.PRIVATE_KEY_BYTE_LENGTH),V=0;V<32;++V)A[V]=c[V];return E(N,A),{publicKey:N,privateKey:A}},l.privateKeyFromAsn1=function(J){var c={},N=[],A=e.asn1.validate(J,p,c,N);if(!A){var V=new Error("Invalid Key.");throw V.errors=N,V}var ne=e.asn1.derToOid(c.privateKeyOid),ce=e.oids.EdDSA25519;if(ne!==ce)throw new Error('Invalid OID "'+ne+'"; OID must be "'+ce+'".');var ie=c.privateKey,u=a({message:e.asn1.fromDer(ie).value,encoding:"binary"});return{privateKeyBytes:u}},l.publicKeyFromAsn1=function(J){var c={},N=[],A=e.asn1.validate(J,s,c,N);if(!A){var V=new Error("Invalid Key.");throw V.errors=N,V}var ne=e.asn1.derToOid(c.publicKeyOid),ce=e.oids.EdDSA25519;if(ne!==ce)throw new Error('Invalid OID "'+ne+'"; OID must be "'+ce+'".');var ie=c.ed25519PublicKey;if(ie.length!==l.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return a({message:ie,encoding:"binary"})},l.publicKeyFromPrivateKey=function(J){J=J||{};var c=a({message:J.privateKey,encoding:"binary"});if(c.length!==l.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+l.constants.PRIVATE_KEY_BYTE_LENGTH);for(var N=new d(l.constants.PUBLIC_KEY_BYTE_LENGTH),A=0;A<N.length;++A)N[A]=c[32+A];return N},l.sign=function(J){J=J||{};var c=a(J),N=a({message:J.privateKey,encoding:"binary"});if(N.length===l.constants.SEED_BYTE_LENGTH){var A=l.generateKeyPair({seed:N});N=A.privateKey}else if(N.length!==l.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+l.constants.SEED_BYTE_LENGTH+" or "+l.constants.PRIVATE_KEY_BYTE_LENGTH);var V=new d(l.constants.SIGN_BYTE_LENGTH+c.length);C(V,c,c.length,N);for(var ne=new d(l.constants.SIGN_BYTE_LENGTH),ce=0;ce<ne.length;++ce)ne[ce]=V[ce];return ne},l.verify=function(J){J=J||{};var c=a(J);if(J.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var N=a({message:J.signature,encoding:"binary"});if(N.length!==l.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+l.constants.SIGN_BYTE_LENGTH);var A=a({message:J.publicKey,encoding:"binary"});if(A.length!==l.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+l.constants.PUBLIC_KEY_BYTE_LENGTH);var V=new d(l.constants.SIGN_BYTE_LENGTH+c.length),ne=new d(l.constants.SIGN_BYTE_LENGTH+c.length),ce;for(ce=0;ce<l.constants.SIGN_BYTE_LENGTH;++ce)V[ce]=N[ce];for(ce=0;ce<c.length;++ce)V[ce+l.constants.SIGN_BYTE_LENGTH]=c[ce];return x(ne,V,V.length,A)>=0};function a(J){var c=J.message;if(c instanceof Uint8Array||c instanceof d)return c;var N=J.encoding;if(c===void 0)if(J.md)c=J.md.digest().getBytes(),N="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof c=="string"&&!N)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof c=="string"){if(typeof Buffer<"u")return Buffer.from(c,N);c=new m(c,N)}else if(!(c instanceof m))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var A=new d(c.length()),V=0;V<A.length;++V)A[V]=c.at(V);return A}var o=fe(),h=fe([1]),v=fe([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),_=fe([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),y=fe([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),w=fe([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),T=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),I=fe([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function O(J,c){var N=e.md.sha512.create(),A=new m(J);N.update(A.getBytes(c),"binary");var V=N.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(V,"binary");for(var ne=new d(l.constants.HASH_BYTE_LENGTH),ce=0;ce<64;++ce)ne[ce]=V.charCodeAt(ce);return ne}function E(J,c){var N=[fe(),fe(),fe(),fe()],A,V=O(c,32);for(V[0]&=248,V[31]&=127,V[31]|=64,ee(N,V),G(J,N),A=0;A<32;++A)c[A+32]=J[A];return 0}function C(J,c,N,A){var V,ne,ce=new Float64Array(64),ie=[fe(),fe(),fe(),fe()],u=O(A,32);u[0]&=248,u[31]&=127,u[31]|=64;var P=N+64;for(V=0;V<N;++V)J[64+V]=c[V];for(V=0;V<32;++V)J[32+V]=u[32+V];var M=O(J.subarray(32),N+32);for(D(M),ee(ie,M),G(J,ie),V=32;V<64;++V)J[V]=A[V];var n=O(J,N+64);for(D(n),V=32;V<64;++V)ce[V]=0;for(V=0;V<32;++V)ce[V]=M[V];for(V=0;V<32;++V)for(ne=0;ne<32;ne++)ce[V+ne]+=n[V]*u[ne];return j(J.subarray(32),ce),P}function x(J,c,N,A){var V,ne,ce=new d(32),ie=[fe(),fe(),fe(),fe()],u=[fe(),fe(),fe(),fe()];if(ne=-1,N<64||W(u,A))return-1;for(V=0;V<N;++V)J[V]=c[V];for(V=0;V<32;++V)J[V+32]=A[V];var P=O(J,N);if(D(P),ue(ie,u,P),ee(u,c.subarray(32)),k(ie,u),G(ce,ie),N-=64,Y(c,0,ce,0)){for(V=0;V<N;++V)J[V]=0;return-1}for(V=0;V<N;++V)J[V]=c[V+64];return ne=N,ne}function j(J,c){var N,A,V,ne;for(A=63;A>=32;--A){for(N=0,V=A-32,ne=A-12;V<ne;++V)c[V]+=N-16*c[A]*T[V-(A-32)],N=c[V]+128>>8,c[V]-=N*256;c[V]+=N,c[A]=0}for(N=0,V=0;V<32;++V)c[V]+=N-(c[31]>>4)*T[V],N=c[V]>>8,c[V]&=255;for(V=0;V<32;++V)c[V]-=N*T[V];for(A=0;A<32;++A)c[A+1]+=c[A]>>8,J[A]=c[A]&255}function D(J){for(var c=new Float64Array(64),N=0;N<64;++N)c[N]=J[N],J[N]=0;j(J,c)}function k(J,c){var N=fe(),A=fe(),V=fe(),ne=fe(),ce=fe(),ie=fe(),u=fe(),P=fe(),M=fe();be(N,J[1],J[0]),be(M,c[1],c[0]),ge(N,N,M),Se(A,J[0],J[1]),Se(M,c[0],c[1]),ge(A,A,M),ge(V,J[3],c[3]),ge(V,V,_),ge(ne,J[2],c[2]),Se(ne,ne,ne),be(ce,A,N),be(ie,ne,V),Se(u,ne,V),Se(P,A,N),ge(J[0],ce,ie),ge(J[1],P,u),ge(J[2],u,ie),ge(J[3],ce,P)}function q(J,c,N){for(var A=0;A<4;++A)Ee(J[A],c[A],N)}function G(J,c){var N=fe(),A=fe(),V=fe();de(V,c[2]),ge(N,c[0],V),ge(A,c[1],V),$(J,A),J[31]^=ae(N)<<7}function $(J,c){var N,A,V,ne=fe(),ce=fe();for(N=0;N<16;++N)ce[N]=c[N];for(he(ce),he(ce),he(ce),A=0;A<2;++A){for(ne[0]=ce[0]-65517,N=1;N<15;++N)ne[N]=ce[N]-65535-(ne[N-1]>>16&1),ne[N-1]&=65535;ne[15]=ce[15]-32767-(ne[14]>>16&1),V=ne[15]>>16&1,ne[14]&=65535,Ee(ce,ne,1-V)}for(N=0;N<16;N++)J[2*N]=ce[N]&255,J[2*N+1]=ce[N]>>8}function W(J,c){var N=fe(),A=fe(),V=fe(),ne=fe(),ce=fe(),ie=fe(),u=fe();return oe(J[2],h),K(J[1],c),Oe(V,J[1]),ge(ne,V,v),be(V,V,J[2]),Se(ne,J[2],ne),Oe(ce,ne),Oe(ie,ce),ge(u,ie,ce),ge(N,u,V),ge(N,N,ne),z(N,N),ge(N,N,V),ge(N,N,ne),ge(N,N,ne),ge(J[0],N,ne),Oe(A,J[0]),ge(A,A,ne),Q(A,V)&&ge(J[0],J[0],I),Oe(A,J[0]),ge(A,A,ne),Q(A,V)?-1:(ae(J[0])===c[31]>>7&&be(J[0],o,J[0]),ge(J[3],J[0],J[1]),0)}function K(J,c){var N;for(N=0;N<16;++N)J[N]=c[2*N]+(c[2*N+1]<<8);J[15]&=32767}function z(J,c){var N=fe(),A;for(A=0;A<16;++A)N[A]=c[A];for(A=250;A>=0;--A)Oe(N,N),A!==1&&ge(N,N,c);for(A=0;A<16;++A)J[A]=N[A]}function Q(J,c){var N=new d(32),A=new d(32);return $(N,J),$(A,c),Y(N,0,A,0)}function Y(J,c,N,A){return te(J,c,N,A,32)}function te(J,c,N,A,V){var ne,ce=0;for(ne=0;ne<V;++ne)ce|=J[c+ne]^N[A+ne];return(1&ce-1>>>8)-1}function ae(J){var c=new d(32);return $(c,J),c[0]&1}function ue(J,c,N){var A,V;for(oe(J[0],o),oe(J[1],h),oe(J[2],h),oe(J[3],o),V=255;V>=0;--V)A=N[V/8|0]>>(V&7)&1,q(J,c,A),k(c,J),k(J,J),q(J,c,A)}function ee(J,c){var N=[fe(),fe(),fe(),fe()];oe(N[0],y),oe(N[1],w),oe(N[2],h),ge(N[3],y,w),ue(J,N,c)}function oe(J,c){var N;for(N=0;N<16;N++)J[N]=c[N]|0}function de(J,c){var N=fe(),A;for(A=0;A<16;++A)N[A]=c[A];for(A=253;A>=0;--A)Oe(N,N),A!==2&&A!==4&&ge(N,N,c);for(A=0;A<16;++A)J[A]=N[A]}function he(J){var c,N,A=1;for(c=0;c<16;++c)N=J[c]+A+65535,A=Math.floor(N/65536),J[c]=N-A*65536;J[0]+=A-1+37*(A-1)}function Ee(J,c,N){for(var A,V=~(N-1),ne=0;ne<16;++ne)A=V&(J[ne]^c[ne]),J[ne]^=A,c[ne]^=A}function fe(J){var c,N=new Float64Array(16);if(J)for(c=0;c<J.length;++c)N[c]=J[c];return N}function Se(J,c,N){for(var A=0;A<16;++A)J[A]=c[A]+N[A]}function be(J,c,N){for(var A=0;A<16;++A)J[A]=c[A]-N[A]}function Oe(J,c){ge(J,c,c)}function ge(J,c,N){var A,V,ne=0,ce=0,ie=0,u=0,P=0,M=0,n=0,L=0,U=0,X=0,me=0,Ie=0,Le=0,ke=0,ze=0,nt=0,bt=0,dt=0,Et=0,lt=0,Be=0,Me=0,Ve=0,Je=0,Qe=0,st=0,gt=0,St=0,mt=0,zt=0,Yt=0,Tt=N[0],qt=N[1],Ut=N[2],Rt=N[3],Ft=N[4],Nt=N[5],yt=N[6],Mt=N[7],jt=N[8],Ot=N[9],vt=N[10],wt=N[11],Lt=N[12],Pe=N[13],Ce=N[14],Ne=N[15];A=c[0],ne+=A*Tt,ce+=A*qt,ie+=A*Ut,u+=A*Rt,P+=A*Ft,M+=A*Nt,n+=A*yt,L+=A*Mt,U+=A*jt,X+=A*Ot,me+=A*vt,Ie+=A*wt,Le+=A*Lt,ke+=A*Pe,ze+=A*Ce,nt+=A*Ne,A=c[1],ce+=A*Tt,ie+=A*qt,u+=A*Ut,P+=A*Rt,M+=A*Ft,n+=A*Nt,L+=A*yt,U+=A*Mt,X+=A*jt,me+=A*Ot,Ie+=A*vt,Le+=A*wt,ke+=A*Lt,ze+=A*Pe,nt+=A*Ce,bt+=A*Ne,A=c[2],ie+=A*Tt,u+=A*qt,P+=A*Ut,M+=A*Rt,n+=A*Ft,L+=A*Nt,U+=A*yt,X+=A*Mt,me+=A*jt,Ie+=A*Ot,Le+=A*vt,ke+=A*wt,ze+=A*Lt,nt+=A*Pe,bt+=A*Ce,dt+=A*Ne,A=c[3],u+=A*Tt,P+=A*qt,M+=A*Ut,n+=A*Rt,L+=A*Ft,U+=A*Nt,X+=A*yt,me+=A*Mt,Ie+=A*jt,Le+=A*Ot,ke+=A*vt,ze+=A*wt,nt+=A*Lt,bt+=A*Pe,dt+=A*Ce,Et+=A*Ne,A=c[4],P+=A*Tt,M+=A*qt,n+=A*Ut,L+=A*Rt,U+=A*Ft,X+=A*Nt,me+=A*yt,Ie+=A*Mt,Le+=A*jt,ke+=A*Ot,ze+=A*vt,nt+=A*wt,bt+=A*Lt,dt+=A*Pe,Et+=A*Ce,lt+=A*Ne,A=c[5],M+=A*Tt,n+=A*qt,L+=A*Ut,U+=A*Rt,X+=A*Ft,me+=A*Nt,Ie+=A*yt,Le+=A*Mt,ke+=A*jt,ze+=A*Ot,nt+=A*vt,bt+=A*wt,dt+=A*Lt,Et+=A*Pe,lt+=A*Ce,Be+=A*Ne,A=c[6],n+=A*Tt,L+=A*qt,U+=A*Ut,X+=A*Rt,me+=A*Ft,Ie+=A*Nt,Le+=A*yt,ke+=A*Mt,ze+=A*jt,nt+=A*Ot,bt+=A*vt,dt+=A*wt,Et+=A*Lt,lt+=A*Pe,Be+=A*Ce,Me+=A*Ne,A=c[7],L+=A*Tt,U+=A*qt,X+=A*Ut,me+=A*Rt,Ie+=A*Ft,Le+=A*Nt,ke+=A*yt,ze+=A*Mt,nt+=A*jt,bt+=A*Ot,dt+=A*vt,Et+=A*wt,lt+=A*Lt,Be+=A*Pe,Me+=A*Ce,Ve+=A*Ne,A=c[8],U+=A*Tt,X+=A*qt,me+=A*Ut,Ie+=A*Rt,Le+=A*Ft,ke+=A*Nt,ze+=A*yt,nt+=A*Mt,bt+=A*jt,dt+=A*Ot,Et+=A*vt,lt+=A*wt,Be+=A*Lt,Me+=A*Pe,Ve+=A*Ce,Je+=A*Ne,A=c[9],X+=A*Tt,me+=A*qt,Ie+=A*Ut,Le+=A*Rt,ke+=A*Ft,ze+=A*Nt,nt+=A*yt,bt+=A*Mt,dt+=A*jt,Et+=A*Ot,lt+=A*vt,Be+=A*wt,Me+=A*Lt,Ve+=A*Pe,Je+=A*Ce,Qe+=A*Ne,A=c[10],me+=A*Tt,Ie+=A*qt,Le+=A*Ut,ke+=A*Rt,ze+=A*Ft,nt+=A*Nt,bt+=A*yt,dt+=A*Mt,Et+=A*jt,lt+=A*Ot,Be+=A*vt,Me+=A*wt,Ve+=A*Lt,Je+=A*Pe,Qe+=A*Ce,st+=A*Ne,A=c[11],Ie+=A*Tt,Le+=A*qt,ke+=A*Ut,ze+=A*Rt,nt+=A*Ft,bt+=A*Nt,dt+=A*yt,Et+=A*Mt,lt+=A*jt,Be+=A*Ot,Me+=A*vt,Ve+=A*wt,Je+=A*Lt,Qe+=A*Pe,st+=A*Ce,gt+=A*Ne,A=c[12],Le+=A*Tt,ke+=A*qt,ze+=A*Ut,nt+=A*Rt,bt+=A*Ft,dt+=A*Nt,Et+=A*yt,lt+=A*Mt,Be+=A*jt,Me+=A*Ot,Ve+=A*vt,Je+=A*wt,Qe+=A*Lt,st+=A*Pe,gt+=A*Ce,St+=A*Ne,A=c[13],ke+=A*Tt,ze+=A*qt,nt+=A*Ut,bt+=A*Rt,dt+=A*Ft,Et+=A*Nt,lt+=A*yt,Be+=A*Mt,Me+=A*jt,Ve+=A*Ot,Je+=A*vt,Qe+=A*wt,st+=A*Lt,gt+=A*Pe,St+=A*Ce,mt+=A*Ne,A=c[14],ze+=A*Tt,nt+=A*qt,bt+=A*Ut,dt+=A*Rt,Et+=A*Ft,lt+=A*Nt,Be+=A*yt,Me+=A*Mt,Ve+=A*jt,Je+=A*Ot,Qe+=A*vt,st+=A*wt,gt+=A*Lt,St+=A*Pe,mt+=A*Ce,zt+=A*Ne,A=c[15],nt+=A*Tt,bt+=A*qt,dt+=A*Ut,Et+=A*Rt,lt+=A*Ft,Be+=A*Nt,Me+=A*yt,Ve+=A*Mt,Je+=A*jt,Qe+=A*Ot,st+=A*vt,gt+=A*wt,St+=A*Lt,mt+=A*Pe,zt+=A*Ce,Yt+=A*Ne,ne+=38*bt,ce+=38*dt,ie+=38*Et,u+=38*lt,P+=38*Be,M+=38*Me,n+=38*Ve,L+=38*Je,U+=38*Qe,X+=38*st,me+=38*gt,Ie+=38*St,Le+=38*mt,ke+=38*zt,ze+=38*Yt,V=1,A=ne+V+65535,V=Math.floor(A/65536),ne=A-V*65536,A=ce+V+65535,V=Math.floor(A/65536),ce=A-V*65536,A=ie+V+65535,V=Math.floor(A/65536),ie=A-V*65536,A=u+V+65535,V=Math.floor(A/65536),u=A-V*65536,A=P+V+65535,V=Math.floor(A/65536),P=A-V*65536,A=M+V+65535,V=Math.floor(A/65536),M=A-V*65536,A=n+V+65535,V=Math.floor(A/65536),n=A-V*65536,A=L+V+65535,V=Math.floor(A/65536),L=A-V*65536,A=U+V+65535,V=Math.floor(A/65536),U=A-V*65536,A=X+V+65535,V=Math.floor(A/65536),X=A-V*65536,A=me+V+65535,V=Math.floor(A/65536),me=A-V*65536,A=Ie+V+65535,V=Math.floor(A/65536),Ie=A-V*65536,A=Le+V+65535,V=Math.floor(A/65536),Le=A-V*65536,A=ke+V+65535,V=Math.floor(A/65536),ke=A-V*65536,A=ze+V+65535,V=Math.floor(A/65536),ze=A-V*65536,A=nt+V+65535,V=Math.floor(A/65536),nt=A-V*65536,ne+=V-1+37*(V-1),V=1,A=ne+V+65535,V=Math.floor(A/65536),ne=A-V*65536,A=ce+V+65535,V=Math.floor(A/65536),ce=A-V*65536,A=ie+V+65535,V=Math.floor(A/65536),ie=A-V*65536,A=u+V+65535,V=Math.floor(A/65536),u=A-V*65536,A=P+V+65535,V=Math.floor(A/65536),P=A-V*65536,A=M+V+65535,V=Math.floor(A/65536),M=A-V*65536,A=n+V+65535,V=Math.floor(A/65536),n=A-V*65536,A=L+V+65535,V=Math.floor(A/65536),L=A-V*65536,A=U+V+65535,V=Math.floor(A/65536),U=A-V*65536,A=X+V+65535,V=Math.floor(A/65536),X=A-V*65536,A=me+V+65535,V=Math.floor(A/65536),me=A-V*65536,A=Ie+V+65535,V=Math.floor(A/65536),Ie=A-V*65536,A=Le+V+65535,V=Math.floor(A/65536),Le=A-V*65536,A=ke+V+65535,V=Math.floor(A/65536),ke=A-V*65536,A=ze+V+65535,V=Math.floor(A/65536),ze=A-V*65536,A=nt+V+65535,V=Math.floor(A/65536),nt=A-V*65536,ne+=V-1+37*(V-1),J[0]=ne,J[1]=ce,J[2]=ie,J[3]=u,J[4]=P,J[5]=M,J[6]=n,J[7]=L,J[8]=U,J[9]=X,J[10]=me,J[11]=Ie,J[12]=Le,J[13]=ke,J[14]=ze,J[15]=nt}return ed25519_1}var kem,hasRequiredKem;function requireKem(){if(hasRequiredKem)return kem;hasRequiredKem=1;var e=requireForge();requireUtil$7(),requireRandom(),requireJsbn(),kem=e.kem=e.kem||{};var t=e.jsbn.BigInteger;e.kem.rsa={},e.kem.rsa.create=function(p,g){g=g||{};var m=g.prng||e.random,d={};return d.encrypt=function(l,a){var o=Math.ceil(l.n.bitLength()/8),h;do h=new t(e.util.bytesToHex(m.getBytesSync(o)),16).mod(l.n);while(h.compareTo(t.ONE)<=0);h=e.util.hexToBytes(h.toString(16));var v=o-h.length;v>0&&(h=e.util.fillString("\0",v)+h);var _=l.encrypt(h,"NONE"),y=p.generate(h,a);return{encapsulation:_,key:y}},d.decrypt=function(l,a,o){var h=l.decrypt(a,"NONE");return p.generate(h,o)},d},e.kem.kdf1=function(p,g){s(this,p,0,g||p.digestLength)},e.kem.kdf2=function(p,g){s(this,p,1,g||p.digestLength)};function s(p,g,m,d){p.generate=function(l,a){for(var o=new e.util.ByteBuffer,h=Math.ceil(a/d)+m,v=new e.util.ByteBuffer,_=m;_<h;++_){v.putInt32(_),g.start(),g.update(l+v.getBytes());var y=g.digest();o.putBytes(y.getBytes(d))}return o.truncate(o.length()-a),o.getBytes()}}return kem}var log,hasRequiredLog;function requireLog(){if(hasRequiredLog)return log;hasRequiredLog=1;var e=requireForge();requireUtil$7(),log=e.log=e.log||{},e.log.levels=["none","error","warning","info","debug","verbose","max"];var t={},s=[],p=null;e.log.LEVEL_LOCKED=2,e.log.NO_LEVEL_CHECK=4,e.log.INTERPOLATE=8;for(var g=0;g<e.log.levels.length;++g){var m=e.log.levels[g];t[m]={index:g,name:m.toUpperCase()}}e.log.logMessage=function(_){for(var y=t[_.level].index,w=0;w<s.length;++w){var T=s[w];if(T.flags&e.log.NO_LEVEL_CHECK)T.f(_);else{var I=t[T.level].index;y<=I&&T.f(T,_)}}},e.log.prepareStandard=function(_){"standard"in _||(_.standard=t[_.level].name+" ["+_.category+"] "+_.message)},e.log.prepareFull=function(_){if(!("full"in _)){var y=[_.message];y=y.concat([]),_.full=e.util.format.apply(this,y)}},e.log.prepareStandardFull=function(_){"standardFull"in _||(e.log.prepareStandard(_),_.standardFull=_.standard)};for(var d=["error","warning","info","debug","verbose"],g=0;g<d.length;++g)(function(y){e.log[y]=function(w,T){var I=Array.prototype.slice.call(arguments).slice(2),O={timestamp:new Date,level:y,category:w,message:T,arguments:I};e.log.logMessage(O)}})(d[g]);if(e.log.makeLogger=function(_){var y={flags:0,f:_};return e.log.setLevel(y,"none"),y},e.log.setLevel=function(_,y){var w=!1;if(_&&!(_.flags&e.log.LEVEL_LOCKED))for(var T=0;T<e.log.levels.length;++T){var I=e.log.levels[T];if(y==I){_.level=y,w=!0;break}}return w},e.log.lock=function(_,y){typeof y>"u"||y?_.flags|=e.log.LEVEL_LOCKED:_.flags&=~e.log.LEVEL_LOCKED},e.log.addLogger=function(_){s.push(_)},typeof console<"u"&&"log"in console){var l;if(console.error&&console.warn&&console.info&&console.debug){var a={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},o=function(_,y){e.log.prepareStandard(y);var w=a[y.level],T=[y.standard];T=T.concat(y.arguments.slice()),w.apply(console,T)};l=e.log.makeLogger(o)}else{var o=function(y,w){e.log.prepareStandardFull(w),console.log(w.standardFull)};l=e.log.makeLogger(o)}e.log.setLevel(l,"debug"),e.log.addLogger(l),p=l}else console={log:function(){}};if(p!==null&&typeof window<"u"&&window.location){var h=new URL(window.location.href).searchParams;if(h.has("console.level")&&e.log.setLevel(p,h.get("console.level").slice(-1)[0]),h.has("console.lock")){var v=h.get("console.lock").slice(-1)[0];v=="true"&&e.log.lock(p)}}return e.log.consoleLogger=p,log}var md_all,hasRequiredMd_all;function requireMd_all(){return hasRequiredMd_all||(hasRequiredMd_all=1,md_all=requireMd(),requireMd5$2(),requireSha1$2(),requireSha256(),requireSha512()),md_all}var pkcs7={exports:{}},hasRequiredPkcs7;function requirePkcs7(){if(hasRequiredPkcs7)return pkcs7.exports;hasRequiredPkcs7=1;var e=requireForge();requireAes(),requireAsn1(),requireDes(),requireOids(),requirePem(),requirePkcs7asn1(),requireRandom(),requireUtil$7(),requireX509();var t=e.asn1,s=pkcs7.exports=e.pkcs7=e.pkcs7||{};s.messageFromPem=function(y){var w=e.pem.decode(y)[0];if(w.type!=="PKCS7"){var T=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw T.headerType=w.type,T}if(w.procType&&w.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var I=t.fromDer(w.body);return s.messageFromAsn1(I)},s.messageToPem=function(y,w){var T={type:"PKCS7",body:t.toDer(y.toAsn1()).getBytes()};return e.pem.encode(T,{maxline:w})},s.messageFromAsn1=function(y){var w={},T=[];if(!t.validate(y,s.asn1.contentInfoValidator,w,T)){var I=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw I.errors=T,I}var O=t.derToOid(w.contentType),E;switch(O){case e.pki.oids.envelopedData:E=s.createEnvelopedData();break;case e.pki.oids.encryptedData:E=s.createEncryptedData();break;case e.pki.oids.signedData:E=s.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+O+" is not (yet) supported.")}return E.fromAsn1(w.content.value[0]),E},s.createSignedData=function(){var y=null;return y={type:e.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(I){if(v(y,I,s.asn1.signedDataValidator),y.certificates=[],y.crls=[],y.digestAlgorithmIdentifiers=[],y.contentInfo=null,y.signerInfos=[],y.rawCapture.certificates)for(var O=y.rawCapture.certificates.value,E=0;E<O.length;++E)y.certificates.push(e.pki.certificateFromAsn1(O[E]))},toAsn1:function(){y.contentInfo||y.sign();for(var I=[],O=0;O<y.certificates.length;++O)I.push(e.pki.certificateToAsn1(y.certificates[O]));var E=[],C=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(y.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,y.digestAlgorithmIdentifiers),y.contentInfo])]);return I.length>0&&C.value[0].value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,I)),E.length>0&&C.value[0].value.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,E)),C.value[0].value.push(t.create(t.Class.UNIVERSAL,t.Type.SET,!0,y.signerInfos)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(y.type).getBytes()),C])},addSigner:function(I){var O=I.issuer,E=I.serialNumber;if(I.certificate){var C=I.certificate;typeof C=="string"&&(C=e.pki.certificateFromPem(C)),O=C.issuer.attributes,E=C.serialNumber}var x=I.key;if(!x)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof x=="string"&&(x=e.pki.privateKeyFromPem(x));var j=I.digestAlgorithm||e.pki.oids.sha1;switch(j){case e.pki.oids.sha1:case e.pki.oids.sha256:case e.pki.oids.sha384:case e.pki.oids.sha512:case e.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+j)}var D=I.authenticatedAttributes||[];if(D.length>0){for(var k=!1,q=!1,G=0;G<D.length;++G){var $=D[G];if(!k&&$.type===e.pki.oids.contentType){if(k=!0,q)break;continue}if(!q&&$.type===e.pki.oids.messageDigest){if(q=!0,k)break;continue}}if(!k||!q)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}y.signers.push({key:x,version:1,issuer:O,serialNumber:E,digestAlgorithm:j,signatureAlgorithm:e.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:D,unauthenticatedAttributes:[]})},sign:function(I){if(I=I||{},(typeof y.content!="object"||y.contentInfo===null)&&(y.contentInfo=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.pki.oids.data).getBytes())]),"content"in y)){var O;y.content instanceof e.util.ByteBuffer?O=y.content.bytes():typeof y.content=="string"&&(O=e.util.encodeUtf8(y.content)),I.detached?y.detachedContent=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,O):y.contentInfo.value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,O)]))}if(y.signers.length!==0){var E=w();T(E)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(I){typeof I=="string"&&(I=e.pki.certificateFromPem(I)),y.certificates.push(I)},addCertificateRevokationList:function(I){throw new Error("PKCS#7 CRL support not yet implemented.")}},y;function w(){for(var I={},O=0;O<y.signers.length;++O){var E=y.signers[O],C=E.digestAlgorithm;C in I||(I[C]=e.md[e.pki.oids[C]].create()),E.authenticatedAttributes.length===0?E.md=I[C]:E.md=e.md[e.pki.oids[C]].create()}y.digestAlgorithmIdentifiers=[];for(var C in I)y.digestAlgorithmIdentifiers.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(C).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]));return I}function T(I){var O;if(y.detachedContent?O=y.detachedContent:(O=y.contentInfo.value[1],O=O.value[0]),!O)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var E=t.derToOid(y.contentInfo.value[0].value),C=t.toDer(O);C.getByte(),t.getBerValueLength(C),C=C.getBytes();for(var x in I)I[x].start().update(C);for(var j=new Date,D=0;D<y.signers.length;++D){var k=y.signers[D];if(k.authenticatedAttributes.length===0){if(E!==e.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{k.authenticatedAttributesAsn1=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var q=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[]),G=0;G<k.authenticatedAttributes.length;++G){var $=k.authenticatedAttributes[G];$.type===e.pki.oids.messageDigest?$.value=I[k.digestAlgorithm].digest():$.type===e.pki.oids.signingTime&&($.value||($.value=j)),q.value.push(o($)),k.authenticatedAttributesAsn1.value.push(o($))}C=t.toDer(q).getBytes(),k.md.start().update(C)}k.signature=k.key.sign(k.md,"RSASSA-PKCS1-V1_5")}y.signerInfos=a(y.signers)}},s.createEncryptedData=function(){var y=null;return y={type:e.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:e.pki.oids["aes256-CBC"]},fromAsn1:function(w){v(y,w,s.asn1.encryptedDataValidator)},decrypt:function(w){w!==void 0&&(y.encryptedContent.key=w),_(y)}},y},s.createEnvelopedData=function(){var y=null;return y={type:e.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:e.pki.oids["aes256-CBC"]},fromAsn1:function(w){var T=v(y,w,s.asn1.envelopedDataValidator);y.recipients=m(T.recipientInfos.value)},toAsn1:function(){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(y.type).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(y.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,d(y.recipients)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,h(y.encryptedContent))])])])},findRecipient:function(w){for(var T=w.issuer.attributes,I=0;I<y.recipients.length;++I){var O=y.recipients[I],E=O.issuer;if(O.serialNumber===w.serialNumber&&E.length===T.length){for(var C=!0,x=0;x<T.length;++x)if(E[x].type!==T[x].type||E[x].value!==T[x].value){C=!1;break}if(C)return O}}return null},decrypt:function(w,T){if(y.encryptedContent.key===void 0&&w!==void 0&&T!==void 0)switch(w.encryptedContent.algorithm){case e.pki.oids.rsaEncryption:case e.pki.oids.desCBC:var I=T.decrypt(w.encryptedContent.content);y.encryptedContent.key=e.util.createBuffer(I);break;default:throw new Error("Unsupported asymmetric cipher, OID "+w.encryptedContent.algorithm)}_(y)},addRecipient:function(w){y.recipients.push({version:0,issuer:w.issuer.attributes,serialNumber:w.serialNumber,encryptedContent:{algorithm:e.pki.oids.rsaEncryption,key:w.publicKey}})},encrypt:function(w,T){if(y.encryptedContent.content===void 0){T=T||y.encryptedContent.algorithm,w=w||y.encryptedContent.key;var I,O,E;switch(T){case e.pki.oids["aes128-CBC"]:I=16,O=16,E=e.aes.createEncryptionCipher;break;case e.pki.oids["aes192-CBC"]:I=24,O=16,E=e.aes.createEncryptionCipher;break;case e.pki.oids["aes256-CBC"]:I=32,O=16,E=e.aes.createEncryptionCipher;break;case e.pki.oids["des-EDE3-CBC"]:I=24,O=8,E=e.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+T)}if(w===void 0)w=e.util.createBuffer(e.random.getBytes(I));else if(w.length()!=I)throw new Error("Symmetric key has wrong length; got "+w.length()+" bytes, expected "+I+".");y.encryptedContent.algorithm=T,y.encryptedContent.key=w,y.encryptedContent.parameter=e.util.createBuffer(e.random.getBytes(O));var C=E(w);if(C.start(y.encryptedContent.parameter.copy()),C.update(y.content),!C.finish())throw new Error("Symmetric encryption failed.");y.encryptedContent.content=C.output}for(var x=0;x<y.recipients.length;++x){var j=y.recipients[x];if(j.encryptedContent.content===void 0)if(j.encryptedContent.algorithm===e.pki.oids.rsaEncryption)j.encryptedContent.content=j.encryptedContent.key.encrypt(y.encryptedContent.key.data);else throw new Error("Unsupported asymmetric cipher, OID "+j.encryptedContent.algorithm)}}},y};function p(y){var w={},T=[];if(!t.validate(y,s.asn1.recipientInfoValidator,w,T)){var I=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw I.errors=T,I}return{version:w.version.charCodeAt(0),issuer:e.pki.RDNAttributesAsArray(w.issuer),serialNumber:e.util.createBuffer(w.serial).toHex(),encryptedContent:{algorithm:t.derToOid(w.encAlgorithm),parameter:w.encParameter?w.encParameter.value:void 0,content:w.encKey}}}function g(y){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(y.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[e.pki.distinguishedNameToAsn1({attributes:y.issuer}),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,e.util.hexToBytes(y.serialNumber))]),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(y.encryptedContent.algorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,y.encryptedContent.content)])}function m(y){for(var w=[],T=0;T<y.length;++T)w.push(p(y[T]));return w}function d(y){for(var w=[],T=0;T<y.length;++T)w.push(g(y[T]));return w}function l(y){var w=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(y.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[e.pki.distinguishedNameToAsn1({attributes:y.issuer}),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,e.util.hexToBytes(y.serialNumber))]),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(y.digestAlgorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])]);if(y.authenticatedAttributesAsn1&&w.value.push(y.authenticatedAttributesAsn1),w.value.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(y.signatureAlgorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])),w.value.push(t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,y.signature)),y.unauthenticatedAttributes.length>0){for(var T=t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[]),I=0;I<y.unauthenticatedAttributes.length;++I){var O=y.unauthenticatedAttributes[I];T.values.push(o(O))}w.value.push(T)}return w}function a(y){for(var w=[],T=0;T<y.length;++T)w.push(l(y[T]));return w}function o(y){var w;if(y.type===e.pki.oids.contentType)w=t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(y.value).getBytes());else if(y.type===e.pki.oids.messageDigest)w=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,y.value.bytes());else if(y.type===e.pki.oids.signingTime){var T=new Date("1950-01-01T00:00:00Z"),I=new Date("2050-01-01T00:00:00Z"),O=y.value;if(typeof O=="string"){var E=Date.parse(O);isNaN(E)?O.length===13?O=t.utcTimeToDate(O):O=t.generalizedTimeToDate(O):O=new Date(E)}O>=T&&O<I?w=t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(O)):w=t.create(t.Class.UNIVERSAL,t.Type.GENERALIZEDTIME,!1,t.dateToGeneralizedTime(O))}return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(y.type).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[w])])}function h(y){return[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.pki.oids.data).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(y.algorithm).getBytes()),y.parameter?t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,y.parameter.getBytes()):void 0]),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,y.content.getBytes())])]}function v(y,w,T){var I={},O=[];if(!t.validate(w,T,I,O)){var E=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw E.errors=E,E}var C=t.derToOid(I.contentType);if(C!==e.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(I.encryptedContent){var x="";if(e.util.isArray(I.encryptedContent))for(var j=0;j<I.encryptedContent.length;++j){if(I.encryptedContent[j].type!==t.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");x+=I.encryptedContent[j].value}else x=I.encryptedContent;y.encryptedContent={algorithm:t.derToOid(I.encAlgorithm),parameter:e.util.createBuffer(I.encParameter.value),content:e.util.createBuffer(x)}}if(I.content){var x="";if(e.util.isArray(I.content))for(var j=0;j<I.content.length;++j){if(I.content[j].type!==t.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");x+=I.content[j].value}else x=I.content;y.content=e.util.createBuffer(x)}return y.version=I.version.charCodeAt(0),y.rawCapture=I,I}function _(y){if(y.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(y.content===void 0){var w;switch(y.encryptedContent.algorithm){case e.pki.oids["aes128-CBC"]:case e.pki.oids["aes192-CBC"]:case e.pki.oids["aes256-CBC"]:w=e.aes.createDecryptionCipher(y.encryptedContent.key);break;case e.pki.oids.desCBC:case e.pki.oids["des-EDE3-CBC"]:w=e.des.createDecryptionCipher(y.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+y.encryptedContent.algorithm)}if(w.start(y.encryptedContent.parameter),w.update(y.encryptedContent.content),!w.finish())throw new Error("Symmetric decryption failed.");y.content=w.output}}return pkcs7.exports}var ssh={exports:{}},hasRequiredSsh;function requireSsh(){if(hasRequiredSsh)return ssh.exports;hasRequiredSsh=1;var e=requireForge();requireAes(),requireHmac(),requireMd5$2(),requireSha1$2(),requireUtil$7();var t=ssh.exports=e.ssh=e.ssh||{};t.privateKeyToPutty=function(m,d,l){l=l||"",d=d||"";var a="ssh-rsa",o=d===""?"none":"aes256-cbc",h="PuTTY-User-Key-File-2: "+a+`\r
`;h+="Encryption: "+o+`\r
`,h+="Comment: "+l+`\r
`;var v=e.util.createBuffer();p(v,a),s(v,m.e),s(v,m.n);var _=e.util.encode64(v.bytes(),64),y=Math.floor(_.length/66)+1;h+="Public-Lines: "+y+`\r
`,h+=_;var w=e.util.createBuffer();s(w,m.d),s(w,m.p),s(w,m.q),s(w,m.qInv);var T;if(!d)T=e.util.encode64(w.bytes(),64);else{var I=w.length()+16-1;I-=I%16;var O=g(w.bytes());O.truncate(O.length()-I+w.length()),w.putBuffer(O);var E=e.util.createBuffer();E.putBuffer(g("\0\0\0\0",d)),E.putBuffer(g("\0\0\0",d));var C=e.aes.createEncryptionCipher(E.truncate(8),"CBC");C.start(e.util.createBuffer().fillWithByte(0,16)),C.update(w.copy()),C.finish();var x=C.output;x.truncate(16),T=e.util.encode64(x.bytes(),64)}y=Math.floor(T.length/66)+1,h+=`\r
Private-Lines: `+y+`\r
`,h+=T;var j=g("putty-private-key-file-mac-key",d),D=e.util.createBuffer();p(D,a),p(D,o),p(D,l),D.putInt32(v.length()),D.putBuffer(v),D.putInt32(w.length()),D.putBuffer(w);var k=e.hmac.create();return k.start("sha1",j),k.update(D.bytes()),h+=`\r
Private-MAC: `+k.digest().toHex()+`\r
`,h},t.publicKeyToOpenSSH=function(m,d){var l="ssh-rsa";d=d||"";var a=e.util.createBuffer();return p(a,l),s(a,m.e),s(a,m.n),l+" "+e.util.encode64(a.bytes())+" "+d},t.privateKeyToOpenSSH=function(m,d){return d?e.pki.encryptRsaPrivateKey(m,d,{legacy:!0,algorithm:"aes128"}):e.pki.privateKeyToPem(m)},t.getPublicKeyFingerprint=function(m,d){d=d||{};var l=d.md||e.md.md5.create(),a="ssh-rsa",o=e.util.createBuffer();p(o,a),s(o,m.e),s(o,m.n),l.start(),l.update(o.getBytes());var h=l.digest();if(d.encoding==="hex"){var v=h.toHex();return d.delimiter?v.match(/.{2}/g).join(d.delimiter):v}else{if(d.encoding==="binary")return h.getBytes();if(d.encoding)throw new Error('Unknown encoding "'+d.encoding+'".')}return h};function s(m,d){var l=d.toString(16);l[0]>="8"&&(l="00"+l);var a=e.util.hexToBytes(l);m.putInt32(a.length),m.putBytes(a)}function p(m,d){m.putInt32(d.length),m.putString(d)}function g(){for(var m=e.md.sha1.create(),d=arguments.length,l=0;l<d;++l)m.update(arguments[l]);return m.digest()}return ssh.exports}var lib$3,hasRequiredLib$3;function requireLib$3(){return hasRequiredLib$3||(hasRequiredLib$3=1,lib$3=requireForge(),requireAes(),requireAesCipherSuites(),requireAsn1(),requireCipher(),requireDes(),requireEd25519(),requireHmac(),requireKem(),requireLog(),requireMd_all(),requireMgf1(),requirePbkdf2(),requirePem(),requirePkcs1(),requirePkcs12(),requirePkcs7(),requirePki(),requirePrime(),requirePrng(),requirePss(),requireRandom(),requireRc2(),requireSsh(),requireTls(),requireUtil$7()),lib$3}var hasRequiredCredentialInternal;function requireCredentialInternal(){if(hasRequiredCredentialInternal)return credentialInternal;hasRequiredCredentialInternal=1;Object.defineProperty(credentialInternal,"__esModule",{value:!0}),credentialInternal.ImpersonatedServiceAccountCredential=credentialInternal.RefreshTokenCredential=credentialInternal.ServiceAccountCredential=credentialInternal.ApplicationDefaultCredential=void 0,credentialInternal.isApplicationDefault=_,credentialInternal.getApplicationDefault=y;const e=require$$1$3,t=requireSrc$b(),s=requireError(),p=requireValidator$1(),g=["https://www.googleapis.com/auth/cloud-platform","https://www.googleapis.com/auth/firebase.database","https://www.googleapis.com/auth/firebase.messaging","https://www.googleapis.com/auth/identitytoolkit","https://www.googleapis.com/auth/userinfo.email"];class m{constructor(E){this.googleAuth=new t.GoogleAuth({scopes:g,clientOptions:{transporterOptions:{agent:E}}})}async getAccessToken(){this.authClient||(this.authClient=await this.googleAuth.getClient()),await this.authClient.getAccessToken();const E=this.authClient.credentials;return this.quotaProjectId=this.authClient.quotaProjectId,I(E)}async getProjectId(){return this.projectId||(this.projectId=await this.googleAuth.getProjectId()),Promise.resolve(this.projectId)}getQuotaProjectId(){return this.quotaProjectId||(this.quotaProjectId=this.authClient?.quotaProjectId),this.quotaProjectId}async isComputeEngineCredential(){return this.authClient||(this.authClient=await this.googleAuth.getClient()),Promise.resolve(this.authClient instanceof t.Compute)}async getIDToken(E){if(await this.isComputeEngineCredential())return this.authClient.fetchIdToken(E);throw new s.FirebaseAppError(s.AppErrorCodes.INVALID_CREDENTIAL,"Credentials type should be Compute Engine Credentials.")}async getServiceAccountEmail(){if(this.accountId)return Promise.resolve(this.accountId);const{client_email:E}=await this.googleAuth.getCredentials();return this.accountId=E??"",Promise.resolve(this.accountId)}}credentialInternal.ApplicationDefaultCredential=m;class d{constructor(E,C,x=!1){this.serviceAccountPathOrObject=E,this.httpAgent=C,this.implicit=x;const j=typeof E=="string"?l.fromPath(E):new l(E);this.projectId=j.projectId,this.privateKey=j.privateKey,this.clientEmail=j.clientEmail}getGoogleAuth(){if(this.googleAuth)return this.googleAuth;const{auth:E,client:C}=T(this.serviceAccountPathOrObject,this.httpAgent);return this.googleAuth=E,this.authClient=C,this.googleAuth}async getAccessToken(){const E=this.getGoogleAuth();this.authClient===void 0&&(this.authClient=await E.getClient()),await this.authClient.getAccessToken();const C=this.authClient.credentials;return I(C)}}credentialInternal.ServiceAccountCredential=d;class l{static fromPath(E){try{return new l(JSON.parse(e.readFileSync(E,"utf8")))}catch(C){throw new s.FirebaseAppError(s.AppErrorCodes.INVALID_CREDENTIAL,"Failed to parse service account json file: "+C)}}constructor(E){if(!p.isNonNullObject(E))throw new s.FirebaseAppError(s.AppErrorCodes.INVALID_CREDENTIAL,"Service account must be an object.");w(this,E,"projectId","project_id"),w(this,E,"privateKey","private_key"),w(this,E,"clientEmail","client_email");let C;if(p.isNonEmptyString(this.projectId)?p.isNonEmptyString(this.privateKey)?p.isNonEmptyString(this.clientEmail)||(C='Service account object must contain a string "client_email" property.'):C='Service account object must contain a string "private_key" property.':C='Service account object must contain a string "project_id" property.',typeof C<"u")throw new s.FirebaseAppError(s.AppErrorCodes.INVALID_CREDENTIAL,C);const x=requireLib$3();try{x.pki.privateKeyFromPem(this.privateKey)}catch(j){throw new s.FirebaseAppError(s.AppErrorCodes.INVALID_CREDENTIAL,"Failed to parse private key: "+j)}}}class a{constructor(E,C,x=!1){this.refreshTokenPathOrObject=E,this.httpAgent=C,this.implicit=x,typeof E=="string"?o.validateFromPath(E):o.validateFromJSON(E)}getGoogleAuth(){if(this.googleAuth)return this.googleAuth;const{auth:E,client:C}=T(this.refreshTokenPathOrObject,this.httpAgent);return this.googleAuth=E,this.authClient=C,this.googleAuth}async getAccessToken(){const E=this.getGoogleAuth();this.authClient===void 0&&(this.authClient=await E.getClient()),await this.authClient.getAccessToken();const C=this.authClient.credentials;return I(C)}}credentialInternal.RefreshTokenCredential=a;class o{static validateFromPath(E){try{o.validateFromJSON(JSON.parse(e.readFileSync(E,"utf8")))}catch(C){throw new s.FirebaseAppError(s.AppErrorCodes.INVALID_CREDENTIAL,"Failed to parse refresh token file: "+C)}}static validateFromJSON(E){const C={clientId:"",clientSecret:"",refreshToken:"",type:""};w(C,E,"clientId","client_id"),w(C,E,"clientSecret","client_secret"),w(C,E,"refreshToken","refresh_token"),w(C,E,"type","type");let x;if(p.isNonEmptyString(C.clientId)?p.isNonEmptyString(C.clientSecret)?p.isNonEmptyString(C.refreshToken)?p.isNonEmptyString(C.type)||(x='Refresh token must contain a "type" property.'):x='Refresh token must contain a "refresh_token" property.':x='Refresh token must contain a "client_secret" property.':x='Refresh token must contain a "client_id" property.',typeof x<"u")throw new s.FirebaseAppError(s.AppErrorCodes.INVALID_CREDENTIAL,x)}}class h{constructor(E,C,x=!1){this.impersonatedServiceAccountPathOrObject=E,this.httpAgent=C,this.implicit=x,typeof E=="string"?v.validateFromPath(E):v.validateFromJSON(E)}getGoogleAuth(){if(this.googleAuth)return this.googleAuth;const{auth:E,client:C}=T(this.impersonatedServiceAccountPathOrObject,this.httpAgent);return this.googleAuth=E,this.authClient=C,this.googleAuth}async getAccessToken(){const E=this.getGoogleAuth();this.authClient===void 0&&(this.authClient=await E.getClient()),await this.authClient.getAccessToken();const C=this.authClient.credentials;return I(C)}}credentialInternal.ImpersonatedServiceAccountCredential=h;class v{static validateFromPath(E){try{v.validateFromJSON(JSON.parse(e.readFileSync(E,"utf8")))}catch(C){throw new s.FirebaseAppError(s.AppErrorCodes.INVALID_CREDENTIAL,"Failed to parse impersonated service account file: "+C)}}static validateFromJSON(E){const{client_id:C,client_secret:x,refresh_token:j,type:D}=E.source_credentials;let k;if(p.isNonEmptyString(C)?p.isNonEmptyString(x)?p.isNonEmptyString(j)?p.isNonEmptyString(D)||(k='Impersonated Service Account must contain a "source_credentials.type" property.'):k='Impersonated Service Account must contain a "source_credentials.refresh_token" property.':k='Impersonated Service Account must contain a "source_credentials.client_secret" property.':k='Impersonated Service Account must contain a "source_credentials.client_id" property.',typeof k<"u")throw new s.FirebaseAppError(s.AppErrorCodes.INVALID_CREDENTIAL,k)}}function _(O){return O instanceof m||O instanceof a&&O.implicit}function y(O){return new m(O)}function w(O,E,C,x){const j=E[C]||E[x];typeof j<"u"&&(O[C]=j)}function T(O,E){let C;const x=new t.GoogleAuth({scopes:g,clientOptions:{transporterOptions:{agent:E}},keyFile:typeof O=="string"?O:void 0});if(typeof O=="object"){if(!p.isNonNullObject(O))throw new s.FirebaseAppError(s.AppErrorCodes.INVALID_CREDENTIAL,"Service account must be an object.");w(O,O,"project_id","projectId"),w(O,O,"private_key","privateKey"),w(O,O,"client_email","clientEmail"),C=x.fromJSON(O)}return{auth:x,client:C}}function I(O){const E=O?.access_token,C=O?.expiry_date;if(typeof E!="string")throw new s.FirebaseAppError(s.AppErrorCodes.INVALID_CREDENTIAL,"Failed to parse Google auth credential: access_token must be a non empty string.");if(typeof C!="number")throw new s.FirebaseAppError(s.AppErrorCodes.INVALID_CREDENTIAL,"Failed to parse Google auth credential: Invalid expiry_date.");return{...O,access_token:E,expires_in:Math.floor((C-new Date().getTime())/1e3)}}return credentialInternal}var firebaseApp={};var hasRequiredFirebaseApp;function requireFirebaseApp(){if(hasRequiredFirebaseApp)return firebaseApp;hasRequiredFirebaseApp=1;Object.defineProperty(firebaseApp,"__esModule",{value:!0}),firebaseApp.FirebaseApp=firebaseApp.FirebaseAppInternals=void 0;const e=requireCredentialInternal(),t=requireValidator$1(),s=requireDeepCopy(),p=requireError(),g=300*1e3;class m{constructor(o){this.credential_=o,this.tokenListeners_=[],this.isRefreshing=!1}getToken(o=!1){return(o||this.shouldRefresh())&&(this.promiseToCachedToken_=this.refreshToken()),this.promiseToCachedToken_}getCachedToken(){return this.cachedToken_||null}refreshToken(){return this.isRefreshing=!0,Promise.resolve(this.credential_.getAccessToken()).then(o=>{if(!t.isNonNullObject(o)||typeof o.expires_in!="number"||typeof o.access_token!="string")throw new p.FirebaseAppError(p.AppErrorCodes.INVALID_CREDENTIAL,`Invalid access token generated: "${JSON.stringify(o)}". Valid access tokens must be an object with the "expires_in" (number) and "access_token" (string) properties.`);const h={accessToken:o.access_token,expirationTime:Date.now()+o.expires_in*1e3};return(!this.cachedToken_||this.cachedToken_.accessToken!==h.accessToken||this.cachedToken_.expirationTime!==h.expirationTime)&&(this.cachedToken_=h,this.tokenListeners_.forEach(v=>{v(h.accessToken)})),h}).catch(o=>{let h=typeof o=="string"?o:o.message;throw h=`Credential implementation provided to initializeApp() via the "credential" property failed to fetch a valid Google OAuth2 access token with the following error: "${h}".`,h.indexOf("invalid_grant")!==-1&&(h+=" There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk."),new p.FirebaseAppError(p.AppErrorCodes.INVALID_CREDENTIAL,h)}).finally(()=>{this.isRefreshing=!1})}shouldRefresh(){return(!this.cachedToken_||this.cachedToken_.expirationTime-Date.now()<=g)&&!this.isRefreshing}addAuthTokenListener(o){this.tokenListeners_.push(o),this.cachedToken_&&o(this.cachedToken_.accessToken)}removeAuthTokenListener(o){this.tokenListeners_=this.tokenListeners_.filter(h=>h!==o)}}firebaseApp.FirebaseAppInternals=m;class d{constructor(o,h,v){if(this.appStore=v,this.services_={},this.isDeleted_=!1,this.name_=h,this.options_=(0,s.deepCopy)(o),!t.isNonNullObject(this.options_))throw new p.FirebaseAppError(p.AppErrorCodes.INVALID_APP_OPTIONS,`Invalid Firebase app options passed as the first argument to initializeApp() for the app named "${this.name_}". Options must be a non-null object.`);"credential"in this.options_||(this.options_.credential=(0,e.getApplicationDefault)(this.options_.httpAgent));const y=this.options_.credential;if(typeof y!="object"||y===null||typeof y.getAccessToken!="function")throw new p.FirebaseAppError(p.AppErrorCodes.INVALID_APP_OPTIONS,`Invalid Firebase app options passed as the first argument to initializeApp() for the app named "${this.name_}". The "credential" property must be an object which implements the Credential interface.`);this.INTERNAL=new m(y)}get name(){return this.checkDestroyed_(),this.name_}get options(){return this.checkDestroyed_(),(0,s.deepCopy)(this.options_)}getOrInitService(o,h){return this.ensureService_(o,()=>h(this))}delete(){return this.checkDestroyed_(),this.appStore?.removeApp(this.name),Promise.all(Object.keys(this.services_).map(o=>{const h=this.services_[o];return l(h)?h.delete():Promise.resolve()})).then(()=>{this.services_={},this.isDeleted_=!0})}ensureService_(o,h){return this.checkDestroyed_(),o in this.services_||(this.services_[o]=h()),this.services_[o]}checkDestroyed_(){if(this.isDeleted_)throw new p.FirebaseAppError(p.AppErrorCodes.APP_DELETED,`Firebase app named "${this.name_}" has already been deleted.`)}}firebaseApp.FirebaseApp=d;function l(a){return typeof a.delete=="function"}return firebaseApp}var hasRequiredLifecycle;function requireLifecycle(){return hasRequiredLifecycle||(hasRequiredLifecycle=1,(function(e){var t={};Object.defineProperty(e,"__esModule",{value:!0}),e.FIREBASE_CONFIG_VAR=e.defaultAppStore=e.AppStore=void 0,e.initializeApp=o,e.getApp=h,e.getApps=v,e.deleteApp=_;const s=require$$1$3,p=requireValidator$1(),g=requireError(),m=requireCredentialInternal(),d=requireFirebaseApp(),l="[DEFAULT]";class a{constructor(){this.appStore=new Map}initializeApp(T,I=l){if(typeof T>"u"&&(T=y(),T.credential=(0,m.getApplicationDefault)()),typeof I!="string"||I==="")throw new g.FirebaseAppError(g.AppErrorCodes.INVALID_APP_NAME,`Invalid Firebase app name "${I}" provided. App name must be a non-empty string.`);if(this.appStore.has(I))throw I===l?new g.FirebaseAppError(g.AppErrorCodes.DUPLICATE_APP,"The default Firebase app already exists. This means you called initializeApp() more than once without providing an app name as the second argument. In most cases you only need to call initializeApp() once. But if you do want to initialize multiple apps, pass a second argument to initializeApp() to give each app a unique name."):new g.FirebaseAppError(g.AppErrorCodes.DUPLICATE_APP,`Firebase app named "${I}" already exists. This means you called initializeApp() more than once with the same app name as the second argument. Make sure you provide a unique name every time you call initializeApp().`);const O=new d.FirebaseApp(T,I,this);return this.appStore.set(O.name,O),O}getApp(T=l){if(typeof T!="string"||T==="")throw new g.FirebaseAppError(g.AppErrorCodes.INVALID_APP_NAME,`Invalid Firebase app name "${T}" provided. App name must be a non-empty string.`);if(!this.appStore.has(T)){let I=T===l?"The default Firebase app does not exist. ":`Firebase app named "${T}" does not exist. `;throw I+="Make sure you call initializeApp() before using any of the Firebase services.",new g.FirebaseAppError(g.AppErrorCodes.NO_APP,I)}return this.appStore.get(T)}getApps(){return Array.from(this.appStore.values())}deleteApp(T){if(typeof T!="object"||T===null||!("options"in T))throw new g.FirebaseAppError(g.AppErrorCodes.INVALID_ARGUMENT,"Invalid app argument.");return h(T.name).delete()}clearAllApps(){const T=[];return this.getApps().forEach(I=>{T.push(this.deleteApp(I))}),Promise.all(T).then()}removeApp(T){this.appStore.delete(T)}}e.AppStore=a,e.defaultAppStore=new a;function o(w,T=l){return e.defaultAppStore.initializeApp(w,T)}function h(w=l){return e.defaultAppStore.getApp(w)}function v(){return e.defaultAppStore.getApps()}function _(w){return e.defaultAppStore.deleteApp(w)}e.FIREBASE_CONFIG_VAR="FIREBASE_CONFIG";function y(){const w=t[e.FIREBASE_CONFIG_VAR];if(!p.isNonEmptyString(w))return{};try{const T=w.startsWith("{")?w:s.readFileSync(w,"utf8");return JSON.parse(T)}catch(T){throw new g.FirebaseAppError(g.AppErrorCodes.INVALID_APP_OPTIONS,"Failed to parse app options file: "+T)}}})(lifecycle)),lifecycle}var credentialFactory={};var hasRequiredCredentialFactory;function requireCredentialFactory(){if(hasRequiredCredentialFactory)return credentialFactory;hasRequiredCredentialFactory=1;Object.defineProperty(credentialFactory,"__esModule",{value:!0}),credentialFactory.applicationDefault=g,credentialFactory.cert=m,credentialFactory.refreshToken=d,credentialFactory.clearGlobalAppDefaultCred=l;const e=requireCredentialInternal();let t;const s={},p={};function g(a){return typeof t>"u"&&(t=(0,e.getApplicationDefault)(a)),t}function m(a,o){const h=JSON.stringify(a);return h in s||(s[h]=new e.ServiceAccountCredential(a,o)),s[h]}function d(a,o){const h=JSON.stringify(a);return h in p||(p[h]=new e.RefreshTokenCredential(a,o)),p[h]}function l(){t=void 0}return credentialFactory}var utils$2={};const version$6="13.4.0",require$$2$2={version:version$6};var hasRequiredUtils$2;function requireUtils$2(){if(hasRequiredUtils$2)return utils$2;hasRequiredUtils$2=1;var e={},t={};Object.defineProperty(utils$2,"__esModule",{value:!0}),utils$2.getSdkVersion=m,utils$2.getMetricsHeader=d,utils$2.renameProperties=l,utils$2.addReadonlyGetter=a,utils$2.getExplicitProjectId=o,utils$2.findProjectId=h,utils$2.getExplicitServiceAccountEmail=v,utils$2.findServiceAccountEmail=_,utils$2.toWebSafeBase64=y,utils$2.formatString=w,utils$2.generateUpdateMask=T,utils$2.transformMillisecondsToSecondsString=I,utils$2.parseResourceName=O;const s=requireCredentialInternal(),p=requireValidator$1();let g;function m(){if(!g){const{version:E}=require$$2$2;g=E}return g}function d(){return`gl-node/${e.versions.node} fire-admin/${m()}`}function l(E,C){Object.keys(C).forEach(x=>{if(x in E){const j=C[x];E[j]=E[x],delete E[x]}})}function a(E,C,x){Object.defineProperty(E,C,{value:x,writable:!1,enumerable:!0})}function o(E){const C=E.options;if(p.isNonEmptyString(C.projectId))return C.projectId;const x=E.options.credential;if(x instanceof s.ServiceAccountCredential)return x.projectId;const j=t.GOOGLE_CLOUD_PROJECT||t.GCLOUD_PROJECT;return p.isNonEmptyString(j)?j:null}function h(E){const C=o(E);if(C)return Promise.resolve(C);const x=E.options.credential;return x instanceof s.ApplicationDefaultCredential?x.getProjectId():Promise.resolve(null)}function v(E){const C=E.options;if(p.isNonEmptyString(C.serviceAccountId))return C.serviceAccountId;const x=E.options.credential;return x instanceof s.ServiceAccountCredential?x.clientEmail:null}function _(E){const C=v(E);if(C)return Promise.resolve(C);const x=E.options.credential;return x instanceof s.ApplicationDefaultCredential?x.getServiceAccountEmail():Promise.resolve(null)}function y(E){return E.toString("base64").replace(/\//g,"_").replace(/\+/g,"-")}function w(E,C){let x=E;return Object.keys(C||{}).forEach(j=>{x=x.replace(new RegExp("{"+j+"}","g"),C[j])}),x}function T(E,C=[],x=""){const j=[];if(!p.isNonNullObject(E))return j;for(const D in E)if(typeof E[D]<"u"){const k=x?`${x}.${D}`:D;if(C.indexOf(k)!==-1)j.push(D);else{const q=T(E[D],C,k);q.length>0?q.forEach(G=>{j.push(`${D}.${G}`)}):j.push(D)}}return j}function I(E){let C;const x=Math.floor(E/1e3),j=Math.floor((E-x*1e3)*1e6);if(j>0){let D=j.toString();for(;D.length<9;)D="0"+D;C=`${x}.${D}s`}else C=`${x}s`;return C}function O(E,C){if(!E.includes("/"))return{resourceId:E};const j=new RegExp(`^(projects/([^/]+)/)?locations/([^/]+)/${C}/([^/]+)$`).exec(E);if(j===null)throw new Error("Invalid resource name format.");const D=j[2],k=j[3],q=j[4];return{projectId:D,locationId:k,resourceId:q}}return utils$2}var auth$1={},authApiRequest={},apiRequest={},main$1={exports:{}},sbmh,hasRequiredSbmh;function requireSbmh(){if(hasRequiredSbmh)return sbmh;hasRequiredSbmh=1;const{EventEmitter:e}=require$$1$3,{inherits:t}=require$$1$3;function s(p){if(typeof p=="string"&&(p=Buffer.from(p)),!Buffer.isBuffer(p))throw new TypeError("The needle has to be a String or a Buffer.");const g=p.length,m=g-1;if(g===0)throw new Error("The needle cannot be an empty String/Buffer.");if(g>256)throw new Error("The needle cannot have a length bigger than 256.");this.maxMatches=1/0,this.matches=0,this._occ=new Uint8Array(256).fill(g),this._lookbehind_size=0,this._needle=p,this._bufpos=0,this._lookbehind=Buffer.alloc(m);for(var d=0;d<m;++d)this._occ[p[d]]=m-d}return t(s,e),s.prototype.reset=function(){this._lookbehind_size=0,this.matches=0,this._bufpos=0},s.prototype.push=function(p,g){Buffer.isBuffer(p)||(p=Buffer.from(p,"binary"));const m=p.length;this._bufpos=g||0;let d;for(;d!==m&&this.matches<this.maxMatches;)d=this._sbmh_feed(p);return d},s.prototype._sbmh_feed=function(p){const g=p.length,m=this._needle,d=m.length,l=d-1,a=m[l];let o=-this._lookbehind_size,h;if(o<0){for(;o<0&&o<=g-d;){if(h=p[o+l],h===a&&this._sbmh_memcmp(p,o,l))return this._lookbehind_size=0,++this.matches,this.emit("info",!0),this._bufpos=o+d;o+=this._occ[h]}for(;o<0&&!this._sbmh_memcmp(p,o,g-o);)++o;if(o>=0)this.emit("info",!1,this._lookbehind,0,this._lookbehind_size),this._lookbehind_size=0;else{const v=this._lookbehind_size+o;return v>0&&this.emit("info",!1,this._lookbehind,0,v),this._lookbehind_size-=v,this._lookbehind.copy(this._lookbehind,0,v,this._lookbehind_size),p.copy(this._lookbehind,this._lookbehind_size),this._lookbehind_size+=g,this._bufpos=g,g}}if(o=p.indexOf(m,o+this._bufpos),o!==-1)return++this.matches,o===0?this.emit("info",!0):this.emit("info",!0,p,this._bufpos,o),this._bufpos=o+d;for(o=g-l,o<0&&(o=0);o!==g&&(p[o]!==m[0]||Buffer.compare(p.subarray(o+1,g),m.subarray(1,g-o))!==0);)++o;return o!==g&&(p.copy(this._lookbehind,0,o,g),this._lookbehind_size=g-o),o!==0&&this.emit("info",!1,p,this._bufpos,o),this._bufpos=g,g},s.prototype._sbmh_lookup_char=function(p,g){return g<0?this._lookbehind[this._lookbehind_size+g]:p[g]},s.prototype._sbmh_memcmp=function(p,g,m){for(var d=0;d<m;++d)if(this._sbmh_lookup_char(p,g+d)!==this._needle[d])return!1;return!0},sbmh=s,sbmh}var PartStream_1,hasRequiredPartStream;function requirePartStream(){if(hasRequiredPartStream)return PartStream_1;hasRequiredPartStream=1;const e=require$$1$3.inherits,t=require$$1$3.Readable;function s(p){t.call(this,p)}return e(s,t),s.prototype._read=function(p){},PartStream_1=s,PartStream_1}var getLimit,hasRequiredGetLimit;function requireGetLimit(){return hasRequiredGetLimit||(hasRequiredGetLimit=1,getLimit=function(t,s,p){if(!t||t[s]===void 0||t[s]===null)return p;if(typeof t[s]!="number"||isNaN(t[s]))throw new TypeError("Limit "+s+" is not a valid number");return t[s]}),getLimit}var HeaderParser_1,hasRequiredHeaderParser;function requireHeaderParser(){if(hasRequiredHeaderParser)return HeaderParser_1;hasRequiredHeaderParser=1;const e=require$$1$3.EventEmitter,t=require$$1$3.inherits,s=requireGetLimit(),p=requireSbmh(),g=Buffer.from(`\r
\r
`),m=/\r\n/g,d=/^([^:]+):[ \t]?([\x00-\xFF]+)?$/;function l(a){e.call(this),a=a||{};const o=this;this.nread=0,this.maxed=!1,this.npairs=0,this.maxHeaderPairs=s(a,"maxHeaderPairs",2e3),this.maxHeaderSize=s(a,"maxHeaderSize",81920),this.buffer="",this.header={},this.finished=!1,this.ss=new p(g),this.ss.on("info",function(h,v,_,y){v&&!o.maxed&&(o.nread+y-_>=o.maxHeaderSize?(y=o.maxHeaderSize-o.nread+_,o.nread=o.maxHeaderSize,o.maxed=!0):o.nread+=y-_,o.buffer+=v.toString("binary",_,y)),h&&o._finish()})}return t(l,e),l.prototype.push=function(a){const o=this.ss.push(a);if(this.finished)return o},l.prototype.reset=function(){this.finished=!1,this.buffer="",this.header={},this.ss.reset()},l.prototype._finish=function(){this.buffer&&this._parseHeader(),this.ss.matches=this.ss.maxMatches;const a=this.header;this.header={},this.buffer="",this.finished=!0,this.nread=this.npairs=0,this.maxed=!1,this.emit("header",a)},l.prototype._parseHeader=function(){if(this.npairs===this.maxHeaderPairs)return;const a=this.buffer.split(m),o=a.length;let h,v;for(var _=0;_<o;++_){if(a[_].length===0)continue;if((a[_][0]==="	"||a[_][0]===" ")&&v){this.header[v][this.header[v].length-1]+=a[_];continue}const y=a[_].indexOf(":");if(y===-1||y===0)return;if(h=d.exec(a[_]),v=h[1].toLowerCase(),this.header[v]=this.header[v]||[],this.header[v].push(h[2]||""),++this.npairs===this.maxHeaderPairs)break}},HeaderParser_1=l,HeaderParser_1}var Dicer_1,hasRequiredDicer;function requireDicer(){if(hasRequiredDicer)return Dicer_1;hasRequiredDicer=1;var e={};const t=require$$1$3.Writable,s=require$$1$3.inherits,p=requireSbmh(),g=requirePartStream(),m=requireHeaderParser(),d=45,l=Buffer.from("-"),a=Buffer.from(`\r
`),o=function(){};function h(v){if(!(this instanceof h))return new h(v);if(t.call(this,v),!v||!v.headerFirst&&typeof v.boundary!="string")throw new TypeError("Boundary required");typeof v.boundary=="string"?this.setBoundary(v.boundary):this._bparser=void 0,this._headerFirst=v.headerFirst,this._dashes=0,this._parts=0,this._finished=!1,this._realFinish=!1,this._isPreamble=!0,this._justMatched=!1,this._firstWrite=!0,this._inHeader=!0,this._part=void 0,this._cb=void 0,this._ignoreData=!1,this._partOpts={highWaterMark:v.partHwm},this._pause=!1;const _=this;this._hparser=new m(v),this._hparser.on("header",function(y){_._inHeader=!1,_._part.emit("header",y)})}return s(h,t),h.prototype.emit=function(v){if(v==="finish"&&!this._realFinish){if(!this._finished){const _=this;e.nextTick(function(){if(_.emit("error",new Error("Unexpected end of multipart data")),_._part&&!_._ignoreData){const y=_._isPreamble?"Preamble":"Part";_._part.emit("error",new Error(y+" terminated early due to unexpected end of multipart data")),_._part.push(null),e.nextTick(function(){_._realFinish=!0,_.emit("finish"),_._realFinish=!1});return}_._realFinish=!0,_.emit("finish"),_._realFinish=!1})}}else t.prototype.emit.apply(this,arguments)},h.prototype._write=function(v,_,y){if(!this._hparser&&!this._bparser)return y();if(this._headerFirst&&this._isPreamble){this._part||(this._part=new g(this._partOpts),this.listenerCount("preamble")!==0?this.emit("preamble",this._part):this._ignore());const w=this._hparser.push(v);if(!this._inHeader&&w!==void 0&&w<v.length)v=v.slice(w);else return y()}this._firstWrite&&(this._bparser.push(a),this._firstWrite=!1),this._bparser.push(v),this._pause?this._cb=y:y()},h.prototype.reset=function(){this._part=void 0,this._bparser=void 0,this._hparser=void 0},h.prototype.setBoundary=function(v){const _=this;this._bparser=new p(`\r
--`+v),this._bparser.on("info",function(y,w,T,I){_._oninfo(y,w,T,I)})},h.prototype._ignore=function(){this._part&&!this._ignoreData&&(this._ignoreData=!0,this._part.on("error",o),this._part.resume())},h.prototype._oninfo=function(v,_,y,w){let T;const I=this;let O=0,E,C=!0;if(!this._part&&this._justMatched&&_){for(;this._dashes<2&&y+O<w;)if(_[y+O]===d)++O,++this._dashes;else{this._dashes&&(T=l),this._dashes=0;break}if(this._dashes===2&&(y+O<w&&this.listenerCount("trailer")!==0&&this.emit("trailer",_.slice(y+O,w)),this.reset(),this._finished=!0,I._parts===0&&(I._realFinish=!0,I.emit("finish"),I._realFinish=!1)),this._dashes)return}this._justMatched&&(this._justMatched=!1),this._part||(this._part=new g(this._partOpts),this._part._read=function(x){I._unpause()},this._isPreamble&&this.listenerCount("preamble")!==0?this.emit("preamble",this._part):this._isPreamble!==!0&&this.listenerCount("part")!==0?this.emit("part",this._part):this._ignore(),this._isPreamble||(this._inHeader=!0)),_&&y<w&&!this._ignoreData&&(this._isPreamble||!this._inHeader?(T&&(C=this._part.push(T)),C=this._part.push(_.slice(y,w)),C||(this._pause=!0)):!this._isPreamble&&this._inHeader&&(T&&this._hparser.push(T),E=this._hparser.push(_.slice(y,w)),!this._inHeader&&E!==void 0&&E<w&&this._oninfo(!1,_,y+E,w))),v&&(this._hparser.reset(),this._isPreamble?this._isPreamble=!1:y!==w&&(++this._parts,this._part.on("end",function(){--I._parts===0&&(I._finished?(I._realFinish=!0,I.emit("finish"),I._realFinish=!1):I._unpause())})),this._part.push(null),this._part=void 0,this._ignoreData=!1,this._justMatched=!0,this._dashes=0)},h.prototype._unpause=function(){if(this._pause&&(this._pause=!1,this._cb)){const v=this._cb;this._cb=void 0,v()}},Dicer_1=h,Dicer_1}var decodeText_1,hasRequiredDecodeText;function requireDecodeText(){if(hasRequiredDecodeText)return decodeText_1;hasRequiredDecodeText=1;const e=new TextDecoder("utf-8"),t=new Map([["utf-8",e],["utf8",e]]);function s(m){let d;for(;;)switch(m){case"utf-8":case"utf8":return p.utf8;case"latin1":case"ascii":case"us-ascii":case"iso-8859-1":case"iso8859-1":case"iso88591":case"iso_8859-1":case"windows-1252":case"iso_8859-1:1987":case"cp1252":case"x-cp1252":return p.latin1;case"utf16le":case"utf-16le":case"ucs2":case"ucs-2":return p.utf16le;case"base64":return p.base64;default:if(d===void 0){d=!0,m=m.toLowerCase();continue}return p.other.bind(m)}}const p={utf8:(m,d)=>m.length===0?"":(typeof m=="string"&&(m=Buffer.from(m,d)),m.utf8Slice(0,m.length)),latin1:(m,d)=>m.length===0?"":typeof m=="string"?m:m.latin1Slice(0,m.length),utf16le:(m,d)=>m.length===0?"":(typeof m=="string"&&(m=Buffer.from(m,d)),m.ucs2Slice(0,m.length)),base64:(m,d)=>m.length===0?"":(typeof m=="string"&&(m=Buffer.from(m,d)),m.base64Slice(0,m.length)),other:(m,d)=>{if(m.length===0)return"";if(typeof m=="string"&&(m=Buffer.from(m,d)),t.has(this.toString()))try{return t.get(this).decode(m)}catch{}return typeof m=="string"?m:m.toString()}};function g(m,d,l){return m&&s(l)(m,d)}return decodeText_1=g,decodeText_1}var parseParams_1,hasRequiredParseParams;function requireParseParams(){if(hasRequiredParseParams)return parseParams_1;hasRequiredParseParams=1;const e=requireDecodeText(),t=/%[a-fA-F0-9][a-fA-F0-9]/g,s={"%00":"\0","%01":"","%02":"","%03":"","%04":"","%05":"","%06":"","%07":"\x07","%08":"\b","%09":"	","%0a":`
`,"%0A":`
`,"%0b":"\v","%0B":"\v","%0c":"\f","%0C":"\f","%0d":"\r","%0D":"\r","%0e":"","%0E":"","%0f":"","%0F":"","%10":"","%11":"","%12":"","%13":"","%14":"","%15":"","%16":"","%17":"","%18":"","%19":"","%1a":"","%1A":"","%1b":"\x1B","%1B":"\x1B","%1c":"","%1C":"","%1d":"","%1D":"","%1e":"","%1E":"","%1f":"","%1F":"","%20":" ","%21":"!","%22":'"',"%23":"#","%24":"$","%25":"%","%26":"&","%27":"'","%28":"(","%29":")","%2a":"*","%2A":"*","%2b":"+","%2B":"+","%2c":",","%2C":",","%2d":"-","%2D":"-","%2e":".","%2E":".","%2f":"/","%2F":"/","%30":"0","%31":"1","%32":"2","%33":"3","%34":"4","%35":"5","%36":"6","%37":"7","%38":"8","%39":"9","%3a":":","%3A":":","%3b":";","%3B":";","%3c":"<","%3C":"<","%3d":"=","%3D":"=","%3e":">","%3E":">","%3f":"?","%3F":"?","%40":"@","%41":"A","%42":"B","%43":"C","%44":"D","%45":"E","%46":"F","%47":"G","%48":"H","%49":"I","%4a":"J","%4A":"J","%4b":"K","%4B":"K","%4c":"L","%4C":"L","%4d":"M","%4D":"M","%4e":"N","%4E":"N","%4f":"O","%4F":"O","%50":"P","%51":"Q","%52":"R","%53":"S","%54":"T","%55":"U","%56":"V","%57":"W","%58":"X","%59":"Y","%5a":"Z","%5A":"Z","%5b":"[","%5B":"[","%5c":"\\","%5C":"\\","%5d":"]","%5D":"]","%5e":"^","%5E":"^","%5f":"_","%5F":"_","%60":"`","%61":"a","%62":"b","%63":"c","%64":"d","%65":"e","%66":"f","%67":"g","%68":"h","%69":"i","%6a":"j","%6A":"j","%6b":"k","%6B":"k","%6c":"l","%6C":"l","%6d":"m","%6D":"m","%6e":"n","%6E":"n","%6f":"o","%6F":"o","%70":"p","%71":"q","%72":"r","%73":"s","%74":"t","%75":"u","%76":"v","%77":"w","%78":"x","%79":"y","%7a":"z","%7A":"z","%7b":"{","%7B":"{","%7c":"|","%7C":"|","%7d":"}","%7D":"}","%7e":"~","%7E":"~","%7f":"","%7F":"","%80":"","%81":"","%82":"","%83":"","%84":"","%85":"","%86":"","%87":"","%88":"","%89":"","%8a":"","%8A":"","%8b":"","%8B":"","%8c":"","%8C":"","%8d":"","%8D":"","%8e":"","%8E":"","%8f":"","%8F":"","%90":"","%91":"","%92":"","%93":"","%94":"","%95":"","%96":"","%97":"","%98":"","%99":"","%9a":"","%9A":"","%9b":"","%9B":"","%9c":"","%9C":"","%9d":"","%9D":"","%9e":"","%9E":"","%9f":"","%9F":"","%a0":"","%A0":"","%a1":"","%A1":"","%a2":"","%A2":"","%a3":"","%A3":"","%a4":"","%A4":"","%a5":"","%A5":"","%a6":"","%A6":"","%a7":"","%A7":"","%a8":"","%A8":"","%a9":"","%A9":"","%aa":"","%Aa":"","%aA":"","%AA":"","%ab":"","%Ab":"","%aB":"","%AB":"","%ac":"","%Ac":"","%aC":"","%AC":"","%ad":"","%Ad":"","%aD":"","%AD":"","%ae":"","%Ae":"","%aE":"","%AE":"","%af":"","%Af":"","%aF":"","%AF":"","%b0":"","%B0":"","%b1":"","%B1":"","%b2":"","%B2":"","%b3":"","%B3":"","%b4":"","%B4":"","%b5":"","%B5":"","%b6":"","%B6":"","%b7":"","%B7":"","%b8":"","%B8":"","%b9":"","%B9":"","%ba":"","%Ba":"","%bA":"","%BA":"","%bb":"","%Bb":"","%bB":"","%BB":"","%bc":"","%Bc":"","%bC":"","%BC":"","%bd":"","%Bd":"","%bD":"","%BD":"","%be":"","%Be":"","%bE":"","%BE":"","%bf":"","%Bf":"","%bF":"","%BF":"","%c0":"","%C0":"","%c1":"","%C1":"","%c2":"","%C2":"","%c3":"","%C3":"","%c4":"","%C4":"","%c5":"","%C5":"","%c6":"","%C6":"","%c7":"","%C7":"","%c8":"","%C8":"","%c9":"","%C9":"","%ca":"","%Ca":"","%cA":"","%CA":"","%cb":"","%Cb":"","%cB":"","%CB":"","%cc":"","%Cc":"","%cC":"","%CC":"","%cd":"","%Cd":"","%cD":"","%CD":"","%ce":"","%Ce":"","%cE":"","%CE":"","%cf":"","%Cf":"","%cF":"","%CF":"","%d0":"","%D0":"","%d1":"","%D1":"","%d2":"","%D2":"","%d3":"","%D3":"","%d4":"","%D4":"","%d5":"","%D5":"","%d6":"","%D6":"","%d7":"","%D7":"","%d8":"","%D8":"","%d9":"","%D9":"","%da":"","%Da":"","%dA":"","%DA":"","%db":"","%Db":"","%dB":"","%DB":"","%dc":"","%Dc":"","%dC":"","%DC":"","%dd":"","%Dd":"","%dD":"","%DD":"","%de":"","%De":"","%dE":"","%DE":"","%df":"","%Df":"","%dF":"","%DF":"","%e0":"","%E0":"","%e1":"","%E1":"","%e2":"","%E2":"","%e3":"","%E3":"","%e4":"","%E4":"","%e5":"","%E5":"","%e6":"","%E6":"","%e7":"","%E7":"","%e8":"","%E8":"","%e9":"","%E9":"","%ea":"","%Ea":"","%eA":"","%EA":"","%eb":"","%Eb":"","%eB":"","%EB":"","%ec":"","%Ec":"","%eC":"","%EC":"","%ed":"","%Ed":"","%eD":"","%ED":"","%ee":"","%Ee":"","%eE":"","%EE":"","%ef":"","%Ef":"","%eF":"","%EF":"","%f0":"","%F0":"","%f1":"","%F1":"","%f2":"","%F2":"","%f3":"","%F3":"","%f4":"","%F4":"","%f5":"","%F5":"","%f6":"","%F6":"","%f7":"","%F7":"","%f8":"","%F8":"","%f9":"","%F9":"","%fa":"","%Fa":"","%fA":"","%FA":"","%fb":"","%Fb":"","%fB":"","%FB":"","%fc":"","%Fc":"","%fC":"","%FC":"","%fd":"","%Fd":"","%fD":"","%FD":"","%fe":"","%Fe":"","%fE":"","%FE":"","%ff":"","%Ff":"","%fF":"","%FF":""};function p(o){return s[o]}const g=0,m=1,d=2,l=3;function a(o){const h=[];let v=g,_="",y=!1,w=!1,T=0,I="";const O=o.length;for(var E=0;E<O;++E){const C=o[E];if(C==="\\"&&y)if(w)w=!1;else{w=!0;continue}else if(C==='"')if(w)w=!1;else{if(y)for(y=!1,v=g;E+1<O&&o[E+1]!==";";)++E;else y=!0;continue}else if(w&&y&&(I+="\\"),w=!1,(v===d||v===l)&&C==="'"){v===d?(v=l,_=I.substring(1)):v=m,I="";continue}else if(v===g&&(C==="*"||C==="=")&&h.length){v=C==="*"?d:m,h[T]=[I,void 0],I="";continue}else if(!y&&C===";"){v=g,_?(I.length&&(I=e(I.replace(t,p),"binary",_)),_=""):I.length&&(I=e(I,"binary","utf8")),h[T]===void 0?h[T]=I:h[T][1]=I,I="",++T;continue}else if(!y&&(C===" "||C==="	"))continue;I+=C}return _&&I.length?I=e(I.replace(t,p),"binary",_):I&&(I=e(I,"binary","utf8")),h[T]===void 0?I&&(h[T]=I):h[T][1]=I,h}return parseParams_1=a,parseParams_1}var basename,hasRequiredBasename;function requireBasename(){return hasRequiredBasename||(hasRequiredBasename=1,basename=function(t){if(typeof t!="string")return"";for(var s=t.length-1;s>=0;--s)switch(t.charCodeAt(s)){case 47:case 92:return t=t.slice(s+1),t===".."||t==="."?"":t}return t===".."||t==="."?"":t}),basename}var multipart,hasRequiredMultipart;function requireMultipart(){if(hasRequiredMultipart)return multipart;hasRequiredMultipart=1;var e={};const{Readable:t}=require$$1$3,{inherits:s}=require$$1$3,p=requireDicer(),g=requireParseParams(),m=requireDecodeText(),d=requireBasename(),l=requireGetLimit(),a=/^boundary$/i,o=/^form-data$/i,h=/^charset$/i,v=/^filename$/i,_=/^name$/i;y.detect=/^multipart\/form-data/i;function y(I,O){let E,C;const x=this;let j;const D=O.limits,k=O.isPartAFile||((Oe,ge,J)=>ge==="application/octet-stream"||J!==void 0),q=O.parsedConType||[],G=O.defCharset||"utf8",$=O.preservePath,W={highWaterMark:O.fileHwm};for(E=0,C=q.length;E<C;++E)if(Array.isArray(q[E])&&a.test(q[E][0])){j=q[E][1];break}function K(){he===0&&Se&&!I._done&&(Se=!1,x.end())}if(typeof j!="string")throw new Error("Multipart: Boundary not found");const z=l(D,"fieldSize",1*1024*1024),Q=l(D,"fileSize",1/0),Y=l(D,"files",1/0),te=l(D,"fields",1/0),ae=l(D,"parts",1/0),ue=l(D,"headerPairs",2e3),ee=l(D,"headerSize",80*1024);let oe=0,de=0,he=0,Ee,fe,Se=!1;this._needDrain=!1,this._pause=!1,this._cb=void 0,this._nparts=0,this._boy=I;const be={boundary:j,maxHeaderPairs:ue,maxHeaderSize:ee,partHwm:W.highWaterMark,highWaterMark:O.highWaterMark};this.parser=new p(be),this.parser.on("drain",function(){if(x._needDrain=!1,x._cb&&!x._pause){const Oe=x._cb;x._cb=void 0,Oe()}}).on("part",function Oe(ge){if(++x._nparts>ae)return x.parser.removeListener("part",Oe),x.parser.on("part",w),I.hitPartsLimit=!0,I.emit("partsLimit"),w(ge);if(fe){const J=fe;J.emit("end"),J.removeAllListeners("end")}ge.on("header",function(J){let c,N,A,V,ne,ce,ie=0;if(J["content-type"]&&(A=g(J["content-type"][0]),A[0])){for(c=A[0].toLowerCase(),E=0,C=A.length;E<C;++E)if(h.test(A[E][0])){V=A[E][1].toLowerCase();break}}if(c===void 0&&(c="text/plain"),V===void 0&&(V=G),J["content-disposition"]){if(A=g(J["content-disposition"][0]),!o.test(A[0]))return w(ge);for(E=0,C=A.length;E<C;++E)_.test(A[E][0])?N=A[E][1]:v.test(A[E][0])&&(ce=A[E][1],$||(ce=d(ce)))}else return w(ge);J["content-transfer-encoding"]?ne=J["content-transfer-encoding"][0].toLowerCase():ne="7bit";let u,P;if(k(N,c,ce)){if(oe===Y)return I.hitFilesLimit||(I.hitFilesLimit=!0,I.emit("filesLimit")),w(ge);if(++oe,I.listenerCount("file")===0){x.parser._ignore();return}++he;const M=new T(W);Ee=M,M.on("end",function(){if(--he,x._pause=!1,K(),x._cb&&!x._needDrain){const n=x._cb;x._cb=void 0,n()}}),M._read=function(n){if(x._pause&&(x._pause=!1,x._cb&&!x._needDrain)){const L=x._cb;x._cb=void 0,L()}},I.emit("file",N,M,ce,ne,c),u=function(n){if((ie+=n.length)>Q){const L=Q-ie+n.length;L>0&&M.push(n.slice(0,L)),M.truncated=!0,M.bytesRead=Q,ge.removeAllListeners("data"),M.emit("limit");return}else M.push(n)||(x._pause=!0);M.bytesRead=ie},P=function(){Ee=void 0,M.push(null)}}else{if(de===te)return I.hitFieldsLimit||(I.hitFieldsLimit=!0,I.emit("fieldsLimit")),w(ge);++de,++he;let M="",n=!1;fe=ge,u=function(L){if((ie+=L.length)>z){const U=z-(ie-L.length);M+=L.toString("binary",0,U),n=!0,ge.removeAllListeners("data")}else M+=L.toString("binary")},P=function(){fe=void 0,M.length&&(M=m(M,"binary",V)),I.emit("field",N,M,!1,n,ne,c),--he,K()}}ge._readableState.sync=!1,ge.on("data",u),ge.on("end",P)}).on("error",function(J){Ee&&Ee.emit("error",J)})}).on("error",function(Oe){I.emit("error",Oe)}).on("finish",function(){Se=!0,K()})}y.prototype.write=function(I,O){const E=this.parser.write(I);E&&!this._pause?O():(this._needDrain=!E,this._cb=O)},y.prototype.end=function(){const I=this;I.parser.writable?I.parser.end():I._boy._done||e.nextTick(function(){I._boy._done=!0,I._boy.emit("finish")})};function w(I){I.resume()}function T(I){t.call(this,I),this.bytesRead=0,this.truncated=!1}return s(T,t),T.prototype._read=function(I){},multipart=y,multipart}var Decoder_1,hasRequiredDecoder$1;function requireDecoder$1(){if(hasRequiredDecoder$1)return Decoder_1;hasRequiredDecoder$1=1;const e=/\+/g,t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function s(){this.buffer=void 0}return s.prototype.write=function(p){p=p.replace(e," ");let g="",m=0,d=0;const l=p.length;for(;m<l;++m)this.buffer!==void 0?t[p.charCodeAt(m)]?(this.buffer+=p[m],++d,this.buffer.length===2&&(g+=String.fromCharCode(parseInt(this.buffer,16)),this.buffer=void 0)):(g+="%"+this.buffer,this.buffer=void 0,--m):p[m]==="%"&&(m>d&&(g+=p.substring(d,m),d=m),this.buffer="",++d);return d<l&&this.buffer===void 0&&(g+=p.substring(d)),g},s.prototype.reset=function(){this.buffer=void 0},Decoder_1=s,Decoder_1}var urlencoded,hasRequiredUrlencoded;function requireUrlencoded(){if(hasRequiredUrlencoded)return urlencoded;hasRequiredUrlencoded=1;const e=requireDecoder$1(),t=requireDecodeText(),s=requireGetLimit(),p=/^charset$/i;g.detect=/^application\/x-www-form-urlencoded/i;function g(m,d){const l=d.limits,a=d.parsedConType;this.boy=m,this.fieldSizeLimit=s(l,"fieldSize",1048576),this.fieldNameSizeLimit=s(l,"fieldNameSize",100),this.fieldsLimit=s(l,"fields",1/0);let o;for(var h=0,v=a.length;h<v;++h)if(Array.isArray(a[h])&&p.test(a[h][0])){o=a[h][1].toLowerCase();break}o===void 0&&(o=d.defCharset||"utf8"),this.decoder=new e,this.charset=o,this._fields=0,this._state="key",this._checkingBytes=!0,this._bytesKey=0,this._bytesVal=0,this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._hitLimit=!1}return g.prototype.write=function(m,d){if(this._fields===this.fieldsLimit)return this.boy.hitFieldsLimit||(this.boy.hitFieldsLimit=!0,this.boy.emit("fieldsLimit")),d();let l,a,o,h=0;const v=m.length;for(;h<v;)if(this._state==="key"){for(l=a=void 0,o=h;o<v;++o){if(this._checkingBytes||++h,m[o]===61){l=o;break}else if(m[o]===38){a=o;break}if(this._checkingBytes&&this._bytesKey===this.fieldNameSizeLimit){this._hitLimit=!0;break}else this._checkingBytes&&++this._bytesKey}if(l!==void 0)l>h&&(this._key+=this.decoder.write(m.toString("binary",h,l))),this._state="val",this._hitLimit=!1,this._checkingBytes=!0,this._val="",this._bytesVal=0,this._valTrunc=!1,this.decoder.reset(),h=l+1;else if(a!==void 0){++this._fields;let _;const y=this._keyTrunc;if(a>h?_=this._key+=this.decoder.write(m.toString("binary",h,a)):_=this._key,this._hitLimit=!1,this._checkingBytes=!0,this._key="",this._bytesKey=0,this._keyTrunc=!1,this.decoder.reset(),_.length&&this.boy.emit("field",t(_,"binary",this.charset),"",y,!1),h=a+1,this._fields===this.fieldsLimit)return d()}else this._hitLimit?(o>h&&(this._key+=this.decoder.write(m.toString("binary",h,o))),h=o,(this._bytesKey=this._key.length)===this.fieldNameSizeLimit&&(this._checkingBytes=!1,this._keyTrunc=!0)):(h<v&&(this._key+=this.decoder.write(m.toString("binary",h))),h=v)}else{for(a=void 0,o=h;o<v;++o){if(this._checkingBytes||++h,m[o]===38){a=o;break}if(this._checkingBytes&&this._bytesVal===this.fieldSizeLimit){this._hitLimit=!0;break}else this._checkingBytes&&++this._bytesVal}if(a!==void 0){if(++this._fields,a>h&&(this._val+=this.decoder.write(m.toString("binary",h,a))),this.boy.emit("field",t(this._key,"binary",this.charset),t(this._val,"binary",this.charset),this._keyTrunc,this._valTrunc),this._state="key",this._hitLimit=!1,this._checkingBytes=!0,this._key="",this._bytesKey=0,this._keyTrunc=!1,this.decoder.reset(),h=a+1,this._fields===this.fieldsLimit)return d()}else this._hitLimit?(o>h&&(this._val+=this.decoder.write(m.toString("binary",h,o))),h=o,(this._val===""&&this.fieldSizeLimit===0||(this._bytesVal=this._val.length)===this.fieldSizeLimit)&&(this._checkingBytes=!1,this._valTrunc=!0)):(h<v&&(this._val+=this.decoder.write(m.toString("binary",h))),h=v)}d()},g.prototype.end=function(){this.boy._done||(this._state==="key"&&this._key.length>0?this.boy.emit("field",t(this._key,"binary",this.charset),"",this._keyTrunc,!1):this._state==="val"&&this.boy.emit("field",t(this._key,"binary",this.charset),t(this._val,"binary",this.charset),this._keyTrunc,this._valTrunc),this.boy._done=!0,this.boy.emit("finish"))},urlencoded=g,urlencoded}var hasRequiredMain;function requireMain(){if(hasRequiredMain)return main$1.exports;hasRequiredMain=1;const e=require$$1$3.Writable,{inherits:t}=require$$1$3,s=requireDicer(),p=requireMultipart(),g=requireUrlencoded(),m=requireParseParams();function d(l){if(!(this instanceof d))return new d(l);if(typeof l!="object")throw new TypeError("Busboy expected an options-Object.");if(typeof l.headers!="object")throw new TypeError("Busboy expected an options-Object with headers-attribute.");if(typeof l.headers["content-type"]!="string")throw new TypeError("Missing Content-Type-header.");const{headers:a,...o}=l;this.opts={autoDestroy:!1,...o},e.call(this,this.opts),this._done=!1,this._parser=this.getParserByHeaders(a),this._finished=!1}return t(d,e),d.prototype.emit=function(l){if(l==="finish"){if(this._done){if(this._finished)return}else{this._parser?.end();return}this._finished=!0}e.prototype.emit.apply(this,arguments)},d.prototype.getParserByHeaders=function(l){const a=m(l["content-type"]),o={defCharset:this.opts.defCharset,fileHwm:this.opts.fileHwm,headers:l,highWaterMark:this.opts.highWaterMark,isPartAFile:this.opts.isPartAFile,limits:this.opts.limits,parsedConType:a,preservePath:this.opts.preservePath};if(p.detect.test(a[0]))return new p(this,o);if(g.detect.test(a[0]))return new g(this,o);throw new Error("Unsupported Content-Type.")},d.prototype._write=function(l,a,o){this._parser.write(l,o)},main$1.exports=d,main$1.exports.default=d,main$1.exports.Busboy=d,main$1.exports.Dicer=s,main$1.exports}var hasRequiredApiRequest;function requireApiRequest(){if(hasRequiredApiRequest)return apiRequest;hasRequiredApiRequest=1;var e={};Object.defineProperty(apiRequest,"__esModule",{value:!0}),apiRequest.Http2SessionHandler=apiRequest.ExponentialBackoffPoller=apiRequest.ApiSettings=apiRequest.AuthorizedHttp2Client=apiRequest.AuthorizedHttpClient=apiRequest.Http2Client=apiRequest.HttpClient=apiRequest.RequestClient=apiRequest.RequestResponseError=void 0,apiRequest.defaultRetryConfig=y,apiRequest.parseHttpResponse=E;const t=requireError(),s=requireValidator$1(),p=require$$1$3,g=require$$1$3,m=require$$1$3,d=require$$1$3,l=require$$1$3,a=requireCredentialInternal(),o=requireUtils$2();class h{constructor(Y){this.status=Y.status,this.headers=Y.headers,this.text=Y.data;try{if(!Y.data)throw new t.FirebaseAppError(t.AppErrorCodes.INTERNAL_ERROR,"HTTP response missing data.");this.parsedData=JSON.parse(Y.data)}catch(te){this.parsedData=void 0,this.parseError=te}this.request=`${Y.config.method} ${Y.config.url}`}get data(){if(this.isJson())return this.parsedData;throw new t.FirebaseAppError(t.AppErrorCodes.UNABLE_TO_PARSE_RESPONSE,`Error while parsing response data: "${this.parseError.toString()}". Raw server response: "${this.text}". Status code: "${this.status}". Outgoing request: "${this.request}."`)}isJson(){return typeof this.parsedData<"u"}}class v{constructor(Y){this.status=Y.status,this.headers=Y.headers,this.multipart=Y.multipart}get text(){throw new t.FirebaseAppError(t.AppErrorCodes.UNABLE_TO_PARSE_RESPONSE,"Unable to parse multipart payload as text")}get data(){throw new t.FirebaseAppError(t.AppErrorCodes.UNABLE_TO_PARSE_RESPONSE,"Unable to parse multipart payload as JSON")}isJson(){return!1}}class _ extends Error{constructor(Y){super(`Server responded with status ${Y.status}.`),this.response=Y,Object.setPrototypeOf(this,_.prototype)}}apiRequest.RequestResponseError=_;function y(){return{maxRetries:4,statusCodes:[503],ioErrorCodes:["ECONNRESET","ETIMEDOUT"],backOffFactor:.5,maxDelayInMillis:6e4}}function w(Q){if(!s.isNumber(Q.maxRetries)||Q.maxRetries<0)throw new t.FirebaseAppError(t.AppErrorCodes.INVALID_ARGUMENT,"maxRetries must be a non-negative integer");if(typeof Q.backOffFactor<"u"&&(!s.isNumber(Q.backOffFactor)||Q.backOffFactor<0))throw new t.FirebaseAppError(t.AppErrorCodes.INVALID_ARGUMENT,"backOffFactor must be a non-negative number");if(!s.isNumber(Q.maxDelayInMillis)||Q.maxDelayInMillis<0)throw new t.FirebaseAppError(t.AppErrorCodes.INVALID_ARGUMENT,"maxDelayInMillis must be a non-negative integer");if(typeof Q.statusCodes<"u"&&!s.isArray(Q.statusCodes))throw new t.FirebaseAppError(t.AppErrorCodes.INVALID_ARGUMENT,"statusCodes must be an array");if(typeof Q.ioErrorCodes<"u"&&!s.isArray(Q.ioErrorCodes))throw new t.FirebaseAppError(t.AppErrorCodes.INVALID_ARGUMENT,"ioErrorCodes must be an array")}class T{constructor(Y=y()){Y&&(this.retry=Y,w(this.retry))}createRequestResponse(Y){return Y.multipart?new v(Y):new h(Y)}waitForRetry(Y){return Y>0?new Promise(te=>{setTimeout(te,Y)}):Promise.resolve()}getRetryDelayMillis(Y,te){if(!this.isRetryEligible(Y,te))return[0,!1];const ae=te.response;if(ae&&ae.headers["retry-after"]){const ue=this.parseRetryAfterIntoMillis(ae.headers["retry-after"]);if(ue>0)return[ue,!0]}return[this.backOffDelayMillis(Y),!0]}isRetryEligible(Y,te){return!this.retry||Y>=this.retry.maxRetries?!1:te.response?(this.retry.statusCodes||[]).indexOf(te.response.status)!==-1:te.code?(this.retry.ioErrorCodes||[]).indexOf(te.code)!==-1:!1}parseRetryAfterIntoMillis(Y){const te=parseInt(Y,10);if(!isNaN(te))return te*1e3;const ae=new Date(Y);return isNaN(ae.getTime())?-1:ae.getTime()-Date.now()}backOffDelayMillis(Y){if(Y===0)return 0;if(!this.retry)throw new t.FirebaseAppError(t.AppErrorCodes.INTERNAL_ERROR,"Expected this.retry to exist.");const te=this.retry.backOffFactor||0,ae=2**Y*te;return Math.min(ae*1e3,this.retry.maxDelayInMillis)}}apiRequest.RequestClient=T;class I extends T{constructor(Y){super(Y)}send(Y){return this.sendWithRetry(Y)}sendWithRetry(Y,te=0){return x.invoke(Y).then(ae=>this.createRequestResponse(ae)).catch(ae=>{const[ue,ee]=this.getRetryDelayMillis(te,ae);if(ee&&this.retry&&ue<=this.retry.maxDelayInMillis)return this.waitForRetry(ue).then(()=>this.sendWithRetry(Y,te+1));throw ae.response?new _(this.createRequestResponse(ae.response)):ae.code==="ETIMEDOUT"?new t.FirebaseAppError(t.AppErrorCodes.NETWORK_TIMEOUT,`Error while making request: ${ae.message}.`):new t.FirebaseAppError(t.AppErrorCodes.NETWORK_ERROR,`Error while making request: ${ae.message}. Error code: ${ae.code}`)})}}apiRequest.HttpClient=I;class O extends T{constructor(Y=y()){super(Y)}send(Y){return this.sendWithRetry(Y)}sendWithRetry(Y,te=0){return j.invoke(Y).then(ae=>this.createRequestResponse(ae)).catch(ae=>{const[ue,ee]=this.getRetryDelayMillis(te,ae);if(ee&&this.retry&&ue<=this.retry.maxDelayInMillis)return this.waitForRetry(ue).then(()=>this.sendWithRetry(Y,te+1));throw ae.response?new _(this.createRequestResponse(ae.response)):ae.code==="ETIMEDOUT"?new t.FirebaseAppError(t.AppErrorCodes.NETWORK_TIMEOUT,`Error while making request: ${ae.message}.`):new t.FirebaseAppError(t.AppErrorCodes.NETWORK_ERROR,`Error while making request: ${ae.message}. Error code: ${ae.code}`)})}}apiRequest.Http2Client=O;function E(Q,Y){const te=s.isBuffer(Q)?Q.toString("utf-8"):Q,ae=te.indexOf(`\r
\r
`),ue=te.substring(0,ae).split(`\r
`),oe=ue[0].trim().split(/\s/)[1],de={};ue.slice(1).forEach(fe=>{const Se=fe.indexOf(":"),be=fe.substring(0,Se).trim().toLowerCase(),Oe=fe.substring(Se+1).trim();de[be]=Oe});let he=te.substring(ae+4);he.endsWith(`
`)&&(he=he.slice(0,-1)),he.endsWith("\r")&&(he=he.slice(0,-1));const Ee={status:parseInt(oe,10),headers:de,data:he,config:Y,request:null};if(!s.isNumber(Ee.status))throw new t.FirebaseAppError(t.AppErrorCodes.INTERNAL_ERROR,"Malformed HTTP status line.");return new h(Ee)}class C{constructor(Y){this.configImpl=Y}getMultipartBoundary(Y){const te=Y["content-type"];if(!te||!te.startsWith("multipart/"))return null;const ae=te.split(";"),ue={};return ae.slice(1).map(oe=>oe.trim().split("=")).reduce((oe,de)=>{if(de.length===2){const he={};return he[de[0]]=de[1],Object.assign(oe,he)}return oe},ue).boundary}handleMultipartResponse(Y,te,ae){const ue=requireMain(),ee=new ue.Dicer({boundary:ae}),oe=[];ee.on("part",de=>{const he=[];de.on("data",Ee=>{he.push(Ee)}),de.on("end",()=>{oe.push(Buffer.concat(he))})}),ee.on("finish",()=>{Y.data=void 0,Y.multipart=oe,this.finalizeResponse(Y)}),te.pipe(ee)}handleRegularResponse(Y,te){const ae=[];te.on("data",ue=>{ae.push(ue)}),te.on("error",ue=>{const ee=Y.request;ee&&ee.destroyed||this.enhanceAndReject(ue,null,ee)}),te.on("end",()=>{Y.data=Buffer.concat(ae).toString(),this.finalizeResponse(Y)})}finalizeResponse(Y){Y.status>=200&&Y.status<300?this.resolve(Y):this.rejectWithError("Request failed with status code "+Y.status,null,Y.request,Y)}rejectWithError(Y,te,ae,ue){const ee=new Error(Y);this.enhanceAndReject(ee,te,ae,ue)}enhanceAndReject(Y,te,ae,ue){this.reject(this.enhanceError(Y,te,ae,ue))}enhanceError(Y,te,ae,ue){return Y.config=this.configImpl,te&&(Y.code=te),Y.request=ae,Y.response=ue,Y}}class x extends C{static invoke(Y){return new x(Y).promise}constructor(Y){const te=new k(Y);super(te);try{this.httpConfigImpl=te,this.options=this.httpConfigImpl.buildRequestOptions(),this.entity=this.httpConfigImpl.buildEntity(this.options.headers),this.promise=new Promise((ae,ue)=>{this.resolve=ae,this.reject=ue,this.execute()})}catch(ae){this.promise=Promise.reject(this.enhanceError(ae,null))}}execute(){const te=(this.options.protocol==="https:"?g:p).request(this.options,ee=>{this.handleResponse(ee,te)});te.on("error",ee=>{te.aborted||this.enhanceAndReject(ee,null,te)});const ae=this.httpConfigImpl.timeout,ue=()=>{te.destroy(),this.rejectWithError(`timeout of ${ae}ms exceeded`,"ETIMEDOUT",te)};ae&&te.setTimeout(ae,ue),te.end(this.entity)}handleResponse(Y,te){if(te.aborted)return;if(!Y.statusCode)throw new t.FirebaseAppError(t.AppErrorCodes.INTERNAL_ERROR,"Expected a statusCode on the response from a ClientRequest");const ae={status:Y.statusCode,headers:Y.headers,request:te,data:void 0,config:this.httpConfigImpl},ue=this.getMultipartBoundary(Y.headers),ee=this.uncompressResponse(Y);ue?this.handleMultipartResponse(ae,ee,ue):this.handleRegularResponse(ae,ee)}uncompressResponse(Y){let te=Y;const ae=["gzip","compress","deflate"];if(Y.headers["content-encoding"]&&ae.indexOf(Y.headers["content-encoding"])!==-1){const ue=require$$1$3;te=te.pipe(ue.createUnzip()),delete Y.headers["content-encoding"]}return te}}class j extends C{static invoke(Y){return new j(Y).promise}constructor(Y){const te=new q(Y);super(te);try{this.http2ConfigImpl=te,this.options=this.http2ConfigImpl.buildRequestOptions(),this.entity=this.http2ConfigImpl.buildEntity(this.options.headers),this.promise=new Promise((ae,ue)=>{this.resolve=ae,this.reject=ue,this.execute()})}catch(ae){this.promise=Promise.reject(this.enhanceError(ae,null))}}execute(){const Y=this.http2ConfigImpl.http2SessionHandler.session.request({":method":this.options.method,":scheme":this.options.protocol,":path":this.options.path,...this.options.headers});Y.on("response",ue=>{this.handleHttp2Response(ue,Y)}),Y.on("error",ue=>{Y.aborted||this.enhanceAndReject(ue,null,Y)});const te=this.http2ConfigImpl.timeout,ae=()=>{Y.destroy(),this.rejectWithError(`timeout of ${te}ms exceeded`,"ETIMEDOUT",Y)};te&&Y.setTimeout(te,ae),Y.end(this.entity)}handleHttp2Response(Y,te){if(te.aborted)return;if(!Y[":status"])throw new t.FirebaseAppError(t.AppErrorCodes.INTERNAL_ERROR,"Expected a statusCode on the response from a ClientRequest");const ae={status:Y[":status"],headers:Y,request:te,data:void 0,config:this.http2ConfigImpl},ue=this.getMultipartBoundary(Y),ee=this.uncompressResponse(Y,te);ue?this.handleMultipartResponse(ae,ee,ue):this.handleRegularResponse(ae,ee)}uncompressResponse(Y,te){let ae=te;const ue=["gzip","compress","deflate"];if(Y["content-encoding"]&&ue.indexOf(Y["content-encoding"])!==-1){const ee=require$$1$3;ae=ae.pipe(ee.createUnzip()),delete Y["content-encoding"]}return ae}}class D{constructor(Y){this.config=Y,this.config=Y}get method(){return this.config.method}get url(){return this.config.url}get headers(){return this.config.headers}get data(){return this.config.data}get timeout(){return this.config.timeout}buildEntity(Y){let te;if(!this.hasEntity()||!this.isEntityEnclosingRequest())return te;if(s.isBuffer(this.data))te=this.data;else if(s.isObject(this.data))te=Buffer.from(JSON.stringify(this.data),"utf-8"),typeof Y["content-type"]>"u"&&(Y["content-type"]="application/json;charset=utf-8");else if(s.isString(this.data))te=Buffer.from(this.data,"utf-8");else throw new Error("Request data must be a string, a Buffer or a json serializable object");return Y["Content-Length"]=te.length.toString(),te}buildUrl(){const Y=this.urlWithProtocol();if(!this.hasEntity()||this.isEntityEnclosingRequest())return d.parse(Y);if(!s.isObject(this.data))throw new Error(`${this.method} requests cannot have a body`);const te=new d.URL(Y),ae=this.data;for(const ue in ae)Object.prototype.hasOwnProperty.call(ae,ue)&&te.searchParams.append(ue,ae[ue]);return d.parse(te.toString())}urlWithProtocol(){const Y=this.url;return Y.startsWith("http://")||Y.startsWith("https://")?Y:`https://${Y}`}hasEntity(){return!!this.data}isEntityEnclosingRequest(){return this.method!=="GET"&&this.method!=="HEAD"}}class k extends D{constructor(Y){super(Y),this.httpConfig=Y}get httpAgent(){return this.httpConfig.httpAgent}buildRequestOptions(){const Y=this.buildUrl(),te=Y.protocol;let ae=Y.port;return ae||(ae=te==="https:"?"443":"80"),{protocol:te,hostname:Y.hostname,port:ae,path:Y.path,method:this.method,agent:this.httpAgent,headers:Object.assign({},this.headers)}}}class q extends D{constructor(Y){super(Y),this.http2Config=Y}get http2SessionHandler(){return this.http2Config.http2SessionHandler}buildRequestOptions(){const Y=this.buildUrl();return{protocol:Y.protocol,path:Y.path,method:this.method,headers:Object.assign({},this.headers)}}}class G extends I{constructor(Y){super(),this.app=Y}send(Y){return this.getToken().then(te=>{const ae=Object.assign({},Y);ae.headers=Object.assign({},Y.headers);const ue="Authorization";ae.headers[ue]=`Bearer ${te}`;let ee;return this.app.options.credential instanceof a.ApplicationDefaultCredential&&(ee=this.app.options.credential.getQuotaProjectId()),ee=e.GOOGLE_CLOUD_QUOTA_PROJECT||ee,!ae.headers["x-goog-user-project"]&&s.isNonEmptyString(ee)&&(ae.headers["x-goog-user-project"]=ee),!ae.httpAgent&&this.app.options.httpAgent&&(ae.httpAgent=this.app.options.httpAgent),ae.headers["X-Goog-Api-Client"]=(0,o.getMetricsHeader)(),super.send(ae)})}getToken(){return this.app.INTERNAL.getToken().then(Y=>Y.accessToken)}}apiRequest.AuthorizedHttpClient=G;class $ extends O{constructor(Y){super(),this.app=Y}send(Y){return this.getToken().then(te=>{const ae=Object.assign({},Y);ae.headers=Object.assign({},Y.headers);const ue="Authorization";ae.headers[ue]=`Bearer ${te}`;let ee;return this.app.options.credential instanceof a.ApplicationDefaultCredential&&(ee=this.app.options.credential.getQuotaProjectId()),ee=e.GOOGLE_CLOUD_QUOTA_PROJECT||ee,!ae.headers["x-goog-user-project"]&&s.isNonEmptyString(ee)&&(ae.headers["x-goog-user-project"]=ee),ae.headers["X-Goog-Api-Client"]=(0,o.getMetricsHeader)(),super.send(ae)})}getToken(){return this.app.INTERNAL.getToken().then(Y=>Y.accessToken)}}apiRequest.AuthorizedHttp2Client=$;class W{constructor(Y,te="POST"){this.endpoint=Y,this.httpMethod=te,this.setRequestValidator(null).setResponseValidator(null)}getEndpoint(){return this.endpoint}getHttpMethod(){return this.httpMethod}setRequestValidator(Y){const te=()=>{};return this.requestValidator=Y||te,this}getRequestValidator(){return this.requestValidator}setResponseValidator(Y){const te=()=>{};return this.responseValidator=Y||te,this}getResponseValidator(){return this.responseValidator}}apiRequest.ApiSettings=W;class K extends l.EventEmitter{constructor(Y=1e3,te=1e4,ae=6e4){super(),this.initialPollingDelayMillis=Y,this.maxPollingDelayMillis=te,this.masterTimeoutMillis=ae,this.numTries=0,this.completed=!1}poll(Y){if(this.pollCallback)throw new Error("poll() can only be called once per instance of ExponentialBackoffPoller");return this.pollCallback=Y,this.on("poll",this.repoll),this.masterTimer=setTimeout(()=>{this.completed||(this.markCompleted(),this.reject(new Error("ExponentialBackoffPoller deadline exceeded - Master timeout reached")))},this.masterTimeoutMillis),new Promise((te,ae)=>{this.resolve=te,this.reject=ae,this.repoll()})}repoll(){this.pollCallback().then(Y=>{if(!this.completed){if(!Y){this.repollTimer=setTimeout(()=>this.emit("poll"),this.getPollingDelayMillis()),this.numTries++;return}this.markCompleted(),this.resolve(Y)}}).catch(Y=>{this.completed||(this.markCompleted(),this.reject(Y))})}getPollingDelayMillis(){const Y=Math.pow(2,this.numTries)*this.initialPollingDelayMillis;return Math.min(Y,this.maxPollingDelayMillis)}markCompleted(){this.completed=!0,this.masterTimer&&clearTimeout(this.masterTimer),this.repollTimer&&clearTimeout(this.repollTimer)}}apiRequest.ExponentialBackoffPoller=K;class z{constructor(Y){this.promise=new Promise((te,ae)=>{this.resolve=te,this.reject=ae,this.http2Session=this.createSession(Y)})}createSession(Y){if(!this.http2Session||this.isClosed){const te={peerMaxConcurrentStreams:100,ALPNProtocols:["h2"]},ae=m.connect(Y,te);return ae.on("goaway",(ue,ee,oe)=>{this.reject(new t.FirebaseAppError(t.AppErrorCodes.NETWORK_ERROR,`Error while making requests: GOAWAY - ${oe?.toString()}, Error code: ${ue}`))}),ae.on("error",ue=>{let ee;ue.name=="AggregateError"&&ue.errors?ee=`Session error while making requests: ${ue.code} - ${ue.name}: [${ue.errors.map(oe=>oe.message).join(", ")}]`:ee=`Session error while making requests: ${ue.code} - ${ue.message} `,this.reject(new t.FirebaseAppError(t.AppErrorCodes.NETWORK_ERROR,ee))}),ae.on("close",()=>{this.resolve()}),ae}return this.http2Session}invoke(){return this.promise}get session(){return this.http2Session}get isClosed(){return this.http2Session.closed}close(){this.http2Session.close()}}return apiRequest.Http2SessionHandler=z,apiRequest}var userImportBuilder={},hasRequiredUserImportBuilder;function requireUserImportBuilder(){if(hasRequiredUserImportBuilder)return userImportBuilder;hasRequiredUserImportBuilder=1;Object.defineProperty(userImportBuilder,"__esModule",{value:!0}),userImportBuilder.UserImportBuilder=void 0,userImportBuilder.convertMultiFactorInfoToServerFormat=g;const e=requireDeepCopy(),t=requireUtils$2(),s=requireValidator$1(),p=requireError();function g(o){let h;if(typeof o.enrollmentTime<"u")if(s.isUTCDateString(o.enrollmentTime))h=new Date(o.enrollmentTime).toISOString();else throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_ENROLLMENT_TIME,`The second factor "enrollmentTime" for "${o.uid}" must be a valid UTC date string.`);if(m(o)){const v={mfaEnrollmentId:o.uid,displayName:o.displayName,phoneInfo:o.phoneNumber,enrolledAt:h};for(const _ in v)typeof v[_]>"u"&&delete v[_];return v}else throw new p.FirebaseAuthError(p.AuthClientErrorCode.UNSUPPORTED_SECOND_FACTOR,`Unsupported second factor "${JSON.stringify(o)}" provided.`)}function m(o){return o.factorId==="phone"}function d(o,h){return typeof o[h]<"u"&&o[h]!==null?parseInt(o[h].toString(),10):NaN}function l(o,h){const v={localId:o.uid,email:o.email,emailVerified:o.emailVerified,displayName:o.displayName,disabled:o.disabled,photoUrl:o.photoURL,phoneNumber:o.phoneNumber,providerUserInfo:[],mfaInfo:[],tenantId:o.tenantId,customAttributes:o.customClaims&&JSON.stringify(o.customClaims)};if(typeof o.passwordHash<"u"){if(!s.isBuffer(o.passwordHash))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_PASSWORD_HASH);v.passwordHash=t.toWebSafeBase64(o.passwordHash)}if(typeof o.passwordSalt<"u"){if(!s.isBuffer(o.passwordSalt))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_PASSWORD_SALT);v.salt=t.toWebSafeBase64(o.passwordSalt)}s.isNonNullObject(o.metadata)&&(s.isNonEmptyString(o.metadata.creationTime)&&(v.createdAt=new Date(o.metadata.creationTime).getTime()),s.isNonEmptyString(o.metadata.lastSignInTime)&&(v.lastLoginAt=new Date(o.metadata.lastSignInTime).getTime())),s.isArray(o.providerData)&&o.providerData.forEach(y=>{v.providerUserInfo.push({providerId:y.providerId,rawId:y.uid,email:y.email,displayName:y.displayName,photoUrl:y.photoURL})}),s.isNonNullObject(o.multiFactor)&&s.isNonEmptyArray(o.multiFactor.enrolledFactors)&&o.multiFactor.enrolledFactors.forEach(y=>{v.mfaInfo.push(g(y))});let _;for(_ in v)typeof v[_]>"u"&&delete v[_];return v.providerUserInfo.length===0&&delete v.providerUserInfo,v.mfaInfo.length===0&&delete v.mfaInfo,typeof h=="function"&&h(v),v}class a{constructor(h,v,_){this.requiresHashOptions=!1,this.validatedUsers=[],this.userImportResultErrors=[],this.indexMap={},this.validatedUsers=this.populateUsers(h,_),this.validatedOptions=this.populateOptions(v,this.requiresHashOptions)}buildRequest(){const h=this.validatedUsers.map(v=>(0,e.deepCopy)(v));return(0,e.deepExtend)({users:h},(0,e.deepCopy)(this.validatedOptions))}buildResponse(h){const v={successCount:this.validatedUsers.length,failureCount:this.userImportResultErrors.length,errors:(0,e.deepCopy)(this.userImportResultErrors)};return v.failureCount+=h.length,v.successCount-=h.length,h.forEach(_=>{v.errors.push({index:this.indexMap[_.index],error:new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_USER_IMPORT,_.message)})}),v.errors.sort((_,y)=>_.index-y.index),v}populateOptions(h,v){let _;if(!v)return{};if(!s.isNonNullObject(h))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_ARGUMENT,'"UserImportOptions" are required when importing users with passwords.');if(!s.isNonNullObject(h.hash))throw new p.FirebaseAuthError(p.AuthClientErrorCode.MISSING_HASH_ALGORITHM,'"hash.algorithm" is missing from the provided "UserImportOptions".');if(typeof h.hash.algorithm>"u"||!s.isNonEmptyString(h.hash.algorithm))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_HASH_ALGORITHM,'"hash.algorithm" must be a string matching the list of supported algorithms.');let y;switch(h.hash.algorithm){case"HMAC_SHA512":case"HMAC_SHA256":case"HMAC_SHA1":case"HMAC_MD5":if(!s.isBuffer(h.hash.key))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_HASH_KEY,`A non-empty "hash.key" byte buffer must be provided for hash algorithm ${h.hash.algorithm}.`);_={hashAlgorithm:h.hash.algorithm,signerKey:t.toWebSafeBase64(h.hash.key)};break;case"MD5":case"SHA1":case"SHA256":case"SHA512":{y=d(h.hash,"rounds");const w=h.hash.algorithm==="MD5"?0:1;if(isNaN(y)||y<w||y>8192)throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_HASH_ROUNDS,`A valid "hash.rounds" number between ${w} and 8192 must be provided for hash algorithm ${h.hash.algorithm}.`);_={hashAlgorithm:h.hash.algorithm,rounds:y};break}case"PBKDF_SHA1":case"PBKDF2_SHA256":if(y=d(h.hash,"rounds"),isNaN(y)||y<0||y>12e4)throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_HASH_ROUNDS,`A valid "hash.rounds" number between 0 and 120000 must be provided for hash algorithm ${h.hash.algorithm}.`);_={hashAlgorithm:h.hash.algorithm,rounds:y};break;case"SCRYPT":{if(!s.isBuffer(h.hash.key))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_HASH_KEY,`A "hash.key" byte buffer must be provided for hash algorithm ${h.hash.algorithm}.`);if(y=d(h.hash,"rounds"),isNaN(y)||y<=0||y>8)throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_HASH_ROUNDS,`A valid "hash.rounds" number between 1 and 8 must be provided for hash algorithm ${h.hash.algorithm}.`);const w=d(h.hash,"memoryCost");if(isNaN(w)||w<=0||w>14)throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_HASH_MEMORY_COST,`A valid "hash.memoryCost" number between 1 and 14 must be provided for hash algorithm ${h.hash.algorithm}.`);if(typeof h.hash.saltSeparator<"u"&&!s.isBuffer(h.hash.saltSeparator))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_HASH_SALT_SEPARATOR,'"hash.saltSeparator" must be a byte buffer.');_={hashAlgorithm:h.hash.algorithm,signerKey:t.toWebSafeBase64(h.hash.key),rounds:y,memoryCost:w,saltSeparator:t.toWebSafeBase64(h.hash.saltSeparator||Buffer.from(""))};break}case"BCRYPT":_={hashAlgorithm:h.hash.algorithm};break;case"STANDARD_SCRYPT":{const w=d(h.hash,"memoryCost");if(isNaN(w))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_HASH_MEMORY_COST,`A valid "hash.memoryCost" number must be provided for hash algorithm ${h.hash.algorithm}.`);const T=d(h.hash,"parallelization");if(isNaN(T))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_HASH_PARALLELIZATION,`A valid "hash.parallelization" number must be provided for hash algorithm ${h.hash.algorithm}.`);const I=d(h.hash,"blockSize");if(isNaN(I))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_HASH_BLOCK_SIZE,`A valid "hash.blockSize" number must be provided for hash algorithm ${h.hash.algorithm}.`);const O=d(h.hash,"derivedKeyLength");if(isNaN(O))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_HASH_DERIVED_KEY_LENGTH,`A valid "hash.derivedKeyLength" number must be provided for hash algorithm ${h.hash.algorithm}.`);_={hashAlgorithm:h.hash.algorithm,cpuMemCost:w,parallelization:T,blockSize:I,dkLen:O};break}default:throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_HASH_ALGORITHM,`Unsupported hash algorithm provider "${h.hash.algorithm}".`)}return _}populateUsers(h,v){const _=[];return h.forEach((y,w)=>{try{const T=l(y,v);typeof T.passwordHash<"u"&&(this.requiresHashOptions=!0),_.push(T),this.indexMap[_.length-1]=w}catch(T){this.userImportResultErrors.push({index:w,error:T})}}),_}}return userImportBuilder.UserImportBuilder=a,userImportBuilder}var actionCodeSettingsBuilder={};var hasRequiredActionCodeSettingsBuilder;function requireActionCodeSettingsBuilder(){if(hasRequiredActionCodeSettingsBuilder)return actionCodeSettingsBuilder;hasRequiredActionCodeSettingsBuilder=1;Object.defineProperty(actionCodeSettingsBuilder,"__esModule",{value:!0}),actionCodeSettingsBuilder.ActionCodeSettingsBuilder=void 0;const e=requireValidator$1(),t=requireError();class s{constructor(g){if(!e.isNonNullObject(g))throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings" must be a non-null object.');if(typeof g.url>"u")throw new t.FirebaseAuthError(t.AuthClientErrorCode.MISSING_CONTINUE_URI);if(!e.isURL(g.url))throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_CONTINUE_URI);if(this.continueUrl=g.url,typeof g.handleCodeInApp<"u"&&!e.isBoolean(g.handleCodeInApp))throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings.handleCodeInApp" must be a boolean.');if(this.canHandleCodeInApp=g.handleCodeInApp||!1,typeof g.dynamicLinkDomain<"u"&&!e.isNonEmptyString(g.dynamicLinkDomain))throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_DYNAMIC_LINK_DOMAIN);if(this.dynamicLinkDomain=g.dynamicLinkDomain,typeof g.linkDomain<"u"&&!e.isNonEmptyString(g.linkDomain))throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_HOSTING_LINK_DOMAIN);if(this.linkDomain=g.linkDomain,typeof g.iOS<"u"){if(e.isNonNullObject(g.iOS)){if(typeof g.iOS.bundleId>"u")throw new t.FirebaseAuthError(t.AuthClientErrorCode.MISSING_IOS_BUNDLE_ID);if(!e.isNonEmptyString(g.iOS.bundleId))throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings.iOS.bundleId" must be a valid non-empty string.')}else throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings.iOS" must be a valid non-null object.');this.ibi=g.iOS.bundleId}if(typeof g.android<"u"){if(e.isNonNullObject(g.android)){if(typeof g.android.packageName>"u")throw new t.FirebaseAuthError(t.AuthClientErrorCode.MISSING_ANDROID_PACKAGE_NAME);if(e.isNonEmptyString(g.android.packageName)){if(typeof g.android.minimumVersion<"u"&&!e.isNonEmptyString(g.android.minimumVersion))throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings.android.minimumVersion" must be a valid non-empty string.');if(typeof g.android.installApp<"u"&&!e.isBoolean(g.android.installApp))throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings.android.installApp" must be a valid boolean.')}else throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings.android.packageName" must be a valid non-empty string.')}else throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings.android" must be a valid non-null object.');this.apn=g.android.packageName,this.amv=g.android.minimumVersion,this.installApp=g.android.installApp||!1}}buildRequest(){const g={continueUrl:this.continueUrl,canHandleCodeInApp:this.canHandleCodeInApp,dynamicLinkDomain:this.dynamicLinkDomain,linkDomain:this.linkDomain,androidPackageName:this.apn,androidMinimumVersion:this.amv,androidInstallApp:this.installApp,iOSBundleId:this.ibi};for(const m in g)Object.prototype.hasOwnProperty.call(g,m)&&(typeof g[m]>"u"||g[m]===null)&&delete g[m];return g}}return actionCodeSettingsBuilder.ActionCodeSettingsBuilder=s,actionCodeSettingsBuilder}var tenant={},authConfig={};var hasRequiredAuthConfig;function requireAuthConfig(){return hasRequiredAuthConfig||(hasRequiredAuthConfig=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EmailPrivacyAuthConfig=e.PasswordPolicyAuthConfig=e.MobileLinksAuthConfig=e.RecaptchaAuthConfig=e.SmsRegionsAuthConfig=e.OIDCConfig=e.SAMLConfig=e.EmailSignInConfig=e.MultiFactorAuthConfig=e.MAXIMUM_TEST_PHONE_NUMBERS=void 0,e.validateTestPhoneNumbers=l;const t=requireValidator$1(),s=requireDeepCopy(),p=requireError();e.MAXIMUM_TEST_PHONE_NUMBERS=10;const g={phone:"PHONE_SMS"},m=Object.keys(g).reduce((I,O)=>(I[g[O]]=O,I),{});class d{static buildServerRequest(O){const E={};return d.validate(O),Object.prototype.hasOwnProperty.call(O,"state")&&(E.state=O.state),Object.prototype.hasOwnProperty.call(O,"factorIds")&&((O.factorIds||[]).forEach(C=>{typeof E.enabledProviders>"u"&&(E.enabledProviders=[]),E.enabledProviders.push(g[C])}),O.factorIds&&O.factorIds.length===0&&(E.enabledProviders=[])),Object.prototype.hasOwnProperty.call(O,"providerConfigs")&&(E.providerConfigs=O.providerConfigs),E}static validate(O){const E={state:!0,factorIds:!0,providerConfigs:!0};if(!t.isNonNullObject(O))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"MultiFactorConfig" must be a non-null object.');for(const C in O)if(!(C in E))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,`"${C}" is not a valid MultiFactorConfig parameter.`);if(typeof O.state<"u"&&O.state!=="ENABLED"&&O.state!=="DISABLED")throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"MultiFactorConfig.state" must be either "ENABLED" or "DISABLED".');if(typeof O.factorIds<"u"){if(!t.isArray(O.factorIds))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"MultiFactorConfig.factorIds" must be an array of valid "AuthFactorTypes".');O.factorIds.forEach(C=>{if(typeof g[C]>"u")throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,`"${C}" is not a valid "AuthFactorType".`)})}if(typeof O.providerConfigs<"u"){if(!t.isArray(O.providerConfigs))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"MultiFactorConfig.providerConfigs" must be an array of valid "MultiFactorProviderConfig."');O.providerConfigs.forEach(C=>{if(typeof C>"u"||!t.isObject(C))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,`"${C}" is not a valid "MultiFactorProviderConfig" type.`);const x={state:!0,totpProviderConfig:!0};for(const k in C)if(!(k in x))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,`"${k}" is not a valid ProviderConfig parameter.`);if(typeof C.state>"u"||C.state!=="ENABLED"&&C.state!=="DISABLED")throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"MultiFactorConfig.providerConfigs.state" must be either "ENABLED" or "DISABLED".');if(typeof C.totpProviderConfig>"u")throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"MultiFactorConfig.providerConfigs.totpProviderConfig" must be defined.');const j={adjacentIntervals:!0};for(const k in C.totpProviderConfig)if(!(k in j))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,`"${k}" is not a valid TotpProviderConfig parameter.`);const D=C.totpProviderConfig.adjacentIntervals;if(typeof D<"u"&&(!Number.isInteger(D)||D<0||D>10))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_ARGUMENT,'"MultiFactorConfig.providerConfigs.totpProviderConfig.adjacentIntervals" must be a valid number between 0 and 10 (both inclusive).')})}}constructor(O){if(typeof O.state>"u")throw new p.FirebaseAuthError(p.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid multi-factor configuration response");this.state=O.state,this.factorIds=[],(O.enabledProviders||[]).forEach(E=>{typeof m[E]<"u"&&this.factorIds.push(m[E])}),this.providerConfigs=[],(O.providerConfigs||[]).forEach(E=>{if(typeof E<"u"){if(typeof E.state>"u"||typeof E.totpProviderConfig>"u"||typeof E.totpProviderConfig.adjacentIntervals<"u"&&typeof E.totpProviderConfig.adjacentIntervals!="number")throw new p.FirebaseAuthError(p.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid multi-factor configuration response");this.providerConfigs.push(E)}})}toJSON(){return{state:this.state,factorIds:this.factorIds,providerConfigs:this.providerConfigs}}}e.MultiFactorAuthConfig=d;function l(I){if(!t.isObject(I))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_ARGUMENT,'"testPhoneNumbers" must be a map of phone number / code pairs.');if(Object.keys(I).length>e.MAXIMUM_TEST_PHONE_NUMBERS)throw new p.FirebaseAuthError(p.AuthClientErrorCode.MAXIMUM_TEST_PHONE_NUMBER_EXCEEDED);for(const O in I){if(!t.isPhoneNumber(O))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_TESTING_PHONE_NUMBER,`"${O}" is not a valid E.164 standard compliant phone number.`);if(!t.isString(I[O])||!/^[\d]{6}$/.test(I[O]))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_TESTING_PHONE_NUMBER,`"${I[O]}" is not a valid 6 digit code string.`)}}class a{static buildServerRequest(O){const E={};return a.validate(O),Object.prototype.hasOwnProperty.call(O,"enabled")&&(E.allowPasswordSignup=O.enabled),Object.prototype.hasOwnProperty.call(O,"passwordRequired")&&(E.enableEmailLinkSignin=!O.passwordRequired),E}static validate(O){const E={enabled:!0,passwordRequired:!0};if(!t.isNonNullObject(O))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_ARGUMENT,'"EmailSignInConfig" must be a non-null object.');for(const C in O)if(!(C in E))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_ARGUMENT,`"${C}" is not a valid EmailSignInConfig parameter.`);if(typeof O.enabled<"u"&&!t.isBoolean(O.enabled))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_ARGUMENT,'"EmailSignInConfig.enabled" must be a boolean.');if(typeof O.passwordRequired<"u"&&!t.isBoolean(O.passwordRequired))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_ARGUMENT,'"EmailSignInConfig.passwordRequired" must be a boolean.')}constructor(O){if(typeof O.allowPasswordSignup>"u")throw new p.FirebaseAuthError(p.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid email sign-in configuration response");this.enabled=O.allowPasswordSignup,this.passwordRequired=!O.enableEmailLinkSignin}toJSON(){return{enabled:this.enabled,passwordRequired:this.passwordRequired}}}e.EmailSignInConfig=a;class o{static buildServerRequest(O,E=!1){if(!(t.isNonNullObject(O)&&(O.providerId||E)))return null;const x={};if(o.validate(O,E),x.enabled=O.enabled,x.displayName=O.displayName,(O.idpEntityId||O.ssoURL||O.x509Certificates)&&(x.idpConfig={idpEntityId:O.idpEntityId,ssoUrl:O.ssoURL,signRequest:O.enableRequestSigning,idpCertificates:typeof O.x509Certificates>"u"?void 0:[]},O.x509Certificates))for(const j of O.x509Certificates||[])x.idpConfig.idpCertificates.push({x509Certificate:j});return(O.callbackURL||O.rpEntityId)&&(x.spConfig={spEntityId:O.rpEntityId,callbackUri:O.callbackURL}),x}static getProviderIdFromResourceName(O){const E=O.match(/\/inboundSamlConfigs\/(saml\..*)$/);return!E||E.length<2?null:E[1]}static isProviderId(O){return t.isNonEmptyString(O)&&O.indexOf("saml.")===0}static validate(O,E=!1){const C={enabled:!0,displayName:!0,providerId:!0,idpEntityId:!0,ssoURL:!0,x509Certificates:!0,rpEntityId:!0,callbackURL:!0,enableRequestSigning:!0};if(!t.isNonNullObject(O))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig" must be a valid non-null object.');for(const x in O)if(!(x in C))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,`"${x}" is not a valid SAML config parameter.`);if(t.isNonEmptyString(O.providerId)){if(O.providerId.indexOf("saml.")!==0)throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_PROVIDER_ID,'"SAMLAuthProviderConfig.providerId" must be a valid non-empty string prefixed with "saml.".')}else if(!E)throw new p.FirebaseAuthError(O.providerId?p.AuthClientErrorCode.INVALID_PROVIDER_ID:p.AuthClientErrorCode.MISSING_PROVIDER_ID,'"SAMLAuthProviderConfig.providerId" must be a valid non-empty string prefixed with "saml.".');if(!(E&&typeof O.idpEntityId>"u")&&!t.isNonEmptyString(O.idpEntityId))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.idpEntityId" must be a valid non-empty string.');if(!(E&&typeof O.ssoURL>"u")&&!t.isURL(O.ssoURL))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.ssoURL" must be a valid URL string.');if(!(E&&typeof O.rpEntityId>"u")&&!t.isNonEmptyString(O.rpEntityId))throw new p.FirebaseAuthError(O.rpEntityId?p.AuthClientErrorCode.INVALID_CONFIG:p.AuthClientErrorCode.MISSING_SAML_RELYING_PARTY_CONFIG,'"SAMLAuthProviderConfig.rpEntityId" must be a valid non-empty string.');if(!(E&&typeof O.callbackURL>"u")&&!t.isURL(O.callbackURL))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.callbackURL" must be a valid URL string.');if(!(E&&typeof O.x509Certificates>"u")&&!t.isArray(O.x509Certificates))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.x509Certificates" must be a valid array of X509 certificate strings.');if((O.x509Certificates||[]).forEach(x=>{if(!t.isNonEmptyString(x))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.x509Certificates" must be a valid array of X509 certificate strings.')}),typeof O.enableRequestSigning<"u"&&!t.isBoolean(O.enableRequestSigning))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.enableRequestSigning" must be a boolean.');if(typeof O.enabled<"u"&&!t.isBoolean(O.enabled))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.enabled" must be a boolean.');if(typeof O.displayName<"u"&&!t.isString(O.displayName))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.displayName" must be a valid string.')}constructor(O){if(!O||!O.idpConfig||!O.idpConfig.idpEntityId||!O.idpConfig.ssoUrl||!O.spConfig||!O.spConfig.spEntityId||!O.name||!(t.isString(O.name)&&o.getProviderIdFromResourceName(O.name)))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid SAML configuration response");const E=o.getProviderIdFromResourceName(O.name);if(!E)throw new p.FirebaseAuthError(p.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid SAML configuration response");this.providerId=E,this.rpEntityId=O.spConfig.spEntityId,this.callbackURL=O.spConfig.callbackUri,this.idpEntityId=O.idpConfig.idpEntityId,this.ssoURL=O.idpConfig.ssoUrl,this.enableRequestSigning=!!O.idpConfig.signRequest;const C=[];for(const x of O.idpConfig.idpCertificates||[])x.x509Certificate&&C.push(x.x509Certificate);this.x509Certificates=C,this.enabled=!!O.enabled,this.displayName=O.displayName}toJSON(){return{enabled:this.enabled,displayName:this.displayName,providerId:this.providerId,idpEntityId:this.idpEntityId,ssoURL:this.ssoURL,x509Certificates:(0,s.deepCopy)(this.x509Certificates),rpEntityId:this.rpEntityId,callbackURL:this.callbackURL,enableRequestSigning:this.enableRequestSigning}}}e.SAMLConfig=o;class h{static buildServerRequest(O,E=!1){if(!(t.isNonNullObject(O)&&(O.providerId||E)))return null;const x={};return h.validate(O,E),x.enabled=O.enabled,x.displayName=O.displayName,x.issuer=O.issuer,x.clientId=O.clientId,typeof O.clientSecret<"u"&&(x.clientSecret=O.clientSecret),typeof O.responseType<"u"&&(x.responseType=O.responseType),x}static getProviderIdFromResourceName(O){const E=O.match(/\/oauthIdpConfigs\/(oidc\..*)$/);return!E||E.length<2?null:E[1]}static isProviderId(O){return t.isNonEmptyString(O)&&O.indexOf("oidc.")===0}static validate(O,E=!1){const C={enabled:!0,displayName:!0,providerId:!0,clientId:!0,issuer:!0,clientSecret:!0,responseType:!0},x={idToken:!0,code:!0};if(!t.isNonNullObject(O))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"OIDCAuthProviderConfig" must be a valid non-null object.');for(const j in O)if(!(j in C))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,`"${j}" is not a valid OIDC config parameter.`);if(t.isNonEmptyString(O.providerId)){if(O.providerId.indexOf("oidc.")!==0)throw new p.FirebaseAuthError(O.providerId?p.AuthClientErrorCode.INVALID_PROVIDER_ID:p.AuthClientErrorCode.MISSING_PROVIDER_ID,'"OIDCAuthProviderConfig.providerId" must be a valid non-empty string prefixed with "oidc.".')}else if(!E)throw new p.FirebaseAuthError(O.providerId?p.AuthClientErrorCode.INVALID_PROVIDER_ID:p.AuthClientErrorCode.MISSING_PROVIDER_ID,'"OIDCAuthProviderConfig.providerId" must be a valid non-empty string prefixed with "oidc.".');if(!(E&&typeof O.clientId>"u")&&!t.isNonEmptyString(O.clientId))throw new p.FirebaseAuthError(O.clientId?p.AuthClientErrorCode.INVALID_OAUTH_CLIENT_ID:p.AuthClientErrorCode.MISSING_OAUTH_CLIENT_ID,'"OIDCAuthProviderConfig.clientId" must be a valid non-empty string.');if(!(E&&typeof O.issuer>"u")&&!t.isURL(O.issuer))throw new p.FirebaseAuthError(O.issuer?p.AuthClientErrorCode.INVALID_CONFIG:p.AuthClientErrorCode.MISSING_ISSUER,'"OIDCAuthProviderConfig.issuer" must be a valid URL string.');if(typeof O.enabled<"u"&&!t.isBoolean(O.enabled))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"OIDCAuthProviderConfig.enabled" must be a boolean.');if(typeof O.displayName<"u"&&!t.isString(O.displayName))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"OIDCAuthProviderConfig.displayName" must be a valid string.');if(typeof O.clientSecret<"u"&&!t.isNonEmptyString(O.clientSecret))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"OIDCAuthProviderConfig.clientSecret" must be a valid string.');if(t.isNonNullObject(O.responseType)&&typeof O.responseType<"u"){Object.keys(O.responseType).forEach(G=>{if(!(G in x))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,`"${G}" is not a valid OAuthResponseType parameter.`)});const j=O.responseType.idToken;if(typeof j<"u"&&!t.isBoolean(j))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_ARGUMENT,'"OIDCAuthProviderConfig.responseType.idToken" must be a boolean.');const D=O.responseType.code;if(typeof D<"u"){if(!t.isBoolean(D))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_ARGUMENT,'"OIDCAuthProviderConfig.responseType.code" must be a boolean.');if(D&&typeof O.clientSecret>"u")throw new p.FirebaseAuthError(p.AuthClientErrorCode.MISSING_OAUTH_CLIENT_SECRET,"The OAuth configuration client secret is required to enable OIDC code flow.")}const k=Object.keys(O.responseType).length,q=Object.values(O.responseType).filter(Boolean).length;if(k>1&&q!==1)throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_OAUTH_RESPONSETYPE,"Only exactly one OAuth responseType should be set to true.")}}constructor(O){if(!O||!O.issuer||!O.clientId||!O.name||!(t.isString(O.name)&&h.getProviderIdFromResourceName(O.name)))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid OIDC configuration response");const E=h.getProviderIdFromResourceName(O.name);if(!E)throw new p.FirebaseAuthError(p.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid SAML configuration response");this.providerId=E,this.clientId=O.clientId,this.issuer=O.issuer,this.enabled=!!O.enabled,this.displayName=O.displayName,typeof O.clientSecret<"u"&&(this.clientSecret=O.clientSecret),typeof O.responseType<"u"&&(this.responseType=O.responseType)}toJSON(){return{enabled:this.enabled,displayName:this.displayName,providerId:this.providerId,issuer:this.issuer,clientId:this.clientId,clientSecret:(0,s.deepCopy)(this.clientSecret),responseType:(0,s.deepCopy)(this.responseType)}}}e.OIDCConfig=h;class v{static validate(O){if(!t.isNonNullObject(O))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"SmsRegionConfig" must be a non-null object.');const E={allowlistOnly:!0,allowByDefault:!0};for(const C in O)if(!(C in E))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,`"${C}" is not a valid SmsRegionConfig parameter.`);if(typeof O.allowByDefault<"u"&&typeof O.allowlistOnly<"u")throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'SmsRegionConfig cannot have both "allowByDefault" and "allowlistOnly" parameters.');if(typeof O.allowByDefault<"u"){const C={disallowedRegions:!0};for(const x in O.allowByDefault)if(!(x in C))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,`"${x}" is not a valid SmsRegionConfig.allowByDefault parameter.`);if(typeof O.allowByDefault.disallowedRegions<"u"&&!t.isArray(O.allowByDefault.disallowedRegions))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"SmsRegionConfig.allowByDefault.disallowedRegions" must be a valid string array.')}if(typeof O.allowlistOnly<"u"){const C={allowedRegions:!0};for(const x in O.allowlistOnly)if(!(x in C))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,`"${x}" is not a valid SmsRegionConfig.allowlistOnly parameter.`);if(typeof O.allowlistOnly.allowedRegions<"u"&&!t.isArray(O.allowlistOnly.allowedRegions))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"SmsRegionConfig.allowlistOnly.allowedRegions" must be a valid string array.')}}}e.SmsRegionsAuthConfig=v;class _{constructor(O){const E=Object.fromEntries(Object.entries(O).filter(([,C])=>C!==void 0));E.tollFraudManagedRules!==void 0&&(this.smsTollFraudManagedRules=E.tollFraudManagedRules,delete E.tollFraudManagedRules),Object.assign(this,E)}static buildServerRequest(O){_.validate(O);const E={};return typeof O.emailPasswordEnforcementState<"u"&&(E.emailPasswordEnforcementState=O.emailPasswordEnforcementState),typeof O.phoneEnforcementState<"u"&&(E.phoneEnforcementState=O.phoneEnforcementState),typeof O.managedRules<"u"&&(E.managedRules=O.managedRules),typeof O.recaptchaKeys<"u"&&(E.recaptchaKeys=O.recaptchaKeys),typeof O.useAccountDefender<"u"&&(E.useAccountDefender=O.useAccountDefender),typeof O.useSmsBotScore<"u"&&(E.useSmsBotScore=O.useSmsBotScore),typeof O.useSmsTollFraudProtection<"u"&&(E.useSmsTollFraudProtection=O.useSmsTollFraudProtection),typeof O.smsTollFraudManagedRules<"u"&&(E.tollFraudManagedRules=O.smsTollFraudManagedRules),E}static validate(O){const E={emailPasswordEnforcementState:!0,phoneEnforcementState:!0,managedRules:!0,recaptchaKeys:!0,useAccountDefender:!0,useSmsBotScore:!0,useSmsTollFraudProtection:!0,smsTollFraudManagedRules:!0};if(!t.isNonNullObject(O))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig" must be a non-null object.');for(const C in O)if(!(C in E))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,`"${C}" is not a valid RecaptchaConfig parameter.`);if(typeof O.emailPasswordEnforcementState<"u"){if(!t.isNonEmptyString(O.emailPasswordEnforcementState))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_ARGUMENT,'"RecaptchaConfig.emailPasswordEnforcementState" must be a valid non-empty string.');if(O.emailPasswordEnforcementState!=="OFF"&&O.emailPasswordEnforcementState!=="AUDIT"&&O.emailPasswordEnforcementState!=="ENFORCE")throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig.emailPasswordEnforcementState" must be either "OFF", "AUDIT" or "ENFORCE".')}if(typeof O.phoneEnforcementState<"u"){if(!t.isNonEmptyString(O.phoneEnforcementState))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_ARGUMENT,'"RecaptchaConfig.phoneEnforcementState" must be a valid non-empty string.');if(O.phoneEnforcementState!=="OFF"&&O.phoneEnforcementState!=="AUDIT"&&O.phoneEnforcementState!=="ENFORCE")throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig.phoneEnforcementState" must be either "OFF", "AUDIT" or "ENFORCE".')}if(typeof O.managedRules<"u"){if(!t.isArray(O.managedRules))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig.managedRules" must be an array of valid "RecaptchaManagedRule".');O.managedRules.forEach(C=>{_.validateManagedRule(C)})}if(typeof O.useAccountDefender<"u"&&!t.isBoolean(O.useAccountDefender))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig.useAccountDefender" must be a boolean value".');if(typeof O.useSmsBotScore<"u"&&!t.isBoolean(O.useSmsBotScore))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig.useSmsBotScore" must be a boolean value".');if(typeof O.useSmsTollFraudProtection<"u"&&!t.isBoolean(O.useSmsTollFraudProtection))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig.useSmsTollFraudProtection" must be a boolean value".');if(typeof O.smsTollFraudManagedRules<"u"){if(!t.isArray(O.smsTollFraudManagedRules))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig.smsTollFraudManagedRules" must be an array of valid "RecaptchaTollFraudManagedRule".');O.smsTollFraudManagedRules.forEach(C=>{_.validateTollFraudManagedRule(C)})}}static validateManagedRule(O){const E={endScore:!0,action:!0};if(!t.isNonNullObject(O))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaManagedRule" must be a non-null object.');for(const C in O)if(!(C in E))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,`"${C}" is not a valid RecaptchaManagedRule parameter.`);if(typeof O.action<"u"&&O.action!=="BLOCK")throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaManagedRule.action" must be "BLOCK".')}static validateTollFraudManagedRule(O){const E={startScore:!0,action:!0};if(!t.isNonNullObject(O))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaTollFraudManagedRule" must be a non-null object.');for(const C in O)if(!(C in E))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,`"${C}" is not a valid RecaptchaTollFraudManagedRule parameter.`);if(typeof O.action<"u"&&O.action!=="BLOCK")throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaTollFraudManagedRule.action" must be "BLOCK".')}}e.RecaptchaAuthConfig=_;class y{static validate(O){if(!t.isNonNullObject(O))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"MobileLinksConfig" must be a non-null object.');const E={domain:!0};for(const C in O)if(!(C in E))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,`"${C}" is not a valid "MobileLinksConfig" parameter.`);if(typeof O.domain<"u"&&O.domain!=="HOSTING_DOMAIN"&&O.domain!=="FIREBASE_DYNAMIC_LINK_DOMAIN")throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"MobileLinksConfig.domain" must be either "HOSTING_DOMAIN" or "FIREBASE_DYNAMIC_LINK_DOMAIN".')}}e.MobileLinksAuthConfig=y;class w{static buildServerRequest(O){const E={};w.validate(O),Object.prototype.hasOwnProperty.call(O,"enforcementState")&&(E.passwordPolicyEnforcementState=O.enforcementState),E.forceUpgradeOnSignin=!1,Object.prototype.hasOwnProperty.call(O,"forceUpgradeOnSignin")&&(E.forceUpgradeOnSignin=O.forceUpgradeOnSignin);const C={containsUppercaseCharacter:!1,containsLowercaseCharacter:!1,containsNonAlphanumericCharacter:!1,containsNumericCharacter:!1,minPasswordLength:6,maxPasswordLength:4096};return E.passwordPolicyVersions=[],Object.prototype.hasOwnProperty.call(O,"constraints")&&O&&(O.constraints?.requireUppercase!==void 0&&(C.containsUppercaseCharacter=O.constraints.requireUppercase),O.constraints?.requireLowercase!==void 0&&(C.containsLowercaseCharacter=O.constraints.requireLowercase),O.constraints?.requireNonAlphanumeric!==void 0&&(C.containsNonAlphanumericCharacter=O.constraints.requireNonAlphanumeric),O.constraints?.requireNumeric!==void 0&&(C.containsNumericCharacter=O.constraints.requireNumeric),O.constraints?.minLength!==void 0&&(C.minPasswordLength=O.constraints.minLength),O.constraints?.maxLength!==void 0&&(C.maxPasswordLength=O.constraints.maxLength)),E.passwordPolicyVersions.push({customStrengthOptions:C}),E}static validate(O){const E={enforcementState:!0,forceUpgradeOnSignin:!0,constraints:!0};if(!t.isNonNullObject(O))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig" must be a non-null object.');for(const C in O)if(!(C in E))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,`"${C}" is not a valid PasswordPolicyConfig parameter.`);if(typeof O.enforcementState>"u"||!(O.enforcementState==="ENFORCE"||O.enforcementState==="OFF"))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.enforcementState" must be either "ENFORCE" or "OFF".');if(typeof O.forceUpgradeOnSignin<"u"&&!t.isBoolean(O.forceUpgradeOnSignin))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.forceUpgradeOnSignin" must be a boolean.');if(typeof O.constraints<"u"){if(O.enforcementState==="ENFORCE"&&!t.isNonNullObject(O.constraints))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints" must be a non-empty object.');const C={requireUppercase:!0,requireLowercase:!0,requireNumeric:!0,requireNonAlphanumeric:!0,minLength:!0,maxLength:!0};for(const x in O.constraints)if(!(x in C))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,`"${x}" is not a valid PasswordPolicyConfig.constraints parameter.`);if(typeof O.constraints.requireUppercase<"u"&&!t.isBoolean(O.constraints.requireUppercase))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.requireUppercase" must be a boolean.');if(typeof O.constraints.requireLowercase<"u"&&!t.isBoolean(O.constraints.requireLowercase))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.requireLowercase" must be a boolean.');if(typeof O.constraints.requireNonAlphanumeric<"u"&&!t.isBoolean(O.constraints.requireNonAlphanumeric))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.requireNonAlphanumeric" must be a boolean.');if(typeof O.constraints.requireNumeric<"u"&&!t.isBoolean(O.constraints.requireNumeric))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.requireNumeric" must be a boolean.');if(typeof O.constraints.minLength>"u")O.constraints.minLength=6;else if(t.isNumber(O.constraints.minLength)){if(!(O.constraints.minLength>=6&&O.constraints.minLength<=30))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.minLength" must be an integer between 6 and 30, inclusive.')}else throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.minLength" must be a number.');if(typeof O.constraints.maxLength>"u")O.constraints.maxLength=4096;else if(t.isNumber(O.constraints.maxLength)){if(!(O.constraints.maxLength>=O.constraints.minLength&&O.constraints.maxLength<=4096))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.maxLength" must be greater than or equal to minLength and at max 4096.')}else throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.maxLength" must be a number.')}else if(O.enforcementState==="ENFORCE")throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints" must be defined.')}constructor(O){if(typeof O.passwordPolicyEnforcementState>"u")throw new p.FirebaseAuthError(p.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid password policy configuration response");this.enforcementState=O.passwordPolicyEnforcementState;let E={};typeof O.passwordPolicyVersions<"u"&&(O.passwordPolicyVersions||[]).forEach(C=>{E={requireLowercase:C.customStrengthOptions?.containsLowercaseCharacter,requireUppercase:C.customStrengthOptions?.containsUppercaseCharacter,requireNonAlphanumeric:C.customStrengthOptions?.containsNonAlphanumericCharacter,requireNumeric:C.customStrengthOptions?.containsNumericCharacter,minLength:C.customStrengthOptions?.minPasswordLength,maxLength:C.customStrengthOptions?.maxPasswordLength}}),this.constraints=E,this.forceUpgradeOnSignin=!!O.forceUpgradeOnSignin}}e.PasswordPolicyAuthConfig=w;class T{static validate(O){if(!t.isNonNullObject(O))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"EmailPrivacyConfig" must be a non-null object.');const E={enableImprovedEmailPrivacy:!0};for(const C in O)if(!(C in E))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,`"${C}" is not a valid "EmailPrivacyConfig" parameter.`);if(typeof O.enableImprovedEmailPrivacy<"u"&&!t.isBoolean(O.enableImprovedEmailPrivacy))throw new p.FirebaseAuthError(p.AuthClientErrorCode.INVALID_CONFIG,'"EmailPrivacyConfig.enableImprovedEmailPrivacy" must be a valid boolean value.')}}e.EmailPrivacyAuthConfig=T})(authConfig)),authConfig}var hasRequiredTenant;function requireTenant(){if(hasRequiredTenant)return tenant;hasRequiredTenant=1;Object.defineProperty(tenant,"__esModule",{value:!0}),tenant.Tenant=void 0;const e=requireValidator$1(),t=requireDeepCopy(),s=requireError(),p=requireAuthConfig();class g{static buildServerRequest(d,l){g.validate(d,l);let a={};return typeof d.emailSignInConfig<"u"&&(a=p.EmailSignInConfig.buildServerRequest(d.emailSignInConfig)),typeof d.displayName<"u"&&(a.displayName=d.displayName),typeof d.anonymousSignInEnabled<"u"&&(a.enableAnonymousUser=d.anonymousSignInEnabled),typeof d.multiFactorConfig<"u"&&(a.mfaConfig=p.MultiFactorAuthConfig.buildServerRequest(d.multiFactorConfig)),typeof d.testPhoneNumbers<"u"&&(a.testPhoneNumbers=d.testPhoneNumbers??{}),typeof d.smsRegionConfig<"u"&&(a.smsRegionConfig=d.smsRegionConfig),typeof d.recaptchaConfig<"u"&&(a.recaptchaConfig=p.RecaptchaAuthConfig.buildServerRequest(d.recaptchaConfig)),typeof d.passwordPolicyConfig<"u"&&(a.passwordPolicyConfig=p.PasswordPolicyAuthConfig.buildServerRequest(d.passwordPolicyConfig)),typeof d.emailPrivacyConfig<"u"&&(a.emailPrivacyConfig=d.emailPrivacyConfig),a}static getTenantIdFromResourceName(d){const l=d.match(/\/tenants\/(.*)$/);return!l||l.length<2?null:l[1]}static validate(d,l){const a={displayName:!0,emailSignInConfig:!0,anonymousSignInEnabled:!0,multiFactorConfig:!0,testPhoneNumbers:!0,smsRegionConfig:!0,recaptchaConfig:!0,passwordPolicyConfig:!0,emailPrivacyConfig:!0},o=l?"CreateTenantRequest":"UpdateTenantRequest";if(!e.isNonNullObject(d))throw new s.FirebaseAuthError(s.AuthClientErrorCode.INVALID_ARGUMENT,`"${o}" must be a valid non-null object.`);for(const h in d)if(!(h in a))throw new s.FirebaseAuthError(s.AuthClientErrorCode.INVALID_ARGUMENT,`"${h}" is not a valid ${o} parameter.`);if(typeof d.displayName<"u"&&!e.isNonEmptyString(d.displayName))throw new s.FirebaseAuthError(s.AuthClientErrorCode.INVALID_ARGUMENT,`"${o}.displayName" must be a valid non-empty string.`);if(typeof d.emailSignInConfig<"u"&&p.EmailSignInConfig.buildServerRequest(d.emailSignInConfig),typeof d.testPhoneNumbers<"u"&&d.testPhoneNumbers!==null)(0,p.validateTestPhoneNumbers)(d.testPhoneNumbers);else if(d.testPhoneNumbers===null&&l)throw new s.FirebaseAuthError(s.AuthClientErrorCode.INVALID_ARGUMENT,`"${o}.testPhoneNumbers" must be a non-null object.`);typeof d.multiFactorConfig<"u"&&p.MultiFactorAuthConfig.buildServerRequest(d.multiFactorConfig),typeof d.smsRegionConfig<"u"&&p.SmsRegionsAuthConfig.validate(d.smsRegionConfig),typeof d.recaptchaConfig<"u"&&p.RecaptchaAuthConfig.buildServerRequest(d.recaptchaConfig),typeof d.passwordPolicyConfig<"u"&&p.PasswordPolicyAuthConfig.buildServerRequest(d.passwordPolicyConfig),typeof d.emailPrivacyConfig<"u"&&p.EmailPrivacyAuthConfig.validate(d.emailPrivacyConfig)}constructor(d){const l=g.getTenantIdFromResourceName(d.name);if(!l)throw new s.FirebaseAuthError(s.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid tenant response");this.tenantId=l,this.displayName=d.displayName;try{this.emailSignInConfig_=new p.EmailSignInConfig(d)}catch{this.emailSignInConfig_=new p.EmailSignInConfig({allowPasswordSignup:!1})}this.anonymousSignInEnabled=!!d.enableAnonymousUser,typeof d.mfaConfig<"u"&&(this.multiFactorConfig_=new p.MultiFactorAuthConfig(d.mfaConfig)),typeof d.testPhoneNumbers<"u"&&(this.testPhoneNumbers=(0,t.deepCopy)(d.testPhoneNumbers||{})),typeof d.smsRegionConfig<"u"&&(this.smsRegionConfig=(0,t.deepCopy)(d.smsRegionConfig)),typeof d.recaptchaConfig<"u"&&(this.recaptchaConfig_=new p.RecaptchaAuthConfig(d.recaptchaConfig)),typeof d.passwordPolicyConfig<"u"&&(this.passwordPolicyConfig=new p.PasswordPolicyAuthConfig(d.passwordPolicyConfig)),typeof d.emailPrivacyConfig<"u"&&(this.emailPrivacyConfig=(0,t.deepCopy)(d.emailPrivacyConfig))}get emailSignInConfig(){return this.emailSignInConfig_}get multiFactorConfig(){return this.multiFactorConfig_}get recaptchaConfig(){return this.recaptchaConfig_}toJSON(){const d={tenantId:this.tenantId,displayName:this.displayName,emailSignInConfig:this.emailSignInConfig_?.toJSON(),multiFactorConfig:this.multiFactorConfig_?.toJSON(),anonymousSignInEnabled:this.anonymousSignInEnabled,testPhoneNumbers:this.testPhoneNumbers,smsRegionConfig:(0,t.deepCopy)(this.smsRegionConfig),recaptchaConfig:(0,t.deepCopy)(this.recaptchaConfig),passwordPolicyConfig:(0,t.deepCopy)(this.passwordPolicyConfig),emailPrivacyConfig:(0,t.deepCopy)(this.emailPrivacyConfig)};return typeof d.multiFactorConfig>"u"&&delete d.multiFactorConfig,typeof d.testPhoneNumbers>"u"&&delete d.testPhoneNumbers,typeof d.smsRegionConfig>"u"&&delete d.smsRegionConfig,typeof d.recaptchaConfig>"u"&&delete d.recaptchaConfig,typeof d.passwordPolicyConfig>"u"&&delete d.passwordPolicyConfig,typeof d.emailPrivacyConfig>"u"&&delete d.emailPrivacyConfig,d}}return tenant.Tenant=g,tenant}var identifier={};var hasRequiredIdentifier;function requireIdentifier(){if(hasRequiredIdentifier)return identifier;hasRequiredIdentifier=1;Object.defineProperty(identifier,"__esModule",{value:!0}),identifier.isUidIdentifier=e,identifier.isEmailIdentifier=t,identifier.isPhoneIdentifier=s,identifier.isProviderIdentifier=p;function e(g){return g.uid!==void 0}function t(g){return g.email!==void 0}function s(g){return g.phoneNumber!==void 0}function p(g){const m=g;return m.providerId!==void 0&&m.providerUid!==void 0}return identifier}var projectConfig={};var hasRequiredProjectConfig;function requireProjectConfig(){if(hasRequiredProjectConfig)return projectConfig;hasRequiredProjectConfig=1,Object.defineProperty(projectConfig,"__esModule",{value:!0}),projectConfig.ProjectConfig=void 0;const e=requireValidator$1(),t=requireError(),s=requireAuthConfig(),p=requireDeepCopy();class g{get multiFactorConfig(){return this.multiFactorConfig_}get recaptchaConfig(){return this.recaptchaConfig_}static validate(d){if(!e.isNonNullObject(d))throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,'"UpdateProjectConfigRequest" must be a valid non-null object.');const l={smsRegionConfig:!0,multiFactorConfig:!0,recaptchaConfig:!0,passwordPolicyConfig:!0,emailPrivacyConfig:!0,mobileLinksConfig:!0};for(const a in d)if(!(a in l))throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,`"${a}" is not a valid UpdateProjectConfigRequest parameter.`);typeof d.smsRegionConfig<"u"&&s.SmsRegionsAuthConfig.validate(d.smsRegionConfig),typeof d.multiFactorConfig<"u"&&s.MultiFactorAuthConfig.validate(d.multiFactorConfig),typeof d.recaptchaConfig<"u"&&s.RecaptchaAuthConfig.validate(d.recaptchaConfig),typeof d.passwordPolicyConfig<"u"&&s.PasswordPolicyAuthConfig.validate(d.passwordPolicyConfig),typeof d.emailPrivacyConfig<"u"&&s.EmailPrivacyAuthConfig.validate(d.emailPrivacyConfig),typeof d.mobileLinksConfig<"u"&&s.MobileLinksAuthConfig.validate(d.mobileLinksConfig)}static buildServerRequest(d){g.validate(d);const l={};return typeof d.smsRegionConfig<"u"&&(l.smsRegionConfig=d.smsRegionConfig),typeof d.multiFactorConfig<"u"&&(l.mfa=s.MultiFactorAuthConfig.buildServerRequest(d.multiFactorConfig)),typeof d.recaptchaConfig<"u"&&(l.recaptchaConfig=s.RecaptchaAuthConfig.buildServerRequest(d.recaptchaConfig)),typeof d.passwordPolicyConfig<"u"&&(l.passwordPolicyConfig=s.PasswordPolicyAuthConfig.buildServerRequest(d.passwordPolicyConfig)),typeof d.emailPrivacyConfig<"u"&&(l.emailPrivacyConfig=d.emailPrivacyConfig),typeof d.mobileLinksConfig<"u"&&(l.mobileLinksConfig=d.mobileLinksConfig),l}constructor(d){typeof d.smsRegionConfig<"u"&&(this.smsRegionConfig=d.smsRegionConfig),typeof d.mfa<"u"&&(this.multiFactorConfig_=new s.MultiFactorAuthConfig(d.mfa)),typeof d.recaptchaConfig<"u"&&(this.recaptchaConfig_=new s.RecaptchaAuthConfig(d.recaptchaConfig)),typeof d.passwordPolicyConfig<"u"&&(this.passwordPolicyConfig=new s.PasswordPolicyAuthConfig(d.passwordPolicyConfig)),typeof d.emailPrivacyConfig<"u"&&(this.emailPrivacyConfig=d.emailPrivacyConfig),typeof d.mobileLinksConfig<"u"&&(this.mobileLinksConfig=d.mobileLinksConfig)}toJSON(){const d={smsRegionConfig:(0,p.deepCopy)(this.smsRegionConfig),multiFactorConfig:(0,p.deepCopy)(this.multiFactorConfig),recaptchaConfig:(0,p.deepCopy)(this.recaptchaConfig),passwordPolicyConfig:(0,p.deepCopy)(this.passwordPolicyConfig),emailPrivacyConfig:(0,p.deepCopy)(this.emailPrivacyConfig),mobileLinksConfig:(0,p.deepCopy)(this.mobileLinksConfig)};return typeof d.smsRegionConfig>"u"&&delete d.smsRegionConfig,typeof d.multiFactorConfig>"u"&&delete d.multiFactorConfig,typeof d.recaptchaConfig>"u"&&delete d.recaptchaConfig,typeof d.passwordPolicyConfig>"u"&&delete d.passwordPolicyConfig,typeof d.emailPrivacyConfig>"u"&&delete d.emailPrivacyConfig,typeof d.mobileLinksConfig>"u"&&delete d.mobileLinksConfig,d}}return projectConfig.ProjectConfig=g,projectConfig}var hasRequiredAuthApiRequest;function requireAuthApiRequest(){return hasRequiredAuthApiRequest||(hasRequiredAuthApiRequest=1,(function(e){var t={};Object.defineProperty(e,"__esModule",{value:!0}),e.TenantAwareAuthRequestHandler=e.AuthRequestHandler=e.AbstractAuthRequestHandler=e.FIREBASE_AUTH_SIGN_UP_NEW_USER=e.FIREBASE_AUTH_SET_ACCOUNT_INFO=e.FIREBASE_AUTH_BATCH_DELETE_ACCOUNTS=e.FIREBASE_AUTH_DELETE_ACCOUNT=e.FIREBASE_AUTH_GET_ACCOUNTS_INFO=e.FIREBASE_AUTH_GET_ACCOUNT_INFO=e.FIREBASE_AUTH_DOWNLOAD_ACCOUNT=e.FIREBASE_AUTH_UPLOAD_ACCOUNT=e.FIREBASE_AUTH_CREATE_SESSION_COOKIE=e.EMAIL_ACTION_REQUEST_TYPES=e.RESERVED_CLAIMS=void 0,e.useEmulator=L;const s=requireValidator$1(),p=requireDeepCopy(),g=requireError(),m=requireApiRequest(),d=requireUtils$2(),l=requireUserImportBuilder(),a=requireActionCodeSettingsBuilder(),o=requireTenant(),h=requireIdentifier(),v=requireAuthConfig(),_=requireProjectConfig(),y={"X-Client-Version":`Node/Admin/${d.getSdkVersion()}`},w=25e3;e.RESERVED_CLAIMS=["acr","amr","at_hash","aud","auth_time","azp","cnf","c_hash","exp","iat","iss","jti","nbf","nonce","sub","firebase"],e.EMAIL_ACTION_REQUEST_TYPES=["PASSWORD_RESET","VERIFY_EMAIL","EMAIL_SIGNIN","VERIFY_AND_CHANGE_EMAIL"];const T=1e3,I=1e3,O=1e3,E=100,C=1e3,x=300,j=336*60*60,D=100,k="https://identitytoolkit.googleapis.com/{version}/projects/{projectId}{api}",q="http://{host}/identitytoolkit.googleapis.com/{version}/projects/{projectId}{api}",G=k.replace("projects/{projectId}","projects/{projectId}/tenants/{tenantId}"),$=q.replace("projects/{projectId}","projects/{projectId}/tenants/{tenantId}"),W=1e3;var K;(function(U){U.Create="create",U.Update="update",U.Upload="upload"})(K||(K={}));class z{constructor(X,me="v1"){this.app=X,this.version=me,L()?this.urlFormat=d.formatString(q,{host:n()}):this.urlFormat=k}getUrl(X,me){return this.getProjectId().then(Ie=>{const Le={version:this.version,projectId:Ie,api:X||""},ke=d.formatString(this.urlFormat,Le);return d.formatString(ke,me||{})})}getProjectId(){return this.projectId?Promise.resolve(this.projectId):d.findProjectId(this.app).then(X=>{if(!s.isNonEmptyString(X))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_CREDENTIAL,"Failed to determine project ID for Auth. Initialize the SDK with service account credentials or set project ID as an app option. Alternatively set the GOOGLE_CLOUD_PROJECT environment variable.");return this.projectId=X,X})}}class Q extends z{constructor(X,me,Ie){super(X,me),this.app=X,this.version=me,this.tenantId=Ie,L()?this.urlFormat=d.formatString($,{host:n()}):this.urlFormat=G}getUrl(X,me){return super.getUrl(X,me).then(Ie=>d.formatString(Ie,{tenantId:this.tenantId}))}}class Y extends m.AuthorizedHttpClient{getToken(){return L()?Promise.resolve("owner"):super.getToken()}}function te(U){const X={mfaEnrollmentId:!0,displayName:!0,phoneInfo:!0,enrolledAt:!0};for(const Ie in U)Ie in X||delete U[Ie];const me=U.mfaEnrollmentId||U.phoneInfo||JSON.stringify(U);if(typeof U.mfaEnrollmentId<"u"&&!s.isNonEmptyString(U.mfaEnrollmentId))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_UID,'The second factor "uid" must be a valid non-empty string.');if(typeof U.displayName<"u"&&!s.isString(U.displayName))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_DISPLAY_NAME,`The second factor "displayName" for "${me}" must be a valid string.`);if(typeof U.enrolledAt<"u"&&!s.isISODateString(U.enrolledAt))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ENROLLMENT_TIME,`The second factor "enrollmentTime" for "${me}" must be a valid UTC date string.`);if(typeof U.phoneInfo<"u"){if(!s.isPhoneNumber(U.phoneInfo))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PHONE_NUMBER,`The second factor "phoneNumber" for "${me}" must be a non-empty E.164 standard compliant identifier string.`)}else throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ENROLLED_FACTORS,"MFAInfo object provided is invalid.")}function ae(U){const X={rawId:!0,providerId:!0,email:!0,displayName:!0,photoUrl:!0};for(const me in U)me in X||delete U[me];if(!s.isNonEmptyString(U.providerId))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PROVIDER_ID);if(typeof U.displayName<"u"&&typeof U.displayName!="string")throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_DISPLAY_NAME,`The provider "displayName" for "${U.providerId}" must be a valid string.`);if(!s.isNonEmptyString(U.rawId))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_UID,`The provider "uid" for "${U.providerId}" must be a valid non-empty string.`);if(typeof U.email<"u"&&!s.isEmail(U.email))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_EMAIL,`The provider "email" for "${U.providerId}" must be a valid email string.`);if(typeof U.photoUrl<"u"&&!s.isURL(U.photoUrl))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PHOTO_URL,`The provider "photoURL" for "${U.providerId}" must be a valid URL string.`)}function ue(U,X){const me=X===K.Upload,Ie={displayName:!0,localId:!0,email:!0,password:!0,rawPassword:!0,emailVerified:!0,photoUrl:!0,disabled:!0,disableUser:!0,deleteAttribute:!0,deleteProvider:!0,sanityCheck:!0,phoneNumber:!0,customAttributes:!0,validSince:!0,linkProviderUserInfo:!me,tenantId:me,passwordHash:me,salt:me,createdAt:me,lastLoginAt:me,providerUserInfo:me,mfaInfo:me,mfa:!me};for(const ke in U)ke in Ie||delete U[ke];if(typeof U.tenantId<"u"&&!s.isNonEmptyString(U.tenantId))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_TENANT_ID);if(typeof U.displayName<"u"&&!s.isString(U.displayName))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_DISPLAY_NAME);if((typeof U.localId<"u"||me)&&!s.isUid(U.localId))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_UID);if(typeof U.email<"u"&&!s.isEmail(U.email))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_EMAIL);if(typeof U.phoneNumber<"u"&&!s.isPhoneNumber(U.phoneNumber))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PHONE_NUMBER);if(typeof U.password<"u"&&!s.isPassword(U.password))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PASSWORD);if(typeof U.rawPassword<"u"&&!s.isPassword(U.rawPassword))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PASSWORD);if(typeof U.emailVerified<"u"&&typeof U.emailVerified!="boolean")throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_EMAIL_VERIFIED);if(typeof U.photoUrl<"u"&&!s.isURL(U.photoUrl))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PHOTO_URL);if(typeof U.disabled<"u"&&typeof U.disabled!="boolean")throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_DISABLED_FIELD);if(typeof U.validSince<"u"&&!s.isNumber(U.validSince))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_TOKENS_VALID_AFTER_TIME);if(typeof U.createdAt<"u"&&!s.isNumber(U.createdAt))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_CREATION_TIME);if(typeof U.lastLoginAt<"u"&&!s.isNumber(U.lastLoginAt))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_LAST_SIGN_IN_TIME);if(typeof U.disableUser<"u"&&typeof U.disableUser!="boolean")throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_DISABLED_FIELD);if(typeof U.customAttributes<"u"){let ke;try{ke=JSON.parse(U.customAttributes)}catch(nt){throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_CLAIMS,nt.message)}const ze=[];if(e.RESERVED_CLAIMS.forEach(nt=>{Object.prototype.hasOwnProperty.call(ke,nt)&&ze.push(nt)}),ze.length>0)throw new g.FirebaseAuthError(g.AuthClientErrorCode.FORBIDDEN_CLAIM,ze.length>1?`Developer claims "${ze.join('", "')}" are reserved and cannot be specified.`:`Developer claim "${ze[0]}" is reserved and cannot be specified.`);if(U.customAttributes.length>T)throw new g.FirebaseAuthError(g.AuthClientErrorCode.CLAIMS_TOO_LARGE,`Developer claims payload should not exceed ${T} characters.`)}if(typeof U.passwordHash<"u"&&!s.isString(U.passwordHash))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PASSWORD_HASH);if(typeof U.salt<"u"&&!s.isString(U.salt))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PASSWORD_SALT);if(typeof U.providerUserInfo<"u"&&!s.isArray(U.providerUserInfo))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PROVIDER_DATA);s.isArray(U.providerUserInfo)&&U.providerUserInfo.forEach(ke=>{ae(ke)}),typeof U.linkProviderUserInfo<"u"&&ae(U.linkProviderUserInfo);let Le=null;if(U.mfaInfo?Le=U.mfaInfo:U.mfa&&U.mfa.enrollments&&(Le=U.mfa.enrollments),Le){if(!s.isArray(Le))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ENROLLED_FACTORS);Le.forEach(ke=>{te(ke)})}}e.FIREBASE_AUTH_CREATE_SESSION_COOKIE=new m.ApiSettings(":createSessionCookie","POST").setRequestValidator(U=>{if(!s.isNonEmptyString(U.idToken))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ID_TOKEN);if(!s.isNumber(U.validDuration)||U.validDuration<x||U.validDuration>j)throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_SESSION_COOKIE_DURATION)}).setResponseValidator(U=>{if(!s.isNonEmptyString(U.sessionCookie))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR)}),e.FIREBASE_AUTH_UPLOAD_ACCOUNT=new m.ApiSettings("/accounts:batchCreate","POST"),e.FIREBASE_AUTH_DOWNLOAD_ACCOUNT=new m.ApiSettings("/accounts:batchGet","GET").setRequestValidator(U=>{if(typeof U.nextPageToken<"u"&&!s.isNonEmptyString(U.nextPageToken))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PAGE_TOKEN);if(!s.isNumber(U.maxResults)||U.maxResults<=0||U.maxResults>I)throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ARGUMENT,`Required "maxResults" must be a positive integer that does not exceed ${I}.`)}),e.FIREBASE_AUTH_GET_ACCOUNT_INFO=new m.ApiSettings("/accounts:lookup","POST").setRequestValidator(U=>{if(!U.localId&&!U.email&&!U.phoneNumber&&!U.federatedUserId)throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server request is missing user identifier")}).setResponseValidator(U=>{if(!U.users||!U.users.length)throw new g.FirebaseAuthError(g.AuthClientErrorCode.USER_NOT_FOUND)}),e.FIREBASE_AUTH_GET_ACCOUNTS_INFO=new m.ApiSettings("/accounts:lookup","POST").setRequestValidator(U=>{if(!U.localId&&!U.email&&!U.phoneNumber&&!U.federatedUserId)throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server request is missing user identifier")}),e.FIREBASE_AUTH_DELETE_ACCOUNT=new m.ApiSettings("/accounts:delete","POST").setRequestValidator(U=>{if(!U.localId)throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server request is missing user identifier")}),e.FIREBASE_AUTH_BATCH_DELETE_ACCOUNTS=new m.ApiSettings("/accounts:batchDelete","POST").setRequestValidator(U=>{if(!U.localIds)throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server request is missing user identifiers");if(typeof U.force>"u"||U.force!==!0)throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server request is missing force=true field")}).setResponseValidator(U=>{(U.errors||[]).forEach(me=>{if(typeof me.index>"u")throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server BatchDeleteAccountResponse is missing an errors.index field");if(!me.localId)throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server BatchDeleteAccountResponse is missing an errors.localId field")})}),e.FIREBASE_AUTH_SET_ACCOUNT_INFO=new m.ApiSettings("/accounts:update","POST").setRequestValidator(U=>{if(typeof U.localId>"u")throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server request is missing user identifier");if(typeof U.tenantId<"u")throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ARGUMENT,'"tenantId" is an invalid "UpdateRequest" property.');ue(U,K.Update)}).setResponseValidator(U=>{if(!U.localId)throw new g.FirebaseAuthError(g.AuthClientErrorCode.USER_NOT_FOUND)}),e.FIREBASE_AUTH_SIGN_UP_NEW_USER=new m.ApiSettings("/accounts","POST").setRequestValidator(U=>{if(typeof U.customAttributes<"u")throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ARGUMENT,'"customAttributes" cannot be set when creating a new user.');if(typeof U.validSince<"u")throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ARGUMENT,'"validSince" cannot be set when creating a new user.');if(typeof U.tenantId<"u")throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ARGUMENT,'"tenantId" is an invalid "CreateRequest" property.');ue(U,K.Create)}).setResponseValidator(U=>{if(!U.localId)throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to create new user")});const ee=new m.ApiSettings("/accounts:sendOobCode","POST").setRequestValidator(U=>{if(!s.isEmail(U.email))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_EMAIL);if(typeof U.newEmail<"u"&&!s.isEmail(U.newEmail))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_NEW_EMAIL);if(e.EMAIL_ACTION_REQUEST_TYPES.indexOf(U.requestType)===-1)throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ARGUMENT,`"${U.requestType}" is not a supported email action request type.`)}).setResponseValidator(U=>{if(!U.oobLink)throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to create the email action link")}),oe=new m.ApiSettings("/oauthIdpConfigs/{providerId}","GET").setResponseValidator(U=>{if(!s.isNonEmptyString(U.name))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to get OIDC configuration")}),de=new m.ApiSettings("/oauthIdpConfigs/{providerId}","DELETE"),he=new m.ApiSettings("/oauthIdpConfigs?oauthIdpConfigId={providerId}","POST").setResponseValidator(U=>{if(!s.isNonEmptyString(U.name))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to create new OIDC configuration")}),Ee=new m.ApiSettings("/oauthIdpConfigs/{providerId}?updateMask={updateMask}","PATCH").setResponseValidator(U=>{if(!s.isNonEmptyString(U.name))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to update OIDC configuration")}),fe=new m.ApiSettings("/oauthIdpConfigs","GET").setRequestValidator(U=>{if(typeof U.pageToken<"u"&&!s.isNonEmptyString(U.pageToken))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PAGE_TOKEN);if(!s.isNumber(U.pageSize)||U.pageSize<=0||U.pageSize>D)throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ARGUMENT,`Required "maxResults" must be a positive integer that does not exceed ${D}.`)}),Se=new m.ApiSettings("/inboundSamlConfigs/{providerId}","GET").setResponseValidator(U=>{if(!s.isNonEmptyString(U.name))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to get SAML configuration")}),be=new m.ApiSettings("/inboundSamlConfigs/{providerId}","DELETE"),Oe=new m.ApiSettings("/inboundSamlConfigs?inboundSamlConfigId={providerId}","POST").setResponseValidator(U=>{if(!s.isNonEmptyString(U.name))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to create new SAML configuration")}),ge=new m.ApiSettings("/inboundSamlConfigs/{providerId}?updateMask={updateMask}","PATCH").setResponseValidator(U=>{if(!s.isNonEmptyString(U.name))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to update SAML configuration")}),J=new m.ApiSettings("/inboundSamlConfigs","GET").setRequestValidator(U=>{if(typeof U.pageToken<"u"&&!s.isNonEmptyString(U.pageToken))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PAGE_TOKEN);if(!s.isNumber(U.pageSize)||U.pageSize<=0||U.pageSize>D)throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ARGUMENT,`Required "maxResults" must be a positive integer that does not exceed ${D}.`)});class c{static getErrorCode(X){return s.isNonNullObject(X)&&X.error&&X.error.message||null}static addUidToRequest(X,me){if(!s.isUid(X.uid))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_UID);return me.localId?me.localId.push(X.uid):me.localId=[X.uid],me}static addEmailToRequest(X,me){if(!s.isEmail(X.email))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_EMAIL);return me.email?me.email.push(X.email):me.email=[X.email],me}static addPhoneToRequest(X,me){if(!s.isPhoneNumber(X.phoneNumber))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PHONE_NUMBER);return me.phoneNumber?me.phoneNumber.push(X.phoneNumber):me.phoneNumber=[X.phoneNumber],me}static addProviderToRequest(X,me){if(!s.isNonEmptyString(X.providerId))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PROVIDER_ID);if(!s.isNonEmptyString(X.providerUid))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PROVIDER_UID);const Ie={providerId:X.providerId,rawId:X.providerUid};return me.federatedUserId?me.federatedUserId.push(Ie):me.federatedUserId=[Ie],me}constructor(X){if(this.app=X,typeof X!="object"||X===null||!("options"in X))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ARGUMENT,"First argument passed to admin.auth() must be a valid Firebase app instance.");this.httpClient=new Y(X)}createSessionCookie(X,me){const Ie={idToken:X,validDuration:Math.floor(me/1e3)};return this.invokeRequestHandler(this.getAuthUrlBuilder(),e.FIREBASE_AUTH_CREATE_SESSION_COOKIE,Ie).then(Le=>Le.sessionCookie)}getAccountInfoByUid(X){if(!s.isUid(X))return Promise.reject(new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_UID));const me={localId:[X]};return this.invokeRequestHandler(this.getAuthUrlBuilder(),e.FIREBASE_AUTH_GET_ACCOUNT_INFO,me)}getAccountInfoByEmail(X){if(!s.isEmail(X))return Promise.reject(new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_EMAIL));const me={email:[X]};return this.invokeRequestHandler(this.getAuthUrlBuilder(),e.FIREBASE_AUTH_GET_ACCOUNT_INFO,me)}getAccountInfoByPhoneNumber(X){if(!s.isPhoneNumber(X))return Promise.reject(new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PHONE_NUMBER));const me={phoneNumber:[X]};return this.invokeRequestHandler(this.getAuthUrlBuilder(),e.FIREBASE_AUTH_GET_ACCOUNT_INFO,me)}getAccountInfoByFederatedUid(X,me){if(!s.isNonEmptyString(X)||!s.isNonEmptyString(me))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PROVIDER_ID);const Ie={federatedUserId:[{providerId:X,rawId:me}]};return this.invokeRequestHandler(this.getAuthUrlBuilder(),e.FIREBASE_AUTH_GET_ACCOUNT_INFO,Ie)}getAccountInfoByIdentifiers(X){if(X.length===0)return Promise.resolve({users:[]});if(X.length>E)throw new g.FirebaseAuthError(g.AuthClientErrorCode.MAXIMUM_USER_COUNT_EXCEEDED,"`identifiers` parameter must have <= "+E+" entries.");let me={};for(const Ie of X)if((0,h.isUidIdentifier)(Ie))me=c.addUidToRequest(Ie,me);else if((0,h.isEmailIdentifier)(Ie))me=c.addEmailToRequest(Ie,me);else if((0,h.isPhoneIdentifier)(Ie))me=c.addPhoneToRequest(Ie,me);else if((0,h.isProviderIdentifier)(Ie))me=c.addProviderToRequest(Ie,me);else throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ARGUMENT,"Unrecognized identifier: "+Ie);return this.invokeRequestHandler(this.getAuthUrlBuilder(),e.FIREBASE_AUTH_GET_ACCOUNTS_INFO,me)}downloadAccount(X=I,me){const Ie={maxResults:X,nextPageToken:me};return typeof Ie.nextPageToken>"u"&&delete Ie.nextPageToken,this.invokeRequestHandler(this.getAuthUrlBuilder(),e.FIREBASE_AUTH_DOWNLOAD_ACCOUNT,Ie).then(Le=>(Le.users||(Le.users=[]),Le))}uploadAccount(X,me){const Ie=new l.UserImportBuilder(X,me,ke=>{ue(ke,K.Upload)}),Le=Ie.buildRequest();if(s.isArray(X)&&X.length>O)throw new g.FirebaseAuthError(g.AuthClientErrorCode.MAXIMUM_USER_COUNT_EXCEEDED,`A maximum of ${O} users can be imported at once.`);return!Le.users||Le.users.length===0?Promise.resolve(Ie.buildResponse([])):this.invokeRequestHandler(this.getAuthUrlBuilder(),e.FIREBASE_AUTH_UPLOAD_ACCOUNT,Le).then(ke=>{const ze=ke.error||[];return Ie.buildResponse(ze)})}deleteAccount(X){if(!s.isUid(X))return Promise.reject(new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_UID));const me={localId:X};return this.invokeRequestHandler(this.getAuthUrlBuilder(),e.FIREBASE_AUTH_DELETE_ACCOUNT,me)}deleteAccounts(X,me){if(X.length===0)return Promise.resolve({});if(X.length>C)throw new g.FirebaseAuthError(g.AuthClientErrorCode.MAXIMUM_USER_COUNT_EXCEEDED,"`uids` parameter must have <= "+C+" entries.");const Ie={localIds:[],force:me};return X.forEach(Le=>{if(!s.isUid(Le))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_UID);Ie.localIds.push(Le)}),this.invokeRequestHandler(this.getAuthUrlBuilder(),e.FIREBASE_AUTH_BATCH_DELETE_ACCOUNTS,Ie)}setCustomUserClaims(X,me){if(s.isUid(X)){if(!s.isObject(me))return Promise.reject(new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ARGUMENT,"CustomUserClaims argument must be an object or null."))}else return Promise.reject(new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_UID));me===null&&(me={});const Ie={localId:X,customAttributes:JSON.stringify(me)};return this.invokeRequestHandler(this.getAuthUrlBuilder(),e.FIREBASE_AUTH_SET_ACCOUNT_INFO,Ie).then(Le=>Le.localId)}updateExistingAccount(X,me){if(s.isUid(X))if(s.isNonNullObject(me)){if(s.isNonNullObject(me.providerToLink)){if(!s.isNonEmptyString(me.providerToLink.providerId))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ARGUMENT,"providerToLink.providerId of properties argument must be a non-empty string.");if(!s.isNonEmptyString(me.providerToLink.uid))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ARGUMENT,"providerToLink.uid of properties argument must be a non-empty string.")}else if(typeof me.providersToUnlink<"u"){if(!s.isArray(me.providersToUnlink))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ARGUMENT,"providersToUnlink of properties argument must be an array of strings.");me.providersToUnlink.forEach(ke=>{if(!s.isNonEmptyString(ke))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ARGUMENT,"providersToUnlink of properties argument must be an array of strings.")})}}else return Promise.reject(new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ARGUMENT,"Properties argument must be a non-null object."));else return Promise.reject(new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_UID));const Ie=(0,p.deepCopy)(me);Ie.localId=X;const Le={displayName:"DISPLAY_NAME",photoURL:"PHOTO_URL"};Ie.deleteAttribute=[];for(const ke in Le)Ie[ke]===null&&(Ie.deleteAttribute.push(Le[ke]),delete Ie[ke]);if(Ie.deleteAttribute.length===0&&delete Ie.deleteAttribute,Ie.phoneNumber===null&&(Ie.deleteProvider?Ie.deleteProvider.push("phone"):Ie.deleteProvider=["phone"],delete Ie.phoneNumber),typeof Ie.providerToLink<"u"&&(Ie.linkProviderUserInfo=(0,p.deepCopy)(Ie.providerToLink),delete Ie.providerToLink,Ie.linkProviderUserInfo.rawId=Ie.linkProviderUserInfo.uid,delete Ie.linkProviderUserInfo.uid),typeof Ie.providersToUnlink<"u"&&(s.isArray(Ie.deleteProvider)||(Ie.deleteProvider=[]),Ie.deleteProvider=Ie.deleteProvider.concat(Ie.providersToUnlink),delete Ie.providersToUnlink),typeof Ie.photoURL<"u"&&(Ie.photoUrl=Ie.photoURL,delete Ie.photoURL),typeof Ie.disabled<"u"&&(Ie.disableUser=Ie.disabled,delete Ie.disabled),s.isNonNullObject(Ie.multiFactor)){if(Ie.multiFactor.enrolledFactors===null)Ie.mfa={};else if(s.isArray(Ie.multiFactor.enrolledFactors)){Ie.mfa={enrollments:[]};try{Ie.multiFactor.enrolledFactors.forEach(ke=>{Ie.mfa.enrollments.push((0,l.convertMultiFactorInfoToServerFormat)(ke))})}catch(ke){return Promise.reject(ke)}Ie.mfa.enrollments.length===0&&delete Ie.mfa.enrollments}delete Ie.multiFactor}return this.invokeRequestHandler(this.getAuthUrlBuilder(),e.FIREBASE_AUTH_SET_ACCOUNT_INFO,Ie).then(ke=>ke.localId)}revokeRefreshTokens(X){if(!s.isUid(X))return Promise.reject(new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_UID));const me={localId:X,validSince:Math.floor(new Date().getTime()/1e3)};return this.invokeRequestHandler(this.getAuthUrlBuilder(),e.FIREBASE_AUTH_SET_ACCOUNT_INFO,me).then(Ie=>Ie.localId)}createNewAccount(X){if(!s.isNonNullObject(X))return Promise.reject(new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ARGUMENT,"Properties argument must be a non-null object."));const me=(0,p.deepCopy)(X);if(typeof me.photoURL<"u"&&(me.photoUrl=me.photoURL,delete me.photoURL),typeof me.uid<"u"&&(me.localId=me.uid,delete me.uid),s.isNonNullObject(me.multiFactor)){if(s.isNonEmptyArray(me.multiFactor.enrolledFactors)){const Ie=[];try{me.multiFactor.enrolledFactors.forEach(Le=>{if("enrollmentTime"in Le)throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ARGUMENT,'"enrollmentTime" is not supported when adding second factors via "createUser()"');if("uid"in Le)throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ARGUMENT,'"uid" is not supported when adding second factors via "createUser()"');Ie.push((0,l.convertMultiFactorInfoToServerFormat)(Le))})}catch(Le){return Promise.reject(Le)}me.mfaInfo=Ie}delete me.multiFactor}return this.invokeRequestHandler(this.getAuthUrlBuilder(),e.FIREBASE_AUTH_SIGN_UP_NEW_USER,me).then(Ie=>Ie.localId)}getEmailActionLink(X,me,Ie,Le){let ke={requestType:X,email:me,returnOobLink:!0,...typeof Le<"u"&&{newEmail:Le}};if(typeof Ie>"u"&&X==="EMAIL_SIGNIN")return Promise.reject(new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ARGUMENT,"`actionCodeSettings` is required when `requestType` === 'EMAIL_SIGNIN'"));if(typeof Ie<"u"||X==="EMAIL_SIGNIN")try{const ze=new a.ActionCodeSettingsBuilder(Ie);ke=(0,p.deepExtend)(ke,ze.buildRequest())}catch(ze){return Promise.reject(ze)}return X==="VERIFY_AND_CHANGE_EMAIL"&&typeof Le>"u"?Promise.reject(new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ARGUMENT,"`newEmail` is required when `requestType` === 'VERIFY_AND_CHANGE_EMAIL'")):this.invokeRequestHandler(this.getAuthUrlBuilder(),ee,ke).then(ze=>ze.oobLink)}getOAuthIdpConfig(X){return v.OIDCConfig.isProviderId(X)?this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),oe,{},{providerId:X}):Promise.reject(new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PROVIDER_ID))}listOAuthIdpConfigs(X=D,me){const Ie={pageSize:X};return typeof me<"u"&&(Ie.pageToken=me),this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),fe,Ie).then(Le=>(Le.oauthIdpConfigs||(Le.oauthIdpConfigs=[],delete Le.nextPageToken),Le))}deleteOAuthIdpConfig(X){return v.OIDCConfig.isProviderId(X)?this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),de,{},{providerId:X}).then(()=>{}):Promise.reject(new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PROVIDER_ID))}createOAuthIdpConfig(X){let me;try{me=v.OIDCConfig.buildServerRequest(X)||{}}catch(Le){return Promise.reject(Le)}const Ie=X.providerId;return this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),he,me,{providerId:Ie}).then(Le=>{if(!v.OIDCConfig.getProviderIdFromResourceName(Le.name))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to create new OIDC provider configuration");return Le})}updateOAuthIdpConfig(X,me){if(!v.OIDCConfig.isProviderId(X))return Promise.reject(new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PROVIDER_ID));let Ie;try{Ie=v.OIDCConfig.buildServerRequest(me,!0)||{}}catch(ke){return Promise.reject(ke)}const Le=d.generateUpdateMask(Ie);return this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),Ee,Ie,{providerId:X,updateMask:Le.join(",")}).then(ke=>{if(!v.OIDCConfig.getProviderIdFromResourceName(ke.name))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to update OIDC provider configuration");return ke})}getInboundSamlConfig(X){return v.SAMLConfig.isProviderId(X)?this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),Se,{},{providerId:X}):Promise.reject(new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PROVIDER_ID))}listInboundSamlConfigs(X=D,me){const Ie={pageSize:X};return typeof me<"u"&&(Ie.pageToken=me),this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),J,Ie).then(Le=>(Le.inboundSamlConfigs||(Le.inboundSamlConfigs=[],delete Le.nextPageToken),Le))}deleteInboundSamlConfig(X){return v.SAMLConfig.isProviderId(X)?this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),be,{},{providerId:X}).then(()=>{}):Promise.reject(new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PROVIDER_ID))}createInboundSamlConfig(X){let me;try{me=v.SAMLConfig.buildServerRequest(X)||{}}catch(Le){return Promise.reject(Le)}const Ie=X.providerId;return this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),Oe,me,{providerId:Ie}).then(Le=>{if(!v.SAMLConfig.getProviderIdFromResourceName(Le.name))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to create new SAML provider configuration");return Le})}updateInboundSamlConfig(X,me){if(!v.SAMLConfig.isProviderId(X))return Promise.reject(new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PROVIDER_ID));let Ie;try{Ie=v.SAMLConfig.buildServerRequest(me,!0)||{}}catch(ke){return Promise.reject(ke)}const Le=d.generateUpdateMask(Ie);return this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),ge,Ie,{providerId:X,updateMask:Le.join(",")}).then(ke=>{if(!v.SAMLConfig.getProviderIdFromResourceName(ke.name))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to update SAML provider configuration");return ke})}invokeRequestHandler(X,me,Ie,Le){return X.getUrl(me.getEndpoint(),Le).then(ke=>{Ie&&me.getRequestValidator()(Ie);const ze={method:me.getHttpMethod(),url:ke,headers:y,data:Ie,timeout:w};return this.httpClient.send(ze)}).then(ke=>(me.getResponseValidator()(ke.data),ke.data)).catch(ke=>{if(ke instanceof m.RequestResponseError){const ze=ke.response.data,nt=c.getErrorCode(ze);throw nt?g.FirebaseAuthError.fromServerError(nt,void 0,ze):new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"Error returned from server: "+ze+". Additionally, an internal error occurred while attempting to extract the errorcode from the error.")}throw ke})}getAuthUrlBuilder(){return this.authUrlBuilder||(this.authUrlBuilder=this.newAuthUrlBuilder()),this.authUrlBuilder}getProjectConfigUrlBuilder(){return this.projectConfigUrlBuilder||(this.projectConfigUrlBuilder=this.newProjectConfigUrlBuilder()),this.projectConfigUrlBuilder}}e.AbstractAuthRequestHandler=c;const N=new m.ApiSettings("/config","GET").setResponseValidator(U=>{if(!s.isNonEmptyString(U.name))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to get project config")}),A=new m.ApiSettings("/config?updateMask={updateMask}","PATCH").setResponseValidator(U=>{if(!s.isNonEmptyString(U.name))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to update project config")}),V=new m.ApiSettings("/tenants/{tenantId}","GET").setResponseValidator(U=>{if(!s.isNonEmptyString(U.name))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to get tenant")}),ne=new m.ApiSettings("/tenants/{tenantId}","DELETE"),ce=new m.ApiSettings("/tenants/{tenantId}?updateMask={updateMask}","PATCH").setResponseValidator(U=>{if(!s.isNonEmptyString(U.name)||!o.Tenant.getTenantIdFromResourceName(U.name))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to update tenant")}),ie=new m.ApiSettings("/tenants","GET").setRequestValidator(U=>{if(typeof U.pageToken<"u"&&!s.isNonEmptyString(U.pageToken))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_PAGE_TOKEN);if(!s.isNumber(U.pageSize)||U.pageSize<=0||U.pageSize>W)throw new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_ARGUMENT,`Required "maxResults" must be a positive non-zero number that does not exceed the allowed ${W}.`)}),u=new m.ApiSettings("/tenants","POST").setResponseValidator(U=>{if(!s.isNonEmptyString(U.name)||!o.Tenant.getTenantIdFromResourceName(U.name))throw new g.FirebaseAuthError(g.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to create new tenant")});class P extends c{constructor(X){super(X),this.authResourceUrlBuilder=new z(X,"v2")}newAuthUrlBuilder(){return new z(this.app,"v1")}newProjectConfigUrlBuilder(){return new z(this.app,"v2")}getProjectConfig(){return this.invokeRequestHandler(this.authResourceUrlBuilder,N,{},{}).then(X=>X)}updateProjectConfig(X){try{const me=_.ProjectConfig.buildServerRequest(X),Ie=d.generateUpdateMask(me);return this.invokeRequestHandler(this.authResourceUrlBuilder,A,me,{updateMask:Ie.join(",")}).then(Le=>Le)}catch(me){return Promise.reject(me)}}getTenant(X){return s.isNonEmptyString(X)?this.invokeRequestHandler(this.authResourceUrlBuilder,V,{},{tenantId:X}).then(me=>me):Promise.reject(new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_TENANT_ID))}listTenants(X=W,me){const Ie={pageSize:X,pageToken:me};return typeof Ie.pageToken>"u"&&delete Ie.pageToken,this.invokeRequestHandler(this.authResourceUrlBuilder,ie,Ie).then(Le=>(Le.tenants||(Le.tenants=[],delete Le.nextPageToken),Le))}deleteTenant(X){return s.isNonEmptyString(X)?this.invokeRequestHandler(this.authResourceUrlBuilder,ne,void 0,{tenantId:X}).then(()=>{}):Promise.reject(new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_TENANT_ID))}createTenant(X){try{const me=o.Tenant.buildServerRequest(X,!0);return this.invokeRequestHandler(this.authResourceUrlBuilder,u,me).then(Ie=>Ie)}catch(me){return Promise.reject(me)}}updateTenant(X,me){if(!s.isNonEmptyString(X))return Promise.reject(new g.FirebaseAuthError(g.AuthClientErrorCode.INVALID_TENANT_ID));try{const Ie=o.Tenant.buildServerRequest(me,!1),Le=d.generateUpdateMask(Ie,["testPhoneNumbers"]);return this.invokeRequestHandler(this.authResourceUrlBuilder,ce,Ie,{tenantId:X,updateMask:Le.join(",")}).then(ke=>ke)}catch(Ie){return Promise.reject(Ie)}}}e.AuthRequestHandler=P;class M extends c{constructor(X,me){super(X),this.tenantId=me}newAuthUrlBuilder(){return new Q(this.app,"v1",this.tenantId)}newProjectConfigUrlBuilder(){return new Q(this.app,"v2",this.tenantId)}uploadAccount(X,me){return X.forEach((Ie,Le)=>{if(s.isNonEmptyString(Ie.tenantId)&&Ie.tenantId!==this.tenantId)throw new g.FirebaseAuthError(g.AuthClientErrorCode.MISMATCHING_TENANT_ID,`UserRecord of index "${Le}" has mismatching tenant ID "${Ie.tenantId}"`)}),super.uploadAccount(X,me)}}e.TenantAwareAuthRequestHandler=M;function n(){return t.FIREBASE_AUTH_EMULATOR_HOST}function L(){return!!n()}})(authApiRequest)),authApiRequest}var tenantManager={},baseAuth={},tokenGenerator$1={},cryptoSigner={};var hasRequiredCryptoSigner;function requireCryptoSigner(){if(hasRequiredCryptoSigner)return cryptoSigner;hasRequiredCryptoSigner=1;Object.defineProperty(cryptoSigner,"__esModule",{value:!0}),cryptoSigner.CryptoSignerErrorCode=cryptoSigner.CryptoSignerError=cryptoSigner.IAMSigner=cryptoSigner.ServiceAccountSigner=void 0,cryptoSigner.cryptoSignerFromApp=l;const e=requireCredentialInternal(),t=requireApiRequest(),s=requireUtils$2(),p=requireValidator$1(),g="RS256";class m{constructor(v){if(this.credential=v,this.algorithm=g,!v)throw new a({code:o.INVALID_CREDENTIAL,message:"INTERNAL ASSERT: Must provide a service account credential to initialize ServiceAccountSigner."})}sign(v){const y=require$$1$3.createSign("RSA-SHA256");return y.update(v),Promise.resolve(y.sign(this.credential.privateKey))}getAccountId(){return Promise.resolve(this.credential.clientEmail)}}cryptoSigner.ServiceAccountSigner=m;class d{constructor(v,_){if(this.algorithm=g,!v)throw new a({code:o.INVALID_ARGUMENT,message:"INTERNAL ASSERT: Must provide a HTTP client to initialize IAMSigner."});if(_&&(typeof _!="object"||_===null||!("options"in _)))throw new a({code:o.INVALID_ARGUMENT,message:"INTERNAL ASSERT: Must provide a valid Firebase app instance."});this.httpClient=v,this.app=_}sign(v){return this.getAccountId().then(_=>{const y={method:"POST",url:`https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/${_}:signBlob`,data:{payload:v.toString("base64")}};return this.httpClient.send(y)}).then(_=>Buffer.from(_.data.signedBlob,"base64")).catch(_=>{throw _ instanceof t.RequestResponseError?new a({code:o.SERVER_ERROR,message:_.message,cause:_}):_})}async getAccountId(){if(p.isNonEmptyString(this.serviceAccountId))return this.serviceAccountId;if(this.app){const y=await s.findServiceAccountEmail(this.app);if(y)return this.serviceAccountId=y,y}const v={method:"GET",url:"http://metadata/computeMetadata/v1/instance/service-accounts/default/email",headers:{"Metadata-Flavor":"Google"}};return new t.HttpClient().send(v).then(y=>{if(!y.text)throw new a({code:o.INTERNAL_ERROR,message:"HTTP Response missing payload"});return this.serviceAccountId=y.text,y.text}).catch(y=>{throw new a({code:o.INVALID_CREDENTIAL,message:`Failed to determine service account. Make sure to initialize the SDK with a service account credential. Alternatively specify a service account with iam.serviceAccounts.signBlob permission. Original error: ${y}`})})}}cryptoSigner.IAMSigner=d;function l(h){const v=h.options.credential;return v instanceof e.ServiceAccountCredential?new m(v):new d(new t.AuthorizedHttpClient(h),h)}class a extends Error{constructor(v){super(v.message),this.errorInfo=v,this.__proto__=a.prototype}get code(){return this.errorInfo.code}get message(){return this.errorInfo.message}get cause(){return this.errorInfo.cause}}cryptoSigner.CryptoSignerError=a;class o{}return cryptoSigner.CryptoSignerErrorCode=o,o.INVALID_ARGUMENT="invalid-argument",o.INTERNAL_ERROR="internal-error",o.INVALID_CREDENTIAL="invalid-credential",o.SERVER_ERROR="server-error",cryptoSigner}var hasRequiredTokenGenerator$1;function requireTokenGenerator$1(){return hasRequiredTokenGenerator$1||(hasRequiredTokenGenerator$1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FirebaseTokenGenerator=e.EmulatedSigner=e.BLACKLISTED_CLAIMS=void 0,e.handleCryptoSignerError=h;const t=requireError(),s=requireCryptoSigner(),p=requireValidator$1(),g=requireUtils$2(),m="none",d=3600;e.BLACKLISTED_CLAIMS=["acr","amr","at_hash","aud","auth_time","azp","cnf","c_hash","exp","iat","iss","jti","nbf","nonce"];const l="https://identitytoolkit.googleapis.com/google.identity.identitytoolkit.v1.IdentityToolkit";class a{constructor(){this.algorithm=m}sign(y){return Promise.resolve(Buffer.from(""))}getAccountId(){return Promise.resolve("firebase-auth-emulator@example.com")}}e.EmulatedSigner=a;class o{constructor(y,w){if(this.tenantId=w,!p.isNonNullObject(y))throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_CREDENTIAL,"INTERNAL ASSERT: Must provide a CryptoSigner to use FirebaseTokenGenerator.");if(typeof this.tenantId<"u"&&!p.isNonEmptyString(this.tenantId))throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,"`tenantId` argument must be a non-empty string.");this.signer=y}createCustomToken(y,w){let T;if(p.isNonEmptyString(y)?y.length>128?T="`uid` argument must a uid with less than or equal to 128 characters.":this.isDeveloperClaimsValid_(w)||(T="`developerClaims` argument must be a valid, non-null object containing the developer claims."):T="`uid` argument must be a non-empty string uid.",T)throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,T);const I={};if(typeof w<"u"){for(const O in w)if(Object.prototype.hasOwnProperty.call(w,O)){if(e.BLACKLISTED_CLAIMS.indexOf(O)!==-1)throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,`Developer claim "${O}" is reserved and cannot be specified.`);I[O]=w[O]}}return this.signer.getAccountId().then(O=>{const E={alg:this.signer.algorithm,typ:"JWT"},C=Math.floor(Date.now()/1e3),x={aud:l,iat:C,exp:C+d,iss:O,sub:O,uid:y};this.tenantId&&(x.tenant_id=this.tenantId),Object.keys(I).length>0&&(x.claims=I);const j=`${this.encodeSegment(E)}.${this.encodeSegment(x)}`,D=this.signer.sign(Buffer.from(j));return Promise.all([j,D])}).then(([O,E])=>`${O}.${this.encodeSegment(E)}`).catch(O=>{throw h(O)})}encodeSegment(y){const w=y instanceof Buffer?y:Buffer.from(JSON.stringify(y));return(0,g.toWebSafeBase64)(w).replace(/=+$/,"")}isDeveloperClaimsValid_(y){return typeof y>"u"?!0:p.isNonNullObject(y)}}e.FirebaseTokenGenerator=o;function h(_){if(!(_ instanceof s.CryptoSignerError))return _;if(_.code===s.CryptoSignerErrorCode.SERVER_ERROR&&p.isNonNullObject(_.cause)){const w=_.cause.response.data;if(p.isNonNullObject(w)&&w.error){const T=w.error.status,O=`${w.error.message}; Please refer to https://firebase.google.com/docs/auth/admin/create-custom-tokens for more details on how to use and troubleshoot this feature.`;return t.FirebaseAuthError.fromServerError(T,O,w)}return new t.FirebaseAuthError(t.AuthClientErrorCode.INTERNAL_ERROR,"Error returned from server: "+w+". Additionally, an internal error occurred while attempting to extract the errorcode from the error.")}return new t.FirebaseAuthError(v(_.code),_.message)}function v(_){switch(_){case s.CryptoSignerErrorCode.INVALID_CREDENTIAL:return t.AuthClientErrorCode.INVALID_CREDENTIAL;case s.CryptoSignerErrorCode.INVALID_ARGUMENT:return t.AuthClientErrorCode.INVALID_ARGUMENT;default:return t.AuthClientErrorCode.INTERNAL_ERROR}}})(tokenGenerator$1)),tokenGenerator$1}var tokenVerifier$1={},jwt={},jws={},dataStream,hasRequiredDataStream;function requireDataStream(){if(hasRequiredDataStream)return dataStream;hasRequiredDataStream=1;var e={},t=requireSafeBuffer().Buffer,s=require$$1$3,p=require$$1$3;function g(m){if(this.buffer=null,this.writable=!0,this.readable=!0,!m)return this.buffer=t.alloc(0),this;if(typeof m.pipe=="function")return this.buffer=t.alloc(0),m.pipe(this),this;if(m.length||typeof m=="object")return this.buffer=m,this.writable=!1,e.nextTick((function(){this.emit("end",m),this.readable=!1,this.emit("close")}).bind(this)),this;throw new TypeError("Unexpected data type ("+typeof m+")")}return p.inherits(g,s),g.prototype.write=function(d){this.buffer=t.concat([this.buffer,t.from(d)]),this.emit("data",d)},g.prototype.end=function(d){d&&this.write(d),this.emit("end",d),this.emit("close"),this.writable=!1,this.readable=!1},dataStream=g,dataStream}var jwa,hasRequiredJwa;function requireJwa(){if(hasRequiredJwa)return jwa;hasRequiredJwa=1;var e=requireSafeBuffer().Buffer,t=require$$1$3,s=requireEcdsaSigFormatter(),p=require$$1$3,g=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,m="secret must be a string or buffer",d="key must be a string or a buffer",l="key must be a string, a buffer or an object",a=typeof t.createPublicKey=="function";a&&(d+=" or a KeyObject",m+="or a KeyObject");function o(z){if(!e.isBuffer(z)&&typeof z!="string"&&(!a||typeof z!="object"||typeof z.type!="string"||typeof z.asymmetricKeyType!="string"||typeof z.export!="function"))throw w(d)}function h(z){if(!e.isBuffer(z)&&typeof z!="string"&&typeof z!="object")throw w(l)}function v(z){if(!e.isBuffer(z)){if(typeof z=="string")return z;if(!a||typeof z!="object"||z.type!=="secret"||typeof z.export!="function")throw w(m)}}function _(z){return z.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function y(z){z=z.toString();var Q=4-z.length%4;if(Q!==4)for(var Y=0;Y<Q;++Y)z+="=";return z.replace(/\-/g,"+").replace(/_/g,"/")}function w(z){var Q=[].slice.call(arguments,1),Y=p.format.bind(p,z).apply(null,Q);return new TypeError(Y)}function T(z){return e.isBuffer(z)||typeof z=="string"}function I(z){return T(z)||(z=JSON.stringify(z)),z}function O(z){return function(Y,te){v(te),Y=I(Y);var ae=t.createHmac("sha"+z,te),ue=(ae.update(Y),ae.digest("base64"));return _(ue)}}var E,C="timingSafeEqual"in t?function(Q,Y){return Q.byteLength!==Y.byteLength?!1:t.timingSafeEqual(Q,Y)}:function(Q,Y){return E||(E=requireBufferEqualConstantTime()),E(Q,Y)};function x(z){return function(Y,te,ae){var ue=O(z)(Y,ae);return C(e.from(te),e.from(ue))}}function j(z){return function(Y,te){h(te),Y=I(Y);var ae=t.createSign("RSA-SHA"+z),ue=(ae.update(Y),ae.sign(te,"base64"));return _(ue)}}function D(z){return function(Y,te,ae){o(ae),Y=I(Y),te=y(te);var ue=t.createVerify("RSA-SHA"+z);return ue.update(Y),ue.verify(ae,te,"base64")}}function k(z){return function(Y,te){h(te),Y=I(Y);var ae=t.createSign("RSA-SHA"+z),ue=(ae.update(Y),ae.sign({key:te,padding:t.constants.RSA_PKCS1_PSS_PADDING,saltLength:t.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return _(ue)}}function q(z){return function(Y,te,ae){o(ae),Y=I(Y),te=y(te);var ue=t.createVerify("RSA-SHA"+z);return ue.update(Y),ue.verify({key:ae,padding:t.constants.RSA_PKCS1_PSS_PADDING,saltLength:t.constants.RSA_PSS_SALTLEN_DIGEST},te,"base64")}}function G(z){var Q=j(z);return function(){var te=Q.apply(null,arguments);return te=s.derToJose(te,"ES"+z),te}}function $(z){var Q=D(z);return function(te,ae,ue){ae=s.joseToDer(ae,"ES"+z).toString("base64");var ee=Q(te,ae,ue);return ee}}function W(){return function(){return""}}function K(){return function(Q,Y){return Y===""}}return jwa=function(Q){var Y={hs:O,rs:j,ps:k,es:G,none:W},te={hs:x,rs:D,ps:q,es:$,none:K},ae=Q.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!ae)throw w(g,Q);var ue=(ae[1]||ae[3]).toLowerCase(),ee=ae[2];return{sign:Y[ue](ee),verify:te[ue](ee)}},jwa}var tostring,hasRequiredTostring;function requireTostring(){if(hasRequiredTostring)return tostring;hasRequiredTostring=1;var e=requireBuffer().Buffer;return tostring=function(s){return typeof s=="string"?s:typeof s=="number"||e.isBuffer(s)?s.toString():JSON.stringify(s)},tostring}var signStream,hasRequiredSignStream;function requireSignStream(){if(hasRequiredSignStream)return signStream;hasRequiredSignStream=1;var e=requireSafeBuffer().Buffer,t=requireDataStream(),s=requireJwa(),p=require$$1$3,g=requireTostring(),m=require$$1$3;function d(h,v){return e.from(h,v).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function l(h,v,_){_=_||"utf8";var y=d(g(h),"binary"),w=d(g(v),_);return m.format("%s.%s",y,w)}function a(h){var v=h.header,_=h.payload,y=h.secret||h.privateKey,w=h.encoding,T=s(v.alg),I=l(v,_,w),O=T.sign(I,y);return m.format("%s.%s",I,O)}function o(h){var v=h.secret||h.privateKey||h.key,_=new t(v);this.readable=!0,this.header=h.header,this.encoding=h.encoding,this.secret=this.privateKey=this.key=_,this.payload=new t(h.payload),this.secret.once("close",(function(){!this.payload.writable&&this.readable&&this.sign()}).bind(this)),this.payload.once("close",(function(){!this.secret.writable&&this.readable&&this.sign()}).bind(this))}return m.inherits(o,p),o.prototype.sign=function(){try{var v=a({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",v),this.emit("data",v),this.emit("end"),this.readable=!1,v}catch(_){this.readable=!1,this.emit("error",_),this.emit("close")}},o.sign=a,signStream=o,signStream}var verifyStream,hasRequiredVerifyStream;function requireVerifyStream(){if(hasRequiredVerifyStream)return verifyStream;hasRequiredVerifyStream=1;var e=requireSafeBuffer().Buffer,t=requireDataStream(),s=requireJwa(),p=require$$1$3,g=requireTostring(),m=require$$1$3,d=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function l(O){return Object.prototype.toString.call(O)==="[object Object]"}function a(O){if(l(O))return O;try{return JSON.parse(O)}catch{return}}function o(O){var E=O.split(".",1)[0];return a(e.from(E,"base64").toString("binary"))}function h(O){return O.split(".",2).join(".")}function v(O){return O.split(".")[2]}function _(O,E){E=E||"utf8";var C=O.split(".")[1];return e.from(C,"base64").toString(E)}function y(O){return d.test(O)&&!!o(O)}function w(O,E,C){if(!E){var x=new Error("Missing algorithm parameter for jws.verify");throw x.code="MISSING_ALGORITHM",x}O=g(O);var j=v(O),D=h(O),k=s(E);return k.verify(D,j,C)}function T(O,E){if(E=E||{},O=g(O),!y(O))return null;var C=o(O);if(!C)return null;var x=_(O);return(C.typ==="JWT"||E.json)&&(x=JSON.parse(x,E.encoding)),{header:C,payload:x,signature:v(O)}}function I(O){O=O||{};var E=O.secret||O.publicKey||O.key,C=new t(E);this.readable=!0,this.algorithm=O.algorithm,this.encoding=O.encoding,this.secret=this.publicKey=this.key=C,this.signature=new t(O.signature),this.secret.once("close",(function(){!this.signature.writable&&this.readable&&this.verify()}).bind(this)),this.signature.once("close",(function(){!this.secret.writable&&this.readable&&this.verify()}).bind(this))}return m.inherits(I,p),I.prototype.verify=function(){try{var E=w(this.signature.buffer,this.algorithm,this.key.buffer),C=T(this.signature.buffer,this.encoding);return this.emit("done",E,C),this.emit("data",E),this.emit("end"),this.readable=!1,E}catch(x){this.readable=!1,this.emit("error",x),this.emit("close")}},I.decode=T,I.isValid=y,I.verify=w,verifyStream=I,verifyStream}var hasRequiredJws;function requireJws(){if(hasRequiredJws)return jws;hasRequiredJws=1;var e=requireSignStream(),t=requireVerifyStream(),s=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];return jws.ALGORITHMS=s,jws.sign=e.sign,jws.verify=t.verify,jws.decode=t.decode,jws.isValid=t.isValid,jws.createSign=function(g){return new e(g)},jws.createVerify=function(g){return new t(g)},jws}var decode$2,hasRequiredDecode;function requireDecode(){if(hasRequiredDecode)return decode$2;hasRequiredDecode=1;var e=requireJws();return decode$2=function(t,s){s=s||{};var p=e.decode(t,s);if(!p)return null;var g=p.payload;if(typeof g=="string")try{var m=JSON.parse(g);m!==null&&typeof m=="object"&&(g=m)}catch{}return s.complete===!0?{header:p.header,payload:g,signature:p.signature}:g},decode$2}var JsonWebTokenError_1,hasRequiredJsonWebTokenError;function requireJsonWebTokenError(){if(hasRequiredJsonWebTokenError)return JsonWebTokenError_1;hasRequiredJsonWebTokenError=1;var e=function(t,s){Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=t,s&&(this.inner=s)};return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,JsonWebTokenError_1=e,JsonWebTokenError_1}var NotBeforeError_1,hasRequiredNotBeforeError;function requireNotBeforeError(){if(hasRequiredNotBeforeError)return NotBeforeError_1;hasRequiredNotBeforeError=1;var e=requireJsonWebTokenError(),t=function(s,p){e.call(this,s),this.name="NotBeforeError",this.date=p};return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,NotBeforeError_1=t,NotBeforeError_1}var TokenExpiredError_1,hasRequiredTokenExpiredError;function requireTokenExpiredError(){if(hasRequiredTokenExpiredError)return TokenExpiredError_1;hasRequiredTokenExpiredError=1;var e=requireJsonWebTokenError(),t=function(s,p){e.call(this,s),this.name="TokenExpiredError",this.expiredAt=p};return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,TokenExpiredError_1=t,TokenExpiredError_1}var timespan,hasRequiredTimespan;function requireTimespan(){if(hasRequiredTimespan)return timespan;hasRequiredTimespan=1;var e=requireMs();return timespan=function(t,s){var p=s||Math.floor(Date.now()/1e3);if(typeof t=="string"){var g=e(t);return typeof g>"u"?void 0:Math.floor(p+g/1e3)}else return typeof t=="number"?p+t:void 0},timespan}var re$1={exports:{}},constants$1,hasRequiredConstants$1;function requireConstants$1(){if(hasRequiredConstants$1)return constants$1;hasRequiredConstants$1=1;const e="2.0.0",t=256,s=Number.MAX_SAFE_INTEGER||9007199254740991,p=16,g=t-6;return constants$1={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:p,MAX_SAFE_BUILD_LENGTH:g,MAX_SAFE_INTEGER:s,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},constants$1}var debug_1,hasRequiredDebug;function requireDebug(){if(hasRequiredDebug)return debug_1;hasRequiredDebug=1;var e={},t={};return debug_1=typeof e=="object"&&t&&t.NODE_DEBUG&&/\bsemver\b/i.test(t.NODE_DEBUG)?(...p)=>console.error("SEMVER",...p):()=>{},debug_1}var hasRequiredRe;function requireRe(){return hasRequiredRe||(hasRequiredRe=1,(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:s,MAX_SAFE_BUILD_LENGTH:p,MAX_LENGTH:g}=requireConstants$1(),m=requireDebug();t=e.exports={};const d=t.re=[],l=t.safeRe=[],a=t.src=[],o=t.safeSrc=[],h=t.t={};let v=0;const _="[a-zA-Z0-9-]",y=[["\\s",1],["\\d",g],[_,p]],w=I=>{for(const[O,E]of y)I=I.split(`${O}*`).join(`${O}{0,${E}}`).split(`${O}+`).join(`${O}{1,${E}}`);return I},T=(I,O,E)=>{const C=w(O),x=v++;m(I,x,O),h[I]=x,a[x]=O,o[x]=C,d[x]=new RegExp(O,E?"g":void 0),l[x]=new RegExp(C,E?"g":void 0)};T("NUMERICIDENTIFIER","0|[1-9]\\d*"),T("NUMERICIDENTIFIERLOOSE","\\d+"),T("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${_}*`),T("MAINVERSION",`(${a[h.NUMERICIDENTIFIER]})\\.(${a[h.NUMERICIDENTIFIER]})\\.(${a[h.NUMERICIDENTIFIER]})`),T("MAINVERSIONLOOSE",`(${a[h.NUMERICIDENTIFIERLOOSE]})\\.(${a[h.NUMERICIDENTIFIERLOOSE]})\\.(${a[h.NUMERICIDENTIFIERLOOSE]})`),T("PRERELEASEIDENTIFIER",`(?:${a[h.NONNUMERICIDENTIFIER]}|${a[h.NUMERICIDENTIFIER]})`),T("PRERELEASEIDENTIFIERLOOSE",`(?:${a[h.NONNUMERICIDENTIFIER]}|${a[h.NUMERICIDENTIFIERLOOSE]})`),T("PRERELEASE",`(?:-(${a[h.PRERELEASEIDENTIFIER]}(?:\\.${a[h.PRERELEASEIDENTIFIER]})*))`),T("PRERELEASELOOSE",`(?:-?(${a[h.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[h.PRERELEASEIDENTIFIERLOOSE]})*))`),T("BUILDIDENTIFIER",`${_}+`),T("BUILD",`(?:\\+(${a[h.BUILDIDENTIFIER]}(?:\\.${a[h.BUILDIDENTIFIER]})*))`),T("FULLPLAIN",`v?${a[h.MAINVERSION]}${a[h.PRERELEASE]}?${a[h.BUILD]}?`),T("FULL",`^${a[h.FULLPLAIN]}$`),T("LOOSEPLAIN",`[v=\\s]*${a[h.MAINVERSIONLOOSE]}${a[h.PRERELEASELOOSE]}?${a[h.BUILD]}?`),T("LOOSE",`^${a[h.LOOSEPLAIN]}$`),T("GTLT","((?:<|>)?=?)"),T("XRANGEIDENTIFIERLOOSE",`${a[h.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),T("XRANGEIDENTIFIER",`${a[h.NUMERICIDENTIFIER]}|x|X|\\*`),T("XRANGEPLAIN",`[v=\\s]*(${a[h.XRANGEIDENTIFIER]})(?:\\.(${a[h.XRANGEIDENTIFIER]})(?:\\.(${a[h.XRANGEIDENTIFIER]})(?:${a[h.PRERELEASE]})?${a[h.BUILD]}?)?)?`),T("XRANGEPLAINLOOSE",`[v=\\s]*(${a[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[h.XRANGEIDENTIFIERLOOSE]})(?:${a[h.PRERELEASELOOSE]})?${a[h.BUILD]}?)?)?`),T("XRANGE",`^${a[h.GTLT]}\\s*${a[h.XRANGEPLAIN]}$`),T("XRANGELOOSE",`^${a[h.GTLT]}\\s*${a[h.XRANGEPLAINLOOSE]}$`),T("COERCEPLAIN",`(^|[^\\d])(\\d{1,${s}})(?:\\.(\\d{1,${s}}))?(?:\\.(\\d{1,${s}}))?`),T("COERCE",`${a[h.COERCEPLAIN]}(?:$|[^\\d])`),T("COERCEFULL",a[h.COERCEPLAIN]+`(?:${a[h.PRERELEASE]})?(?:${a[h.BUILD]})?(?:$|[^\\d])`),T("COERCERTL",a[h.COERCE],!0),T("COERCERTLFULL",a[h.COERCEFULL],!0),T("LONETILDE","(?:~>?)"),T("TILDETRIM",`(\\s*)${a[h.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",T("TILDE",`^${a[h.LONETILDE]}${a[h.XRANGEPLAIN]}$`),T("TILDELOOSE",`^${a[h.LONETILDE]}${a[h.XRANGEPLAINLOOSE]}$`),T("LONECARET","(?:\\^)"),T("CARETTRIM",`(\\s*)${a[h.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",T("CARET",`^${a[h.LONECARET]}${a[h.XRANGEPLAIN]}$`),T("CARETLOOSE",`^${a[h.LONECARET]}${a[h.XRANGEPLAINLOOSE]}$`),T("COMPARATORLOOSE",`^${a[h.GTLT]}\\s*(${a[h.LOOSEPLAIN]})$|^$`),T("COMPARATOR",`^${a[h.GTLT]}\\s*(${a[h.FULLPLAIN]})$|^$`),T("COMPARATORTRIM",`(\\s*)${a[h.GTLT]}\\s*(${a[h.LOOSEPLAIN]}|${a[h.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",T("HYPHENRANGE",`^\\s*(${a[h.XRANGEPLAIN]})\\s+-\\s+(${a[h.XRANGEPLAIN]})\\s*$`),T("HYPHENRANGELOOSE",`^\\s*(${a[h.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[h.XRANGEPLAINLOOSE]})\\s*$`),T("STAR","(<|>)?=?\\s*\\*"),T("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),T("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(re$1,re$1.exports)),re$1.exports}var parseOptions_1,hasRequiredParseOptions;function requireParseOptions(){if(hasRequiredParseOptions)return parseOptions_1;hasRequiredParseOptions=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return parseOptions_1=p=>p?typeof p!="object"?e:p:t,parseOptions_1}var identifiers,hasRequiredIdentifiers;function requireIdentifiers(){if(hasRequiredIdentifiers)return identifiers;hasRequiredIdentifiers=1;const e=/^[0-9]+$/,t=(p,g)=>{const m=e.test(p),d=e.test(g);return m&&d&&(p=+p,g=+g),p===g?0:m&&!d?-1:d&&!m?1:p<g?-1:1};return identifiers={compareIdentifiers:t,rcompareIdentifiers:(p,g)=>t(g,p)},identifiers}var semver$1,hasRequiredSemver$1;function requireSemver$1(){if(hasRequiredSemver$1)return semver$1;hasRequiredSemver$1=1;const e=requireDebug(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:s}=requireConstants$1(),{safeRe:p,t:g}=requireRe(),m=requireParseOptions(),{compareIdentifiers:d}=requireIdentifiers();class l{constructor(o,h){if(h=m(h),o instanceof l){if(o.loose===!!h.loose&&o.includePrerelease===!!h.includePrerelease)return o;o=o.version}else if(typeof o!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof o}".`);if(o.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",o,h),this.options=h,this.loose=!!h.loose,this.includePrerelease=!!h.includePrerelease;const v=o.trim().match(h.loose?p[g.LOOSE]:p[g.FULL]);if(!v)throw new TypeError(`Invalid Version: ${o}`);if(this.raw=o,this.major=+v[1],this.minor=+v[2],this.patch=+v[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");v[4]?this.prerelease=v[4].split(".").map(_=>{if(/^[0-9]+$/.test(_)){const y=+_;if(y>=0&&y<s)return y}return _}):this.prerelease=[],this.build=v[5]?v[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(o){if(e("SemVer.compare",this.version,this.options,o),!(o instanceof l)){if(typeof o=="string"&&o===this.version)return 0;o=new l(o,this.options)}return o.version===this.version?0:this.compareMain(o)||this.comparePre(o)}compareMain(o){return o instanceof l||(o=new l(o,this.options)),d(this.major,o.major)||d(this.minor,o.minor)||d(this.patch,o.patch)}comparePre(o){if(o instanceof l||(o=new l(o,this.options)),this.prerelease.length&&!o.prerelease.length)return-1;if(!this.prerelease.length&&o.prerelease.length)return 1;if(!this.prerelease.length&&!o.prerelease.length)return 0;let h=0;do{const v=this.prerelease[h],_=o.prerelease[h];if(e("prerelease compare",h,v,_),v===void 0&&_===void 0)return 0;if(_===void 0)return 1;if(v===void 0)return-1;if(v===_)continue;return d(v,_)}while(++h)}compareBuild(o){o instanceof l||(o=new l(o,this.options));let h=0;do{const v=this.build[h],_=o.build[h];if(e("build compare",h,v,_),v===void 0&&_===void 0)return 0;if(_===void 0)return 1;if(v===void 0)return-1;if(v===_)continue;return d(v,_)}while(++h)}inc(o,h,v){if(o.startsWith("pre")){if(!h&&v===!1)throw new Error("invalid increment argument: identifier is empty");if(h){const _=`-${h}`.match(this.options.loose?p[g.PRERELEASELOOSE]:p[g.PRERELEASE]);if(!_||_[1]!==h)throw new Error(`invalid identifier: ${h}`)}}switch(o){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",h,v);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",h,v);break;case"prepatch":this.prerelease.length=0,this.inc("patch",h,v),this.inc("pre",h,v);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",h,v),this.inc("pre",h,v);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const _=Number(v)?1:0;if(this.prerelease.length===0)this.prerelease=[_];else{let y=this.prerelease.length;for(;--y>=0;)typeof this.prerelease[y]=="number"&&(this.prerelease[y]++,y=-2);if(y===-1){if(h===this.prerelease.join(".")&&v===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(_)}}if(h){let y=[h,_];v===!1&&(y=[h]),d(this.prerelease[0],h)===0?isNaN(this.prerelease[1])&&(this.prerelease=y):this.prerelease=y}break}default:throw new Error(`invalid increment argument: ${o}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return semver$1=l,semver$1}var parse_1$1,hasRequiredParse$3;function requireParse$3(){if(hasRequiredParse$3)return parse_1$1;hasRequiredParse$3=1;const e=requireSemver$1();return parse_1$1=(s,p,g=!1)=>{if(s instanceof e)return s;try{return new e(s,p)}catch(m){if(!g)return null;throw m}},parse_1$1}var valid_1,hasRequiredValid$1;function requireValid$1(){if(hasRequiredValid$1)return valid_1;hasRequiredValid$1=1;const e=requireParse$3();return valid_1=(s,p)=>{const g=e(s,p);return g?g.version:null},valid_1}var clean_1,hasRequiredClean;function requireClean(){if(hasRequiredClean)return clean_1;hasRequiredClean=1;const e=requireParse$3();return clean_1=(s,p)=>{const g=e(s.trim().replace(/^[=v]+/,""),p);return g?g.version:null},clean_1}var inc_1,hasRequiredInc;function requireInc(){if(hasRequiredInc)return inc_1;hasRequiredInc=1;const e=requireSemver$1();return inc_1=(s,p,g,m,d)=>{typeof g=="string"&&(d=m,m=g,g=void 0);try{return new e(s instanceof e?s.version:s,g).inc(p,m,d).version}catch{return null}},inc_1}var diff_1,hasRequiredDiff;function requireDiff(){if(hasRequiredDiff)return diff_1;hasRequiredDiff=1;const e=requireParse$3();return diff_1=(s,p)=>{const g=e(s,null,!0),m=e(p,null,!0),d=g.compare(m);if(d===0)return null;const l=d>0,a=l?g:m,o=l?m:g,h=!!a.prerelease.length;if(!!o.prerelease.length&&!h){if(!o.patch&&!o.minor)return"major";if(o.compareMain(a)===0)return o.minor&&!o.patch?"minor":"patch"}const _=h?"pre":"";return g.major!==m.major?_+"major":g.minor!==m.minor?_+"minor":g.patch!==m.patch?_+"patch":"prerelease"},diff_1}var major_1,hasRequiredMajor;function requireMajor(){if(hasRequiredMajor)return major_1;hasRequiredMajor=1;const e=requireSemver$1();return major_1=(s,p)=>new e(s,p).major,major_1}var minor_1,hasRequiredMinor;function requireMinor(){if(hasRequiredMinor)return minor_1;hasRequiredMinor=1;const e=requireSemver$1();return minor_1=(s,p)=>new e(s,p).minor,minor_1}var patch_1,hasRequiredPatch;function requirePatch(){if(hasRequiredPatch)return patch_1;hasRequiredPatch=1;const e=requireSemver$1();return patch_1=(s,p)=>new e(s,p).patch,patch_1}var prerelease_1,hasRequiredPrerelease;function requirePrerelease(){if(hasRequiredPrerelease)return prerelease_1;hasRequiredPrerelease=1;const e=requireParse$3();return prerelease_1=(s,p)=>{const g=e(s,p);return g&&g.prerelease.length?g.prerelease:null},prerelease_1}var compare_1,hasRequiredCompare;function requireCompare(){if(hasRequiredCompare)return compare_1;hasRequiredCompare=1;const e=requireSemver$1();return compare_1=(s,p,g)=>new e(s,g).compare(new e(p,g)),compare_1}var rcompare_1,hasRequiredRcompare;function requireRcompare(){if(hasRequiredRcompare)return rcompare_1;hasRequiredRcompare=1;const e=requireCompare();return rcompare_1=(s,p,g)=>e(p,s,g),rcompare_1}var compareLoose_1,hasRequiredCompareLoose;function requireCompareLoose(){if(hasRequiredCompareLoose)return compareLoose_1;hasRequiredCompareLoose=1;const e=requireCompare();return compareLoose_1=(s,p)=>e(s,p,!0),compareLoose_1}var compareBuild_1,hasRequiredCompareBuild;function requireCompareBuild(){if(hasRequiredCompareBuild)return compareBuild_1;hasRequiredCompareBuild=1;const e=requireSemver$1();return compareBuild_1=(s,p,g)=>{const m=new e(s,g),d=new e(p,g);return m.compare(d)||m.compareBuild(d)},compareBuild_1}var sort_1,hasRequiredSort;function requireSort(){if(hasRequiredSort)return sort_1;hasRequiredSort=1;const e=requireCompareBuild();return sort_1=(s,p)=>s.sort((g,m)=>e(g,m,p)),sort_1}var rsort_1,hasRequiredRsort;function requireRsort(){if(hasRequiredRsort)return rsort_1;hasRequiredRsort=1;const e=requireCompareBuild();return rsort_1=(s,p)=>s.sort((g,m)=>e(m,g,p)),rsort_1}var gt_1,hasRequiredGt;function requireGt(){if(hasRequiredGt)return gt_1;hasRequiredGt=1;const e=requireCompare();return gt_1=(s,p,g)=>e(s,p,g)>0,gt_1}var lt_1,hasRequiredLt;function requireLt(){if(hasRequiredLt)return lt_1;hasRequiredLt=1;const e=requireCompare();return lt_1=(s,p,g)=>e(s,p,g)<0,lt_1}var eq_1,hasRequiredEq;function requireEq(){if(hasRequiredEq)return eq_1;hasRequiredEq=1;const e=requireCompare();return eq_1=(s,p,g)=>e(s,p,g)===0,eq_1}var neq_1,hasRequiredNeq;function requireNeq(){if(hasRequiredNeq)return neq_1;hasRequiredNeq=1;const e=requireCompare();return neq_1=(s,p,g)=>e(s,p,g)!==0,neq_1}var gte_1,hasRequiredGte;function requireGte(){if(hasRequiredGte)return gte_1;hasRequiredGte=1;const e=requireCompare();return gte_1=(s,p,g)=>e(s,p,g)>=0,gte_1}var lte_1,hasRequiredLte;function requireLte(){if(hasRequiredLte)return lte_1;hasRequiredLte=1;const e=requireCompare();return lte_1=(s,p,g)=>e(s,p,g)<=0,lte_1}var cmp_1,hasRequiredCmp;function requireCmp(){if(hasRequiredCmp)return cmp_1;hasRequiredCmp=1;const e=requireEq(),t=requireNeq(),s=requireGt(),p=requireGte(),g=requireLt(),m=requireLte();return cmp_1=(l,a,o,h)=>{switch(a){case"===":return typeof l=="object"&&(l=l.version),typeof o=="object"&&(o=o.version),l===o;case"!==":return typeof l=="object"&&(l=l.version),typeof o=="object"&&(o=o.version),l!==o;case"":case"=":case"==":return e(l,o,h);case"!=":return t(l,o,h);case">":return s(l,o,h);case">=":return p(l,o,h);case"<":return g(l,o,h);case"<=":return m(l,o,h);default:throw new TypeError(`Invalid operator: ${a}`)}},cmp_1}var coerce_1,hasRequiredCoerce;function requireCoerce(){if(hasRequiredCoerce)return coerce_1;hasRequiredCoerce=1;const e=requireSemver$1(),t=requireParse$3(),{safeRe:s,t:p}=requireRe();return coerce_1=(m,d)=>{if(m instanceof e)return m;if(typeof m=="number"&&(m=String(m)),typeof m!="string")return null;d=d||{};let l=null;if(!d.rtl)l=m.match(d.includePrerelease?s[p.COERCEFULL]:s[p.COERCE]);else{const y=d.includePrerelease?s[p.COERCERTLFULL]:s[p.COERCERTL];let w;for(;(w=y.exec(m))&&(!l||l.index+l[0].length!==m.length);)(!l||w.index+w[0].length!==l.index+l[0].length)&&(l=w),y.lastIndex=w.index+w[1].length+w[2].length;y.lastIndex=-1}if(l===null)return null;const a=l[2],o=l[3]||"0",h=l[4]||"0",v=d.includePrerelease&&l[5]?`-${l[5]}`:"",_=d.includePrerelease&&l[6]?`+${l[6]}`:"";return t(`${a}.${o}.${h}${v}${_}`,d)},coerce_1}var lrucache,hasRequiredLrucache;function requireLrucache(){if(hasRequiredLrucache)return lrucache;hasRequiredLrucache=1;class e{constructor(){this.max=1e3,this.map=new Map}get(s){const p=this.map.get(s);if(p!==void 0)return this.map.delete(s),this.map.set(s,p),p}delete(s){return this.map.delete(s)}set(s,p){if(!this.delete(s)&&p!==void 0){if(this.map.size>=this.max){const m=this.map.keys().next().value;this.delete(m)}this.map.set(s,p)}return this}}return lrucache=e,lrucache}var range,hasRequiredRange;function requireRange(){if(hasRequiredRange)return range;hasRequiredRange=1;const e=/\s+/g;class t{constructor(Y,te){if(te=g(te),Y instanceof t)return Y.loose===!!te.loose&&Y.includePrerelease===!!te.includePrerelease?Y:new t(Y.raw,te);if(Y instanceof m)return this.raw=Y.value,this.set=[[Y]],this.formatted=void 0,this;if(this.options=te,this.loose=!!te.loose,this.includePrerelease=!!te.includePrerelease,this.raw=Y.trim().replace(e," "),this.set=this.raw.split("||").map(ae=>this.parseRange(ae.trim())).filter(ae=>ae.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const ae=this.set[0];if(this.set=this.set.filter(ue=>!T(ue[0])),this.set.length===0)this.set=[ae];else if(this.set.length>1){for(const ue of this.set)if(ue.length===1&&I(ue[0])){this.set=[ue];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let Y=0;Y<this.set.length;Y++){Y>0&&(this.formatted+="||");const te=this.set[Y];for(let ae=0;ae<te.length;ae++)ae>0&&(this.formatted+=" "),this.formatted+=te[ae].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(Y){const ae=((this.options.includePrerelease&&y)|(this.options.loose&&w))+":"+Y,ue=p.get(ae);if(ue)return ue;const ee=this.options.loose,oe=ee?a[o.HYPHENRANGELOOSE]:a[o.HYPHENRANGE];Y=Y.replace(oe,K(this.options.includePrerelease)),d("hyphen replace",Y),Y=Y.replace(a[o.COMPARATORTRIM],h),d("comparator trim",Y),Y=Y.replace(a[o.TILDETRIM],v),d("tilde trim",Y),Y=Y.replace(a[o.CARETTRIM],_),d("caret trim",Y);let de=Y.split(" ").map(Se=>E(Se,this.options)).join(" ").split(/\s+/).map(Se=>W(Se,this.options));ee&&(de=de.filter(Se=>(d("loose invalid filter",Se,this.options),!!Se.match(a[o.COMPARATORLOOSE])))),d("range list",de);const he=new Map,Ee=de.map(Se=>new m(Se,this.options));for(const Se of Ee){if(T(Se))return[Se];he.set(Se.value,Se)}he.size>1&&he.has("")&&he.delete("");const fe=[...he.values()];return p.set(ae,fe),fe}intersects(Y,te){if(!(Y instanceof t))throw new TypeError("a Range is required");return this.set.some(ae=>O(ae,te)&&Y.set.some(ue=>O(ue,te)&&ae.every(ee=>ue.every(oe=>ee.intersects(oe,te)))))}test(Y){if(!Y)return!1;if(typeof Y=="string")try{Y=new l(Y,this.options)}catch{return!1}for(let te=0;te<this.set.length;te++)if(z(this.set[te],Y,this.options))return!0;return!1}}range=t;const s=requireLrucache(),p=new s,g=requireParseOptions(),m=requireComparator(),d=requireDebug(),l=requireSemver$1(),{safeRe:a,t:o,comparatorTrimReplace:h,tildeTrimReplace:v,caretTrimReplace:_}=requireRe(),{FLAG_INCLUDE_PRERELEASE:y,FLAG_LOOSE:w}=requireConstants$1(),T=Q=>Q.value==="<0.0.0-0",I=Q=>Q.value==="",O=(Q,Y)=>{let te=!0;const ae=Q.slice();let ue=ae.pop();for(;te&&ae.length;)te=ae.every(ee=>ue.intersects(ee,Y)),ue=ae.pop();return te},E=(Q,Y)=>(d("comp",Q,Y),Q=D(Q,Y),d("caret",Q),Q=x(Q,Y),d("tildes",Q),Q=q(Q,Y),d("xrange",Q),Q=$(Q,Y),d("stars",Q),Q),C=Q=>!Q||Q.toLowerCase()==="x"||Q==="*",x=(Q,Y)=>Q.trim().split(/\s+/).map(te=>j(te,Y)).join(" "),j=(Q,Y)=>{const te=Y.loose?a[o.TILDELOOSE]:a[o.TILDE];return Q.replace(te,(ae,ue,ee,oe,de)=>{d("tilde",Q,ae,ue,ee,oe,de);let he;return C(ue)?he="":C(ee)?he=`>=${ue}.0.0 <${+ue+1}.0.0-0`:C(oe)?he=`>=${ue}.${ee}.0 <${ue}.${+ee+1}.0-0`:de?(d("replaceTilde pr",de),he=`>=${ue}.${ee}.${oe}-${de} <${ue}.${+ee+1}.0-0`):he=`>=${ue}.${ee}.${oe} <${ue}.${+ee+1}.0-0`,d("tilde return",he),he})},D=(Q,Y)=>Q.trim().split(/\s+/).map(te=>k(te,Y)).join(" "),k=(Q,Y)=>{d("caret",Q,Y);const te=Y.loose?a[o.CARETLOOSE]:a[o.CARET],ae=Y.includePrerelease?"-0":"";return Q.replace(te,(ue,ee,oe,de,he)=>{d("caret",Q,ue,ee,oe,de,he);let Ee;return C(ee)?Ee="":C(oe)?Ee=`>=${ee}.0.0${ae} <${+ee+1}.0.0-0`:C(de)?ee==="0"?Ee=`>=${ee}.${oe}.0${ae} <${ee}.${+oe+1}.0-0`:Ee=`>=${ee}.${oe}.0${ae} <${+ee+1}.0.0-0`:he?(d("replaceCaret pr",he),ee==="0"?oe==="0"?Ee=`>=${ee}.${oe}.${de}-${he} <${ee}.${oe}.${+de+1}-0`:Ee=`>=${ee}.${oe}.${de}-${he} <${ee}.${+oe+1}.0-0`:Ee=`>=${ee}.${oe}.${de}-${he} <${+ee+1}.0.0-0`):(d("no pr"),ee==="0"?oe==="0"?Ee=`>=${ee}.${oe}.${de}${ae} <${ee}.${oe}.${+de+1}-0`:Ee=`>=${ee}.${oe}.${de}${ae} <${ee}.${+oe+1}.0-0`:Ee=`>=${ee}.${oe}.${de} <${+ee+1}.0.0-0`),d("caret return",Ee),Ee})},q=(Q,Y)=>(d("replaceXRanges",Q,Y),Q.split(/\s+/).map(te=>G(te,Y)).join(" ")),G=(Q,Y)=>{Q=Q.trim();const te=Y.loose?a[o.XRANGELOOSE]:a[o.XRANGE];return Q.replace(te,(ae,ue,ee,oe,de,he)=>{d("xRange",Q,ae,ue,ee,oe,de,he);const Ee=C(ee),fe=Ee||C(oe),Se=fe||C(de),be=Se;return ue==="="&&be&&(ue=""),he=Y.includePrerelease?"-0":"",Ee?ue===">"||ue==="<"?ae="<0.0.0-0":ae="*":ue&&be?(fe&&(oe=0),de=0,ue===">"?(ue=">=",fe?(ee=+ee+1,oe=0,de=0):(oe=+oe+1,de=0)):ue==="<="&&(ue="<",fe?ee=+ee+1:oe=+oe+1),ue==="<"&&(he="-0"),ae=`${ue+ee}.${oe}.${de}${he}`):fe?ae=`>=${ee}.0.0${he} <${+ee+1}.0.0-0`:Se&&(ae=`>=${ee}.${oe}.0${he} <${ee}.${+oe+1}.0-0`),d("xRange return",ae),ae})},$=(Q,Y)=>(d("replaceStars",Q,Y),Q.trim().replace(a[o.STAR],"")),W=(Q,Y)=>(d("replaceGTE0",Q,Y),Q.trim().replace(a[Y.includePrerelease?o.GTE0PRE:o.GTE0],"")),K=Q=>(Y,te,ae,ue,ee,oe,de,he,Ee,fe,Se,be)=>(C(ae)?te="":C(ue)?te=`>=${ae}.0.0${Q?"-0":""}`:C(ee)?te=`>=${ae}.${ue}.0${Q?"-0":""}`:oe?te=`>=${te}`:te=`>=${te}${Q?"-0":""}`,C(Ee)?he="":C(fe)?he=`<${+Ee+1}.0.0-0`:C(Se)?he=`<${Ee}.${+fe+1}.0-0`:be?he=`<=${Ee}.${fe}.${Se}-${be}`:Q?he=`<${Ee}.${fe}.${+Se+1}-0`:he=`<=${he}`,`${te} ${he}`.trim()),z=(Q,Y,te)=>{for(let ae=0;ae<Q.length;ae++)if(!Q[ae].test(Y))return!1;if(Y.prerelease.length&&!te.includePrerelease){for(let ae=0;ae<Q.length;ae++)if(d(Q[ae].semver),Q[ae].semver!==m.ANY&&Q[ae].semver.prerelease.length>0){const ue=Q[ae].semver;if(ue.major===Y.major&&ue.minor===Y.minor&&ue.patch===Y.patch)return!0}return!1}return!0};return range}var comparator,hasRequiredComparator;function requireComparator(){if(hasRequiredComparator)return comparator;hasRequiredComparator=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(h,v){if(v=s(v),h instanceof t){if(h.loose===!!v.loose)return h;h=h.value}h=h.trim().split(/\s+/).join(" "),d("comparator",h,v),this.options=v,this.loose=!!v.loose,this.parse(h),this.semver===e?this.value="":this.value=this.operator+this.semver.version,d("comp",this)}parse(h){const v=this.options.loose?p[g.COMPARATORLOOSE]:p[g.COMPARATOR],_=h.match(v);if(!_)throw new TypeError(`Invalid comparator: ${h}`);this.operator=_[1]!==void 0?_[1]:"",this.operator==="="&&(this.operator=""),_[2]?this.semver=new l(_[2],this.options.loose):this.semver=e}toString(){return this.value}test(h){if(d("Comparator.test",h,this.options.loose),this.semver===e||h===e)return!0;if(typeof h=="string")try{h=new l(h,this.options)}catch{return!1}return m(h,this.operator,this.semver,this.options)}intersects(h,v){if(!(h instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new a(h.value,v).test(this.value):h.operator===""?h.value===""?!0:new a(this.value,v).test(h.semver):(v=s(v),v.includePrerelease&&(this.value==="<0.0.0-0"||h.value==="<0.0.0-0")||!v.includePrerelease&&(this.value.startsWith("<0.0.0")||h.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&h.operator.startsWith(">")||this.operator.startsWith("<")&&h.operator.startsWith("<")||this.semver.version===h.semver.version&&this.operator.includes("=")&&h.operator.includes("=")||m(this.semver,"<",h.semver,v)&&this.operator.startsWith(">")&&h.operator.startsWith("<")||m(this.semver,">",h.semver,v)&&this.operator.startsWith("<")&&h.operator.startsWith(">")))}}comparator=t;const s=requireParseOptions(),{safeRe:p,t:g}=requireRe(),m=requireCmp(),d=requireDebug(),l=requireSemver$1(),a=requireRange();return comparator}var satisfies_1,hasRequiredSatisfies;function requireSatisfies(){if(hasRequiredSatisfies)return satisfies_1;hasRequiredSatisfies=1;const e=requireRange();return satisfies_1=(s,p,g)=>{try{p=new e(p,g)}catch{return!1}return p.test(s)},satisfies_1}var toComparators_1,hasRequiredToComparators;function requireToComparators(){if(hasRequiredToComparators)return toComparators_1;hasRequiredToComparators=1;const e=requireRange();return toComparators_1=(s,p)=>new e(s,p).set.map(g=>g.map(m=>m.value).join(" ").trim().split(" ")),toComparators_1}var maxSatisfying_1,hasRequiredMaxSatisfying;function requireMaxSatisfying(){if(hasRequiredMaxSatisfying)return maxSatisfying_1;hasRequiredMaxSatisfying=1;const e=requireSemver$1(),t=requireRange();return maxSatisfying_1=(p,g,m)=>{let d=null,l=null,a=null;try{a=new t(g,m)}catch{return null}return p.forEach(o=>{a.test(o)&&(!d||l.compare(o)===-1)&&(d=o,l=new e(d,m))}),d},maxSatisfying_1}var minSatisfying_1,hasRequiredMinSatisfying;function requireMinSatisfying(){if(hasRequiredMinSatisfying)return minSatisfying_1;hasRequiredMinSatisfying=1;const e=requireSemver$1(),t=requireRange();return minSatisfying_1=(p,g,m)=>{let d=null,l=null,a=null;try{a=new t(g,m)}catch{return null}return p.forEach(o=>{a.test(o)&&(!d||l.compare(o)===1)&&(d=o,l=new e(d,m))}),d},minSatisfying_1}var minVersion_1,hasRequiredMinVersion;function requireMinVersion(){if(hasRequiredMinVersion)return minVersion_1;hasRequiredMinVersion=1;const e=requireSemver$1(),t=requireRange(),s=requireGt();return minVersion_1=(g,m)=>{g=new t(g,m);let d=new e("0.0.0");if(g.test(d)||(d=new e("0.0.0-0"),g.test(d)))return d;d=null;for(let l=0;l<g.set.length;++l){const a=g.set[l];let o=null;a.forEach(h=>{const v=new e(h.semver.version);switch(h.operator){case">":v.prerelease.length===0?v.patch++:v.prerelease.push(0),v.raw=v.format();case"":case">=":(!o||s(v,o))&&(o=v);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${h.operator}`)}}),o&&(!d||s(d,o))&&(d=o)}return d&&g.test(d)?d:null},minVersion_1}var valid,hasRequiredValid;function requireValid(){if(hasRequiredValid)return valid;hasRequiredValid=1;const e=requireRange();return valid=(s,p)=>{try{return new e(s,p).range||"*"}catch{return null}},valid}var outside_1,hasRequiredOutside;function requireOutside(){if(hasRequiredOutside)return outside_1;hasRequiredOutside=1;const e=requireSemver$1(),t=requireComparator(),{ANY:s}=t,p=requireRange(),g=requireSatisfies(),m=requireGt(),d=requireLt(),l=requireLte(),a=requireGte();return outside_1=(h,v,_,y)=>{h=new e(h,y),v=new p(v,y);let w,T,I,O,E;switch(_){case">":w=m,T=l,I=d,O=">",E=">=";break;case"<":w=d,T=a,I=m,O="<",E="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(g(h,v,y))return!1;for(let C=0;C<v.set.length;++C){const x=v.set[C];let j=null,D=null;if(x.forEach(k=>{k.semver===s&&(k=new t(">=0.0.0")),j=j||k,D=D||k,w(k.semver,j.semver,y)?j=k:I(k.semver,D.semver,y)&&(D=k)}),j.operator===O||j.operator===E||(!D.operator||D.operator===O)&&T(h,D.semver))return!1;if(D.operator===E&&I(h,D.semver))return!1}return!0},outside_1}var gtr_1,hasRequiredGtr;function requireGtr(){if(hasRequiredGtr)return gtr_1;hasRequiredGtr=1;const e=requireOutside();return gtr_1=(s,p,g)=>e(s,p,">",g),gtr_1}var ltr_1,hasRequiredLtr;function requireLtr(){if(hasRequiredLtr)return ltr_1;hasRequiredLtr=1;const e=requireOutside();return ltr_1=(s,p,g)=>e(s,p,"<",g),ltr_1}var intersects_1,hasRequiredIntersects;function requireIntersects(){if(hasRequiredIntersects)return intersects_1;hasRequiredIntersects=1;const e=requireRange();return intersects_1=(s,p,g)=>(s=new e(s,g),p=new e(p,g),s.intersects(p,g)),intersects_1}var simplify,hasRequiredSimplify;function requireSimplify(){if(hasRequiredSimplify)return simplify;hasRequiredSimplify=1;const e=requireSatisfies(),t=requireCompare();return simplify=(s,p,g)=>{const m=[];let d=null,l=null;const a=s.sort((_,y)=>t(_,y,g));for(const _ of a)e(_,p,g)?(l=_,d||(d=_)):(l&&m.push([d,l]),l=null,d=null);d&&m.push([d,null]);const o=[];for(const[_,y]of m)_===y?o.push(_):!y&&_===a[0]?o.push("*"):y?_===a[0]?o.push(`<=${y}`):o.push(`${_} - ${y}`):o.push(`>=${_}`);const h=o.join(" || "),v=typeof p.raw=="string"?p.raw:String(p);return h.length<v.length?h:p},simplify}var subset_1,hasRequiredSubset;function requireSubset(){if(hasRequiredSubset)return subset_1;hasRequiredSubset=1;const e=requireRange(),t=requireComparator(),{ANY:s}=t,p=requireSatisfies(),g=requireCompare(),m=(v,_,y={})=>{if(v===_)return!0;v=new e(v,y),_=new e(_,y);let w=!1;e:for(const T of v.set){for(const I of _.set){const O=a(T,I,y);if(w=w||O!==null,O)continue e}if(w)return!1}return!0},d=[new t(">=0.0.0-0")],l=[new t(">=0.0.0")],a=(v,_,y)=>{if(v===_)return!0;if(v.length===1&&v[0].semver===s){if(_.length===1&&_[0].semver===s)return!0;y.includePrerelease?v=d:v=l}if(_.length===1&&_[0].semver===s){if(y.includePrerelease)return!0;_=l}const w=new Set;let T,I;for(const q of v)q.operator===">"||q.operator===">="?T=o(T,q,y):q.operator==="<"||q.operator==="<="?I=h(I,q,y):w.add(q.semver);if(w.size>1)return null;let O;if(T&&I){if(O=g(T.semver,I.semver,y),O>0)return null;if(O===0&&(T.operator!==">="||I.operator!=="<="))return null}for(const q of w){if(T&&!p(q,String(T),y)||I&&!p(q,String(I),y))return null;for(const G of _)if(!p(q,String(G),y))return!1;return!0}let E,C,x,j,D=I&&!y.includePrerelease&&I.semver.prerelease.length?I.semver:!1,k=T&&!y.includePrerelease&&T.semver.prerelease.length?T.semver:!1;D&&D.prerelease.length===1&&I.operator==="<"&&D.prerelease[0]===0&&(D=!1);for(const q of _){if(j=j||q.operator===">"||q.operator===">=",x=x||q.operator==="<"||q.operator==="<=",T){if(k&&q.semver.prerelease&&q.semver.prerelease.length&&q.semver.major===k.major&&q.semver.minor===k.minor&&q.semver.patch===k.patch&&(k=!1),q.operator===">"||q.operator===">="){if(E=o(T,q,y),E===q&&E!==T)return!1}else if(T.operator===">="&&!p(T.semver,String(q),y))return!1}if(I){if(D&&q.semver.prerelease&&q.semver.prerelease.length&&q.semver.major===D.major&&q.semver.minor===D.minor&&q.semver.patch===D.patch&&(D=!1),q.operator==="<"||q.operator==="<="){if(C=h(I,q,y),C===q&&C!==I)return!1}else if(I.operator==="<="&&!p(I.semver,String(q),y))return!1}if(!q.operator&&(I||T)&&O!==0)return!1}return!(T&&x&&!I&&O!==0||I&&j&&!T&&O!==0||k||D)},o=(v,_,y)=>{if(!v)return _;const w=g(v.semver,_.semver,y);return w>0?v:w<0||_.operator===">"&&v.operator===">="?_:v},h=(v,_,y)=>{if(!v)return _;const w=g(v.semver,_.semver,y);return w<0?v:w>0||_.operator==="<"&&v.operator==="<="?_:v};return subset_1=m,subset_1}var semver,hasRequiredSemver;function requireSemver(){if(hasRequiredSemver)return semver;hasRequiredSemver=1;const e=requireRe(),t=requireConstants$1(),s=requireSemver$1(),p=requireIdentifiers(),g=requireParse$3(),m=requireValid$1(),d=requireClean(),l=requireInc(),a=requireDiff(),o=requireMajor(),h=requireMinor(),v=requirePatch(),_=requirePrerelease(),y=requireCompare(),w=requireRcompare(),T=requireCompareLoose(),I=requireCompareBuild(),O=requireSort(),E=requireRsort(),C=requireGt(),x=requireLt(),j=requireEq(),D=requireNeq(),k=requireGte(),q=requireLte(),G=requireCmp(),$=requireCoerce(),W=requireComparator(),K=requireRange(),z=requireSatisfies(),Q=requireToComparators(),Y=requireMaxSatisfying(),te=requireMinSatisfying(),ae=requireMinVersion(),ue=requireValid(),ee=requireOutside(),oe=requireGtr(),de=requireLtr(),he=requireIntersects(),Ee=requireSimplify(),fe=requireSubset();return semver={parse:g,valid:m,clean:d,inc:l,diff:a,major:o,minor:h,patch:v,prerelease:_,compare:y,rcompare:w,compareLoose:T,compareBuild:I,sort:O,rsort:E,gt:C,lt:x,eq:j,neq:D,gte:k,lte:q,cmp:G,coerce:$,Comparator:W,Range:K,satisfies:z,toComparators:Q,maxSatisfying:Y,minSatisfying:te,minVersion:ae,validRange:ue,outside:ee,gtr:oe,ltr:de,intersects:he,simplifyRange:Ee,subset:fe,SemVer:s,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:p.compareIdentifiers,rcompareIdentifiers:p.rcompareIdentifiers},semver}var asymmetricKeyDetailsSupported,hasRequiredAsymmetricKeyDetailsSupported;function requireAsymmetricKeyDetailsSupported(){if(hasRequiredAsymmetricKeyDetailsSupported)return asymmetricKeyDetailsSupported;hasRequiredAsymmetricKeyDetailsSupported=1;var e={};return asymmetricKeyDetailsSupported=requireSemver().satisfies(e.version,">=15.7.0"),asymmetricKeyDetailsSupported}var rsaPssKeyDetailsSupported,hasRequiredRsaPssKeyDetailsSupported;function requireRsaPssKeyDetailsSupported(){if(hasRequiredRsaPssKeyDetailsSupported)return rsaPssKeyDetailsSupported;hasRequiredRsaPssKeyDetailsSupported=1;var e={};return rsaPssKeyDetailsSupported=requireSemver().satisfies(e.version,">=16.9.0"),rsaPssKeyDetailsSupported}var validateAsymmetricKey,hasRequiredValidateAsymmetricKey;function requireValidateAsymmetricKey(){if(hasRequiredValidateAsymmetricKey)return validateAsymmetricKey;hasRequiredValidateAsymmetricKey=1;const e=requireAsymmetricKeyDetailsSupported(),t=requireRsaPssKeyDetailsSupported(),s={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},p={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};return validateAsymmetricKey=function(g,m){if(!g||!m)return;const d=m.asymmetricKeyType;if(!d)return;const l=s[d];if(!l)throw new Error(`Unknown key type "${d}".`);if(!l.includes(g))throw new Error(`"alg" parameter for "${d}" key type must be one of: ${l.join(", ")}.`);if(e)switch(d){case"ec":const a=m.asymmetricKeyDetails.namedCurve,o=p[g];if(a!==o)throw new Error(`"alg" parameter "${g}" requires curve "${o}".`);break;case"rsa-pss":if(t){const h=parseInt(g.slice(-3),10),{hashAlgorithm:v,mgf1HashAlgorithm:_,saltLength:y}=m.asymmetricKeyDetails;if(v!==`sha${h}`||_!==v)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${g}.`);if(y!==void 0&&y>h>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${g}.`)}break}},validateAsymmetricKey}var psSupported,hasRequiredPsSupported;function requirePsSupported(){if(hasRequiredPsSupported)return psSupported;hasRequiredPsSupported=1;var e={},t=requireSemver();return psSupported=t.satisfies(e.version,"^6.12.0 || >=8.0.0"),psSupported}var verify$1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify$1;hasRequiredVerify=1;const e=requireJsonWebTokenError(),t=requireNotBeforeError(),s=requireTokenExpiredError(),p=requireDecode(),g=requireTimespan(),m=requireValidateAsymmetricKey(),d=requirePsSupported(),l=requireJws(),{KeyObject:a,createSecretKey:o,createPublicKey:h}=require$$1$3,v=["RS256","RS384","RS512"],_=["ES256","ES384","ES512"],y=["RS256","RS384","RS512"],w=["HS256","HS384","HS512"];return d&&(v.splice(v.length,0,"PS256","PS384","PS512"),y.splice(y.length,0,"PS256","PS384","PS512")),verify$1=function(T,I,O,E){typeof O=="function"&&!E&&(E=O,O={}),O||(O={}),O=Object.assign({},O);let C;if(E?C=E:C=function(G,$){if(G)throw G;return $},O.clockTimestamp&&typeof O.clockTimestamp!="number")return C(new e("clockTimestamp must be a number"));if(O.nonce!==void 0&&(typeof O.nonce!="string"||O.nonce.trim()===""))return C(new e("nonce must be a non-empty string"));if(O.allowInvalidAsymmetricKeyTypes!==void 0&&typeof O.allowInvalidAsymmetricKeyTypes!="boolean")return C(new e("allowInvalidAsymmetricKeyTypes must be a boolean"));const x=O.clockTimestamp||Math.floor(Date.now()/1e3);if(!T)return C(new e("jwt must be provided"));if(typeof T!="string")return C(new e("jwt must be a string"));const j=T.split(".");if(j.length!==3)return C(new e("jwt malformed"));let D;try{D=p(T,{complete:!0})}catch(G){return C(G)}if(!D)return C(new e("invalid token"));const k=D.header;let q;if(typeof I=="function"){if(!E)return C(new e("verify must be called asynchronous if secret or public key is provided as a callback"));q=I}else q=function(G,$){return $(null,I)};return q(k,function(G,$){if(G)return C(new e("error in secret or public key callback: "+G.message));const W=j[2].trim()!=="";if(!W&&$)return C(new e("jwt signature is required"));if(W&&!$)return C(new e("secret or public key must be provided"));if(!W&&!O.algorithms)return C(new e('please specify "none" in "algorithms" to verify unsigned tokens'));if($!=null&&!($ instanceof a))try{$=h($)}catch{try{$=o(typeof $=="string"?Buffer.from($):$)}catch{return C(new e("secretOrPublicKey is not valid key material"))}}if(O.algorithms||($.type==="secret"?O.algorithms=w:["rsa","rsa-pss"].includes($.asymmetricKeyType)?O.algorithms=y:$.asymmetricKeyType==="ec"?O.algorithms=_:O.algorithms=v),O.algorithms.indexOf(D.header.alg)===-1)return C(new e("invalid algorithm"));if(k.alg.startsWith("HS")&&$.type!=="secret")return C(new e(`secretOrPublicKey must be a symmetric key when using ${k.alg}`));if(/^(?:RS|PS|ES)/.test(k.alg)&&$.type!=="public")return C(new e(`secretOrPublicKey must be an asymmetric key when using ${k.alg}`));if(!O.allowInvalidAsymmetricKeyTypes)try{m(k.alg,$)}catch(Q){return C(Q)}let K;try{K=l.verify(T,D.header.alg,$)}catch(Q){return C(Q)}if(!K)return C(new e("invalid signature"));const z=D.payload;if(typeof z.nbf<"u"&&!O.ignoreNotBefore){if(typeof z.nbf!="number")return C(new e("invalid nbf value"));if(z.nbf>x+(O.clockTolerance||0))return C(new t("jwt not active",new Date(z.nbf*1e3)))}if(typeof z.exp<"u"&&!O.ignoreExpiration){if(typeof z.exp!="number")return C(new e("invalid exp value"));if(x>=z.exp+(O.clockTolerance||0))return C(new s("jwt expired",new Date(z.exp*1e3)))}if(O.audience){const Q=Array.isArray(O.audience)?O.audience:[O.audience];if(!(Array.isArray(z.aud)?z.aud:[z.aud]).some(function(ae){return Q.some(function(ue){return ue instanceof RegExp?ue.test(ae):ue===ae})}))return C(new e("jwt audience invalid. expected: "+Q.join(" or ")))}if(O.issuer&&(typeof O.issuer=="string"&&z.iss!==O.issuer||Array.isArray(O.issuer)&&O.issuer.indexOf(z.iss)===-1))return C(new e("jwt issuer invalid. expected: "+O.issuer));if(O.subject&&z.sub!==O.subject)return C(new e("jwt subject invalid. expected: "+O.subject));if(O.jwtid&&z.jti!==O.jwtid)return C(new e("jwt jwtid invalid. expected: "+O.jwtid));if(O.nonce&&z.nonce!==O.nonce)return C(new e("jwt nonce invalid. expected: "+O.nonce));if(O.maxAge){if(typeof z.iat!="number")return C(new e("iat required when maxAge is specified"));const Q=g(O.maxAge,z.iat);if(typeof Q>"u")return C(new e('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(x>=Q+(O.clockTolerance||0))return C(new s("maxAge exceeded",new Date(Q*1e3)))}if(O.complete===!0){const Q=D.signature;return C(null,{header:k,payload:z,signature:Q})}return C(null,z)})},verify$1}var lodash_includes,hasRequiredLodash_includes;function requireLodash_includes(){if(hasRequiredLodash_includes)return lodash_includes;hasRequiredLodash_includes=1;var e=1/0,t=9007199254740991,s=17976931348623157e292,p=NaN,g="[object Arguments]",m="[object Function]",d="[object GeneratorFunction]",l="[object String]",a="[object Symbol]",o=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,v=/^0b[01]+$/i,_=/^0o[0-7]+$/i,y=/^(?:0|[1-9]\d*)$/,w=parseInt;function T(A,V){for(var ne=-1,ce=A?A.length:0,ie=Array(ce);++ne<ce;)ie[ne]=V(A[ne],ne,A);return ie}function I(A,V,ne,ce){for(var ie=A.length,u=ne+-1;++u<ie;)if(V(A[u],u,A))return u;return-1}function O(A,V,ne){if(V!==V)return I(A,E,ne);for(var ce=ne-1,ie=A.length;++ce<ie;)if(A[ce]===V)return ce;return-1}function E(A){return A!==A}function C(A,V){for(var ne=-1,ce=Array(A);++ne<A;)ce[ne]=V(ne);return ce}function x(A,V){return T(V,function(ne){return A[ne]})}function j(A,V){return function(ne){return A(V(ne))}}var D=Object.prototype,k=D.hasOwnProperty,q=D.toString,G=D.propertyIsEnumerable,$=j(Object.keys,Object),W=Math.max;function K(A,V){var ne=ue(A)||ae(A)?C(A.length,String):[],ce=ne.length,ie=!!ce;for(var u in A)k.call(A,u)&&!(ie&&(u=="length"||Q(u,ce)))&&ne.push(u);return ne}function z(A){if(!Y(A))return $(A);var V=[];for(var ne in Object(A))k.call(A,ne)&&ne!="constructor"&&V.push(ne);return V}function Q(A,V){return V=V??t,!!V&&(typeof A=="number"||y.test(A))&&A>-1&&A%1==0&&A<V}function Y(A){var V=A&&A.constructor,ne=typeof V=="function"&&V.prototype||D;return A===ne}function te(A,V,ne,ce){A=ee(A)?A:N(A),ne=ne&&!ce?ge(ne):0;var ie=A.length;return ne<0&&(ne=W(ie+ne,0)),Se(A)?ne<=ie&&A.indexOf(V,ne)>-1:!!ie&&O(A,V,ne)>-1}function ae(A){return oe(A)&&k.call(A,"callee")&&(!G.call(A,"callee")||q.call(A)==g)}var ue=Array.isArray;function ee(A){return A!=null&&he(A.length)&&!de(A)}function oe(A){return fe(A)&&ee(A)}function de(A){var V=Ee(A)?q.call(A):"";return V==m||V==d}function he(A){return typeof A=="number"&&A>-1&&A%1==0&&A<=t}function Ee(A){var V=typeof A;return!!A&&(V=="object"||V=="function")}function fe(A){return!!A&&typeof A=="object"}function Se(A){return typeof A=="string"||!ue(A)&&fe(A)&&q.call(A)==l}function be(A){return typeof A=="symbol"||fe(A)&&q.call(A)==a}function Oe(A){if(!A)return A===0?A:0;if(A=J(A),A===e||A===-e){var V=A<0?-1:1;return V*s}return A===A?A:0}function ge(A){var V=Oe(A),ne=V%1;return V===V?ne?V-ne:V:0}function J(A){if(typeof A=="number")return A;if(be(A))return p;if(Ee(A)){var V=typeof A.valueOf=="function"?A.valueOf():A;A=Ee(V)?V+"":V}if(typeof A!="string")return A===0?A:+A;A=A.replace(o,"");var ne=v.test(A);return ne||_.test(A)?w(A.slice(2),ne?2:8):h.test(A)?p:+A}function c(A){return ee(A)?K(A):z(A)}function N(A){return A?x(A,c(A)):[]}return lodash_includes=te,lodash_includes}var lodash_isboolean,hasRequiredLodash_isboolean;function requireLodash_isboolean(){if(hasRequiredLodash_isboolean)return lodash_isboolean;hasRequiredLodash_isboolean=1;var e="[object Boolean]",t=Object.prototype,s=t.toString;function p(m){return m===!0||m===!1||g(m)&&s.call(m)==e}function g(m){return!!m&&typeof m=="object"}return lodash_isboolean=p,lodash_isboolean}var lodash_isinteger,hasRequiredLodash_isinteger;function requireLodash_isinteger(){if(hasRequiredLodash_isinteger)return lodash_isinteger;hasRequiredLodash_isinteger=1;var e=1/0,t=17976931348623157e292,s=NaN,p="[object Symbol]",g=/^\s+|\s+$/g,m=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,l=/^0o[0-7]+$/i,a=parseInt,o=Object.prototype,h=o.toString;function v(E){return typeof E=="number"&&E==I(E)}function _(E){var C=typeof E;return!!E&&(C=="object"||C=="function")}function y(E){return!!E&&typeof E=="object"}function w(E){return typeof E=="symbol"||y(E)&&h.call(E)==p}function T(E){if(!E)return E===0?E:0;if(E=O(E),E===e||E===-e){var C=E<0?-1:1;return C*t}return E===E?E:0}function I(E){var C=T(E),x=C%1;return C===C?x?C-x:C:0}function O(E){if(typeof E=="number")return E;if(w(E))return s;if(_(E)){var C=typeof E.valueOf=="function"?E.valueOf():E;E=_(C)?C+"":C}if(typeof E!="string")return E===0?E:+E;E=E.replace(g,"");var x=d.test(E);return x||l.test(E)?a(E.slice(2),x?2:8):m.test(E)?s:+E}return lodash_isinteger=v,lodash_isinteger}var lodash_isnumber,hasRequiredLodash_isnumber;function requireLodash_isnumber(){if(hasRequiredLodash_isnumber)return lodash_isnumber;hasRequiredLodash_isnumber=1;var e="[object Number]",t=Object.prototype,s=t.toString;function p(m){return!!m&&typeof m=="object"}function g(m){return typeof m=="number"||p(m)&&s.call(m)==e}return lodash_isnumber=g,lodash_isnumber}var lodash_isplainobject,hasRequiredLodash_isplainobject;function requireLodash_isplainobject(){if(hasRequiredLodash_isplainobject)return lodash_isplainobject;hasRequiredLodash_isplainobject=1;var e="[object Object]";function t(_){var y=!1;if(_!=null&&typeof _.toString!="function")try{y=!!(_+"")}catch{}return y}function s(_,y){return function(w){return _(y(w))}}var p=Function.prototype,g=Object.prototype,m=p.toString,d=g.hasOwnProperty,l=m.call(Object),a=g.toString,o=s(Object.getPrototypeOf,Object);function h(_){return!!_&&typeof _=="object"}function v(_){if(!h(_)||a.call(_)!=e||t(_))return!1;var y=o(_);if(y===null)return!0;var w=d.call(y,"constructor")&&y.constructor;return typeof w=="function"&&w instanceof w&&m.call(w)==l}return lodash_isplainobject=v,lodash_isplainobject}var lodash_isstring,hasRequiredLodash_isstring;function requireLodash_isstring(){if(hasRequiredLodash_isstring)return lodash_isstring;hasRequiredLodash_isstring=1;var e="[object String]",t=Object.prototype,s=t.toString,p=Array.isArray;function g(d){return!!d&&typeof d=="object"}function m(d){return typeof d=="string"||!p(d)&&g(d)&&s.call(d)==e}return lodash_isstring=m,lodash_isstring}var lodash_once,hasRequiredLodash_once;function requireLodash_once(){if(hasRequiredLodash_once)return lodash_once;hasRequiredLodash_once=1;var e="Expected a function",t=1/0,s=17976931348623157e292,p=NaN,g="[object Symbol]",m=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt,h=Object.prototype,v=h.toString;function _(x,j){var D;if(typeof j!="function")throw new TypeError(e);return x=E(x),function(){return--x>0&&(D=j.apply(this,arguments)),x<=1&&(j=void 0),D}}function y(x){return _(2,x)}function w(x){var j=typeof x;return!!x&&(j=="object"||j=="function")}function T(x){return!!x&&typeof x=="object"}function I(x){return typeof x=="symbol"||T(x)&&v.call(x)==g}function O(x){if(!x)return x===0?x:0;if(x=C(x),x===t||x===-t){var j=x<0?-1:1;return j*s}return x===x?x:0}function E(x){var j=O(x),D=j%1;return j===j?D?j-D:j:0}function C(x){if(typeof x=="number")return x;if(I(x))return p;if(w(x)){var j=typeof x.valueOf=="function"?x.valueOf():x;x=w(j)?j+"":j}if(typeof x!="string")return x===0?x:+x;x=x.replace(m,"");var D=l.test(x);return D||a.test(x)?o(x.slice(2),D?2:8):d.test(x)?p:+x}return lodash_once=y,lodash_once}var sign$1,hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign$1;hasRequiredSign=1;const e=requireTimespan(),t=requirePsSupported(),s=requireValidateAsymmetricKey(),p=requireJws(),g=requireLodash_includes(),m=requireLodash_isboolean(),d=requireLodash_isinteger(),l=requireLodash_isnumber(),a=requireLodash_isplainobject(),o=requireLodash_isstring(),h=requireLodash_once(),{KeyObject:v,createSecretKey:_,createPrivateKey:y}=require$$1$3,w=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];t&&w.splice(3,0,"PS256","PS384","PS512");const T={expiresIn:{isValid:function(D){return d(D)||o(D)&&D},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(D){return d(D)||o(D)&&D},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(D){return o(D)||Array.isArray(D)},message:'"audience" must be a string or array'},algorithm:{isValid:g.bind(null,w),message:'"algorithm" must be a valid string enum value'},header:{isValid:a,message:'"header" must be an object'},encoding:{isValid:o,message:'"encoding" must be a string'},issuer:{isValid:o,message:'"issuer" must be a string'},subject:{isValid:o,message:'"subject" must be a string'},jwtid:{isValid:o,message:'"jwtid" must be a string'},noTimestamp:{isValid:m,message:'"noTimestamp" must be a boolean'},keyid:{isValid:o,message:'"keyid" must be a string'},mutatePayload:{isValid:m,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:m,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:m,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},I={iat:{isValid:l,message:'"iat" should be a number of seconds'},exp:{isValid:l,message:'"exp" should be a number of seconds'},nbf:{isValid:l,message:'"nbf" should be a number of seconds'}};function O(D,k,q,G){if(!a(q))throw new Error('Expected "'+G+'" to be a plain object.');Object.keys(q).forEach(function($){const W=D[$];if(!W){if(!k)throw new Error('"'+$+'" is not allowed in "'+G+'"');return}if(!W.isValid(q[$]))throw new Error(W.message)})}function E(D){return O(T,!1,D,"options")}function C(D){return O(I,!0,D,"payload")}const x={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},j=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];return sign$1=function(D,k,q,G){typeof q=="function"?(G=q,q={}):q=q||{};const $=typeof D=="object"&&!Buffer.isBuffer(D),W=Object.assign({alg:q.algorithm||"HS256",typ:$?"JWT":void 0,kid:q.keyid},q.header);function K(Y){if(G)return G(Y);throw Y}if(!k&&q.algorithm!=="none")return K(new Error("secretOrPrivateKey must have a value"));if(k!=null&&!(k instanceof v))try{k=y(k)}catch{try{k=_(typeof k=="string"?Buffer.from(k):k)}catch{return K(new Error("secretOrPrivateKey is not valid key material"))}}if(W.alg.startsWith("HS")&&k.type!=="secret")return K(new Error(`secretOrPrivateKey must be a symmetric key when using ${W.alg}`));if(/^(?:RS|PS|ES)/.test(W.alg)){if(k.type!=="private")return K(new Error(`secretOrPrivateKey must be an asymmetric key when using ${W.alg}`));if(!q.allowInsecureKeySizes&&!W.alg.startsWith("ES")&&k.asymmetricKeyDetails!==void 0&&k.asymmetricKeyDetails.modulusLength<2048)return K(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${W.alg}`))}if(typeof D>"u")return K(new Error("payload is required"));if($){try{C(D)}catch(Y){return K(Y)}q.mutatePayload||(D=Object.assign({},D))}else{const Y=j.filter(function(te){return typeof q[te]<"u"});if(Y.length>0)return K(new Error("invalid "+Y.join(",")+" option for "+typeof D+" payload"))}if(typeof D.exp<"u"&&typeof q.expiresIn<"u")return K(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof D.nbf<"u"&&typeof q.notBefore<"u")return K(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{E(q)}catch(Y){return K(Y)}if(!q.allowInvalidAsymmetricKeyTypes)try{s(W.alg,k)}catch(Y){return K(Y)}const z=D.iat||Math.floor(Date.now()/1e3);if(q.noTimestamp?delete D.iat:$&&(D.iat=z),typeof q.notBefore<"u"){try{D.nbf=e(q.notBefore,z)}catch(Y){return K(Y)}if(typeof D.nbf>"u")return K(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof q.expiresIn<"u"&&typeof D=="object"){try{D.exp=e(q.expiresIn,z)}catch(Y){return K(Y)}if(typeof D.exp>"u")return K(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(x).forEach(function(Y){const te=x[Y];if(typeof q[Y]<"u"){if(typeof D[te]<"u")return K(new Error('Bad "options.'+Y+'" option. The payload already has an "'+te+'" property.'));D[te]=q[Y]}});const Q=q.encoding||"utf8";if(typeof G=="function")G=G&&h(G),p.createSign({header:W,privateKey:k,payload:D,encoding:Q}).once("error",G).once("done",function(Y){if(!q.allowInsecureKeySizes&&/^(?:RS|PS)/.test(W.alg)&&Y.length<256)return G(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${W.alg}`));G(null,Y)});else{let Y=p.sign({header:W,payload:D,secret:k,encoding:Q});if(!q.allowInsecureKeySizes&&/^(?:RS|PS)/.test(W.alg)&&Y.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${W.alg}`);return Y}},sign$1}var jsonwebtoken,hasRequiredJsonwebtoken;function requireJsonwebtoken(){return hasRequiredJsonwebtoken||(hasRequiredJsonwebtoken=1,jsonwebtoken={decode:requireDecode(),verify:requireVerify(),sign:requireSign(),JsonWebTokenError:requireJsonWebTokenError(),NotBeforeError:requireNotBeforeError(),TokenExpiredError:requireTokenExpiredError()}),jsonwebtoken}var src$a={exports:{}};const crypto$1=crypto,isCryptoKey=e=>e instanceof CryptoKey,digest=async(e,t)=>{const s=`SHA-${e.slice(-3)}`;return new Uint8Array(await crypto$1.subtle.digest(s,t))},encoder=new TextEncoder,decoder=new TextDecoder,MAX_INT32=2**32;function concat(...e){const t=e.reduce((g,{length:m})=>g+m,0),s=new Uint8Array(t);let p=0;return e.forEach(g=>{s.set(g,p),p+=g.length}),s}function p2s(e,t){return concat(encoder.encode(e),new Uint8Array([0]),t)}function writeUInt32BE(e,t,s){if(t<0||t>=MAX_INT32)throw new RangeError(`value must be >= 0 and <= ${MAX_INT32-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,t&255],s)}function uint64be(e){const t=Math.floor(e/MAX_INT32),s=e%MAX_INT32,p=new Uint8Array(8);return writeUInt32BE(p,t,0),writeUInt32BE(p,s,4),p}function uint32be(e){const t=new Uint8Array(4);return writeUInt32BE(t,e),t}function lengthAndInput(e){return concat(uint32be(e.length),e)}async function concatKdf(e,t,s){const p=Math.ceil((t>>3)/32),g=new Uint8Array(p*32);for(let m=0;m<p;m++){const d=new Uint8Array(4+e.length+s.length);d.set(uint32be(m+1)),d.set(e,4),d.set(s,4+e.length),g.set(await digest("sha256",d),m*32)}return g.slice(0,t>>3)}const encodeBase64=e=>{let t=e;typeof t=="string"&&(t=encoder.encode(t));const s=32768,p=[];for(let g=0;g<t.length;g+=s)p.push(String.fromCharCode.apply(null,t.subarray(g,g+s)));return btoa(p.join(""))},encode$1=e=>encodeBase64(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),decodeBase64=e=>{const t=atob(e),s=new Uint8Array(t.length);for(let p=0;p<t.length;p++)s[p]=t.charCodeAt(p);return s},decode$1=e=>{let t=e;t instanceof Uint8Array&&(t=decoder.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return decodeBase64(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class JOSEError extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(t){var s;super(t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(s=Error.captureStackTrace)===null||s===void 0||s.call(Error,this,this.constructor)}}class JWTClaimValidationFailed extends JOSEError{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(t,s="unspecified",p="unspecified"){super(t),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=s,this.reason=p}}class JWTExpired extends JOSEError{static get code(){return"ERR_JWT_EXPIRED"}constructor(t,s="unspecified",p="unspecified"){super(t),this.code="ERR_JWT_EXPIRED",this.claim=s,this.reason=p}}class JOSEAlgNotAllowed extends JOSEError{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class JOSENotSupported extends JOSEError{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class JWEDecryptionFailed extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class JWEDecompressionFailed extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_DECOMPRESSION_FAILED",this.message="decompression operation failed"}static get code(){return"ERR_JWE_DECOMPRESSION_FAILED"}}class JWEInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class JWSInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class JWTInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class JWKInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class JWKSInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class JWKSNoMatchingKey extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class JWKSMultipleMatchingKeys extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class JWKSTimeout extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class JWSSignatureVerificationFailed extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}const errors$1=Object.freeze(Object.defineProperty({__proto__:null,JOSEAlgNotAllowed,JOSEError,JOSENotSupported,JWEDecompressionFailed,JWEDecryptionFailed,JWEInvalid,JWKInvalid,JWKSInvalid,JWKSMultipleMatchingKeys,JWKSNoMatchingKey,JWKSTimeout,JWSInvalid,JWSSignatureVerificationFailed,JWTClaimValidationFailed,JWTExpired,JWTInvalid},Symbol.toStringTag,{value:"Module"})),random=crypto$1.getRandomValues.bind(crypto$1);function bitLength$1(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new JOSENotSupported(`Unsupported JWE Algorithm: ${e}`)}}const generateIv=e=>random(new Uint8Array(bitLength$1(e)>>3)),checkIvLength=(e,t)=>{if(t.length<<3!==bitLength$1(e))throw new JWEInvalid("Invalid Initialization Vector length")},checkCekLength=(e,t)=>{const s=e.byteLength<<3;if(s!==t)throw new JWEInvalid(`Invalid Content Encryption Key length. Expected ${t} bits, got ${s} bits`)},timingSafeEqual=(e,t)=>{if(!(e instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(e.length!==t.length)throw new TypeError("Input buffers must have the same length");const s=e.length;let p=0,g=-1;for(;++g<s;)p|=e[g]^t[g];return p===0};function unusable(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function isAlgorithm(e,t){return e.name===t}function getHashLength(e){return parseInt(e.name.slice(4),10)}function getNamedCurve$1(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function checkUsage(e,t){if(t.length&&!t.some(s=>e.usages.includes(s))){let s="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const p=t.pop();s+=`one of ${t.join(", ")}, or ${p}.`}else t.length===2?s+=`one of ${t[0]} or ${t[1]}.`:s+=`${t[0]}.`;throw new TypeError(s)}}function checkSigCryptoKey(e,t,...s){switch(t){case"HS256":case"HS384":case"HS512":{if(!isAlgorithm(e.algorithm,"HMAC"))throw unusable("HMAC");const p=parseInt(t.slice(2),10);if(getHashLength(e.algorithm.hash)!==p)throw unusable(`SHA-${p}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!isAlgorithm(e.algorithm,"RSASSA-PKCS1-v1_5"))throw unusable("RSASSA-PKCS1-v1_5");const p=parseInt(t.slice(2),10);if(getHashLength(e.algorithm.hash)!==p)throw unusable(`SHA-${p}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!isAlgorithm(e.algorithm,"RSA-PSS"))throw unusable("RSA-PSS");const p=parseInt(t.slice(2),10);if(getHashLength(e.algorithm.hash)!==p)throw unusable(`SHA-${p}`,"algorithm.hash");break}case"EdDSA":{if(e.algorithm.name!=="Ed25519"&&e.algorithm.name!=="Ed448")throw unusable("Ed25519 or Ed448");break}case"ES256":case"ES384":case"ES512":{if(!isAlgorithm(e.algorithm,"ECDSA"))throw unusable("ECDSA");const p=getNamedCurve$1(t);if(e.algorithm.namedCurve!==p)throw unusable(p,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}checkUsage(e,s)}function checkEncCryptoKey(e,t,...s){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!isAlgorithm(e.algorithm,"AES-GCM"))throw unusable("AES-GCM");const p=parseInt(t.slice(1,4),10);if(e.algorithm.length!==p)throw unusable(p,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!isAlgorithm(e.algorithm,"AES-KW"))throw unusable("AES-KW");const p=parseInt(t.slice(1,4),10);if(e.algorithm.length!==p)throw unusable(p,"algorithm.length");break}case"ECDH":{switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw unusable("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!isAlgorithm(e.algorithm,"PBKDF2"))throw unusable("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!isAlgorithm(e.algorithm,"RSA-OAEP"))throw unusable("RSA-OAEP");const p=parseInt(t.slice(9),10)||1;if(getHashLength(e.algorithm.hash)!==p)throw unusable(`SHA-${p}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}checkUsage(e,s)}function message$1(e,t,...s){if(s.length>2){const p=s.pop();e+=`one of type ${s.join(", ")}, or ${p}.`}else s.length===2?e+=`one of type ${s[0]} or ${s[1]}.`:e+=`of type ${s[0]}.`;return t==null?e+=` Received ${t}`:typeof t=="function"&&t.name?e+=` Received function ${t.name}`:typeof t=="object"&&t!=null&&t.constructor&&t.constructor.name&&(e+=` Received an instance of ${t.constructor.name}`),e}const invalidKeyInput=(e,...t)=>message$1("Key must be ",e,...t);function withAlg(e,t,...s){return message$1(`Key for the ${e} algorithm must be `,t,...s)}const isKeyLike=e=>isCryptoKey(e),types$4=["CryptoKey"];async function cbcDecrypt(e,t,s,p,g,m){if(!(t instanceof Uint8Array))throw new TypeError(invalidKeyInput(t,"Uint8Array"));const d=parseInt(e.slice(1,4),10),l=await crypto$1.subtle.importKey("raw",t.subarray(d>>3),"AES-CBC",!1,["decrypt"]),a=await crypto$1.subtle.importKey("raw",t.subarray(0,d>>3),{hash:`SHA-${d<<1}`,name:"HMAC"},!1,["sign"]),o=concat(m,p,s,uint64be(m.length<<3)),h=new Uint8Array((await crypto$1.subtle.sign("HMAC",a,o)).slice(0,d>>3));let v;try{v=timingSafeEqual(g,h)}catch{}if(!v)throw new JWEDecryptionFailed;let _;try{_=new Uint8Array(await crypto$1.subtle.decrypt({iv:p,name:"AES-CBC"},l,s))}catch{}if(!_)throw new JWEDecryptionFailed;return _}async function gcmDecrypt(e,t,s,p,g,m){let d;t instanceof Uint8Array?d=await crypto$1.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(checkEncCryptoKey(t,e,"decrypt"),d=t);try{return new Uint8Array(await crypto$1.subtle.decrypt({additionalData:m,iv:p,name:"AES-GCM",tagLength:128},d,concat(s,g)))}catch{throw new JWEDecryptionFailed}}const decrypt$2=async(e,t,s,p,g,m)=>{if(!isCryptoKey(t)&&!(t instanceof Uint8Array))throw new TypeError(invalidKeyInput(t,...types$4,"Uint8Array"));switch(checkIvLength(e,p),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&checkCekLength(t,parseInt(e.slice(-3),10)),cbcDecrypt(e,t,s,p,g,m);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&checkCekLength(t,parseInt(e.slice(1,4),10)),gcmDecrypt(e,t,s,p,g,m);default:throw new JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}},inflate=async()=>{throw new JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.')},deflate=async()=>{throw new JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.')},isDisjoint=(...e)=>{const t=e.filter(Boolean);if(t.length===0||t.length===1)return!0;let s;for(const p of t){const g=Object.keys(p);if(!s||s.size===0){s=new Set(g);continue}for(const m of g){if(s.has(m))return!1;s.add(m)}}return!0};function isObjectLike(e){return typeof e=="object"&&e!==null}function isObject(e){if(!isObjectLike(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}const bogusWebCrypto=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function checkKeySize(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${t}`)}function getCryptoKey$2(e,t,s){if(isCryptoKey(e))return checkEncCryptoKey(e,t,s),e;if(e instanceof Uint8Array)return crypto$1.subtle.importKey("raw",e,"AES-KW",!0,[s]);throw new TypeError(invalidKeyInput(e,...types$4,"Uint8Array"))}const wrap$1=async(e,t,s)=>{const p=await getCryptoKey$2(t,e,"wrapKey");checkKeySize(p,e);const g=await crypto$1.subtle.importKey("raw",s,...bogusWebCrypto);return new Uint8Array(await crypto$1.subtle.wrapKey("raw",g,p,"AES-KW"))},unwrap$1=async(e,t,s)=>{const p=await getCryptoKey$2(t,e,"unwrapKey");checkKeySize(p,e);const g=await crypto$1.subtle.unwrapKey("raw",s,p,"AES-KW",...bogusWebCrypto);return new Uint8Array(await crypto$1.subtle.exportKey("raw",g))};async function deriveKey$1(e,t,s,p,g=new Uint8Array(0),m=new Uint8Array(0)){if(!isCryptoKey(e))throw new TypeError(invalidKeyInput(e,...types$4));if(checkEncCryptoKey(e,"ECDH"),!isCryptoKey(t))throw new TypeError(invalidKeyInput(t,...types$4));checkEncCryptoKey(t,"ECDH","deriveBits");const d=concat(lengthAndInput(encoder.encode(s)),lengthAndInput(g),lengthAndInput(m),uint32be(p));let l;e.algorithm.name==="X25519"?l=256:e.algorithm.name==="X448"?l=448:l=Math.ceil(parseInt(e.algorithm.namedCurve.substr(-3),10)/8)<<3;const a=new Uint8Array(await crypto$1.subtle.deriveBits({name:e.algorithm.name,public:e},t,l));return concatKdf(a,p,d)}async function generateEpk(e){if(!isCryptoKey(e))throw new TypeError(invalidKeyInput(e,...types$4));return crypto$1.subtle.generateKey(e.algorithm,!0,["deriveBits"])}function ecdhAllowed(e){if(!isCryptoKey(e))throw new TypeError(invalidKeyInput(e,...types$4));return["P-256","P-384","P-521"].includes(e.algorithm.namedCurve)||e.algorithm.name==="X25519"||e.algorithm.name==="X448"}function checkP2s(e){if(!(e instanceof Uint8Array)||e.length<8)throw new JWEInvalid("PBES2 Salt Input must be 8 or more octets")}function getCryptoKey$1(e,t){if(e instanceof Uint8Array)return crypto$1.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]);if(isCryptoKey(e))return checkEncCryptoKey(e,t,"deriveBits","deriveKey"),e;throw new TypeError(invalidKeyInput(e,...types$4,"Uint8Array"))}async function deriveKey(e,t,s,p){checkP2s(e);const g=p2s(t,e),m=parseInt(t.slice(13,16),10),d={hash:`SHA-${t.slice(8,11)}`,iterations:s,name:"PBKDF2",salt:g},l={length:m,name:"AES-KW"},a=await getCryptoKey$1(p,t);if(a.usages.includes("deriveBits"))return new Uint8Array(await crypto$1.subtle.deriveBits(d,a,m));if(a.usages.includes("deriveKey"))return crypto$1.subtle.deriveKey(d,a,l,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}const encrypt$2=async(e,t,s,p=2048,g=random(new Uint8Array(16)))=>{const m=await deriveKey(g,e,p,t);return{encryptedKey:await wrap$1(e.slice(-6),m,s),p2c:p,p2s:encode$1(g)}},decrypt$1=async(e,t,s,p,g)=>{const m=await deriveKey(g,e,p,t);return unwrap$1(e.slice(-6),m,s)};function subtleRsaEs(e){switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}const checkKeyLength=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:s}=t.algorithm;if(typeof s!="number"||s<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}},encrypt$1=async(e,t,s)=>{if(!isCryptoKey(t))throw new TypeError(invalidKeyInput(t,...types$4));if(checkEncCryptoKey(t,e,"encrypt","wrapKey"),checkKeyLength(e,t),t.usages.includes("encrypt"))return new Uint8Array(await crypto$1.subtle.encrypt(subtleRsaEs(e),t,s));if(t.usages.includes("wrapKey")){const p=await crypto$1.subtle.importKey("raw",s,...bogusWebCrypto);return new Uint8Array(await crypto$1.subtle.wrapKey("raw",p,t,subtleRsaEs(e)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},decrypt=async(e,t,s)=>{if(!isCryptoKey(t))throw new TypeError(invalidKeyInput(t,...types$4));if(checkEncCryptoKey(t,e,"decrypt","unwrapKey"),checkKeyLength(e,t),t.usages.includes("decrypt"))return new Uint8Array(await crypto$1.subtle.decrypt(subtleRsaEs(e),t,s));if(t.usages.includes("unwrapKey")){const p=await crypto$1.subtle.unwrapKey("raw",s,t,subtleRsaEs(e),...bogusWebCrypto);return new Uint8Array(await crypto$1.subtle.exportKey("raw",p))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function bitLength(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new JOSENotSupported(`Unsupported JWE Algorithm: ${e}`)}}const generateCek=e=>random(new Uint8Array(bitLength(e)>>3)),formatPEM=(e,t)=>{const s=(e.match(/.{1,64}/g)||[]).join(`
`);return`-----BEGIN ${t}-----
${s}
-----END ${t}-----`},genericExport=async(e,t,s)=>{if(!isCryptoKey(s))throw new TypeError(invalidKeyInput(s,...types$4));if(!s.extractable)throw new TypeError("CryptoKey is not extractable");if(s.type!==e)throw new TypeError(`key is not a ${e} key`);return formatPEM(encodeBase64(new Uint8Array(await crypto$1.subtle.exportKey(t,s))),`${e.toUpperCase()} KEY`)},toSPKI=e=>genericExport("public","spki",e),toPKCS8=e=>genericExport("private","pkcs8",e),findOid=(e,t,s=0)=>{s===0&&(t.unshift(t.length),t.unshift(6));let p=e.indexOf(t[0],s);if(p===-1)return!1;const g=e.subarray(p,p+t.length);return g.length!==t.length?!1:g.every((m,d)=>m===t[d])||findOid(e,t,p+1)},getNamedCurve=e=>{switch(!0){case findOid(e,[42,134,72,206,61,3,1,7]):return"P-256";case findOid(e,[43,129,4,0,34]):return"P-384";case findOid(e,[43,129,4,0,35]):return"P-521";case findOid(e,[43,101,110]):return"X25519";case findOid(e,[43,101,111]):return"X448";case findOid(e,[43,101,112]):return"Ed25519";case findOid(e,[43,101,113]):return"Ed448";default:throw new JOSENotSupported("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},genericImport=async(e,t,s,p,g)=>{var m;let d,l;const a=new Uint8Array(atob(s.replace(e,"")).split("").map(h=>h.charCodeAt(0))),o=t==="spki";switch(p){case"PS256":case"PS384":case"PS512":d={name:"RSA-PSS",hash:`SHA-${p.slice(-3)}`},l=o?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":d={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${p.slice(-3)}`},l=o?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":d={name:"RSA-OAEP",hash:`SHA-${parseInt(p.slice(-3),10)||1}`},l=o?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":d={name:"ECDSA",namedCurve:"P-256"},l=o?["verify"]:["sign"];break;case"ES384":d={name:"ECDSA",namedCurve:"P-384"},l=o?["verify"]:["sign"];break;case"ES512":d={name:"ECDSA",namedCurve:"P-521"},l=o?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{const h=getNamedCurve(a);d=h.startsWith("P-")?{name:"ECDH",namedCurve:h}:{name:h},l=o?[]:["deriveBits"];break}case"EdDSA":d={name:getNamedCurve(a)},l=o?["verify"]:["sign"];break;default:throw new JOSENotSupported('Invalid or unsupported "alg" (Algorithm) value')}return crypto$1.subtle.importKey(t,a,d,(m=g?.extractable)!==null&&m!==void 0?m:!1,l)},fromPKCS8=(e,t,s)=>genericImport(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",e,t,s),fromSPKI=(e,t,s)=>genericImport(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",e,t,s);function getElement(e){let t=[],s=0;for(;s<e.length;){let p=parseElement(e.subarray(s));t.push(p),s+=p.byteLength}return t}function parseElement(e){let t=0,s=e[0]&31;if(t++,s===31){for(s=0;e[t]>=128;)s=s*128+e[t]-128,t++;s=s*128+e[t]-128,t++}let p=0;if(e[t]<128)p=e[t],t++;else if(p===128){for(p=0;e[t+p]!==0||e[t+p+1]!==0;){if(p>e.byteLength)throw new TypeError("invalid indefinite form length");p++}const m=t+p+2;return{byteLength:m,contents:e.subarray(t,t+p),raw:e.subarray(0,m)}}else{let m=e[t]&127;t++,p=0;for(let d=0;d<m;d++)p=p*256+e[t],t++}const g=t+p;return{byteLength:g,contents:e.subarray(t,g),raw:e.subarray(0,g)}}function spkiFromX509(e){const t=getElement(getElement(parseElement(e).contents)[0].contents);return encodeBase64(t[t[0].raw[0]===160?6:5].raw)}function getSPKI(e){const t=e.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),s=decodeBase64(t);return formatPEM(spkiFromX509(s),"PUBLIC KEY")}const fromX509=(e,t,s)=>{let p;try{p=getSPKI(e)}catch(g){throw new TypeError("Failed to parse the X.509 certificate",{cause:g})}return fromSPKI(p,t,s)};function subtleMapping(e){let t,s;switch(e.kty){case"oct":{switch(e.alg){case"HS256":case"HS384":case"HS512":t={name:"HMAC",hash:`SHA-${e.alg.slice(-3)}`},s=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new JOSENotSupported(`${e.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":t={name:"AES-GCM"},s=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":t={name:"AES-KW"},s=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":t={name:"PBKDF2"},s=["deriveBits"];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},s=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},s=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},s=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},s=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},s=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},s=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},s=e.d?["deriveBits"]:[];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(e.alg){case"EdDSA":t={name:e.crv},s=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},s=e.d?["deriveBits"]:[];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new JOSENotSupported('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:s}}const parse$3=async e=>{var t,s;if(!e.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:p,keyUsages:g}=subtleMapping(e),m=[p,(t=e.ext)!==null&&t!==void 0?t:!1,(s=e.key_ops)!==null&&s!==void 0?s:g];if(p.name==="PBKDF2")return crypto$1.subtle.importKey("raw",decode$1(e.k),...m);const d={...e};return delete d.alg,delete d.use,crypto$1.subtle.importKey("jwk",d,...m)};async function importSPKI(e,t,s){if(typeof e!="string"||e.indexOf("-----BEGIN PUBLIC KEY-----")!==0)throw new TypeError('"spki" must be SPKI formatted string');return fromSPKI(e,t,s)}async function importX509(e,t,s){if(typeof e!="string"||e.indexOf("-----BEGIN CERTIFICATE-----")!==0)throw new TypeError('"x509" must be X.509 formatted string');return fromX509(e,t,s)}async function importPKCS8(e,t,s){if(typeof e!="string"||e.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return fromPKCS8(e,t,s)}async function importJWK(e,t,s){var p;if(!isObject(e))throw new TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if(typeof e.k!="string"||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return s??(s=e.ext!==!0),s?parse$3({...e,alg:t,ext:(p=e.ext)!==null&&p!==void 0?p:!1}):decode$1(e.k);case"RSA":if(e.oth!==void 0)throw new JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return parse$3({...e,alg:t});default:throw new JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}const symmetricTypeCheck=(e,t)=>{if(!(t instanceof Uint8Array)){if(!isKeyLike(t))throw new TypeError(withAlg(e,t,...types$4,"Uint8Array"));if(t.type!=="secret")throw new TypeError(`${types$4.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},asymmetricTypeCheck=(e,t,s)=>{if(!isKeyLike(t))throw new TypeError(withAlg(e,t,...types$4));if(t.type==="secret")throw new TypeError(`${types$4.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(s==="sign"&&t.type==="public")throw new TypeError(`${types$4.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(s==="decrypt"&&t.type==="public")throw new TypeError(`${types$4.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&s==="verify"&&t.type==="private")throw new TypeError(`${types$4.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&s==="encrypt"&&t.type==="private")throw new TypeError(`${types$4.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},checkKeyType=(e,t,s)=>{e.startsWith("HS")||e==="dir"||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?symmetricTypeCheck(e,t):asymmetricTypeCheck(e,t,s)};async function cbcEncrypt(e,t,s,p,g){if(!(s instanceof Uint8Array))throw new TypeError(invalidKeyInput(s,"Uint8Array"));const m=parseInt(e.slice(1,4),10),d=await crypto$1.subtle.importKey("raw",s.subarray(m>>3),"AES-CBC",!1,["encrypt"]),l=await crypto$1.subtle.importKey("raw",s.subarray(0,m>>3),{hash:`SHA-${m<<1}`,name:"HMAC"},!1,["sign"]),a=new Uint8Array(await crypto$1.subtle.encrypt({iv:p,name:"AES-CBC"},d,t)),o=concat(g,p,a,uint64be(g.length<<3)),h=new Uint8Array((await crypto$1.subtle.sign("HMAC",l,o)).slice(0,m>>3));return{ciphertext:a,tag:h}}async function gcmEncrypt(e,t,s,p,g){let m;s instanceof Uint8Array?m=await crypto$1.subtle.importKey("raw",s,"AES-GCM",!1,["encrypt"]):(checkEncCryptoKey(s,e,"encrypt"),m=s);const d=new Uint8Array(await crypto$1.subtle.encrypt({additionalData:g,iv:p,name:"AES-GCM",tagLength:128},m,t)),l=d.slice(-16);return{ciphertext:d.slice(0,-16),tag:l}}const encrypt=async(e,t,s,p,g)=>{if(!isCryptoKey(s)&&!(s instanceof Uint8Array))throw new TypeError(invalidKeyInput(s,...types$4,"Uint8Array"));switch(checkIvLength(e,p),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return s instanceof Uint8Array&&checkCekLength(s,parseInt(e.slice(-3),10)),cbcEncrypt(e,t,s,p,g);case"A128GCM":case"A192GCM":case"A256GCM":return s instanceof Uint8Array&&checkCekLength(s,parseInt(e.slice(1,4),10)),gcmEncrypt(e,t,s,p,g);default:throw new JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}};async function wrap(e,t,s,p){const g=e.slice(0,7);p||(p=generateIv(g));const{ciphertext:m,tag:d}=await encrypt(g,s,t,p,new Uint8Array(0));return{encryptedKey:m,iv:encode$1(p),tag:encode$1(d)}}async function unwrap(e,t,s,p,g){const m=e.slice(0,7);return decrypt$2(m,t,s,p,g,new Uint8Array(0))}async function decryptKeyManagement(e,t,s,p,g){switch(checkKeyType(e,t,"decrypt"),e){case"dir":{if(s!==void 0)throw new JWEInvalid("Encountered unexpected JWE Encrypted Key");return t}case"ECDH-ES":if(s!==void 0)throw new JWEInvalid("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!isObject(p.epk))throw new JWEInvalid('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!ecdhAllowed(t))throw new JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");const m=await importJWK(p.epk,e);let d,l;if(p.apu!==void 0){if(typeof p.apu!="string")throw new JWEInvalid('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{d=decode$1(p.apu)}catch{throw new JWEInvalid("Failed to base64url decode the apu")}}if(p.apv!==void 0){if(typeof p.apv!="string")throw new JWEInvalid('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{l=decode$1(p.apv)}catch{throw new JWEInvalid("Failed to base64url decode the apv")}}const a=await deriveKey$1(m,t,e==="ECDH-ES"?p.enc:e,e==="ECDH-ES"?bitLength(p.enc):parseInt(e.slice(-5,-2),10),d,l);if(e==="ECDH-ES")return a;if(s===void 0)throw new JWEInvalid("JWE Encrypted Key missing");return unwrap$1(e.slice(-6),a,s)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(s===void 0)throw new JWEInvalid("JWE Encrypted Key missing");return decrypt(e,t,s)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(s===void 0)throw new JWEInvalid("JWE Encrypted Key missing");if(typeof p.p2c!="number")throw new JWEInvalid('JOSE Header "p2c" (PBES2 Count) missing or invalid');const m=g?.maxPBES2Count||1e4;if(p.p2c>m)throw new JWEInvalid('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof p.p2s!="string")throw new JWEInvalid('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let d;try{d=decode$1(p.p2s)}catch{throw new JWEInvalid("Failed to base64url decode the p2s")}return decrypt$1(e,t,s,p.p2c,d)}case"A128KW":case"A192KW":case"A256KW":{if(s===void 0)throw new JWEInvalid("JWE Encrypted Key missing");return unwrap$1(e,t,s)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(s===void 0)throw new JWEInvalid("JWE Encrypted Key missing");if(typeof p.iv!="string")throw new JWEInvalid('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof p.tag!="string")throw new JWEInvalid('JOSE Header "tag" (Authentication Tag) missing or invalid');let m;try{m=decode$1(p.iv)}catch{throw new JWEInvalid("Failed to base64url decode the iv")}let d;try{d=decode$1(p.tag)}catch{throw new JWEInvalid("Failed to base64url decode the tag")}return unwrap(e,t,s,m,d)}default:throw new JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function validateCrit(e,t,s,p,g){if(g.crit!==void 0&&p.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!p||p.crit===void 0)return new Set;if(!Array.isArray(p.crit)||p.crit.length===0||p.crit.some(d=>typeof d!="string"||d.length===0))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let m;s!==void 0?m=new Map([...Object.entries(s),...t.entries()]):m=t;for(const d of p.crit){if(!m.has(d))throw new JOSENotSupported(`Extension Header Parameter "${d}" is not recognized`);if(g[d]===void 0)throw new e(`Extension Header Parameter "${d}" is missing`);if(m.get(d)&&p[d]===void 0)throw new e(`Extension Header Parameter "${d}" MUST be integrity protected`)}return new Set(p.crit)}const validateAlgorithms=(e,t)=>{if(t!==void 0&&(!Array.isArray(t)||t.some(s=>typeof s!="string")))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};async function flattenedDecrypt(e,t,s){var p;if(!isObject(e))throw new JWEInvalid("Flattened JWE must be an object");if(e.protected===void 0&&e.header===void 0&&e.unprotected===void 0)throw new JWEInvalid("JOSE Header missing");if(typeof e.iv!="string")throw new JWEInvalid("JWE Initialization Vector missing or incorrect type");if(typeof e.ciphertext!="string")throw new JWEInvalid("JWE Ciphertext missing or incorrect type");if(typeof e.tag!="string")throw new JWEInvalid("JWE Authentication Tag missing or incorrect type");if(e.protected!==void 0&&typeof e.protected!="string")throw new JWEInvalid("JWE Protected Header incorrect type");if(e.encrypted_key!==void 0&&typeof e.encrypted_key!="string")throw new JWEInvalid("JWE Encrypted Key incorrect type");if(e.aad!==void 0&&typeof e.aad!="string")throw new JWEInvalid("JWE AAD incorrect type");if(e.header!==void 0&&!isObject(e.header))throw new JWEInvalid("JWE Shared Unprotected Header incorrect type");if(e.unprotected!==void 0&&!isObject(e.unprotected))throw new JWEInvalid("JWE Per-Recipient Unprotected Header incorrect type");let g;if(e.protected)try{const x=decode$1(e.protected);g=JSON.parse(decoder.decode(x))}catch{throw new JWEInvalid("JWE Protected Header is invalid")}if(!isDisjoint(g,e.header,e.unprotected))throw new JWEInvalid("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const m={...g,...e.header,...e.unprotected};if(validateCrit(JWEInvalid,new Map,s?.crit,g,m),m.zip!==void 0){if(!g||!g.zip)throw new JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(m.zip!=="DEF")throw new JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:d,enc:l}=m;if(typeof d!="string"||!d)throw new JWEInvalid("missing JWE Algorithm (alg) in JWE Header");if(typeof l!="string"||!l)throw new JWEInvalid("missing JWE Encryption Algorithm (enc) in JWE Header");const a=s&&validateAlgorithms("keyManagementAlgorithms",s.keyManagementAlgorithms),o=s&&validateAlgorithms("contentEncryptionAlgorithms",s.contentEncryptionAlgorithms);if(a&&!a.has(d))throw new JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(o&&!o.has(l))throw new JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter not allowed');let h;if(e.encrypted_key!==void 0)try{h=decode$1(e.encrypted_key)}catch{throw new JWEInvalid("Failed to base64url decode the encrypted_key")}let v=!1;typeof t=="function"&&(t=await t(g,e),v=!0);let _;try{_=await decryptKeyManagement(d,t,h,m,s)}catch(x){if(x instanceof TypeError||x instanceof JWEInvalid||x instanceof JOSENotSupported)throw x;_=generateCek(l)}let y,w;try{y=decode$1(e.iv)}catch{throw new JWEInvalid("Failed to base64url decode the iv")}try{w=decode$1(e.tag)}catch{throw new JWEInvalid("Failed to base64url decode the tag")}const T=encoder.encode((p=e.protected)!==null&&p!==void 0?p:"");let I;e.aad!==void 0?I=concat(T,encoder.encode("."),encoder.encode(e.aad)):I=T;let O;try{O=decode$1(e.ciphertext)}catch{throw new JWEInvalid("Failed to base64url decode the ciphertext")}let E=await decrypt$2(l,_,O,y,w,I);m.zip==="DEF"&&(E=await(s?.inflateRaw||inflate)(E));const C={plaintext:E};if(e.protected!==void 0&&(C.protectedHeader=g),e.aad!==void 0)try{C.additionalAuthenticatedData=decode$1(e.aad)}catch{throw new JWEInvalid("Failed to base64url decode the aad")}return e.unprotected!==void 0&&(C.sharedUnprotectedHeader=e.unprotected),e.header!==void 0&&(C.unprotectedHeader=e.header),v?{...C,key:t}:C}async function compactDecrypt(e,t,s){if(e instanceof Uint8Array&&(e=decoder.decode(e)),typeof e!="string")throw new JWEInvalid("Compact JWE must be a string or Uint8Array");const{0:p,1:g,2:m,3:d,4:l,length:a}=e.split(".");if(a!==5)throw new JWEInvalid("Invalid Compact JWE");const o=await flattenedDecrypt({ciphertext:d,iv:m||void 0,protected:p||void 0,tag:l||void 0,encrypted_key:g||void 0},t,s),h={plaintext:o.plaintext,protectedHeader:o.protectedHeader};return typeof t=="function"?{...h,key:o.key}:h}async function generalDecrypt(e,t,s){if(!isObject(e))throw new JWEInvalid("General JWE must be an object");if(!Array.isArray(e.recipients)||!e.recipients.every(isObject))throw new JWEInvalid("JWE Recipients missing or incorrect type");if(!e.recipients.length)throw new JWEInvalid("JWE Recipients has no members");for(const p of e.recipients)try{return await flattenedDecrypt({aad:e.aad,ciphertext:e.ciphertext,encrypted_key:p.encrypted_key,header:p.header,iv:e.iv,protected:e.protected,tag:e.tag,unprotected:e.unprotected},t,s)}catch{}throw new JWEDecryptionFailed}const keyToJWK=async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:encode$1(e)};if(!isCryptoKey(e))throw new TypeError(invalidKeyInput(e,...types$4,"Uint8Array"));if(!e.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:t,key_ops:s,alg:p,use:g,...m}=await crypto$1.subtle.exportKey("jwk",e);return m};async function exportSPKI(e){return toSPKI(e)}async function exportPKCS8(e){return toPKCS8(e)}async function exportJWK(e){return keyToJWK(e)}async function encryptKeyManagement(e,t,s,p,g={}){let m,d,l;switch(checkKeyType(e,s,"encrypt"),e){case"dir":{l=s;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!ecdhAllowed(s))throw new JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:a,apv:o}=g;let{epk:h}=g;h||(h=(await generateEpk(s)).privateKey);const{x:v,y:_,crv:y,kty:w}=await exportJWK(h),T=await deriveKey$1(s,h,e==="ECDH-ES"?t:e,e==="ECDH-ES"?bitLength(t):parseInt(e.slice(-5,-2),10),a,o);if(d={epk:{x:v,crv:y,kty:w}},w==="EC"&&(d.epk.y=_),a&&(d.apu=encode$1(a)),o&&(d.apv=encode$1(o)),e==="ECDH-ES"){l=T;break}l=p||generateCek(t);const I=e.slice(-6);m=await wrap$1(I,T,l);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{l=p||generateCek(t),m=await encrypt$1(e,s,l);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{l=p||generateCek(t);const{p2c:a,p2s:o}=g;({encryptedKey:m,...d}=await encrypt$2(e,s,l,a,o));break}case"A128KW":case"A192KW":case"A256KW":{l=p||generateCek(t),m=await wrap$1(e,s,l);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{l=p||generateCek(t);const{iv:a}=g;({encryptedKey:m,...d}=await wrap(e,s,l,a));break}default:throw new JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:l,encryptedKey:m,parameters:d}}const unprotected=Symbol();class FlattenedEncrypt{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=t}setKeyManagementParameters(t){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}setContentEncryptionKey(t){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=t,this}async encrypt(t,s){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new JWEInvalid("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!isDisjoint(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const p={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(validateCrit(JWEInvalid,new Map,s?.crit,this._protectedHeader,p),p.zip!==void 0){if(!this._protectedHeader||!this._protectedHeader.zip)throw new JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(p.zip!=="DEF")throw new JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:g,enc:m}=p;if(typeof g!="string"||!g)throw new JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof m!="string"||!m)throw new JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let d;if(g==="dir"){if(this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if(g==="ECDH-ES"&&this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");let l;{let w;({cek:l,encryptedKey:d,parameters:w}=await encryptKeyManagement(g,m,t,this._cek,this._keyManagementParameters)),w&&(s&&unprotected in s?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...w}:this.setUnprotectedHeader(w):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...w}:this.setProtectedHeader(w))}this._iv||(this._iv=generateIv(m));let a,o,h;this._protectedHeader?o=encoder.encode(encode$1(JSON.stringify(this._protectedHeader))):o=encoder.encode(""),this._aad?(h=encode$1(this._aad),a=concat(o,encoder.encode("."),encoder.encode(h))):a=o;let v,_;if(p.zip==="DEF"){const w=await(s?.deflateRaw||deflate)(this._plaintext);({ciphertext:v,tag:_}=await encrypt(m,w,l,this._iv,a))}else({ciphertext:v,tag:_}=await encrypt(m,this._plaintext,l,this._iv,a));const y={ciphertext:encode$1(v),iv:encode$1(this._iv),tag:encode$1(_)};return d&&(y.encrypted_key=encode$1(d)),h&&(y.aad=h),this._protectedHeader&&(y.protected=decoder.decode(o)),this._sharedUnprotectedHeader&&(y.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(y.header=this._unprotectedHeader),y}}class IndividualRecipient{constructor(t,s,p){this.parent=t,this.key=s,this.options=p}setUnprotectedHeader(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addRecipient(...t){return this.parent.addRecipient(...t)}encrypt(...t){return this.parent.encrypt(...t)}done(){return this.parent}}class GeneralEncrypt{constructor(t){this._recipients=[],this._plaintext=t}addRecipient(t,s){const p=new IndividualRecipient(this,t,{crit:s?.crit});return this._recipients.push(p),p}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}async encrypt(t){var s,p,g;if(!this._recipients.length)throw new JWEInvalid("at least one recipient must be added");if(t={deflateRaw:t?.deflateRaw},this._recipients.length===1){const[a]=this._recipients,o=await new FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(a.unprotectedHeader).encrypt(a.key,{...a.options,...t});let h={ciphertext:o.ciphertext,iv:o.iv,recipients:[{}],tag:o.tag};return o.aad&&(h.aad=o.aad),o.protected&&(h.protected=o.protected),o.unprotected&&(h.unprotected=o.unprotected),o.encrypted_key&&(h.recipients[0].encrypted_key=o.encrypted_key),o.header&&(h.recipients[0].header=o.header),h}let m;for(let a=0;a<this._recipients.length;a++){const o=this._recipients[a];if(!isDisjoint(this._protectedHeader,this._unprotectedHeader,o.unprotectedHeader))throw new JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const h={...this._protectedHeader,...this._unprotectedHeader,...o.unprotectedHeader},{alg:v}=h;if(typeof v!="string"||!v)throw new JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(v==="dir"||v==="ECDH-ES")throw new JWEInvalid('"dir" and "ECDH-ES" alg may only be used with a single recipient');if(typeof h.enc!="string"||!h.enc)throw new JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(!m)m=h.enc;else if(m!==h.enc)throw new JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');if(validateCrit(JWEInvalid,new Map,o.options.crit,this._protectedHeader,h),h.zip!==void 0&&(!this._protectedHeader||!this._protectedHeader.zip))throw new JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}const d=generateCek(m);let l={ciphertext:"",iv:"",recipients:[],tag:""};for(let a=0;a<this._recipients.length;a++){const o=this._recipients[a],h={};l.recipients.push(h);const _={...this._protectedHeader,...this._unprotectedHeader,...o.unprotectedHeader}.alg.startsWith("PBES2")?2048+a:void 0;if(a===0){const T=await new FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(d).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(o.unprotectedHeader).setKeyManagementParameters({p2c:_}).encrypt(o.key,{...o.options,...t,[unprotected]:!0});l.ciphertext=T.ciphertext,l.iv=T.iv,l.tag=T.tag,T.aad&&(l.aad=T.aad),T.protected&&(l.protected=T.protected),T.unprotected&&(l.unprotected=T.unprotected),h.encrypted_key=T.encrypted_key,T.header&&(h.header=T.header);continue}const{encryptedKey:y,parameters:w}=await encryptKeyManagement(((s=o.unprotectedHeader)===null||s===void 0?void 0:s.alg)||((p=this._protectedHeader)===null||p===void 0?void 0:p.alg)||((g=this._unprotectedHeader)===null||g===void 0?void 0:g.alg),m,o.key,d,{p2c:_});h.encrypted_key=encode$1(y),(o.unprotectedHeader||w)&&(h.header={...o.unprotectedHeader,...w})}return l}}function subtleDsa(e,t){const s=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:s,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:s,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:s,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:s,name:"ECDSA",namedCurve:t.namedCurve};case"EdDSA":return{name:t.name};default:throw new JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}function getCryptoKey(e,t,s){if(isCryptoKey(t))return checkSigCryptoKey(t,e,s),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(invalidKeyInput(t,...types$4));return crypto$1.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[s])}throw new TypeError(invalidKeyInput(t,...types$4,"Uint8Array"))}const verify=async(e,t,s,p)=>{const g=await getCryptoKey(e,t,"verify");checkKeyLength(e,g);const m=subtleDsa(e,g.algorithm);try{return await crypto$1.subtle.verify(m,g,s,p)}catch{return!1}};async function flattenedVerify(e,t,s){var p;if(!isObject(e))throw new JWSInvalid("Flattened JWS must be an object");if(e.protected===void 0&&e.header===void 0)throw new JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');if(e.protected!==void 0&&typeof e.protected!="string")throw new JWSInvalid("JWS Protected Header incorrect type");if(e.payload===void 0)throw new JWSInvalid("JWS Payload missing");if(typeof e.signature!="string")throw new JWSInvalid("JWS Signature missing or incorrect type");if(e.header!==void 0&&!isObject(e.header))throw new JWSInvalid("JWS Unprotected Header incorrect type");let g={};if(e.protected)try{const I=decode$1(e.protected);g=JSON.parse(decoder.decode(I))}catch{throw new JWSInvalid("JWS Protected Header is invalid")}if(!isDisjoint(g,e.header))throw new JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const m={...g,...e.header},d=validateCrit(JWSInvalid,new Map([["b64",!0]]),s?.crit,g,m);let l=!0;if(d.has("b64")&&(l=g.b64,typeof l!="boolean"))throw new JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:a}=m;if(typeof a!="string"||!a)throw new JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');const o=s&&validateAlgorithms("algorithms",s.algorithms);if(o&&!o.has(a))throw new JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(l){if(typeof e.payload!="string")throw new JWSInvalid("JWS Payload must be a string")}else if(typeof e.payload!="string"&&!(e.payload instanceof Uint8Array))throw new JWSInvalid("JWS Payload must be a string or an Uint8Array instance");let h=!1;typeof t=="function"&&(t=await t(g,e),h=!0),checkKeyType(a,t,"verify");const v=concat(encoder.encode((p=e.protected)!==null&&p!==void 0?p:""),encoder.encode("."),typeof e.payload=="string"?encoder.encode(e.payload):e.payload);let _;try{_=decode$1(e.signature)}catch{throw new JWSInvalid("Failed to base64url decode the signature")}if(!await verify(a,t,_,v))throw new JWSSignatureVerificationFailed;let w;if(l)try{w=decode$1(e.payload)}catch{throw new JWSInvalid("Failed to base64url decode the payload")}else typeof e.payload=="string"?w=encoder.encode(e.payload):w=e.payload;const T={payload:w};return e.protected!==void 0&&(T.protectedHeader=g),e.header!==void 0&&(T.unprotectedHeader=e.header),h?{...T,key:t}:T}async function compactVerify(e,t,s){if(e instanceof Uint8Array&&(e=decoder.decode(e)),typeof e!="string")throw new JWSInvalid("Compact JWS must be a string or Uint8Array");const{0:p,1:g,2:m,length:d}=e.split(".");if(d!==3)throw new JWSInvalid("Invalid Compact JWS");const l=await flattenedVerify({payload:g,protected:p,signature:m},t,s),a={payload:l.payload,protectedHeader:l.protectedHeader};return typeof t=="function"?{...a,key:l.key}:a}async function generalVerify(e,t,s){if(!isObject(e))throw new JWSInvalid("General JWS must be an object");if(!Array.isArray(e.signatures)||!e.signatures.every(isObject))throw new JWSInvalid("JWS Signatures missing or incorrect type");for(const p of e.signatures)try{return await flattenedVerify({header:p.header,payload:e.payload,protected:p.protected,signature:p.signature},t,s)}catch{}throw new JWSSignatureVerificationFailed}const epoch=e=>Math.floor(e.getTime()/1e3),minute=60,hour=minute*60,day=hour*24,week=day*7,year=day*365.25,REGEX$1=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,secs=e=>{const t=REGEX$1.exec(e);if(!t)throw new TypeError("Invalid time period format");const s=parseFloat(t[1]);switch(t[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(s);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(s*minute);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(s*hour);case"day":case"days":case"d":return Math.round(s*day);case"week":case"weeks":case"w":return Math.round(s*week);default:return Math.round(s*year)}},normalizeTyp=e=>e.toLowerCase().replace(/^application\//,""),checkAudiencePresence=(e,t)=>typeof e=="string"?t.includes(e):Array.isArray(e)?t.some(Set.prototype.has.bind(new Set(e))):!1,jwtPayload=(e,t,s={})=>{const{typ:p}=s;if(p&&(typeof e.typ!="string"||normalizeTyp(e.typ)!==normalizeTyp(p)))throw new JWTClaimValidationFailed('unexpected "typ" JWT header value',"typ","check_failed");let g;try{g=JSON.parse(decoder.decode(t))}catch{}if(!isObject(g))throw new JWTInvalid("JWT Claims Set must be a top-level JSON object");const{requiredClaims:m=[],issuer:d,subject:l,audience:a,maxTokenAge:o}=s;o!==void 0&&m.push("iat"),a!==void 0&&m.push("aud"),l!==void 0&&m.push("sub"),d!==void 0&&m.push("iss");for(const y of new Set(m.reverse()))if(!(y in g))throw new JWTClaimValidationFailed(`missing required "${y}" claim`,y,"missing");if(d&&!(Array.isArray(d)?d:[d]).includes(g.iss))throw new JWTClaimValidationFailed('unexpected "iss" claim value',"iss","check_failed");if(l&&g.sub!==l)throw new JWTClaimValidationFailed('unexpected "sub" claim value',"sub","check_failed");if(a&&!checkAudiencePresence(g.aud,typeof a=="string"?[a]:a))throw new JWTClaimValidationFailed('unexpected "aud" claim value',"aud","check_failed");let h;switch(typeof s.clockTolerance){case"string":h=secs(s.clockTolerance);break;case"number":h=s.clockTolerance;break;case"undefined":h=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:v}=s,_=epoch(v||new Date);if((g.iat!==void 0||o)&&typeof g.iat!="number")throw new JWTClaimValidationFailed('"iat" claim must be a number',"iat","invalid");if(g.nbf!==void 0){if(typeof g.nbf!="number")throw new JWTClaimValidationFailed('"nbf" claim must be a number',"nbf","invalid");if(g.nbf>_+h)throw new JWTClaimValidationFailed('"nbf" claim timestamp check failed',"nbf","check_failed")}if(g.exp!==void 0){if(typeof g.exp!="number")throw new JWTClaimValidationFailed('"exp" claim must be a number',"exp","invalid");if(g.exp<=_-h)throw new JWTExpired('"exp" claim timestamp check failed',"exp","check_failed")}if(o){const y=_-g.iat,w=typeof o=="number"?o:secs(o);if(y-h>w)throw new JWTExpired('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(y<0-h)throw new JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return g};async function jwtVerify(e,t,s){var p;const g=await compactVerify(e,t,s);if(!((p=g.protectedHeader.crit)===null||p===void 0)&&p.includes("b64")&&g.protectedHeader.b64===!1)throw new JWTInvalid("JWTs MUST NOT use unencoded payload");const d={payload:jwtPayload(g.protectedHeader,g.payload,s),protectedHeader:g.protectedHeader};return typeof t=="function"?{...d,key:g.key}:d}async function jwtDecrypt(e,t,s){const p=await compactDecrypt(e,t,s),g=jwtPayload(p.protectedHeader,p.plaintext,s),{protectedHeader:m}=p;if(m.iss!==void 0&&m.iss!==g.iss)throw new JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(m.sub!==void 0&&m.sub!==g.sub)throw new JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(m.aud!==void 0&&JSON.stringify(m.aud)!==JSON.stringify(g.aud))throw new JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',"aud","mismatch");const d={payload:g,protectedHeader:m};return typeof t=="function"?{...d,key:p.key}:d}class CompactEncrypt{constructor(t){this._flattened=new FlattenedEncrypt(t)}setContentEncryptionKey(t){return this._flattened.setContentEncryptionKey(t),this}setInitializationVector(t){return this._flattened.setInitializationVector(t),this}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}setKeyManagementParameters(t){return this._flattened.setKeyManagementParameters(t),this}async encrypt(t,s){const p=await this._flattened.encrypt(t,s);return[p.protected,p.encrypted_key,p.iv,p.ciphertext,p.tag].join(".")}}const sign=async(e,t,s)=>{const p=await getCryptoKey(e,t,"sign");checkKeyLength(e,p);const g=await crypto$1.subtle.sign(subtleDsa(e,p.algorithm),p,s);return new Uint8Array(g)};class FlattenedSign{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=t}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}async sign(t,s){if(!this._protectedHeader&&!this._unprotectedHeader)throw new JWSInvalid("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!isDisjoint(this._protectedHeader,this._unprotectedHeader))throw new JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const p={...this._protectedHeader,...this._unprotectedHeader},g=validateCrit(JWSInvalid,new Map([["b64",!0]]),s?.crit,this._protectedHeader,p);let m=!0;if(g.has("b64")&&(m=this._protectedHeader.b64,typeof m!="boolean"))throw new JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:d}=p;if(typeof d!="string"||!d)throw new JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');checkKeyType(d,t,"sign");let l=this._payload;m&&(l=encoder.encode(encode$1(l)));let a;this._protectedHeader?a=encoder.encode(encode$1(JSON.stringify(this._protectedHeader))):a=encoder.encode("");const o=concat(a,encoder.encode("."),l),h=await sign(d,t,o),v={signature:encode$1(h),payload:""};return m&&(v.payload=decoder.decode(l)),this._unprotectedHeader&&(v.header=this._unprotectedHeader),this._protectedHeader&&(v.protected=decoder.decode(a)),v}}class CompactSign{constructor(t){this._flattened=new FlattenedSign(t)}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}async sign(t,s){const p=await this._flattened.sign(t,s);if(p.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${p.protected}.${p.payload}.${p.signature}`}}class IndividualSignature{constructor(t,s,p){this.parent=t,this.key=s,this.options=p}setProtectedHeader(t){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=t,this}setUnprotectedHeader(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addSignature(...t){return this.parent.addSignature(...t)}sign(...t){return this.parent.sign(...t)}done(){return this.parent}}class GeneralSign{constructor(t){this._signatures=[],this._payload=t}addSignature(t,s){const p=new IndividualSignature(this,t,s);return this._signatures.push(p),p}async sign(){if(!this._signatures.length)throw new JWSInvalid("at least one signature must be added");const t={signatures:[],payload:""};for(let s=0;s<this._signatures.length;s++){const p=this._signatures[s],g=new FlattenedSign(this._payload);g.setProtectedHeader(p.protectedHeader),g.setUnprotectedHeader(p.unprotectedHeader);const{payload:m,...d}=await g.sign(p.key,p.options);if(s===0)t.payload=m;else if(t.payload!==m)throw new JWSInvalid("inconsistent use of JWS Unencoded Payload (RFC7797)");t.signatures.push(d)}return t}}class ProduceJWT{constructor(t){if(!isObject(t))throw new TypeError("JWT Claims Set MUST be an object");this._payload=t}setIssuer(t){return this._payload={...this._payload,iss:t},this}setSubject(t){return this._payload={...this._payload,sub:t},this}setAudience(t){return this._payload={...this._payload,aud:t},this}setJti(t){return this._payload={...this._payload,jti:t},this}setNotBefore(t){return typeof t=="number"?this._payload={...this._payload,nbf:t}:this._payload={...this._payload,nbf:epoch(new Date)+secs(t)},this}setExpirationTime(t){return typeof t=="number"?this._payload={...this._payload,exp:t}:this._payload={...this._payload,exp:epoch(new Date)+secs(t)},this}setIssuedAt(t){return typeof t>"u"?this._payload={...this._payload,iat:epoch(new Date)}:this._payload={...this._payload,iat:t},this}}class SignJWT extends ProduceJWT{setProtectedHeader(t){return this._protectedHeader=t,this}async sign(t,s){var p;const g=new CompactSign(encoder.encode(JSON.stringify(this._payload)));if(g.setProtectedHeader(this._protectedHeader),Array.isArray((p=this._protectedHeader)===null||p===void 0?void 0:p.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new JWTInvalid("JWTs MUST NOT use unencoded payload");return g.sign(t,s)}}class EncryptJWT extends ProduceJWT{setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setKeyManagementParameters(t){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setContentEncryptionKey(t){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=t,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(t,s){const p=new CompactEncrypt(encoder.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),p.setProtectedHeader(this._protectedHeader),this._iv&&p.setInitializationVector(this._iv),this._cek&&p.setContentEncryptionKey(this._cek),this._keyManagementParameters&&p.setKeyManagementParameters(this._keyManagementParameters),p.encrypt(t,s)}}const check=(e,t)=>{if(typeof e!="string"||!e)throw new JWKInvalid(`${t} missing or invalid`)};async function calculateJwkThumbprint(e,t){if(!isObject(e))throw new TypeError("JWK must be an object");if(t??(t="sha256"),t!=="sha256"&&t!=="sha384"&&t!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let s;switch(e.kty){case"EC":check(e.crv,'"crv" (Curve) Parameter'),check(e.x,'"x" (X Coordinate) Parameter'),check(e.y,'"y" (Y Coordinate) Parameter'),s={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":check(e.crv,'"crv" (Subtype of Key Pair) Parameter'),check(e.x,'"x" (Public Key) Parameter'),s={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":check(e.e,'"e" (Exponent) Parameter'),check(e.n,'"n" (Modulus) Parameter'),s={e:e.e,kty:e.kty,n:e.n};break;case"oct":check(e.k,'"k" (Key Value) Parameter'),s={k:e.k,kty:e.kty};break;default:throw new JOSENotSupported('"kty" (Key Type) Parameter missing or unsupported')}const p=encoder.encode(JSON.stringify(s));return encode$1(await digest(t,p))}async function calculateJwkThumbprintUri(e,t){t??(t="sha256");const s=await calculateJwkThumbprint(e,t);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${t.slice(-3)}:${s}`}async function EmbeddedJWK(e,t){const s={...e,...t?.header};if(!isObject(s.jwk))throw new JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a JSON object');const p=await importJWK({...s.jwk,ext:!0},s.alg,!0);if(p instanceof Uint8Array||p.type!=="public")throw new JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a public key');return p}function getKtyFromAlg(e){switch(typeof e=="string"&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set')}}function isJWKSLike(e){return e&&typeof e=="object"&&Array.isArray(e.keys)&&e.keys.every(isJWKLike)}function isJWKLike(e){return isObject(e)}function clone(e){return typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}class LocalJWKSet{constructor(t){if(this._cached=new WeakMap,!isJWKSLike(t))throw new JWKSInvalid("JSON Web Key Set malformed");this._jwks=clone(t)}async getKey(t,s){const{alg:p,kid:g}={...t,...s?.header},m=getKtyFromAlg(p),d=this._jwks.keys.filter(o=>{let h=m===o.kty;if(h&&typeof g=="string"&&(h=g===o.kid),h&&typeof o.alg=="string"&&(h=p===o.alg),h&&typeof o.use=="string"&&(h=o.use==="sig"),h&&Array.isArray(o.key_ops)&&(h=o.key_ops.includes("verify")),h&&p==="EdDSA"&&(h=o.crv==="Ed25519"||o.crv==="Ed448"),h)switch(p){case"ES256":h=o.crv==="P-256";break;case"ES256K":h=o.crv==="secp256k1";break;case"ES384":h=o.crv==="P-384";break;case"ES512":h=o.crv==="P-521";break}return h}),{0:l,length:a}=d;if(a===0)throw new JWKSNoMatchingKey;if(a!==1){const o=new JWKSMultipleMatchingKeys,{_cached:h}=this;throw o[Symbol.asyncIterator]=async function*(){for(const v of d)try{yield await importWithAlgCache(h,v,p)}catch{continue}},o}return importWithAlgCache(this._cached,l,p)}}async function importWithAlgCache(e,t,s){const p=e.get(t)||e.set(t,{}).get(t);if(p[s]===void 0){const g=await importJWK({...t,ext:!0},s);if(g instanceof Uint8Array||g.type!=="public")throw new JWKSInvalid("JSON Web Key Set members must be public keys");p[s]=g}return p[s]}function createLocalJWKSet(e){const t=new LocalJWKSet(e);return async function(s,p){return t.getKey(s,p)}}const fetchJwks=async(e,t,s)=>{let p,g,m=!1;typeof AbortController=="function"&&(p=new AbortController,g=setTimeout(()=>{m=!0,p.abort()},t));const d=await fetch(e.href,{signal:p?p.signal:void 0,redirect:"manual",headers:s.headers}).catch(l=>{throw m?new JWKSTimeout:l});if(g!==void 0&&clearTimeout(g),d.status!==200)throw new JOSEError("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await d.json()}catch{throw new JOSEError("Failed to parse the JSON Web Key Set HTTP response as JSON")}};function isCloudflareWorkers(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}class RemoteJWKSet extends LocalJWKSet{constructor(t,s){if(super({keys:[]}),this._jwks=void 0,!(t instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(t.href),this._options={agent:s?.agent,headers:s?.headers},this._timeoutDuration=typeof s?.timeoutDuration=="number"?s?.timeoutDuration:5e3,this._cooldownDuration=typeof s?.cooldownDuration=="number"?s?.cooldownDuration:3e4,this._cacheMaxAge=typeof s?.cacheMaxAge=="number"?s?.cacheMaxAge:6e5}coolingDown(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cooldownDuration:!1}fresh(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cacheMaxAge:!1}async getKey(t,s){(!this._jwks||!this.fresh())&&await this.reload();try{return await super.getKey(t,s)}catch(p){if(p instanceof JWKSNoMatchingKey&&this.coolingDown()===!1)return await this.reload(),super.getKey(t,s);throw p}}async reload(){this._pendingFetch&&isCloudflareWorkers()&&(this._pendingFetch=void 0),this._pendingFetch||(this._pendingFetch=fetchJwks(this._url,this._timeoutDuration,this._options).then(t=>{if(!isJWKSLike(t))throw new JWKSInvalid("JSON Web Key Set malformed");this._jwks={keys:t.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(t=>{throw this._pendingFetch=void 0,t})),await this._pendingFetch}}function createRemoteJWKSet(e,t){const s=new RemoteJWKSet(e,t);return async function(p,g){return s.getKey(p,g)}}class UnsecuredJWT extends ProduceJWT{encode(){const t=encode$1(JSON.stringify({alg:"none"})),s=encode$1(JSON.stringify(this._payload));return`${t}.${s}.`}static decode(t,s){if(typeof t!="string")throw new JWTInvalid("Unsecured JWT must be a string");const{0:p,1:g,2:m,length:d}=t.split(".");if(d!==3||m!=="")throw new JWTInvalid("Invalid Unsecured JWT");let l;try{if(l=JSON.parse(decoder.decode(decode$1(p))),l.alg!=="none")throw new Error}catch{throw new JWTInvalid("Invalid Unsecured JWT")}return{payload:jwtPayload(l,decode$1(g),s),header:l}}}const encode=encode$1,decode=decode$1,base64url=Object.freeze(Object.defineProperty({__proto__:null,decode,encode},Symbol.toStringTag,{value:"Module"}));function decodeProtectedHeader(e){let t;if(typeof e=="string"){const s=e.split(".");(s.length===3||s.length===5)&&([t]=s)}else if(typeof e=="object"&&e)if("protected"in e)t=e.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof t!="string"||!t)throw new Error;const s=JSON.parse(decoder.decode(decode(t)));if(!isObject(s))throw new Error;return s}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}function decodeJwt(e){if(typeof e!="string")throw new JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");const{1:t,length:s}=e.split(".");if(s===5)throw new JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(s!==3)throw new JWTInvalid("Invalid JWT");if(!t)throw new JWTInvalid("JWTs must contain a payload");let p;try{p=decode(t)}catch{throw new JWTInvalid("Failed to base64url decode the payload")}let g;try{g=JSON.parse(decoder.decode(p))}catch{throw new JWTInvalid("Failed to parse the decoded payload as JSON")}if(!isObject(g))throw new JWTInvalid("Invalid JWT Claims Set");return g}async function generateSecret$1(e,t){var s;let p,g,m;switch(e){case"HS256":case"HS384":case"HS512":p=parseInt(e.slice(-3),10),g={name:"HMAC",hash:`SHA-${p}`,length:p},m=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return p=parseInt(e.slice(-3),10),random(new Uint8Array(p>>3));case"A128KW":case"A192KW":case"A256KW":p=parseInt(e.slice(1,4),10),g={name:"AES-KW",length:p},m=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":p=parseInt(e.slice(1,4),10),g={name:"AES-GCM",length:p},m=["encrypt","decrypt"];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return crypto$1.subtle.generateKey(g,(s=t?.extractable)!==null&&s!==void 0?s:!1,m)}function getModulusLengthOption(e){var t;const s=(t=e?.modulusLength)!==null&&t!==void 0?t:2048;if(typeof s!="number"||s<2048)throw new JOSENotSupported("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return s}async function generateKeyPair$1(e,t){var s,p,g;let m,d;switch(e){case"PS256":case"PS384":case"PS512":m={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:getModulusLengthOption(t)},d=["sign","verify"];break;case"RS256":case"RS384":case"RS512":m={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:getModulusLengthOption(t)},d=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":m={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:getModulusLengthOption(t)},d=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":m={name:"ECDSA",namedCurve:"P-256"},d=["sign","verify"];break;case"ES384":m={name:"ECDSA",namedCurve:"P-384"},d=["sign","verify"];break;case"ES512":m={name:"ECDSA",namedCurve:"P-521"},d=["sign","verify"];break;case"EdDSA":d=["sign","verify"];const l=(s=t?.crv)!==null&&s!==void 0?s:"Ed25519";switch(l){case"Ed25519":case"Ed448":m={name:l};break;default:throw new JOSENotSupported("Invalid or unsupported crv option provided")}break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{d=["deriveKey","deriveBits"];const a=(p=t?.crv)!==null&&p!==void 0?p:"P-256";switch(a){case"P-256":case"P-384":case"P-521":{m={name:"ECDH",namedCurve:a};break}case"X25519":case"X448":m={name:a};break;default:throw new JOSENotSupported("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return crypto$1.subtle.generateKey(m,(g=t?.extractable)!==null&&g!==void 0?g:!1,d)}async function generateKeyPair(e,t){return generateKeyPair$1(e,t)}async function generateSecret(e,t){return generateSecret$1(e,t)}const value$1="WebCryptoAPI",browser$3=Object.freeze(Object.defineProperty({__proto__:null,CompactEncrypt,CompactSign,EmbeddedJWK,EncryptJWT,FlattenedEncrypt,FlattenedSign,GeneralEncrypt,GeneralSign,SignJWT,UnsecuredJWT,base64url,calculateJwkThumbprint,calculateJwkThumbprintUri,compactDecrypt,compactVerify,createLocalJWKSet,createRemoteJWKSet,cryptoRuntime:value$1,decodeJwt,decodeProtectedHeader,errors:errors$1,exportJWK,exportPKCS8,exportSPKI,flattenedDecrypt,flattenedVerify,generalDecrypt,generalVerify,generateKeyPair,generateSecret,importJWK,importPKCS8,importSPKI,importX509,jwtDecrypt,jwtVerify},Symbol.toStringTag,{value:"Module"})),require$$0$3=getAugmentedNamespace(browser$3);var JwksError_1,hasRequiredJwksError;function requireJwksError(){if(hasRequiredJwksError)return JwksError_1;hasRequiredJwksError=1;function e(t){Error.call(this,t),Error.captureStackTrace(this,this.constructor),this.name="JwksError",this.message=t}return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,JwksError_1=e,JwksError_1}var utils$1,hasRequiredUtils$1;function requireUtils$1(){if(hasRequiredUtils$1)return utils$1;hasRequiredUtils$1=1;const e=require$$0$3,t=requireJwksError();function s(g){if(g.alg)return g.alg;if(g.kty==="RSA")return"RS256";if(g.kty==="EC")switch(g.crv){case"P-256":return"ES256";case"secp256k1":return"ES256K";case"P-384":return"ES384";case"P-521":return"ES512"}if(g.kty==="OKP")switch(g.crv){case"Ed25519":case"Ed448":return"EdDSA"}throw new t("Unsupported JWK")}async function p(g){const m=[];g=g.filter(({use:d})=>d==="sig"||d===void 0).filter(({kty:d})=>d==="RSA"||d==="EC"||d==="OKP");for(const d of g)try{const l=await e.importJWK({...d,ext:!0},s(d));if(l.type!=="public")continue;let a;if(l[Symbol.toStringTag]==="CryptoKey"){const o=await e.exportSPKI(l);a=()=>o}else a=()=>l.export({format:"pem",type:"spki"});m.push({get publicKey(){return a()},get rsaPublicKey(){return a()},getPublicKey(){return a()},...typeof d.kid=="string"&&d.kid?{kid:d.kid}:void 0,...typeof d.alg=="string"&&d.alg?{alg:d.alg}:void 0})}catch{continue}return m}return utils$1={retrieveSigningKeys:p},utils$1}var request={},hasRequiredRequest;function requireRequest(){if(hasRequiredRequest)return request;hasRequiredRequest=1;const e=require$$1$3,t=require$$1$3,s=require$$1$3;return request.default=p=>p.fetcher?p.fetcher(p.uri):new Promise((g,m)=>{const{hostname:d,path:l,port:a,protocol:o}=s.parse(p.uri),h={hostname:d,path:l,port:a,method:"GET",...p.headers&&{headers:{...p.headers}},...p.timeout&&{timeout:p.timeout},...p.agent&&{agent:p.agent}},_=(o==="https:"?t:e).request(h,y=>{let w="";y.setEncoding("utf8"),y.on("data",T=>{w+=T}),y.on("end",()=>{if(y.statusCode<200||y.statusCode>=300){const T=y.body&&(y.body.message||y.body)||y.statusMessage||`Http Error ${y.statusCode}`;m({errorMsg:T})}else try{g(w&&JSON.parse(w))}catch(T){m(T)}})});_.on("timeout",()=>_.destroy()).on("error",y=>m(y)).end()}),request}var cache={},async={},iterator,hasRequiredIterator;function requireIterator(){return hasRequiredIterator||(hasRequiredIterator=1,iterator=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),iterator}var yallist,hasRequiredYallist;function requireYallist(){if(hasRequiredYallist)return yallist;hasRequiredYallist=1,yallist=e,e.Node=g,e.create=e;function e(m){var d=this;if(d instanceof e||(d=new e),d.tail=null,d.head=null,d.length=0,m&&typeof m.forEach=="function")m.forEach(function(o){d.push(o)});else if(arguments.length>0)for(var l=0,a=arguments.length;l<a;l++)d.push(arguments[l]);return d}e.prototype.removeNode=function(m){if(m.list!==this)throw new Error("removing node which does not belong to this list");var d=m.next,l=m.prev;return d&&(d.prev=l),l&&(l.next=d),m===this.head&&(this.head=d),m===this.tail&&(this.tail=l),m.list.length--,m.next=null,m.prev=null,m.list=null,d},e.prototype.unshiftNode=function(m){if(m!==this.head){m.list&&m.list.removeNode(m);var d=this.head;m.list=this,m.next=d,d&&(d.prev=m),this.head=m,this.tail||(this.tail=m),this.length++}},e.prototype.pushNode=function(m){if(m!==this.tail){m.list&&m.list.removeNode(m);var d=this.tail;m.list=this,m.prev=d,d&&(d.next=m),this.tail=m,this.head||(this.head=m),this.length++}},e.prototype.push=function(){for(var m=0,d=arguments.length;m<d;m++)s(this,arguments[m]);return this.length},e.prototype.unshift=function(){for(var m=0,d=arguments.length;m<d;m++)p(this,arguments[m]);return this.length},e.prototype.pop=function(){if(this.tail){var m=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,m}},e.prototype.shift=function(){if(this.head){var m=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,m}},e.prototype.forEach=function(m,d){d=d||this;for(var l=this.head,a=0;l!==null;a++)m.call(d,l.value,a,this),l=l.next},e.prototype.forEachReverse=function(m,d){d=d||this;for(var l=this.tail,a=this.length-1;l!==null;a--)m.call(d,l.value,a,this),l=l.prev},e.prototype.get=function(m){for(var d=0,l=this.head;l!==null&&d<m;d++)l=l.next;if(d===m&&l!==null)return l.value},e.prototype.getReverse=function(m){for(var d=0,l=this.tail;l!==null&&d<m;d++)l=l.prev;if(d===m&&l!==null)return l.value},e.prototype.map=function(m,d){d=d||this;for(var l=new e,a=this.head;a!==null;)l.push(m.call(d,a.value,this)),a=a.next;return l},e.prototype.mapReverse=function(m,d){d=d||this;for(var l=new e,a=this.tail;a!==null;)l.push(m.call(d,a.value,this)),a=a.prev;return l},e.prototype.reduce=function(m,d){var l,a=this.head;if(arguments.length>1)l=d;else if(this.head)a=this.head.next,l=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=0;a!==null;o++)l=m(l,a.value,o),a=a.next;return l},e.prototype.reduceReverse=function(m,d){var l,a=this.tail;if(arguments.length>1)l=d;else if(this.tail)a=this.tail.prev,l=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=this.length-1;a!==null;o--)l=m(l,a.value,o),a=a.prev;return l},e.prototype.toArray=function(){for(var m=new Array(this.length),d=0,l=this.head;l!==null;d++)m[d]=l.value,l=l.next;return m},e.prototype.toArrayReverse=function(){for(var m=new Array(this.length),d=0,l=this.tail;l!==null;d++)m[d]=l.value,l=l.prev;return m},e.prototype.slice=function(m,d){d=d||this.length,d<0&&(d+=this.length),m=m||0,m<0&&(m+=this.length);var l=new e;if(d<m||d<0)return l;m<0&&(m=0),d>this.length&&(d=this.length);for(var a=0,o=this.head;o!==null&&a<m;a++)o=o.next;for(;o!==null&&a<d;a++,o=o.next)l.push(o.value);return l},e.prototype.sliceReverse=function(m,d){d=d||this.length,d<0&&(d+=this.length),m=m||0,m<0&&(m+=this.length);var l=new e;if(d<m||d<0)return l;m<0&&(m=0),d>this.length&&(d=this.length);for(var a=this.length,o=this.tail;o!==null&&a>d;a--)o=o.prev;for(;o!==null&&a>m;a--,o=o.prev)l.push(o.value);return l},e.prototype.splice=function(m,d,...l){m>this.length&&(m=this.length-1),m<0&&(m=this.length+m);for(var a=0,o=this.head;o!==null&&a<m;a++)o=o.next;for(var h=[],a=0;o&&a<d;a++)h.push(o.value),o=this.removeNode(o);o===null&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(var a=0;a<l.length;a++)o=t(this,o,l[a]);return h},e.prototype.reverse=function(){for(var m=this.head,d=this.tail,l=m;l!==null;l=l.prev){var a=l.prev;l.prev=l.next,l.next=a}return this.head=d,this.tail=m,this};function t(m,d,l){var a=d===m.head?new g(l,null,d,m):new g(l,d,d.next,m);return a.next===null&&(m.tail=a),a.prev===null&&(m.head=a),m.length++,a}function s(m,d){m.tail=new g(d,m.tail,null,m),m.head||(m.head=m.tail),m.length++}function p(m,d){m.head=new g(d,null,m.head,m),m.tail||(m.tail=m.head),m.length++}function g(m,d,l,a){if(!(this instanceof g))return new g(m,d,l,a);this.list=a,this.value=m,d?(d.next=this,this.prev=d):this.prev=null,l?(l.prev=this,this.next=l):this.next=null}try{requireIterator()(e)}catch{}return yallist}var lruCache,hasRequiredLruCache;function requireLruCache(){if(hasRequiredLruCache)return lruCache;hasRequiredLruCache=1;const e=requireYallist(),t=Symbol("max"),s=Symbol("length"),p=Symbol("lengthCalculator"),g=Symbol("allowStale"),m=Symbol("maxAge"),d=Symbol("dispose"),l=Symbol("noDisposeOnSet"),a=Symbol("lruList"),o=Symbol("cache"),h=Symbol("updateAgeOnGet"),v=()=>1;class _{constructor(x){if(typeof x=="number"&&(x={max:x}),x||(x={}),x.max&&(typeof x.max!="number"||x.max<0))throw new TypeError("max must be a non-negative number");this[t]=x.max||1/0;const j=x.length||v;if(this[p]=typeof j!="function"?v:j,this[g]=x.stale||!1,x.maxAge&&typeof x.maxAge!="number")throw new TypeError("maxAge must be a number");this[m]=x.maxAge||0,this[d]=x.dispose,this[l]=x.noDisposeOnSet||!1,this[h]=x.updateAgeOnGet||!1,this.reset()}set max(x){if(typeof x!="number"||x<0)throw new TypeError("max must be a non-negative number");this[t]=x||1/0,T(this)}get max(){return this[t]}set allowStale(x){this[g]=!!x}get allowStale(){return this[g]}set maxAge(x){if(typeof x!="number")throw new TypeError("maxAge must be a non-negative number");this[m]=x,T(this)}get maxAge(){return this[m]}set lengthCalculator(x){typeof x!="function"&&(x=v),x!==this[p]&&(this[p]=x,this[s]=0,this[a].forEach(j=>{j.length=this[p](j.value,j.key),this[s]+=j.length})),T(this)}get lengthCalculator(){return this[p]}get length(){return this[s]}get itemCount(){return this[a].length}rforEach(x,j){j=j||this;for(let D=this[a].tail;D!==null;){const k=D.prev;E(this,x,D,j),D=k}}forEach(x,j){j=j||this;for(let D=this[a].head;D!==null;){const k=D.next;E(this,x,D,j),D=k}}keys(){return this[a].toArray().map(x=>x.key)}values(){return this[a].toArray().map(x=>x.value)}reset(){this[d]&&this[a]&&this[a].length&&this[a].forEach(x=>this[d](x.key,x.value)),this[o]=new Map,this[a]=new e,this[s]=0}dump(){return this[a].map(x=>w(this,x)?!1:{k:x.key,v:x.value,e:x.now+(x.maxAge||0)}).toArray().filter(x=>x)}dumpLru(){return this[a]}set(x,j,D){if(D=D||this[m],D&&typeof D!="number")throw new TypeError("maxAge must be a number");const k=D?Date.now():0,q=this[p](j,x);if(this[o].has(x)){if(q>this[t])return I(this,this[o].get(x)),!1;const W=this[o].get(x).value;return this[d]&&(this[l]||this[d](x,W.value)),W.now=k,W.maxAge=D,W.value=j,this[s]+=q-W.length,W.length=q,this.get(x),T(this),!0}const G=new O(x,j,q,k,D);return G.length>this[t]?(this[d]&&this[d](x,j),!1):(this[s]+=G.length,this[a].unshift(G),this[o].set(x,this[a].head),T(this),!0)}has(x){if(!this[o].has(x))return!1;const j=this[o].get(x).value;return!w(this,j)}get(x){return y(this,x,!0)}peek(x){return y(this,x,!1)}pop(){const x=this[a].tail;return x?(I(this,x),x.value):null}del(x){I(this,this[o].get(x))}load(x){this.reset();const j=Date.now();for(let D=x.length-1;D>=0;D--){const k=x[D],q=k.e||0;if(q===0)this.set(k.k,k.v);else{const G=q-j;G>0&&this.set(k.k,k.v,G)}}}prune(){this[o].forEach((x,j)=>y(this,j,!1))}}const y=(C,x,j)=>{const D=C[o].get(x);if(D){const k=D.value;if(w(C,k)){if(I(C,D),!C[g])return}else j&&(C[h]&&(D.value.now=Date.now()),C[a].unshiftNode(D));return k.value}},w=(C,x)=>{if(!x||!x.maxAge&&!C[m])return!1;const j=Date.now()-x.now;return x.maxAge?j>x.maxAge:C[m]&&j>C[m]},T=C=>{if(C[s]>C[t])for(let x=C[a].tail;C[s]>C[t]&&x!==null;){const j=x.prev;I(C,x),x=j}},I=(C,x)=>{if(x){const j=x.value;C[d]&&C[d](j.key,j.value),C[s]-=j.length,C[o].delete(j.key),C[a].removeNode(x)}};class O{constructor(x,j,D,k,q){this.key=x,this.value=j,this.length=D,this.now=k,this.maxAge=q||0}}const E=(C,x,j,D)=>{let k=j.value;w(C,k)&&(I(C,j),C[g]||(k=void 0)),k&&x.call(D,k.value,k.key,C)};return lruCache=_,lruCache}var lodash_clonedeep={exports:{}};lodash_clonedeep.exports;var hasRequiredLodash_clonedeep;function requireLodash_clonedeep(){return hasRequiredLodash_clonedeep||(hasRequiredLodash_clonedeep=1,(function(e,t){var s=200,p="__lodash_hash_undefined__",g=9007199254740991,m="[object Arguments]",d="[object Array]",l="[object Boolean]",a="[object Date]",o="[object Error]",h="[object Function]",v="[object GeneratorFunction]",_="[object Map]",y="[object Number]",w="[object Object]",T="[object Promise]",I="[object RegExp]",O="[object Set]",E="[object String]",C="[object Symbol]",x="[object WeakMap]",j="[object ArrayBuffer]",D="[object DataView]",k="[object Float32Array]",q="[object Float64Array]",G="[object Int8Array]",$="[object Int16Array]",W="[object Int32Array]",K="[object Uint8Array]",z="[object Uint8ClampedArray]",Q="[object Uint16Array]",Y="[object Uint32Array]",te=/[\\^$.*+?()[\]{}|]/g,ae=/\w*$/,ue=/^\[object .+?Constructor\]$/,ee=/^(?:0|[1-9]\d*)$/,oe={};oe[m]=oe[d]=oe[j]=oe[D]=oe[l]=oe[a]=oe[k]=oe[q]=oe[G]=oe[$]=oe[W]=oe[_]=oe[y]=oe[w]=oe[I]=oe[O]=oe[E]=oe[C]=oe[K]=oe[z]=oe[Q]=oe[Y]=!0,oe[o]=oe[h]=oe[x]=!1;var de=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,he=typeof self=="object"&&self&&self.Object===Object&&self,Ee=de||he||Function("return this")(),fe=t&&!t.nodeType&&t,Se=fe&&!0&&e&&!e.nodeType&&e,be=Se&&Se.exports===fe;function Oe(Ae,Fe){return Ae.set(Fe[0],Fe[1]),Ae}function ge(Ae,Fe){return Ae.add(Fe),Ae}function J(Ae,Fe){for(var We=-1,at=Ae?Ae.length:0;++We<at&&Fe(Ae[We],We,Ae)!==!1;);return Ae}function c(Ae,Fe){for(var We=-1,at=Fe.length,ir=Ae.length;++We<at;)Ae[ir+We]=Fe[We];return Ae}function N(Ae,Fe,We,at){for(var ir=-1,cr=Ae?Ae.length:0;++ir<cr;)We=Fe(We,Ae[ir],ir,Ae);return We}function A(Ae,Fe){for(var We=-1,at=Array(Ae);++We<Ae;)at[We]=Fe(We);return at}function V(Ae,Fe){return Ae?.[Fe]}function ne(Ae){var Fe=!1;if(Ae!=null&&typeof Ae.toString!="function")try{Fe=!!(Ae+"")}catch{}return Fe}function ce(Ae){var Fe=-1,We=Array(Ae.size);return Ae.forEach(function(at,ir){We[++Fe]=[ir,at]}),We}function ie(Ae,Fe){return function(We){return Ae(Fe(We))}}function u(Ae){var Fe=-1,We=Array(Ae.size);return Ae.forEach(function(at){We[++Fe]=at}),We}var P=Array.prototype,M=Function.prototype,n=Object.prototype,L=Ee["__core-js_shared__"],U=(function(){var Ae=/[^.]+$/.exec(L&&L.keys&&L.keys.IE_PROTO||"");return Ae?"Symbol(src)_1."+Ae:""})(),X=M.toString,me=n.hasOwnProperty,Ie=n.toString,Le=RegExp("^"+X.call(me).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ke=be?Ee.Buffer:void 0,ze=Ee.Symbol,nt=Ee.Uint8Array,bt=ie(Object.getPrototypeOf,Object),dt=Object.create,Et=n.propertyIsEnumerable,lt=P.splice,Be=Object.getOwnPropertySymbols,Me=ke?ke.isBuffer:void 0,Ve=ie(Object.keys,Object),Je=vr(Ee,"DataView"),Qe=vr(Ee,"Map"),st=vr(Ee,"Promise"),gt=vr(Ee,"Set"),St=vr(Ee,"WeakMap"),mt=vr(Object,"create"),zt=br(Je),Yt=br(Qe),Tt=br(st),qt=br(gt),Ut=br(St),Rt=ze?ze.prototype:void 0,Ft=Rt?Rt.valueOf:void 0;function Nt(Ae){var Fe=-1,We=Ae?Ae.length:0;for(this.clear();++Fe<We;){var at=Ae[Fe];this.set(at[0],at[1])}}function yt(){this.__data__=mt?mt(null):{}}function Mt(Ae){return this.has(Ae)&&delete this.__data__[Ae]}function jt(Ae){var Fe=this.__data__;if(mt){var We=Fe[Ae];return We===p?void 0:We}return me.call(Fe,Ae)?Fe[Ae]:void 0}function Ot(Ae){var Fe=this.__data__;return mt?Fe[Ae]!==void 0:me.call(Fe,Ae)}function vt(Ae,Fe){var We=this.__data__;return We[Ae]=mt&&Fe===void 0?p:Fe,this}Nt.prototype.clear=yt,Nt.prototype.delete=Mt,Nt.prototype.get=jt,Nt.prototype.has=Ot,Nt.prototype.set=vt;function wt(Ae){var Fe=-1,We=Ae?Ae.length:0;for(this.clear();++Fe<We;){var at=Ae[Fe];this.set(at[0],at[1])}}function Lt(){this.__data__=[]}function Pe(Ae){var Fe=this.__data__,We=Zt(Fe,Ae);if(We<0)return!1;var at=Fe.length-1;return We==at?Fe.pop():lt.call(Fe,We,1),!0}function Ce(Ae){var Fe=this.__data__,We=Zt(Fe,Ae);return We<0?void 0:Fe[We][1]}function Ne(Ae){return Zt(this.__data__,Ae)>-1}function He(Ae,Fe){var We=this.__data__,at=Zt(We,Ae);return at<0?We.push([Ae,Fe]):We[at][1]=Fe,this}wt.prototype.clear=Lt,wt.prototype.delete=Pe,wt.prototype.get=Ce,wt.prototype.has=Ne,wt.prototype.set=He;function je(Ae){var Fe=-1,We=Ae?Ae.length:0;for(this.clear();++Fe<We;){var at=Ae[Fe];this.set(at[0],at[1])}}function ot(){this.__data__={hash:new Nt,map:new(Qe||wt),string:new Nt}}function ct(Ae){return ar(this,Ae).delete(Ae)}function Ct(Ae){return ar(this,Ae).get(Ae)}function Qt(Ae){return ar(this,Ae).has(Ae)}function Ht(Ae,Fe){return ar(this,Ae).set(Ae,Fe),this}je.prototype.clear=ot,je.prototype.delete=ct,je.prototype.get=Ct,je.prototype.has=Qt,je.prototype.set=Ht;function Dt(Ae){this.__data__=new wt(Ae)}function _t(){this.__data__=new wt}function pt(Ae){return this.__data__.delete(Ae)}function kt(Ae){return this.__data__.get(Ae)}function Gt(Ae){return this.__data__.has(Ae)}function wr(Ae,Fe){var We=this.__data__;if(We instanceof wt){var at=We.__data__;if(!Qe||at.length<s-1)return at.push([Ae,Fe]),this;We=this.__data__=new je(at)}return We.set(Ae,Fe),this}Dt.prototype.clear=_t,Dt.prototype.delete=pt,Dt.prototype.get=kt,Dt.prototype.has=Gt,Dt.prototype.set=wr;function rr(Ae,Fe){var We=Lr(Ae)||gn(Ae)?A(Ae.length,String):[],at=We.length,ir=!!at;for(var cr in Ae)me.call(Ae,cr)&&!(ir&&(cr=="length"||xr(cr,at)))&&We.push(cr);return We}function yr(Ae,Fe,We){var at=Ae[Fe];(!(me.call(Ae,Fe)&&Yr(at,We))||We===void 0&&!(Fe in Ae))&&(Ae[Fe]=We)}function Zt(Ae,Fe){for(var We=Ae.length;We--;)if(Yr(Ae[We][0],Fe))return We;return-1}function Xt(Ae,Fe){return Ae&&Wt(Fe,Hr(Fe),Ae)}function Nr(Ae,Fe,We,at,ir,cr,Er){var pr;if(at&&(pr=cr?at(Ae,ir,cr,Er):at(Ae)),pr!==void 0)return pr;if(!qr(Ae))return Ae;var r=Lr(Ae);if(r){if(pr=an(Ae),!Fe)return mr(Ae,pr)}else{var b=_r(Ae),S=b==h||b==v;if(Qr(Ae))return Ge(Ae,Fe);if(b==w||b==m||S&&!cr){if(ne(Ae))return cr?Ae:{};if(pr=jr(S?{}:Ae),!Fe)return hr(Ae,Xt(pr,Ae))}else{if(!oe[b])return cr?Ae:{};pr=fn(Ae,b,Nr,Fe)}}Er||(Er=new Dt);var le=Er.get(Ae);if(le)return le;if(Er.set(Ae,pr),!r)var et=We?tr(Ae):Hr(Ae);return J(et||Ae,function(ln,Tn){et&&(Tn=ln,ln=Ae[Tn]),yr(pr,Tn,Nr(ln,Fe,We,at,Tn,Ae,Er))}),pr}function ye(Ae){return qr(Ae)?dt(Ae):{}}function _e(Ae,Fe,We){var at=Fe(Ae);return Lr(Ae)?at:c(at,We(Ae))}function Te(Ae){return Ie.call(Ae)}function De(Ae){if(!qr(Ae)||Dr(Ae))return!1;var Fe=Xr(Ae)||ne(Ae)?Le:ue;return Fe.test(br(Ae))}function $e(Ae){if(!zr(Ae))return Ve(Ae);var Fe=[];for(var We in Object(Ae))me.call(Ae,We)&&We!="constructor"&&Fe.push(We);return Fe}function Ge(Ae,Fe){if(Fe)return Ae.slice();var We=new Ae.constructor(Ae.length);return Ae.copy(We),We}function Ze(Ae){var Fe=new Ae.constructor(Ae.byteLength);return new nt(Fe).set(new nt(Ae)),Fe}function Ye(Ae,Fe){var We=Fe?Ze(Ae.buffer):Ae.buffer;return new Ae.constructor(We,Ae.byteOffset,Ae.byteLength)}function At(Ae,Fe,We){var at=Fe?We(ce(Ae),!0):ce(Ae);return N(at,Oe,new Ae.constructor)}function Kt(Ae){var Fe=new Ae.constructor(Ae.source,ae.exec(Ae));return Fe.lastIndex=Ae.lastIndex,Fe}function er(Ae,Fe,We){var at=Fe?We(u(Ae),!0):u(Ae);return N(at,ge,new Ae.constructor)}function nr(Ae){return Ft?Object(Ft.call(Ae)):{}}function ur(Ae,Fe){var We=Fe?Ze(Ae.buffer):Ae.buffer;return new Ae.constructor(We,Ae.byteOffset,Ae.length)}function mr(Ae,Fe){var We=-1,at=Ae.length;for(Fe||(Fe=Array(at));++We<at;)Fe[We]=Ae[We];return Fe}function Wt(Ae,Fe,We,at){We||(We={});for(var ir=-1,cr=Fe.length;++ir<cr;){var Er=Fe[ir],pr=void 0;yr(We,Er,pr===void 0?Ae[Er]:pr)}return We}function hr(Ae,Fe){return Wt(Ae,Jr(Ae),Fe)}function tr(Ae){return _e(Ae,Hr,Jr)}function ar(Ae,Fe){var We=Ae.__data__;return hn(Fe)?We[typeof Fe=="string"?"string":"hash"]:We.map}function vr(Ae,Fe){var We=V(Ae,Fe);return De(We)?We:void 0}var Jr=Be?ie(Be,Object):Fr,_r=Te;(Je&&_r(new Je(new ArrayBuffer(1)))!=D||Qe&&_r(new Qe)!=_||st&&_r(st.resolve())!=T||gt&&_r(new gt)!=O||St&&_r(new St)!=x)&&(_r=function(Ae){var Fe=Ie.call(Ae),We=Fe==w?Ae.constructor:void 0,at=We?br(We):void 0;if(at)switch(at){case zt:return D;case Yt:return _;case Tt:return T;case qt:return O;case Ut:return x}return Fe});function an(Ae){var Fe=Ae.length,We=Ae.constructor(Fe);return Fe&&typeof Ae[0]=="string"&&me.call(Ae,"index")&&(We.index=Ae.index,We.input=Ae.input),We}function jr(Ae){return typeof Ae.constructor=="function"&&!zr(Ae)?ye(bt(Ae)):{}}function fn(Ae,Fe,We,at){var ir=Ae.constructor;switch(Fe){case j:return Ze(Ae);case l:case a:return new ir(+Ae);case D:return Ye(Ae,at);case k:case q:case G:case $:case W:case K:case z:case Q:case Y:return ur(Ae,at);case _:return At(Ae,at,We);case y:case E:return new ir(Ae);case I:return Kt(Ae);case O:return er(Ae,at,We);case C:return nr(Ae)}}function xr(Ae,Fe){return Fe=Fe??g,!!Fe&&(typeof Ae=="number"||ee.test(Ae))&&Ae>-1&&Ae%1==0&&Ae<Fe}function hn(Ae){var Fe=typeof Ae;return Fe=="string"||Fe=="number"||Fe=="symbol"||Fe=="boolean"?Ae!=="__proto__":Ae===null}function Dr(Ae){return!!U&&U in Ae}function zr(Ae){var Fe=Ae&&Ae.constructor,We=typeof Fe=="function"&&Fe.prototype||n;return Ae===We}function br(Ae){if(Ae!=null){try{return X.call(Ae)}catch{}try{return Ae+""}catch{}}return""}function sn(Ae){return Nr(Ae,!0,!0)}function Yr(Ae,Fe){return Ae===Fe||Ae!==Ae&&Fe!==Fe}function gn(Ae){return mn(Ae)&&me.call(Ae,"callee")&&(!Et.call(Ae,"callee")||Ie.call(Ae)==m)}var Lr=Array.isArray;function Ur(Ae){return Ae!=null&&yn(Ae.length)&&!Xr(Ae)}function mn(Ae){return Br(Ae)&&Ur(Ae)}var Qr=Me||Zr;function Xr(Ae){var Fe=qr(Ae)?Ie.call(Ae):"";return Fe==h||Fe==v}function yn(Ae){return typeof Ae=="number"&&Ae>-1&&Ae%1==0&&Ae<=g}function qr(Ae){var Fe=typeof Ae;return!!Ae&&(Fe=="object"||Fe=="function")}function Br(Ae){return!!Ae&&typeof Ae=="object"}function Hr(Ae){return Ur(Ae)?rr(Ae):$e(Ae)}function Fr(){return[]}function Zr(){return!1}e.exports=sn})(lodash_clonedeep,lodash_clonedeep.exports)),lodash_clonedeep.exports}var freeze={},hasRequiredFreeze;function requireFreeze(){if(hasRequiredFreeze)return freeze;hasRequiredFreeze=1,Object.defineProperty(freeze,"__esModule",{value:!0}),freeze.deepFreeze=void 0;function e(t){return t&&(Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(s){t.hasOwnProperty(s)&&t[s]!==null&&(typeof t[s]=="object"||typeof t[s]=="function")&&t[s].constructor!==Buffer&&!Object.isFrozen(t[s])&&e(t[s])})),t}return freeze.deepFreeze=e,freeze}var sync={},hasRequiredSync;function requireSync(){if(hasRequiredSync)return sync;hasRequiredSync=1;var e=sync&&sync.__read||function(a,o){var h=typeof Symbol=="function"&&a[Symbol.iterator];if(!h)return a;var v=h.call(a),_,y=[],w;try{for(;(o===void 0||o-- >0)&&!(_=v.next()).done;)y.push(_.value)}catch(T){w={error:T}}finally{try{_&&!_.done&&(h=v.return)&&h.call(v)}finally{if(w)throw w.error}}return y},t=sync&&sync.__spread||function(){for(var a=[],o=0;o<arguments.length;o++)a=a.concat(e(arguments[o]));return a},s=sync&&sync.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(sync,"__esModule",{value:!0}),sync.syncMemoizer=void 0;var p=s(requireLruCache()),g=require$$1$3,m=s(requireLodash_clonedeep()),d=requireFreeze();function l(a){var o=new p.default(a),h=a.load,v=a.hash,_=a.bypass,y=a.itemMaxAge,w=a.freeze,T=a.clone,I=new g.EventEmitter,O=Object.assign({del:E,reset:function(){return o.reset()},keys:o.keys.bind(o),on:I.on.bind(I),once:I.once.bind(I)},a);if(a.disable)return Object.assign(h,O);function E(){var k=v.apply(void 0,t(arguments));o.del(k)}function C(k){for(var q=[],G=1;G<arguments.length;G++)q[G-1]=arguments[G];I.emit.apply(I,t([k],q))}function x(k){return k&&k.then&&typeof k.then=="function"}function j(k){var q=k;return T&&(x(q)?q=q.then(m.default):q=m.default(q)),w&&(x(q)?q=q.then(d.deepFreeze):d.deepFreeze(q)),q}var D=function(){for(var k=[],q=0;q<arguments.length;q++)k[q]=arguments[q];if(_&&_.apply(void 0,t(k)))return C.apply(void 0,t(["miss"],k)),h.apply(void 0,t(k));var G=v.apply(void 0,t(k)),$=o.get(G);if($)return C.apply(void 0,t(["hit"],k)),j($);C.apply(void 0,t(["miss"],k));var W=h.apply(void 0,t(k));return y?o.set(G,W,y.apply(void 0,t(k.concat([W])))):o.set(G,W),j(W)};return Object.assign(D,O)}return sync.syncMemoizer=l,sync}var hasRequiredAsync;function requireAsync(){if(hasRequiredAsync)return async;hasRequiredAsync=1;var e=async&&async.__read||function(h,v){var _=typeof Symbol=="function"&&h[Symbol.iterator];if(!_)return h;var y=_.call(h),w,T=[],I;try{for(;(v===void 0||v-- >0)&&!(w=y.next()).done;)T.push(w.value)}catch(O){I={error:O}}finally{try{w&&!w.done&&(_=y.return)&&_.call(y)}finally{if(I)throw I.error}}return T},t=async&&async.__spread||function(){for(var h=[],v=0;v<arguments.length;v++)h=h.concat(e(arguments[v]));return h},s=async&&async.__values||function(h){var v=typeof Symbol=="function"&&Symbol.iterator,_=v&&h[v],y=0;if(_)return _.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&y>=h.length&&(h=void 0),{value:h&&h[y++],done:!h}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")},p=async&&async.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(async,"__esModule",{value:!0}),async.asyncMemoizer=void 0;var g=p(requireLruCache()),m=require$$1$3,d=p(requireLodash_clonedeep()),l=requireFreeze(),a=requireSync();function o(h){var v=new g.default(h),_=h.load,y=h.hash,w=h.bypass,T=h.itemMaxAge,I=h.freeze,O=h.clone,E=h.queueMaxAge||1e3,C=new Map,x=new m.EventEmitter,j=Object.assign({del:D,reset:function(){return v.reset()},keys:v.keys.bind(v),on:x.on.bind(x),once:x.once.bind(x)},h);if(h.disable)return Object.assign(_,j);function D(){for(var W=[],K=0;K<arguments.length;K++)W[K]=arguments[K];var z=y.apply(void 0,t(W));v.del(z)}function k(W,K,z){I&&z.forEach(l.deepFreeze),T?v.set(W,z,T.apply(void 0,t(K.concat(z)))):v.set(W,z)}function q(W,K){var z,Q;try{for(var Y=s(W),te=Y.next();!te.done;te=Y.next()){var ae=te.value;O?setImmediate.apply(void 0,t([ae],K.map(d.default))):setImmediate.apply(void 0,t([ae],K))}}catch(ue){z={error:ue}}finally{try{te&&!te.done&&(Q=Y.return)&&Q.call(Y)}finally{if(z)throw z.error}}}function G(W){for(var K=[],z=1;z<arguments.length;z++)K[z-1]=arguments[z];x.emit.apply(x,t([W],K))}function $(){for(var W=[],K=0;K<arguments.length;K++)W[K]=arguments[K];var z=W.slice(0,-1),Q=W.slice(-1).pop(),Y;if(w&&w.apply(void 0,t(z)))return G.apply(void 0,t(["miss"],z)),_.apply(void 0,t(W));z.length===0&&!y?Y="_":Y=y.apply(void 0,t(z));var te=v.get(Y);if(te)return G.apply(void 0,t(["hit"],z)),q([Q],[null].concat(te));var ae=C.get(Y);if(ae&&ae.expiresAt>Date.now()){ae.queue.push(Q),G.apply(void 0,t(["queue"],z));return}G.apply(void 0,t(["miss"],z));var ue=Date.now(),ee=[Q];C.set(Y,{queue:ee,expiresAt:ue+E});var oe=function(){for(var de=[],he=0;he<arguments.length;he++)de[he]=arguments[he];var Ee=de[0];Ee||k(Y,z,de.slice(1)),C.delete(Y),G.apply(void 0,t(["loaded",Date.now()-ue],z)),q(ee,de)};_.apply(void 0,t(z,[oe]))}return Object.assign($,j)}return async.asyncMemoizer=o,o.sync=a.syncMemoizer,async}var lib$2,hasRequiredLib$2;function requireLib$2(){if(hasRequiredLib$2)return lib$2;hasRequiredLib$2=1;var e=requireAsync();return lib$2=e.asyncMemoizer,lib$2}var hasRequiredCache;function requireCache(){if(hasRequiredCache)return cache;hasRequiredCache=1;const e=requireBrowser$2()("jwks"),t=requireLib$2(),{promisify:s,callbackify:p}=require$$1$3;function g(m,{cacheMaxEntries:d=5,cacheMaxAge:l=6e5}){return e(`Configured caching of signing keys. Max: ${d} / Age: ${l}`),s(t({hash:a=>a,load:p(m.getSigningKey.bind(m)),maxAge:l,max:d}))}return cache.default=g,cache}var rateLimit={},limiter={},tokenBucket,hasRequiredTokenBucket;function requireTokenBucket(){if(hasRequiredTokenBucket)return tokenBucket;hasRequiredTokenBucket=1;var e={},t=function(s,p,g,m){if(this.bucketSize=s,this.tokensPerInterval=p,typeof g=="string")switch(g){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=1e3*60;break;case"hr":case"hour":this.interval=1e3*60*60;break;case"day":this.interval=1e3*60*60*24;break;default:throw new Error("Invaid interval "+g)}else this.interval=g;this.parentBucket=m,this.content=0,this.lastDrip=+new Date};return t.prototype={bucketSize:1,tokensPerInterval:1,interval:1e3,parentBucket:null,content:0,lastDrip:0,removeTokens:function(s,p){var g=this;if(!this.bucketSize)return e.nextTick(p.bind(null,null,s,Number.POSITIVE_INFINITY)),!0;if(s>this.bucketSize)return e.nextTick(p.bind(null,"Requested tokens "+s+" exceeds bucket size "+this.bucketSize,null)),!1;if(this.drip(),s>this.content)return m();if(this.parentBucket)return this.parentBucket.removeTokens(s,function(d,l){if(d)return p(d,null);if(s>g.content)return m();g.content-=s,p(null,Math.min(l,g.content))});return this.content-=s,e.nextTick(p.bind(null,null,this.content)),!0;function m(){var d=Math.ceil((s-g.content)*(g.interval/g.tokensPerInterval));return setTimeout(function(){g.removeTokens(s,p)},d),!1}},tryRemoveTokens:function(s){return this.bucketSize?s>this.bucketSize||(this.drip(),s>this.content)||this.parentBucket&&!this.parentBucket.tryRemoveTokens(s)?!1:(this.content-=s,!0):!0},drip:function(){if(!this.tokensPerInterval){this.content=this.bucketSize;return}var s=+new Date,p=Math.max(s-this.lastDrip,0);this.lastDrip=s;var g=p*(this.tokensPerInterval/this.interval);this.content=Math.min(this.content+g,this.bucketSize)}},tokenBucket=t,tokenBucket}var clock,hasRequiredClock;function requireClock(){if(hasRequiredClock)return clock;hasRequiredClock=1;var e={},t=function(){if(typeof e<"u"&&e.hrtime){var s=e.hrtime(),p=s[0],g=s[1];return p*1e3+Math.floor(g/1e6)}return new Date().getTime()};return clock=t,clock}var rateLimiter$1,hasRequiredRateLimiter$1;function requireRateLimiter$1(){if(hasRequiredRateLimiter$1)return rateLimiter$1;hasRequiredRateLimiter$1=1;var e={},t=requireTokenBucket(),s=requireClock(),p=function(g,m,d){this.tokenBucket=new t(g,g,m,null),this.tokenBucket.content=g,this.curIntervalStart=s(),this.tokensThisInterval=0,this.fireImmediately=d};return p.prototype={tokenBucket:null,curIntervalStart:0,tokensThisInterval:0,fireImmediately:!1,removeTokens:function(g,m){if(g>this.tokenBucket.bucketSize)return e.nextTick(m.bind(null,"Requested tokens "+g+" exceeds maximum tokens per interval "+this.tokenBucket.bucketSize,null)),!1;var d=this,l=s();if((l<this.curIntervalStart||l-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=l,this.tokensThisInterval=0),g>this.tokenBucket.tokensPerInterval-this.tokensThisInterval){if(this.fireImmediately)e.nextTick(m.bind(null,null,-1));else{var a=Math.ceil(this.curIntervalStart+this.tokenBucket.interval-l);setTimeout(function(){d.tokenBucket.removeTokens(g,o)},a)}return!1}return this.tokenBucket.removeTokens(g,o);function o(h,v){if(h)return m(h,null);d.tokensThisInterval+=g,m(null,v)}},tryRemoveTokens:function(g){if(g>this.tokenBucket.bucketSize)return!1;var m=s();if((m<this.curIntervalStart||m-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=m,this.tokensThisInterval=0),g>this.tokenBucket.tokensPerInterval-this.tokensThisInterval)return!1;var d=this.tokenBucket.tryRemoveTokens(g);return d&&(this.tokensThisInterval+=g),d},getTokensRemaining:function(){return this.tokenBucket.drip(),this.tokenBucket.content}},rateLimiter$1=p,rateLimiter$1}var hasRequiredLimiter;function requireLimiter(){return hasRequiredLimiter||(hasRequiredLimiter=1,limiter.RateLimiter=requireRateLimiter$1(),limiter.TokenBucket=requireTokenBucket()),limiter}var JwksRateLimitError_1,hasRequiredJwksRateLimitError;function requireJwksRateLimitError(){if(hasRequiredJwksRateLimitError)return JwksRateLimitError_1;hasRequiredJwksRateLimitError=1;function e(t){Error.call(this,t),Error.captureStackTrace(this,this.constructor),this.name="JwksRateLimitError",this.message=t}return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,JwksRateLimitError_1=e,JwksRateLimitError_1}var hasRequiredRateLimit;function requireRateLimit(){if(hasRequiredRateLimit)return rateLimit;hasRequiredRateLimit=1;const e=requireBrowser$2()("jwks"),{RateLimiter:t}=requireLimiter(),s=requireJwksRateLimitError();function p(g,{jwksRequestsPerMinute:m=10}){const d=g.getSigningKey.bind(g),l=new t(m,"minute",!0);return e(`Configured rate limiting to JWKS endpoint at ${m}/minute`),async a=>await new Promise((o,h)=>{l.removeTokens(1,async(v,_)=>{if(v&&h(v),e("Requests to the JWKS endpoint available for the next minute:",_),_<0)e("Too many requests to the JWKS endpoint"),h(new s("Too many requests to the JWKS endpoint"));else try{const y=await d(a);o(y)}catch(y){h(y)}})})}return rateLimit.default=p,rateLimit}var interceptor={},hasRequiredInterceptor;function requireInterceptor(){if(hasRequiredInterceptor)return interceptor;hasRequiredInterceptor=1;const e=requireUtils$1().retrieveSigningKeys;function t(s,{getKeysInterceptor:p}){const g=s.getSigningKey.bind(s);return async m=>{const d=await p();let l;if(d&&d.length&&(l=await e(d)),l&&l.length){const a=l.find(o=>!m||o.kid===m);if(a)return a}return g(m)}}return interceptor.default=t,interceptor}var callbackSupport={},hasRequiredCallbackSupport;function requireCallbackSupport(){if(hasRequiredCallbackSupport)return callbackSupport;hasRequiredCallbackSupport=1;const{callbackify:e}=require$$1$3,t=s=>{const p=s.getSigningKey.bind(s);return(g,m)=>m?e(p)(g,m):p(g)};return callbackSupport.default=t,callbackSupport}var wrappers$2,hasRequiredWrappers$2;function requireWrappers$2(){return hasRequiredWrappers$2||(hasRequiredWrappers$2=1,wrappers$2={request:requireRequest().default,cacheSigningKey:requireCache().default,rateLimitSigningKey:requireRateLimit().default,getKeysInterceptor:requireInterceptor().default,callbackSupport:requireCallbackSupport().default}),wrappers$2}var SigningKeyNotFoundError_1,hasRequiredSigningKeyNotFoundError;function requireSigningKeyNotFoundError(){if(hasRequiredSigningKeyNotFoundError)return SigningKeyNotFoundError_1;hasRequiredSigningKeyNotFoundError=1;function e(t){Error.call(this,t),Error.captureStackTrace(this,this.constructor),this.name="SigningKeyNotFoundError",this.message=t}return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,SigningKeyNotFoundError_1=e,SigningKeyNotFoundError_1}var JwksClient_1,hasRequiredJwksClient;function requireJwksClient(){if(hasRequiredJwksClient)return JwksClient_1;hasRequiredJwksClient=1;const e=requireBrowser$2()("jwks"),{retrieveSigningKeys:t}=requireUtils$1(),{request:s,cacheSigningKey:p,rateLimitSigningKey:g,getKeysInterceptor:m,callbackSupport:d}=requireWrappers$2(),l=requireJwksError(),a=requireSigningKeyNotFoundError();class o{constructor(v){this.options={rateLimit:!1,cache:!0,timeout:3e4,...v},this.options.getKeysInterceptor&&(this.getSigningKey=m(this,v)),this.options.rateLimit&&(this.getSigningKey=g(this,v)),this.options.cache&&(this.getSigningKey=p(this,v)),this.getSigningKey=d(this,v)}async getKeys(){e(`Fetching keys from '${this.options.jwksUri}'`);try{const v=await s({uri:this.options.jwksUri,headers:this.options.requestHeaders,agent:this.options.requestAgent,timeout:this.options.timeout,fetcher:this.options.fetcher});return e("Keys:",v.keys),v.keys}catch(v){const{errorMsg:_}=v;throw e("Failure:",_||v),_?new l(_):v}}async getSigningKeys(){const v=await this.getKeys();if(!v||!v.length)throw new l("The JWKS endpoint did not contain any keys");const _=await t(v);if(!_.length)throw new l("The JWKS endpoint did not contain any signing keys");return e("Signing Keys:",_),_}async getSigningKey(v){e(`Fetching signing key for '${v}'`);const _=await this.getSigningKeys(),y=v!=null;if(!y&&_.length>1)throw e("No KID specified and JWKS endpoint returned more than 1 key"),new a("No KID specified and JWKS endpoint returned more than 1 key");const w=_.find(T=>!y||T.kid===v);if(w)return w;throw e(`Unable to find a signing key that matches '${v}'`),new a(`Unable to find a signing key that matches '${v}'`)}}return JwksClient_1={JwksClient:o},JwksClient_1}var ArgumentError_1,hasRequiredArgumentError;function requireArgumentError(){if(hasRequiredArgumentError)return ArgumentError_1;hasRequiredArgumentError=1;function e(t){Error.call(this,t),Error.captureStackTrace(this,this.constructor),this.name="ArgumentError",this.message=t}return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,ArgumentError_1=e,ArgumentError_1}var errors,hasRequiredErrors;function requireErrors(){return hasRequiredErrors||(hasRequiredErrors=1,errors={ArgumentError:requireArgumentError(),JwksError:requireJwksError(),JwksRateLimitError:requireJwksRateLimitError(),SigningKeyNotFoundError:requireSigningKeyNotFoundError()}),errors}var hapi={exports:{}},config,hasRequiredConfig;function requireConfig(){return hasRequiredConfig||(hasRequiredConfig=1,config=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES256K","ES384","ES512","EdDSA"]),config}var hasRequiredHapi;function requireHapi(){return hasRequiredHapi||(hasRequiredHapi=1,(function(e){const{ArgumentError:t}=requireErrors(),{JwksClient:s}=requireJwksClient(),p=requireConfig(),g=(m,d)=>{if(m&&m.name==="SigningKeyNotFoundError"||m)return d(m,null,null)};e.exports.hapiJwt2KeyAsync=m=>{const d=e.exports.hapiJwt2Key(m);return function(l){return new Promise((a,o)=>{d(l,(v,_)=>{!_||v?o(v):a({key:_})})})}},e.exports.hapiJwt2Key=function(m){if(m==null)throw new t("An options object must be provided when initializing hapiJwt2Key");const d=new s(m),l=m.handleSigningKeyError||g;return function(o,h){if(!o||!o.header)return h(new Error("Cannot find a signing certificate if there is no header"),null,null);if(!p.includes(o.header.alg))return h(new Error("Unsupported algorithm "+o.header.alg+" supplied."),null,null);d.getSigningKey(o.header.kid).then(v=>h(null,v.publicKey||v.rsaPublicKey,v)).catch(v=>l(v,_=>h(_,null,null)))}}})(hapi)),hapi.exports}var express={},hasRequiredExpress;function requireExpress(){if(hasRequiredExpress)return express;hasRequiredExpress=1;const{ArgumentError:e}=requireErrors(),{JwksClient:t}=requireJwksClient(),s=requireConfig(),p=(g,m)=>{if(g&&g.name==="SigningKeyNotFoundError")return m(null);if(g)return m(g)};return express.expressJwtSecret=function(g){if(g==null)throw new e("An options object must be provided when initializing expressJwtSecret");const m=new t(g),d=g.handleSigningKeyError||p,l=async(a,o)=>{if(!o)return;const h=o.header;if(!(!h||!s.includes(h.alg)))try{const v=await m.getSigningKey(h.kid);return v.publicKey||v.rsaPublicKey}catch(v){return new Promise((_,y)=>{d(v,w=>{if(!w)return _();y(w)})})}};return function(o,h,v,_){if(arguments.length===4){l(o,{header:h}).then(y=>{setImmediate(_,null,y)}).catch(y=>{setImmediate(_,y)});return}return l(o,arguments[1])}},express}var koa={},hasRequiredKoa;function requireKoa(){if(hasRequiredKoa)return koa;hasRequiredKoa=1;const{ArgumentError:e}=requireErrors(),{JwksClient:t}=requireJwksClient(),s=requireConfig();return koa.koaJwtSecret=function(p={}){if(!p.jwksUri)throw new e("No JWKS provided. Please provide a jwksUri");const g=new t(p);return function({alg:d,kid:l}={}){return new Promise((a,o)=>{if(!s.includes(d))return o(new Error("Missing / invalid token algorithm"));g.getSigningKey(l).then(h=>{a(h.publicKey||h.rsaPublicKey)}).catch(h=>p.handleSigningKeyError?p.handleSigningKeyError(h).then(o):o(h))})}},koa}var passport={},hasRequiredPassport;function requirePassport(){if(hasRequiredPassport)return passport;hasRequiredPassport=1;const e=require$$0$3,{ArgumentError:t}=requireErrors(),{JwksClient:s}=requireJwksClient(),p=requireConfig(),g=(m,d)=>{if(m&&m.name==="SigningKeyNotFoundError")return d(null);if(m)return d(m)};return passport.passportJwtSecret=function(m){if(m==null)throw new t("An options object must be provided when initializing passportJwtSecret");if(!m.jwksUri)throw new t("No JWKS provided. Please provide a jwksUri");const d=new s(m),l=m.handleSigningKeyError||g;return function(o,h,v){let _;try{_={payload:e.decodeJwt(h),header:e.decodeProtectedHeader(h)}}catch{_=null}if(!_||!p.includes(_.header.alg))return v(null,null);d.getSigningKey(_.header.kid).then(y=>{v(null,y.publicKey||y.rsaPublicKey)}).catch(y=>{l(y,w=>v(w,null))})}},passport}var hasRequiredSrc$a;function requireSrc$a(){if(hasRequiredSrc$a)return src$a.exports;hasRequiredSrc$a=1;const{JwksClient:e}=requireJwksClient(),t=requireErrors(),{hapiJwt2Key:s,hapiJwt2KeyAsync:p}=requireHapi(),{expressJwtSecret:g}=requireExpress(),{koaJwtSecret:m}=requireKoa(),{passportJwtSecret:d}=requirePassport();return src$a.exports=l=>new e(l),src$a.exports.JwksClient=e,src$a.exports.ArgumentError=t.ArgumentError,src$a.exports.JwksError=t.JwksError,src$a.exports.JwksRateLimitError=t.JwksRateLimitError,src$a.exports.SigningKeyNotFoundError=t.SigningKeyNotFoundError,src$a.exports.expressJwtSecret=g,src$a.exports.hapiJwt2Key=s,src$a.exports.hapiJwt2KeyAsync=p,src$a.exports.koaJwtSecret=m,src$a.exports.passportJwtSecret=d,src$a.exports}var hasRequiredJwt;function requireJwt(){return hasRequiredJwt||(hasRequiredJwt=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.JwtErrorCode=e.JwtError=e.EmulatorSignatureVerifier=e.PublicKeySignatureVerifier=e.UrlKeyFetcher=e.JwksFetcher=e.ALGORITHM_RS256=void 0,e.verifyJwtSignature=w,e.decodeJwt=T;const t=requireValidator$1(),s=requireJsonwebtoken(),p=requireSrc$a(),g=requireApiRequest();e.ALGORITHM_RS256="RS256";const m="error in secret or public key callback: ",d="no-matching-kid-error",l="no-kid-in-header-error",a=3600;class o{constructor(C,x){if(this.publicKeysExpireAt=0,!t.isURL(C))throw new Error("The provided JWKS URL is not a valid URL.");this.client=p({jwksUri:C,cache:!1,requestAgent:x})}fetchPublicKeys(){return this.shouldRefresh()?this.refresh():Promise.resolve(this.publicKeys)}shouldRefresh(){return!this.publicKeys||this.publicKeysExpireAt<=Date.now()}refresh(){return this.client.getSigningKeys().then(C=>{this.publicKeysExpireAt=0;const x=C.reduce((j,D)=>(j[D.kid]=D.getPublicKey(),j),{});return this.publicKeysExpireAt=Date.now()+a*6*1e3,this.publicKeys=x,x}).catch(C=>{throw new Error(`Error fetching Json Web Keys: ${C.message}`)})}}e.JwksFetcher=o;class h{constructor(C,x){if(this.clientCertUrl=C,this.httpAgent=x,this.publicKeysExpireAt=0,!t.isURL(C))throw new Error("The provided public client certificate URL is not a valid URL.")}fetchPublicKeys(){return this.shouldRefresh()?this.refresh():Promise.resolve(this.publicKeys)}shouldRefresh(){return!this.publicKeys||this.publicKeysExpireAt<=Date.now()}refresh(){const C=new g.HttpClient,x={method:"GET",url:this.clientCertUrl,httpAgent:this.httpAgent};return C.send(x).then(j=>{if(!j.isJson()||j.data.error)throw new g.RequestResponseError(j);return this.publicKeysExpireAt=0,Object.prototype.hasOwnProperty.call(j.headers,"cache-control")&&j.headers["cache-control"].split(",").forEach(q=>{const G=q.trim().split("=");if(G[0]==="max-age"){const $=+G[1];this.publicKeysExpireAt=Date.now()+$*1e3}}),this.publicKeys=j.data,j.data}).catch(j=>{if(j instanceof g.RequestResponseError){let D="Error fetching public keys for Google certs: ";const k=j.response;throw k.isJson()&&k.data.error?(D+=`${k.data.error}`,k.data.error_description&&(D+=" ("+k.data.error_description+")")):D+=`${k.text}`,new Error(D)}throw j})}}e.UrlKeyFetcher=h;class v{constructor(C){if(this.keyFetcher=C,!t.isNonNullObject(C))throw new Error("The provided key fetcher is not an object or null.")}static withCertificateUrl(C,x){return new v(new h(C,x))}static withJwksUrl(C,x){return new v(new o(C,x))}verify(C){return t.isString(C)?w(C,y(this.keyFetcher),{algorithms:[e.ALGORITHM_RS256]}).catch(x=>{if(x.code===O.NO_KID_IN_HEADER)return this.verifyWithoutKid(C);throw x}):Promise.reject(new I(O.INVALID_ARGUMENT,"The provided token must be a string."))}verifyWithoutKid(C){return this.keyFetcher.fetchPublicKeys().then(x=>this.verifyWithAllKeys(C,x))}verifyWithAllKeys(C,x){const j=[];return Object.values(x).forEach(D=>{const k=w(C,D).then(()=>!0).catch(q=>{if(q.code===O.TOKEN_EXPIRED)throw q;return!1});j.push(k)}),Promise.all(j).then(D=>{if(D.every(k=>k===!1))throw new I(O.INVALID_SIGNATURE,"Invalid token signature.")})}}e.PublicKeySignatureVerifier=v;class _{verify(C){return w(C,void 0,{algorithms:["none"]})}}e.EmulatorSignatureVerifier=_;function y(E){return(C,x)=>{C.kid||x(new Error(l));const j=C.kid||"";E.fetchPublicKeys().then(D=>{Object.prototype.hasOwnProperty.call(D,j)?x(null,D[j]):x(new Error(d))}).catch(D=>{x(D)})}}function w(E,C,x){return t.isString(E)?new Promise((j,D)=>{s.verify(E,C,x,k=>{if(!k)return j();if(k.name==="TokenExpiredError")return D(new I(O.TOKEN_EXPIRED,"The provided token has expired. Get a fresh token from your client app and try again."));if(k.name==="JsonWebTokenError"&&k.message&&k.message.includes(m)){const q=k.message.split(m).pop()||"Error fetching public keys.";let G=O.KEY_FETCH_ERROR;return q===d?G=O.NO_MATCHING_KID:q===l&&(G=O.NO_KID_IN_HEADER),D(new I(G,q))}return D(new I(O.INVALID_SIGNATURE,k.message))})}):Promise.reject(new I(O.INVALID_ARGUMENT,"The provided token must be a string."))}function T(E){if(!t.isString(E))return Promise.reject(new I(O.INVALID_ARGUMENT,"The provided token must be a string."));const C=s.decode(E,{complete:!0});if(!C)return Promise.reject(new I(O.INVALID_ARGUMENT,"Decoding token failed."));const x=C?.header,j=C?.payload;return Promise.resolve({header:x,payload:j})}class I extends Error{constructor(C,x){super(x),this.code=C,this.message=x,this.__proto__=I.prototype}}e.JwtError=I;var O;(function(E){E.INVALID_ARGUMENT="invalid-argument",E.INVALID_CREDENTIAL="invalid-credential",E.TOKEN_EXPIRED="token-expired",E.INVALID_SIGNATURE="invalid-token",E.NO_MATCHING_KID="no-matching-kid-error",E.NO_KID_IN_HEADER="no-kid-error",E.KEY_FETCH_ERROR="key-fetch-error"})(O||(e.JwtErrorCode=O={}))})(jwt)),jwt}var hasRequiredTokenVerifier$1;function requireTokenVerifier$1(){return hasRequiredTokenVerifier$1||(hasRequiredTokenVerifier$1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FirebaseTokenVerifier=e.SESSION_COOKIE_INFO=e.AUTH_BLOCKING_TOKEN_INFO=e.ID_TOKEN_INFO=void 0,e.createIdTokenVerifier=h,e.createAuthBlockingTokenVerifier=v,e.createSessionCookieVerifier=_;const t=requireError(),s=requireUtils$2(),p=requireValidator$1(),g=requireJwt(),m="https://identitytoolkit.googleapis.com/google.identity.identitytoolkit.v1.IdentityToolkit",d="https://www.googleapis.com/robot/v1/metadata/x509/securetoken@system.gserviceaccount.com",l="https://www.googleapis.com/identitytoolkit/v3/relyingparty/publicKeys",a=new g.EmulatorSignatureVerifier;e.ID_TOKEN_INFO={url:"https://firebase.google.com/docs/auth/admin/verify-id-tokens",verifyApiName:"verifyIdToken()",jwtName:"Firebase ID token",shortName:"ID token",expiredErrorCode:t.AuthClientErrorCode.ID_TOKEN_EXPIRED},e.AUTH_BLOCKING_TOKEN_INFO={url:"https://cloud.google.com/identity-platform/docs/blocking-functions",verifyApiName:"_verifyAuthBlockingToken()",jwtName:"Firebase Auth Blocking token",shortName:"Auth Blocking token",expiredErrorCode:t.AuthClientErrorCode.AUTH_BLOCKING_TOKEN_EXPIRED},e.SESSION_COOKIE_INFO={url:"https://firebase.google.com/docs/auth/admin/manage-cookies",verifyApiName:"verifySessionCookie()",jwtName:"Firebase session cookie",shortName:"session cookie",expiredErrorCode:t.AuthClientErrorCode.SESSION_COOKIE_EXPIRED};class o{constructor(w,T,I,O){if(this.issuer=T,this.tokenInfo=I,this.app=O,p.isURL(w))if(p.isURL(T))if(p.isNonNullObject(I))if(p.isURL(I.url))if(p.isNonEmptyString(I.verifyApiName))if(p.isNonEmptyString(I.jwtName))if(p.isNonEmptyString(I.shortName)){if(!p.isNonNullObject(I.expiredErrorCode)||!("code"in I.expiredErrorCode))throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,"The JWT expiration error code must be a non-null ErrorInfo object.")}else throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,"The JWT public short name must be a non-empty string.");else throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,"The JWT public full name must be a non-empty string.");else throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,"The JWT verify API name must be a non-empty string.");else throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,"The provided JWT verification documentation URL is invalid.");else throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,"The provided JWT information is not an object or null.");else throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,"The provided JWT issuer is an invalid URL.");else throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,"The provided public client certificate URL is an invalid URL.");this.shortNameArticle=I.shortName.charAt(0).match(/[aeiou]/i)?"an":"a",this.signatureVerifier=g.PublicKeySignatureVerifier.withCertificateUrl(w,O.options.httpAgent)}verifyJWT(w,T=!1){if(!p.isString(w))throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,`First argument to ${this.tokenInfo.verifyApiName} must be a ${this.tokenInfo.jwtName} string.`);return this.ensureProjectId().then(I=>this.decodeAndVerify(w,I,T)).then(I=>{const O=I.payload;return O.uid=O.sub,O})}_verifyAuthBlockingToken(w,T,I){if(!p.isString(w))throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,`First argument to ${this.tokenInfo.verifyApiName} must be a ${this.tokenInfo.jwtName} string.`);return this.ensureProjectId().then(O=>(typeof I>"u"&&(I=`${O}.cloudfunctions.net/`),this.decodeAndVerify(w,O,T,I))).then(O=>{const E=O.payload;return E.uid=E.sub,E})}ensureProjectId(){return s.findProjectId(this.app).then(w=>{if(!p.isNonEmptyString(w))throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_CREDENTIAL,`Must initialize app with a cert credential or set your Firebase project ID as the GOOGLE_CLOUD_PROJECT environment variable to call ${this.tokenInfo.verifyApiName}.`);return Promise.resolve(w)})}decodeAndVerify(w,T,I,O){return this.safeDecode(w).then(E=>(this.verifyContent(E,T,I,O),this.verifySignature(w,I).then(()=>E)))}safeDecode(w){return(0,g.decodeJwt)(w).catch(T=>{if(T.code===g.JwtErrorCode.INVALID_ARGUMENT){const I=` See ${this.tokenInfo.url} for details on how to retrieve ${this.shortNameArticle} ${this.tokenInfo.shortName}.`,O=`Decoding ${this.tokenInfo.jwtName} failed. Make sure you passed the entire string JWT which represents ${this.shortNameArticle} ${this.tokenInfo.shortName}.`+I;throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,O)}throw new t.FirebaseAuthError(t.AuthClientErrorCode.INTERNAL_ERROR,T.message)})}verifyContent(w,T,I,O){const E=w&&w.header,C=w&&w.payload,x=` Make sure the ${this.tokenInfo.shortName} comes from the same Firebase project as the service account used to authenticate this SDK.`,j=` See ${this.tokenInfo.url} for details on how to retrieve ${this.shortNameArticle} ${this.tokenInfo.shortName}.`;let D;if(!I&&typeof E.kid>"u"){const k=C.aud===m,q=E.alg==="HS256"&&C.v===0&&"d"in C&&"uid"in C.d;k?D=`${this.tokenInfo.verifyApiName} expects ${this.shortNameArticle} ${this.tokenInfo.shortName}, but was given a custom token.`:q?D=`${this.tokenInfo.verifyApiName} expects ${this.shortNameArticle} ${this.tokenInfo.shortName}, but was given a legacy custom token.`:D=`${this.tokenInfo.jwtName} has no "kid" claim.`,D+=j}else!I&&E.alg!==g.ALGORITHM_RS256?D=`${this.tokenInfo.jwtName} has incorrect algorithm. Expected "`+g.ALGORITHM_RS256+'" but got "'+E.alg+'".'+j:typeof O<"u"&&!C.aud.includes(O)?D=`${this.tokenInfo.jwtName} has incorrect "aud" (audience) claim. Expected "`+O+'" but got "'+C.aud+'".'+j:typeof O>"u"&&C.aud!==T?D=`${this.tokenInfo.jwtName} has incorrect "aud" (audience) claim. Expected "`+T+'" but got "'+C.aud+'".'+x+j:C.iss!==this.issuer+T?D=`${this.tokenInfo.jwtName} has incorrect "iss" (issuer) claim. Expected "${this.issuer}`+T+'" but got "'+C.iss+'".'+x+j:C.event_type!==void 0&&(C.event_type==="beforeSendSms"||C.event_type==="beforeSendEmail")||(typeof C.sub!="string"?D=`${this.tokenInfo.jwtName} has no "sub" (subject) claim.`+j:C.sub===""?D=`${this.tokenInfo.jwtName} has an empty "sub" (subject) claim.`+j:C.sub.length>128&&(D=`${this.tokenInfo.jwtName} has a "sub" (subject) claim longer than 128 characters.`+j));if(D)throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,D)}verifySignature(w,T){return(T?a:this.signatureVerifier).verify(w).catch(O=>{throw this.mapJwtErrorToAuthError(O)})}mapJwtErrorToAuthError(w){const T=` See ${this.tokenInfo.url} for details on how to retrieve ${this.shortNameArticle} ${this.tokenInfo.shortName}.`;if(w.code===g.JwtErrorCode.TOKEN_EXPIRED){const I=`${this.tokenInfo.jwtName} has expired. Get a fresh ${this.tokenInfo.shortName} from your client app and try again (auth/${this.tokenInfo.expiredErrorCode.code}).`+T;return new t.FirebaseAuthError(this.tokenInfo.expiredErrorCode,I)}else if(w.code===g.JwtErrorCode.INVALID_SIGNATURE){const I=`${this.tokenInfo.jwtName} has invalid signature.`+T;return new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,I)}else if(w.code===g.JwtErrorCode.NO_MATCHING_KID){const I=`${this.tokenInfo.jwtName} has "kid" claim which does not correspond to a known public key. Most likely the ${this.tokenInfo.shortName} is expired, so get a fresh token from your client app and try again.`;return new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,I)}return new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,w.message)}}e.FirebaseTokenVerifier=o;function h(y){return new o(d,"https://securetoken.google.com/",e.ID_TOKEN_INFO,y)}function v(y){return new o(d,"https://securetoken.google.com/",e.AUTH_BLOCKING_TOKEN_INFO,y)}function _(y){return new o(l,"https://session.firebase.google.com/",e.SESSION_COOKIE_INFO,y)}})(tokenVerifier$1)),tokenVerifier$1}var userRecord={};var hasRequiredUserRecord;function requireUserRecord(){if(hasRequiredUserRecord)return userRecord;hasRequiredUserRecord=1;Object.defineProperty(userRecord,"__esModule",{value:!0}),userRecord.UserRecord=userRecord.UserInfo=userRecord.UserMetadata=userRecord.MultiFactorSettings=userRecord.TotpMultiFactorInfo=userRecord.TotpInfo=userRecord.PhoneMultiFactorInfo=userRecord.MultiFactorInfo=void 0;const e=requireDeepCopy(),t=requireValidator$1(),s=requireUtils$2(),p=requireError(),g=Buffer.from("REDACTED").toString("base64");function m(T){try{const I=new Date(parseInt(T,10));if(!isNaN(I.getTime()))return I.toUTCString()}catch{}return null}var d;(function(T){T.Phone="phone",T.Totp="totp"})(d||(d={}));class l{static initMultiFactorInfo(I){let O=null;try{I.phoneInfo!==void 0?O=new a(I):I.totpInfo!==void 0&&(O=new h(I))}catch{}return O}constructor(I){this.initFromServerResponse(I)}toJSON(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}}initFromServerResponse(I){const O=I&&this.getFactorId(I);if(!O||!I||!I.mfaEnrollmentId)throw new p.FirebaseAuthError(p.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid multi-factor info response");s.addReadonlyGetter(this,"uid",I.mfaEnrollmentId),s.addReadonlyGetter(this,"factorId",O),s.addReadonlyGetter(this,"displayName",I.displayName),I.enrolledAt?s.addReadonlyGetter(this,"enrollmentTime",new Date(I.enrolledAt).toUTCString()):s.addReadonlyGetter(this,"enrollmentTime",null)}}userRecord.MultiFactorInfo=l;class a extends l{constructor(I){super(I),s.addReadonlyGetter(this,"phoneNumber",I.phoneInfo)}toJSON(){return Object.assign(super.toJSON(),{phoneNumber:this.phoneNumber})}getFactorId(I){return I&&I.phoneInfo?d.Phone:null}}userRecord.PhoneMultiFactorInfo=a;class o{}userRecord.TotpInfo=o;class h extends l{constructor(I){super(I),s.addReadonlyGetter(this,"totpInfo",I.totpInfo)}toJSON(){return Object.assign(super.toJSON(),{totpInfo:this.totpInfo})}getFactorId(I){return I&&I.totpInfo?d.Totp:null}}userRecord.TotpMultiFactorInfo=h;class v{constructor(I){const O=[];if((0,t.isNonNullObject)(I))I.mfaInfo&&I.mfaInfo.forEach(E=>{const C=l.initMultiFactorInfo(E);C&&O.push(C)});else throw new p.FirebaseAuthError(p.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid multi-factor response");s.addReadonlyGetter(this,"enrolledFactors",Object.freeze(O))}toJSON(){return{enrolledFactors:this.enrolledFactors.map(I=>I.toJSON())}}}userRecord.MultiFactorSettings=v;class _{constructor(I){s.addReadonlyGetter(this,"creationTime",m(I.createdAt)),s.addReadonlyGetter(this,"lastSignInTime",m(I.lastLoginAt));const O=I.lastRefreshAt?new Date(I.lastRefreshAt).toUTCString():null;s.addReadonlyGetter(this,"lastRefreshTime",O)}toJSON(){return{lastSignInTime:this.lastSignInTime,creationTime:this.creationTime,lastRefreshTime:this.lastRefreshTime}}}userRecord.UserMetadata=_;class y{constructor(I){if(!I.rawId||!I.providerId)throw new p.FirebaseAuthError(p.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid user info response");s.addReadonlyGetter(this,"uid",I.rawId),s.addReadonlyGetter(this,"displayName",I.displayName),s.addReadonlyGetter(this,"email",I.email),s.addReadonlyGetter(this,"photoURL",I.photoUrl),s.addReadonlyGetter(this,"providerId",I.providerId),s.addReadonlyGetter(this,"phoneNumber",I.phoneNumber)}toJSON(){return{uid:this.uid,displayName:this.displayName,email:this.email,photoURL:this.photoURL,providerId:this.providerId,phoneNumber:this.phoneNumber}}}userRecord.UserInfo=y;class w{constructor(I){if(!I.localId)throw new p.FirebaseAuthError(p.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid user response");s.addReadonlyGetter(this,"uid",I.localId),s.addReadonlyGetter(this,"email",I.email),s.addReadonlyGetter(this,"emailVerified",!!I.emailVerified),s.addReadonlyGetter(this,"displayName",I.displayName),s.addReadonlyGetter(this,"photoURL",I.photoUrl),s.addReadonlyGetter(this,"phoneNumber",I.phoneNumber),s.addReadonlyGetter(this,"disabled",I.disabled||!1),s.addReadonlyGetter(this,"metadata",new _(I));const O=[];for(const x of I.providerUserInfo||[])O.push(new y(x));s.addReadonlyGetter(this,"providerData",O),I.passwordHash===g?s.addReadonlyGetter(this,"passwordHash",void 0):s.addReadonlyGetter(this,"passwordHash",I.passwordHash),s.addReadonlyGetter(this,"passwordSalt",I.salt),I.customAttributes&&s.addReadonlyGetter(this,"customClaims",JSON.parse(I.customAttributes));let E=null;typeof I.validSince<"u"&&(E=m(parseInt(I.validSince,10)*1e3)),s.addReadonlyGetter(this,"tokensValidAfterTime",E||void 0),s.addReadonlyGetter(this,"tenantId",I.tenantId);const C=new v(I);C.enrolledFactors.length>0&&s.addReadonlyGetter(this,"multiFactor",C)}toJSON(){const I={uid:this.uid,email:this.email,emailVerified:this.emailVerified,displayName:this.displayName,photoURL:this.photoURL,phoneNumber:this.phoneNumber,disabled:this.disabled,metadata:this.metadata.toJSON(),passwordHash:this.passwordHash,passwordSalt:this.passwordSalt,customClaims:(0,e.deepCopy)(this.customClaims),tokensValidAfterTime:this.tokensValidAfterTime,tenantId:this.tenantId};this.multiFactor&&(I.multiFactor=this.multiFactor.toJSON()),I.providerData=[];for(const O of this.providerData)I.providerData.push(O.toJSON());return I}}return userRecord.UserRecord=w,userRecord}var hasRequiredBaseAuth;function requireBaseAuth(){if(hasRequiredBaseAuth)return baseAuth;hasRequiredBaseAuth=1;Object.defineProperty(baseAuth,"__esModule",{value:!0}),baseAuth.BaseAuth=void 0,baseAuth.createFirebaseTokenGenerator=h;const e=requireError(),t=requireDeepCopy(),s=requireValidator$1(),p=requireAuthApiRequest(),g=requireTokenGenerator$1(),m=requireTokenVerifier$1(),d=requireAuthConfig(),l=requireUserRecord(),a=requireIdentifier(),o=requireCryptoSigner();function h(_,y){try{const w=(0,p.useEmulator)()?new g.EmulatedSigner:(0,o.cryptoSignerFromApp)(_);return new g.FirebaseTokenGenerator(w,y)}catch(w){throw(0,g.handleCryptoSignerError)(w)}}class v{constructor(y,w,T){this.authRequestHandler=w,T?this.tokenGenerator=T:this.tokenGenerator=h(y),this.sessionCookieVerifier=(0,m.createSessionCookieVerifier)(y),this.idTokenVerifier=(0,m.createIdTokenVerifier)(y),this.authBlockingTokenVerifier=(0,m.createAuthBlockingTokenVerifier)(y)}createCustomToken(y,w){return this.tokenGenerator.createCustomToken(y,w)}verifyIdToken(y,w=!1){const T=(0,p.useEmulator)();return this.idTokenVerifier.verifyJWT(y,T).then(I=>w||T?this.verifyDecodedJWTNotRevokedOrDisabled(I,e.AuthClientErrorCode.ID_TOKEN_REVOKED):I)}getUser(y){return this.authRequestHandler.getAccountInfoByUid(y).then(w=>new l.UserRecord(w.users[0]))}getUserByEmail(y){return this.authRequestHandler.getAccountInfoByEmail(y).then(w=>new l.UserRecord(w.users[0]))}getUserByPhoneNumber(y){return this.authRequestHandler.getAccountInfoByPhoneNumber(y).then(w=>new l.UserRecord(w.users[0]))}getUserByProviderUid(y,w){return y==="phone"?this.getUserByPhoneNumber(w):y==="email"?this.getUserByEmail(w):this.authRequestHandler.getAccountInfoByFederatedUid(y,w).then(T=>new l.UserRecord(T.users[0]))}getUsers(y){if(!s.isArray(y))throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,"`identifiers` parameter must be an array");return this.authRequestHandler.getAccountInfoByIdentifiers(y).then(w=>{const T=((E,C)=>!!C.find(x=>{if((0,a.isUidIdentifier)(E))return E.uid===x.uid;if((0,a.isEmailIdentifier)(E))return E.email===x.email;if((0,a.isPhoneIdentifier)(E))return E.phoneNumber===x.phoneNumber;if((0,a.isProviderIdentifier)(E)){const j=x.providerData.find(D=>E.providerId===D.providerId);return!!j&&E.providerUid===j.uid}else throw new e.FirebaseAuthError(e.AuthClientErrorCode.INTERNAL_ERROR,"Unhandled identifier type")})),I=w.users?w.users.map(E=>new l.UserRecord(E)):[],O=y.filter(E=>!T(E,I));return{users:I,notFound:O}})}listUsers(y,w){return this.authRequestHandler.downloadAccount(y,w).then(T=>{const I=[];T.users.forEach(E=>{I.push(new l.UserRecord(E))});const O={users:I,pageToken:T.nextPageToken};return typeof O.pageToken>"u"&&delete O.pageToken,O})}createUser(y){return this.authRequestHandler.createNewAccount(y).then(w=>this.getUser(w)).catch(w=>{throw w.code==="auth/user-not-found"?new e.FirebaseAuthError(e.AuthClientErrorCode.INTERNAL_ERROR,"Unable to create the user record provided."):w})}deleteUser(y){return this.authRequestHandler.deleteAccount(y).then(()=>{})}deleteUsers(y){if(!s.isArray(y))throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,"`uids` parameter must be an array");return this.authRequestHandler.deleteAccounts(y,!0).then(w=>{const T={failureCount:0,successCount:y.length,errors:[]};return s.isNonEmptyArray(w.errors)&&(T.failureCount=w.errors.length,T.successCount=y.length-w.errors.length,T.errors=w.errors.map(I=>{if(I.index===void 0)throw new e.FirebaseAuthError(e.AuthClientErrorCode.INTERNAL_ERROR,"Corrupt BatchDeleteAccountsResponse detected");const O=E=>{const C=E&&E.startsWith("NOT_DISABLED")?e.AuthClientErrorCode.USER_NOT_DISABLED:e.AuthClientErrorCode.INTERNAL_ERROR;return new e.FirebaseAuthError(C,I.message)};return{index:I.index,error:O(I.message)}})),T})}updateUser(y,w){if(w=(0,t.deepCopy)(w),w?.providerToLink){if(w.providerToLink.providerId==="email"){if(typeof w.email<"u")throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,"Both UpdateRequest.email and UpdateRequest.providerToLink.providerId='email' were set. To link to the email/password provider, only specify the UpdateRequest.email field.");w.email=w.providerToLink.uid,delete w.providerToLink}else if(w.providerToLink.providerId==="phone"){if(typeof w.phoneNumber<"u")throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,"Both UpdateRequest.phoneNumber and UpdateRequest.providerToLink.providerId='phone' were set. To link to a phone provider, only specify the UpdateRequest.phoneNumber field.");w.phoneNumber=w.providerToLink.uid,delete w.providerToLink}}if(w?.providersToUnlink&&w.providersToUnlink.indexOf("phone")!==-1&&w.phoneNumber===null)throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,"Both UpdateRequest.phoneNumber=null and UpdateRequest.providersToUnlink=['phone'] were set. To unlink from a phone provider, only specify the UpdateRequest.phoneNumber=null field.");return this.authRequestHandler.updateExistingAccount(y,w).then(T=>this.getUser(T))}setCustomUserClaims(y,w){return this.authRequestHandler.setCustomUserClaims(y,w).then(()=>{})}revokeRefreshTokens(y){return this.authRequestHandler.revokeRefreshTokens(y).then(()=>{})}importUsers(y,w){return this.authRequestHandler.uploadAccount(y,w)}createSessionCookie(y,w){return!s.isNonNullObject(w)||!s.isNumber(w.expiresIn)?Promise.reject(new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_SESSION_COOKIE_DURATION)):this.authRequestHandler.createSessionCookie(y,w.expiresIn)}verifySessionCookie(y,w=!1){const T=(0,p.useEmulator)();return this.sessionCookieVerifier.verifyJWT(y,T).then(I=>w||T?this.verifyDecodedJWTNotRevokedOrDisabled(I,e.AuthClientErrorCode.SESSION_COOKIE_REVOKED):I)}generatePasswordResetLink(y,w){return this.authRequestHandler.getEmailActionLink("PASSWORD_RESET",y,w)}generateEmailVerificationLink(y,w){return this.authRequestHandler.getEmailActionLink("VERIFY_EMAIL",y,w)}generateVerifyAndChangeEmailLink(y,w,T){return this.authRequestHandler.getEmailActionLink("VERIFY_AND_CHANGE_EMAIL",y,T,w)}generateSignInWithEmailLink(y,w){return this.authRequestHandler.getEmailActionLink("EMAIL_SIGNIN",y,w)}listProviderConfigs(y){const w=(T,I)=>{const O={providerConfigs:I};return Object.prototype.hasOwnProperty.call(T,"nextPageToken")&&(O.pageToken=T.nextPageToken),O};return y&&y.type==="oidc"?this.authRequestHandler.listOAuthIdpConfigs(y.maxResults,y.pageToken).then(T=>{const I=[];return T.oauthIdpConfigs.forEach(O=>{I.push(new d.OIDCConfig(O))}),w(T,I)}):y&&y.type==="saml"?this.authRequestHandler.listInboundSamlConfigs(y.maxResults,y.pageToken).then(T=>{const I=[];return T.inboundSamlConfigs.forEach(O=>{I.push(new d.SAMLConfig(O))}),w(T,I)}):Promise.reject(new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,'"AuthProviderConfigFilter.type" must be either "saml" or "oidc"'))}getProviderConfig(y){return d.OIDCConfig.isProviderId(y)?this.authRequestHandler.getOAuthIdpConfig(y).then(w=>new d.OIDCConfig(w)):d.SAMLConfig.isProviderId(y)?this.authRequestHandler.getInboundSamlConfig(y).then(w=>new d.SAMLConfig(w)):Promise.reject(new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_PROVIDER_ID))}deleteProviderConfig(y){return d.OIDCConfig.isProviderId(y)?this.authRequestHandler.deleteOAuthIdpConfig(y):d.SAMLConfig.isProviderId(y)?this.authRequestHandler.deleteInboundSamlConfig(y):Promise.reject(new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_PROVIDER_ID))}updateProviderConfig(y,w){return s.isNonNullObject(w)?d.OIDCConfig.isProviderId(y)?this.authRequestHandler.updateOAuthIdpConfig(y,w).then(T=>new d.OIDCConfig(T)):d.SAMLConfig.isProviderId(y)?this.authRequestHandler.updateInboundSamlConfig(y,w).then(T=>new d.SAMLConfig(T)):Promise.reject(new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_PROVIDER_ID)):Promise.reject(new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_CONFIG,'Request is missing "UpdateAuthProviderRequest" configuration.'))}createProviderConfig(y){return s.isNonNullObject(y)?d.OIDCConfig.isProviderId(y.providerId)?this.authRequestHandler.createOAuthIdpConfig(y).then(w=>new d.OIDCConfig(w)):d.SAMLConfig.isProviderId(y.providerId)?this.authRequestHandler.createInboundSamlConfig(y).then(w=>new d.SAMLConfig(w)):Promise.reject(new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_PROVIDER_ID)):Promise.reject(new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_CONFIG,'Request is missing "AuthProviderConfig" configuration.'))}_verifyAuthBlockingToken(y,w){const T=(0,p.useEmulator)();return this.authBlockingTokenVerifier._verifyAuthBlockingToken(y,T,w).then(I=>I)}verifyDecodedJWTNotRevokedOrDisabled(y,w){return this.getUser(y.sub).then(T=>{if(T.disabled)throw new e.FirebaseAuthError(e.AuthClientErrorCode.USER_DISABLED,"The user record is disabled.");if(T.tokensValidAfterTime){const I=y.auth_time*1e3,O=new Date(T.tokensValidAfterTime).getTime();if(I<O)throw new e.FirebaseAuthError(w)}return y})}}return baseAuth.BaseAuth=v,baseAuth}var hasRequiredTenantManager;function requireTenantManager(){if(hasRequiredTenantManager)return tenantManager;hasRequiredTenantManager=1;Object.defineProperty(tenantManager,"__esModule",{value:!0}),tenantManager.TenantManager=tenantManager.TenantAwareAuth=void 0;const e=requireValidator$1(),t=requireUtils$2(),s=requireError(),p=requireBaseAuth(),g=requireTenant(),m=requireAuthApiRequest();class d extends p.BaseAuth{constructor(o,h){super(o,new m.TenantAwareAuthRequestHandler(o,h),(0,p.createFirebaseTokenGenerator)(o,h)),t.addReadonlyGetter(this,"tenantId",h)}verifyIdToken(o,h=!1){return super.verifyIdToken(o,h).then(v=>{if(v.firebase.tenant!==this.tenantId)throw new s.FirebaseAuthError(s.AuthClientErrorCode.MISMATCHING_TENANT_ID);return v})}createSessionCookie(o,h){return e.isNonEmptyString(o)?!e.isNonNullObject(h)||!e.isNumber(h.expiresIn)?Promise.reject(new s.FirebaseAuthError(s.AuthClientErrorCode.INVALID_SESSION_COOKIE_DURATION)):this.verifyIdToken(o).then(()=>super.createSessionCookie(o,h)):Promise.reject(new s.FirebaseAuthError(s.AuthClientErrorCode.INVALID_ID_TOKEN))}verifySessionCookie(o,h=!1){return super.verifySessionCookie(o,h).then(v=>{if(v.firebase.tenant!==this.tenantId)throw new s.FirebaseAuthError(s.AuthClientErrorCode.MISMATCHING_TENANT_ID);return v})}}tenantManager.TenantAwareAuth=d;class l{constructor(o){this.app=o,this.authRequestHandler=new m.AuthRequestHandler(o),this.tenantsMap={}}authForTenant(o){if(!e.isNonEmptyString(o))throw new s.FirebaseAuthError(s.AuthClientErrorCode.INVALID_TENANT_ID);return typeof this.tenantsMap[o]>"u"&&(this.tenantsMap[o]=new d(this.app,o)),this.tenantsMap[o]}getTenant(o){return this.authRequestHandler.getTenant(o).then(h=>new g.Tenant(h))}listTenants(o,h){return this.authRequestHandler.listTenants(o,h).then(v=>{const _=[];v.tenants.forEach(w=>{_.push(new g.Tenant(w))});const y={tenants:_,pageToken:v.nextPageToken};return typeof y.pageToken>"u"&&delete y.pageToken,y})}deleteTenant(o){return this.authRequestHandler.deleteTenant(o)}createTenant(o){return this.authRequestHandler.createTenant(o).then(h=>new g.Tenant(h))}updateTenant(o,h){return this.authRequestHandler.updateTenant(o,h).then(v=>new g.Tenant(v))}}return tenantManager.TenantManager=l,tenantManager}var projectConfigManager={};var hasRequiredProjectConfigManager;function requireProjectConfigManager(){if(hasRequiredProjectConfigManager)return projectConfigManager;hasRequiredProjectConfigManager=1,Object.defineProperty(projectConfigManager,"__esModule",{value:!0}),projectConfigManager.ProjectConfigManager=void 0;const e=requireProjectConfig(),t=requireAuthApiRequest();class s{constructor(g){this.authRequestHandler=new t.AuthRequestHandler(g)}getProjectConfig(){return this.authRequestHandler.getProjectConfig().then(g=>new e.ProjectConfig(g))}updateProjectConfig(g){return this.authRequestHandler.updateProjectConfig(g).then(m=>new e.ProjectConfig(m))}}return projectConfigManager.ProjectConfigManager=s,projectConfigManager}var hasRequiredAuth$1;function requireAuth$1(){if(hasRequiredAuth$1)return auth$1;hasRequiredAuth$1=1;Object.defineProperty(auth$1,"__esModule",{value:!0}),auth$1.Auth=void 0;const e=requireAuthApiRequest(),t=requireTenantManager(),s=requireBaseAuth(),p=requireProjectConfigManager();class g extends s.BaseAuth{constructor(d){super(d,new e.AuthRequestHandler(d)),this.app_=d,this.tenantManager_=new t.TenantManager(d),this.projectConfigManager_=new p.ProjectConfigManager(d)}get app(){return this.app_}tenantManager(){return this.tenantManager_}projectConfigManager(){return this.projectConfigManager_}}return auth$1.Auth=g,auth$1}var index_standalone={},index_cjs$2={},postinstall={},hasRequiredPostinstall;function requirePostinstall(){return hasRequiredPostinstall||(hasRequiredPostinstall=1,Object.defineProperty(postinstall,"__esModule",{value:!0}),postinstall.getDefaultsFromPostinstall=()=>{}),postinstall}var hasRequiredIndex_cjs$2;function requireIndex_cjs$2(){if(hasRequiredIndex_cjs$2)return index_cjs$2;hasRequiredIndex_cjs$2=1;var e={},t={};Object.defineProperty(index_cjs$2,"__esModule",{value:!0});var s=requirePostinstall();const p={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const g=function(Pe,Ce){if(!Pe)throw m(Ce)},m=function(Pe){return new Error("Firebase Database ("+p.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Pe)};const d=function(Pe){const Ce=[];let Ne=0;for(let He=0;He<Pe.length;He++){let je=Pe.charCodeAt(He);je<128?Ce[Ne++]=je:je<2048?(Ce[Ne++]=je>>6|192,Ce[Ne++]=je&63|128):(je&64512)===55296&&He+1<Pe.length&&(Pe.charCodeAt(He+1)&64512)===56320?(je=65536+((je&1023)<<10)+(Pe.charCodeAt(++He)&1023),Ce[Ne++]=je>>18|240,Ce[Ne++]=je>>12&63|128,Ce[Ne++]=je>>6&63|128,Ce[Ne++]=je&63|128):(Ce[Ne++]=je>>12|224,Ce[Ne++]=je>>6&63|128,Ce[Ne++]=je&63|128)}return Ce},l=function(Pe){const Ce=[];let Ne=0,He=0;for(;Ne<Pe.length;){const je=Pe[Ne++];if(je<128)Ce[He++]=String.fromCharCode(je);else if(je>191&&je<224){const ot=Pe[Ne++];Ce[He++]=String.fromCharCode((je&31)<<6|ot&63)}else if(je>239&&je<365){const ot=Pe[Ne++],ct=Pe[Ne++],Ct=Pe[Ne++],Qt=((je&7)<<18|(ot&63)<<12|(ct&63)<<6|Ct&63)-65536;Ce[He++]=String.fromCharCode(55296+(Qt>>10)),Ce[He++]=String.fromCharCode(56320+(Qt&1023))}else{const ot=Pe[Ne++],ct=Pe[Ne++];Ce[He++]=String.fromCharCode((je&15)<<12|(ot&63)<<6|ct&63)}}return Ce.join("")},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(Pe,Ce){if(!Array.isArray(Pe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ne=Ce?this.byteToCharMapWebSafe_:this.byteToCharMap_,He=[];for(let je=0;je<Pe.length;je+=3){const ot=Pe[je],ct=je+1<Pe.length,Ct=ct?Pe[je+1]:0,Qt=je+2<Pe.length,Ht=Qt?Pe[je+2]:0,Dt=ot>>2,_t=(ot&3)<<4|Ct>>4;let pt=(Ct&15)<<2|Ht>>6,kt=Ht&63;Qt||(kt=64,ct||(pt=64)),He.push(Ne[Dt],Ne[_t],Ne[pt],Ne[kt])}return He.join("")},encodeString(Pe,Ce){return this.HAS_NATIVE_SUPPORT&&!Ce?btoa(Pe):this.encodeByteArray(d(Pe),Ce)},decodeString(Pe,Ce){return this.HAS_NATIVE_SUPPORT&&!Ce?atob(Pe):l(this.decodeStringToByteArray(Pe,Ce))},decodeStringToByteArray(Pe,Ce){this.init_();const Ne=Ce?this.charToByteMapWebSafe_:this.charToByteMap_,He=[];for(let je=0;je<Pe.length;){const ot=Ne[Pe.charAt(je++)],Ct=je<Pe.length?Ne[Pe.charAt(je)]:0;++je;const Ht=je<Pe.length?Ne[Pe.charAt(je)]:64;++je;const _t=je<Pe.length?Ne[Pe.charAt(je)]:64;if(++je,ot==null||Ct==null||Ht==null||_t==null)throw new o;const pt=ot<<2|Ct>>4;if(He.push(pt),Ht!==64){const kt=Ct<<4&240|Ht>>2;if(He.push(kt),_t!==64){const Gt=Ht<<6&192|_t;He.push(Gt)}}}return He},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Pe=0;Pe<this.ENCODED_VALS.length;Pe++)this.byteToCharMap_[Pe]=this.ENCODED_VALS.charAt(Pe),this.charToByteMap_[this.byteToCharMap_[Pe]]=Pe,this.byteToCharMapWebSafe_[Pe]=this.ENCODED_VALS_WEBSAFE.charAt(Pe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Pe]]=Pe,Pe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Pe)]=Pe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Pe)]=Pe)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h=function(Pe){const Ce=d(Pe);return a.encodeByteArray(Ce,!0)},v=function(Pe){return h(Pe).replace(/\./g,"")},_=function(Pe){try{return a.decodeString(Pe,!0)}catch(Ce){console.error("base64Decode failed: ",Ce)}return null};function y(Pe){return w(void 0,Pe)}function w(Pe,Ce){if(!(Ce instanceof Object))return Ce;switch(Ce.constructor){case Date:const Ne=Ce;return new Date(Ne.getTime());case Object:Pe===void 0&&(Pe={});break;case Array:Pe=[];break;default:return Ce}for(const Ne in Ce)!Ce.hasOwnProperty(Ne)||!T(Ne)||(Pe[Ne]=w(Pe[Ne],Ce[Ne]));return Pe}function T(Pe){return Pe!=="__proto__"}function I(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal<"u")return commonjsGlobal;throw new Error("Unable to locate global object.")}const O=()=>I().__FIREBASE_DEFAULTS__,E=()=>{if(typeof e>"u"||typeof t>"u")return;const Pe=t.__FIREBASE_DEFAULTS__;if(Pe)return JSON.parse(Pe)},C=()=>{if(typeof document>"u")return;let Pe;try{Pe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Ce=Pe&&_(Pe[1]);return Ce&&JSON.parse(Ce)},x=()=>{try{return s.getDefaultsFromPostinstall()||O()||E()||C()}catch(Pe){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Pe}`);return}},j=Pe=>x()?.emulatorHosts?.[Pe],D=Pe=>{const Ce=j(Pe);if(!Ce)return;const Ne=Ce.lastIndexOf(":");if(Ne<=0||Ne+1===Ce.length)throw new Error(`Invalid host ${Ce} with no separate hostname and port!`);const He=parseInt(Ce.substring(Ne+1),10);return Ce[0]==="["?[Ce.substring(1,Ne-1),He]:[Ce.substring(0,Ne),He]},k=()=>x()?.config,q=Pe=>x()?.[`_${Pe}`];class G{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ce,Ne)=>{this.resolve=Ce,this.reject=Ne})}wrapCallback(Ce){return(Ne,He)=>{Ne?this.reject(Ne):this.resolve(He),typeof Ce=="function"&&(this.promise.catch(()=>{}),Ce.length===1?Ce(Ne):Ce(Ne,He))}}}function $(Pe){try{return(Pe.startsWith("http://")||Pe.startsWith("https://")?new URL(Pe).hostname:Pe).endsWith(".cloudworkstations.dev")}catch{return!1}}async function W(Pe){return(await fetch(Pe,{credentials:"include"})).ok}function K(Pe,Ce){if(Pe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ne={alg:"none",type:"JWT"},He=Ce||"demo-project",je=Pe.iat||0,ot=Pe.sub||Pe.user_id;if(!ot)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ct={iss:`https://securetoken.google.com/${He}`,aud:He,iat:je,exp:je+3600,auth_time:je,sub:ot,user_id:ot,firebase:{sign_in_provider:"custom",identities:{}},...Pe};return[v(JSON.stringify(Ne)),v(JSON.stringify(ct)),""].join(".")}const z={};function Q(){const Pe={prod:[],emulator:[]};for(const Ce of Object.keys(z))z[Ce]?Pe.emulator.push(Ce):Pe.prod.push(Ce);return Pe}function Y(Pe){let Ce=document.getElementById(Pe),Ne=!1;return Ce||(Ce=document.createElement("div"),Ce.setAttribute("id",Pe),Ne=!0),{created:Ne,element:Ce}}let te=!1;function ae(Pe,Ce){if(typeof window>"u"||typeof document>"u"||!$(window.location.host)||z[Pe]===Ce||z[Pe]||te)return;z[Pe]=Ce;function Ne(pt){return`__firebase__banner__${pt}`}const He="__firebase__banner",ot=Q().prod.length>0;function ct(){const pt=document.getElementById(He);pt&&pt.remove()}function Ct(pt){pt.style.display="flex",pt.style.background="#7faaf0",pt.style.position="fixed",pt.style.bottom="5px",pt.style.left="5px",pt.style.padding=".5em",pt.style.borderRadius="5px",pt.style.alignItems="center"}function Qt(pt,kt){pt.setAttribute("width","24"),pt.setAttribute("id",kt),pt.setAttribute("height","24"),pt.setAttribute("viewBox","0 0 24 24"),pt.setAttribute("fill","none"),pt.style.marginLeft="-6px"}function Ht(){const pt=document.createElement("span");return pt.style.cursor="pointer",pt.style.marginLeft="16px",pt.style.fontSize="24px",pt.innerHTML=" &times;",pt.onclick=()=>{te=!0,ct()},pt}function Dt(pt,kt){pt.setAttribute("id",kt),pt.innerText="Learn more",pt.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",pt.setAttribute("target","__blank"),pt.style.paddingLeft="5px",pt.style.textDecoration="underline"}function _t(){const pt=Y(He),kt=Ne("text"),Gt=document.getElementById(kt)||document.createElement("span"),wr=Ne("learnmore"),rr=document.getElementById(wr)||document.createElement("a"),yr=Ne("preprendIcon"),Zt=document.getElementById(yr)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(pt.created){const Xt=pt.element;Ct(Xt),Dt(rr,wr);const Nr=Ht();Qt(Zt,yr),Xt.append(Zt,Gt,rr,Nr),document.body.appendChild(Xt)}ot?(Gt.innerText="Preview backend disconnected.",Zt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Zt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Gt.innerText="Preview backend running in this workspace."),Gt.setAttribute("id",kt)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_t):_t()}function ue(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ee(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ue())}function oe(){const Pe=x()?.forceEnvironment;if(Pe==="node")return!0;if(Pe==="browser")return!1;try{return Object.prototype.toString.call(commonjsGlobal.process)==="[object process]"}catch{return!1}}function de(){return typeof window<"u"||he()}function he(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ee(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fe(){const Pe=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof Pe=="object"&&Pe.id!==void 0}function Se(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function be(){return ue().indexOf("Electron/")>=0}function Oe(){const Pe=ue();return Pe.indexOf("MSIE ")>=0||Pe.indexOf("Trident/")>=0}function ge(){return ue().indexOf("MSAppHost/")>=0}function J(){return p.NODE_CLIENT===!0||p.NODE_ADMIN===!0}function c(){return!oe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N(){return!oe()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function A(){try{return typeof indexedDB=="object"}catch{return!1}}function V(){return new Promise((Pe,Ce)=>{try{let Ne=!0;const He="validate-browser-context-for-indexeddb-analytics-module",je=self.indexedDB.open(He);je.onsuccess=()=>{je.result.close(),Ne||self.indexedDB.deleteDatabase(He),Pe(!0)},je.onupgradeneeded=()=>{Ne=!1},je.onerror=()=>{Ce(je.error?.message||"")}}catch(Ne){Ce(Ne)}})}function ne(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ce="FirebaseError";class ie extends Error{constructor(Ce,Ne,He){super(Ne),this.code=Ce,this.customData=He,this.name=ce,Object.setPrototypeOf(this,ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,u.prototype.create)}}class u{constructor(Ce,Ne,He){this.service=Ce,this.serviceName=Ne,this.errors=He}create(Ce,...Ne){const He=Ne[0]||{},je=`${this.service}/${Ce}`,ot=this.errors[Ce],ct=ot?P(ot,He):"Error",Ct=`${this.serviceName}: ${ct} (${je}).`;return new ie(je,Ct,He)}}function P(Pe,Ce){return Pe.replace(M,(Ne,He)=>{const je=Ce[He];return je!=null?String(je):`<${He}?>`})}const M=/\{\$([^}]+)}/g;function n(Pe){return JSON.parse(Pe)}function L(Pe){return JSON.stringify(Pe)}const U=function(Pe){let Ce={},Ne={},He={},je="";try{const ot=Pe.split(".");Ce=n(_(ot[0])||""),Ne=n(_(ot[1])||""),je=ot[2],He=Ne.d||{},delete Ne.d}catch{}return{header:Ce,claims:Ne,data:He,signature:je}},X=function(Pe){const Ce=U(Pe).claims,Ne=Math.floor(new Date().getTime()/1e3);let He=0,je=0;return typeof Ce=="object"&&(Ce.hasOwnProperty("nbf")?He=Ce.nbf:Ce.hasOwnProperty("iat")&&(He=Ce.iat),Ce.hasOwnProperty("exp")?je=Ce.exp:je=He+86400),!!Ne&&!!He&&!!je&&Ne>=He&&Ne<=je},me=function(Pe){const Ce=U(Pe).claims;return typeof Ce=="object"&&Ce.hasOwnProperty("iat")?Ce.iat:null},Ie=function(Pe){const Ce=U(Pe),Ne=Ce.claims;return!!Ne&&typeof Ne=="object"&&Ne.hasOwnProperty("iat")},Le=function(Pe){const Ce=U(Pe).claims;return typeof Ce=="object"&&Ce.admin===!0};function ke(Pe,Ce){return Object.prototype.hasOwnProperty.call(Pe,Ce)}function ze(Pe,Ce){if(Object.prototype.hasOwnProperty.call(Pe,Ce))return Pe[Ce]}function nt(Pe){for(const Ce in Pe)if(Object.prototype.hasOwnProperty.call(Pe,Ce))return!1;return!0}function bt(Pe,Ce,Ne){const He={};for(const je in Pe)Object.prototype.hasOwnProperty.call(Pe,je)&&(He[je]=Ce.call(Ne,Pe[je],je,Pe));return He}function dt(Pe,Ce){if(Pe===Ce)return!0;const Ne=Object.keys(Pe),He=Object.keys(Ce);for(const je of Ne){if(!He.includes(je))return!1;const ot=Pe[je],ct=Ce[je];if(Et(ot)&&Et(ct)){if(!dt(ot,ct))return!1}else if(ot!==ct)return!1}for(const je of He)if(!Ne.includes(je))return!1;return!0}function Et(Pe){return Pe!==null&&typeof Pe=="object"}function lt(Pe,Ce=2e3){const Ne=new G;return setTimeout(()=>Ne.reject("timeout!"),Ce),Pe.then(Ne.resolve,Ne.reject),Ne.promise}function Be(Pe){const Ce=[];for(const[Ne,He]of Object.entries(Pe))Array.isArray(He)?He.forEach(je=>{Ce.push(encodeURIComponent(Ne)+"="+encodeURIComponent(je))}):Ce.push(encodeURIComponent(Ne)+"="+encodeURIComponent(He));return Ce.length?"&"+Ce.join("&"):""}function Me(Pe){const Ce={};return Pe.replace(/^\?/,"").split("&").forEach(He=>{if(He){const[je,ot]=He.split("=");Ce[decodeURIComponent(je)]=decodeURIComponent(ot)}}),Ce}function Ve(Pe){const Ce=Pe.indexOf("?");if(!Ce)return"";const Ne=Pe.indexOf("#",Ce);return Pe.substring(Ce,Ne>0?Ne:void 0)}class Je{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ce=1;Ce<this.blockSize;++Ce)this.pad_[Ce]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ce,Ne){Ne||(Ne=0);const He=this.W_;if(typeof Ce=="string")for(let _t=0;_t<16;_t++)He[_t]=Ce.charCodeAt(Ne)<<24|Ce.charCodeAt(Ne+1)<<16|Ce.charCodeAt(Ne+2)<<8|Ce.charCodeAt(Ne+3),Ne+=4;else for(let _t=0;_t<16;_t++)He[_t]=Ce[Ne]<<24|Ce[Ne+1]<<16|Ce[Ne+2]<<8|Ce[Ne+3],Ne+=4;for(let _t=16;_t<80;_t++){const pt=He[_t-3]^He[_t-8]^He[_t-14]^He[_t-16];He[_t]=(pt<<1|pt>>>31)&4294967295}let je=this.chain_[0],ot=this.chain_[1],ct=this.chain_[2],Ct=this.chain_[3],Qt=this.chain_[4],Ht,Dt;for(let _t=0;_t<80;_t++){_t<40?_t<20?(Ht=Ct^ot&(ct^Ct),Dt=1518500249):(Ht=ot^ct^Ct,Dt=1859775393):_t<60?(Ht=ot&ct|Ct&(ot|ct),Dt=2400959708):(Ht=ot^ct^Ct,Dt=3395469782);const pt=(je<<5|je>>>27)+Ht+Qt+Dt+He[_t]&4294967295;Qt=Ct,Ct=ct,ct=(ot<<30|ot>>>2)&4294967295,ot=je,je=pt}this.chain_[0]=this.chain_[0]+je&4294967295,this.chain_[1]=this.chain_[1]+ot&4294967295,this.chain_[2]=this.chain_[2]+ct&4294967295,this.chain_[3]=this.chain_[3]+Ct&4294967295,this.chain_[4]=this.chain_[4]+Qt&4294967295}update(Ce,Ne){if(Ce==null)return;Ne===void 0&&(Ne=Ce.length);const He=Ne-this.blockSize;let je=0;const ot=this.buf_;let ct=this.inbuf_;for(;je<Ne;){if(ct===0)for(;je<=He;)this.compress_(Ce,je),je+=this.blockSize;if(typeof Ce=="string"){for(;je<Ne;)if(ot[ct]=Ce.charCodeAt(je),++ct,++je,ct===this.blockSize){this.compress_(ot),ct=0;break}}else for(;je<Ne;)if(ot[ct]=Ce[je],++ct,++je,ct===this.blockSize){this.compress_(ot),ct=0;break}}this.inbuf_=ct,this.total_+=Ne}digest(){const Ce=[];let Ne=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let je=this.blockSize-1;je>=56;je--)this.buf_[je]=Ne&255,Ne/=256;this.compress_(this.buf_);let He=0;for(let je=0;je<5;je++)for(let ot=24;ot>=0;ot-=8)Ce[He]=this.chain_[je]>>ot&255,++He;return Ce}}function Qe(Pe,Ce){const Ne=new st(Pe,Ce);return Ne.subscribe.bind(Ne)}class st{constructor(Ce,Ne){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ne,this.task.then(()=>{Ce(this)}).catch(He=>{this.error(He)})}next(Ce){this.forEachObserver(Ne=>{Ne.next(Ce)})}error(Ce){this.forEachObserver(Ne=>{Ne.error(Ce)}),this.close(Ce)}complete(){this.forEachObserver(Ce=>{Ce.complete()}),this.close()}subscribe(Ce,Ne,He){let je;if(Ce===void 0&&Ne===void 0&&He===void 0)throw new Error("Missing Observer.");St(Ce,["next","error","complete"])?je=Ce:je={next:Ce,error:Ne,complete:He},je.next===void 0&&(je.next=mt),je.error===void 0&&(je.error=mt),je.complete===void 0&&(je.complete=mt);const ot=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?je.error(this.finalError):je.complete()}catch{}}),this.observers.push(je),ot}unsubscribeOne(Ce){this.observers===void 0||this.observers[Ce]===void 0||(delete this.observers[Ce],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(Ce){if(!this.finalized)for(let Ne=0;Ne<this.observers.length;Ne++)this.sendOne(Ne,Ce)}sendOne(Ce,Ne){this.task.then(()=>{if(this.observers!==void 0&&this.observers[Ce]!==void 0)try{Ne(this.observers[Ce])}catch(He){typeof console<"u"&&console.error&&console.error(He)}})}close(Ce){this.finalized||(this.finalized=!0,Ce!==void 0&&(this.finalError=Ce),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gt(Pe,Ce){return(...Ne)=>{Promise.resolve(!0).then(()=>{Pe(...Ne)}).catch(He=>{Ce&&Ce(He)})}}function St(Pe,Ce){if(typeof Pe!="object"||Pe===null)return!1;for(const Ne of Ce)if(Ne in Pe&&typeof Pe[Ne]=="function")return!0;return!1}function mt(){}const zt=function(Pe,Ce,Ne,He){let je;if(He<Ce?je="at least "+Ce:He>Ne&&(je=Ne===0?"none":"no more than "+Ne),je){const ot=Pe+" failed: Was called with "+He+(He===1?" argument.":" arguments.")+" Expects "+je+".";throw new Error(ot)}};function Yt(Pe,Ce){return`${Pe} failed: ${Ce} argument `}function Tt(Pe,Ce,Ne){if(!(Ne&&!Ce)&&typeof Ce!="string")throw new Error(Yt(Pe,"namespace")+"must be a valid firebase namespace.")}function qt(Pe,Ce,Ne,He){if(!(He&&!Ne)&&typeof Ne!="function")throw new Error(Yt(Pe,Ce)+"must be a valid function.")}function Ut(Pe,Ce,Ne,He){if(!(He&&!Ne)&&(typeof Ne!="object"||Ne===null))throw new Error(Yt(Pe,Ce)+"must be a valid context object.")}const Rt=function(Pe){const Ce=[];let Ne=0;for(let He=0;He<Pe.length;He++){let je=Pe.charCodeAt(He);if(je>=55296&&je<=56319){const ot=je-55296;He++,g(He<Pe.length,"Surrogate pair missing trail surrogate.");const ct=Pe.charCodeAt(He)-56320;je=65536+(ot<<10)+ct}je<128?Ce[Ne++]=je:je<2048?(Ce[Ne++]=je>>6|192,Ce[Ne++]=je&63|128):je<65536?(Ce[Ne++]=je>>12|224,Ce[Ne++]=je>>6&63|128,Ce[Ne++]=je&63|128):(Ce[Ne++]=je>>18|240,Ce[Ne++]=je>>12&63|128,Ce[Ne++]=je>>6&63|128,Ce[Ne++]=je&63|128)}return Ce},Ft=function(Pe){let Ce=0;for(let Ne=0;Ne<Pe.length;Ne++){const He=Pe.charCodeAt(Ne);He<128?Ce++:He<2048?Ce+=2:He>=55296&&He<=56319?(Ce+=4,Ne++):Ce+=3}return Ce};const Nt=1e3,yt=2,Mt=14400*1e3,jt=.5;function Ot(Pe,Ce=Nt,Ne=yt){const He=Ce*Math.pow(Ne,Pe),je=Math.round(jt*He*(Math.random()-.5)*2);return Math.min(Mt,He+je)}function vt(Pe){return Number.isFinite(Pe)?Pe+wt(Pe):`${Pe}`}function wt(Pe){Pe=Math.abs(Pe);const Ce=Pe%100;if(Ce>=10&&Ce<=20)return"th";const Ne=Pe%10;return Ne===1?"st":Ne===2?"nd":Ne===3?"rd":"th"}function Lt(Pe){return Pe&&Pe._delegate?Pe._delegate:Pe}return index_cjs$2.CONSTANTS=p,index_cjs$2.DecodeBase64StringError=o,index_cjs$2.Deferred=G,index_cjs$2.ErrorFactory=u,index_cjs$2.FirebaseError=ie,index_cjs$2.MAX_VALUE_MILLIS=Mt,index_cjs$2.RANDOM_FACTOR=jt,index_cjs$2.Sha1=Je,index_cjs$2.areCookiesEnabled=ne,index_cjs$2.assert=g,index_cjs$2.assertionError=m,index_cjs$2.async=gt,index_cjs$2.base64=a,index_cjs$2.base64Decode=_,index_cjs$2.base64Encode=h,index_cjs$2.base64urlEncodeWithoutPadding=v,index_cjs$2.calculateBackoffMillis=Ot,index_cjs$2.contains=ke,index_cjs$2.createMockUserToken=K,index_cjs$2.createSubscribe=Qe,index_cjs$2.decode=U,index_cjs$2.deepCopy=y,index_cjs$2.deepEqual=dt,index_cjs$2.deepExtend=w,index_cjs$2.errorPrefix=Yt,index_cjs$2.extractQuerystring=Ve,index_cjs$2.getDefaultAppConfig=k,index_cjs$2.getDefaultEmulatorHost=j,index_cjs$2.getDefaultEmulatorHostnameAndPort=D,index_cjs$2.getDefaults=x,index_cjs$2.getExperimentalSetting=q,index_cjs$2.getGlobal=I,index_cjs$2.getModularInstance=Lt,index_cjs$2.getUA=ue,index_cjs$2.isAdmin=Le,index_cjs$2.isBrowser=de,index_cjs$2.isBrowserExtension=fe,index_cjs$2.isCloudWorkstation=$,index_cjs$2.isCloudflareWorker=Ee,index_cjs$2.isElectron=be,index_cjs$2.isEmpty=nt,index_cjs$2.isIE=Oe,index_cjs$2.isIndexedDBAvailable=A,index_cjs$2.isMobileCordova=ee,index_cjs$2.isNode=oe,index_cjs$2.isNodeSdk=J,index_cjs$2.isReactNative=Se,index_cjs$2.isSafari=c,index_cjs$2.isSafariOrWebkit=N,index_cjs$2.isUWP=ge,index_cjs$2.isValidFormat=Ie,index_cjs$2.isValidTimestamp=X,index_cjs$2.isWebWorker=he,index_cjs$2.issuedAtTime=me,index_cjs$2.jsonEval=n,index_cjs$2.map=bt,index_cjs$2.ordinal=vt,index_cjs$2.pingServer=W,index_cjs$2.promiseWithTimeout=lt,index_cjs$2.querystring=Be,index_cjs$2.querystringDecode=Me,index_cjs$2.safeGet=ze,index_cjs$2.stringLength=Ft,index_cjs$2.stringToByteArray=Rt,index_cjs$2.stringify=L,index_cjs$2.updateEmulatorBanner=ae,index_cjs$2.validateArgCount=zt,index_cjs$2.validateCallback=qt,index_cjs$2.validateContextObject=Ut,index_cjs$2.validateIndexedDBOpenable=V,index_cjs$2.validateNamespace=Tt,index_cjs$2}var index_cjs$1={},hasRequiredIndex_cjs$1;function requireIndex_cjs$1(){return hasRequiredIndex_cjs$1||(hasRequiredIndex_cjs$1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=[];e.LogLevel=void 0,(function(o){o[o.DEBUG=0]="DEBUG",o[o.VERBOSE=1]="VERBOSE",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.SILENT=5]="SILENT"})(e.LogLevel||(e.LogLevel={}));const s={debug:e.LogLevel.DEBUG,verbose:e.LogLevel.VERBOSE,info:e.LogLevel.INFO,warn:e.LogLevel.WARN,error:e.LogLevel.ERROR,silent:e.LogLevel.SILENT},p=e.LogLevel.INFO,g={[e.LogLevel.DEBUG]:"log",[e.LogLevel.VERBOSE]:"log",[e.LogLevel.INFO]:"info",[e.LogLevel.WARN]:"warn",[e.LogLevel.ERROR]:"error"},m=(o,h,...v)=>{if(h<o.logLevel)return;const _=new Date().toISOString(),y=g[h];if(y)console[y](`[${_}]  ${o.name}:`,...v);else throw new Error(`Attempted to log a message with an invalid logType (value: ${h})`)};class d{constructor(h){this.name=h,this._logLevel=p,this._logHandler=m,this._userLogHandler=null,t.push(this)}get logLevel(){return this._logLevel}set logLevel(h){if(!(h in e.LogLevel))throw new TypeError(`Invalid value "${h}" assigned to \`logLevel\``);this._logLevel=h}setLogLevel(h){this._logLevel=typeof h=="string"?s[h]:h}get logHandler(){return this._logHandler}set logHandler(h){if(typeof h!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=h}get userLogHandler(){return this._userLogHandler}set userLogHandler(h){this._userLogHandler=h}debug(...h){this._userLogHandler&&this._userLogHandler(this,e.LogLevel.DEBUG,...h),this._logHandler(this,e.LogLevel.DEBUG,...h)}log(...h){this._userLogHandler&&this._userLogHandler(this,e.LogLevel.VERBOSE,...h),this._logHandler(this,e.LogLevel.VERBOSE,...h)}info(...h){this._userLogHandler&&this._userLogHandler(this,e.LogLevel.INFO,...h),this._logHandler(this,e.LogLevel.INFO,...h)}warn(...h){this._userLogHandler&&this._userLogHandler(this,e.LogLevel.WARN,...h),this._logHandler(this,e.LogLevel.WARN,...h)}error(...h){this._userLogHandler&&this._userLogHandler(this,e.LogLevel.ERROR,...h),this._logHandler(this,e.LogLevel.ERROR,...h)}}function l(o){t.forEach(h=>{h.setLogLevel(o)})}function a(o,h){for(const v of t){let _=null;h&&h.level&&(_=s[h.level]),o===null?v.userLogHandler=null:v.userLogHandler=(y,w,...T)=>{const I=T.map(O=>{if(O==null)return null;if(typeof O=="string")return O;if(typeof O=="number"||typeof O=="boolean")return O.toString();if(O instanceof Error)return O.message;try{return JSON.stringify(O)}catch{return null}}).filter(O=>O).join(" ");w>=(_??y.logLevel)&&o({level:e.LogLevel[w].toLowerCase(),message:I,args:T,type:y.name})}}}e.Logger=d,e.setLogLevel=l,e.setUserLogHandler=a})(index_cjs$1)),index_cjs$1}var index_cjs={},hasRequiredIndex_cjs;function requireIndex_cjs(){if(hasRequiredIndex_cjs)return index_cjs;hasRequiredIndex_cjs=1,Object.defineProperty(index_cjs,"__esModule",{value:!0});var e=requireIndex_cjs$2();class t{constructor(a,o,h){this.name=a,this.instanceFactory=o,this.type=h,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(a){return this.instantiationMode=a,this}setMultipleInstances(a){return this.multipleInstances=a,this}setServiceProps(a){return this.serviceProps=a,this}setInstanceCreatedCallback(a){return this.onInstanceCreated=a,this}}const s="[DEFAULT]";class p{constructor(a,o){this.name=a,this.container=o,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(a){const o=this.normalizeInstanceIdentifier(a);if(!this.instancesDeferred.has(o)){const h=new e.Deferred;if(this.instancesDeferred.set(o,h),this.isInitialized(o)||this.shouldAutoInitialize())try{const v=this.getOrInitializeService({instanceIdentifier:o});v&&h.resolve(v)}catch{}}return this.instancesDeferred.get(o).promise}getImmediate(a){const o=this.normalizeInstanceIdentifier(a?.identifier),h=a?.optional??!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(v){if(h)return null;throw v}else{if(h)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(a){if(a.name!==this.name)throw Error(`Mismatching Component ${a.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=a,!!this.shouldAutoInitialize()){if(m(a))try{this.getOrInitializeService({instanceIdentifier:s})}catch{}for(const[o,h]of this.instancesDeferred.entries()){const v=this.normalizeInstanceIdentifier(o);try{const _=this.getOrInitializeService({instanceIdentifier:v});h.resolve(_)}catch{}}}}clearInstance(a=s){this.instancesDeferred.delete(a),this.instancesOptions.delete(a),this.instances.delete(a)}async delete(){const a=Array.from(this.instances.values());await Promise.all([...a.filter(o=>"INTERNAL"in o).map(o=>o.INTERNAL.delete()),...a.filter(o=>"_delete"in o).map(o=>o._delete())])}isComponentSet(){return this.component!=null}isInitialized(a=s){return this.instances.has(a)}getOptions(a=s){return this.instancesOptions.get(a)||{}}initialize(a={}){const{options:o={}}=a,h=this.normalizeInstanceIdentifier(a.instanceIdentifier);if(this.isInitialized(h))throw Error(`${this.name}(${h}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const v=this.getOrInitializeService({instanceIdentifier:h,options:o});for(const[_,y]of this.instancesDeferred.entries()){const w=this.normalizeInstanceIdentifier(_);h===w&&y.resolve(v)}return v}onInit(a,o){const h=this.normalizeInstanceIdentifier(o),v=this.onInitCallbacks.get(h)??new Set;v.add(a),this.onInitCallbacks.set(h,v);const _=this.instances.get(h);return _&&a(_,h),()=>{v.delete(a)}}invokeOnInitCallbacks(a,o){const h=this.onInitCallbacks.get(o);if(h)for(const v of h)try{v(a,o)}catch{}}getOrInitializeService({instanceIdentifier:a,options:o={}}){let h=this.instances.get(a);if(!h&&this.component&&(h=this.component.instanceFactory(this.container,{instanceIdentifier:g(a),options:o}),this.instances.set(a,h),this.instancesOptions.set(a,o),this.invokeOnInitCallbacks(h,a),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,a,h)}catch{}return h||null}normalizeInstanceIdentifier(a=s){return this.component?this.component.multipleInstances?a:s:a}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function g(l){return l===s?void 0:l}function m(l){return l.instantiationMode==="EAGER"}class d{constructor(a){this.name=a,this.providers=new Map}addComponent(a){const o=this.getProvider(a.name);if(o.isComponentSet())throw new Error(`Component ${a.name} has already been registered with ${this.name}`);o.setComponent(a)}addOrOverwriteComponent(a){this.getProvider(a.name).isComponentSet()&&this.providers.delete(a.name),this.addComponent(a)}getProvider(a){if(this.providers.has(a))return this.providers.get(a);const o=new p(a,this);return this.providers.set(a,o),o}getProviders(){return Array.from(this.providers.values())}}return index_cjs.Component=t,index_cjs.ComponentContainer=d,index_cjs.Provider=p,index_cjs}var hasRequiredIndex_standalone;function requireIndex_standalone(){if(hasRequiredIndex_standalone)return index_standalone;hasRequiredIndex_standalone=1;var e={},t={};Object.defineProperty(index_standalone,"__esModule",{value:!0});var s=require$$1$3,p=requireBuffer(),g=require$$1$3,m=require$$1$3,d=require$$1$3,l=require$$1$3,a=require$$1$3,o=require$$1$3,h=requireIndex_cjs$2(),v=requireIndex_cjs$1(),_=requireIndex_cjs();function y(F){return F&&typeof F=="object"&&"default"in F?F:{default:F}}var w=y(s),T=y(p),I=y(g),O=y(m),E=y(d),C=y(l),x=y(a),j=y(o),D=y(h),k=y(v),q=y(_);function G(F){if(F.__esModule)return F;var R=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(F).forEach(function(B){var H=Object.getOwnPropertyDescriptor(F,B);Object.defineProperty(R,B,H.get?H:{enumerable:!0,get:function(){return F[B]}})}),R}var $={},W={exports:{}};(function(F,R){var B=T.default,H=B.Buffer;function Z(pe,ve){for(var we in pe)ve[we]=pe[we]}H.from&&H.alloc&&H.allocUnsafe&&H.allocUnsafeSlow?F.exports=B:(Z(B,R),R.Buffer=se);function se(pe,ve,we){return H(pe,ve,we)}se.prototype=Object.create(H.prototype),Z(H,se),se.from=function(pe,ve,we){if(typeof pe=="number")throw new TypeError("Argument must not be a number");return H(pe,ve,we)},se.alloc=function(pe,ve,we){if(typeof pe!="number")throw new TypeError("Argument must be a number");var Re=H(pe);return ve!==void 0?typeof we=="string"?Re.fill(ve,we):Re.fill(ve):Re.fill(0),Re},se.allocUnsafe=function(pe){if(typeof pe!="number")throw new TypeError("Argument must be a number");return H(pe)},se.allocUnsafeSlow=function(pe){if(typeof pe!="number")throw new TypeError("Argument must be a number");return B.SlowBuffer(pe)}})(W,W.exports);var K={},z=O.default.Stream,Q=w.default,Y=function(F){this.readable=this.writable=!0,this._paused=!1,this._driver=F};Q.inherits(Y,z),Y.prototype.pause=function(){this._paused=!0,this._driver.messages._paused=!0},Y.prototype.resume=function(){this._paused=!1,this.emit("drain");var F=this._driver.messages;F._paused=!1,F.emit("drain")},Y.prototype.write=function(F){return this.writable?(this._driver.parse(F),!this._paused):!1},Y.prototype.end=function(F){if(this.writable){F!==void 0&&this.write(F),this.writable=!1;var R=this._driver.messages;R.readable&&(R.readable=R.writable=!1,R.emit("end"))}},Y.prototype.destroy=function(){this.end()};var te=function(F){this.readable=this.writable=!0,this._paused=!1,this._driver=F};Q.inherits(te,z),te.prototype.pause=function(){this._driver.io._paused=!0},te.prototype.resume=function(){this._driver.io._paused=!1,this._driver.io.emit("drain")},te.prototype.write=function(F){return this.writable?(typeof F=="string"?this._driver.text(F):this._driver.binary(F),!this._paused):!1},te.prototype.end=function(F){F!==void 0&&this.write(F)},te.prototype.destroy=function(){},K.IO=Y,K.Messages=te;var ae=function(){this.clear()};ae.prototype.ALLOWED_DUPLICATES=["set-cookie","set-cookie2","warning","www-authenticate"],ae.prototype.clear=function(){this._sent={},this._lines=[]},ae.prototype.set=function(F,R){if(R!==void 0){F=this._strip(F),R=this._strip(R);var B=F.toLowerCase();(!this._sent.hasOwnProperty(B)||this.ALLOWED_DUPLICATES.indexOf(B)>=0)&&(this._sent[B]=!0,this._lines.push(F+": "+R+`\r
`))}},ae.prototype.toString=function(){return this._lines.join("")},ae.prototype._strip=function(F){return F.toString().replace(/^ */,"").replace(/ *$/,"")};var ue=ae,ee=W.exports.Buffer,oe=function(){this._queue=[],this._queueSize=0,this._offset=0};oe.prototype.put=function(F){!F||F.length===0||(ee.isBuffer(F)||(F=ee.from(F)),this._queue.push(F),this._queueSize+=F.length)},oe.prototype.read=function(F){if(F>this._queueSize)return null;if(F===0)return ee.alloc(0);this._queueSize-=F;var R=this._queue,B=F,H=R[0],Z,se;if(H.length>=F)return H.length===F?R.shift():(se=H.slice(0,F),R[0]=H.slice(F),se);for(var pe=0,ve=R.length;pe<ve&&!(B<R[pe].length);pe++)B-=R[pe].length;return Z=R.splice(0,pe),B>0&&R.length>0&&(Z.push(R[0].slice(0,B)),R[0]=R[0].slice(B)),ee.concat(Z,F)},oe.prototype.eachByte=function(F,R){for(var B,H,Z;this._queue.length>0;){for(B=this._queue[0],H=B.length;this._offset<H;)Z=this._offset,this._offset+=1,F.call(R,B[Z]);this._offset=0,this._queue.shift()}};var de=oe,he=W.exports.Buffer,Ee=I.default.EventEmitter,fe=w.default,Se=K,be=ue,Oe=de,ge=function(F,R,B){Ee.call(this),ge.validateOptions(B||{},["maxLength","masking","requireMasking","protocols"]),this._request=F,this._reader=new Oe,this._options=B||{},this._maxLength=this._options.maxLength||this.MAX_LENGTH,this._headers=new be,this.__queue=[],this.readyState=0,this.url=R,this.io=new Se.IO(this),this.messages=new Se.Messages(this),this._bindEventListeners()};fe.inherits(ge,Ee),ge.isWebSocket=function(F){var R=F.headers.connection||"",B=F.headers.upgrade||"";return F.method==="GET"&&R.toLowerCase().split(/ *, */).indexOf("upgrade")>=0&&B.toLowerCase()==="websocket"},ge.validateOptions=function(F,R){for(var B in F)if(R.indexOf(B)<0)throw new Error("Unrecognized option: "+B)};var J={MAX_LENGTH:67108863,STATES:["connecting","open","closing","closed"],_bindEventListeners:function(){var F=this;this.messages.on("error",function(){}),this.on("message",function(R){var B=F.messages;B.readable&&B.emit("data",R.data)}),this.on("error",function(R){var B=F.messages;B.readable&&B.emit("error",R)}),this.on("close",function(){var R=F.messages;R.readable&&(R.readable=R.writable=!1,R.emit("end"))})},getState:function(){return this.STATES[this.readyState]||null},addExtension:function(F){return!1},setHeader:function(F,R){return this.readyState>0?!1:(this._headers.set(F,R),!0)},start:function(){if(this.readyState!==0)return!1;if(!ge.isWebSocket(this._request))return this._failHandshake(new Error("Not a WebSocket request"));var F;try{F=this._handshakeResponse()}catch(R){return this._failHandshake(R)}return this._write(F),this._stage!==-1&&this._open(),!0},_failHandshake:function(F){var R=new be;return R.set("Content-Type","text/plain"),R.set("Content-Length",he.byteLength(F.message,"utf8")),R=["HTTP/1.1 400 Bad Request",R.toString(),F.message],this._write(he.from(R.join(`\r
`),"utf8")),this._fail("protocol_error",F.message),!1},text:function(F){return this.frame(F)},binary:function(F){return!1},ping:function(){return!1},pong:function(){return!1},close:function(F,R){return this.readyState!==1?!1:(this.readyState=3,this.emit("close",new ge.CloseEvent(null,null)),!0)},_open:function(){this.readyState=1,this.__queue.forEach(function(F){this.frame.apply(this,F)},this),this.__queue=[],this.emit("open",new ge.OpenEvent)},_queue:function(F){return this.__queue.push(F),!0},_write:function(F){var R=this.io;R.readable&&R.emit("data",F)},_fail:function(F,R){this.readyState=2,this.emit("error",new Error(R)),this.close()}};for(var c in J)ge.prototype[c]=J[c];ge.ConnectEvent=function(){},ge.OpenEvent=function(){},ge.CloseEvent=function(F,R){this.code=F,this.reason=R},ge.MessageEvent=function(F){this.data=F},ge.PingEvent=function(F){this.data=F},ge.PongEvent=function(F){this.data=F};var N=ge,A={};A.HTTPParser=V;function V(F){if(F!==void 0&&F!==V.REQUEST&&F!==V.RESPONSE)throw new Error("type must be REQUEST or RESPONSE");F===void 0||this.initialize(F),this.maxHeaderSize=V.maxHeaderSize}V.prototype.initialize=function(F,R){if(F!==V.REQUEST&&F!==V.RESPONSE)throw new Error("type must be REQUEST or RESPONSE");this.type=F,this.state=F+"_LINE",this.info={headers:[],upgrade:!1},this.trailers=[],this.line="",this.isChunked=!1,this.connection="",this.headerSize=0,this.body_bytes=null,this.isUserCall=!1,this.hadError=!1},V.encoding="ascii",V.maxHeaderSize=81920,V.REQUEST="REQUEST",V.RESPONSE="RESPONSE";var ne=V.kOnHeaders=1,ce=V.kOnHeadersComplete=2,ie=V.kOnBody=3,u=V.kOnMessageComplete=4;V.prototype[ne]=V.prototype[ce]=V.prototype[ie]=V.prototype[u]=function(){};var P=!0;Object.defineProperty(V,"kOnExecute",{get:function(){return P=!1,99}});var M=A.methods=V.methods=["DELETE","GET","HEAD","POST","PUT","CONNECT","OPTIONS","TRACE","COPY","LOCK","MKCOL","MOVE","PROPFIND","PROPPATCH","SEARCH","UNLOCK","BIND","REBIND","UNBIND","ACL","REPORT","MKACTIVITY","CHECKOUT","MERGE","M-SEARCH","NOTIFY","SUBSCRIBE","UNSUBSCRIBE","PATCH","PURGE","MKCALENDAR","LINK","UNLINK","SOURCE"],n=M.indexOf("CONNECT");V.prototype.reinitialize=V,V.prototype.close=V.prototype.pause=V.prototype.resume=V.prototype.remove=V.prototype.free=function(){},V.prototype._compatMode0_11=!1,V.prototype.getAsyncId=function(){return 0};var L={REQUEST_LINE:!0,RESPONSE_LINE:!0,HEADER:!0};V.prototype.execute=function(F,R,B){if(!(this instanceof V))throw new TypeError("not a HTTPParser");R=R||0,B=typeof B=="number"?B:F.length,this.chunk=F,this.offset=R;var H=this.end=R+B;try{for(;this.offset<H&&!this[this.state](););}catch(Z){if(this.isUserCall)throw Z;return this.hadError=!0,Z}return this.chunk=null,B=this.offset-R,L[this.state]&&(this.headerSize+=B,this.headerSize>(this.maxHeaderSize||V.maxHeaderSize))?new Error("max header size exceeded"):B};var U={REQUEST_LINE:!0,RESPONSE_LINE:!0,BODY_RAW:!0};V.prototype.finish=function(){if(!this.hadError){if(!U[this.state])return new Error("invalid state for EOF");this.state==="BODY_RAW"&&this.userCall()(this[u]())}},V.prototype.consume=V.prototype.unconsume=V.prototype.getCurrentBuffer=function(){},V.prototype.userCall=function(){this.isUserCall=!0;var F=this;return function(R){return F.isUserCall=!1,R}},V.prototype.nextRequest=function(){this.userCall()(this[u]()),this.reinitialize(this.type)},V.prototype.consumeLine=function(){for(var F=this.end,R=this.chunk,B=this.offset;B<F;B++)if(R[B]===10){var H=this.line+R.toString(V.encoding,this.offset,B);return H.charAt(H.length-1)==="\r"&&(H=H.substr(0,H.length-1)),this.line="",this.offset=B+1,H}this.line+=R.toString(V.encoding,this.offset,this.end),this.offset=this.end};var X=/^([^: \t]+):[ \t]*((?:.*[^ \t])|)/,me=/^[ \t]+(.*[^ \t])/;V.prototype.parseHeader=function(F,R){if(F.indexOf("\r")!==-1)throw ke("HPE_LF_EXPECTED");var B=X.exec(F),H=B&&B[1];if(H)R.push(H),R.push(B[2]);else{var Z=me.exec(F);Z&&R.length&&(R[R.length-1]&&(R[R.length-1]+=" "),R[R.length-1]+=Z[1])}};var Ie=/^([A-Z-]+) ([^ ]+) HTTP\/(\d)\.(\d)$/;V.prototype.REQUEST_LINE=function(){var F=this.consumeLine();if(F){var R=Ie.exec(F);if(R===null)throw ke("HPE_INVALID_CONSTANT");if(this.info.method=this._compatMode0_11?R[1]:M.indexOf(R[1]),this.info.method===-1)throw new Error("invalid request method");this.info.url=R[2],this.info.versionMajor=+R[3],this.info.versionMinor=+R[4],this.body_bytes=0,this.state="HEADER"}};var Le=/^HTTP\/(\d)\.(\d) (\d{3}) ?(.*)$/;V.prototype.RESPONSE_LINE=function(){var F=this.consumeLine();if(F){var R=Le.exec(F);if(R===null)throw ke("HPE_INVALID_CONSTANT");this.info.versionMajor=+R[1],this.info.versionMinor=+R[2];var B=this.info.statusCode=+R[3];this.info.statusMessage=R[4],((B/100|0)===1||B===204||B===304)&&(this.body_bytes=0),this.state="HEADER"}},V.prototype.shouldKeepAlive=function(){if(this.info.versionMajor>0&&this.info.versionMinor>0){if(this.connection.indexOf("close")!==-1)return!1}else if(this.connection.indexOf("keep-alive")===-1)return!1;return!!(this.body_bytes!==null||this.isChunked)},V.prototype.HEADER=function(){var F=this.consumeLine();if(F!==void 0){var R=this.info;if(F)this.parseHeader(F,R.headers);else{for(var B=R.headers,H=!1,Z,se=!1,pe=0;pe<B.length;pe+=2)switch(B[pe].toLowerCase()){case"transfer-encoding":this.isChunked=B[pe+1].toLowerCase()==="chunked";break;case"content-length":if(Z=+B[pe+1],H){if(Z!==this.body_bytes)throw ke("HPE_UNEXPECTED_CONTENT_LENGTH")}else H=!0,this.body_bytes=Z;break;case"connection":this.connection+=B[pe+1].toLowerCase();break;case"upgrade":se=!0;break}this.isChunked&&H&&(H=!1,this.body_bytes=null),se&&this.connection.indexOf("upgrade")!=-1?R.upgrade=this.type===V.REQUEST||R.statusCode===101:R.upgrade=R.method===n,this.isChunked&&R.upgrade&&(this.isChunked=!1),R.shouldKeepAlive=this.shouldKeepAlive();var ve;if(P?ve=this.userCall()(this[ce](R)):ve=this.userCall()(this[ce](R.versionMajor,R.versionMinor,R.headers,R.method,R.url,R.statusCode,R.statusMessage,R.upgrade,R.shouldKeepAlive)),ve===2)return this.nextRequest(),!0;if(this.isChunked&&!ve)this.state="BODY_CHUNKHEAD";else{if(ve||this.body_bytes===0)return this.nextRequest(),R.upgrade;this.body_bytes===null?this.state="BODY_RAW":this.state="BODY_SIZED"}}}},V.prototype.BODY_CHUNKHEAD=function(){var F=this.consumeLine();F!==void 0&&(this.body_bytes=parseInt(F,16),this.body_bytes?this.state="BODY_CHUNK":this.state="BODY_CHUNKTRAILERS")},V.prototype.BODY_CHUNK=function(){var F=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[ie](this.chunk.slice(this.offset,this.offset+F),0,F)),this.offset+=F,this.body_bytes-=F,this.body_bytes||(this.state="BODY_CHUNKEMPTYLINE")},V.prototype.BODY_CHUNKEMPTYLINE=function(){var F=this.consumeLine();if(F!==void 0){if(F!=="")throw new Error("Expected empty line");this.state="BODY_CHUNKHEAD"}},V.prototype.BODY_CHUNKTRAILERS=function(){var F=this.consumeLine();F!==void 0&&(F?this.parseHeader(F,this.trailers):(this.trailers.length&&this.userCall()(this[ne](this.trailers,"")),this.nextRequest()))},V.prototype.BODY_RAW=function(){this.userCall()(this[ie](this.chunk.slice(this.offset,this.end),0,this.end-this.offset)),this.offset=this.end},V.prototype.BODY_SIZED=function(){var F=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[ie](this.chunk.slice(this.offset,this.offset+F),0,F)),this.offset+=F,this.body_bytes-=F,this.body_bytes||this.nextRequest()},["Headers","HeadersComplete","Body","MessageComplete"].forEach(function(F){var R=V["kOn"+F];Object.defineProperty(V.prototype,"on"+F,{get:function(){return this[R]},set:function(B){return this._compatMode0_11=!0,n="CONNECT",this[R]=B}})});function ke(F){var R=new Error("Parse Error");return R.code=F,R}var ze=A.HTTPParser,nt=W.exports.Buffer,bt={request:ze.REQUEST||"request",response:ze.RESPONSE||"response"},dt=function(F){this._type=F,this._parser=new ze(bt[F]),this._complete=!1,this.headers={};var R=null,B=this;this._parser.onHeaderField=function(H,Z,se){R=H.toString("utf8",Z,Z+se).toLowerCase()},this._parser.onHeaderValue=function(H,Z,se){var pe=H.toString("utf8",Z,Z+se);B.headers.hasOwnProperty(R)?B.headers[R]+=", "+pe:B.headers[R]=pe},this._parser.onHeadersComplete=this._parser[ze.kOnHeadersComplete]=function(H,Z,se,pe,ve,we){var Re=arguments[0];if(typeof Re=="object"&&(pe=Re.method,ve=Re.url,we=Re.statusCode,se=Re.headers),B.method=typeof pe=="number"?dt.METHODS[pe]:pe,B.statusCode=we,B.url=ve,!!se){for(var qe=0,Ue=se.length,Ke,it;qe<Ue;qe+=2)Ke=se[qe].toLowerCase(),it=se[qe+1],B.headers.hasOwnProperty(Ke)?B.headers[Ke]+=", "+it:B.headers[Ke]=it;B._complete=!0}}};dt.METHODS={0:"DELETE",1:"GET",2:"HEAD",3:"POST",4:"PUT",5:"CONNECT",6:"OPTIONS",7:"TRACE",8:"COPY",9:"LOCK",10:"MKCOL",11:"MOVE",12:"PROPFIND",13:"PROPPATCH",14:"SEARCH",15:"UNLOCK",16:"BIND",17:"REBIND",18:"UNBIND",19:"ACL",20:"REPORT",21:"MKACTIVITY",22:"CHECKOUT",23:"MERGE",24:"M-SEARCH",25:"NOTIFY",26:"SUBSCRIBE",27:"UNSUBSCRIBE",28:"PATCH",29:"PURGE",30:"MKCALENDAR",31:"LINK",32:"UNLINK"};var Et=e.version?e.version.match(/[0-9]+/g).map(function(F){return parseInt(F,10)}):[];Et[0]===0&&Et[1]===12&&(dt.METHODS[16]="REPORT",dt.METHODS[17]="MKACTIVITY",dt.METHODS[18]="CHECKOUT",dt.METHODS[19]="MERGE",dt.METHODS[20]="M-SEARCH",dt.METHODS[21]="NOTIFY",dt.METHODS[22]="SUBSCRIBE",dt.METHODS[23]="UNSUBSCRIBE",dt.METHODS[24]="PATCH",dt.METHODS[25]="PURGE"),dt.prototype.isComplete=function(){return this._complete},dt.prototype.parse=function(F){var R=this._parser.execute(F,0,F.length);if(typeof R!="number"){this.error=R,this._complete=!0;return}this._complete&&(this.body=R<F.length?F.slice(R):nt.alloc(0))};var lt=dt,Be=/([!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+)/,Me=/([^!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z])/g,Ve=/"((?:\\[\x00-\x7f]|[^\x00-\x08\x0a-\x1f\x7f"\\])*)"/,Je=new RegExp(Be.source+"(?:=(?:"+Be.source+"|"+Ve.source+"))?"),Qe=new RegExp(Be.source+"(?: *; *"+Je.source+")*","g"),st=new RegExp("^"+Qe.source+"(?: *, *"+Qe.source+")*$"),gt=/^-?(0|[1-9][0-9]*)(\.[0-9]+)?$/,St=Object.prototype.hasOwnProperty,mt={parseHeader:function(F){var R=new zt;if(F===""||F===void 0)return R;if(!st.test(F))throw new SyntaxError("Invalid Sec-WebSocket-Extensions header: "+F);var B=F.match(Qe);return B.forEach(function(H){var Z=H.match(new RegExp(Je.source,"g")),se=Z.shift(),pe={};Z.forEach(function(ve){var we=ve.match(Je),Re=we[1],qe;we[2]!==void 0?qe=we[2]:we[3]!==void 0?qe=we[3].replace(/\\/g,""):qe=!0,gt.test(qe)&&(qe=parseFloat(qe)),St.call(pe,Re)?(pe[Re]=[].concat(pe[Re]),pe[Re].push(qe)):pe[Re]=qe},this),R.push(se,pe)},this),R},serializeParams:function(F,R){var B=[],H=function(se,pe){pe instanceof Array?pe.forEach(function(ve){H(se,ve)}):pe===!0?B.push(se):typeof pe=="number"?B.push(se+"="+pe):Me.test(pe)?B.push(se+'="'+pe.replace(/"/g,'\\"')+'"'):B.push(se+"="+pe)};for(var Z in R)H(Z,R[Z]);return[F].concat(B).join("; ")}},zt=function(){this._byName={},this._inOrder=[]};zt.prototype.push=function(F,R){St.call(this._byName,F)||(this._byName[F]=[]),this._byName[F].push(R),this._inOrder.push({name:F,params:R})},zt.prototype.eachOffer=function(F,R){for(var B=this._inOrder,H=0,Z=B.length;H<Z;H++)F.call(R,B[H].name,B[H].params)},zt.prototype.byName=function(F){return this._byName[F]||[]},zt.prototype.toArray=function(){return this._inOrder.slice()};var Yt=mt,Tt=function(F){this._bufferSize=F,this.clear()};Tt.prototype.clear=function(){this._buffer=new Array(this._bufferSize),this._ringOffset=0,this._ringSize=this._bufferSize,this._head=0,this._tail=0,this.length=0},Tt.prototype.push=function(F){var R=!1,B=!1;this._ringSize<this._bufferSize?R=this._tail===0:this._ringOffset===this._ringSize&&(R=!0,B=this._tail===0),R&&(this._tail=this._bufferSize,this._buffer=this._buffer.concat(new Array(this._bufferSize)),this._bufferSize=this._buffer.length,B&&(this._ringSize=this._bufferSize)),this._buffer[this._tail]=F,this.length+=1,this._tail<this._ringSize&&(this._ringOffset+=1),this._tail=(this._tail+1)%this._bufferSize},Tt.prototype.peek=function(){if(this.length!==0)return this._buffer[this._head]},Tt.prototype.shift=function(){if(this.length!==0){var F=this._buffer[this._head];return this._buffer[this._head]=void 0,this.length-=1,this._ringOffset-=1,this._ringOffset===0&&this.length>0?(this._head=this._ringSize,this._ringOffset=this.length,this._ringSize=this._bufferSize):this._head=(this._head+1)%this._ringSize,F}};var qt=Tt,Ut=qt,Rt=function(F,R){this._session=F,this._method=R,this._queue=new Ut(Rt.QUEUE_SIZE),this._stopped=!1,this.pending=0};Rt.QUEUE_SIZE=8,Rt.prototype.call=function(F,R,B,H){if(!this._stopped){var Z={error:F,message:R,callback:B,context:H,done:!1},se=!1,pe=this;if(this._queue.push(Z),Z.error)return Z.done=!0,this._stop(),this._flushQueue();var ve=function(we,Re){se^(se=!0)&&(we?(pe._stop(),Z.error=we,Z.message=null):Z.message=Re,Z.done=!0,pe._flushQueue())};try{this._session[this._method](R,ve)}catch(we){ve(we)}}},Rt.prototype._stop=function(){this.pending=this._queue.length,this._stopped=!0},Rt.prototype._flushQueue=function(){for(var F=this._queue,R;F.length>0&&F.peek().done;)R=F.shift(),R.error?(this.pending=0,F.clear()):this.pending-=1,R.callback.call(R.context,R.error,R.message)};var Ft=Rt,Nt=qt,yt=function(){this._complete=!1,this._callbacks=new Nt(yt.QUEUE_SIZE)};yt.QUEUE_SIZE=4,yt.all=function(F){var R=new yt,B=F.length,H=B;for(B===0&&R.done();H--;)F[H].then(function(){B-=1,B===0&&R.done()});return R},yt.prototype.then=function(F){this._complete?F():this._callbacks.push(F)},yt.prototype.done=function(){this._complete=!0;for(var F=this._callbacks,R;R=F.shift();)R()};var Mt=yt,jt=Ft,Ot=Mt,vt=function(F){this._ext=F[0],this._session=F[1],this._functors={incoming:new jt(this._session,"processIncomingMessage"),outgoing:new jt(this._session,"processOutgoingMessage")}};vt.prototype.pending=function(F){var R=this._functors[F];R._stopped||(R.pending+=1)},vt.prototype.incoming=function(F,R,B,H){this._exec("incoming",F,R,B,H)},vt.prototype.outgoing=function(F,R,B,H){this._exec("outgoing",F,R,B,H)},vt.prototype.close=function(){return this._closed=this._closed||new Ot,this._doClose(),this._closed},vt.prototype._exec=function(F,R,B,H,Z){this._functors[F].call(R,B,function(se,pe){se&&(se.message=this._ext.name+": "+se.message),H.call(Z,se,pe),this._doClose()},this)},vt.prototype._doClose=function(){var F=this._functors.incoming,R=this._functors.outgoing;!this._closed||F.pending+R.pending!==0||(this._session&&this._session.close(),this._session=null,this._closed.done())};var wt=vt,Lt=wt,Pe=Mt,Ce=function(F){this._cells=F.map(function(R){return new Lt(R)}),this._stopped={incoming:!1,outgoing:!1}};Ce.prototype.processIncomingMessage=function(F,R,B){this._stopped.incoming||this._loop("incoming",this._cells.length-1,-1,-1,F,R,B)},Ce.prototype.processOutgoingMessage=function(F,R,B){this._stopped.outgoing||this._loop("outgoing",0,this._cells.length,1,F,R,B)},Ce.prototype.close=function(F,R){this._stopped={incoming:!0,outgoing:!0};var B=this._cells.map(function(H){return H.close()});F&&Pe.all(B).then(function(){F.call(R)})},Ce.prototype._loop=function(F,R,B,H,Z,se,pe){for(var ve=this._cells,we=ve.length,Re=this;we--;)ve[we].pending(F);var qe=function(Ue,Ke,it){if(Ue===B)return se.call(pe,Ke,it);ve[Ue][F](Ke,it,function(ft,Bt){ft&&(Re._stopped[F]=!0),qe(Ue+H,ft,Bt)})};qe(R,null,Z)};var Ne=Ce,He=Yt,je=Ne,ot=function(){this._rsv1=this._rsv2=this._rsv3=null,this._byName={},this._inOrder=[],this._sessions=[],this._index={}};ot.MESSAGE_OPCODES=[1,2];var ct={add:function(F){if(typeof F.name!="string")throw new TypeError("extension.name must be a string");if(F.type!=="permessage")throw new TypeError('extension.type must be "permessage"');if(typeof F.rsv1!="boolean")throw new TypeError("extension.rsv1 must be true or false");if(typeof F.rsv2!="boolean")throw new TypeError("extension.rsv2 must be true or false");if(typeof F.rsv3!="boolean")throw new TypeError("extension.rsv3 must be true or false");if(this._byName.hasOwnProperty(F.name))throw new TypeError('An extension with name "'+F.name+'" is already registered');this._byName[F.name]=F,this._inOrder.push(F)},generateOffer:function(){var F=[],R=[],B={};return this._inOrder.forEach(function(H){var Z=H.createClientSession();if(Z){var se=[H,Z];F.push(se),B[H.name]=se;var pe=Z.generateOffer();pe=pe?[].concat(pe):[],pe.forEach(function(ve){R.push(He.serializeParams(H.name,ve))},this)}},this),this._sessions=F,this._index=B,R.length>0?R.join(", "):null},activate:function(F){var R=He.parseHeader(F),B=[];R.eachOffer(function(H,Z){var se=this._index[H];if(!se)throw new Error('Server sent an extension response for unknown extension "'+H+'"');var pe=se[0],ve=se[1],we=this._reserved(pe);if(we)throw new Error("Server sent two extension responses that use the RSV"+we[0]+' bit: "'+we[1]+'" and "'+pe.name+'"');if(ve.activate(Z)!==!0)throw new Error("Server sent unacceptable extension parameters: "+He.serializeParams(H,Z));this._reserve(pe),B.push(se)},this),this._sessions=B,this._pipeline=new je(B)},generateResponse:function(F){var R=[],B=[],H=He.parseHeader(F);return this._inOrder.forEach(function(Z){var se=H.byName(Z.name);if(!(se.length===0||this._reserved(Z))){var pe=Z.createServerSession(se);pe&&(this._reserve(Z),R.push([Z,pe]),B.push(He.serializeParams(Z.name,pe.generateResponse())))}},this),this._sessions=R,this._pipeline=new je(R),B.length>0?B.join(", "):null},validFrameRsv:function(F){var R={rsv1:!1,rsv2:!1,rsv3:!1},B;if(ot.MESSAGE_OPCODES.indexOf(F.opcode)>=0)for(var H=0,Z=this._sessions.length;H<Z;H++)B=this._sessions[H][0],R.rsv1=R.rsv1||B.rsv1,R.rsv2=R.rsv2||B.rsv2,R.rsv3=R.rsv3||B.rsv3;return(R.rsv1||!F.rsv1)&&(R.rsv2||!F.rsv2)&&(R.rsv3||!F.rsv3)},processIncomingMessage:function(F,R,B){this._pipeline.processIncomingMessage(F,R,B)},processOutgoingMessage:function(F,R,B){this._pipeline.processOutgoingMessage(F,R,B)},close:function(F,R){if(!this._pipeline)return F.call(R);this._pipeline.close(F,R)},_reserve:function(F){this._rsv1=this._rsv1||F.rsv1&&F.name,this._rsv2=this._rsv2||F.rsv2&&F.name,this._rsv3=this._rsv3||F.rsv3&&F.name},_reserved:function(F){return this._rsv1&&F.rsv1?[1,this._rsv1]:this._rsv2&&F.rsv2?[2,this._rsv2]:this._rsv3&&F.rsv3?[3,this._rsv3]:!1}};for(var Ct in ct)ot.prototype[Ct]=ct[Ct];var Qt=ot,Ht=function(){},Dt={final:!1,rsv1:!1,rsv2:!1,rsv3:!1,opcode:null,masked:!1,maskingKey:null,lengthBytes:1,length:0,payload:null};for(var _t in Dt)Ht.prototype[_t]=Dt[_t];var pt=Ht,kt=W.exports.Buffer,Gt=function(){this.rsv1=!1,this.rsv2=!1,this.rsv3=!1,this.opcode=null,this.length=0,this._chunks=[]},wr={read:function(){return this.data=this.data||kt.concat(this._chunks,this.length)},pushFrame:function(F){this.rsv1=this.rsv1||F.rsv1,this.rsv2=this.rsv2||F.rsv2,this.rsv3=this.rsv3||F.rsv3,this.opcode===null&&(this.opcode=F.opcode),this._chunks.push(F.payload),this.length+=F.length}};for(var rr in wr)Gt.prototype[rr]=wr[rr];var yr=Gt,Zt=W.exports.Buffer,Xt=E.default,Nr=w.default,ye=Qt,_e=N,Te=pt,De=yr,$e=function(F,R,B){if(_e.apply(this,arguments),this._extensions=new ye,this._stage=0,this._masking=this._options.masking,this._protocols=this._options.protocols||[],this._requireMasking=this._options.requireMasking,this._pingCallbacks={},typeof this._protocols=="string"&&(this._protocols=this._protocols.split(/ *, */)),!!this._request){var H=this._request.headers["sec-websocket-protocol"],Z=this._protocols;H!==void 0&&(typeof H=="string"&&(H=H.split(/ *, */)),this.protocol=H.filter(function(se){return Z.indexOf(se)>=0})[0]),this.version="hybi-"+$e.VERSION}};Nr.inherits($e,_e),$e.VERSION="13",$e.mask=function(F,R,B){if(!R||R.length===0)return F;B=B||0;for(var H=0,Z=F.length-B;H<Z;H++)F[B+H]=F[B+H]^R[H%4];return F},$e.generateAccept=function(F){var R=Xt.createHash("sha1");return R.update(F+$e.GUID),R.digest("base64")},$e.GUID="258EAFA5-E914-47DA-95CA-C5AB0DC85B11";var Ge={FIN:128,MASK:128,RSV1:64,RSV2:32,RSV3:16,OPCODE:15,LENGTH:127,OPCODES:{continuation:0,text:1,binary:2,close:8,ping:9,pong:10},OPCODE_CODES:[0,1,2,8,9,10],MESSAGE_OPCODES:[0,1,2],OPENING_OPCODES:[1,2],ERRORS:{normal_closure:1e3,going_away:1001,protocol_error:1002,unacceptable:1003,encoding_error:1007,policy_violation:1008,too_large:1009,extension_error:1010,unexpected_condition:1011},ERROR_CODES:[1e3,1001,1002,1003,1007,1008,1009,1010,1011],DEFAULT_ERROR_CODE:1e3,MIN_RESERVED_ERROR:3e3,MAX_RESERVED_ERROR:4999,UTF8_MATCH:/^([\x00-\x7F]|[\xC2-\xDF][\x80-\xBF]|\xE0[\xA0-\xBF][\x80-\xBF]|[\xE1-\xEC\xEE\xEF][\x80-\xBF]{2}|\xED[\x80-\x9F][\x80-\xBF]|\xF0[\x90-\xBF][\x80-\xBF]{2}|[\xF1-\xF3][\x80-\xBF]{3}|\xF4[\x80-\x8F][\x80-\xBF]{2})*$/,addExtension:function(F){return this._extensions.add(F),!0},parse:function(F){this._reader.put(F);for(var R=!0;R;)switch(this._stage){case 0:R=this._reader.read(1),R&&this._parseOpcode(R[0]);break;case 1:R=this._reader.read(1),R&&this._parseLength(R[0]);break;case 2:R=this._reader.read(this._frame.lengthBytes),R&&this._parseExtendedLength(R);break;case 3:R=this._reader.read(4),R&&(this._stage=4,this._frame.maskingKey=R);break;case 4:R=this._reader.read(this._frame.length),R&&(this._stage=0,this._emitFrame(R));break;default:R=null}},text:function(F){return this.readyState>1?!1:this.frame(F,"text")},binary:function(F){return this.readyState>1?!1:this.frame(F,"binary")},ping:function(F,R){return this.readyState>1?!1:(F=F||"",R&&(this._pingCallbacks[F]=R),this.frame(F,"ping"))},pong:function(F){return this.readyState>1?!1:(F=F||"",this.frame(F,"pong"))},close:function(F,R){return F=F||"",R=R||this.ERRORS.normal_closure,this.readyState<=0?(this.readyState=3,this.emit("close",new _e.CloseEvent(R,F)),!0):this.readyState===1?(this.readyState=2,this._extensions.close(function(){this.frame(F,"close",R)},this),!0):!1},frame:function(F,R,B){if(this.readyState<=0)return this._queue([F,R,B]);if(this.readyState>2)return!1;F instanceof Array&&(F=Zt.from(F)),typeof F=="number"&&(F=F.toString());var H=new De,Z=typeof F=="string",se,pe;H.rsv1=H.rsv2=H.rsv3=!1,H.opcode=this.OPCODES[R||(Z?"text":"binary")],se=Z?Zt.from(F,"utf8"):F,B&&(pe=se,se=Zt.allocUnsafe(2+pe.length),se.writeUInt16BE(B,0),pe.copy(se,2)),H.data=se;var ve=function(we){var Re=new Te;Re.final=!0,Re.rsv1=we.rsv1,Re.rsv2=we.rsv2,Re.rsv3=we.rsv3,Re.opcode=we.opcode,Re.masked=!!this._masking,Re.length=we.data.length,Re.payload=we.data,Re.masked&&(Re.maskingKey=Xt.randomBytes(4)),this._sendFrame(Re)};return this.MESSAGE_OPCODES.indexOf(H.opcode)>=0?this._extensions.processOutgoingMessage(H,function(we,Re){if(we)return this._fail("extension_error",we.message);ve.call(this,Re)},this):ve.call(this,H),!0},_sendFrame:function(F){var R=F.length,B=R<=125?2:R<=65535?4:10,H=B+(F.masked?4:0),Z=Zt.allocUnsafe(H+R),se=F.masked?this.MASK:0;Z[0]=(F.final?this.FIN:0)|(F.rsv1?this.RSV1:0)|(F.rsv2?this.RSV2:0)|(F.rsv3?this.RSV3:0)|F.opcode,R<=125?Z[1]=se|R:R<=65535?(Z[1]=se|126,Z.writeUInt16BE(R,2)):(Z[1]=se|127,Z.writeUInt32BE(Math.floor(R/4294967296),2),Z.writeUInt32BE(R%4294967296,6)),F.payload.copy(Z,H),F.masked&&(F.maskingKey.copy(Z,B),$e.mask(Z,F.maskingKey,H)),this._write(Z)},_handshakeResponse:function(){var F=this._request.headers["sec-websocket-key"],R=this._request.headers["sec-websocket-version"];if(R!==$e.VERSION)throw new Error("Unsupported WebSocket version: "+R);if(typeof F!="string")throw new Error("Missing handshake request header: Sec-WebSocket-Key");this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Accept",$e.generateAccept(F)),this.protocol&&this._headers.set("Sec-WebSocket-Protocol",this.protocol);var B=this._extensions.generateResponse(this._request.headers["sec-websocket-extensions"]);B&&this._headers.set("Sec-WebSocket-Extensions",B);var H="HTTP/1.1 101 Switching Protocols",Z=[H,this._headers.toString(),""];return Zt.from(Z.join(`\r
`),"utf8")},_shutdown:function(F,R,B){delete this._frame,delete this._message,this._stage=5;var H=this.readyState===1;this.readyState=2,this._extensions.close(function(){H&&this.frame(R,"close",F),this.readyState=3,B&&this.emit("error",new Error(R)),this.emit("close",new _e.CloseEvent(F,R))},this)},_fail:function(F,R){this.readyState>1||this._shutdown(this.ERRORS[F],R,!0)},_parseOpcode:function(F){var R=[this.RSV1,this.RSV2,this.RSV3].map(function(H){return(F&H)===H}),B=this._frame=new Te;if(B.final=(F&this.FIN)===this.FIN,B.rsv1=R[0],B.rsv2=R[1],B.rsv3=R[2],B.opcode=F&this.OPCODE,this._stage=1,!this._extensions.validFrameRsv(B))return this._fail("protocol_error","One or more reserved bits are on: reserved1 = "+(B.rsv1?1:0)+", reserved2 = "+(B.rsv2?1:0)+", reserved3 = "+(B.rsv3?1:0));if(this.OPCODE_CODES.indexOf(B.opcode)<0)return this._fail("protocol_error","Unrecognized frame opcode: "+B.opcode);if(this.MESSAGE_OPCODES.indexOf(B.opcode)<0&&!B.final)return this._fail("protocol_error","Received fragmented control frame: opcode = "+B.opcode);if(this._message&&this.OPENING_OPCODES.indexOf(B.opcode)>=0)return this._fail("protocol_error","Received new data frame but previous continuous frame is unfinished")},_parseLength:function(F){var R=this._frame;if(R.masked=(F&this.MASK)===this.MASK,R.length=F&this.LENGTH,R.length>=0&&R.length<=125){if(this._stage=R.masked?3:4,!this._checkFrameLength())return}else this._stage=2,R.lengthBytes=R.length===126?2:8;if(this._requireMasking&&!R.masked)return this._fail("unacceptable","Received unmasked frame but masking is required")},_parseExtendedLength:function(F){var R=this._frame;if(R.length=this._readUInt(F),this._stage=R.masked?3:4,this.MESSAGE_OPCODES.indexOf(R.opcode)<0&&R.length>125)return this._fail("protocol_error","Received control frame having too long payload: "+R.length);this._checkFrameLength()},_checkFrameLength:function(){var F=this._message?this._message.length:0;return F+this._frame.length>this._maxLength?(this._fail("too_large","WebSocket frame length too large"),!1):!0},_emitFrame:function(F){var R=this._frame,B=R.payload=$e.mask(F,R.maskingKey),H=R.opcode,Z,se,pe,ve,we;if(delete this._frame,H===this.OPCODES.continuation){if(!this._message)return this._fail("protocol_error","Received unexpected continuation frame");this._message.pushFrame(R)}if((H===this.OPCODES.text||H===this.OPCODES.binary)&&(this._message=new De,this._message.pushFrame(R)),R.final&&this.MESSAGE_OPCODES.indexOf(H)>=0)return this._emitMessage(this._message);H===this.OPCODES.close&&(se=B.length>=2?B.readUInt16BE(0):null,pe=B.length>2?this._encode(B.slice(2)):null,B.length!==0&&!(se!==null&&se>=this.MIN_RESERVED_ERROR&&se<=this.MAX_RESERVED_ERROR)&&this.ERROR_CODES.indexOf(se)<0&&(se=this.ERRORS.protocol_error),(B.length>125||B.length>2&&!pe)&&(se=this.ERRORS.protocol_error),this._shutdown(se||this.DEFAULT_ERROR_CODE,pe||"")),H===this.OPCODES.ping&&(this.frame(B,"pong"),this.emit("ping",new _e.PingEvent(B.toString()))),H===this.OPCODES.pong&&(ve=this._pingCallbacks,Z=this._encode(B),we=ve[Z],delete ve[Z],we&&we(),this.emit("pong",new _e.PongEvent(B.toString())))},_emitMessage:function(R){var R=this._message;R.read(),delete this._message,this._extensions.processIncomingMessage(R,function(B,H){if(B)return this._fail("extension_error",B.message);var Z=H.data;if(H.opcode===this.OPCODES.text&&(Z=this._encode(Z)),Z===null)return this._fail("encoding_error","Could not decode a text frame as UTF-8");this.emit("message",new _e.MessageEvent(Z))},this)},_encode:function(F){try{var R=F.toString("binary",0,F.length);if(!this.UTF8_MATCH.test(R))return null}catch{}return F.toString("utf8",0,F.length)},_readUInt:function(F){return F.length===2?F.readUInt16BE(0):F.readUInt32BE(0)*4294967296+F.readUInt32BE(4)}};for(var Ze in Ge)$e.prototype[Ze]=Ge[Ze];var Ye=$e,At=W.exports.Buffer,Kt=O.default.Stream,er=C.default,nr=w.default,ur=N,mr=ue,Wt=lt,hr={"ws:":80,"wss:":443},tr=function(F,R,B){this._client=F,this._http=new Wt("response"),this._origin=typeof F.url=="object"?F.url:er.parse(F.url),this._url=typeof R=="object"?R:er.parse(R),this._options=B||{},this._state=0,this.readable=this.writable=!0,this._paused=!1,this._headers=new mr,this._headers.set("Host",this._origin.host),this._headers.set("Connection","keep-alive"),this._headers.set("Proxy-Connection","keep-alive");var H=this._url.auth&&At.from(this._url.auth,"utf8").toString("base64");H&&this._headers.set("Proxy-Authorization","Basic "+H)};nr.inherits(tr,Kt);var ar={setHeader:function(F,R){return this._state!==0?!1:(this._headers.set(F,R),!0)},start:function(){if(this._state!==0)return!1;this._state=1;var F=this._origin,R=F.port||hr[F.protocol],B="CONNECT "+F.hostname+":"+R+" HTTP/1.1",H=[B,this._headers.toString(),""];return this.emit("data",At.from(H.join(`\r
`),"utf8")),!0},pause:function(){this._paused=!0},resume:function(){this._paused=!1,this.emit("drain")},write:function(F){if(!this.writable)return!1;if(this._http.parse(F),!this._http.isComplete())return!this._paused;if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,this.statusCode===200)this.emit("connect",new ur.ConnectEvent);else{var R="Can't establish a connection to the server at "+this._origin.href;this.emit("error",new Error(R))}return this.end(),!this._paused},end:function(F){this.writable&&(F!==void 0&&this.write(F),this.readable=this.writable=!1,this.emit("close"),this.emit("end"))},destroy:function(){this.end()}};for(var vr in ar)tr.prototype[vr]=ar[vr];var Jr=tr,_r=W.exports.Buffer,an=E.default,jr=C.default,fn=w.default,xr=lt,hn=N,Dr=Ye,zr=Jr,br=function(F,R){this.version="hybi-"+Dr.VERSION,Dr.call(this,null,F,R),this.readyState=-1,this._key=br.generateKey(),this._accept=Dr.generateAccept(this._key),this._http=new xr("response");var B=jr.parse(this.url),H=B.auth&&_r.from(B.auth,"utf8").toString("base64");if(this.VALID_PROTOCOLS.indexOf(B.protocol)<0)throw new Error(this.url+" is not a valid WebSocket URL");this._pathname=(B.pathname||"/")+(B.search||""),this._headers.set("Host",B.host),this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Key",this._key),this._headers.set("Sec-WebSocket-Version",Dr.VERSION),this._protocols.length>0&&this._headers.set("Sec-WebSocket-Protocol",this._protocols.join(", ")),H&&this._headers.set("Authorization","Basic "+H)};fn.inherits(br,Dr),br.generateKey=function(){return an.randomBytes(16).toString("base64")};var sn={VALID_PROTOCOLS:["ws:","wss:"],proxy:function(F,R){return new zr(this,F,R)},start:function(){return this.readyState!==-1?!1:(this._write(this._handshakeRequest()),this.readyState=0,!0)},parse:function(F){if(this.readyState!==3){if(this.readyState>0)return Dr.prototype.parse.call(this,F);this._http.parse(F),this._http.isComplete()&&(this._validateHandshake(),this.readyState!==3&&(this._open(),this.parse(this._http.body)))}},_handshakeRequest:function(){var F=this._extensions.generateOffer();F&&this._headers.set("Sec-WebSocket-Extensions",F);var R="GET "+this._pathname+" HTTP/1.1",B=[R,this._headers.toString(),""];return _r.from(B.join(`\r
`),"utf8")},_failHandshake:function(F){F="Error during WebSocket handshake: "+F,this.readyState=3,this.emit("error",new Error(F)),this.emit("close",new hn.CloseEvent(this.ERRORS.protocol_error,F))},_validateHandshake:function(){if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,this._http.error)return this._failHandshake(this._http.error.message);if(this._http.statusCode!==101)return this._failHandshake("Unexpected response code: "+this._http.statusCode);var F=this._http.headers,R=F.upgrade||"",B=F.connection||"",H=F["sec-websocket-accept"]||"",Z=F["sec-websocket-protocol"]||"";if(R==="")return this._failHandshake("'Upgrade' header is missing");if(R.toLowerCase()!=="websocket")return this._failHandshake("'Upgrade' header value is not 'WebSocket'");if(B==="")return this._failHandshake("'Connection' header is missing");if(B.toLowerCase()!=="upgrade")return this._failHandshake("'Connection' header value is not 'Upgrade'");if(H!==this._accept)return this._failHandshake("Sec-WebSocket-Accept mismatch");if(this.protocol=null,Z!==""){if(this._protocols.indexOf(Z)<0)return this._failHandshake("Sec-WebSocket-Protocol mismatch");this.protocol=Z}try{this._extensions.activate(this.headers["sec-websocket-extensions"])}catch(se){return this._failHandshake(se.message)}}};for(var Yr in sn)br.prototype[Yr]=sn[Yr];var gn=br,Lr=W.exports.Buffer,Ur=N,mn=w.default,Qr=function(F,R,B){Ur.apply(this,arguments),this._stage=0,this.version="hixie-75",this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("WebSocket-Origin",this._request.headers.origin),this._headers.set("WebSocket-Location",this.url)};mn.inherits(Qr,Ur);var Xr={close:function(){return this.readyState===3?!1:(this.readyState=3,this.emit("close",new Ur.CloseEvent(null,null)),!0)},parse:function(F){this.readyState>1||(this._reader.put(F),this._reader.eachByte(function(R){var B;switch(this._stage){case-1:this._body.push(R),this._sendHandshakeBody();break;case 0:this._parseLeadingByte(R);break;case 1:if(this._length=(R&127)+128*this._length,this._closing&&this._length===0)return this.close();(R&128)!==128&&(this._length===0?this._stage=0:(this._skipped=0,this._stage=2));break;case 2:if(R===255)this._stage=0,B=Lr.from(this._buffer).toString("utf8",0,this._buffer.length),this.emit("message",new Ur.MessageEvent(B));else if(this._length)this._skipped+=1,this._skipped===this._length&&(this._stage=0);else if(this._buffer.push(R),this._buffer.length>this._maxLength)return this.close();break}},this))},frame:function(F){if(this.readyState===0)return this._queue([F]);if(this.readyState>1)return!1;typeof F!="string"&&(F=F.toString());var R=Lr.byteLength(F),B=Lr.allocUnsafe(R+2);return B[0]=0,B.write(F,1),B[B.length-1]=255,this._write(B),!0},_handshakeResponse:function(){var F="HTTP/1.1 101 Web Socket Protocol Handshake",R=[F,this._headers.toString(),""];return Lr.from(R.join(`\r
`),"utf8")},_parseLeadingByte:function(F){(F&128)===128?(this._length=0,this._stage=1):(delete this._length,delete this._skipped,this._buffer=[],this._stage=2)}};for(var yn in Xr)Qr.prototype[yn]=Xr[yn];var qr=Qr,Br=W.exports.Buffer,Hr=N,Fr=qr,Zr=E.default,Ae=w.default,Fe=function(F){return parseInt((F.match(/[0-9]/g)||[]).join(""),10)},We=function(F){return(F.match(/ /g)||[]).length},at=function(F,R,B){Fr.apply(this,arguments),this._stage=-1,this._body=[],this.version="hixie-76",this._headers.clear(),this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Origin",this._request.headers.origin),this._headers.set("Sec-WebSocket-Location",this.url)};Ae.inherits(at,Fr);var ir={BODY_SIZE:8,start:function(){return Fr.prototype.start.call(this)?(this._started=!0,this._sendHandshakeBody(),!0):!1},close:function(){return this.readyState===3?!1:(this.readyState===1&&this._write(Br.from([255,0])),this.readyState=3,this.emit("close",new Hr.CloseEvent(null,null)),!0)},_handshakeResponse:function(){var ve=this._request.headers,F=ve["sec-websocket-key1"],R=ve["sec-websocket-key2"];if(!F)throw new Error("Missing required header: Sec-WebSocket-Key1");if(!R)throw new Error("Missing required header: Sec-WebSocket-Key2");var B=Fe(F),H=We(F),Z=Fe(R),se=We(R);if(B%H!==0||Z%se!==0)throw new Error("Client sent invalid Sec-WebSocket-Key headers");this._keyValues=[B/H,Z/se];var pe="HTTP/1.1 101 WebSocket Protocol Handshake",ve=[pe,this._headers.toString(),""];return Br.from(ve.join(`\r
`),"binary")},_handshakeSignature:function(){if(this._body.length<this.BODY_SIZE)return null;var F=Zr.createHash("md5"),R=Br.allocUnsafe(8+this.BODY_SIZE);return R.writeUInt32BE(this._keyValues[0],0),R.writeUInt32BE(this._keyValues[1],4),Br.from(this._body).copy(R,8,0,this.BODY_SIZE),F.update(R),Br.from(F.digest("binary"),"binary")},_sendHandshakeBody:function(){if(this._started){var F=this._handshakeSignature();F&&(this._write(F),this._stage=0,this._open(),this._body.length>this.BODY_SIZE&&this.parse(this._body.slice(this.BODY_SIZE)))}},_parseLeadingByte:function(F){if(F!==255)return Fr.prototype._parseLeadingByte.call(this,F);this._closing=!0,this._length=0,this._stage=1}};for(var cr in ir)at.prototype[cr]=ir[cr];var Er=at,pr=w.default,r=lt,b=N,S=qr,le=Er,et=Ye,ln=function(F){b.call(this,null,null,F),this._http=new r("request")};pr.inherits(ln,b);var Tn={EVENTS:["open","message","error","close","ping","pong"],_bindEventListeners:function(){this.messages.on("error",function(){}),this.on("error",function(){})},parse:function(F){if(this._delegate)return this._delegate.parse(F);if(this._http.parse(F),!!this._http.isComplete()){this.method=this._http.method,this.url=this._http.url,this.headers=this._http.headers,this.body=this._http.body;var R=this;this._delegate=ln.http(this,this._options),this._delegate.messages=this.messages,this._delegate.io=this.io,this._open(),this.EVENTS.forEach(function(B){this._delegate.on(B,function(H){R.emit(B,H)})},this),this.protocol=this._delegate.protocol,this.version=this._delegate.version,this.parse(this._http.body),this.emit("connect",new b.ConnectEvent)}},_open:function(){this.__queue.forEach(function(F){this._delegate[F[0]].apply(this._delegate,F[1])},this),this.__queue=[]}};["addExtension","setHeader","start","frame","text","binary","ping","close"].forEach(function(F){Tn[F]=function(){return this._delegate?this._delegate[F].apply(this._delegate,arguments):(this.__queue.push([F,arguments]),!0)}});for(var ts in Tn)ln.prototype[ts]=Tn[ts];ln.isSecureRequest=function(F){if(F.connection&&F.connection.authorized!==void 0||F.socket&&F.socket.secure)return!0;var R=F.headers;return R?R.https==="on"||R["x-forwarded-ssl"]==="on"||R["x-forwarded-scheme"]==="https"||R["x-forwarded-proto"]==="https":!1},ln.determineUrl=function(F){var R=this.isSecureRequest(F)?"wss:":"ws:";return R+"//"+F.headers.host+F.url},ln.http=function(F,R){R=R||{},R.requireMasking===void 0&&(R.requireMasking=!0);var B=F.headers,H=B["sec-websocket-version"],Z=B["sec-websocket-key"],se=B["sec-websocket-key1"],pe=B["sec-websocket-key2"],ve=this.determineUrl(F);return H||Z?new et(F,ve,R):se||pe?new le(F,ve,R):new S(F,ve,R)};var Xu=ln,rs=N,Zu=gn,Wi=Xu,ec={client:function(F,R){return R=R||{},R.masking===void 0&&(R.masking=!0),new Zu(F,R)},server:function(F){return F=F||{},F.requireMasking===void 0&&(F.requireMasking=!0),new Wi(F)},http:function(){return Wi.http.apply(Wi,arguments)},isSecureRequest:function(F){return Wi.isSecureRequest(F)},isWebSocket:function(F){return rs.isWebSocket(F)},validateOptions:function(F,R){rs.validateOptions(F,R)}},Ji=ec,Bn=function(F,R){this.type=F;for(var B in R)this[B]=R[B]};Bn.prototype.initEvent=function(F,R,B){this.type=F,this.bubbles=R,this.cancelable=B},Bn.prototype.stopPropagation=function(){},Bn.prototype.preventDefault=function(){},Bn.CAPTURING_PHASE=1,Bn.AT_TARGET=2,Bn.BUBBLING_PHASE=3;var jo=Bn,tc=jo,rc={onopen:null,onmessage:null,onerror:null,onclose:null,addEventListener:function(F,R,B){this.on(F,R)},removeEventListener:function(F,R,B){this.removeListener(F,R)},dispatchEvent:function(F){F.target=F.currentTarget=this,F.eventPhase=tc.AT_TARGET,this["on"+F.type]&&this["on"+F.type](F),this.emit(F.type,F)}},ns=rc,nc=O.default.Stream,ic=w.default,oc=Ji,is=ns,zi=jo,dr=function(F){F=F||{},oc.validateOptions(F,["headers","extensions","maxLength","ping","proxy","tls","ca"]),this.readable=this.writable=!0;var R=F.headers;if(R)for(var B in R)this._driver.setHeader(B,R[B]);var H=F.extensions;H&&[].concat(H).forEach(this._driver.addExtension,this._driver),this._ping=F.ping,this._pingId=0,this.readyState=dr.CONNECTING,this.bufferedAmount=0,this.protocol="",this.url=this._driver.url,this.version=this._driver.version;var Z=this;this._driver.on("open",function(se){Z._open()}),this._driver.on("message",function(se){Z._receiveMessage(se.data)}),this._driver.on("close",function(se){Z._beginClose(se.reason,se.code)}),this._driver.on("error",function(se){Z._emitError(se.message)}),this.on("error",function(){}),this._driver.messages.on("drain",function(){Z.emit("drain")}),this._ping&&(this._pingTimer=setInterval(function(){Z._pingId+=1,Z.ping(Z._pingId.toString())},this._ping*1e3)),this._configureStream(),this._proxy||(this._stream.pipe(this._driver.io),this._driver.io.pipe(this._stream))};ic.inherits(dr,nc),dr.CONNECTING=0,dr.OPEN=1,dr.CLOSING=2,dr.CLOSED=3,dr.CLOSE_TIMEOUT=3e4;var os={write:function(F){return this.send(F)},end:function(F){F!==void 0&&this.send(F),this.close()},pause:function(){return this._driver.messages.pause()},resume:function(){return this._driver.messages.resume()},send:function(F){return this.readyState>dr.OPEN?!1:(F instanceof Buffer||(F=String(F)),this._driver.messages.write(F))},ping:function(F,R){return this.readyState>dr.OPEN?!1:this._driver.ping(F,R)},close:function(F,R){if(F===void 0&&(F=1e3),R===void 0&&(R=""),F!==1e3&&(F<3e3||F>4999))throw new Error("Failed to execute 'close' on WebSocket: The code must be either 1000, or between 3000 and 4999. "+F+" is neither.");if(this.readyState<dr.CLOSING){var B=this;this._closeTimer=setTimeout(function(){B._beginClose("",1006)},dr.CLOSE_TIMEOUT)}this.readyState!==dr.CLOSED&&(this.readyState=dr.CLOSING),this._driver.close(R,F)},_configureStream:function(){var F=this;this._stream.setTimeout(0),this._stream.setNoDelay(!0),["close","end"].forEach(function(R){this._stream.on(R,function(){F._finalizeClose()})},this),this._stream.on("error",function(R){F._emitError("Network error: "+F.url+": "+R.message),F._finalizeClose()})},_open:function(){if(this.readyState===dr.CONNECTING){this.readyState=dr.OPEN,this.protocol=this._driver.protocol||"";var F=new zi("open");F.initEvent("open",!1,!1),this.dispatchEvent(F)}},_receiveMessage:function(F){if(this.readyState>dr.OPEN)return!1;this.readable&&this.emit("data",F);var R=new zi("message",{data:F});R.initEvent("message",!1,!1),this.dispatchEvent(R)},_emitError:function(F){if(!(this.readyState>=dr.CLOSING)){var R=new zi("error",{message:F});R.initEvent("error",!1,!1),this.dispatchEvent(R)}},_beginClose:function(F,R){this.readyState!==dr.CLOSED&&(this.readyState=dr.CLOSING,this._closeParams=[F,R],this._stream&&(this._stream.destroy(),this._stream.readable||this._finalizeClose()))},_finalizeClose:function(){if(this.readyState!==dr.CLOSED){this.readyState=dr.CLOSED,this._closeTimer&&clearTimeout(this._closeTimer),this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end(),this.readable&&this.emit("end"),this.readable=this.writable=!1;var F=this._closeParams?this._closeParams[0]:"",R=this._closeParams?this._closeParams[1]:1006,B=new zi("close",{code:R,reason:F});B.initEvent("close",!1,!1),this.dispatchEvent(B)}}};for(var as in os)dr.prototype[as]=os[as];for(var ss in is)dr.prototype[ss]=is[ss];var Lo=dr,ac=w.default,sc=x.default,ls=j.default,us=C.default,lc=Ji,cs=Lo,uc={"http:":80,"https:":443,"ws:":80,"wss:":443},ps=["https:","wss:"],Yi=function(F,R,B){B=B||{},this.url=F,this._driver=lc.client(this.url,{maxLength:B.maxLength,protocols:R}),["open","error"].forEach(function(Ke){this._driver.on(Ke,function(){Ue.headers=Ue._driver.headers,Ue.statusCode=Ue._driver.statusCode})},this);var H=B.proxy||{},Z=us.parse(H.origin||this.url),se=Z.port||uc[Z.protocol],pe=ps.indexOf(Z.protocol)>=0,ve=function(){Ue._onConnect()},we=B.net||{},Re=B.tls||{},qe=H.origin?H.tls||{}:Re,Ue=this;we.host=qe.host=Z.hostname,we.port=qe.port=se,Re.ca=Re.ca||B.ca,qe.servername=qe.servername||Z.hostname,this._stream=pe?ls.connect(qe,ve):sc.connect(we,ve),H.origin&&this._configureProxy(H,Re),cs.call(this,B)};ac.inherits(Yi,cs),Yi.prototype._onConnect=function(){var F=this._proxy||this._driver;F.start()},Yi.prototype._configureProxy=function(F,R){var B=us.parse(this.url),H=ps.indexOf(B.protocol)>=0,Z=this,se;if(this._proxy=this._driver.proxy(F.origin),F.headers)for(se in F.headers)this._proxy.setHeader(se,F.headers[se]);this._proxy.pipe(this._stream,{end:!1}),this._stream.pipe(this._proxy),this._proxy.on("connect",function(){if(H){var pe={socket:Z._stream,servername:B.hostname};for(se in R)pe[se]=R[se];Z._stream=ls.connect(pe),Z._configureStream()}Z._driver.io.pipe(Z._stream),Z._stream.pipe(Z._driver.io),Z._driver.start()}),this._proxy.on("error",function(pe){Z._driver.emit("error",pe)})};var cc=Yi,pc=O.default.Stream,dc=w.default,fc=Ji,hc=ue,Qn=Lo,ds=ns,fs=jo,fi=function(F,R,B){this.writable=!0,B=B||{},this._stream=R.socket,this._ping=B.ping||this.DEFAULT_PING,this._retry=B.retry||this.DEFAULT_RETRY;var H=fc.isSecureRequest(F)?"https:":"http:";this.url=H+"//"+F.headers.host+F.url,this.lastEventId=F.headers["last-event-id"]||"",this.readyState=Qn.CONNECTING;var Z=new hc,se=this;if(B.headers)for(var pe in B.headers)Z.set(pe,B.headers[pe]);if(!(!this._stream||!this._stream.writable)){e.nextTick(function(){se._open()}),this._stream.setTimeout(0),this._stream.setNoDelay(!0);var ve=`HTTP/1.1 200 OK\r
Content-Type: text/event-stream\r
Cache-Control: no-cache, no-store\r
Connection: close\r
`+Z.toString()+`\r
retry: `+Math.floor(this._retry*1e3)+`\r
\r
`;this._write(ve),this._stream.on("drain",function(){se.emit("drain")}),this._ping&&(this._pingTimer=setInterval(function(){se.ping()},this._ping*1e3)),["error","end"].forEach(function(we){se._stream.on(we,function(){se.close()})})}};dc.inherits(fi,pc),fi.isEventSource=function(F){if(F.method!=="GET")return!1;var R=(F.headers.accept||"").split(/\s*,\s*/);return R.indexOf("text/event-stream")>=0};var hs={DEFAULT_PING:10,DEFAULT_RETRY:5,_write:function(F){if(!this.writable)return!1;try{return this._stream.write(F,"utf8")}catch{return!1}},_open:function(){if(this.readyState===Qn.CONNECTING){this.readyState=Qn.OPEN;var F=new fs("open");F.initEvent("open",!1,!1),this.dispatchEvent(F)}},write:function(F){return this.send(F)},end:function(F){F!==void 0&&this.write(F),this.close()},send:function(F,R){if(this.readyState>Qn.OPEN)return!1;F=String(F).replace(/(\r\n|\r|\n)/g,"$1data: "),R=R||{};var B="";return R.event&&(B+="event: "+R.event+`\r
`),R.id&&(B+="id: "+R.id+`\r
`),B+="data: "+F+`\r
\r
`,this._write(B)},ping:function(){return this._write(`:\r
\r
`)},close:function(){if(this.readyState>Qn.OPEN)return!1;this.readyState=Qn.CLOSED,this.writable=!1,this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end();var F=new fs("close");return F.initEvent("close",!1,!1),this.dispatchEvent(F),!0}};for(var gs in hs)fi.prototype[gs]=hs[gs];for(var ys in ds)fi.prototype[ys]=ds[ys];var gc=fi,mc=w.default,qo=Ji,vs=Lo,An=function(F,R,B,H,Z){Z=Z||{},this._stream=R,this._driver=qo.http(F,{maxLength:Z.maxLength,protocols:H});var se=this;if(!(!this._stream||!this._stream.writable)){if(!this._stream.readable)return this._stream.end();var pe=function(){se._stream.removeListener("data",pe)};this._stream.on("data",pe),vs.call(this,Z),e.nextTick(function(){se._driver.start(),se._driver.io.write(B)})}};mc.inherits(An,vs),An.isWebSocket=function(F){return qo.isWebSocket(F)},An.validateOptions=function(F,R){qo.validateOptions(F,R)},An.WebSocket=An,An.Client=cc,An.EventSource=gc;var yc=An,_s={};const vc=(F,R)=>R.some(B=>F instanceof B);let bs,Es;function _c(){return bs||(bs=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bc(){return Es||(Es=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ss=new WeakMap,Fo=new WeakMap,Os=new WeakMap,Mo=new WeakMap,Uo=new WeakMap;function Ec(F){const R=new Promise((B,H)=>{const Z=()=>{F.removeEventListener("success",se),F.removeEventListener("error",pe)},se=()=>{B(vn(F.result)),Z()},pe=()=>{H(F.error),Z()};F.addEventListener("success",se),F.addEventListener("error",pe)});return R.then(B=>{B instanceof IDBCursor&&Ss.set(B,F)}).catch(()=>{}),Uo.set(R,F),R}function Sc(F){if(Fo.has(F))return;const R=new Promise((B,H)=>{const Z=()=>{F.removeEventListener("complete",se),F.removeEventListener("error",pe),F.removeEventListener("abort",pe)},se=()=>{B(),Z()},pe=()=>{H(F.error||new DOMException("AbortError","AbortError")),Z()};F.addEventListener("complete",se),F.addEventListener("error",pe),F.addEventListener("abort",pe)});Fo.set(F,R)}let Bo={get(F,R,B){if(F instanceof IDBTransaction){if(R==="done")return Fo.get(F);if(R==="objectStoreNames")return F.objectStoreNames||Os.get(F);if(R==="store")return B.objectStoreNames[1]?void 0:B.objectStore(B.objectStoreNames[0])}return vn(F[R])},set(F,R,B){return F[R]=B,!0},has(F,R){return F instanceof IDBTransaction&&(R==="done"||R==="store")?!0:R in F}};function Oc(F){Bo=F(Bo)}function wc(F){return F===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(R,...B){const H=F.call(Qi(this),R,...B);return Os.set(H,R.sort?R.sort():[R]),vn(H)}:bc().includes(F)?function(...R){return F.apply(Qi(this),R),vn(Ss.get(this))}:function(...R){return vn(F.apply(Qi(this),R))}}function Tc(F){return typeof F=="function"?wc(F):(F instanceof IDBTransaction&&Sc(F),vc(F,_c())?new Proxy(F,Bo):F)}function vn(F){if(F instanceof IDBRequest)return Ec(F);if(Mo.has(F))return Mo.get(F);const R=Tc(F);return R!==F&&(Mo.set(F,R),Uo.set(R,F)),R}const Qi=F=>Uo.get(F);function Ac(F,R,{blocked:B,upgrade:H,blocking:Z,terminated:se}={}){const pe=indexedDB.open(F,R),ve=vn(pe);return H&&pe.addEventListener("upgradeneeded",we=>{H(vn(pe.result),we.oldVersion,we.newVersion,vn(pe.transaction),we)}),B&&pe.addEventListener("blocked",we=>B(we.oldVersion,we.newVersion,we)),ve.then(we=>{se&&we.addEventListener("close",()=>se()),Z&&we.addEventListener("versionchange",Re=>Z(Re.oldVersion,Re.newVersion,Re))}).catch(()=>{}),ve}function Rc(F,{blocked:R}={}){const B=indexedDB.deleteDatabase(F);return R&&B.addEventListener("blocked",H=>R(H.oldVersion,H)),vn(B).then(()=>{})}const Cc=["get","getKey","getAll","getAllKeys","count"],Ic=["put","add","delete","clear"],Vo=new Map;function ws(F,R){if(!(F instanceof IDBDatabase&&!(R in F)&&typeof R=="string"))return;if(Vo.get(R))return Vo.get(R);const B=R.replace(/FromIndex$/,""),H=R!==B,Z=Ic.includes(B);if(!(B in(H?IDBIndex:IDBObjectStore).prototype)||!(Z||Cc.includes(B)))return;const se=async function(pe,...ve){const we=this.transaction(pe,Z?"readwrite":"readonly");let Re=we.store;return H&&(Re=Re.index(ve.shift())),(await Promise.all([Re[B](...ve),Z&&we.done]))[0]};return Vo.set(R,se),se}Oc(F=>({...F,get:(R,B,H)=>ws(R,B)||F.get(R,B,H),has:(R,B)=>!!ws(R,B)||F.has(R,B)}));var Pc=Object.freeze({__proto__:null,deleteDB:Rc,openDB:Ac,unwrap:Qi,wrap:vn}),Nc=G(Pc);(function(F){Object.defineProperty(F,"__esModule",{value:!0});var R=q.default,B=k.default,H=D.default,Z=Nc;class se{constructor(Xe){this.container=Xe}getPlatformInfoString(){return this.container.getProviders().map(rt=>{if(pe(rt)){const ut=rt.getImmediate();return`${ut.library}/${ut.version}`}else return null}).filter(rt=>rt).join(" ")}}function pe(tt){return tt.getComponent()?.type==="VERSION"}const ve="@firebase/app",we="0.14.0";const Re=new B.Logger("@firebase/app"),qe="@firebase/app-compat",Ue="@firebase/analytics-compat",Ke="@firebase/analytics",it="@firebase/app-check-compat",ft="@firebase/app-check",Bt="@firebase/auth",Sr="@firebase/auth-compat",Fn="@firebase/database",ci="@firebase/data-connect",Vi="@firebase/database-compat",za="@firebase/functions",_g="@firebase/functions-compat",bg="@firebase/installations",Eg="@firebase/installations-compat",Sg="@firebase/messaging",Og="@firebase/messaging-compat",wg="@firebase/performance",Tg="@firebase/performance-compat",Ag="@firebase/remote-config",Rg="@firebase/remote-config-compat",Cg="@firebase/storage",Ig="@firebase/storage-compat",Pg="@firebase/firestore",Ng="@firebase/ai",xg="@firebase/firestore-compat",Dg="firebase",kg="12.0.0";const $i="[DEFAULT]",jg={[ve]:"fire-core",[qe]:"fire-core-compat",[Ke]:"fire-analytics",[Ue]:"fire-analytics-compat",[ft]:"fire-app-check",[it]:"fire-app-check-compat",[Bt]:"fire-auth",[Sr]:"fire-auth-compat",[Fn]:"fire-rtdb",[ci]:"fire-data-connect",[Vi]:"fire-rtdb-compat",[za]:"fire-fn",[_g]:"fire-fn-compat",[bg]:"fire-iid",[Eg]:"fire-iid-compat",[Sg]:"fire-fcm",[Og]:"fire-fcm-compat",[wg]:"fire-perf",[Tg]:"fire-perf-compat",[Ag]:"fire-rc",[Rg]:"fire-rc-compat",[Cg]:"fire-gcs",[Ig]:"fire-gcs-compat",[Pg]:"fire-fst",[xg]:"fire-fst-compat",[Ng]:"fire-vertex","fire-js":"fire-js",[Dg]:"fire-js-all"};const Mn=new Map,pi=new Map,di=new Map;function Ya(tt,Xe){try{tt.container.addComponent(Xe)}catch(rt){Re.debug(`Component ${Xe.name} failed to register with FirebaseApp ${tt.name}`,rt)}}function Lg(tt,Xe){tt.container.addOrOverwriteComponent(Xe)}function ko(tt){const Xe=tt.name;if(di.has(Xe))return Re.debug(`There were multiple attempts to register component ${Xe}.`),!1;di.set(Xe,tt);for(const rt of Mn.values())Ya(rt,tt);for(const rt of pi.values())Ya(rt,tt);return!0}function Uu(tt,Xe){const rt=tt.container.getProvider("heartbeat").getImmediate({optional:!0});return rt&&rt.triggerHeartbeat(),tt.container.getProvider(Xe)}function qg(tt,Xe,rt=$i){Uu(tt,Xe).clearInstance(rt)}function Qa(tt){return tt.options!==void 0}function Bu(tt){return Qa(tt)?!1:"authIdToken"in tt||"appCheckToken"in tt||"releaseOnDeref"in tt||"automaticDataCollectionEnabled"in tt}function Fg(tt){return tt==null?!1:tt.settings!==void 0}function Mg(){di.clear()}const Ug={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wr=new H.ErrorFactory("app","Firebase",Ug);class Vu{constructor(Xe,rt,ut){this._isDeleted=!1,this._options={...Xe},this._config={...rt},this._name=rt.name,this._automaticDataCollectionEnabled=rt.automaticDataCollectionEnabled,this._container=ut,this.container.addComponent(new R.Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Xe){this.checkDestroyed(),this._automaticDataCollectionEnabled=Xe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Xe){this._isDeleted=Xe}checkDestroyed(){if(this.isDeleted)throw Wr.create("app-deleted",{appName:this._name})}}function $u(tt,Xe){const rt=H.base64Decode(tt.split(".")[1]);if(rt===null){console.error(`FirebaseServerApp ${Xe} is invalid: second part could not be parsed.`);return}if(JSON.parse(rt).exp===void 0){console.error(`FirebaseServerApp ${Xe} is invalid: expiration claim could not be parsed`);return}const $t=JSON.parse(rt).exp*1e3,Or=new Date().getTime();$t-Or<=0&&console.error(`FirebaseServerApp ${Xe} is invalid: the token has expired.`)}class Bg extends Vu{constructor(Xe,rt,ut,$t){const Or=rt.automaticDataCollectionEnabled!==void 0?rt.automaticDataCollectionEnabled:!0,Pr={name:ut,automaticDataCollectionEnabled:Or};if(Xe.apiKey!==void 0)super(Xe,Pr,$t);else{const Un=Xe;super(Un.options,Pr,$t)}this._serverConfig={automaticDataCollectionEnabled:Or,...rt},this._serverConfig.authIdToken&&$u(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&$u(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,rt.releaseOnDeref=void 0,Gi(ve,we,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(Xe){this.isDeleted||(this._refCount++,Xe!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(Xe,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Hu(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Wr.create("server-app-deleted")}}const Vg=kg;function Gu(tt,Xe={}){let rt=tt;typeof Xe!="object"&&(Xe={name:Xe});const ut={name:$i,automaticDataCollectionEnabled:!0,...Xe},$t=ut.name;if(typeof $t!="string"||!$t)throw Wr.create("bad-app-name",{appName:String($t)});if(rt||(rt=H.getDefaultAppConfig()),!rt)throw Wr.create("no-options");const Or=Mn.get($t);if(Or){if(H.deepEqual(rt,Or.options)&&H.deepEqual(ut,Or.config))return Or;throw Wr.create("duplicate-app",{appName:$t})}const Pr=new R.ComponentContainer($t);for(const Ki of di.values())Pr.addComponent(Ki);const Un=new Vu(rt,ut,Pr);return Mn.set($t,Un),Un}function $g(tt,Xe={}){if(H.isBrowser()&&!H.isWebWorker())throw Wr.create("invalid-server-app-environment");let rt,ut=Xe||{};if(tt&&(Qa(tt)?rt=tt.options:Bu(tt)?ut=tt:rt=tt),ut.automaticDataCollectionEnabled===void 0&&(ut.automaticDataCollectionEnabled=!0),rt||(rt=H.getDefaultAppConfig()),!rt)throw Wr.create("no-options");const $t={...ut,...rt};$t.releaseOnDeref!==void 0&&delete $t.releaseOnDeref;const Or=Za=>[...Za].reduce((im,om)=>Math.imul(31,im)+om.charCodeAt(0)|0,0);if(ut.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Wr.create("finalization-registry-not-supported",{});const Pr=""+Or(JSON.stringify($t)),Un=pi.get(Pr);if(Un)return Un.incRefCount(ut.releaseOnDeref),Un;const Ki=new R.ComponentContainer(Pr);for(const Za of di.values())Ki.addComponent(Za);const Qu=new Bg(rt,ut,Pr,Ki);return pi.set(Pr,Qu),Qu}function Gg(tt=$i){const Xe=Mn.get(tt);if(!Xe&&tt===$i&&H.getDefaultAppConfig())return Gu();if(!Xe)throw Wr.create("no-app",{appName:tt});return Xe}function Hg(){return Array.from(Mn.values())}async function Hu(tt){let Xe=!1;const rt=tt.name;Mn.has(rt)?(Xe=!0,Mn.delete(rt)):pi.has(rt)&&tt.decRefCount()<=0&&(pi.delete(rt),Xe=!0),Xe&&(await Promise.all(tt.container.getProviders().map(ut=>ut.delete())),tt.isDeleted=!0)}function Gi(tt,Xe,rt){let ut=jg[tt]??tt;rt&&(ut+=`-${rt}`);const $t=ut.match(/\s|\//),Or=Xe.match(/\s|\//);if($t||Or){const Pr=[`Unable to register library "${ut}" with version "${Xe}":`];$t&&Pr.push(`library name "${ut}" contains illegal characters (whitespace or "/")`),$t&&Or&&Pr.push("and"),Or&&Pr.push(`version name "${Xe}" contains illegal characters (whitespace or "/")`),Re.warn(Pr.join(" "));return}ko(new R.Component(`${ut}-version`,()=>({library:ut,version:Xe}),"VERSION"))}function Kg(tt,Xe){if(tt!==null&&typeof tt!="function")throw Wr.create("invalid-log-argument");B.setUserLogHandler(tt,Xe)}function Wg(tt){B.setLogLevel(tt)}const Jg="firebase-heartbeat-database",zg=1,Hi="firebase-heartbeat-store";let Xa=null;function Ku(){return Xa||(Xa=Z.openDB(Jg,zg,{upgrade:(tt,Xe)=>{switch(Xe){case 0:try{tt.createObjectStore(Hi)}catch(rt){console.warn(rt)}}}}).catch(tt=>{throw Wr.create("idb-open",{originalErrorMessage:tt.message})})),Xa}async function Yg(tt){try{const rt=(await Ku()).transaction(Hi),ut=await rt.objectStore(Hi).get(Ju(tt));return await rt.done,ut}catch(Xe){if(Xe instanceof H.FirebaseError)Re.warn(Xe.message);else{const rt=Wr.create("idb-get",{originalErrorMessage:Xe?.message});Re.warn(rt.message)}}}async function Wu(tt,Xe){try{const ut=(await Ku()).transaction(Hi,"readwrite");await ut.objectStore(Hi).put(Xe,Ju(tt)),await ut.done}catch(rt){if(rt instanceof H.FirebaseError)Re.warn(rt.message);else{const ut=Wr.create("idb-set",{originalErrorMessage:rt?.message});Re.warn(ut.message)}}}function Ju(tt){return`${tt.name}!${tt.options.appId}`}const Qg=1024,Xg=30;class Zg{constructor(Xe){this.container=Xe,this._heartbeatsCache=null;const rt=this.container.getProvider("app").getImmediate();this._storage=new tm(rt),this._heartbeatsCachePromise=this._storage.read().then(ut=>(this._heartbeatsCache=ut,ut))}async triggerHeartbeat(){try{const rt=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ut=zu();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===ut||this._heartbeatsCache.heartbeats.some($t=>$t.date===ut))return;if(this._heartbeatsCache.heartbeats.push({date:ut,agent:rt}),this._heartbeatsCache.heartbeats.length>Xg){const $t=rm(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice($t,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(Xe){Re.warn(Xe)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const Xe=zu(),{heartbeatsToSend:rt,unsentEntries:ut}=em(this._heartbeatsCache.heartbeats),$t=H.base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:rt}));return this._heartbeatsCache.lastSentHeartbeatDate=Xe,ut.length>0?(this._heartbeatsCache.heartbeats=ut,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),$t}catch(Xe){return Re.warn(Xe),""}}}function zu(){return new Date().toISOString().substring(0,10)}function em(tt,Xe=Qg){const rt=[];let ut=tt.slice();for(const $t of tt){const Or=rt.find(Pr=>Pr.agent===$t.agent);if(Or){if(Or.dates.push($t.date),Yu(rt)>Xe){Or.dates.pop();break}}else if(rt.push({agent:$t.agent,dates:[$t.date]}),Yu(rt)>Xe){rt.pop();break}ut=ut.slice(1)}return{heartbeatsToSend:rt,unsentEntries:ut}}class tm{constructor(Xe){this.app=Xe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return H.isIndexedDBAvailable()?H.validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const rt=await Yg(this.app);return rt?.heartbeats?rt:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(Xe){if(await this._canUseIndexedDBPromise){const ut=await this.read();return Wu(this.app,{lastSentHeartbeatDate:Xe.lastSentHeartbeatDate??ut.lastSentHeartbeatDate,heartbeats:Xe.heartbeats})}else return}async add(Xe){if(await this._canUseIndexedDBPromise){const ut=await this.read();return Wu(this.app,{lastSentHeartbeatDate:Xe.lastSentHeartbeatDate??ut.lastSentHeartbeatDate,heartbeats:[...ut.heartbeats,...Xe.heartbeats]})}else return}}function Yu(tt){return H.base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:tt})).length}function rm(tt){if(tt.length===0)return-1;let Xe=0,rt=tt[0].date;for(let ut=1;ut<tt.length;ut++)tt[ut].date<rt&&(rt=tt[ut].date,Xe=ut);return Xe}function nm(tt){ko(new R.Component("platform-logger",Xe=>new se(Xe),"PRIVATE")),ko(new R.Component("heartbeat",Xe=>new Zg(Xe),"PRIVATE")),Gi(ve,we,tt),Gi(ve,we,"cjs2020"),Gi("fire-js","")}nm("node"),Object.defineProperty(F,"FirebaseError",{enumerable:!0,get:function(){return H.FirebaseError}}),F.SDK_VERSION=Vg,F._DEFAULT_ENTRY_NAME=$i,F._addComponent=Ya,F._addOrOverwriteComponent=Lg,F._apps=Mn,F._clearComponents=Mg,F._components=di,F._getProvider=Uu,F._isFirebaseApp=Qa,F._isFirebaseServerApp=Fg,F._isFirebaseServerAppSettings=Bu,F._registerComponent=ko,F._removeServiceInstance=qg,F._serverApps=pi,F.deleteApp=Hu,F.getApp=Gg,F.getApps=Hg,F.initializeApp=Gu,F.initializeServerApp=$g,F.onLog=Kg,F.registerVersion=Gi,F.setLogLevel=Wg})(_s),Object.defineProperty($,"__esModule",{value:!0});var xc=yc,xe=D.default,Ts=k.default,Dc=_s,hi=q.default;function kc(F){return F&&typeof F=="object"&&"default"in F?F:{default:F}}var jc=kc(xc);const Xi="5",As="v",Rs="s",Cs="r",Is="f",Ps=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ns="ls",xs="p",$o="ac",Ds="websocket",ks="long_polling";class Lc{constructor(R){this.domStorage_=R,this.prefix_="firebase:"}set(R,B){B==null?this.domStorage_.removeItem(this.prefixedName_(R)):this.domStorage_.setItem(this.prefixedName_(R),xe.stringify(B))}get(R){const B=this.domStorage_.getItem(this.prefixedName_(R));return B==null?null:xe.jsonEval(B)}remove(R){this.domStorage_.removeItem(this.prefixedName_(R))}prefixedName_(R){return this.prefix_+R}toString(){return this.domStorage_.toString()}}class qc{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(R,B){B==null?delete this.cache_[R]:this.cache_[R]=B}get(R){return xe.contains(this.cache_,R)?this.cache_[R]:null}remove(R){delete this.cache_[R]}}const js=function(F){try{if(typeof window<"u"&&typeof window[F]<"u"){const R=window[F];return R.setItem("firebase:sentinel","cache"),R.removeItem("firebase:sentinel"),new Lc(R)}}catch{}return new qc},Vn=js("localStorage"),Go=js("sessionStorage");const Xn=new Ts.Logger("@firebase/database"),Ls=(function(){let F=1;return function(){return F++}})(),qs=function(F){const R=xe.stringToByteArray(F),B=new xe.Sha1;B.update(R);const H=B.digest();return xe.base64.encodeByteArray(H)},gi=function(...F){let R="";for(let B=0;B<F.length;B++){const H=F[B];Array.isArray(H)||H&&typeof H=="object"&&typeof H.length=="number"?R+=gi.apply(null,H):typeof H=="object"?R+=xe.stringify(H):R+=H,R+=" "}return R};let $n=null,Fs=!0;const Ms=function(F,R){xe.assert(!R||F===!0||F===!1,"Can't turn on custom loggers persistently."),F===!0?(Xn.logLevel=Ts.LogLevel.VERBOSE,$n=Xn.log.bind(Xn),R&&Go.set("logging_enabled",!0)):typeof F=="function"?$n=F:($n=null,Go.remove("logging_enabled"))},Tr=function(...F){if(Fs===!0&&(Fs=!1,$n===null&&Go.get("logging_enabled")===!0&&Ms(!0)),$n){const R=gi.apply(null,F);$n(R)}},mi=function(F){return function(...R){Tr(F,...R)}},Ho=function(...F){const R="FIREBASE INTERNAL ERROR: "+gi(...F);Xn.error(R)},_n=function(...F){const R=`FIREBASE FATAL ERROR: ${gi(...F)}`;throw Xn.error(R),new Error(R)},kr=function(...F){const R="FIREBASE WARNING: "+gi(...F);Xn.warn(R)},Fc=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&kr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Zi=function(F){return typeof F=="number"&&(F!==F||F===Number.POSITIVE_INFINITY||F===Number.NEGATIVE_INFINITY)},Mc=function(F){if(xe.isNodeSdk()||document.readyState==="complete")F();else{let R=!1;const B=function(){if(!document.body){setTimeout(B,Math.floor(10));return}R||(R=!0,F())};document.addEventListener?(document.addEventListener("DOMContentLoaded",B,!1),window.addEventListener("load",B,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&B()}),window.attachEvent("onload",B))}},Rn="[MIN_NAME]",Sn="[MAX_NAME]",Gn=function(F,R){if(F===R)return 0;if(F===Rn||R===Sn)return-1;if(R===Rn||F===Sn)return 1;{const B=Vs(F),H=Vs(R);return B!==null?H!==null?B-H===0?F.length-R.length:B-H:-1:H!==null?1:F<R?-1:1}},Uc=function(F,R){return F===R?0:F<R?-1:1},yi=function(F,R){if(R&&F in R)return R[F];throw new Error("Missing required key ("+F+") in object: "+xe.stringify(R))},Ko=function(F){if(typeof F!="object"||F===null)return xe.stringify(F);const R=[];for(const H in F)R.push(H);R.sort();let B="{";for(let H=0;H<R.length;H++)H!==0&&(B+=","),B+=xe.stringify(R[H]),B+=":",B+=Ko(F[R[H]]);return B+="}",B},Us=function(F,R){const B=F.length;if(B<=R)return[F];const H=[];for(let Z=0;Z<B;Z+=R)Z+R>B?H.push(F.substring(Z,B)):H.push(F.substring(Z,Z+R));return H};function Ar(F,R){for(const B in F)F.hasOwnProperty(B)&&R(B,F[B])}const Bs=function(F){xe.assert(!Zi(F),"Invalid JSON number");const R=11,B=52,H=(1<<R-1)-1;let Z,se,pe,ve,we;F===0?(se=0,pe=0,Z=1/F===-1/0?1:0):(Z=F<0,F=Math.abs(F),F>=Math.pow(2,1-H)?(ve=Math.min(Math.floor(Math.log(F)/Math.LN2),H),se=ve+H,pe=Math.round(F*Math.pow(2,B-ve)-Math.pow(2,B))):(se=0,pe=Math.round(F/Math.pow(2,1-H-B))));const Re=[];for(we=B;we;we-=1)Re.push(pe%2?1:0),pe=Math.floor(pe/2);for(we=R;we;we-=1)Re.push(se%2?1:0),se=Math.floor(se/2);Re.push(Z?1:0),Re.reverse();const qe=Re.join("");let Ue="";for(we=0;we<64;we+=8){let Ke=parseInt(qe.substr(we,8),2).toString(16);Ke.length===1&&(Ke="0"+Ke),Ue=Ue+Ke}return Ue.toLowerCase()},Bc=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Vc=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function $c(F,R){let B="Unknown Error";F==="too_big"?B="The data requested exceeds the maximum size that can be accessed with a single request.":F==="permission_denied"?B="Client doesn't have permission to access the desired data.":F==="unavailable"&&(B="The service is unavailable");const H=new Error(F+" at "+R._path.toString()+": "+B);return H.code=F.toUpperCase(),H}const Gc=new RegExp("^-?(0*)\\d{1,10}$"),Hc=-2147483648,Kc=2147483647,Vs=function(F){if(Gc.test(F)){const R=Number(F);if(R>=Hc&&R<=Kc)return R}return null},Zn=function(F){try{F()}catch(R){setTimeout(()=>{const B=R.stack||"";throw kr("Exception was thrown by user callback.",B),R},Math.floor(0))}},Wc=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},vi=function(F,R){const B=setTimeout(F,R);return typeof B=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(B):typeof B=="object"&&B.unref&&B.unref(),B};class $s{constructor(R,B,H,Z,se=!1,pe="",ve=!1,we=!1,Re=null){this.secure=B,this.namespace=H,this.webSocketOnly=Z,this.nodeAdmin=se,this.persistenceKey=pe,this.includeNamespaceInQueryParams=ve,this.isUsingEmulator=we,this.emulatorOptions=Re,this._host=R.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Vn.get("host:"+R)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(R){R!==this.internalHost&&(this.internalHost=R,this.isCacheableHost()&&Vn.set("host:"+this._host,this.internalHost))}toString(){let R=this.toURLString();return this.persistenceKey&&(R+="<"+this.persistenceKey+">"),R}toURLString(){const R=this.secure?"https://":"http://",B=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${R}${this.host}/${B}`}}function Jc(F){return F.host!==F.internalHost||F.isCustomHost()||F.includeNamespaceInQueryParams}function Gs(F,R,B){xe.assert(typeof R=="string","typeof type must == string"),xe.assert(typeof B=="object","typeof params must == object");let H;if(R===Ds)H=(F.secure?"wss://":"ws://")+F.internalHost+"/.ws?";else if(R===ks)H=(F.secure?"https://":"http://")+F.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+R);Jc(F)&&(B.ns=F.namespace);const Z=[];return Ar(B,(se,pe)=>{Z.push(se+"="+pe)}),H+Z.join("&")}class zc{constructor(){this.counters_={}}incrementCounter(R,B=1){xe.contains(this.counters_,R)||(this.counters_[R]=0),this.counters_[R]+=B}get(){return xe.deepCopy(this.counters_)}}const Wo={},Jo={};function zo(F){const R=F.toString();return Wo[R]||(Wo[R]=new zc),Wo[R]}function Yc(F,R){const B=F.toString();return Jo[B]||(Jo[B]=R()),Jo[B]}let Yo="";function Hs(F){Yo=F}const Qc=16384,Xc=45e3;let _i=null;typeof MozWebSocket<"u"?_i=MozWebSocket:typeof WebSocket<"u"&&(_i=WebSocket);function Zc(F){_i=F}class en{constructor(R,B,H,Z,se,pe,ve){this.connId=R,this.applicationId=H,this.appCheckToken=Z,this.authToken=se,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=mi(this.connId),this.stats_=zo(B),this.connURL=en.connectionURL_(B,pe,ve,Z,H),this.nodeAdmin=B.nodeAdmin}static connectionURL_(R,B,H,Z,se){const pe={};return pe[As]=Xi,!xe.isNodeSdk()&&typeof location<"u"&&location.hostname&&Ps.test(location.hostname)&&(pe[Cs]=Is),B&&(pe[Rs]=B),H&&(pe[Ns]=H),Z&&(pe[$o]=Z),se&&(pe[xs]=se),Gs(R,Ds,pe)}open(R,B){this.onDisconnect=B,this.onMessage=R,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Vn.set("previous_websocket_failure",!0);try{let H;if(xe.isNodeSdk()){const Z=this.nodeAdmin?"AdminNode":"Node";H={headers:{"User-Agent":`Firebase/${Xi}/${Yo}/${e.platform}/${Z}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(H.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(H.headers["X-Firebase-AppCheck"]=this.appCheckToken);const se=t,pe=this.connURL.indexOf("wss://")===0?se.HTTPS_PROXY||se.https_proxy:se.HTTP_PROXY||se.http_proxy;pe&&(H.proxy={origin:pe})}this.mySock=new _i(this.connURL,[],H)}catch(H){this.log_("Error instantiating WebSocket.");const Z=H.message||H.data;Z&&this.log_(Z),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=H=>{this.handleIncomingFrame(H)},this.mySock.onerror=H=>{this.log_("WebSocket error.  Closing connection.");const Z=H.message||H.data;Z&&this.log_(Z),this.onClosed_()}}start(){}static forceDisallow(){en.forceDisallow_=!0}static isAvailable(){let R=!1;if(typeof navigator<"u"&&navigator.userAgent){const B=/Android ([0-9]{0,}\.[0-9]{0,})/,H=navigator.userAgent.match(B);H&&H.length>1&&parseFloat(H[1])<4.4&&(R=!0)}return!R&&_i!==null&&!en.forceDisallow_}static previouslyFailed(){return Vn.isInMemoryStorage||Vn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Vn.remove("previous_websocket_failure")}appendFrame_(R){if(this.frames.push(R),this.frames.length===this.totalFrames){const B=this.frames.join("");this.frames=null;const H=xe.jsonEval(B);this.onMessage(H)}}handleNewFrameCount_(R){this.totalFrames=R,this.frames=[]}extractFrameCount_(R){if(xe.assert(this.frames===null,"We already have a frame buffer"),R.length<=6){const B=Number(R);if(!isNaN(B))return this.handleNewFrameCount_(B),null}return this.handleNewFrameCount_(1),R}handleIncomingFrame(R){if(this.mySock===null)return;const B=R.data;if(this.bytesReceived+=B.length,this.stats_.incrementCounter("bytes_received",B.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(B);else{const H=this.extractFrameCount_(B);H!==null&&this.appendFrame_(H)}}send(R){this.resetKeepAlive();const B=xe.stringify(R);this.bytesSent+=B.length,this.stats_.incrementCounter("bytes_sent",B.length);const H=Us(B,Qc);H.length>1&&this.sendString_(String(H.length));for(let Z=0;Z<H.length;Z++)this.sendString_(H[Z])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Xc))}sendString_(R){try{this.mySock.send(R)}catch(B){this.log_("Exception thrown from WebSocket.send():",B.message||B.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}en.responsesRequiredToBeHealthy=2,en.healthyTimeout=3e4;class ep{constructor(R,B){this.appCheckProvider=B,this.appName=R.name,Dc._isFirebaseServerApp(R)&&R.settings.appCheckToken&&(this.serverAppAppCheckToken=R.settings.appCheckToken),this.appCheck=B?.getImmediate({optional:!0}),this.appCheck||B?.get().then(H=>this.appCheck=H)}getToken(R){if(this.serverAppAppCheckToken){if(R)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(R):new Promise((B,H)=>{setTimeout(()=>{this.appCheck?this.getToken(R).then(B,H):B(null)},0)})}addTokenChangeListener(R){this.appCheckProvider?.get().then(B=>B.addTokenListener(R))}notifyForInvalidToken(){kr(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class tp{constructor(R,B,H){this.appName_=R,this.firebaseOptions_=B,this.authProvider_=H,this.auth_=null,this.auth_=H.getImmediate({optional:!0}),this.auth_||H.onInit(Z=>this.auth_=Z)}getToken(R){return this.auth_?this.auth_.getToken(R).catch(B=>B&&B.code==="auth/token-not-initialized"?(Tr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(B)):new Promise((B,H)=>{setTimeout(()=>{this.auth_?this.getToken(R).then(B,H):B(null)},0)})}addTokenChangeListener(R){this.auth_?this.auth_.addAuthTokenListener(R):this.authProvider_.get().then(B=>B.addAuthTokenListener(R))}removeTokenChangeListener(R){this.authProvider_.get().then(B=>B.removeAuthTokenListener(R))}notifyForInvalidToken(){let R='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?R+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?R+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':R+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',kr(R)}}class ei{constructor(R){this.accessToken=R}getToken(R){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(R){R(this.accessToken)}removeTokenChangeListener(R){}notifyForInvalidToken(){}}ei.OWNER="owner";class rp{constructor(R){this.onMessage_=R,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(R,B){this.closeAfterResponse=R,this.onClose=B,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(R,B){for(this.pendingResponses[R]=B;this.pendingResponses[this.currentResponseNum];){const H=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let Z=0;Z<H.length;++Z)H[Z]&&Zn(()=>{this.onMessage_(H[Z])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Ks="start",np="close",ip="pLPCommand",op="pRTLPCB",Ws="id",Js="pw",zs="ser",ap="cb",sp="seg",lp="ts",up="d",cp="dframe",Ys=1870,Qs=30,dp=Ys-Qs,fp=25e3,hp=3e4;class Cn{constructor(R,B,H,Z,se,pe,ve){this.connId=R,this.repoInfo=B,this.applicationId=H,this.appCheckToken=Z,this.authToken=se,this.transportSessionId=pe,this.lastSessionId=ve,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=mi(R),this.stats_=zo(B),this.urlFn=we=>(this.appCheckToken&&(we[$o]=this.appCheckToken),Gs(B,ks,we))}open(R,B){this.curSegmentNum=0,this.onDisconnect_=B,this.myPacketOrderer=new rp(R),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(hp)),Mc(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Qo((...se)=>{const[pe,ve,we,Re,qe]=se;if(this.incrementIncomingBytes_(se),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,pe===Ks)this.id=ve,this.password=we;else if(pe===np)ve?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(ve,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+pe)},(...se)=>{const[pe,ve]=se;this.incrementIncomingBytes_(se),this.myPacketOrderer.handleResponse(pe,ve)},()=>{this.onClosed_()},this.urlFn);const H={};H[Ks]="t",H[zs]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(H[ap]=this.scriptTagHolder.uniqueCallbackIdentifier),H[As]=Xi,this.transportSessionId&&(H[Rs]=this.transportSessionId),this.lastSessionId&&(H[Ns]=this.lastSessionId),this.applicationId&&(H[xs]=this.applicationId),this.appCheckToken&&(H[$o]=this.appCheckToken),typeof location<"u"&&location.hostname&&Ps.test(location.hostname)&&(H[Cs]=Is);const Z=this.urlFn(H);this.log_("Connecting via long-poll to "+Z),this.scriptTagHolder.addTag(Z,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Cn.forceAllow_=!0}static forceDisallow(){Cn.forceDisallow_=!0}static isAvailable(){return xe.isNodeSdk()?!1:Cn.forceAllow_?!0:!Cn.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Bc()&&!Vc()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(R){const B=xe.stringify(R);this.bytesSent+=B.length,this.stats_.incrementCounter("bytes_sent",B.length);const H=xe.base64Encode(B),Z=Us(H,dp);for(let se=0;se<Z.length;se++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,Z.length,Z[se]),this.curSegmentNum++}addDisconnectPingFrame(R,B){if(xe.isNodeSdk())return;this.myDisconnFrame=document.createElement("iframe");const H={};H[cp]="t",H[Ws]=R,H[Js]=B,this.myDisconnFrame.src=this.urlFn(H),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(R){const B=xe.stringify(R).length;this.bytesReceived+=B,this.stats_.incrementCounter("bytes_received",B)}}class Qo{constructor(R,B,H,Z){if(this.onDisconnect=H,this.urlFn=Z,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,xe.isNodeSdk())this.commandCB=R,this.onMessageCB=B;else{this.uniqueCallbackIdentifier=Ls(),window[ip+this.uniqueCallbackIdentifier]=R,window[op+this.uniqueCallbackIdentifier]=B,this.myIFrame=Qo.createIFrame_();let se="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(se='<script>document.domain="'+document.domain+'";<\/script>');const pe="<html><body>"+se+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(pe),this.myIFrame.doc.close()}catch(ve){Tr("frame writing exception"),ve.stack&&Tr(ve.stack),Tr(ve)}}}static createIFrame_(){const R=document.createElement("iframe");if(R.style.display="none",document.body){document.body.appendChild(R);try{R.contentWindow.document||Tr("No IE domain setting required")}catch{const H=document.domain;R.src="javascript:void((function(){document.open();document.domain='"+H+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return R.contentDocument?R.doc=R.contentDocument:R.contentWindow?R.doc=R.contentWindow.document:R.document&&(R.doc=R.document),R}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const R=this.onDisconnect;R&&(this.onDisconnect=null,R())}startLongPoll(R,B){for(this.myID=R,this.myPW=B,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const R={};R[Ws]=this.myID,R[Js]=this.myPW,R[zs]=this.currentSerial;let B=this.urlFn(R),H="",Z=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Qs+H.length<=Ys;){const pe=this.pendingSegs.shift();H=H+"&"+sp+Z+"="+pe.seg+"&"+lp+Z+"="+pe.ts+"&"+up+Z+"="+pe.d,Z++}return B=B+H,this.addLongPollTag_(B,this.currentSerial),!0}else return!1}enqueueSegment(R,B,H){this.pendingSegs.push({seg:R,ts:B,d:H}),this.alive&&this.newRequest_()}addLongPollTag_(R,B){this.outstandingRequests.add(B);const H=()=>{this.outstandingRequests.delete(B),this.newRequest_()},Z=setTimeout(H,Math.floor(fp)),se=()=>{clearTimeout(Z),H()};this.addTag(R,se)}addTag(R,B){xe.isNodeSdk()?this.doNodeLongPoll(R,B):setTimeout(()=>{try{if(!this.sendNewPolls)return;const H=this.myIFrame.doc.createElement("script");H.type="text/javascript",H.async=!0,H.src=R,H.onload=H.onreadystatechange=function(){const Z=H.readyState;(!Z||Z==="loaded"||Z==="complete")&&(H.onload=H.onreadystatechange=null,H.parentNode&&H.parentNode.removeChild(H),B())},H.onerror=()=>{Tr("Long-poll script failed to load: "+R),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(H)}catch{}},Math.floor(1))}}class ti{static get ALL_TRANSPORTS(){return[Cn,en]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(R){this.initTransports_(R)}initTransports_(R){const B=en&&en.isAvailable();let H=B&&!en.previouslyFailed();if(R.webSocketOnly&&(B||kr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),H=!0),H)this.transports_=[en];else{const Z=this.transports_=[];for(const se of ti.ALL_TRANSPORTS)se&&se.isAvailable()&&Z.push(se);ti.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ti.globalTransportInitialized_=!1;const gp=6e4,mp=5e3,yp=10*1024,vp=100*1024,Xo="t",Xs="d",_p="s",Zs="r",bp="e",el="o",tl="a",rl="n",nl="p",Ep="h";class Sp{constructor(R,B,H,Z,se,pe,ve,we,Re,qe){this.id=R,this.repoInfo_=B,this.applicationId_=H,this.appCheckToken_=Z,this.authToken_=se,this.onMessage_=pe,this.onReady_=ve,this.onDisconnect_=we,this.onKill_=Re,this.lastSessionId=qe,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=mi("c:"+this.id+":"),this.transportManager_=new ti(B),this.log_("Connection created"),this.start_()}start_(){const R=this.transportManager_.initialTransport();this.conn_=new R(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=R.responsesRequiredToBeHealthy||0;const B=this.connReceiver_(this.conn_),H=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(B,H)},Math.floor(0));const Z=R.healthyTimeout||0;Z>0&&(this.healthyTimeout_=vi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>vp?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>yp?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(Z)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(R){return B=>{R===this.conn_?this.onConnectionLost_(B):R===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(R){return B=>{this.state_!==2&&(R===this.rx_?this.onPrimaryMessageReceived_(B):R===this.secondaryConn_?this.onSecondaryMessageReceived_(B):this.log_("message on old connection"))}}sendRequest(R){const B={t:"d",d:R};this.sendData_(B)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(R){if(Xo in R){const B=R[Xo];B===tl?this.upgradeIfSecondaryHealthy_():B===Zs?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):B===el&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(R){const B=yi("t",R),H=yi("d",R);if(B==="c")this.onSecondaryControl_(H);else if(B==="d")this.pendingDataMessages.push(H);else throw new Error("Unknown protocol layer: "+B)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:nl,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:tl,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:rl,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(R){const B=yi("t",R),H=yi("d",R);B==="c"?this.onControl_(H):B==="d"&&this.onDataMessage_(H)}onDataMessage_(R){this.onPrimaryResponse_(),this.onMessage_(R)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(R){const B=yi(Xo,R);if(Xs in R){const H=R[Xs];if(B===Ep){const Z={...H};this.repoInfo_.isUsingEmulator&&(Z.h=this.repoInfo_.host),this.onHandshake_(Z)}else if(B===rl){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let Z=0;Z<this.pendingDataMessages.length;++Z)this.onDataMessage_(this.pendingDataMessages[Z]);this.pendingDataMessages=[],this.tryCleanupConnection()}else B===_p?this.onConnectionShutdown_(H):B===Zs?this.onReset_(H):B===bp?Ho("Server Error: "+H):B===el?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ho("Unknown control packet command: "+B)}}onHandshake_(R){const B=R.ts,H=R.v,Z=R.h;this.sessionId=R.s,this.repoInfo_.host=Z,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,B),Xi!==H&&kr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const R=this.transportManager_.upgradeTransport();R&&this.startUpgrade_(R)}startUpgrade_(R){this.secondaryConn_=new R(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=R.responsesRequiredToBeHealthy||0;const B=this.connReceiver_(this.secondaryConn_),H=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(B,H),vi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(gp))}onReset_(R){this.log_("Reset packet received.  New host: "+R),this.repoInfo_.host=R,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(R,B){this.log_("Realtime connection established."),this.conn_=R,this.state_=1,this.onReady_&&(this.onReady_(B,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):vi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(mp))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:nl,d:{}}}))}onSecondaryConnectionLost_(){const R=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===R||this.rx_===R)&&this.close()}onConnectionLost_(R){this.conn_=null,!R&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Vn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(R){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(R),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(R){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(R)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class il{put(R,B,H,Z){}merge(R,B,H,Z){}refreshAuthToken(R){}refreshAppCheckToken(R){}onDisconnectPut(R,B,H){}onDisconnectMerge(R,B,H){}onDisconnectCancel(R,B){}reportStats(R){}}class ol{constructor(R){this.allowedEvents_=R,this.listeners_={},xe.assert(Array.isArray(R)&&R.length>0,"Requires a non-empty array")}trigger(R,...B){if(Array.isArray(this.listeners_[R])){const H=[...this.listeners_[R]];for(let Z=0;Z<H.length;Z++)H[Z].callback.apply(H[Z].context,B)}}on(R,B,H){this.validateEventType_(R),this.listeners_[R]=this.listeners_[R]||[],this.listeners_[R].push({callback:B,context:H});const Z=this.getInitialEvent(R);Z&&B.apply(H,Z)}off(R,B,H){this.validateEventType_(R);const Z=this.listeners_[R]||[];for(let se=0;se<Z.length;se++)if(Z[se].callback===B&&(!H||H===Z[se].context)){Z.splice(se,1);return}}validateEventType_(R){xe.assert(this.allowedEvents_.find(B=>B===R),"Unknown event: "+R)}}class eo extends ol{static getInstance(){return new eo}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!xe.isMobileCordova()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(R){return xe.assert(R==="online","Unknown event type: "+R),[this.online_]}currentlyOnline(){return this.online_}}const al=32,sl=768;class Jt{constructor(R,B){if(B===void 0){this.pieces_=R.split("/");let H=0;for(let Z=0;Z<this.pieces_.length;Z++)this.pieces_[Z].length>0&&(this.pieces_[H]=this.pieces_[Z],H++);this.pieces_.length=H,this.pieceNum_=0}else this.pieces_=R,this.pieceNum_=B}toString(){let R="";for(let B=this.pieceNum_;B<this.pieces_.length;B++)this.pieces_[B]!==""&&(R+="/"+this.pieces_[B]);return R||"/"}}function Vt(){return new Jt("")}function It(F){return F.pieceNum_>=F.pieces_.length?null:F.pieces_[F.pieceNum_]}function In(F){return F.pieces_.length-F.pieceNum_}function or(F){let R=F.pieceNum_;return R<F.pieces_.length&&R++,new Jt(F.pieces_,R)}function Zo(F){return F.pieceNum_<F.pieces_.length?F.pieces_[F.pieces_.length-1]:null}function Op(F){let R="";for(let B=F.pieceNum_;B<F.pieces_.length;B++)F.pieces_[B]!==""&&(R+="/"+encodeURIComponent(String(F.pieces_[B])));return R||"/"}function bi(F,R=0){return F.pieces_.slice(F.pieceNum_+R)}function ll(F){if(F.pieceNum_>=F.pieces_.length)return null;const R=[];for(let B=F.pieceNum_;B<F.pieces_.length-1;B++)R.push(F.pieces_[B]);return new Jt(R,0)}function fr(F,R){const B=[];for(let H=F.pieceNum_;H<F.pieces_.length;H++)B.push(F.pieces_[H]);if(R instanceof Jt)for(let H=R.pieceNum_;H<R.pieces_.length;H++)B.push(R.pieces_[H]);else{const H=R.split("/");for(let Z=0;Z<H.length;Z++)H[Z].length>0&&B.push(H[Z])}return new Jt(B,0)}function Pt(F){return F.pieceNum_>=F.pieces_.length}function Mr(F,R){const B=It(F),H=It(R);if(B===null)return R;if(B===H)return Mr(or(F),or(R));throw new Error("INTERNAL ERROR: innerPath ("+R+") is not within outerPath ("+F+")")}function wp(F,R){const B=bi(F,0),H=bi(R,0);for(let Z=0;Z<B.length&&Z<H.length;Z++){const se=Gn(B[Z],H[Z]);if(se!==0)return se}return B.length===H.length?0:B.length<H.length?-1:1}function ea(F,R){if(In(F)!==In(R))return!1;for(let B=F.pieceNum_,H=R.pieceNum_;B<=F.pieces_.length;B++,H++)if(F.pieces_[B]!==R.pieces_[H])return!1;return!0}function tn(F,R){let B=F.pieceNum_,H=R.pieceNum_;if(In(F)>In(R))return!1;for(;B<F.pieces_.length;){if(F.pieces_[B]!==R.pieces_[H])return!1;++B,++H}return!0}class Tp{constructor(R,B){this.errorPrefix_=B,this.parts_=bi(R,0),this.byteLength_=Math.max(1,this.parts_.length);for(let H=0;H<this.parts_.length;H++)this.byteLength_+=xe.stringLength(this.parts_[H]);ul(this)}}function Ap(F,R){F.parts_.length>0&&(F.byteLength_+=1),F.parts_.push(R),F.byteLength_+=xe.stringLength(R),ul(F)}function Rp(F){const R=F.parts_.pop();F.byteLength_-=xe.stringLength(R),F.parts_.length>0&&(F.byteLength_-=1)}function ul(F){if(F.byteLength_>sl)throw new Error(F.errorPrefix_+"has a key path longer than "+sl+" bytes ("+F.byteLength_+").");if(F.parts_.length>al)throw new Error(F.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+al+") or object contains a cycle "+Hn(F))}function Hn(F){return F.parts_.length===0?"":"in property '"+F.parts_.join(".")+"'"}class ta extends ol{static getInstance(){return new ta}constructor(){super(["visible"]);let R,B;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(B="visibilitychange",R="hidden"):typeof document.mozHidden<"u"?(B="mozvisibilitychange",R="mozHidden"):typeof document.msHidden<"u"?(B="msvisibilitychange",R="msHidden"):typeof document.webkitHidden<"u"&&(B="webkitvisibilitychange",R="webkitHidden")),this.visible_=!0,B&&document.addEventListener(B,()=>{const H=!document[R];H!==this.visible_&&(this.visible_=H,this.trigger("visible",H))},!1)}getInitialEvent(R){return xe.assert(R==="visible","Unknown event type: "+R),[this.visible_]}}const Ei=1e3,Cp=300*1e3,cl=30*1e3,Ip=1.3,Pp=3e4,Np="server_kill",pl=3;class rn extends il{constructor(R,B,H,Z,se,pe,ve,we){if(super(),this.repoInfo_=R,this.applicationId_=B,this.onDataUpdate_=H,this.onConnectStatus_=Z,this.onServerInfoUpdate_=se,this.authTokenProvider_=pe,this.appCheckTokenProvider_=ve,this.authOverride_=we,this.id=rn.nextPersistentConnectionId_++,this.log_=mi("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ei,this.maxReconnectDelay_=Cp,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,we&&!xe.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ta.getInstance().on("visible",this.onVisible_,this),R.host.indexOf("fblocal")===-1&&eo.getInstance().on("online",this.onOnline_,this)}sendRequest(R,B,H){const Z=++this.requestNumber_,se={r:Z,a:R,b:B};this.log_(xe.stringify(se)),xe.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(se),H&&(this.requestCBHash_[Z]=H)}get(R){this.initConnection_();const B=new xe.Deferred,Z={action:"g",request:{p:R._path.toString(),q:R._queryObject},onComplete:pe=>{const ve=pe.d;pe.s==="ok"?B.resolve(ve):B.reject(ve)}};this.outstandingGets_.push(Z),this.outstandingGetCount_++;const se=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(se),B.promise}listen(R,B,H,Z){this.initConnection_();const se=R._queryIdentifier,pe=R._path.toString();this.log_("Listen called for "+pe+" "+se),this.listens.has(pe)||this.listens.set(pe,new Map),xe.assert(R._queryParams.isDefault()||!R._queryParams.loadsAllData(),"listen() called for non-default but complete query"),xe.assert(!this.listens.get(pe).has(se),"listen() called twice for same path/queryId.");const ve={onComplete:Z,hashFn:B,query:R,tag:H};this.listens.get(pe).set(se,ve),this.connected_&&this.sendListen_(ve)}sendGet_(R){const B=this.outstandingGets_[R];this.sendRequest("g",B.request,H=>{delete this.outstandingGets_[R],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),B.onComplete&&B.onComplete(H)})}sendListen_(R){const B=R.query,H=B._path.toString(),Z=B._queryIdentifier;this.log_("Listen on "+H+" for "+Z);const se={p:H},pe="q";R.tag&&(se.q=B._queryObject,se.t=R.tag),se.h=R.hashFn(),this.sendRequest(pe,se,ve=>{const we=ve.d,Re=ve.s;rn.warnOnListenWarnings_(we,B),(this.listens.get(H)&&this.listens.get(H).get(Z))===R&&(this.log_("listen response",ve),Re!=="ok"&&this.removeListen_(H,Z),R.onComplete&&R.onComplete(Re,we))})}static warnOnListenWarnings_(R,B){if(R&&typeof R=="object"&&xe.contains(R,"w")){const H=xe.safeGet(R,"w");if(Array.isArray(H)&&~H.indexOf("no_index")){const Z='".indexOn": "'+B._queryParams.getIndex().toString()+'"',se=B._path.toString();kr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${Z} at ${se} to your security rules for better performance.`)}}}refreshAuthToken(R){this.authToken_=R,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(R)}reduceReconnectDelayIfAdminCredential_(R){(R&&R.length===40||xe.isAdmin(R))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=cl)}refreshAppCheckToken(R){this.appCheckToken_=R,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const R=this.authToken_,B=xe.isValidFormat(R)?"auth":"gauth",H={cred:R};this.authOverride_===null?H.noauth=!0:typeof this.authOverride_=="object"&&(H.authvar=this.authOverride_),this.sendRequest(B,H,Z=>{const se=Z.s,pe=Z.d||"error";this.authToken_===R&&(se==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(se,pe))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},R=>{const B=R.s,H=R.d||"error";B==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(B,H)})}unlisten(R,B){const H=R._path.toString(),Z=R._queryIdentifier;this.log_("Unlisten called for "+H+" "+Z),xe.assert(R._queryParams.isDefault()||!R._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(H,Z)&&this.connected_&&this.sendUnlisten_(H,Z,R._queryObject,B)}sendUnlisten_(R,B,H,Z){this.log_("Unlisten on "+R+" for "+B);const se={p:R},pe="n";Z&&(se.q=H,se.t=Z),this.sendRequest(pe,se)}onDisconnectPut(R,B,H){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",R,B,H):this.onDisconnectRequestQueue_.push({pathString:R,action:"o",data:B,onComplete:H})}onDisconnectMerge(R,B,H){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",R,B,H):this.onDisconnectRequestQueue_.push({pathString:R,action:"om",data:B,onComplete:H})}onDisconnectCancel(R,B){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",R,null,B):this.onDisconnectRequestQueue_.push({pathString:R,action:"oc",data:null,onComplete:B})}sendOnDisconnect_(R,B,H,Z){const se={p:B,d:H};this.log_("onDisconnect "+R,se),this.sendRequest(R,se,pe=>{Z&&setTimeout(()=>{Z(pe.s,pe.d)},Math.floor(0))})}put(R,B,H,Z){this.putInternal("p",R,B,H,Z)}merge(R,B,H,Z){this.putInternal("m",R,B,H,Z)}putInternal(R,B,H,Z,se){this.initConnection_();const pe={p:B,d:H};se!==void 0&&(pe.h=se),this.outstandingPuts_.push({action:R,request:pe,onComplete:Z}),this.outstandingPutCount_++;const ve=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(ve):this.log_("Buffering put: "+B)}sendPut_(R){const B=this.outstandingPuts_[R].action,H=this.outstandingPuts_[R].request,Z=this.outstandingPuts_[R].onComplete;this.outstandingPuts_[R].queued=this.connected_,this.sendRequest(B,H,se=>{this.log_(B+" response",se),delete this.outstandingPuts_[R],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),Z&&Z(se.s,se.d)})}reportStats(R){if(this.connected_){const B={c:R};this.log_("reportStats",B),this.sendRequest("s",B,H=>{if(H.s!=="ok"){const se=H.d;this.log_("reportStats","Error sending stats: "+se)}})}}onDataMessage_(R){if("r"in R){this.log_("from server: "+xe.stringify(R));const B=R.r,H=this.requestCBHash_[B];H&&(delete this.requestCBHash_[B],H(R.b))}else{if("error"in R)throw"A server-side error has occurred: "+R.error;"a"in R&&this.onDataPush_(R.a,R.b)}}onDataPush_(R,B){this.log_("handleServerMessage",R,B),R==="d"?this.onDataUpdate_(B.p,B.d,!1,B.t):R==="m"?this.onDataUpdate_(B.p,B.d,!0,B.t):R==="c"?this.onListenRevoked_(B.p,B.q):R==="ac"?this.onAuthRevoked_(B.s,B.d):R==="apc"?this.onAppCheckRevoked_(B.s,B.d):R==="sd"?this.onSecurityDebugPacket_(B):Ho("Unrecognized action received from server: "+xe.stringify(R)+`
Are you using the latest client?`)}onReady_(R,B){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(R),this.lastSessionId=B,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(R){xe.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(R))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(R){R&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ei,this.realtime_||this.scheduleConnect_(0)),this.visible_=R}onOnline_(R){R?(this.log_("Browser went online."),this.reconnectDelay_=Ei,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Pp&&(this.reconnectDelay_=Ei),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const R=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let B=Math.max(0,this.reconnectDelay_-R);B=Math.random()*B,this.log_("Trying to reconnect in "+B+"ms"),this.scheduleConnect_(B),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Ip)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const R=this.onDataMessage_.bind(this),B=this.onReady_.bind(this),H=this.onRealtimeDisconnect_.bind(this),Z=this.id+":"+rn.nextConnectionId_++,se=this.lastSessionId;let pe=!1,ve=null;const we=function(){ve?ve.close():(pe=!0,H())},Re=function(Ue){xe.assert(ve,"sendRequest call when we're not connected not allowed."),ve.sendRequest(Ue)};this.realtime_={close:we,sendRequest:Re};const qe=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[Ue,Ke]=await Promise.all([this.authTokenProvider_.getToken(qe),this.appCheckTokenProvider_.getToken(qe)]);pe?Tr("getToken() completed but was canceled"):(Tr("getToken() completed. Creating connection."),this.authToken_=Ue&&Ue.accessToken,this.appCheckToken_=Ke&&Ke.token,ve=new Sp(Z,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,R,B,H,it=>{kr(it+" ("+this.repoInfo_.toString()+")"),this.interrupt(Np)},se))}catch(Ue){this.log_("Failed to get token: "+Ue),pe||(this.repoInfo_.nodeAdmin&&kr(Ue),we())}}}interrupt(R){Tr("Interrupting connection for reason: "+R),this.interruptReasons_[R]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(R){Tr("Resuming connection for reason: "+R),delete this.interruptReasons_[R],xe.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=Ei,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(R){const B=R-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:B})}cancelSentTransactions_(){for(let R=0;R<this.outstandingPuts_.length;R++){const B=this.outstandingPuts_[R];B&&"h"in B.request&&B.queued&&(B.onComplete&&B.onComplete("disconnect"),delete this.outstandingPuts_[R],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(R,B){let H;B?H=B.map(se=>Ko(se)).join("$"):H="default";const Z=this.removeListen_(R,H);Z&&Z.onComplete&&Z.onComplete("permission_denied")}removeListen_(R,B){const H=new Jt(R).toString();let Z;if(this.listens.has(H)){const se=this.listens.get(H);Z=se.get(B),se.delete(B),se.size===0&&this.listens.delete(H)}else Z=void 0;return Z}onAuthRevoked_(R,B){Tr("Auth token revoked: "+R+"/"+B),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(R==="invalid_token"||R==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=pl&&(this.reconnectDelay_=cl,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(R,B){Tr("App check token revoked: "+R+"/"+B),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(R==="invalid_token"||R==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=pl&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(R){this.securityDebugCallback_?this.securityDebugCallback_(R):"msg"in R&&console.log("FIREBASE: "+R.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const R of this.listens.values())for(const B of R.values())this.sendListen_(B);for(let R=0;R<this.outstandingPuts_.length;R++)this.outstandingPuts_[R]&&this.sendPut_(R);for(;this.onDisconnectRequestQueue_.length;){const R=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(R.action,R.pathString,R.data,R.onComplete)}for(let R=0;R<this.outstandingGets_.length;R++)this.outstandingGets_[R]&&this.sendGet_(R)}sendConnectStats_(){const R={};let B="js";xe.isNodeSdk()&&(this.repoInfo_.nodeAdmin?B="admin_node":B="node"),R["sdk."+B+"."+Yo.replace(/\./g,"-")]=1,xe.isMobileCordova()?R["framework.cordova"]=1:xe.isReactNative()&&(R["framework.reactnative"]=1),this.reportStats(R)}shouldReconnect_(){const R=eo.getInstance().currentlyOnline();return xe.isEmpty(this.interruptReasons_)&&R}}rn.nextPersistentConnectionId_=0,rn.nextConnectionId_=0;class xt{constructor(R,B){this.name=R,this.node=B}static Wrap(R,B){return new xt(R,B)}}class to{getCompare(){return this.compare.bind(this)}indexedValueChanged(R,B){const H=new xt(Rn,R),Z=new xt(Rn,B);return this.compare(H,Z)!==0}minPost(){return xt.MIN}}let ro;class dl extends to{static get __EMPTY_NODE(){return ro}static set __EMPTY_NODE(R){ro=R}compare(R,B){return Gn(R.name,B.name)}isDefinedOn(R){throw xe.assertionError("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(R,B){return!1}minPost(){return xt.MIN}maxPost(){return new xt(Sn,ro)}makePost(R,B){return xe.assert(typeof R=="string","KeyIndex indexValue must always be a string."),new xt(R,ro)}toString(){return".key"}}const bn=new dl;class no{constructor(R,B,H,Z,se=null){this.isReverse_=Z,this.resultGenerator_=se,this.nodeStack_=[];let pe=1;for(;!R.isEmpty();)if(R=R,pe=B?H(R.key,B):1,Z&&(pe*=-1),pe<0)this.isReverse_?R=R.left:R=R.right;else if(pe===0){this.nodeStack_.push(R);break}else this.nodeStack_.push(R),this.isReverse_?R=R.right:R=R.left}getNext(){if(this.nodeStack_.length===0)return null;let R=this.nodeStack_.pop(),B;if(this.resultGenerator_?B=this.resultGenerator_(R.key,R.value):B={key:R.key,value:R.value},this.isReverse_)for(R=R.left;!R.isEmpty();)this.nodeStack_.push(R),R=R.right;else for(R=R.right;!R.isEmpty();)this.nodeStack_.push(R),R=R.left;return B}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const R=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(R.key,R.value):{key:R.key,value:R.value}}}class Rr{constructor(R,B,H,Z,se){this.key=R,this.value=B,this.color=H??Rr.RED,this.left=Z??Vr.EMPTY_NODE,this.right=se??Vr.EMPTY_NODE}copy(R,B,H,Z,se){return new Rr(R??this.key,B??this.value,H??this.color,Z??this.left,se??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(R){return this.left.inorderTraversal(R)||!!R(this.key,this.value)||this.right.inorderTraversal(R)}reverseTraversal(R){return this.right.reverseTraversal(R)||R(this.key,this.value)||this.left.reverseTraversal(R)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(R,B,H){let Z=this;const se=H(R,Z.key);return se<0?Z=Z.copy(null,null,null,Z.left.insert(R,B,H),null):se===0?Z=Z.copy(null,B,null,null,null):Z=Z.copy(null,null,null,null,Z.right.insert(R,B,H)),Z.fixUp_()}removeMin_(){if(this.left.isEmpty())return Vr.EMPTY_NODE;let R=this;return!R.left.isRed_()&&!R.left.left.isRed_()&&(R=R.moveRedLeft_()),R=R.copy(null,null,null,R.left.removeMin_(),null),R.fixUp_()}remove(R,B){let H,Z;if(H=this,B(R,H.key)<0)!H.left.isEmpty()&&!H.left.isRed_()&&!H.left.left.isRed_()&&(H=H.moveRedLeft_()),H=H.copy(null,null,null,H.left.remove(R,B),null);else{if(H.left.isRed_()&&(H=H.rotateRight_()),!H.right.isEmpty()&&!H.right.isRed_()&&!H.right.left.isRed_()&&(H=H.moveRedRight_()),B(R,H.key)===0){if(H.right.isEmpty())return Vr.EMPTY_NODE;Z=H.right.min_(),H=H.copy(Z.key,Z.value,null,null,H.right.removeMin_())}H=H.copy(null,null,null,null,H.right.remove(R,B))}return H.fixUp_()}isRed_(){return this.color}fixUp_(){let R=this;return R.right.isRed_()&&!R.left.isRed_()&&(R=R.rotateLeft_()),R.left.isRed_()&&R.left.left.isRed_()&&(R=R.rotateRight_()),R.left.isRed_()&&R.right.isRed_()&&(R=R.colorFlip_()),R}moveRedLeft_(){let R=this.colorFlip_();return R.right.left.isRed_()&&(R=R.copy(null,null,null,null,R.right.rotateRight_()),R=R.rotateLeft_(),R=R.colorFlip_()),R}moveRedRight_(){let R=this.colorFlip_();return R.left.left.isRed_()&&(R=R.rotateRight_(),R=R.colorFlip_()),R}rotateLeft_(){const R=this.copy(null,null,Rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,R,null)}rotateRight_(){const R=this.copy(null,null,Rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,R)}colorFlip_(){const R=this.left.copy(null,null,!this.left.color,null,null),B=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,R,B)}checkMaxDepth_(){const R=this.check_();return Math.pow(2,R)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const R=this.left.check_();if(R!==this.right.check_())throw new Error("Black depths differ");return R+(this.isRed_()?0:1)}}Rr.RED=!0,Rr.BLACK=!1;class xp{copy(R,B,H,Z,se){return this}insert(R,B,H){return new Rr(R,B,null)}remove(R,B){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(R){return!1}reverseTraversal(R){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Vr{constructor(R,B=Vr.EMPTY_NODE){this.comparator_=R,this.root_=B}insert(R,B){return new Vr(this.comparator_,this.root_.insert(R,B,this.comparator_).copy(null,null,Rr.BLACK,null,null))}remove(R){return new Vr(this.comparator_,this.root_.remove(R,this.comparator_).copy(null,null,Rr.BLACK,null,null))}get(R){let B,H=this.root_;for(;!H.isEmpty();){if(B=this.comparator_(R,H.key),B===0)return H.value;B<0?H=H.left:B>0&&(H=H.right)}return null}getPredecessorKey(R){let B,H=this.root_,Z=null;for(;!H.isEmpty();)if(B=this.comparator_(R,H.key),B===0){if(H.left.isEmpty())return Z?Z.key:null;for(H=H.left;!H.right.isEmpty();)H=H.right;return H.key}else B<0?H=H.left:B>0&&(Z=H,H=H.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(R){return this.root_.inorderTraversal(R)}reverseTraversal(R){return this.root_.reverseTraversal(R)}getIterator(R){return new no(this.root_,null,this.comparator_,!1,R)}getIteratorFrom(R,B){return new no(this.root_,R,this.comparator_,!1,B)}getReverseIteratorFrom(R,B){return new no(this.root_,R,this.comparator_,!0,B)}getReverseIterator(R){return new no(this.root_,null,this.comparator_,!0,R)}}Vr.EMPTY_NODE=new xp;function Dp(F,R){return Gn(F.name,R.name)}function ra(F,R){return Gn(F,R)}let na;function kp(F){na=F}const fl=function(F){return typeof F=="number"?"number:"+Bs(F):"string:"+F},hl=function(F){if(F.isLeafNode()){const R=F.val();xe.assert(typeof R=="string"||typeof R=="number"||typeof R=="object"&&xe.contains(R,".sv"),"Priority must be a string or number.")}else xe.assert(F===na||F.isEmpty(),"priority of unexpected type.");xe.assert(F===na||F.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let gl;class Cr{static set __childrenNodeConstructor(R){gl=R}static get __childrenNodeConstructor(){return gl}constructor(R,B=Cr.__childrenNodeConstructor.EMPTY_NODE){this.value_=R,this.priorityNode_=B,this.lazyHash_=null,xe.assert(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),hl(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(R){return new Cr(this.value_,R)}getImmediateChild(R){return R===".priority"?this.priorityNode_:Cr.__childrenNodeConstructor.EMPTY_NODE}getChild(R){return Pt(R)?this:It(R)===".priority"?this.priorityNode_:Cr.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(R,B){return null}updateImmediateChild(R,B){return R===".priority"?this.updatePriority(B):B.isEmpty()&&R!==".priority"?this:Cr.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(R,B).updatePriority(this.priorityNode_)}updateChild(R,B){const H=It(R);return H===null?B:B.isEmpty()&&H!==".priority"?this:(xe.assert(H!==".priority"||In(R)===1,".priority must be the last token in a path"),this.updateImmediateChild(H,Cr.__childrenNodeConstructor.EMPTY_NODE.updateChild(or(R),B)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(R,B){return!1}val(R){return R&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let R="";this.priorityNode_.isEmpty()||(R+="priority:"+fl(this.priorityNode_.val())+":");const B=typeof this.value_;R+=B+":",B==="number"?R+=Bs(this.value_):R+=this.value_,this.lazyHash_=qs(R)}return this.lazyHash_}getValue(){return this.value_}compareTo(R){return R===Cr.__childrenNodeConstructor.EMPTY_NODE?1:R instanceof Cr.__childrenNodeConstructor?-1:(xe.assert(R.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(R))}compareToLeafNode_(R){const B=typeof R.value_,H=typeof this.value_,Z=Cr.VALUE_TYPE_ORDER.indexOf(B),se=Cr.VALUE_TYPE_ORDER.indexOf(H);return xe.assert(Z>=0,"Unknown leaf type: "+B),xe.assert(se>=0,"Unknown leaf type: "+H),Z===se?H==="object"?0:this.value_<R.value_?-1:this.value_===R.value_?0:1:se-Z}withIndex(){return this}isIndexed(){return!0}equals(R){if(R===this)return!0;if(R.isLeafNode()){const B=R;return this.value_===B.value_&&this.priorityNode_.equals(B.priorityNode_)}else return!1}}Cr.VALUE_TYPE_ORDER=["object","boolean","number","string"];let ml,yl;function jp(F){ml=F}function Lp(F){yl=F}class qp extends to{compare(R,B){const H=R.node.getPriority(),Z=B.node.getPriority(),se=H.compareTo(Z);return se===0?Gn(R.name,B.name):se}isDefinedOn(R){return!R.getPriority().isEmpty()}indexedValueChanged(R,B){return!R.getPriority().equals(B.getPriority())}minPost(){return xt.MIN}maxPost(){return new xt(Sn,new Cr("[PRIORITY-POST]",yl))}makePost(R,B){const H=ml(R);return new xt(B,new Cr("[PRIORITY-POST]",H))}toString(){return".priority"}}const sr=new qp;const Fp=Math.log(2);class Mp{constructor(R){const B=se=>parseInt(Math.log(se)/Fp,10),H=se=>parseInt(Array(se+1).join("1"),2);this.count=B(R+1),this.current_=this.count-1;const Z=H(this.count);this.bits_=R+1&Z}nextBitIsOne(){const R=!(this.bits_&1<<this.current_);return this.current_--,R}}const io=function(F,R,B,H){F.sort(R);const Z=function(we,Re){const qe=Re-we;let Ue,Ke;if(qe===0)return null;if(qe===1)return Ue=F[we],Ke=B?B(Ue):Ue,new Rr(Ke,Ue.node,Rr.BLACK,null,null);{const it=parseInt(qe/2,10)+we,ft=Z(we,it),Bt=Z(it+1,Re);return Ue=F[it],Ke=B?B(Ue):Ue,new Rr(Ke,Ue.node,Rr.BLACK,ft,Bt)}},se=function(we){let Re=null,qe=null,Ue=F.length;const Ke=function(ft,Bt){const Sr=Ue-ft,Fn=Ue;Ue-=ft;const ci=Z(Sr+1,Fn),Vi=F[Sr],za=B?B(Vi):Vi;it(new Rr(za,Vi.node,Bt,null,ci))},it=function(ft){Re?(Re.left=ft,Re=ft):(qe=ft,Re=ft)};for(let ft=0;ft<we.count;++ft){const Bt=we.nextBitIsOne(),Sr=Math.pow(2,we.count-(ft+1));Bt?Ke(Sr,Rr.BLACK):(Ke(Sr,Rr.BLACK),Ke(Sr,Rr.RED))}return qe},pe=new Mp(F.length),ve=se(pe);return new Vr(H||R,ve)};let ia;const ri={};class On{static get Default(){return xe.assert(ri&&sr,"ChildrenNode.ts has not been loaded"),ia=ia||new On({".priority":ri},{".priority":sr}),ia}constructor(R,B){this.indexes_=R,this.indexSet_=B}get(R){const B=xe.safeGet(this.indexes_,R);if(!B)throw new Error("No index defined for "+R);return B instanceof Vr?B:null}hasIndex(R){return xe.contains(this.indexSet_,R.toString())}addIndex(R,B){xe.assert(R!==bn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const H=[];let Z=!1;const se=B.getIterator(xt.Wrap);let pe=se.getNext();for(;pe;)Z=Z||R.isDefinedOn(pe.node),H.push(pe),pe=se.getNext();let ve;Z?ve=io(H,R.getCompare()):ve=ri;const we=R.toString(),Re={...this.indexSet_};Re[we]=R;const qe={...this.indexes_};return qe[we]=ve,new On(qe,Re)}addToIndexes(R,B){const H=xe.map(this.indexes_,(Z,se)=>{const pe=xe.safeGet(this.indexSet_,se);if(xe.assert(pe,"Missing index implementation for "+se),Z===ri)if(pe.isDefinedOn(R.node)){const ve=[],we=B.getIterator(xt.Wrap);let Re=we.getNext();for(;Re;)Re.name!==R.name&&ve.push(Re),Re=we.getNext();return ve.push(R),io(ve,pe.getCompare())}else return ri;else{const ve=B.get(R.name);let we=Z;return ve&&(we=we.remove(new xt(R.name,ve))),we.insert(R,R.node)}});return new On(H,this.indexSet_)}removeFromIndexes(R,B){const H=xe.map(this.indexes_,Z=>{if(Z===ri)return Z;{const se=B.get(R.name);return se?Z.remove(new xt(R.name,se)):Z}});return new On(H,this.indexSet_)}}let Si;class ht{static get EMPTY_NODE(){return Si||(Si=new ht(new Vr(ra),null,On.Default))}constructor(R,B,H){this.children_=R,this.priorityNode_=B,this.indexMap_=H,this.lazyHash_=null,this.priorityNode_&&hl(this.priorityNode_),this.children_.isEmpty()&&xe.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Si}updatePriority(R){return this.children_.isEmpty()?this:new ht(this.children_,R,this.indexMap_)}getImmediateChild(R){if(R===".priority")return this.getPriority();{const B=this.children_.get(R);return B===null?Si:B}}getChild(R){const B=It(R);return B===null?this:this.getImmediateChild(B).getChild(or(R))}hasChild(R){return this.children_.get(R)!==null}updateImmediateChild(R,B){if(xe.assert(B,"We should always be passing snapshot nodes"),R===".priority")return this.updatePriority(B);{const H=new xt(R,B);let Z,se;B.isEmpty()?(Z=this.children_.remove(R),se=this.indexMap_.removeFromIndexes(H,this.children_)):(Z=this.children_.insert(R,B),se=this.indexMap_.addToIndexes(H,this.children_));const pe=Z.isEmpty()?Si:this.priorityNode_;return new ht(Z,pe,se)}}updateChild(R,B){const H=It(R);if(H===null)return B;{xe.assert(It(R)!==".priority"||In(R)===1,".priority must be the last token in a path");const Z=this.getImmediateChild(H).updateChild(or(R),B);return this.updateImmediateChild(H,Z)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(R){if(this.isEmpty())return null;const B={};let H=0,Z=0,se=!0;if(this.forEachChild(sr,(pe,ve)=>{B[pe]=ve.val(R),H++,se&&ht.INTEGER_REGEXP_.test(pe)?Z=Math.max(Z,Number(pe)):se=!1}),!R&&se&&Z<2*H){const pe=[];for(const ve in B)pe[ve]=B[ve];return pe}else return R&&!this.getPriority().isEmpty()&&(B[".priority"]=this.getPriority().val()),B}hash(){if(this.lazyHash_===null){let R="";this.getPriority().isEmpty()||(R+="priority:"+fl(this.getPriority().val())+":"),this.forEachChild(sr,(B,H)=>{const Z=H.hash();Z!==""&&(R+=":"+B+":"+Z)}),this.lazyHash_=R===""?"":qs(R)}return this.lazyHash_}getPredecessorChildName(R,B,H){const Z=this.resolveIndex_(H);if(Z){const se=Z.getPredecessorKey(new xt(R,B));return se?se.name:null}else return this.children_.getPredecessorKey(R)}getFirstChildName(R){const B=this.resolveIndex_(R);if(B){const H=B.minKey();return H&&H.name}else return this.children_.minKey()}getFirstChild(R){const B=this.getFirstChildName(R);return B?new xt(B,this.children_.get(B)):null}getLastChildName(R){const B=this.resolveIndex_(R);if(B){const H=B.maxKey();return H&&H.name}else return this.children_.maxKey()}getLastChild(R){const B=this.getLastChildName(R);return B?new xt(B,this.children_.get(B)):null}forEachChild(R,B){const H=this.resolveIndex_(R);return H?H.inorderTraversal(Z=>B(Z.name,Z.node)):this.children_.inorderTraversal(B)}getIterator(R){return this.getIteratorFrom(R.minPost(),R)}getIteratorFrom(R,B){const H=this.resolveIndex_(B);if(H)return H.getIteratorFrom(R,Z=>Z);{const Z=this.children_.getIteratorFrom(R.name,xt.Wrap);let se=Z.peek();for(;se!=null&&B.compare(se,R)<0;)Z.getNext(),se=Z.peek();return Z}}getReverseIterator(R){return this.getReverseIteratorFrom(R.maxPost(),R)}getReverseIteratorFrom(R,B){const H=this.resolveIndex_(B);if(H)return H.getReverseIteratorFrom(R,Z=>Z);{const Z=this.children_.getReverseIteratorFrom(R.name,xt.Wrap);let se=Z.peek();for(;se!=null&&B.compare(se,R)>0;)Z.getNext(),se=Z.peek();return Z}}compareTo(R){return this.isEmpty()?R.isEmpty()?0:-1:R.isLeafNode()||R.isEmpty()?1:R===Oi?-1:0}withIndex(R){if(R===bn||this.indexMap_.hasIndex(R))return this;{const B=this.indexMap_.addIndex(R,this.children_);return new ht(this.children_,this.priorityNode_,B)}}isIndexed(R){return R===bn||this.indexMap_.hasIndex(R)}equals(R){if(R===this)return!0;if(R.isLeafNode())return!1;{const B=R;if(this.getPriority().equals(B.getPriority()))if(this.children_.count()===B.children_.count()){const H=this.getIterator(sr),Z=B.getIterator(sr);let se=H.getNext(),pe=Z.getNext();for(;se&&pe;){if(se.name!==pe.name||!se.node.equals(pe.node))return!1;se=H.getNext(),pe=Z.getNext()}return se===null&&pe===null}else return!1;else return!1}}resolveIndex_(R){return R===bn?null:this.indexMap_.get(R.toString())}}ht.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Up extends ht{constructor(){super(new Vr(ra),ht.EMPTY_NODE,On.Default)}compareTo(R){return R===this?0:1}equals(R){return R===this}getPriority(){return this}getImmediateChild(R){return ht.EMPTY_NODE}isEmpty(){return!1}}const Oi=new Up;Object.defineProperties(xt,{MIN:{value:new xt(Rn,ht.EMPTY_NODE)},MAX:{value:new xt(Sn,Oi)}}),dl.__EMPTY_NODE=ht.EMPTY_NODE,Cr.__childrenNodeConstructor=ht,kp(Oi),Lp(Oi);const Bp=!0;function gr(F,R=null){if(F===null)return ht.EMPTY_NODE;if(typeof F=="object"&&".priority"in F&&(R=F[".priority"]),xe.assert(R===null||typeof R=="string"||typeof R=="number"||typeof R=="object"&&".sv"in R,"Invalid priority type found: "+typeof R),typeof F=="object"&&".value"in F&&F[".value"]!==null&&(F=F[".value"]),typeof F!="object"||".sv"in F){const B=F;return new Cr(B,gr(R))}if(!(F instanceof Array)&&Bp){const B=[];let H=!1;if(Ar(F,(pe,ve)=>{if(pe.substring(0,1)!=="."){const we=gr(ve);we.isEmpty()||(H=H||!we.getPriority().isEmpty(),B.push(new xt(pe,we)))}}),B.length===0)return ht.EMPTY_NODE;const se=io(B,Dp,pe=>pe.name,ra);if(H){const pe=io(B,sr.getCompare());return new ht(se,gr(R),new On({".priority":pe},{".priority":sr}))}else return new ht(se,gr(R),On.Default)}else{let B=ht.EMPTY_NODE;return Ar(F,(H,Z)=>{if(xe.contains(F,H)&&H.substring(0,1)!=="."){const se=gr(Z);(se.isLeafNode()||!se.isEmpty())&&(B=B.updateImmediateChild(H,se))}}),B.updatePriority(gr(R))}}jp(gr);class oa extends to{constructor(R){super(),this.indexPath_=R,xe.assert(!Pt(R)&&It(R)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(R){return R.getChild(this.indexPath_)}isDefinedOn(R){return!R.getChild(this.indexPath_).isEmpty()}compare(R,B){const H=this.extractChild(R.node),Z=this.extractChild(B.node),se=H.compareTo(Z);return se===0?Gn(R.name,B.name):se}makePost(R,B){const H=gr(R),Z=ht.EMPTY_NODE.updateChild(this.indexPath_,H);return new xt(B,Z)}maxPost(){const R=ht.EMPTY_NODE.updateChild(this.indexPath_,Oi);return new xt(Sn,R)}toString(){return bi(this.indexPath_,0).join("/")}}class Vp extends to{compare(R,B){const H=R.node.compareTo(B.node);return H===0?Gn(R.name,B.name):H}isDefinedOn(R){return!0}indexedValueChanged(R,B){return!R.equals(B)}minPost(){return xt.MIN}maxPost(){return xt.MAX}makePost(R,B){const H=gr(R);return new xt(B,H)}toString(){return".value"}}const aa=new Vp;function vl(F){return{type:"value",snapshotNode:F}}function ni(F,R){return{type:"child_added",snapshotNode:R,childName:F}}function wi(F,R){return{type:"child_removed",snapshotNode:R,childName:F}}function Ti(F,R,B){return{type:"child_changed",snapshotNode:R,childName:F,oldSnap:B}}function $p(F,R){return{type:"child_moved",snapshotNode:R,childName:F}}class sa{constructor(R){this.index_=R}updateChild(R,B,H,Z,se,pe){xe.assert(R.isIndexed(this.index_),"A node must be indexed if only a child is updated");const ve=R.getImmediateChild(B);return ve.getChild(Z).equals(H.getChild(Z))&&ve.isEmpty()===H.isEmpty()||(pe!=null&&(H.isEmpty()?R.hasChild(B)?pe.trackChildChange(wi(B,ve)):xe.assert(R.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):ve.isEmpty()?pe.trackChildChange(ni(B,H)):pe.trackChildChange(Ti(B,H,ve))),R.isLeafNode()&&H.isEmpty())?R:R.updateImmediateChild(B,H).withIndex(this.index_)}updateFullNode(R,B,H){return H!=null&&(R.isLeafNode()||R.forEachChild(sr,(Z,se)=>{B.hasChild(Z)||H.trackChildChange(wi(Z,se))}),B.isLeafNode()||B.forEachChild(sr,(Z,se)=>{if(R.hasChild(Z)){const pe=R.getImmediateChild(Z);pe.equals(se)||H.trackChildChange(Ti(Z,se,pe))}else H.trackChildChange(ni(Z,se))})),B.withIndex(this.index_)}updatePriority(R,B){return R.isEmpty()?ht.EMPTY_NODE:R.updatePriority(B)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ai{constructor(R){this.indexedFilter_=new sa(R.getIndex()),this.index_=R.getIndex(),this.startPost_=Ai.getStartPost_(R),this.endPost_=Ai.getEndPost_(R),this.startIsInclusive_=!R.startAfterSet_,this.endIsInclusive_=!R.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(R){const B=this.startIsInclusive_?this.index_.compare(this.getStartPost(),R)<=0:this.index_.compare(this.getStartPost(),R)<0,H=this.endIsInclusive_?this.index_.compare(R,this.getEndPost())<=0:this.index_.compare(R,this.getEndPost())<0;return B&&H}updateChild(R,B,H,Z,se,pe){return this.matches(new xt(B,H))||(H=ht.EMPTY_NODE),this.indexedFilter_.updateChild(R,B,H,Z,se,pe)}updateFullNode(R,B,H){B.isLeafNode()&&(B=ht.EMPTY_NODE);let Z=B.withIndex(this.index_);Z=Z.updatePriority(ht.EMPTY_NODE);const se=this;return B.forEachChild(sr,(pe,ve)=>{se.matches(new xt(pe,ve))||(Z=Z.updateImmediateChild(pe,ht.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(R,Z,H)}updatePriority(R,B){return R}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(R){if(R.hasStart()){const B=R.getIndexStartName();return R.getIndex().makePost(R.getIndexStartValue(),B)}else return R.getIndex().minPost()}static getEndPost_(R){if(R.hasEnd()){const B=R.getIndexEndName();return R.getIndex().makePost(R.getIndexEndValue(),B)}else return R.getIndex().maxPost()}}class Gp{constructor(R){this.withinDirectionalStart=B=>this.reverse_?this.withinEndPost(B):this.withinStartPost(B),this.withinDirectionalEnd=B=>this.reverse_?this.withinStartPost(B):this.withinEndPost(B),this.withinStartPost=B=>{const H=this.index_.compare(this.rangedFilter_.getStartPost(),B);return this.startIsInclusive_?H<=0:H<0},this.withinEndPost=B=>{const H=this.index_.compare(B,this.rangedFilter_.getEndPost());return this.endIsInclusive_?H<=0:H<0},this.rangedFilter_=new Ai(R),this.index_=R.getIndex(),this.limit_=R.getLimit(),this.reverse_=!R.isViewFromLeft(),this.startIsInclusive_=!R.startAfterSet_,this.endIsInclusive_=!R.endBeforeSet_}updateChild(R,B,H,Z,se,pe){return this.rangedFilter_.matches(new xt(B,H))||(H=ht.EMPTY_NODE),R.getImmediateChild(B).equals(H)?R:R.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(R,B,H,Z,se,pe):this.fullLimitUpdateChild_(R,B,H,se,pe)}updateFullNode(R,B,H){let Z;if(B.isLeafNode()||B.isEmpty())Z=ht.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<B.numChildren()&&B.isIndexed(this.index_)){Z=ht.EMPTY_NODE.withIndex(this.index_);let se;this.reverse_?se=B.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):se=B.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let pe=0;for(;se.hasNext()&&pe<this.limit_;){const ve=se.getNext();if(this.withinDirectionalStart(ve))if(this.withinDirectionalEnd(ve))Z=Z.updateImmediateChild(ve.name,ve.node),pe++;else break;else continue}}else{Z=B.withIndex(this.index_),Z=Z.updatePriority(ht.EMPTY_NODE);let se;this.reverse_?se=Z.getReverseIterator(this.index_):se=Z.getIterator(this.index_);let pe=0;for(;se.hasNext();){const ve=se.getNext();pe<this.limit_&&this.withinDirectionalStart(ve)&&this.withinDirectionalEnd(ve)?pe++:Z=Z.updateImmediateChild(ve.name,ht.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(R,Z,H)}updatePriority(R,B){return R}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(R,B,H,Z,se){let pe;if(this.reverse_){const Ue=this.index_.getCompare();pe=(Ke,it)=>Ue(it,Ke)}else pe=this.index_.getCompare();const ve=R;xe.assert(ve.numChildren()===this.limit_,"");const we=new xt(B,H),Re=this.reverse_?ve.getFirstChild(this.index_):ve.getLastChild(this.index_),qe=this.rangedFilter_.matches(we);if(ve.hasChild(B)){const Ue=ve.getImmediateChild(B);let Ke=Z.getChildAfterChild(this.index_,Re,this.reverse_);for(;Ke!=null&&(Ke.name===B||ve.hasChild(Ke.name));)Ke=Z.getChildAfterChild(this.index_,Ke,this.reverse_);const it=Ke==null?1:pe(Ke,we);if(qe&&!H.isEmpty()&&it>=0)return se?.trackChildChange(Ti(B,H,Ue)),ve.updateImmediateChild(B,H);{se?.trackChildChange(wi(B,Ue));const Bt=ve.updateImmediateChild(B,ht.EMPTY_NODE);return Ke!=null&&this.rangedFilter_.matches(Ke)?(se?.trackChildChange(ni(Ke.name,Ke.node)),Bt.updateImmediateChild(Ke.name,Ke.node)):Bt}}else return H.isEmpty()?R:qe&&pe(Re,we)>=0?(se!=null&&(se.trackChildChange(wi(Re.name,Re.node)),se.trackChildChange(ni(B,H))),ve.updateImmediateChild(B,H).updateImmediateChild(Re.name,ht.EMPTY_NODE)):R}}class oo{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=sr}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return xe.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return xe.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Rn}hasEnd(){return this.endSet_}getIndexEndValue(){return xe.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return xe.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Sn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return xe.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===sr}copy(){const R=new oo;return R.limitSet_=this.limitSet_,R.limit_=this.limit_,R.startSet_=this.startSet_,R.startAfterSet_=this.startAfterSet_,R.indexStartValue_=this.indexStartValue_,R.startNameSet_=this.startNameSet_,R.indexStartName_=this.indexStartName_,R.endSet_=this.endSet_,R.endBeforeSet_=this.endBeforeSet_,R.indexEndValue_=this.indexEndValue_,R.endNameSet_=this.endNameSet_,R.indexEndName_=this.indexEndName_,R.index_=this.index_,R.viewFrom_=this.viewFrom_,R}}function Hp(F){return F.loadsAllData()?new sa(F.getIndex()):F.hasLimit()?new Gp(F):new Ai(F)}function Kp(F,R){const B=F.copy();return B.limitSet_=!0,B.limit_=R,B.viewFrom_="l",B}function Wp(F,R){const B=F.copy();return B.limitSet_=!0,B.limit_=R,B.viewFrom_="r",B}function la(F,R,B){const H=F.copy();return H.startSet_=!0,R===void 0&&(R=null),H.indexStartValue_=R,B!=null?(H.startNameSet_=!0,H.indexStartName_=B):(H.startNameSet_=!1,H.indexStartName_=""),H}function Jp(F,R,B){let H;return F.index_===bn||B?H=la(F,R,B):H=la(F,R,Sn),H.startAfterSet_=!0,H}function ua(F,R,B){const H=F.copy();return H.endSet_=!0,R===void 0&&(R=null),H.indexEndValue_=R,B!==void 0?(H.endNameSet_=!0,H.indexEndName_=B):(H.endNameSet_=!1,H.indexEndName_=""),H}function zp(F,R,B){let H;return F.index_===bn||B?H=ua(F,R,B):H=ua(F,R,Rn),H.endBeforeSet_=!0,H}function ao(F,R){const B=F.copy();return B.index_=R,B}function _l(F){const R={};if(F.isDefault())return R;let B;if(F.index_===sr?B="$priority":F.index_===aa?B="$value":F.index_===bn?B="$key":(xe.assert(F.index_ instanceof oa,"Unrecognized index type!"),B=F.index_.toString()),R.orderBy=xe.stringify(B),F.startSet_){const H=F.startAfterSet_?"startAfter":"startAt";R[H]=xe.stringify(F.indexStartValue_),F.startNameSet_&&(R[H]+=","+xe.stringify(F.indexStartName_))}if(F.endSet_){const H=F.endBeforeSet_?"endBefore":"endAt";R[H]=xe.stringify(F.indexEndValue_),F.endNameSet_&&(R[H]+=","+xe.stringify(F.indexEndName_))}return F.limitSet_&&(F.isViewFromLeft()?R.limitToFirst=F.limit_:R.limitToLast=F.limit_),R}function bl(F){const R={};if(F.startSet_&&(R.sp=F.indexStartValue_,F.startNameSet_&&(R.sn=F.indexStartName_),R.sin=!F.startAfterSet_),F.endSet_&&(R.ep=F.indexEndValue_,F.endNameSet_&&(R.en=F.indexEndName_),R.ein=!F.endBeforeSet_),F.limitSet_){R.l=F.limit_;let B=F.viewFrom_;B===""&&(F.isViewFromLeft()?B="l":B="r"),R.vf=B}return F.index_!==sr&&(R.i=F.index_.toString()),R}class so extends il{reportStats(R){throw new Error("Method not implemented.")}static getListenId_(R,B){return B!==void 0?"tag$"+B:(xe.assert(R._queryParams.isDefault(),"should have a tag if it's not a default query."),R._path.toString())}constructor(R,B,H,Z){super(),this.repoInfo_=R,this.onDataUpdate_=B,this.authTokenProvider_=H,this.appCheckTokenProvider_=Z,this.log_=mi("p:rest:"),this.listens_={}}listen(R,B,H,Z){const se=R._path.toString();this.log_("Listen called for "+se+" "+R._queryIdentifier);const pe=so.getListenId_(R,H),ve={};this.listens_[pe]=ve;const we=_l(R._queryParams);this.restRequest_(se+".json",we,(Re,qe)=>{let Ue=qe;if(Re===404&&(Ue=null,Re=null),Re===null&&this.onDataUpdate_(se,Ue,!1,H),xe.safeGet(this.listens_,pe)===ve){let Ke;Re?Re===401?Ke="permission_denied":Ke="rest_error:"+Re:Ke="ok",Z(Ke,null)}})}unlisten(R,B){const H=so.getListenId_(R,B);delete this.listens_[H]}get(R){const B=_l(R._queryParams),H=R._path.toString(),Z=new xe.Deferred;return this.restRequest_(H+".json",B,(se,pe)=>{let ve=pe;se===404&&(ve=null,se=null),se===null?(this.onDataUpdate_(H,ve,!1,null),Z.resolve(ve)):Z.reject(new Error(ve))}),Z.promise}refreshAuthToken(R){}restRequest_(R,B={},H){return B.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([Z,se])=>{Z&&Z.accessToken&&(B.auth=Z.accessToken),se&&se.token&&(B.ac=se.token);const pe=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+R+"?ns="+this.repoInfo_.namespace+xe.querystring(B);this.log_("Sending REST request for "+pe);const ve=new XMLHttpRequest;ve.onreadystatechange=()=>{if(H&&ve.readyState===4){this.log_("REST Response for "+pe+" received. status:",ve.status,"response:",ve.responseText);let we=null;if(ve.status>=200&&ve.status<300){try{we=xe.jsonEval(ve.responseText)}catch{kr("Failed to parse JSON response for "+pe+": "+ve.responseText)}H(null,we)}else ve.status!==401&&ve.status!==404&&kr("Got unsuccessful REST response for "+pe+" Status: "+ve.status),H(ve.status);H=null}},ve.open("GET",pe,!0),ve.send()})}}class Yp{constructor(){this.rootNode_=ht.EMPTY_NODE}getNode(R){return this.rootNode_.getChild(R)}updateSnapshot(R,B){this.rootNode_=this.rootNode_.updateChild(R,B)}}function lo(){return{value:null,children:new Map}}function ii(F,R,B){if(Pt(R))F.value=B,F.children.clear();else if(F.value!==null)F.value=F.value.updateChild(R,B);else{const H=It(R);F.children.has(H)||F.children.set(H,lo());const Z=F.children.get(H);R=or(R),ii(Z,R,B)}}function ca(F,R){if(Pt(R))return F.value=null,F.children.clear(),!0;if(F.value!==null){if(F.value.isLeafNode())return!1;{const B=F.value;return F.value=null,B.forEachChild(sr,(H,Z)=>{ii(F,new Jt(H),Z)}),ca(F,R)}}else if(F.children.size>0){const B=It(R);return R=or(R),F.children.has(B)&&ca(F.children.get(B),R)&&F.children.delete(B),F.children.size===0}else return!0}function pa(F,R,B){F.value!==null?B(R,F.value):Qp(F,(H,Z)=>{const se=new Jt(R.toString()+"/"+H);pa(Z,se,B)})}function Qp(F,R){F.children.forEach((B,H)=>{R(H,B)})}class Xp{constructor(R){this.collection_=R,this.last_=null}get(){const R=this.collection_.get(),B={...R};return this.last_&&Ar(this.last_,(H,Z)=>{B[H]=B[H]-Z}),this.last_=R,B}}const El=10*1e3,Zp=30*1e3,ed=300*1e3;class td{constructor(R,B){this.server_=B,this.statsToReport_={},this.statsListener_=new Xp(R);const H=El+(Zp-El)*Math.random();vi(this.reportStats_.bind(this),Math.floor(H))}reportStats_(){const R=this.statsListener_.get(),B={};let H=!1;Ar(R,(Z,se)=>{se>0&&xe.contains(this.statsToReport_,Z)&&(B[Z]=se,H=!0)}),H&&this.server_.reportStats(B),vi(this.reportStats_.bind(this),Math.floor(Math.random()*2*ed))}}var un;(function(F){F[F.OVERWRITE=0]="OVERWRITE",F[F.MERGE=1]="MERGE",F[F.ACK_USER_WRITE=2]="ACK_USER_WRITE",F[F.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(un||(un={}));function da(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function fa(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ha(F){return{fromUser:!1,fromServer:!0,queryId:F,tagged:!0}}class uo{constructor(R,B,H){this.path=R,this.affectedTree=B,this.revert=H,this.type=un.ACK_USER_WRITE,this.source=da()}operationForChild(R){if(Pt(this.path)){if(this.affectedTree.value!=null)return xe.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const B=this.affectedTree.subtree(new Jt(R));return new uo(Vt(),B,this.revert)}}else return xe.assert(It(this.path)===R,"operationForChild called for unrelated child."),new uo(or(this.path),this.affectedTree,this.revert)}}class Ri{constructor(R,B){this.source=R,this.path=B,this.type=un.LISTEN_COMPLETE}operationForChild(R){return Pt(this.path)?new Ri(this.source,Vt()):new Ri(this.source,or(this.path))}}class Kn{constructor(R,B,H){this.source=R,this.path=B,this.snap=H,this.type=un.OVERWRITE}operationForChild(R){return Pt(this.path)?new Kn(this.source,Vt(),this.snap.getImmediateChild(R)):new Kn(this.source,or(this.path),this.snap)}}class oi{constructor(R,B,H){this.source=R,this.path=B,this.children=H,this.type=un.MERGE}operationForChild(R){if(Pt(this.path)){const B=this.children.subtree(new Jt(R));return B.isEmpty()?null:B.value?new Kn(this.source,Vt(),B.value):new oi(this.source,Vt(),B)}else return xe.assert(It(this.path)===R,"Can't get a merge for a child not on the path of the operation"),new oi(this.source,or(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Pn{constructor(R,B,H){this.node_=R,this.fullyInitialized_=B,this.filtered_=H}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(R){if(Pt(R))return this.isFullyInitialized()&&!this.filtered_;const B=It(R);return this.isCompleteForChild(B)}isCompleteForChild(R){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(R)}getNode(){return this.node_}}class rd{constructor(R){this.query_=R,this.index_=this.query_._queryParams.getIndex()}}function nd(F,R,B,H){const Z=[],se=[];return R.forEach(pe=>{pe.type==="child_changed"&&F.index_.indexedValueChanged(pe.oldSnap,pe.snapshotNode)&&se.push($p(pe.childName,pe.snapshotNode))}),Ci(F,Z,"child_removed",R,H,B),Ci(F,Z,"child_added",R,H,B),Ci(F,Z,"child_moved",se,H,B),Ci(F,Z,"child_changed",R,H,B),Ci(F,Z,"value",R,H,B),Z}function Ci(F,R,B,H,Z,se){const pe=H.filter(ve=>ve.type===B);pe.sort((ve,we)=>od(F,ve,we)),pe.forEach(ve=>{const we=id(F,ve,se);Z.forEach(Re=>{Re.respondsTo(ve.type)&&R.push(Re.createEvent(we,F.query_))})})}function id(F,R,B){return R.type==="value"||R.type==="child_removed"||(R.prevName=B.getPredecessorChildName(R.childName,R.snapshotNode,F.index_)),R}function od(F,R,B){if(R.childName==null||B.childName==null)throw xe.assertionError("Should only compare child_ events.");const H=new xt(R.childName,R.snapshotNode),Z=new xt(B.childName,B.snapshotNode);return F.index_.compare(H,Z)}function co(F,R){return{eventCache:F,serverCache:R}}function Ii(F,R,B,H){return co(new Pn(R,B,H),F.serverCache)}function Sl(F,R,B,H){return co(F.eventCache,new Pn(R,B,H))}function po(F){return F.eventCache.isFullyInitialized()?F.eventCache.getNode():null}function Wn(F){return F.serverCache.isFullyInitialized()?F.serverCache.getNode():null}let ga;const ad=()=>(ga||(ga=new Vr(Uc)),ga);class lr{static fromObject(R){let B=new lr(null);return Ar(R,(H,Z)=>{B=B.set(new Jt(H),Z)}),B}constructor(R,B=ad()){this.value=R,this.children=B}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(R,B){if(this.value!=null&&B(this.value))return{path:Vt(),value:this.value};if(Pt(R))return null;{const H=It(R),Z=this.children.get(H);if(Z!==null){const se=Z.findRootMostMatchingPathAndValue(or(R),B);return se!=null?{path:fr(new Jt(H),se.path),value:se.value}:null}else return null}}findRootMostValueAndPath(R){return this.findRootMostMatchingPathAndValue(R,()=>!0)}subtree(R){if(Pt(R))return this;{const B=It(R),H=this.children.get(B);return H!==null?H.subtree(or(R)):new lr(null)}}set(R,B){if(Pt(R))return new lr(B,this.children);{const H=It(R),se=(this.children.get(H)||new lr(null)).set(or(R),B),pe=this.children.insert(H,se);return new lr(this.value,pe)}}remove(R){if(Pt(R))return this.children.isEmpty()?new lr(null):new lr(null,this.children);{const B=It(R),H=this.children.get(B);if(H){const Z=H.remove(or(R));let se;return Z.isEmpty()?se=this.children.remove(B):se=this.children.insert(B,Z),this.value===null&&se.isEmpty()?new lr(null):new lr(this.value,se)}else return this}}get(R){if(Pt(R))return this.value;{const B=It(R),H=this.children.get(B);return H?H.get(or(R)):null}}setTree(R,B){if(Pt(R))return B;{const H=It(R),se=(this.children.get(H)||new lr(null)).setTree(or(R),B);let pe;return se.isEmpty()?pe=this.children.remove(H):pe=this.children.insert(H,se),new lr(this.value,pe)}}fold(R){return this.fold_(Vt(),R)}fold_(R,B){const H={};return this.children.inorderTraversal((Z,se)=>{H[Z]=se.fold_(fr(R,Z),B)}),B(R,this.value,H)}findOnPath(R,B){return this.findOnPath_(R,Vt(),B)}findOnPath_(R,B,H){const Z=this.value?H(B,this.value):!1;if(Z)return Z;if(Pt(R))return null;{const se=It(R),pe=this.children.get(se);return pe?pe.findOnPath_(or(R),fr(B,se),H):null}}foreachOnPath(R,B){return this.foreachOnPath_(R,Vt(),B)}foreachOnPath_(R,B,H){if(Pt(R))return this;{this.value&&H(B,this.value);const Z=It(R),se=this.children.get(Z);return se?se.foreachOnPath_(or(R),fr(B,Z),H):new lr(null)}}foreach(R){this.foreach_(Vt(),R)}foreach_(R,B){this.children.inorderTraversal((H,Z)=>{Z.foreach_(fr(R,H),B)}),this.value&&B(R,this.value)}foreachChild(R){this.children.inorderTraversal((B,H)=>{H.value&&R(B,H.value)})}}class cn{constructor(R){this.writeTree_=R}static empty(){return new cn(new lr(null))}}function Pi(F,R,B){if(Pt(R))return new cn(new lr(B));{const H=F.writeTree_.findRootMostValueAndPath(R);if(H!=null){const Z=H.path;let se=H.value;const pe=Mr(Z,R);return se=se.updateChild(pe,B),new cn(F.writeTree_.set(Z,se))}else{const Z=new lr(B),se=F.writeTree_.setTree(R,Z);return new cn(se)}}}function ma(F,R,B){let H=F;return Ar(B,(Z,se)=>{H=Pi(H,fr(R,Z),se)}),H}function Ol(F,R){if(Pt(R))return cn.empty();{const B=F.writeTree_.setTree(R,new lr(null));return new cn(B)}}function ya(F,R){return Jn(F,R)!=null}function Jn(F,R){const B=F.writeTree_.findRootMostValueAndPath(R);return B!=null?F.writeTree_.get(B.path).getChild(Mr(B.path,R)):null}function wl(F){const R=[],B=F.writeTree_.value;return B!=null?B.isLeafNode()||B.forEachChild(sr,(H,Z)=>{R.push(new xt(H,Z))}):F.writeTree_.children.inorderTraversal((H,Z)=>{Z.value!=null&&R.push(new xt(H,Z.value))}),R}function Nn(F,R){if(Pt(R))return F;{const B=Jn(F,R);return B!=null?new cn(new lr(B)):new cn(F.writeTree_.subtree(R))}}function va(F){return F.writeTree_.isEmpty()}function ai(F,R){return Tl(Vt(),F.writeTree_,R)}function Tl(F,R,B){if(R.value!=null)return B.updateChild(F,R.value);{let H=null;return R.children.inorderTraversal((Z,se)=>{Z===".priority"?(xe.assert(se.value!==null,"Priority writes must always be leaf nodes"),H=se.value):B=Tl(fr(F,Z),se,B)}),!B.getChild(F).isEmpty()&&H!==null&&(B=B.updateChild(fr(F,".priority"),H)),B}}function fo(F,R){return Pl(R,F)}function sd(F,R,B,H,Z){xe.assert(H>F.lastWriteId,"Stacking an older write on top of newer ones"),Z===void 0&&(Z=!0),F.allWrites.push({path:R,snap:B,writeId:H,visible:Z}),Z&&(F.visibleWrites=Pi(F.visibleWrites,R,B)),F.lastWriteId=H}function ld(F,R,B,H){xe.assert(H>F.lastWriteId,"Stacking an older merge on top of newer ones"),F.allWrites.push({path:R,children:B,writeId:H,visible:!0}),F.visibleWrites=ma(F.visibleWrites,R,B),F.lastWriteId=H}function ud(F,R){for(let B=0;B<F.allWrites.length;B++){const H=F.allWrites[B];if(H.writeId===R)return H}return null}function cd(F,R){const B=F.allWrites.findIndex(ve=>ve.writeId===R);xe.assert(B>=0,"removeWrite called with nonexistent writeId.");const H=F.allWrites[B];F.allWrites.splice(B,1);let Z=H.visible,se=!1,pe=F.allWrites.length-1;for(;Z&&pe>=0;){const ve=F.allWrites[pe];ve.visible&&(pe>=B&&pd(ve,H.path)?Z=!1:tn(H.path,ve.path)&&(se=!0)),pe--}if(Z){if(se)return dd(F),!0;if(H.snap)F.visibleWrites=Ol(F.visibleWrites,H.path);else{const ve=H.children;Ar(ve,we=>{F.visibleWrites=Ol(F.visibleWrites,fr(H.path,we))})}return!0}else return!1}function pd(F,R){if(F.snap)return tn(F.path,R);for(const B in F.children)if(F.children.hasOwnProperty(B)&&tn(fr(F.path,B),R))return!0;return!1}function dd(F){F.visibleWrites=Al(F.allWrites,fd,Vt()),F.allWrites.length>0?F.lastWriteId=F.allWrites[F.allWrites.length-1].writeId:F.lastWriteId=-1}function fd(F){return F.visible}function Al(F,R,B){let H=cn.empty();for(let Z=0;Z<F.length;++Z){const se=F[Z];if(R(se)){const pe=se.path;let ve;if(se.snap)tn(B,pe)?(ve=Mr(B,pe),H=Pi(H,ve,se.snap)):tn(pe,B)&&(ve=Mr(pe,B),H=Pi(H,Vt(),se.snap.getChild(ve)));else if(se.children){if(tn(B,pe))ve=Mr(B,pe),H=ma(H,ve,se.children);else if(tn(pe,B))if(ve=Mr(pe,B),Pt(ve))H=ma(H,Vt(),se.children);else{const we=xe.safeGet(se.children,It(ve));if(we){const Re=we.getChild(or(ve));H=Pi(H,Vt(),Re)}}}else throw xe.assertionError("WriteRecord should have .snap or .children")}}return H}function Rl(F,R,B,H,Z){if(!H&&!Z){const se=Jn(F.visibleWrites,R);if(se!=null)return se;{const pe=Nn(F.visibleWrites,R);if(va(pe))return B;if(B==null&&!ya(pe,Vt()))return null;{const ve=B||ht.EMPTY_NODE;return ai(pe,ve)}}}else{const se=Nn(F.visibleWrites,R);if(!Z&&va(se))return B;if(!Z&&B==null&&!ya(se,Vt()))return null;{const pe=function(Re){return(Re.visible||Z)&&(!H||!~H.indexOf(Re.writeId))&&(tn(Re.path,R)||tn(R,Re.path))},ve=Al(F.allWrites,pe,R),we=B||ht.EMPTY_NODE;return ai(ve,we)}}}function hd(F,R,B){let H=ht.EMPTY_NODE;const Z=Jn(F.visibleWrites,R);if(Z)return Z.isLeafNode()||Z.forEachChild(sr,(se,pe)=>{H=H.updateImmediateChild(se,pe)}),H;if(B){const se=Nn(F.visibleWrites,R);return B.forEachChild(sr,(pe,ve)=>{const we=ai(Nn(se,new Jt(pe)),ve);H=H.updateImmediateChild(pe,we)}),wl(se).forEach(pe=>{H=H.updateImmediateChild(pe.name,pe.node)}),H}else{const se=Nn(F.visibleWrites,R);return wl(se).forEach(pe=>{H=H.updateImmediateChild(pe.name,pe.node)}),H}}function gd(F,R,B,H,Z){xe.assert(H||Z,"Either existingEventSnap or existingServerSnap must exist");const se=fr(R,B);if(ya(F.visibleWrites,se))return null;{const pe=Nn(F.visibleWrites,se);return va(pe)?Z.getChild(B):ai(pe,Z.getChild(B))}}function yd(F,R,B,H){const Z=fr(R,B),se=Jn(F.visibleWrites,Z);if(se!=null)return se;if(H.isCompleteForChild(B)){const pe=Nn(F.visibleWrites,Z);return ai(pe,H.getNode().getImmediateChild(B))}else return null}function vd(F,R){return Jn(F.visibleWrites,R)}function _d(F,R,B,H,Z,se,pe){let ve;const we=Nn(F.visibleWrites,R),Re=Jn(we,Vt());if(Re!=null)ve=Re;else if(B!=null)ve=ai(we,B);else return[];if(ve=ve.withIndex(pe),!ve.isEmpty()&&!ve.isLeafNode()){const qe=[],Ue=pe.getCompare(),Ke=se?ve.getReverseIteratorFrom(H,pe):ve.getIteratorFrom(H,pe);let it=Ke.getNext();for(;it&&qe.length<Z;)Ue(it,H)!==0&&qe.push(it),it=Ke.getNext();return qe}else return[]}function bd(){return{visibleWrites:cn.empty(),allWrites:[],lastWriteId:-1}}function ho(F,R,B,H){return Rl(F.writeTree,F.treePath,R,B,H)}function _a(F,R){return hd(F.writeTree,F.treePath,R)}function Cl(F,R,B,H){return gd(F.writeTree,F.treePath,R,B,H)}function go(F,R){return vd(F.writeTree,fr(F.treePath,R))}function Ed(F,R,B,H,Z,se){return _d(F.writeTree,F.treePath,R,B,H,Z,se)}function ba(F,R,B){return yd(F.writeTree,F.treePath,R,B)}function Il(F,R){return Pl(fr(F.treePath,R),F.writeTree)}function Pl(F,R){return{treePath:F,writeTree:R}}class Sd{constructor(){this.changeMap=new Map}trackChildChange(R){const B=R.type,H=R.childName;xe.assert(B==="child_added"||B==="child_changed"||B==="child_removed","Only child changes supported for tracking"),xe.assert(H!==".priority","Only non-priority child changes can be tracked.");const Z=this.changeMap.get(H);if(Z){const se=Z.type;if(B==="child_added"&&se==="child_removed")this.changeMap.set(H,Ti(H,R.snapshotNode,Z.snapshotNode));else if(B==="child_removed"&&se==="child_added")this.changeMap.delete(H);else if(B==="child_removed"&&se==="child_changed")this.changeMap.set(H,wi(H,Z.oldSnap));else if(B==="child_changed"&&se==="child_added")this.changeMap.set(H,ni(H,R.snapshotNode));else if(B==="child_changed"&&se==="child_changed")this.changeMap.set(H,Ti(H,R.snapshotNode,Z.oldSnap));else throw xe.assertionError("Illegal combination of changes: "+R+" occurred after "+Z)}else this.changeMap.set(H,R)}getChanges(){return Array.from(this.changeMap.values())}}class Od{getCompleteChild(R){return null}getChildAfterChild(R,B,H){return null}}const Nl=new Od;class Ea{constructor(R,B,H=null){this.writes_=R,this.viewCache_=B,this.optCompleteServerCache_=H}getCompleteChild(R){const B=this.viewCache_.eventCache;if(B.isCompleteForChild(R))return B.getNode().getImmediateChild(R);{const H=this.optCompleteServerCache_!=null?new Pn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ba(this.writes_,R,H)}}getChildAfterChild(R,B,H){const Z=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Wn(this.viewCache_),se=Ed(this.writes_,Z,B,1,H,R);return se.length===0?null:se[0]}}function wd(F){return{filter:F}}function Td(F,R){xe.assert(R.eventCache.getNode().isIndexed(F.filter.getIndex()),"Event snap not indexed"),xe.assert(R.serverCache.getNode().isIndexed(F.filter.getIndex()),"Server snap not indexed")}function Ad(F,R,B,H,Z){const se=new Sd;let pe,ve;if(B.type===un.OVERWRITE){const Re=B;Re.source.fromUser?pe=Sa(F,R,Re.path,Re.snap,H,Z,se):(xe.assert(Re.source.fromServer,"Unknown source."),ve=Re.source.tagged||R.serverCache.isFiltered()&&!Pt(Re.path),pe=mo(F,R,Re.path,Re.snap,H,Z,ve,se))}else if(B.type===un.MERGE){const Re=B;Re.source.fromUser?pe=Cd(F,R,Re.path,Re.children,H,Z,se):(xe.assert(Re.source.fromServer,"Unknown source."),ve=Re.source.tagged||R.serverCache.isFiltered(),pe=Oa(F,R,Re.path,Re.children,H,Z,ve,se))}else if(B.type===un.ACK_USER_WRITE){const Re=B;Re.revert?pe=Nd(F,R,Re.path,H,Z,se):pe=Id(F,R,Re.path,Re.affectedTree,H,Z,se)}else if(B.type===un.LISTEN_COMPLETE)pe=Pd(F,R,B.path,H,se);else throw xe.assertionError("Unknown operation type: "+B.type);const we=se.getChanges();return Rd(R,pe,we),{viewCache:pe,changes:we}}function Rd(F,R,B){const H=R.eventCache;if(H.isFullyInitialized()){const Z=H.getNode().isLeafNode()||H.getNode().isEmpty(),se=po(F);(B.length>0||!F.eventCache.isFullyInitialized()||Z&&!H.getNode().equals(se)||!H.getNode().getPriority().equals(se.getPriority()))&&B.push(vl(po(R)))}}function xl(F,R,B,H,Z,se){const pe=R.eventCache;if(go(H,B)!=null)return R;{let ve,we;if(Pt(B))if(xe.assert(R.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),R.serverCache.isFiltered()){const Re=Wn(R),qe=Re instanceof ht?Re:ht.EMPTY_NODE,Ue=_a(H,qe);ve=F.filter.updateFullNode(R.eventCache.getNode(),Ue,se)}else{const Re=ho(H,Wn(R));ve=F.filter.updateFullNode(R.eventCache.getNode(),Re,se)}else{const Re=It(B);if(Re===".priority"){xe.assert(In(B)===1,"Can't have a priority with additional path components");const qe=pe.getNode();we=R.serverCache.getNode();const Ue=Cl(H,B,qe,we);Ue!=null?ve=F.filter.updatePriority(qe,Ue):ve=pe.getNode()}else{const qe=or(B);let Ue;if(pe.isCompleteForChild(Re)){we=R.serverCache.getNode();const Ke=Cl(H,B,pe.getNode(),we);Ke!=null?Ue=pe.getNode().getImmediateChild(Re).updateChild(qe,Ke):Ue=pe.getNode().getImmediateChild(Re)}else Ue=ba(H,Re,R.serverCache);Ue!=null?ve=F.filter.updateChild(pe.getNode(),Re,Ue,qe,Z,se):ve=pe.getNode()}}return Ii(R,ve,pe.isFullyInitialized()||Pt(B),F.filter.filtersNodes())}}function mo(F,R,B,H,Z,se,pe,ve){const we=R.serverCache;let Re;const qe=pe?F.filter:F.filter.getIndexedFilter();if(Pt(B))Re=qe.updateFullNode(we.getNode(),H,null);else if(qe.filtersNodes()&&!we.isFiltered()){const it=we.getNode().updateChild(B,H);Re=qe.updateFullNode(we.getNode(),it,null)}else{const it=It(B);if(!we.isCompleteForPath(B)&&In(B)>1)return R;const ft=or(B),Sr=we.getNode().getImmediateChild(it).updateChild(ft,H);it===".priority"?Re=qe.updatePriority(we.getNode(),Sr):Re=qe.updateChild(we.getNode(),it,Sr,ft,Nl,null)}const Ue=Sl(R,Re,we.isFullyInitialized()||Pt(B),qe.filtersNodes()),Ke=new Ea(Z,Ue,se);return xl(F,Ue,B,Z,Ke,ve)}function Sa(F,R,B,H,Z,se,pe){const ve=R.eventCache;let we,Re;const qe=new Ea(Z,R,se);if(Pt(B))Re=F.filter.updateFullNode(R.eventCache.getNode(),H,pe),we=Ii(R,Re,!0,F.filter.filtersNodes());else{const Ue=It(B);if(Ue===".priority")Re=F.filter.updatePriority(R.eventCache.getNode(),H),we=Ii(R,Re,ve.isFullyInitialized(),ve.isFiltered());else{const Ke=or(B),it=ve.getNode().getImmediateChild(Ue);let ft;if(Pt(Ke))ft=H;else{const Bt=qe.getCompleteChild(Ue);Bt!=null?Zo(Ke)===".priority"&&Bt.getChild(ll(Ke)).isEmpty()?ft=Bt:ft=Bt.updateChild(Ke,H):ft=ht.EMPTY_NODE}if(it.equals(ft))we=R;else{const Bt=F.filter.updateChild(ve.getNode(),Ue,ft,Ke,qe,pe);we=Ii(R,Bt,ve.isFullyInitialized(),F.filter.filtersNodes())}}}return we}function Dl(F,R){return F.eventCache.isCompleteForChild(R)}function Cd(F,R,B,H,Z,se,pe){let ve=R;return H.foreach((we,Re)=>{const qe=fr(B,we);Dl(R,It(qe))&&(ve=Sa(F,ve,qe,Re,Z,se,pe))}),H.foreach((we,Re)=>{const qe=fr(B,we);Dl(R,It(qe))||(ve=Sa(F,ve,qe,Re,Z,se,pe))}),ve}function kl(F,R,B){return B.foreach((H,Z)=>{R=R.updateChild(H,Z)}),R}function Oa(F,R,B,H,Z,se,pe,ve){if(R.serverCache.getNode().isEmpty()&&!R.serverCache.isFullyInitialized())return R;let we=R,Re;Pt(B)?Re=H:Re=new lr(null).setTree(B,H);const qe=R.serverCache.getNode();return Re.children.inorderTraversal((Ue,Ke)=>{if(qe.hasChild(Ue)){const it=R.serverCache.getNode().getImmediateChild(Ue),ft=kl(F,it,Ke);we=mo(F,we,new Jt(Ue),ft,Z,se,pe,ve)}}),Re.children.inorderTraversal((Ue,Ke)=>{const it=!R.serverCache.isCompleteForChild(Ue)&&Ke.value===null;if(!qe.hasChild(Ue)&&!it){const ft=R.serverCache.getNode().getImmediateChild(Ue),Bt=kl(F,ft,Ke);we=mo(F,we,new Jt(Ue),Bt,Z,se,pe,ve)}}),we}function Id(F,R,B,H,Z,se,pe){if(go(Z,B)!=null)return R;const ve=R.serverCache.isFiltered(),we=R.serverCache;if(H.value!=null){if(Pt(B)&&we.isFullyInitialized()||we.isCompleteForPath(B))return mo(F,R,B,we.getNode().getChild(B),Z,se,ve,pe);if(Pt(B)){let Re=new lr(null);return we.getNode().forEachChild(bn,(qe,Ue)=>{Re=Re.set(new Jt(qe),Ue)}),Oa(F,R,B,Re,Z,se,ve,pe)}else return R}else{let Re=new lr(null);return H.foreach((qe,Ue)=>{const Ke=fr(B,qe);we.isCompleteForPath(Ke)&&(Re=Re.set(qe,we.getNode().getChild(Ke)))}),Oa(F,R,B,Re,Z,se,ve,pe)}}function Pd(F,R,B,H,Z){const se=R.serverCache,pe=Sl(R,se.getNode(),se.isFullyInitialized()||Pt(B),se.isFiltered());return xl(F,pe,B,H,Nl,Z)}function Nd(F,R,B,H,Z,se){let pe;if(go(H,B)!=null)return R;{const ve=new Ea(H,R,Z),we=R.eventCache.getNode();let Re;if(Pt(B)||It(B)===".priority"){let qe;if(R.serverCache.isFullyInitialized())qe=ho(H,Wn(R));else{const Ue=R.serverCache.getNode();xe.assert(Ue instanceof ht,"serverChildren would be complete if leaf node"),qe=_a(H,Ue)}qe=qe,Re=F.filter.updateFullNode(we,qe,se)}else{const qe=It(B);let Ue=ba(H,qe,R.serverCache);Ue==null&&R.serverCache.isCompleteForChild(qe)&&(Ue=we.getImmediateChild(qe)),Ue!=null?Re=F.filter.updateChild(we,qe,Ue,or(B),ve,se):R.eventCache.getNode().hasChild(qe)?Re=F.filter.updateChild(we,qe,ht.EMPTY_NODE,or(B),ve,se):Re=we,Re.isEmpty()&&R.serverCache.isFullyInitialized()&&(pe=ho(H,Wn(R)),pe.isLeafNode()&&(Re=F.filter.updateFullNode(Re,pe,se)))}return pe=R.serverCache.isFullyInitialized()||go(H,Vt())!=null,Ii(R,Re,pe,F.filter.filtersNodes())}}class xd{constructor(R,B){this.query_=R,this.eventRegistrations_=[];const H=this.query_._queryParams,Z=new sa(H.getIndex()),se=Hp(H);this.processor_=wd(se);const pe=B.serverCache,ve=B.eventCache,we=Z.updateFullNode(ht.EMPTY_NODE,pe.getNode(),null),Re=se.updateFullNode(ht.EMPTY_NODE,ve.getNode(),null),qe=new Pn(we,pe.isFullyInitialized(),Z.filtersNodes()),Ue=new Pn(Re,ve.isFullyInitialized(),se.filtersNodes());this.viewCache_=co(Ue,qe),this.eventGenerator_=new rd(this.query_)}get query(){return this.query_}}function Dd(F){return F.viewCache_.serverCache.getNode()}function kd(F){return po(F.viewCache_)}function jd(F,R){const B=Wn(F.viewCache_);return B&&(F.query._queryParams.loadsAllData()||!Pt(R)&&!B.getImmediateChild(It(R)).isEmpty())?B.getChild(R):null}function jl(F){return F.eventRegistrations_.length===0}function Ld(F,R){F.eventRegistrations_.push(R)}function Ll(F,R,B){const H=[];if(B){xe.assert(R==null,"A cancel should cancel all event registrations.");const Z=F.query._path;F.eventRegistrations_.forEach(se=>{const pe=se.createCancelEvent(B,Z);pe&&H.push(pe)})}if(R){let Z=[];for(let se=0;se<F.eventRegistrations_.length;++se){const pe=F.eventRegistrations_[se];if(!pe.matches(R))Z.push(pe);else if(R.hasAnyCallback()){Z=Z.concat(F.eventRegistrations_.slice(se+1));break}}F.eventRegistrations_=Z}else F.eventRegistrations_=[];return H}function ql(F,R,B,H){R.type===un.MERGE&&R.source.queryId!==null&&(xe.assert(Wn(F.viewCache_),"We should always have a full cache before handling merges"),xe.assert(po(F.viewCache_),"Missing event cache, even though we have a server cache"));const Z=F.viewCache_,se=Ad(F.processor_,Z,R,B,H);return Td(F.processor_,se.viewCache),xe.assert(se.viewCache.serverCache.isFullyInitialized()||!Z.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),F.viewCache_=se.viewCache,Fl(F,se.changes,se.viewCache.eventCache.getNode(),null)}function qd(F,R){const B=F.viewCache_.eventCache,H=[];return B.getNode().isLeafNode()||B.getNode().forEachChild(sr,(se,pe)=>{H.push(ni(se,pe))}),B.isFullyInitialized()&&H.push(vl(B.getNode())),Fl(F,H,B.getNode(),R)}function Fl(F,R,B,H){const Z=H?[H]:F.eventRegistrations_;return nd(F.eventGenerator_,R,B,Z)}let yo;class Ml{constructor(){this.views=new Map}}function Fd(F){xe.assert(!yo,"__referenceConstructor has already been defined"),yo=F}function Md(){return xe.assert(yo,"Reference.ts has not been loaded"),yo}function Ud(F){return F.views.size===0}function wa(F,R,B,H){const Z=R.source.queryId;if(Z!==null){const se=F.views.get(Z);return xe.assert(se!=null,"SyncTree gave us an op for an invalid query."),ql(se,R,B,H)}else{let se=[];for(const pe of F.views.values())se=se.concat(ql(pe,R,B,H));return se}}function Ul(F,R,B,H,Z){const se=R._queryIdentifier,pe=F.views.get(se);if(!pe){let ve=ho(B,Z?H:null),we=!1;ve?we=!0:H instanceof ht?(ve=_a(B,H),we=!1):(ve=ht.EMPTY_NODE,we=!1);const Re=co(new Pn(ve,we,!1),new Pn(H,Z,!1));return new xd(R,Re)}return pe}function Bd(F,R,B,H,Z,se){const pe=Ul(F,R,H,Z,se);return F.views.has(R._queryIdentifier)||F.views.set(R._queryIdentifier,pe),Ld(pe,B),qd(pe,B)}function Vd(F,R,B,H){const Z=R._queryIdentifier,se=[];let pe=[];const ve=Dn(F);if(Z==="default")for(const[we,Re]of F.views.entries())pe=pe.concat(Ll(Re,B,H)),jl(Re)&&(F.views.delete(we),Re.query._queryParams.loadsAllData()||se.push(Re.query));else{const we=F.views.get(Z);we&&(pe=pe.concat(Ll(we,B,H)),jl(we)&&(F.views.delete(Z),we.query._queryParams.loadsAllData()||se.push(we.query)))}return ve&&!Dn(F)&&se.push(new(Md())(R._repo,R._path)),{removed:se,events:pe}}function Bl(F){const R=[];for(const B of F.views.values())B.query._queryParams.loadsAllData()||R.push(B);return R}function xn(F,R){let B=null;for(const H of F.views.values())B=B||jd(H,R);return B}function Vl(F,R){if(R._queryParams.loadsAllData())return vo(F);{const H=R._queryIdentifier;return F.views.get(H)}}function $l(F,R){return Vl(F,R)!=null}function Dn(F){return vo(F)!=null}function vo(F){for(const R of F.views.values())if(R.query._queryParams.loadsAllData())return R;return null}let _o;function $d(F){xe.assert(!_o,"__referenceConstructor has already been defined"),_o=F}function Gd(){return xe.assert(_o,"Reference.ts has not been loaded"),_o}let Hd=1;class Gl{constructor(R){this.listenProvider_=R,this.syncPointTree_=new lr(null),this.pendingWriteTree_=bd(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ta(F,R,B,H,Z){return sd(F.pendingWriteTree_,R,B,H,Z),Z?si(F,new Kn(da(),R,B)):[]}function Kd(F,R,B,H){ld(F.pendingWriteTree_,R,B,H);const Z=lr.fromObject(B);return si(F,new oi(da(),R,Z))}function kn(F,R,B=!1){const H=ud(F.pendingWriteTree_,R);if(cd(F.pendingWriteTree_,R)){let se=new lr(null);return H.snap!=null?se=se.set(Vt(),!0):Ar(H.children,pe=>{se=se.set(new Jt(pe),!0)}),si(F,new uo(H.path,se,B))}else return[]}function Ni(F,R,B){return si(F,new Kn(fa(),R,B))}function Wd(F,R,B){const H=lr.fromObject(B);return si(F,new oi(fa(),R,H))}function Jd(F,R){return si(F,new Ri(fa(),R))}function zd(F,R,B){const H=Ra(F,B);if(H){const Z=Ca(H),se=Z.path,pe=Z.queryId,ve=Mr(se,R),we=new Ri(ha(pe),ve);return Ia(F,se,we)}else return[]}function bo(F,R,B,H,Z=!1){const se=R._path,pe=F.syncPointTree_.get(se);let ve=[];if(pe&&(R._queryIdentifier==="default"||$l(pe,R))){const we=Vd(pe,R,B,H);Ud(pe)&&(F.syncPointTree_=F.syncPointTree_.remove(se));const Re=we.removed;if(ve=we.events,!Z){const qe=Re.findIndex(Ke=>Ke._queryParams.loadsAllData())!==-1,Ue=F.syncPointTree_.findOnPath(se,(Ke,it)=>Dn(it));if(qe&&!Ue){const Ke=F.syncPointTree_.subtree(se);if(!Ke.isEmpty()){const it=Xd(Ke);for(let ft=0;ft<it.length;++ft){const Bt=it[ft],Sr=Bt.query,Fn=Jl(F,Bt);F.listenProvider_.startListening(Di(Sr),xi(F,Sr),Fn.hashFn,Fn.onComplete)}}}!Ue&&Re.length>0&&!H&&(qe?F.listenProvider_.stopListening(Di(R),null):Re.forEach(Ke=>{const it=F.queryToTagMap.get(So(Ke));F.listenProvider_.stopListening(Di(Ke),it)}))}Zd(F,Re)}return ve}function Hl(F,R,B,H){const Z=Ra(F,H);if(Z!=null){const se=Ca(Z),pe=se.path,ve=se.queryId,we=Mr(pe,R),Re=new Kn(ha(ve),we,B);return Ia(F,pe,Re)}else return[]}function Yd(F,R,B,H){const Z=Ra(F,H);if(Z){const se=Ca(Z),pe=se.path,ve=se.queryId,we=Mr(pe,R),Re=lr.fromObject(B),qe=new oi(ha(ve),we,Re);return Ia(F,pe,qe)}else return[]}function Aa(F,R,B,H=!1){const Z=R._path;let se=null,pe=!1;F.syncPointTree_.foreachOnPath(Z,(Ke,it)=>{const ft=Mr(Ke,Z);se=se||xn(it,ft),pe=pe||Dn(it)});let ve=F.syncPointTree_.get(Z);ve?(pe=pe||Dn(ve),se=se||xn(ve,Vt())):(ve=new Ml,F.syncPointTree_=F.syncPointTree_.set(Z,ve));let we;se!=null?we=!0:(we=!1,se=ht.EMPTY_NODE,F.syncPointTree_.subtree(Z).foreachChild((it,ft)=>{const Bt=xn(ft,Vt());Bt&&(se=se.updateImmediateChild(it,Bt))}));const Re=$l(ve,R);if(!Re&&!R._queryParams.loadsAllData()){const Ke=So(R);xe.assert(!F.queryToTagMap.has(Ke),"View does not exist, but we have a tag");const it=ef();F.queryToTagMap.set(Ke,it),F.tagToQueryMap.set(it,Ke)}const qe=fo(F.pendingWriteTree_,Z);let Ue=Bd(ve,R,B,qe,se,we);if(!Re&&!pe&&!H){const Ke=Vl(ve,R);Ue=Ue.concat(tf(F,R,Ke))}return Ue}function Eo(F,R,B){const Z=F.pendingWriteTree_,se=F.syncPointTree_.findOnPath(R,(pe,ve)=>{const we=Mr(pe,R),Re=xn(ve,we);if(Re)return Re});return Rl(Z,R,se,B,!0)}function Qd(F,R){const B=R._path;let H=null;F.syncPointTree_.foreachOnPath(B,(Re,qe)=>{const Ue=Mr(Re,B);H=H||xn(qe,Ue)});let Z=F.syncPointTree_.get(B);Z?H=H||xn(Z,Vt()):(Z=new Ml,F.syncPointTree_=F.syncPointTree_.set(B,Z));const se=H!=null,pe=se?new Pn(H,!0,!1):null,ve=fo(F.pendingWriteTree_,R._path),we=Ul(Z,R,ve,se?pe.getNode():ht.EMPTY_NODE,se);return kd(we)}function si(F,R){return Kl(R,F.syncPointTree_,null,fo(F.pendingWriteTree_,Vt()))}function Kl(F,R,B,H){if(Pt(F.path))return Wl(F,R,B,H);{const Z=R.get(Vt());B==null&&Z!=null&&(B=xn(Z,Vt()));let se=[];const pe=It(F.path),ve=F.operationForChild(pe),we=R.children.get(pe);if(we&&ve){const Re=B?B.getImmediateChild(pe):null,qe=Il(H,pe);se=se.concat(Kl(ve,we,Re,qe))}return Z&&(se=se.concat(wa(Z,F,H,B))),se}}function Wl(F,R,B,H){const Z=R.get(Vt());B==null&&Z!=null&&(B=xn(Z,Vt()));let se=[];return R.children.inorderTraversal((pe,ve)=>{const we=B?B.getImmediateChild(pe):null,Re=Il(H,pe),qe=F.operationForChild(pe);qe&&(se=se.concat(Wl(qe,ve,we,Re)))}),Z&&(se=se.concat(wa(Z,F,H,B))),se}function Jl(F,R){const B=R.query,H=xi(F,B);return{hashFn:()=>(Dd(R)||ht.EMPTY_NODE).hash(),onComplete:Z=>{if(Z==="ok")return H?zd(F,B._path,H):Jd(F,B._path);{const se=$c(Z,B);return bo(F,B,null,se)}}}}function xi(F,R){const B=So(R);return F.queryToTagMap.get(B)}function So(F){return F._path.toString()+"$"+F._queryIdentifier}function Ra(F,R){return F.tagToQueryMap.get(R)}function Ca(F){const R=F.indexOf("$");return xe.assert(R!==-1&&R<F.length-1,"Bad queryKey."),{queryId:F.substr(R+1),path:new Jt(F.substr(0,R))}}function Ia(F,R,B){const H=F.syncPointTree_.get(R);xe.assert(H,"Missing sync point for query tag that we're tracking");const Z=fo(F.pendingWriteTree_,R);return wa(H,B,Z,null)}function Xd(F){return F.fold((R,B,H)=>{if(B&&Dn(B))return[vo(B)];{let Z=[];return B&&(Z=Bl(B)),Ar(H,(se,pe)=>{Z=Z.concat(pe)}),Z}})}function Di(F){return F._queryParams.loadsAllData()&&!F._queryParams.isDefault()?new(Gd())(F._repo,F._path):F}function Zd(F,R){for(let B=0;B<R.length;++B){const H=R[B];if(!H._queryParams.loadsAllData()){const Z=So(H),se=F.queryToTagMap.get(Z);F.queryToTagMap.delete(Z),F.tagToQueryMap.delete(se)}}}function ef(){return Hd++}function tf(F,R,B){const H=R._path,Z=xi(F,R),se=Jl(F,B),pe=F.listenProvider_.startListening(Di(R),Z,se.hashFn,se.onComplete),ve=F.syncPointTree_.subtree(H);if(Z)xe.assert(!Dn(ve.value),"If we're adding a query, it shouldn't be shadowed");else{const we=ve.fold((Re,qe,Ue)=>{if(!Pt(Re)&&qe&&Dn(qe))return[vo(qe).query];{let Ke=[];return qe&&(Ke=Ke.concat(Bl(qe).map(it=>it.query))),Ar(Ue,(it,ft)=>{Ke=Ke.concat(ft)}),Ke}});for(let Re=0;Re<we.length;++Re){const qe=we[Re];F.listenProvider_.stopListening(Di(qe),xi(F,qe))}}return pe}class Pa{constructor(R){this.node_=R}getImmediateChild(R){const B=this.node_.getImmediateChild(R);return new Pa(B)}node(){return this.node_}}class Na{constructor(R,B){this.syncTree_=R,this.path_=B}getImmediateChild(R){const B=fr(this.path_,R);return new Na(this.syncTree_,B)}node(){return Eo(this.syncTree_,this.path_)}}const rf=function(F){return F=F||{},F.timestamp=F.timestamp||new Date().getTime(),F},zl=function(F,R,B){if(!F||typeof F!="object")return F;if(xe.assert(".sv"in F,"Unexpected leaf node or priority contents"),typeof F[".sv"]=="string")return nf(F[".sv"],R,B);if(typeof F[".sv"]=="object")return of(F[".sv"],R);xe.assert(!1,"Unexpected server value: "+JSON.stringify(F,null,2))},nf=function(F,R,B){if(F==="timestamp")return B.timestamp;xe.assert(!1,"Unexpected server value: "+F)},of=function(F,R,B){F.hasOwnProperty("increment")||xe.assert(!1,"Unexpected server value: "+JSON.stringify(F,null,2));const H=F.increment;typeof H!="number"&&xe.assert(!1,"Unexpected increment value: "+H);const Z=R.node();if(xe.assert(Z!==null&&typeof Z<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!Z.isLeafNode())return H;const pe=Z.getValue();return typeof pe!="number"?H:pe+H},Yl=function(F,R,B,H){return Da(R,new Na(B,F),H)},xa=function(F,R,B){return Da(F,new Pa(R),B)};function Da(F,R,B){const H=F.getPriority().val(),Z=zl(H,R.getImmediateChild(".priority"),B);let se;if(F.isLeafNode()){const pe=F,ve=zl(pe.getValue(),R,B);return ve!==pe.getValue()||Z!==pe.getPriority().val()?new Cr(ve,gr(Z)):F}else{const pe=F;return se=pe,Z!==pe.getPriority().val()&&(se=se.updatePriority(new Cr(Z))),pe.forEachChild(sr,(ve,we)=>{const Re=Da(we,R.getImmediateChild(ve),B);Re!==we&&(se=se.updateImmediateChild(ve,Re))}),se}}class ka{constructor(R="",B=null,H={children:{},childCount:0}){this.name=R,this.parent=B,this.node=H}}function Oo(F,R){let B=R instanceof Jt?R:new Jt(R),H=F,Z=It(B);for(;Z!==null;){const se=xe.safeGet(H.node.children,Z)||{children:{},childCount:0};H=new ka(Z,H,se),B=or(B),Z=It(B)}return H}function zn(F){return F.node.value}function ja(F,R){F.node.value=R,La(F)}function Ql(F){return F.node.childCount>0}function af(F){return zn(F)===void 0&&!Ql(F)}function wo(F,R){Ar(F.node.children,(B,H)=>{R(new ka(B,F,H))})}function Xl(F,R,B,H){B&&R(F),wo(F,Z=>{Xl(Z,R,!0)})}function sf(F,R,B){let H=F.parent;for(;H!==null;){if(R(H))return!0;H=H.parent}return!1}function ki(F){return new Jt(F.parent===null?F.name:ki(F.parent)+"/"+F.name)}function La(F){F.parent!==null&&lf(F.parent,F.name,F)}function lf(F,R,B){const H=af(B),Z=xe.contains(F.node.children,R);H&&Z?(delete F.node.children[R],F.node.childCount--,La(F)):!H&&!Z&&(F.node.children[R]=B.node,F.node.childCount++,La(F))}const uf=/[\[\].#$\/\u0000-\u001F\u007F]/,cf=/[\[\].#$\u0000-\u001F\u007F]/,qa=10*1024*1024,To=function(F){return typeof F=="string"&&F.length!==0&&!uf.test(F)},Zl=function(F){return typeof F=="string"&&F.length!==0&&!cf.test(F)},pf=function(F){return F&&(F=F.replace(/^\/*\.info(\/|$)/,"/")),Zl(F)},ji=function(F){return F===null||typeof F=="string"||typeof F=="number"&&!Zi(F)||F&&typeof F=="object"&&xe.contains(F,".sv")},En=function(F,R,B,H){H&&R===void 0||Li(xe.errorPrefix(F,"value"),R,B)},Li=function(F,R,B){const H=B instanceof Jt?new Tp(B,F):B;if(R===void 0)throw new Error(F+"contains undefined "+Hn(H));if(typeof R=="function")throw new Error(F+"contains a function "+Hn(H)+" with contents = "+R.toString());if(Zi(R))throw new Error(F+"contains "+R.toString()+" "+Hn(H));if(typeof R=="string"&&R.length>qa/3&&xe.stringLength(R)>qa)throw new Error(F+"contains a string greater than "+qa+" utf8 bytes "+Hn(H)+" ('"+R.substring(0,50)+"...')");if(R&&typeof R=="object"){let Z=!1,se=!1;if(Ar(R,(pe,ve)=>{if(pe===".value")Z=!0;else if(pe!==".priority"&&pe!==".sv"&&(se=!0,!To(pe)))throw new Error(F+" contains an invalid key ("+pe+") "+Hn(H)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Ap(H,pe),Li(F,ve,H),Rp(H)}),Z&&se)throw new Error(F+' contains ".value" child '+Hn(H)+" in addition to actual children.")}},df=function(F,R){let B,H;for(B=0;B<R.length;B++){H=R[B];const se=bi(H);for(let pe=0;pe<se.length;pe++)if(!(se[pe]===".priority"&&pe===se.length-1)){if(!To(se[pe]))throw new Error(F+"contains an invalid key ("+se[pe]+") in path "+H.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}R.sort(wp);let Z=null;for(B=0;B<R.length;B++){if(H=R[B],Z!==null&&tn(Z,H))throw new Error(F+"contains a path "+Z.toString()+" that is ancestor of another path "+H.toString());Z=H}},eu=function(F,R,B,H){const Z=xe.errorPrefix(F,"values");if(!(R&&typeof R=="object")||Array.isArray(R))throw new Error(Z+" must be an object containing the children to replace.");const se=[];Ar(R,(pe,ve)=>{const we=new Jt(pe);if(Li(Z,ve,fr(B,we)),Zo(we)===".priority"&&!ji(ve))throw new Error(Z+"contains an invalid value for '"+we.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");se.push(we)}),df(Z,se)},Fa=function(F,R,B){if(Zi(R))throw new Error(xe.errorPrefix(F,"priority")+"is "+R.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ji(R))throw new Error(xe.errorPrefix(F,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},qi=function(F,R,B,H){if(B!==void 0&&!To(B))throw new Error(xe.errorPrefix(F,R)+'was an invalid key = "'+B+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Ao=function(F,R,B,H){if(!(H&&B===void 0)&&!Zl(B))throw new Error(xe.errorPrefix(F,R)+'was an invalid path = "'+B+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},ff=function(F,R,B,H){B&&(B=B.replace(/^\/*\.info(\/|$)/,"/")),Ao(F,R,B,H)},pn=function(F,R){if(It(R)===".info")throw new Error(F+" failed = Can't modify data under /.info/")},tu=function(F,R){const B=R.path.toString();if(typeof R.repoInfo.host!="string"||R.repoInfo.host.length===0||!To(R.repoInfo.namespace)&&R.repoInfo.host.split(":")[0]!=="localhost"||B.length!==0&&!pf(B))throw new Error(xe.errorPrefix(F,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class hf{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ro(F,R){let B=null;for(let H=0;H<R.length;H++){const Z=R[H],se=Z.getPath();B!==null&&!ea(se,B.path)&&(F.eventLists_.push(B),B=null),B===null&&(B={events:[],path:se}),B.events.push(Z)}B&&F.eventLists_.push(B)}function ru(F,R,B){Ro(F,B),nu(F,H=>ea(H,R))}function Kr(F,R,B){Ro(F,B),nu(F,H=>tn(H,R)||tn(R,H))}function nu(F,R){F.recursionDepth_++;let B=!0;for(let H=0;H<F.eventLists_.length;H++){const Z=F.eventLists_[H];if(Z){const se=Z.path;R(se)?(gf(F.eventLists_[H]),F.eventLists_[H]=null):B=!1}}B&&(F.eventLists_=[]),F.recursionDepth_--}function gf(F){for(let R=0;R<F.events.length;R++){const B=F.events[R];if(B!==null){F.events[R]=null;const H=B.getEventRunner();$n&&Tr("event: "+B.toString()),Zn(H)}}}const iu="repo_interrupt",mf=25;class yf{constructor(R,B,H,Z){this.repoInfo_=R,this.forceRestClient_=B,this.authTokenProvider_=H,this.appCheckProvider_=Z,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new hf,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=lo(),this.transactionQueueTree_=new ka,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function vf(F,R,B){if(F.stats_=zo(F.repoInfo_),F.forceRestClient_||Wc())F.server_=new so(F.repoInfo_,(H,Z,se,pe)=>{au(F,H,Z,se,pe)},F.authTokenProvider_,F.appCheckProvider_),setTimeout(()=>su(F,!0),0);else{if(typeof B<"u"&&B!==null){if(typeof B!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{xe.stringify(B)}catch(H){throw new Error("Invalid authOverride provided: "+H)}}F.persistentConnection_=new rn(F.repoInfo_,R,(H,Z,se,pe)=>{au(F,H,Z,se,pe)},H=>{su(F,H)},H=>{_f(F,H)},F.authTokenProvider_,F.appCheckProvider_,B),F.server_=F.persistentConnection_}F.authTokenProvider_.addTokenChangeListener(H=>{F.server_.refreshAuthToken(H)}),F.appCheckProvider_.addTokenChangeListener(H=>{F.server_.refreshAppCheckToken(H.token)}),F.statsReporter_=Yc(F.repoInfo_,()=>new td(F.stats_,F.server_)),F.infoData_=new Yp,F.infoSyncTree_=new Gl({startListening:(H,Z,se,pe)=>{let ve=[];const we=F.infoData_.getNode(H._path);return we.isEmpty()||(ve=Ni(F.infoSyncTree_,H._path,we),setTimeout(()=>{pe("ok")},0)),ve},stopListening:()=>{}}),Ma(F,"connected",!1),F.serverSyncTree_=new Gl({startListening:(H,Z,se,pe)=>(F.server_.listen(H,se,Z,(ve,we)=>{const Re=pe(ve,we);Kr(F.eventQueue_,H._path,Re)}),[]),stopListening:(H,Z)=>{F.server_.unlisten(H,Z)}})}function ou(F){const B=F.infoData_.getNode(new Jt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+B}function Fi(F){return rf({timestamp:ou(F)})}function au(F,R,B,H,Z){F.dataUpdateCount++;const se=new Jt(R);B=F.interceptServerDataCallback_?F.interceptServerDataCallback_(R,B):B;let pe=[];if(Z)if(H){const we=xe.map(B,Re=>gr(Re));pe=Yd(F.serverSyncTree_,se,we,Z)}else{const we=gr(B);pe=Hl(F.serverSyncTree_,se,we,Z)}else if(H){const we=xe.map(B,Re=>gr(Re));pe=Wd(F.serverSyncTree_,se,we)}else{const we=gr(B);pe=Ni(F.serverSyncTree_,se,we)}let ve=se;pe.length>0&&(ve=ui(F,se)),Kr(F.eventQueue_,ve,pe)}function su(F,R){Ma(F,"connected",R),R===!1&&Sf(F)}function _f(F,R){Ar(R,(B,H)=>{Ma(F,B,H)})}function Ma(F,R,B){const H=new Jt("/.info/"+R),Z=gr(B);F.infoData_.updateSnapshot(H,Z);const se=Ni(F.infoSyncTree_,H,Z);Kr(F.eventQueue_,H,se)}function Co(F){return F.nextWriteId_++}function bf(F,R,B){const H=Qd(F.serverSyncTree_,R);return H!=null?Promise.resolve(H):F.server_.get(R).then(Z=>{const se=gr(Z).withIndex(R._queryParams.getIndex());Aa(F.serverSyncTree_,R,B,!0);let pe;if(R._queryParams.loadsAllData())pe=Ni(F.serverSyncTree_,R._path,se);else{const ve=xi(F.serverSyncTree_,R);pe=Hl(F.serverSyncTree_,R._path,se,ve)}return Kr(F.eventQueue_,R._path,pe),bo(F.serverSyncTree_,R,B,null,!0),se},Z=>(li(F,"get for query "+xe.stringify(R)+" failed: "+Z),Promise.reject(new Error(Z))))}function Ua(F,R,B,H,Z){li(F,"set",{path:R.toString(),value:B,priority:H});const se=Fi(F),pe=gr(B,H),ve=Eo(F.serverSyncTree_,R),we=xa(pe,ve,se),Re=Co(F),qe=Ta(F.serverSyncTree_,R,we,Re,!0);Ro(F.eventQueue_,qe),F.server_.put(R.toString(),pe.val(!0),(Ke,it)=>{const ft=Ke==="ok";ft||kr("set at "+R+" failed: "+Ke);const Bt=kn(F.serverSyncTree_,Re,!ft);Kr(F.eventQueue_,R,Bt),jn(F,Z,Ke,it)});const Ue=$a(F,R);ui(F,Ue),Kr(F.eventQueue_,Ue,[])}function Ef(F,R,B,H){li(F,"update",{path:R.toString(),value:B});let Z=!0;const se=Fi(F),pe={};if(Ar(B,(ve,we)=>{Z=!1,pe[ve]=Yl(fr(R,ve),gr(we),F.serverSyncTree_,se)}),Z)Tr("update() called with empty data.  Don't do anything."),jn(F,H,"ok",void 0);else{const ve=Co(F),we=Kd(F.serverSyncTree_,R,pe,ve);Ro(F.eventQueue_,we),F.server_.merge(R.toString(),B,(Re,qe)=>{const Ue=Re==="ok";Ue||kr("update at "+R+" failed: "+Re);const Ke=kn(F.serverSyncTree_,ve,!Ue),it=Ke.length>0?ui(F,R):R;Kr(F.eventQueue_,it,Ke),jn(F,H,Re,qe)}),Ar(B,Re=>{const qe=$a(F,fr(R,Re));ui(F,qe)}),Kr(F.eventQueue_,R,[])}}function Sf(F){li(F,"onDisconnectEvents");const R=Fi(F),B=lo();pa(F.onDisconnect_,Vt(),(Z,se)=>{const pe=Yl(Z,se,F.serverSyncTree_,R);ii(B,Z,pe)});let H=[];pa(B,Vt(),(Z,se)=>{H=H.concat(Ni(F.serverSyncTree_,Z,se));const pe=$a(F,Z);ui(F,pe)}),F.onDisconnect_=lo(),Kr(F.eventQueue_,Vt(),H)}function Of(F,R,B){F.server_.onDisconnectCancel(R.toString(),(H,Z)=>{H==="ok"&&ca(F.onDisconnect_,R),jn(F,B,H,Z)})}function lu(F,R,B,H){const Z=gr(B);F.server_.onDisconnectPut(R.toString(),Z.val(!0),(se,pe)=>{se==="ok"&&ii(F.onDisconnect_,R,Z),jn(F,H,se,pe)})}function wf(F,R,B,H,Z){const se=gr(B,H);F.server_.onDisconnectPut(R.toString(),se.val(!0),(pe,ve)=>{pe==="ok"&&ii(F.onDisconnect_,R,se),jn(F,Z,pe,ve)})}function Tf(F,R,B,H){if(xe.isEmpty(B)){Tr("onDisconnect().update() called with empty data.  Don't do anything."),jn(F,H,"ok",void 0);return}F.server_.onDisconnectMerge(R.toString(),B,(Z,se)=>{Z==="ok"&&Ar(B,(pe,ve)=>{const we=gr(ve);ii(F.onDisconnect_,fr(R,pe),we)}),jn(F,H,Z,se)})}function Af(F,R,B){let H;It(R._path)===".info"?H=Aa(F.infoSyncTree_,R,B):H=Aa(F.serverSyncTree_,R,B),ru(F.eventQueue_,R._path,H)}function Ba(F,R,B){let H;It(R._path)===".info"?H=bo(F.infoSyncTree_,R,B):H=bo(F.serverSyncTree_,R,B),ru(F.eventQueue_,R._path,H)}function uu(F){F.persistentConnection_&&F.persistentConnection_.interrupt(iu)}function Rf(F){F.persistentConnection_&&F.persistentConnection_.resume(iu)}function li(F,...R){let B="";F.persistentConnection_&&(B=F.persistentConnection_.id+":"),Tr(B,...R)}function jn(F,R,B,H){R&&Zn(()=>{if(B==="ok")R(null);else{const Z=(B||"error").toUpperCase();let se=Z;H&&(se+=": "+H);const pe=new Error(se);pe.code=Z,R(pe)}})}function Cf(F,R,B,H,Z,se){li(F,"transaction on "+R);const pe={path:R,update:B,onComplete:H,status:null,order:Ls(),applyLocally:se,retryCount:0,unwatcher:Z,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},ve=Va(F,R,void 0);pe.currentInputSnapshot=ve;const we=pe.update(ve.val());if(we===void 0)pe.unwatcher(),pe.currentOutputSnapshotRaw=null,pe.currentOutputSnapshotResolved=null,pe.onComplete&&pe.onComplete(null,!1,pe.currentInputSnapshot);else{Li("transaction failed: Data returned ",we,pe.path),pe.status=0;const Re=Oo(F.transactionQueueTree_,R),qe=zn(Re)||[];qe.push(pe),ja(Re,qe);let Ue;typeof we=="object"&&we!==null&&xe.contains(we,".priority")?(Ue=xe.safeGet(we,".priority"),xe.assert(ji(Ue),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Ue=(Eo(F.serverSyncTree_,R)||ht.EMPTY_NODE).getPriority().val();const Ke=Fi(F),it=gr(we,Ue),ft=xa(it,ve,Ke);pe.currentOutputSnapshotRaw=it,pe.currentOutputSnapshotResolved=ft,pe.currentWriteId=Co(F);const Bt=Ta(F.serverSyncTree_,R,ft,pe.currentWriteId,pe.applyLocally);Kr(F.eventQueue_,R,Bt),Io(F,F.transactionQueueTree_)}}function Va(F,R,B){return Eo(F.serverSyncTree_,R,B)||ht.EMPTY_NODE}function Io(F,R=F.transactionQueueTree_){if(R||Po(F,R),zn(R)){const B=pu(F,R);xe.assert(B.length>0,"Sending zero length transaction queue"),B.every(Z=>Z.status===0)&&If(F,ki(R),B)}else Ql(R)&&wo(R,B=>{Io(F,B)})}function If(F,R,B){const H=B.map(Re=>Re.currentWriteId),Z=Va(F,R,H);let se=Z;const pe=Z.hash();for(let Re=0;Re<B.length;Re++){const qe=B[Re];xe.assert(qe.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),qe.status=1,qe.retryCount++;const Ue=Mr(R,qe.path);se=se.updateChild(Ue,qe.currentOutputSnapshotRaw)}const ve=se.val(!0),we=R;F.server_.put(we.toString(),ve,Re=>{li(F,"transaction put response",{path:we.toString(),status:Re});let qe=[];if(Re==="ok"){const Ue=[];for(let Ke=0;Ke<B.length;Ke++)B[Ke].status=2,qe=qe.concat(kn(F.serverSyncTree_,B[Ke].currentWriteId)),B[Ke].onComplete&&Ue.push(()=>B[Ke].onComplete(null,!0,B[Ke].currentOutputSnapshotResolved)),B[Ke].unwatcher();Po(F,Oo(F.transactionQueueTree_,R)),Io(F,F.transactionQueueTree_),Kr(F.eventQueue_,R,qe);for(let Ke=0;Ke<Ue.length;Ke++)Zn(Ue[Ke])}else{if(Re==="datastale")for(let Ue=0;Ue<B.length;Ue++)B[Ue].status===3?B[Ue].status=4:B[Ue].status=0;else{kr("transaction at "+we.toString()+" failed: "+Re);for(let Ue=0;Ue<B.length;Ue++)B[Ue].status=4,B[Ue].abortReason=Re}ui(F,R)}},pe)}function ui(F,R){const B=cu(F,R),H=ki(B),Z=pu(F,B);return Pf(F,Z,H),H}function Pf(F,R,B){if(R.length===0)return;const H=[];let Z=[];const pe=R.filter(ve=>ve.status===0).map(ve=>ve.currentWriteId);for(let ve=0;ve<R.length;ve++){const we=R[ve],Re=Mr(B,we.path);let qe=!1,Ue;if(xe.assert(Re!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),we.status===4)qe=!0,Ue=we.abortReason,Z=Z.concat(kn(F.serverSyncTree_,we.currentWriteId,!0));else if(we.status===0)if(we.retryCount>=mf)qe=!0,Ue="maxretry",Z=Z.concat(kn(F.serverSyncTree_,we.currentWriteId,!0));else{const Ke=Va(F,we.path,pe);we.currentInputSnapshot=Ke;const it=R[ve].update(Ke.val());if(it!==void 0){Li("transaction failed: Data returned ",it,we.path);let ft=gr(it);typeof it=="object"&&it!=null&&xe.contains(it,".priority")||(ft=ft.updatePriority(Ke.getPriority()));const Sr=we.currentWriteId,Fn=Fi(F),ci=xa(ft,Ke,Fn);we.currentOutputSnapshotRaw=ft,we.currentOutputSnapshotResolved=ci,we.currentWriteId=Co(F),pe.splice(pe.indexOf(Sr),1),Z=Z.concat(Ta(F.serverSyncTree_,we.path,ci,we.currentWriteId,we.applyLocally)),Z=Z.concat(kn(F.serverSyncTree_,Sr,!0))}else qe=!0,Ue="nodata",Z=Z.concat(kn(F.serverSyncTree_,we.currentWriteId,!0))}Kr(F.eventQueue_,B,Z),Z=[],qe&&(R[ve].status=2,(function(Ke){setTimeout(Ke,Math.floor(0))})(R[ve].unwatcher),R[ve].onComplete&&(Ue==="nodata"?H.push(()=>R[ve].onComplete(null,!1,R[ve].currentInputSnapshot)):H.push(()=>R[ve].onComplete(new Error(Ue),!1,null))))}Po(F,F.transactionQueueTree_);for(let ve=0;ve<H.length;ve++)Zn(H[ve]);Io(F,F.transactionQueueTree_)}function cu(F,R){let B,H=F.transactionQueueTree_;for(B=It(R);B!==null&&zn(H)===void 0;)H=Oo(H,B),R=or(R),B=It(R);return H}function pu(F,R){const B=[];return du(F,R,B),B.sort((H,Z)=>H.order-Z.order),B}function du(F,R,B){const H=zn(R);if(H)for(let Z=0;Z<H.length;Z++)B.push(H[Z]);wo(R,Z=>{du(F,Z,B)})}function Po(F,R){const B=zn(R);if(B){let H=0;for(let Z=0;Z<B.length;Z++)B[Z].status!==2&&(B[H]=B[Z],H++);B.length=H,ja(R,B.length>0?B:void 0)}wo(R,H=>{Po(F,H)})}function $a(F,R){const B=ki(cu(F,R)),H=Oo(F.transactionQueueTree_,R);return sf(H,Z=>{Ga(F,Z)}),Ga(F,H),Xl(H,Z=>{Ga(F,Z)}),B}function Ga(F,R){const B=zn(R);if(B){const H=[];let Z=[],se=-1;for(let pe=0;pe<B.length;pe++)B[pe].status===3||(B[pe].status===1?(xe.assert(se===pe-1,"All SENT items should be at beginning of queue."),se=pe,B[pe].status=3,B[pe].abortReason="set"):(xe.assert(B[pe].status===0,"Unexpected transaction status in abort"),B[pe].unwatcher(),Z=Z.concat(kn(F.serverSyncTree_,B[pe].currentWriteId,!0)),B[pe].onComplete&&H.push(B[pe].onComplete.bind(null,new Error("set"),!1,null))));se===-1?ja(R,void 0):B.length=se+1,Kr(F.eventQueue_,ki(R),Z);for(let pe=0;pe<H.length;pe++)Zn(H[pe])}}function Nf(F){let R="";const B=F.split("/");for(let H=0;H<B.length;H++)if(B[H].length>0){let Z=B[H];try{Z=decodeURIComponent(Z.replace(/\+/g," "))}catch{}R+="/"+Z}return R}function xf(F){const R={};F.charAt(0)==="?"&&(F=F.substring(1));for(const B of F.split("&")){if(B.length===0)continue;const H=B.split("=");H.length===2?R[decodeURIComponent(H[0])]=decodeURIComponent(H[1]):kr(`Invalid query segment '${B}' in query '${F}'`)}return R}const Ha=function(F,R){const B=Df(F),H=B.namespace;B.domain==="firebase.com"&&_n(B.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!H||H==="undefined")&&B.domain!=="localhost"&&_n("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),B.secure||Fc();const Z=B.scheme==="ws"||B.scheme==="wss";return{repoInfo:new $s(B.host,B.secure,H,Z,R,"",H!==B.subdomain),path:new Jt(B.pathString)}},Df=function(F){let R="",B="",H="",Z="",se="",pe=!0,ve="https",we=443;if(typeof F=="string"){let Re=F.indexOf("//");Re>=0&&(ve=F.substring(0,Re-1),F=F.substring(Re+2));let qe=F.indexOf("/");qe===-1&&(qe=F.length);let Ue=F.indexOf("?");Ue===-1&&(Ue=F.length),R=F.substring(0,Math.min(qe,Ue)),qe<Ue&&(Z=Nf(F.substring(qe,Ue)));const Ke=xf(F.substring(Math.min(F.length,Ue)));Re=R.indexOf(":"),Re>=0?(pe=ve==="https"||ve==="wss",we=parseInt(R.substring(Re+1),10)):Re=R.length;const it=R.slice(0,Re);if(it.toLowerCase()==="localhost")B="localhost";else if(it.split(".").length<=2)B=it;else{const ft=R.indexOf(".");H=R.substring(0,ft).toLowerCase(),B=R.substring(ft+1),se=H}"ns"in Ke&&(se=Ke.ns)}return{host:R,port:we,domain:B,subdomain:H,secure:pe,scheme:ve,pathString:Z,namespace:se}};const fu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",kf=(function(){let F=0;const R=[];return function(B){const H=B===F;F=B;let Z;const se=new Array(8);for(Z=7;Z>=0;Z--)se[Z]=fu.charAt(B%64),B=Math.floor(B/64);xe.assert(B===0,"Cannot push at time == 0");let pe=se.join("");if(H){for(Z=11;Z>=0&&R[Z]===63;Z--)R[Z]=0;R[Z]++}else for(Z=0;Z<12;Z++)R[Z]=Math.floor(Math.random()*64);for(Z=0;Z<12;Z++)pe+=fu.charAt(R[Z]);return xe.assert(pe.length===20,"nextPushId: Length should be 20."),pe}})();class hu{constructor(R,B,H,Z){this.eventType=R,this.eventRegistration=B,this.snapshot=H,this.prevName=Z}getPath(){const R=this.snapshot.ref;return this.eventType==="value"?R._path:R.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+xe.stringify(this.snapshot.exportVal())}}class gu{constructor(R,B,H){this.eventRegistration=R,this.error=B,this.path=H}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Ka{constructor(R,B){this.snapshotCallback=R,this.cancelCallback=B}onValue(R,B){this.snapshotCallback.call(null,R,B)}onCancel(R){return xe.assert(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,R)}get hasCancelCallback(){return!!this.cancelCallback}matches(R){return this.snapshotCallback===R.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===R.snapshotCallback.userCallback&&this.snapshotCallback.context===R.snapshotCallback.context}}class mu{constructor(R,B){this._repo=R,this._path=B}cancel(){const R=new xe.Deferred;return Of(this._repo,this._path,R.wrapCallback(()=>{})),R.promise}remove(){pn("OnDisconnect.remove",this._path);const R=new xe.Deferred;return lu(this._repo,this._path,null,R.wrapCallback(()=>{})),R.promise}set(R){pn("OnDisconnect.set",this._path),En("OnDisconnect.set",R,this._path,!1);const B=new xe.Deferred;return lu(this._repo,this._path,R,B.wrapCallback(()=>{})),B.promise}setWithPriority(R,B){pn("OnDisconnect.setWithPriority",this._path),En("OnDisconnect.setWithPriority",R,this._path,!1),Fa("OnDisconnect.setWithPriority",B);const H=new xe.Deferred;return wf(this._repo,this._path,R,B,H.wrapCallback(()=>{})),H.promise}update(R){pn("OnDisconnect.update",this._path),eu("OnDisconnect.update",R,this._path);const B=new xe.Deferred;return Tf(this._repo,this._path,R,B.wrapCallback(()=>{})),B.promise}}class $r{constructor(R,B,H,Z){this._repo=R,this._path=B,this._queryParams=H,this._orderByCalled=Z}get key(){return Pt(this._path)?null:Zo(this._path)}get ref(){return new nn(this._repo,this._path)}get _queryIdentifier(){const R=bl(this._queryParams),B=Ko(R);return B==="{}"?"default":B}get _queryObject(){return bl(this._queryParams)}isEqual(R){if(R=xe.getModularInstance(R),!(R instanceof $r))return!1;const B=this._repo===R._repo,H=ea(this._path,R._path),Z=this._queryIdentifier===R._queryIdentifier;return B&&H&&Z}toJSON(){return this.toString()}toString(){return this._repo.toString()+Op(this._path)}}function No(F,R){if(F._orderByCalled===!0)throw new Error(R+": You can't combine multiple orderBy calls.")}function Ln(F){let R=null,B=null;if(F.hasStart()&&(R=F.getIndexStartValue()),F.hasEnd()&&(B=F.getIndexEndValue()),F.getIndex()===bn){const H="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",Z="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(F.hasStart()){if(F.getIndexStartName()!==Rn)throw new Error(H);if(typeof R!="string")throw new Error(Z)}if(F.hasEnd()){if(F.getIndexEndName()!==Sn)throw new Error(H);if(typeof B!="string")throw new Error(Z)}}else if(F.getIndex()===sr){if(R!=null&&!ji(R)||B!=null&&!ji(B))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(xe.assert(F.getIndex()instanceof oa||F.getIndex()===aa,"unknown index type."),R!=null&&typeof R=="object"||B!=null&&typeof B=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function xo(F){if(F.hasStart()&&F.hasEnd()&&F.hasLimit()&&!F.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class nn extends $r{constructor(R,B){super(R,B,new oo,!1)}get parent(){const R=ll(this._path);return R===null?null:new nn(this._repo,R)}get root(){let R=this;for(;R.parent!==null;)R=R.parent;return R}}class qn{constructor(R,B,H){this._node=R,this.ref=B,this._index=H}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(R){const B=new Jt(R),H=Yn(this.ref,R);return new qn(this._node.getChild(B),H,sr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(R){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(H,Z)=>R(new qn(Z,Yn(this.ref,H),sr)))}hasChild(R){const B=new Jt(R);return!this._node.getChild(B).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function yu(F,R){return F=xe.getModularInstance(F),F._checkNotDeleted("ref"),R!==void 0?Yn(F._root,R):F._root}function jf(F,R){F=xe.getModularInstance(F),F._checkNotDeleted("refFromURL");const B=Ha(R,F._repo.repoInfo_.nodeAdmin);tu("refFromURL",B);const H=B.repoInfo;return!F._repo.repoInfo_.isCustomHost()&&H.host!==F._repo.repoInfo_.host&&_n("refFromURL: Host name does not match the current database: (found "+H.host+" but expected "+F._repo.repoInfo_.host+")"),yu(F,B.path.toString())}function Yn(F,R){return F=xe.getModularInstance(F),It(F._path)===null?ff("child","path",R,!1):Ao("child","path",R,!1),new nn(F._repo,fr(F._path,R))}function Lf(F){return F=xe.getModularInstance(F),new mu(F._repo,F._path)}function qf(F,R){F=xe.getModularInstance(F),pn("push",F._path),En("push",R,F._path,!0);const B=ou(F._repo),H=kf(B),Z=Yn(F,H),se=Yn(F,H);let pe;return R!=null?pe=Wa(se,R).then(()=>se):pe=Promise.resolve(se),Z.then=pe.then.bind(pe),Z.catch=pe.then.bind(pe,void 0),Z}function Ff(F){return pn("remove",F._path),Wa(F,null)}function Wa(F,R){F=xe.getModularInstance(F),pn("set",F._path),En("set",R,F._path,!1);const B=new xe.Deferred;return Ua(F._repo,F._path,R,null,B.wrapCallback(()=>{})),B.promise}function Mf(F,R){F=xe.getModularInstance(F),pn("setPriority",F._path),Fa("setPriority",R);const B=new xe.Deferred;return Ua(F._repo,fr(F._path,".priority"),R,null,B.wrapCallback(()=>{})),B.promise}function Uf(F,R,B){if(pn("setWithPriority",F._path),En("setWithPriority",R,F._path,!1),Fa("setWithPriority",B),F.key===".length"||F.key===".keys")throw"setWithPriority failed: "+F.key+" is a read-only object.";const H=new xe.Deferred;return Ua(F._repo,F._path,R,B,H.wrapCallback(()=>{})),H.promise}function Bf(F,R){eu("update",R,F._path);const B=new xe.Deferred;return Ef(F._repo,F._path,R,B.wrapCallback(()=>{})),B.promise}function Vf(F){F=xe.getModularInstance(F);const R=new Ka(()=>{}),B=new Mi(R);return bf(F._repo,F,B).then(H=>new qn(H,new nn(F._repo,F._path),F._queryParams.getIndex()))}class Mi{constructor(R){this.callbackContext=R}respondsTo(R){return R==="value"}createEvent(R,B){const H=B._queryParams.getIndex();return new hu("value",this,new qn(R.snapshotNode,new nn(B._repo,B._path),H))}getEventRunner(R){return R.getEventType()==="cancel"?()=>this.callbackContext.onCancel(R.error):()=>this.callbackContext.onValue(R.snapshot,null)}createCancelEvent(R,B){return this.callbackContext.hasCancelCallback?new gu(this,R,B):null}matches(R){return R instanceof Mi?!R.callbackContext||!this.callbackContext?!0:R.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Do{constructor(R,B){this.eventType=R,this.callbackContext=B}respondsTo(R){let B=R==="children_added"?"child_added":R;return B=B==="children_removed"?"child_removed":B,this.eventType===B}createCancelEvent(R,B){return this.callbackContext.hasCancelCallback?new gu(this,R,B):null}createEvent(R,B){xe.assert(R.childName!=null,"Child events should have a childName.");const H=Yn(new nn(B._repo,B._path),R.childName),Z=B._queryParams.getIndex();return new hu(R.type,this,new qn(R.snapshotNode,H,Z),R.prevName)}getEventRunner(R){return R.getEventType()==="cancel"?()=>this.callbackContext.onCancel(R.error):()=>this.callbackContext.onValue(R.snapshot,R.prevName)}matches(R){return R instanceof Do?this.eventType===R.eventType&&(!this.callbackContext||!R.callbackContext||this.callbackContext.matches(R.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function Ui(F,R,B,H,Z){let se;if(typeof H=="object"&&(se=void 0,Z=H),typeof H=="function"&&(se=H),Z&&Z.onlyOnce){const we=B,Re=(qe,Ue)=>{Ba(F._repo,F,ve),we(qe,Ue)};Re.userCallback=B.userCallback,Re.context=B.context,B=Re}const pe=new Ka(B,se||void 0),ve=R==="value"?new Mi(pe):new Do(R,pe);return Af(F._repo,F,ve),()=>Ba(F._repo,F,ve)}function vu(F,R,B,H){return Ui(F,"value",R,B,H)}function $f(F,R,B,H){return Ui(F,"child_added",R,B,H)}function Gf(F,R,B,H){return Ui(F,"child_changed",R,B,H)}function Hf(F,R,B,H){return Ui(F,"child_moved",R,B,H)}function Kf(F,R,B,H){return Ui(F,"child_removed",R,B,H)}function Wf(F,R,B){let H=null;const Z=B?new Ka(B):null;R==="value"?H=new Mi(Z):R&&(H=new Do(R,Z)),Ba(F._repo,F,H)}class on{}class _u extends on{constructor(R,B){super(),this._value=R,this._key=B,this.type="endAt"}_apply(R){En("endAt",this._value,R._path,!0);const B=ua(R._queryParams,this._value,this._key);if(xo(B),Ln(B),R._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new $r(R._repo,R._path,B,R._orderByCalled)}}function Jf(F,R){return qi("endAt","key",R),new _u(F,R)}class zf extends on{constructor(R,B){super(),this._value=R,this._key=B,this.type="endBefore"}_apply(R){En("endBefore",this._value,R._path,!1);const B=zp(R._queryParams,this._value,this._key);if(xo(B),Ln(B),R._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new $r(R._repo,R._path,B,R._orderByCalled)}}function Yf(F,R){return qi("endBefore","key",R),new zf(F,R)}class bu extends on{constructor(R,B){super(),this._value=R,this._key=B,this.type="startAt"}_apply(R){En("startAt",this._value,R._path,!0);const B=la(R._queryParams,this._value,this._key);if(xo(B),Ln(B),R._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new $r(R._repo,R._path,B,R._orderByCalled)}}function Qf(F=null,R){return qi("startAt","key",R),new bu(F,R)}class Xf extends on{constructor(R,B){super(),this._value=R,this._key=B,this.type="startAfter"}_apply(R){En("startAfter",this._value,R._path,!1);const B=Jp(R._queryParams,this._value,this._key);if(xo(B),Ln(B),R._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new $r(R._repo,R._path,B,R._orderByCalled)}}function Zf(F,R){return qi("startAfter","key",R),new Xf(F,R)}class eh extends on{constructor(R){super(),this._limit=R,this.type="limitToFirst"}_apply(R){if(R._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new $r(R._repo,R._path,Kp(R._queryParams,this._limit),R._orderByCalled)}}function th(F){if(typeof F!="number"||Math.floor(F)!==F||F<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new eh(F)}class rh extends on{constructor(R){super(),this._limit=R,this.type="limitToLast"}_apply(R){if(R._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new $r(R._repo,R._path,Wp(R._queryParams,this._limit),R._orderByCalled)}}function nh(F){if(typeof F!="number"||Math.floor(F)!==F||F<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new rh(F)}class ih extends on{constructor(R){super(),this._path=R,this.type="orderByChild"}_apply(R){No(R,"orderByChild");const B=new Jt(this._path);if(Pt(B))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const H=new oa(B),Z=ao(R._queryParams,H);return Ln(Z),new $r(R._repo,R._path,Z,!0)}}function oh(F){if(F==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(F==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(F==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ao("orderByChild","path",F,!1),new ih(F)}class ah extends on{constructor(){super(...arguments),this.type="orderByKey"}_apply(R){No(R,"orderByKey");const B=ao(R._queryParams,bn);return Ln(B),new $r(R._repo,R._path,B,!0)}}function sh(){return new ah}class lh extends on{constructor(){super(...arguments),this.type="orderByPriority"}_apply(R){No(R,"orderByPriority");const B=ao(R._queryParams,sr);return Ln(B),new $r(R._repo,R._path,B,!0)}}function uh(){return new lh}class ch extends on{constructor(){super(...arguments),this.type="orderByValue"}_apply(R){No(R,"orderByValue");const B=ao(R._queryParams,aa);return Ln(B),new $r(R._repo,R._path,B,!0)}}function ph(){return new ch}class dh extends on{constructor(R,B){super(),this._value=R,this._key=B,this.type="equalTo"}_apply(R){if(En("equalTo",this._value,R._path,!1),R._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(R._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new _u(this._value,this._key)._apply(new bu(this._value,this._key)._apply(R))}}function fh(F,R){return qi("equalTo","key",R),new dh(F,R)}function hh(F,...R){let B=xe.getModularInstance(F);for(const H of R)B=H._apply(B);return B}Fd(nn),$d(nn);const gh="FIREBASE_DATABASE_EMULATOR_HOST",Ja={};let Eu=!1;function mh(F,R,B,H){const Z=R.lastIndexOf(":"),se=R.substring(0,Z),pe=xe.isCloudWorkstation(se);F.repoInfo_=new $s(R,pe,F.repoInfo_.namespace,F.repoInfo_.webSocketOnly,F.repoInfo_.nodeAdmin,F.repoInfo_.persistenceKey,F.repoInfo_.includeNamespaceInQueryParams,!0,B),H&&(F.authTokenProvider_=H)}function Su(F,R,B,H,Z){let se=H||F.options.databaseURL;se===void 0&&(F.options.projectId||_n("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Tr("Using default host for project ",F.options.projectId),se=`${F.options.projectId}-default-rtdb.firebaseio.com`);let pe=Ha(se,Z),ve=pe.repoInfo,we,Re;typeof e<"u"&&t&&(Re=t[gh]),Re?(we=!0,se=`http://${Re}?ns=${ve.namespace}`,pe=Ha(se,Z),ve=pe.repoInfo):we=!pe.repoInfo.secure;const qe=Z&&we?new ei(ei.OWNER):new tp(F.name,F.options,R);tu("Invalid Firebase Database URL",pe),Pt(pe.path)||_n("Database URL must point to the root of a Firebase Database (not including a child path).");const Ue=vh(ve,F,qe,new ep(F,B));return new Ou(Ue,F)}function yh(F,R){const B=Ja[R];(!B||B[F.key]!==F)&&_n(`Database ${R}(${F.repoInfo_}) has already been deleted.`),uu(F),delete B[F.key]}function vh(F,R,B,H){let Z=Ja[R.name];Z||(Z={},Ja[R.name]=Z);let se=Z[F.toURLString()];return se&&_n("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),se=new yf(F,Eu,B,H),Z[F.toURLString()]=se,se}function _h(F){Eu=F}class Ou{constructor(R,B){this._repoInternal=R,this.app=B,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(vf(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new nn(this._repo,Vt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(yh(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(R){this._rootInternal===null&&_n("Cannot call "+R+" on a deleted database.")}}function wu(){ti.IS_TRANSPORT_INITIALIZED&&kr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function bh(){wu(),Cn.forceDisallow()}function Eh(){wu(),en.forceDisallow(),Cn.forceAllow()}function Sh(F,R,B,H={}){F=xe.getModularInstance(F),F._checkNotDeleted("useEmulator");const Z=`${R}:${B}`,se=F._repoInternal;if(F._instanceStarted){if(Z===F._repoInternal.repoInfo_.host&&xe.deepEqual(H,se.repoInfo_.emulatorOptions))return;_n("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let pe;if(se.repoInfo_.nodeAdmin)H.mockUserToken&&_n('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),pe=new ei(ei.OWNER);else if(H.mockUserToken){const ve=typeof H.mockUserToken=="string"?H.mockUserToken:xe.createMockUserToken(H.mockUserToken,F.app.options.projectId);pe=new ei(ve)}xe.isCloudWorkstation(R)&&(xe.pingServer(R),xe.updateEmulatorBanner("Database",!0)),mh(se,Z,H,pe)}function Oh(F){F=xe.getModularInstance(F),F._checkNotDeleted("goOffline"),uu(F._repo)}function wh(F){F=xe.getModularInstance(F),F._checkNotDeleted("goOnline"),Rf(F._repo)}function Th(F,R){Ms(F,R)}const Ah={".sv":"timestamp"};function Rh(){return Ah}function Ch(F){return{".sv":{increment:F}}}class Tu{constructor(R,B){this.committed=R,this.snapshot=B}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function Ih(F,R,B){if(F=xe.getModularInstance(F),pn("Reference.transaction",F._path),F.key===".length"||F.key===".keys")throw"Reference.transaction failed: "+F.key+" is a read-only object.";const H=B?.applyLocally??!0,Z=new xe.Deferred,se=(ve,we,Re)=>{let qe=null;ve?Z.reject(ve):(qe=new qn(Re,new nn(F._repo,F._path),sr),Z.resolve(new Tu(we,qe)))},pe=vu(F,()=>{});return Cf(F._repo,F._path,R,se,pe,H),Z.promise}rn.prototype.simpleListen=function(F,R){this.sendRequest("q",{p:F},R)},rn.prototype.echo=function(F,R){this.sendRequest("echo",{d:F},R)};const Ph=function(F){const R=rn.prototype.put;return rn.prototype.put=function(B,H,Z,se){se!==void 0&&(se=F()),R.call(this,B,H,Z,se)},function(){rn.prototype.put=R}},Nh=function(F){_h(F)};function xh({app:F,url:R,version:B,customAuthImpl:H,customAppCheckImpl:Z,nodeAdmin:se=!1}){Hs(B);const pe=new hi.ComponentContainer("database-standalone"),ve=new hi.Provider("auth-internal",pe);let we;return Z&&(we=new hi.Provider("app-check-internal",pe),we.setComponent(new hi.Component("app-check-internal",()=>Z,"PRIVATE"))),ve.setComponent(new hi.Component("auth-internal",()=>H,"PRIVATE")),Su(F,ve,we,R,se)}Zc(jc.default.Client),$.DataSnapshot=qn,$.Database=Ou;var Au=$.OnDisconnect=mu;$.QueryConstraint=on,$.TransactionResult=Tu;var Dh=$._QueryImpl=$r,kh=$._QueryParams=oo,jh=$._ReferenceImpl=nn;$._TEST_ACCESS_forceRestClient=Nh,$._TEST_ACCESS_hijackHash=Ph,$._initStandalone=xh;var Lh=$._repoManagerDatabaseFromApp=Su,qh=$._setSDKVersion=Hs,Ru=$._validatePathString=Ao,Cu=$._validateWritablePath=pn,Fh=$.child=Yn,Mh=$.connectDatabaseEmulator=Sh,Iu=$.enableLogging=Th,Uh=$.endAt=Jf,Bh=$.endBefore=Yf,Vh=$.equalTo=fh,$h=$.forceLongPolling=Eh,Gh=$.forceWebSockets=bh,Hh=$.get=Vf,Kh=$.goOffline=Oh,Wh=$.goOnline=wh,Jh=$.increment=Ch,zh=$.limitToFirst=th,Yh=$.limitToLast=nh,Pu=$.off=Wf,Nu=$.onChildAdded=$f,xu=$.onChildChanged=Gf,Du=$.onChildMoved=Hf,ku=$.onChildRemoved=Kf;$.onDisconnect=Lf;var ju=$.onValue=vu,Qh=$.orderByChild=oh,Xh=$.orderByKey=sh,Zh=$.orderByPriority=uh,eg=$.orderByValue=ph,tg=$.push=qf,dn=$.query=hh,rg=$.ref=yu,Lu=$.refFromURL=jf,ng=$.remove=Ff,ig=$.runTransaction=Ih,og=$.serverTimestamp=Rh,ag=$.set=Wa,sg=$.setPriority=Mf,lg=$.setWithPriority=Uf,ug=$.startAfter=Zf,cg=$.startAt=Qf,pg=$.update=Bf;const dg=new v.Logger("@firebase/database-compat"),qu=function(F){const R="FIREBASE WARNING: "+F;dg.warn(R)};const fg=function(F,R,B,H){if(B!==void 0&&typeof B!="boolean")throw new Error(h.errorPrefix(F,R)+"must be a boolean.")},hg=function(F,R,B){if(R!==void 0)switch(R){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(h.errorPrefix(F,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};class gg{constructor(R){this._delegate=R}cancel(R){h.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),h.validateCallback("OnDisconnect.cancel","onComplete",R,!0);const B=this._delegate.cancel();return R&&B.then(()=>R(null),H=>R(H)),B}remove(R){h.validateArgCount("OnDisconnect.remove",0,1,arguments.length),h.validateCallback("OnDisconnect.remove","onComplete",R,!0);const B=this._delegate.remove();return R&&B.then(()=>R(null),H=>R(H)),B}set(R,B){h.validateArgCount("OnDisconnect.set",1,2,arguments.length),h.validateCallback("OnDisconnect.set","onComplete",B,!0);const H=this._delegate.set(R);return B&&H.then(()=>B(null),Z=>B(Z)),H}setWithPriority(R,B,H){h.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),h.validateCallback("OnDisconnect.setWithPriority","onComplete",H,!0);const Z=this._delegate.setWithPriority(R,B);return H&&Z.then(()=>H(null),se=>H(se)),Z}update(R,B){if(h.validateArgCount("OnDisconnect.update",1,2,arguments.length),Array.isArray(R)){const Z={};for(let se=0;se<R.length;++se)Z[""+se]=R[se];R=Z,qu("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}h.validateCallback("OnDisconnect.update","onComplete",B,!0);const H=this._delegate.update(R);return B&&H.then(()=>B(null),Z=>B(Z)),H}}class mg{constructor(R,B){this.committed=R,this.snapshot=B}toJSON(){return h.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class wn{constructor(R,B){this._database=R,this._delegate=B}val(){return h.validateArgCount("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return h.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return h.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return h.validateArgCount("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(R){return h.validateArgCount("DataSnapshot.child",0,1,arguments.length),R=String(R),Ru("DataSnapshot.child","path",R,!1),new wn(this._database,this._delegate.child(R))}hasChild(R){return h.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),Ru("DataSnapshot.hasChild","path",R,!1),this._delegate.hasChild(R)}getPriority(){return h.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(R){return h.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),h.validateCallback("DataSnapshot.forEach","action",R,!1),this._delegate.forEach(B=>R(new wn(this._database,B)))}hasChildren(){return h.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return h.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return h.validateArgCount("DataSnapshot.ref",0,0,arguments.length),new Gr(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ir{constructor(R,B){this.database=R,this._delegate=B}on(R,B,H,Z){h.validateArgCount("Query.on",2,4,arguments.length),h.validateCallback("Query.on","callback",B,!1);const se=Ir.getCancelAndContextArgs_("Query.on",H,Z),pe=(we,Re)=>{B.call(se.context,new wn(this.database,we),Re)};pe.userCallback=B,pe.context=se.context;const ve=se.cancel?.bind(se.context);switch(R){case"value":return ju(this._delegate,pe,ve),B;case"child_added":return Nu(this._delegate,pe,ve),B;case"child_removed":return ku(this._delegate,pe,ve),B;case"child_changed":return xu(this._delegate,pe,ve),B;case"child_moved":return Du(this._delegate,pe,ve),B;default:throw new Error(h.errorPrefix("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(R,B,H){if(h.validateArgCount("Query.off",0,3,arguments.length),hg("Query.off",R),h.validateCallback("Query.off","callback",B,!0),h.validateContextObject("Query.off","context",H,!0),B){const Z=()=>{};Z.userCallback=B,Z.context=H,Pu(this._delegate,R,Z)}else Pu(this._delegate,R)}get(){return Hh(this._delegate).then(R=>new wn(this.database,R))}once(R,B,H,Z){h.validateArgCount("Query.once",1,4,arguments.length),h.validateCallback("Query.once","callback",B,!0);const se=Ir.getCancelAndContextArgs_("Query.once",H,Z),pe=new h.Deferred,ve=(Re,qe)=>{const Ue=new wn(this.database,Re);B&&B.call(se.context,Ue,qe),pe.resolve(Ue)};ve.userCallback=B,ve.context=se.context;const we=Re=>{se.cancel&&se.cancel.call(se.context,Re),pe.reject(Re)};switch(R){case"value":ju(this._delegate,ve,we,{onlyOnce:!0});break;case"child_added":Nu(this._delegate,ve,we,{onlyOnce:!0});break;case"child_removed":ku(this._delegate,ve,we,{onlyOnce:!0});break;case"child_changed":xu(this._delegate,ve,we,{onlyOnce:!0});break;case"child_moved":Du(this._delegate,ve,we,{onlyOnce:!0});break;default:throw new Error(h.errorPrefix("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return pe.promise}limitToFirst(R){return h.validateArgCount("Query.limitToFirst",1,1,arguments.length),new Ir(this.database,dn(this._delegate,zh(R)))}limitToLast(R){return h.validateArgCount("Query.limitToLast",1,1,arguments.length),new Ir(this.database,dn(this._delegate,Yh(R)))}orderByChild(R){return h.validateArgCount("Query.orderByChild",1,1,arguments.length),new Ir(this.database,dn(this._delegate,Qh(R)))}orderByKey(){return h.validateArgCount("Query.orderByKey",0,0,arguments.length),new Ir(this.database,dn(this._delegate,Xh()))}orderByPriority(){return h.validateArgCount("Query.orderByPriority",0,0,arguments.length),new Ir(this.database,dn(this._delegate,Zh()))}orderByValue(){return h.validateArgCount("Query.orderByValue",0,0,arguments.length),new Ir(this.database,dn(this._delegate,eg()))}startAt(R=null,B){return h.validateArgCount("Query.startAt",0,2,arguments.length),new Ir(this.database,dn(this._delegate,cg(R,B)))}startAfter(R=null,B){return h.validateArgCount("Query.startAfter",0,2,arguments.length),new Ir(this.database,dn(this._delegate,ug(R,B)))}endAt(R=null,B){return h.validateArgCount("Query.endAt",0,2,arguments.length),new Ir(this.database,dn(this._delegate,Uh(R,B)))}endBefore(R=null,B){return h.validateArgCount("Query.endBefore",0,2,arguments.length),new Ir(this.database,dn(this._delegate,Bh(R,B)))}equalTo(R,B){return h.validateArgCount("Query.equalTo",1,2,arguments.length),new Ir(this.database,dn(this._delegate,Vh(R,B)))}toString(){return h.validateArgCount("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return h.validateArgCount("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(R){if(h.validateArgCount("Query.isEqual",1,1,arguments.length),!(R instanceof Ir)){const B="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(B)}return this._delegate.isEqual(R._delegate)}static getCancelAndContextArgs_(R,B,H){const Z={cancel:void 0,context:void 0};if(B&&H)Z.cancel=B,h.validateCallback(R,"cancel",Z.cancel,!0),Z.context=H,h.validateContextObject(R,"context",Z.context,!0);else if(B)if(typeof B=="object"&&B!==null)Z.context=B;else if(typeof B=="function")Z.cancel=B;else throw new Error(h.errorPrefix(R,"cancelOrContext")+" must either be a cancel callback or a context object.");return Z}get ref(){return new Gr(this.database,new jh(this._delegate._repo,this._delegate._path))}}class Gr extends Ir{constructor(R,B){super(R,new Dh(B._repo,B._path,new kh,!1)),this.database=R,this._delegate=B}getKey(){return h.validateArgCount("Reference.key",0,0,arguments.length),this._delegate.key}child(R){return h.validateArgCount("Reference.child",1,1,arguments.length),typeof R=="number"&&(R=String(R)),new Gr(this.database,Fh(this._delegate,R))}getParent(){h.validateArgCount("Reference.parent",0,0,arguments.length);const R=this._delegate.parent;return R?new Gr(this.database,R):null}getRoot(){return h.validateArgCount("Reference.root",0,0,arguments.length),new Gr(this.database,this._delegate.root)}set(R,B){h.validateArgCount("Reference.set",1,2,arguments.length),h.validateCallback("Reference.set","onComplete",B,!0);const H=ag(this._delegate,R);return B&&H.then(()=>B(null),Z=>B(Z)),H}update(R,B){if(h.validateArgCount("Reference.update",1,2,arguments.length),Array.isArray(R)){const Z={};for(let se=0;se<R.length;++se)Z[""+se]=R[se];R=Z,qu("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Cu("Reference.update",this._delegate._path),h.validateCallback("Reference.update","onComplete",B,!0);const H=pg(this._delegate,R);return B&&H.then(()=>B(null),Z=>B(Z)),H}setWithPriority(R,B,H){h.validateArgCount("Reference.setWithPriority",2,3,arguments.length),h.validateCallback("Reference.setWithPriority","onComplete",H,!0);const Z=lg(this._delegate,R,B);return H&&Z.then(()=>H(null),se=>H(se)),Z}remove(R){h.validateArgCount("Reference.remove",0,1,arguments.length),h.validateCallback("Reference.remove","onComplete",R,!0);const B=ng(this._delegate);return R&&B.then(()=>R(null),H=>R(H)),B}transaction(R,B,H){h.validateArgCount("Reference.transaction",1,3,arguments.length),h.validateCallback("Reference.transaction","transactionUpdate",R,!1),h.validateCallback("Reference.transaction","onComplete",B,!0),fg("Reference.transaction","applyLocally",H);const Z=ig(this._delegate,R,{applyLocally:H}).then(se=>new mg(se.committed,new wn(this.database,se.snapshot)));return B&&Z.then(se=>B(null,se.committed,se.snapshot),se=>B(se,!1,null)),Z}setPriority(R,B){h.validateArgCount("Reference.setPriority",1,2,arguments.length),h.validateCallback("Reference.setPriority","onComplete",B,!0);const H=sg(this._delegate,R);return B&&H.then(()=>B(null),Z=>B(Z)),H}push(R,B){h.validateArgCount("Reference.push",0,2,arguments.length),h.validateCallback("Reference.push","onComplete",B,!0);const H=tg(this._delegate,R),Z=H.then(pe=>new Gr(this.database,pe));B&&Z.then(()=>B(null),pe=>B(pe));const se=new Gr(this.database,H);return se.then=Z.then.bind(Z),se.catch=Z.catch.bind(Z,void 0),se}onDisconnect(){return Cu("Reference.onDisconnect",this._delegate._path),new gg(new Au(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Bi{constructor(R,B){this._delegate=R,this.app=B,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Gh,forceLongPolling:$h}}useEmulator(R,B,H={}){Mh(this._delegate,R,B,H)}ref(R){if(h.validateArgCount("database.ref",0,1,arguments.length),R instanceof Gr){const B=Lu(this._delegate,R.toString());return new Gr(this,B)}else{const B=rg(this._delegate,R);return new Gr(this,B)}}refFromURL(R){h.validateArgCount("database.refFromURL",1,1,arguments.length);const H=Lu(this._delegate,R);return new Gr(this,H)}goOffline(){return h.validateArgCount("database.goOffline",0,0,arguments.length),Kh(this._delegate)}goOnline(){return h.validateArgCount("database.goOnline",0,0,arguments.length),Wh(this._delegate)}}Bi.ServerValue={TIMESTAMP:og(),increment:F=>Jh(F)};function Fu({app:F,url:R,version:B,customAuthImpl:H,customAppCheckImpl:Z,namespace:se,nodeAdmin:pe=!1}){qh(B);const ve=new _.ComponentContainer("database-standalone"),we=new _.Provider("auth-internal",ve);we.setComponent(new _.Component("auth-internal",()=>H,"PRIVATE"));let Re;return Z&&(Re=new _.Provider("app-check-internal",ve),Re.setComponent(new _.Component("app-check-internal",()=>Z,"PRIVATE"))),{instance:new Bi(Lh(F,we,Re,R,pe),F),namespace:se}}var yg=Object.freeze({__proto__:null,initStandalone:Fu});const Mu=Bi.ServerValue;function vg(F,R,B,H=!0){return h.CONSTANTS.NODE_ADMIN=H,Fu({app:F,url:R,version:B,customAuthImpl:F.INTERNAL,namespace:{Reference:Gr,Query:Ir,Database:Bi,DataSnapshot:wn,enableLogging:Iu,INTERNAL:yg,ServerValue:Mu},nodeAdmin:H})}return index_standalone.DataSnapshot=wn,index_standalone.Database=Bi,index_standalone.OnDisconnect=Au,index_standalone.Query=Ir,index_standalone.Reference=Gr,index_standalone.ServerValue=Mu,index_standalone.enableLogging=Iu,index_standalone.initStandalone=vg,index_standalone}var messaging$1={},messagingInternal={};var hasRequiredMessagingInternal;function requireMessagingInternal(){if(hasRequiredMessagingInternal)return messagingInternal;hasRequiredMessagingInternal=1;Object.defineProperty(messagingInternal,"__esModule",{value:!0}),messagingInternal.BLACKLISTED_OPTIONS_KEYS=messagingInternal.BLACKLISTED_DATA_PAYLOAD_KEYS=void 0,messagingInternal.validateMessage=p;const e=requireUtils$2(),t=requireError(),s=requireValidator$1();messagingInternal.BLACKLISTED_DATA_PAYLOAD_KEYS=["from"],messagingInternal.BLACKLISTED_OPTIONS_KEYS=["condition","data","notification","registrationIds","registration_ids","to"];function p(E){if(!s.isNonNullObject(E))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"Message must be a non-null object");const C=E;if(C.topic&&(C.topic.startsWith("/topics/")&&(C.topic=C.topic.replace(/^\/topics\//,"")),!/^[a-zA-Z0-9-_.~%]+$/.test(C.topic)))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"Malformed topic name");if([C.token,C.topic,C.condition].filter(j=>s.isNonEmptyString(j)).length!==1)throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"Exactly one of topic, token or condition is required");g(E.data,"data"),w(E.android),m(E.webpush),d(E.apns),a(E.fcmOptions),o(E.notification)}function g(E,C){if(!(typeof E>"u")){if(!s.isNonNullObject(E))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,`${C} must be a non-null object`);Object.keys(E).forEach(x=>{if(!s.isString(E[x]))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,`${C} must only contain string values`)})}}function m(E){if(!(typeof E>"u")){if(!s.isNonNullObject(E))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"webpush must be a non-null object");g(E.headers,"webpush.headers"),g(E.data,"webpush.data")}}function d(E){if(!(typeof E>"u")){if(!s.isNonNullObject(E))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"apns must be a non-null object");g(E.headers,"apns.headers"),h(E.payload),l(E.fcmOptions)}}function l(E){if(typeof E>"u")return;if(!s.isNonNullObject(E))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"fcmOptions must be a non-null object");if(typeof E.imageUrl<"u"&&!s.isURL(E.imageUrl))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"imageUrl must be a valid URL string");if(typeof E.analyticsLabel<"u"&&!s.isString(E.analyticsLabel))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"analyticsLabel must be a string value");const C={imageUrl:"image"};Object.keys(C).forEach(x=>{if(x in E&&C[x]in E)throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,`Multiple specifications for ${x} in ApnsFcmOptions`)}),(0,e.renameProperties)(E,C)}function a(E){if(!(typeof E>"u")){if(!s.isNonNullObject(E))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"fcmOptions must be a non-null object");if(typeof E.analyticsLabel<"u"&&!s.isString(E.analyticsLabel))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"analyticsLabel must be a string value")}}function o(E){if(typeof E>"u")return;if(!s.isNonNullObject(E))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"notification must be a non-null object");if(typeof E.imageUrl<"u"&&!s.isURL(E.imageUrl))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"notification.imageUrl must be a valid URL string");const C={imageUrl:"image"};Object.keys(C).forEach(x=>{if(x in E&&C[x]in E)throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,`Multiple specifications for ${x} in Notification`)}),(0,e.renameProperties)(E,C)}function h(E){if(!(typeof E>"u")){if(!s.isNonNullObject(E))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"apns.payload must be a non-null object");v(E.aps)}}function v(E){if(typeof E>"u")return;if(!s.isNonNullObject(E))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"apns.payload.aps must be a non-null object");y(E.alert),_(E.sound);const C={contentAvailable:"content-available",mutableContent:"mutable-content",threadId:"thread-id"};Object.keys(C).forEach(D=>{if(D in E&&C[D]in E)throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,`Multiple specifications for ${D} in Aps`)}),(0,e.renameProperties)(E,C);const x=E["content-available"];typeof x<"u"&&x!==1&&(x===!0?E["content-available"]=1:delete E["content-available"]);const j=E["mutable-content"];typeof j<"u"&&j!==1&&(j===!0?E["mutable-content"]=1:delete E["mutable-content"])}function _(E){if(typeof E>"u"||s.isNonEmptyString(E))return;if(!s.isNonNullObject(E))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"apns.payload.aps.sound must be a non-empty string or a non-null object");if(!s.isNonEmptyString(E.name))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"apns.payload.aps.sound.name must be a non-empty string");const C=E.volume;if(typeof C<"u"){if(!s.isNumber(C))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"apns.payload.aps.sound.volume must be a number");if(C<0||C>1)throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"apns.payload.aps.sound.volume must be in the interval [0, 1]")}const x=E,j="critical",D=x[j];typeof D<"u"&&D!==1&&(D===!0?x[j]=1:delete x[j])}function y(E){if(typeof E>"u"||s.isString(E))return;if(!s.isNonNullObject(E))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"apns.payload.aps.alert must be a string or a non-null object");const C=E;if(s.isNonEmptyArray(C.locArgs)&&!s.isNonEmptyString(C.locKey))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"apns.payload.aps.alert.locKey is required when specifying locArgs");if(s.isNonEmptyArray(C.titleLocArgs)&&!s.isNonEmptyString(C.titleLocKey))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"apns.payload.aps.alert.titleLocKey is required when specifying titleLocArgs");if(s.isNonEmptyArray(C.subtitleLocArgs)&&!s.isNonEmptyString(C.subtitleLocKey))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"apns.payload.aps.alert.subtitleLocKey is required when specifying subtitleLocArgs");const x={locKey:"loc-key",locArgs:"loc-args",titleLocKey:"title-loc-key",titleLocArgs:"title-loc-args",subtitleLocKey:"subtitle-loc-key",subtitleLocArgs:"subtitle-loc-args",actionLocKey:"action-loc-key",launchImage:"launch-image"};(0,e.renameProperties)(C,x)}function w(E){if(typeof E>"u")return;if(!s.isNonNullObject(E))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"android must be a non-null object");if(typeof E.ttl<"u"){if(!s.isNumber(E.ttl)||E.ttl<0)throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"TTL must be a non-negative duration in milliseconds");const x=(0,e.transformMillisecondsToSecondsString)(E.ttl);E.ttl=x}g(E.data,"android.data"),T(E.notification),O(E.fcmOptions);const C={collapseKey:"collapse_key",restrictedPackageName:"restricted_package_name",directBootOk:"direct_boot_ok"};(0,e.renameProperties)(E,C)}function T(E){if(typeof E>"u")return;if(!s.isNonNullObject(E))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification must be a non-null object");if(typeof E.color<"u"&&!/^#[0-9a-fA-F]{6}$/.test(E.color))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification.color must be in the form #RRGGBB");if(s.isNonEmptyArray(E.bodyLocArgs)&&!s.isNonEmptyString(E.bodyLocKey))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification.bodyLocKey is required when specifying bodyLocArgs");if(s.isNonEmptyArray(E.titleLocArgs)&&!s.isNonEmptyString(E.titleLocKey))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification.titleLocKey is required when specifying titleLocArgs");if(typeof E.imageUrl<"u"&&!s.isURL(E.imageUrl))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification.imageUrl must be a valid URL string");if(typeof E.eventTimestamp<"u"){if(!(E.eventTimestamp instanceof Date))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification.eventTimestamp must be a valid `Date` object");const x=E.eventTimestamp.toISOString();E.eventTimestamp=x}if(typeof E.vibrateTimingsMillis<"u"){if(!s.isNonEmptyArray(E.vibrateTimingsMillis))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification.vibrateTimingsMillis must be a non-empty array of numbers");const x=[];E.vibrateTimingsMillis.forEach(j=>{if(!s.isNumber(j)||j<0)throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification.vibrateTimingsMillis must be non-negative durations in milliseconds");const D=(0,e.transformMillisecondsToSecondsString)(j);x.push(D)}),E.vibrateTimingsMillis=x}if(typeof E.priority<"u"){const x="PRIORITY_"+E.priority.toUpperCase();E.priority=x}if(typeof E.proxy<"u"){const x=E.proxy.toUpperCase();E.proxy=x}if(typeof E.visibility<"u"){const x=E.visibility.toUpperCase();E.visibility=x}I(E.lightSettings);const C={clickAction:"click_action",bodyLocKey:"body_loc_key",bodyLocArgs:"body_loc_args",titleLocKey:"title_loc_key",titleLocArgs:"title_loc_args",channelId:"channel_id",imageUrl:"image",eventTimestamp:"event_time",localOnly:"local_only",priority:"notification_priority",vibrateTimingsMillis:"vibrate_timings",defaultVibrateTimings:"default_vibrate_timings",defaultSound:"default_sound",lightSettings:"light_settings",defaultLightSettings:"default_light_settings",notificationCount:"notification_count"};(0,e.renameProperties)(E,C)}function I(E){if(typeof E>"u")return;if(!s.isNonNullObject(E))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification.lightSettings must be a non-null object");if(!s.isNumber(E.lightOnDurationMillis)||E.lightOnDurationMillis<0)throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification.lightSettings.lightOnDurationMillis must be a non-negative duration in milliseconds");const C=(0,e.transformMillisecondsToSecondsString)(E.lightOnDurationMillis);if(E.lightOnDurationMillis=C,!s.isNumber(E.lightOffDurationMillis)||E.lightOffDurationMillis<0)throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification.lightSettings.lightOffDurationMillis must be a non-negative duration in milliseconds");const x=(0,e.transformMillisecondsToSecondsString)(E.lightOffDurationMillis);if(E.lightOffDurationMillis=x,!s.isString(E.color)||!/^#[0-9a-fA-F]{6}$/.test(E.color)&&!/^#[0-9a-fA-F]{8}$/.test(E.color))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification.lightSettings.color must be in the form #RRGGBB or #RRGGBBAA format");const j=E.color.length===7?E.color+"FF":E.color,D=/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/i.exec(j);if(!D||D.length<4)throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INTERNAL_ERROR,"regex to extract rgba values from "+j+" failed.");const k={red:parseInt(D[1],16)/255,green:parseInt(D[2],16)/255,blue:parseInt(D[3],16)/255,alpha:parseInt(D[4],16)/255};E.color=k;const q={lightOnDurationMillis:"light_on_duration",lightOffDurationMillis:"light_off_duration"};(0,e.renameProperties)(E,q)}function O(E){if(!(typeof E>"u")){if(!s.isNonNullObject(E))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"fcmOptions must be a non-null object");if(typeof E.analyticsLabel<"u"&&!s.isString(E.analyticsLabel))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_PAYLOAD,"analyticsLabel must be a string value")}}return messagingInternal}var messagingApiRequestInternal={},messagingErrorsInternal={};var hasRequiredMessagingErrorsInternal;function requireMessagingErrorsInternal(){if(hasRequiredMessagingErrorsInternal)return messagingErrorsInternal;hasRequiredMessagingErrorsInternal=1;Object.defineProperty(messagingErrorsInternal,"__esModule",{value:!0}),messagingErrorsInternal.createFirebaseError=s,messagingErrorsInternal.getErrorCode=p;const e=requireError(),t=requireValidator$1();function s(m){if(m.response.isJson()){const l=m.response.data,a=p(l),o=g(l);return e.FirebaseMessagingError.fromServerError(a,o,l)}let d;switch(m.response.status){case 400:d=e.MessagingClientErrorCode.INVALID_ARGUMENT;break;case 401:case 403:d=e.MessagingClientErrorCode.AUTHENTICATION_ERROR;break;case 500:d=e.MessagingClientErrorCode.INTERNAL_ERROR;break;case 503:d=e.MessagingClientErrorCode.SERVER_UNAVAILABLE;break;default:d=e.MessagingClientErrorCode.UNKNOWN_ERROR}return new e.FirebaseMessagingError({code:d.code,message:`${d.message} Raw server response: "${m.response.text}". Status code: ${m.response.status}.`})}function p(m){if(t.isNonNullObject(m)&&"error"in m){const d=m.error;if(t.isString(d))return d;if(t.isArray(d.details)){const l="type.googleapis.com/google.firebase.fcm.v1.FcmError";for(const a of d.details)if(a["@type"]===l)return a.errorCode}return"status"in d?d.status:d.message}return null}function g(m){return t.isNonNullObject(m)&&"error"in m&&t.isNonEmptyString(m.error.message)?m.error.message:null}return messagingErrorsInternal}var hasRequiredMessagingApiRequestInternal;function requireMessagingApiRequestInternal(){if(hasRequiredMessagingApiRequestInternal)return messagingApiRequestInternal;hasRequiredMessagingApiRequestInternal=1;Object.defineProperty(messagingApiRequestInternal,"__esModule",{value:!0}),messagingApiRequestInternal.FirebaseMessagingRequestHandler=void 0;const e=requireApiRequest(),t=requireMessagingErrorsInternal(),s=requireUtils$2(),p=15e3,g="POST",m={"X-Firebase-Client":`fire-admin-node/${(0,s.getSdkVersion)()}`,access_token_auth:"true"};class d{constructor(a){this.httpClient=new e.AuthorizedHttpClient(a),this.http2Client=new e.AuthorizedHttp2Client(a)}invokeRequestHandler(a,o,h){const v={method:g,url:`https://${a}${o}`,data:h,headers:m,timeout:p};return this.httpClient.send(v).then(_=>{if(!_.isJson())throw new e.RequestResponseError(_);if((0,t.getErrorCode)(_.data))throw new e.RequestResponseError(_);return _.data}).catch(_=>{throw _ instanceof e.RequestResponseError?(0,t.createFirebaseError)(_):_})}invokeHttpRequestHandlerForSendResponse(a,o,h){const v={method:g,url:`https://${a}${o}`,data:h,headers:m,timeout:p};return this.httpClient.send(v).then(_=>this.buildSendResponse(_)).catch(_=>{if(_ instanceof e.RequestResponseError)return this.buildSendResponseFromError(_);throw _})}invokeHttp2RequestHandlerForSendResponse(a,o,h,v){const _={method:g,url:`https://${a}${o}`,data:h,headers:m,timeout:p,http2SessionHandler:v};return this.http2Client.send(_).then(y=>this.buildSendResponse(y)).catch(y=>{if(y instanceof e.RequestResponseError)return this.buildSendResponseFromError(y);throw y})}buildSendResponse(a){const o={success:a.status===200};return o.success?o.messageId=a.data.name:o.error=(0,t.createFirebaseError)(new e.RequestResponseError(a)),o}buildSendResponseFromError(a){return{success:!1,error:(0,t.createFirebaseError)(a)}}}return messagingApiRequestInternal.FirebaseMessagingRequestHandler=d,messagingApiRequestInternal}var hasRequiredMessaging$1;function requireMessaging$1(){if(hasRequiredMessaging$1)return messaging$1;hasRequiredMessaging$1=1;Object.defineProperty(messaging$1,"__esModule",{value:!0}),messaging$1.Messaging=void 0;const e=requireDeepCopy(),t=requireError(),s=requireUtils$2(),p=requireValidator$1(),g=requireMessagingInternal(),m=requireMessagingApiRequestInternal(),d=requireApiRequest(),l="fcm.googleapis.com",a="iid.googleapis.com",o="/iid/v1:batchAdd",h="/iid/v1:batchRemove",v=500;function _(w){const T={successCount:0,failureCount:0,errors:[]};return"results"in w&&w.results.forEach((I,O)=>{if("error"in I){T.failureCount+=1;const E=t.FirebaseMessagingError.fromTopicManagementServerError(I.error,void 0,I.error);T.errors.push({index:O,error:E})}else T.successCount+=1}),T}class y{constructor(T){if(this.useLegacyTransport=!1,!p.isNonNullObject(T)||!("options"in T))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_ARGUMENT,"First argument passed to admin.messaging() must be a valid Firebase app instance.");this.appInternal=T,this.messagingRequestHandler=new m.FirebaseMessagingRequestHandler(T)}get app(){return this.appInternal}enableLegacyHttpTransport(){this.useLegacyTransport=!0}send(T,I){const O=(0,e.deepCopy)(T);if((0,g.validateMessage)(O),typeof I<"u"&&!p.isBoolean(I))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_ARGUMENT,"dryRun must be a boolean");return this.getUrlPath().then(E=>{const C={message:O};return I&&(C.validate_only=!0),this.messagingRequestHandler.invokeRequestHandler(l,E,C)}).then(E=>E.name)}sendEach(T,I){p.isArray(T)&&T.constructor!==Array&&(T=Array.from(T));const O=(0,e.deepCopy)(T);if(!p.isNonEmptyArray(O))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_ARGUMENT,"messages must be a non-empty array");if(O.length>v)throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_ARGUMENT,`messages list must not contain more than ${v} items`);if(typeof I<"u"&&!p.isBoolean(I))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_ARGUMENT,"dryRun must be a boolean");const E=this.useLegacyTransport?void 0:new d.Http2SessionHandler(`https://${l}`);return this.getUrlPath().then(C=>{if(E){let x;return new Promise((j,D)=>{E.invoke().catch(q=>{const G=x?x.then(this.parseSendResponses):void 0;D(new t.FirebaseMessagingSessionError(q,void 0,G))});const k=O.map(async q=>{(0,g.validateMessage)(q);const G={message:q};return I&&(G.validate_only=!0),this.messagingRequestHandler.invokeHttp2RequestHandlerForSendResponse(l,C,G,E)});x=Promise.allSettled(k),x.then(j)})}else{const x=O.map(async j=>{(0,g.validateMessage)(j);const D={message:j};return I&&(D.validate_only=!0),this.messagingRequestHandler.invokeHttpRequestHandlerForSendResponse(l,C,D)});return Promise.allSettled(x)}}).then(this.parseSendResponses).finally(()=>{E?.close()})}parseSendResponses(T){const I=[];T.forEach(E=>{E.status==="fulfilled"?I.push(E.value):I.push({success:!1,error:E.reason})});const O=I.filter(E=>E.success).length;return{responses:I,successCount:O,failureCount:I.length-O}}sendEachForMulticast(T,I){const O=(0,e.deepCopy)(T);if(!p.isNonNullObject(O))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_ARGUMENT,"MulticastMessage must be a non-null object");if(!p.isNonEmptyArray(O.tokens))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_ARGUMENT,"tokens must be a non-empty array");if(O.tokens.length>v)throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_ARGUMENT,`tokens list must not contain more than ${v} items`);const E=O.tokens.map(C=>({token:C,android:O.android,apns:O.apns,data:O.data,notification:O.notification,webpush:O.webpush,fcmOptions:O.fcmOptions}));return this.sendEach(E,I)}subscribeToTopic(T,I){return this.sendTopicManagementRequest(T,I,"subscribeToTopic",o)}unsubscribeFromTopic(T,I){return this.sendTopicManagementRequest(T,I,"unsubscribeFromTopic",h)}getUrlPath(){return this.urlPath?Promise.resolve(this.urlPath):s.findProjectId(this.app).then(T=>{if(!p.isNonEmptyString(T))throw new t.FirebaseMessagingError(t.MessagingClientErrorCode.INVALID_ARGUMENT,"Failed to determine project ID for Messaging. Initialize the SDK with service account credentials or set project ID as an app option. Alternatively set the GOOGLE_CLOUD_PROJECT environment variable.");return this.urlPath=`/v1/projects/${T}/messages:send`,this.urlPath})}sendTopicManagementRequest(T,I,O,E){return this.validateRegistrationTokensType(T,O),this.validateTopicType(I,O),I=this.normalizeTopic(I),Promise.resolve().then(()=>{this.validateRegistrationTokens(T,O),this.validateTopic(I,O);let C=T;p.isString(T)&&(C=[T]);const x={to:I,registration_tokens:C};return this.messagingRequestHandler.invokeRequestHandler(a,E,x)}).then(C=>_(C))}validateRegistrationTokensType(T,I,O=t.MessagingClientErrorCode.INVALID_ARGUMENT){if(!p.isNonEmptyArray(T)&&!p.isNonEmptyString(T))throw new t.FirebaseMessagingError(O,`Registration token(s) provided to ${I}() must be a non-empty string or a non-empty array.`)}validateRegistrationTokens(T,I,O=t.MessagingClientErrorCode.INVALID_ARGUMENT){if(p.isArray(T)){if(T.length>1e3)throw new t.FirebaseMessagingError(O,`Too many registration tokens provided in a single request to ${I}(). Batch your requests to contain no more than 1,000 registration tokens per request.`);T.forEach((E,C)=>{if(!p.isNonEmptyString(E))throw new t.FirebaseMessagingError(O,`Registration token provided to ${I}() at index ${C} must be a non-empty string.`)})}}validateTopicType(T,I,O=t.MessagingClientErrorCode.INVALID_ARGUMENT){if(!p.isNonEmptyString(T))throw new t.FirebaseMessagingError(O,`Topic provided to ${I}() must be a string which matches the format "/topics/[a-zA-Z0-9-_.~%]+".`)}validateTopic(T,I,O=t.MessagingClientErrorCode.INVALID_ARGUMENT){if(!p.isTopic(T))throw new t.FirebaseMessagingError(O,`Topic provided to ${I}() must be a string which matches the format "/topics/[a-zA-Z0-9-_.~%]+".`)}normalizeTopic(T){return/^\/topics\//.test(T)||(T=`/topics/${T}`),T}}return messaging$1.Messaging=y,messaging$1}var storage$2={},src$9={},nodejsCommon={},service$2={},getRandomValues,rnds8=new Uint8Array(16);function rng$2(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate$3(e){return typeof e=="string"&&REGEX.test(e)}for(var byteToHex=[],i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));function stringify$2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=(byteToHex[e[t+0]]+byteToHex[e[t+1]]+byteToHex[e[t+2]]+byteToHex[e[t+3]]+"-"+byteToHex[e[t+4]]+byteToHex[e[t+5]]+"-"+byteToHex[e[t+6]]+byteToHex[e[t+7]]+"-"+byteToHex[e[t+8]]+byteToHex[e[t+9]]+"-"+byteToHex[e[t+10]]+byteToHex[e[t+11]]+byteToHex[e[t+12]]+byteToHex[e[t+13]]+byteToHex[e[t+14]]+byteToHex[e[t+15]]).toLowerCase();if(!validate$3(s))throw TypeError("Stringified UUID is invalid");return s}var _nodeId,_clockseq,_lastMSecs=0,_lastNSecs=0;function v1$3(e,t,s){var p=t&&s||0,g=t||new Array(16);e=e||{};var m=e.node||_nodeId,d=e.clockseq!==void 0?e.clockseq:_clockseq;if(m==null||d==null){var l=e.random||(e.rng||rng$2)();m==null&&(m=_nodeId=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]),d==null&&(d=_clockseq=(l[6]<<8|l[7])&16383)}var a=e.msecs!==void 0?e.msecs:Date.now(),o=e.nsecs!==void 0?e.nsecs:_lastNSecs+1,h=a-_lastMSecs+(o-_lastNSecs)/1e4;if(h<0&&e.clockseq===void 0&&(d=d+1&16383),(h<0||a>_lastMSecs)&&e.nsecs===void 0&&(o=0),o>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=a,_lastNSecs=o,_clockseq=d,a+=122192928e5;var v=((a&268435455)*1e4+o)%4294967296;g[p++]=v>>>24&255,g[p++]=v>>>16&255,g[p++]=v>>>8&255,g[p++]=v&255;var _=a/4294967296*1e4&268435455;g[p++]=_>>>8&255,g[p++]=_&255,g[p++]=_>>>24&15|16,g[p++]=_>>>16&255,g[p++]=d>>>8|128,g[p++]=d&255;for(var y=0;y<6;++y)g[p+y]=m[y];return t||stringify$2(g)}function parse$2(e){if(!validate$3(e))throw TypeError("Invalid UUID");var t,s=new Uint8Array(16);return s[0]=(t=parseInt(e.slice(0,8),16))>>>24,s[1]=t>>>16&255,s[2]=t>>>8&255,s[3]=t&255,s[4]=(t=parseInt(e.slice(9,13),16))>>>8,s[5]=t&255,s[6]=(t=parseInt(e.slice(14,18),16))>>>8,s[7]=t&255,s[8]=(t=parseInt(e.slice(19,23),16))>>>8,s[9]=t&255,s[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,s[11]=t/4294967296&255,s[12]=t>>>24&255,s[13]=t>>>16&255,s[14]=t>>>8&255,s[15]=t&255,s}function stringToBytes(e){e=unescape(encodeURIComponent(e));for(var t=[],s=0;s<e.length;++s)t.push(e.charCodeAt(s));return t}var DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",URL$1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35$2(e,t,s){function p(g,m,d,l){if(typeof g=="string"&&(g=stringToBytes(g)),typeof m=="string"&&(m=parse$2(m)),m.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+g.length);if(a.set(m),a.set(g,m.length),a=s(a),a[6]=a[6]&15|t,a[8]=a[8]&63|128,d){l=l||0;for(var o=0;o<16;++o)d[l+o]=a[o];return d}return stringify$2(a)}try{p.name=e}catch{}return p.DNS=DNS,p.URL=URL$1,p}function md5$2(e){if(typeof e=="string"){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var s=0;s<t.length;++s)e[s]=t.charCodeAt(s)}return md5ToHexEncodedArray(wordsToMd5(bytesToWords(e),e.length*8))}function md5ToHexEncodedArray(e){for(var t=[],s=e.length*32,p="0123456789abcdef",g=0;g<s;g+=8){var m=e[g>>5]>>>g%32&255,d=parseInt(p.charAt(m>>>4&15)+p.charAt(m&15),16);t.push(d)}return t}function getOutputLength(e){return(e+64>>>9<<4)+14+1}function wordsToMd5(e,t){e[t>>5]|=128<<t%32,e[getOutputLength(t)-1]=t;for(var s=1732584193,p=-271733879,g=-1732584194,m=271733878,d=0;d<e.length;d+=16){var l=s,a=p,o=g,h=m;s=md5ff(s,p,g,m,e[d],7,-680876936),m=md5ff(m,s,p,g,e[d+1],12,-389564586),g=md5ff(g,m,s,p,e[d+2],17,606105819),p=md5ff(p,g,m,s,e[d+3],22,-1044525330),s=md5ff(s,p,g,m,e[d+4],7,-176418897),m=md5ff(m,s,p,g,e[d+5],12,1200080426),g=md5ff(g,m,s,p,e[d+6],17,-1473231341),p=md5ff(p,g,m,s,e[d+7],22,-45705983),s=md5ff(s,p,g,m,e[d+8],7,1770035416),m=md5ff(m,s,p,g,e[d+9],12,-1958414417),g=md5ff(g,m,s,p,e[d+10],17,-42063),p=md5ff(p,g,m,s,e[d+11],22,-1990404162),s=md5ff(s,p,g,m,e[d+12],7,1804603682),m=md5ff(m,s,p,g,e[d+13],12,-40341101),g=md5ff(g,m,s,p,e[d+14],17,-1502002290),p=md5ff(p,g,m,s,e[d+15],22,1236535329),s=md5gg(s,p,g,m,e[d+1],5,-165796510),m=md5gg(m,s,p,g,e[d+6],9,-1069501632),g=md5gg(g,m,s,p,e[d+11],14,643717713),p=md5gg(p,g,m,s,e[d],20,-373897302),s=md5gg(s,p,g,m,e[d+5],5,-701558691),m=md5gg(m,s,p,g,e[d+10],9,38016083),g=md5gg(g,m,s,p,e[d+15],14,-660478335),p=md5gg(p,g,m,s,e[d+4],20,-405537848),s=md5gg(s,p,g,m,e[d+9],5,568446438),m=md5gg(m,s,p,g,e[d+14],9,-1019803690),g=md5gg(g,m,s,p,e[d+3],14,-187363961),p=md5gg(p,g,m,s,e[d+8],20,1163531501),s=md5gg(s,p,g,m,e[d+13],5,-1444681467),m=md5gg(m,s,p,g,e[d+2],9,-51403784),g=md5gg(g,m,s,p,e[d+7],14,1735328473),p=md5gg(p,g,m,s,e[d+12],20,-1926607734),s=md5hh(s,p,g,m,e[d+5],4,-378558),m=md5hh(m,s,p,g,e[d+8],11,-2022574463),g=md5hh(g,m,s,p,e[d+11],16,1839030562),p=md5hh(p,g,m,s,e[d+14],23,-35309556),s=md5hh(s,p,g,m,e[d+1],4,-1530992060),m=md5hh(m,s,p,g,e[d+4],11,1272893353),g=md5hh(g,m,s,p,e[d+7],16,-155497632),p=md5hh(p,g,m,s,e[d+10],23,-1094730640),s=md5hh(s,p,g,m,e[d+13],4,681279174),m=md5hh(m,s,p,g,e[d],11,-358537222),g=md5hh(g,m,s,p,e[d+3],16,-722521979),p=md5hh(p,g,m,s,e[d+6],23,76029189),s=md5hh(s,p,g,m,e[d+9],4,-640364487),m=md5hh(m,s,p,g,e[d+12],11,-421815835),g=md5hh(g,m,s,p,e[d+15],16,530742520),p=md5hh(p,g,m,s,e[d+2],23,-995338651),s=md5ii(s,p,g,m,e[d],6,-198630844),m=md5ii(m,s,p,g,e[d+7],10,1126891415),g=md5ii(g,m,s,p,e[d+14],15,-1416354905),p=md5ii(p,g,m,s,e[d+5],21,-57434055),s=md5ii(s,p,g,m,e[d+12],6,1700485571),m=md5ii(m,s,p,g,e[d+3],10,-1894986606),g=md5ii(g,m,s,p,e[d+10],15,-1051523),p=md5ii(p,g,m,s,e[d+1],21,-2054922799),s=md5ii(s,p,g,m,e[d+8],6,1873313359),m=md5ii(m,s,p,g,e[d+15],10,-30611744),g=md5ii(g,m,s,p,e[d+6],15,-1560198380),p=md5ii(p,g,m,s,e[d+13],21,1309151649),s=md5ii(s,p,g,m,e[d+4],6,-145523070),m=md5ii(m,s,p,g,e[d+11],10,-1120210379),g=md5ii(g,m,s,p,e[d+2],15,718787259),p=md5ii(p,g,m,s,e[d+9],21,-343485551),s=safeAdd(s,l),p=safeAdd(p,a),g=safeAdd(g,o),m=safeAdd(m,h)}return[s,p,g,m]}function bytesToWords(e){if(e.length===0)return[];for(var t=e.length*8,s=new Uint32Array(getOutputLength(t)),p=0;p<t;p+=8)s[p>>5]|=(e[p/8]&255)<<p%32;return s}function safeAdd(e,t){var s=(e&65535)+(t&65535),p=(e>>16)+(t>>16)+(s>>16);return p<<16|s&65535}function bitRotateLeft(e,t){return e<<t|e>>>32-t}function md5cmn(e,t,s,p,g,m){return safeAdd(bitRotateLeft(safeAdd(safeAdd(t,e),safeAdd(p,m)),g),s)}function md5ff(e,t,s,p,g,m,d){return md5cmn(t&s|~t&p,e,t,g,m,d)}function md5gg(e,t,s,p,g,m,d){return md5cmn(t&p|s&~p,e,t,g,m,d)}function md5hh(e,t,s,p,g,m,d){return md5cmn(t^s^p,e,t,g,m,d)}function md5ii(e,t,s,p,g,m,d){return md5cmn(s^(t|~p),e,t,g,m,d)}var v3$2=v35$2("v3",48,md5$2);function v4$2(e,t,s){e=e||{};var p=e.random||(e.rng||rng$2)();if(p[6]=p[6]&15|64,p[8]=p[8]&63|128,t){s=s||0;for(var g=0;g<16;++g)t[s+g]=p[g];return t}return stringify$2(p)}function f(e,t,s,p){switch(e){case 0:return t&s^~t&p;case 1:return t^s^p;case 2:return t&s^t&p^s&p;case 3:return t^s^p}}function ROTL(e,t){return e<<t|e>>>32-t}function sha1$2(e){var t=[1518500249,1859775393,2400959708,3395469782],s=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){var p=unescape(encodeURIComponent(e));e=[];for(var g=0;g<p.length;++g)e.push(p.charCodeAt(g))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var m=e.length/4+2,d=Math.ceil(m/16),l=new Array(d),a=0;a<d;++a){for(var o=new Uint32Array(16),h=0;h<16;++h)o[h]=e[a*64+h*4]<<24|e[a*64+h*4+1]<<16|e[a*64+h*4+2]<<8|e[a*64+h*4+3];l[a]=o}l[d-1][14]=(e.length-1)*8/Math.pow(2,32),l[d-1][14]=Math.floor(l[d-1][14]),l[d-1][15]=(e.length-1)*8&4294967295;for(var v=0;v<d;++v){for(var _=new Uint32Array(80),y=0;y<16;++y)_[y]=l[v][y];for(var w=16;w<80;++w)_[w]=ROTL(_[w-3]^_[w-8]^_[w-14]^_[w-16],1);for(var T=s[0],I=s[1],O=s[2],E=s[3],C=s[4],x=0;x<80;++x){var j=Math.floor(x/20),D=ROTL(T,5)+f(j,I,O,E)+C+t[j]+_[x]>>>0;C=E,E=O,O=ROTL(I,30)>>>0,I=T,T=D}s[0]=s[0]+T>>>0,s[1]=s[1]+I>>>0,s[2]=s[2]+O>>>0,s[3]=s[3]+E>>>0,s[4]=s[4]+C>>>0}return[s[0]>>24&255,s[0]>>16&255,s[0]>>8&255,s[0]&255,s[1]>>24&255,s[1]>>16&255,s[1]>>8&255,s[1]&255,s[2]>>24&255,s[2]>>16&255,s[2]>>8&255,s[2]&255,s[3]>>24&255,s[3]>>16&255,s[3]>>8&255,s[3]&255,s[4]>>24&255,s[4]>>16&255,s[4]>>8&255,s[4]&255]}var v5$2=v35$2("v5",80,sha1$2);const nil$2="00000000-0000-0000-0000-000000000000";function version$5(e){if(!validate$3(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}const esmBrowser=Object.freeze(Object.defineProperty({__proto__:null,NIL:nil$2,parse:parse$2,stringify:stringify$2,v1:v1$3,v3:v3$2,v4:v4$2,v5:v5$2,validate:validate$3,version:version$5},Symbol.toStringTag,{value:"Module"})),require$$6$1=getAugmentedNamespace(esmBrowser);var util$6={},src$8={},hasRequiredSrc$9;function requireSrc$9(){if(hasRequiredSrc$9)return src$8;hasRequiredSrc$9=1,Object.defineProperty(src$8,"__esModule",{value:!0}),src$8.MissingProjectIdError=src$8.replaceProjectIdToken=void 0;const e=require$$1$3;function t(p,g){if(Array.isArray(p)&&(p=p.map(m=>t(m,g))),p!==null&&typeof p=="object"&&!(p instanceof Buffer)&&!(p instanceof e.Stream)&&typeof p.hasOwnProperty=="function")for(const m in p)p.hasOwnProperty(m)&&(p[m]=t(p[m],g));if(typeof p=="string"&&p.indexOf("{{projectId}}")>-1){if(!g||g==="{{projectId}}")throw new s;p=p.replace(/{{projectId}}/g,g)}return p}src$8.replaceProjectIdToken=t;class s extends Error{constructor(){super(...arguments),this.message=`Sorry, we cannot connect to Cloud Services without a project
    ID. You may specify one with an environment variable named
    "GOOGLE_CLOUD_PROJECT".`.replace(/ +/g," ")}}return src$8.MissingProjectIdError=s,src$8}var commonjs={},namedReferences={},hasRequiredNamedReferences;function requireNamedReferences(){return hasRequiredNamedReferences||(hasRequiredNamedReferences=1,(function(e){var t=namedReferences&&namedReferences.__assign||function(){return t=Object.assign||function(m){for(var d,l=1,a=arguments.length;l<a;l++){d=arguments[l];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(m[o]=d[o])}return m},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.namedReferences=e.bodyRegExps=void 0;var s="~",p="~~";function g(m,d){for(var l={},a={},o=m.split(p),h=!1,v=0;o.length>v;v++){for(var _=o[v].split(s),y=0;y<_.length;y+=2){var w=_[y],T=_[y+1],I="&"+w+";";l[I]=T,h&&(l["&"+w]=T),a[T]=I}h=!0}return d?{entities:t(t({},l),d.entities),characters:t(t({},a),d.characters)}:{entities:l,characters:a}}e.bodyRegExps={xml:/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g,html4:/&notin;|&(?:nbsp|iexcl|cent|pound|curren|yen|brvbar|sect|uml|copy|ordf|laquo|not|shy|reg|macr|deg|plusmn|sup2|sup3|acute|micro|para|middot|cedil|sup1|ordm|raquo|frac14|frac12|frac34|iquest|Agrave|Aacute|Acirc|Atilde|Auml|Aring|AElig|Ccedil|Egrave|Eacute|Ecirc|Euml|Igrave|Iacute|Icirc|Iuml|ETH|Ntilde|Ograve|Oacute|Ocirc|Otilde|Ouml|times|Oslash|Ugrave|Uacute|Ucirc|Uuml|Yacute|THORN|szlig|agrave|aacute|acirc|atilde|auml|aring|aelig|ccedil|egrave|eacute|ecirc|euml|igrave|iacute|icirc|iuml|eth|ntilde|ograve|oacute|ocirc|otilde|ouml|divide|oslash|ugrave|uacute|ucirc|uuml|yacute|thorn|yuml|quot|amp|lt|gt|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g,html5:/&centerdot;|&copysr;|&divideontimes;|&gtcc;|&gtcir;|&gtdot;|&gtlPar;|&gtquest;|&gtrapprox;|&gtrarr;|&gtrdot;|&gtreqless;|&gtreqqless;|&gtrless;|&gtrsim;|&ltcc;|&ltcir;|&ltdot;|&lthree;|&ltimes;|&ltlarr;|&ltquest;|&ltrPar;|&ltri;|&ltrie;|&ltrif;|&notin;|&notinE;|&notindot;|&notinva;|&notinvb;|&notinvc;|&notni;|&notniva;|&notnivb;|&notnivc;|&parallel;|&timesb;|&timesbar;|&timesd;|&(?:AElig|AMP|Aacute|Acirc|Agrave|Aring|Atilde|Auml|COPY|Ccedil|ETH|Eacute|Ecirc|Egrave|Euml|GT|Iacute|Icirc|Igrave|Iuml|LT|Ntilde|Oacute|Ocirc|Ograve|Oslash|Otilde|Ouml|QUOT|REG|THORN|Uacute|Ucirc|Ugrave|Uuml|Yacute|aacute|acirc|acute|aelig|agrave|amp|aring|atilde|auml|brvbar|ccedil|cedil|cent|copy|curren|deg|divide|eacute|ecirc|egrave|eth|euml|frac12|frac14|frac34|gt|iacute|icirc|iexcl|igrave|iquest|iuml|laquo|lt|macr|micro|middot|nbsp|not|ntilde|oacute|ocirc|ograve|ordf|ordm|oslash|otilde|ouml|para|plusmn|pound|quot|raquo|reg|sect|shy|sup1|sup2|sup3|szlig|thorn|times|uacute|ucirc|ugrave|uml|uuml|yacute|yen|yuml|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g},e.namedReferences={},e.namedReferences.xml=g(`lt~<~gt~>~quot~"~apos~'~amp~&`),e.namedReferences.html4=g(`apos~'~OElig~~oelig~~Scaron~~scaron~~Yuml~~circ~~tilde~~ensp~~emsp~~thinsp~~zwnj~~zwj~~lrm~~rlm~~ndash~~mdash~~lsquo~~rsquo~~sbquo~~ldquo~~rdquo~~bdquo~~dagger~~Dagger~~permil~~lsaquo~~rsaquo~~euro~~fnof~~Alpha~~Beta~~Gamma~~Delta~~Epsilon~~Zeta~~Eta~~Theta~~Iota~~Kappa~~Lambda~~Mu~~Nu~~Xi~~Omicron~~Pi~~Rho~~Sigma~~Tau~~Upsilon~~Phi~~Chi~~Psi~~Omega~~alpha~~beta~~gamma~~delta~~epsilon~~zeta~~eta~~theta~~iota~~kappa~~lambda~~mu~~nu~~xi~~omicron~~pi~~rho~~sigmaf~~sigma~~tau~~upsilon~~phi~~chi~~psi~~omega~~thetasym~~upsih~~piv~~bull~~hellip~~prime~~Prime~~oline~~frasl~~weierp~~image~~real~~trade~~alefsym~~larr~~uarr~~rarr~~darr~~harr~~crarr~~lArr~~uArr~~rArr~~dArr~~hArr~~forall~~part~~exist~~empty~~nabla~~isin~~notin~~ni~~prod~~sum~~minus~~lowast~~radic~~prop~~infin~~ang~~and~~or~~cap~~cup~~int~~there4~~sim~~cong~~asymp~~ne~~equiv~~le~~ge~~sub~~sup~~nsub~~sube~~supe~~oplus~~otimes~~perp~~sdot~~lceil~~rceil~~lfloor~~rfloor~~lang~~rang~~loz~~spades~~clubs~~hearts~~diams~~~nbsp~~iexcl~~cent~~pound~~curren~~yen~~brvbar~~sect~~uml~~copy~~ordf~~laquo~~not~~shy~~reg~~macr~~deg~~plusmn~~sup2~~sup3~~acute~~micro~~para~~middot~~cedil~~sup1~~ordm~~raquo~~frac14~~frac12~~frac34~~iquest~~Agrave~~Aacute~~Acirc~~Atilde~~Auml~~Aring~~AElig~~Ccedil~~Egrave~~Eacute~~Ecirc~~Euml~~Igrave~~Iacute~~Icirc~~Iuml~~ETH~~Ntilde~~Ograve~~Oacute~~Ocirc~~Otilde~~Ouml~~times~~Oslash~~Ugrave~~Uacute~~Ucirc~~Uuml~~Yacute~~THORN~~szlig~~agrave~~aacute~~acirc~~atilde~~auml~~aring~~aelig~~ccedil~~egrave~~eacute~~ecirc~~euml~~igrave~~iacute~~icirc~~iuml~~eth~~ntilde~~ograve~~oacute~~ocirc~~otilde~~ouml~~divide~~oslash~~ugrave~~uacute~~ucirc~~uuml~~yacute~~thorn~~yuml~~quot~"~amp~&~lt~<~gt~>`),e.namedReferences.html5=g('Abreve~~Acy~~Afr~~Amacr~~And~~Aogon~~Aopf~~ApplyFunction~~Ascr~~Assign~~Backslash~~Barv~~Barwed~~Bcy~~Because~~Bernoullis~~Bfr~~Bopf~~Breve~~Bscr~~Bumpeq~~CHcy~~Cacute~~Cap~~CapitalDifferentialD~~Cayleys~~Ccaron~~Ccirc~~Cconint~~Cdot~~Cedilla~~CenterDot~~Cfr~~CircleDot~~CircleMinus~~CirclePlus~~CircleTimes~~ClockwiseContourIntegral~~CloseCurlyDoubleQuote~~CloseCurlyQuote~~Colon~~Colone~~Congruent~~Conint~~ContourIntegral~~Copf~~Coproduct~~CounterClockwiseContourIntegral~~Cross~~Cscr~~Cup~~CupCap~~DD~~DDotrahd~~DJcy~~DScy~~DZcy~~Darr~~Dashv~~Dcaron~~Dcy~~Del~~Dfr~~DiacriticalAcute~~DiacriticalDot~~DiacriticalDoubleAcute~~DiacriticalGrave~`~DiacriticalTilde~~Diamond~~DifferentialD~~Dopf~~Dot~~DotDot~~DotEqual~~DoubleContourIntegral~~DoubleDot~~DoubleDownArrow~~DoubleLeftArrow~~DoubleLeftRightArrow~~DoubleLeftTee~~DoubleLongLeftArrow~~DoubleLongLeftRightArrow~~DoubleLongRightArrow~~DoubleRightArrow~~DoubleRightTee~~DoubleUpArrow~~DoubleUpDownArrow~~DoubleVerticalBar~~DownArrow~~DownArrowBar~~DownArrowUpArrow~~DownBreve~~DownLeftRightVector~~DownLeftTeeVector~~DownLeftVector~~DownLeftVectorBar~~DownRightTeeVector~~DownRightVector~~DownRightVectorBar~~DownTee~~DownTeeArrow~~Downarrow~~Dscr~~Dstrok~~ENG~~Ecaron~~Ecy~~Edot~~Efr~~Element~~Emacr~~EmptySmallSquare~~EmptyVerySmallSquare~~Eogon~~Eopf~~Equal~~EqualTilde~~Equilibrium~~Escr~~Esim~~Exists~~ExponentialE~~Fcy~~Ffr~~FilledSmallSquare~~FilledVerySmallSquare~~Fopf~~ForAll~~Fouriertrf~~Fscr~~GJcy~~Gammad~~Gbreve~~Gcedil~~Gcirc~~Gcy~~Gdot~~Gfr~~Gg~~Gopf~~GreaterEqual~~GreaterEqualLess~~GreaterFullEqual~~GreaterGreater~~GreaterLess~~GreaterSlantEqual~~GreaterTilde~~Gscr~~Gt~~HARDcy~~Hacek~~Hat~^~Hcirc~~Hfr~~HilbertSpace~~Hopf~~HorizontalLine~~Hscr~~Hstrok~~HumpDownHump~~HumpEqual~~IEcy~~IJlig~~IOcy~~Icy~~Idot~~Ifr~~Im~~Imacr~~ImaginaryI~~Implies~~Int~~Integral~~Intersection~~InvisibleComma~~InvisibleTimes~~Iogon~~Iopf~~Iscr~~Itilde~~Iukcy~~Jcirc~~Jcy~~Jfr~~Jopf~~Jscr~~Jsercy~~Jukcy~~KHcy~~KJcy~~Kcedil~~Kcy~~Kfr~~Kopf~~Kscr~~LJcy~~Lacute~~Lang~~Laplacetrf~~Larr~~Lcaron~~Lcedil~~Lcy~~LeftAngleBracket~~LeftArrow~~LeftArrowBar~~LeftArrowRightArrow~~LeftCeiling~~LeftDoubleBracket~~LeftDownTeeVector~~LeftDownVector~~LeftDownVectorBar~~LeftFloor~~LeftRightArrow~~LeftRightVector~~LeftTee~~LeftTeeArrow~~LeftTeeVector~~LeftTriangle~~LeftTriangleBar~~LeftTriangleEqual~~LeftUpDownVector~~LeftUpTeeVector~~LeftUpVector~~LeftUpVectorBar~~LeftVector~~LeftVectorBar~~Leftarrow~~Leftrightarrow~~LessEqualGreater~~LessFullEqual~~LessGreater~~LessLess~~LessSlantEqual~~LessTilde~~Lfr~~Ll~~Lleftarrow~~Lmidot~~LongLeftArrow~~LongLeftRightArrow~~LongRightArrow~~Longleftarrow~~Longleftrightarrow~~Longrightarrow~~Lopf~~LowerLeftArrow~~LowerRightArrow~~Lscr~~Lsh~~Lstrok~~Lt~~Map~~Mcy~~MediumSpace~~Mellintrf~~Mfr~~MinusPlus~~Mopf~~Mscr~~NJcy~~Nacute~~Ncaron~~Ncedil~~Ncy~~NegativeMediumSpace~~NegativeThickSpace~~NegativeThinSpace~~NegativeVeryThinSpace~~NestedGreaterGreater~~NestedLessLess~~NewLine~\n~Nfr~~NoBreak~~NonBreakingSpace~~Nopf~~Not~~NotCongruent~~NotCupCap~~NotDoubleVerticalBar~~NotElement~~NotEqual~~NotEqualTilde~~NotExists~~NotGreater~~NotGreaterEqual~~NotGreaterFullEqual~~NotGreaterGreater~~NotGreaterLess~~NotGreaterSlantEqual~~NotGreaterTilde~~NotHumpDownHump~~NotHumpEqual~~NotLeftTriangle~~NotLeftTriangleBar~~NotLeftTriangleEqual~~NotLess~~NotLessEqual~~NotLessGreater~~NotLessLess~~NotLessSlantEqual~~NotLessTilde~~NotNestedGreaterGreater~~NotNestedLessLess~~NotPrecedes~~NotPrecedesEqual~~NotPrecedesSlantEqual~~NotReverseElement~~NotRightTriangle~~NotRightTriangleBar~~NotRightTriangleEqual~~NotSquareSubset~~NotSquareSubsetEqual~~NotSquareSuperset~~NotSquareSupersetEqual~~NotSubset~~NotSubsetEqual~~NotSucceeds~~NotSucceedsEqual~~NotSucceedsSlantEqual~~NotSucceedsTilde~~NotSuperset~~NotSupersetEqual~~NotTilde~~NotTildeEqual~~NotTildeFullEqual~~NotTildeTilde~~NotVerticalBar~~Nscr~~Ocy~~Odblac~~Ofr~~Omacr~~Oopf~~OpenCurlyDoubleQuote~~OpenCurlyQuote~~Or~~Oscr~~Otimes~~OverBar~~OverBrace~~OverBracket~~OverParenthesis~~PartialD~~Pcy~~Pfr~~PlusMinus~~Poincareplane~~Popf~~Pr~~Precedes~~PrecedesEqual~~PrecedesSlantEqual~~PrecedesTilde~~Product~~Proportion~~Proportional~~Pscr~~Qfr~~Qopf~~Qscr~~RBarr~~Racute~~Rang~~Rarr~~Rarrtl~~Rcaron~~Rcedil~~Rcy~~Re~~ReverseElement~~ReverseEquilibrium~~ReverseUpEquilibrium~~Rfr~~RightAngleBracket~~RightArrow~~RightArrowBar~~RightArrowLeftArrow~~RightCeiling~~RightDoubleBracket~~RightDownTeeVector~~RightDownVector~~RightDownVectorBar~~RightFloor~~RightTee~~RightTeeArrow~~RightTeeVector~~RightTriangle~~RightTriangleBar~~RightTriangleEqual~~RightUpDownVector~~RightUpTeeVector~~RightUpVector~~RightUpVectorBar~~RightVector~~RightVectorBar~~Rightarrow~~Ropf~~RoundImplies~~Rrightarrow~~Rscr~~Rsh~~RuleDelayed~~SHCHcy~~SHcy~~SOFTcy~~Sacute~~Sc~~Scedil~~Scirc~~Scy~~Sfr~~ShortDownArrow~~ShortLeftArrow~~ShortRightArrow~~ShortUpArrow~~SmallCircle~~Sopf~~Sqrt~~Square~~SquareIntersection~~SquareSubset~~SquareSubsetEqual~~SquareSuperset~~SquareSupersetEqual~~SquareUnion~~Sscr~~Star~~Sub~~Subset~~SubsetEqual~~Succeeds~~SucceedsEqual~~SucceedsSlantEqual~~SucceedsTilde~~SuchThat~~Sum~~Sup~~Superset~~SupersetEqual~~Supset~~TRADE~~TSHcy~~TScy~~Tab~	~Tcaron~~Tcedil~~Tcy~~Tfr~~Therefore~~ThickSpace~~ThinSpace~~Tilde~~TildeEqual~~TildeFullEqual~~TildeTilde~~Topf~~TripleDot~~Tscr~~Tstrok~~Uarr~~Uarrocir~~Ubrcy~~Ubreve~~Ucy~~Udblac~~Ufr~~Umacr~~UnderBar~_~UnderBrace~~UnderBracket~~UnderParenthesis~~Union~~UnionPlus~~Uogon~~Uopf~~UpArrow~~UpArrowBar~~UpArrowDownArrow~~UpDownArrow~~UpEquilibrium~~UpTee~~UpTeeArrow~~Uparrow~~Updownarrow~~UpperLeftArrow~~UpperRightArrow~~Upsi~~Uring~~Uscr~~Utilde~~VDash~~Vbar~~Vcy~~Vdash~~Vdashl~~Vee~~Verbar~~Vert~~VerticalBar~~VerticalLine~|~VerticalSeparator~~VerticalTilde~~VeryThinSpace~~Vfr~~Vopf~~Vscr~~Vvdash~~Wcirc~~Wedge~~Wfr~~Wopf~~Wscr~~Xfr~~Xopf~~Xscr~~YAcy~~YIcy~~YUcy~~Ycirc~~Ycy~~Yfr~~Yopf~~Yscr~~ZHcy~~Zacute~~Zcaron~~Zcy~~Zdot~~ZeroWidthSpace~~Zfr~~Zopf~~Zscr~~abreve~~ac~~acE~~acd~~acy~~af~~afr~~aleph~~amacr~~amalg~~andand~~andd~~andslope~~andv~~ange~~angle~~angmsd~~angmsdaa~~angmsdab~~angmsdac~~angmsdad~~angmsdae~~angmsdaf~~angmsdag~~angmsdah~~angrt~~angrtvb~~angrtvbd~~angsph~~angst~~angzarr~~aogon~~aopf~~ap~~apE~~apacir~~ape~~apid~~approx~~approxeq~~ascr~~ast~*~asympeq~~awconint~~awint~~bNot~~backcong~~backepsilon~~backprime~~backsim~~backsimeq~~barvee~~barwed~~barwedge~~bbrk~~bbrktbrk~~bcong~~bcy~~becaus~~because~~bemptyv~~bepsi~~bernou~~beth~~between~~bfr~~bigcap~~bigcirc~~bigcup~~bigodot~~bigoplus~~bigotimes~~bigsqcup~~bigstar~~bigtriangledown~~bigtriangleup~~biguplus~~bigvee~~bigwedge~~bkarow~~blacklozenge~~blacksquare~~blacktriangle~~blacktriangledown~~blacktriangleleft~~blacktriangleright~~blank~~blk12~~blk14~~blk34~~block~~bne~=~bnequiv~~bnot~~bopf~~bot~~bottom~~bowtie~~boxDL~~boxDR~~boxDl~~boxDr~~boxH~~boxHD~~boxHU~~boxHd~~boxHu~~boxUL~~boxUR~~boxUl~~boxUr~~boxV~~boxVH~~boxVL~~boxVR~~boxVh~~boxVl~~boxVr~~boxbox~~boxdL~~boxdR~~boxdl~~boxdr~~boxh~~boxhD~~boxhU~~boxhd~~boxhu~~boxminus~~boxplus~~boxtimes~~boxuL~~boxuR~~boxul~~boxur~~boxv~~boxvH~~boxvL~~boxvR~~boxvh~~boxvl~~boxvr~~bprime~~breve~~bscr~~bsemi~~bsim~~bsime~~bsol~\\~bsolb~~bsolhsub~~bullet~~bump~~bumpE~~bumpe~~bumpeq~~cacute~~capand~~capbrcup~~capcap~~capcup~~capdot~~caps~~caret~~caron~~ccaps~~ccaron~~ccirc~~ccups~~ccupssm~~cdot~~cemptyv~~centerdot~~cfr~~chcy~~check~~checkmark~~cir~~cirE~~circeq~~circlearrowleft~~circlearrowright~~circledR~~circledS~~circledast~~circledcirc~~circleddash~~cire~~cirfnint~~cirmid~~cirscir~~clubsuit~~colon~:~colone~~coloneq~~comma~,~commat~@~comp~~compfn~~complement~~complexes~~congdot~~conint~~copf~~coprod~~copysr~~cross~~cscr~~csub~~csube~~csup~~csupe~~ctdot~~cudarrl~~cudarrr~~cuepr~~cuesc~~cularr~~cularrp~~cupbrcap~~cupcap~~cupcup~~cupdot~~cupor~~cups~~curarr~~curarrm~~curlyeqprec~~curlyeqsucc~~curlyvee~~curlywedge~~curvearrowleft~~curvearrowright~~cuvee~~cuwed~~cwconint~~cwint~~cylcty~~dHar~~daleth~~dash~~dashv~~dbkarow~~dblac~~dcaron~~dcy~~dd~~ddagger~~ddarr~~ddotseq~~demptyv~~dfisht~~dfr~~dharl~~dharr~~diam~~diamond~~diamondsuit~~die~~digamma~~disin~~div~~divideontimes~~divonx~~djcy~~dlcorn~~dlcrop~~dollar~$~dopf~~dot~~doteq~~doteqdot~~dotminus~~dotplus~~dotsquare~~doublebarwedge~~downarrow~~downdownarrows~~downharpoonleft~~downharpoonright~~drbkarow~~drcorn~~drcrop~~dscr~~dscy~~dsol~~dstrok~~dtdot~~dtri~~dtrif~~duarr~~duhar~~dwangle~~dzcy~~dzigrarr~~eDDot~~eDot~~easter~~ecaron~~ecir~~ecolon~~ecy~~edot~~ee~~efDot~~efr~~eg~~egs~~egsdot~~el~~elinters~~ell~~els~~elsdot~~emacr~~emptyset~~emptyv~~emsp13~~emsp14~~eng~~eogon~~eopf~~epar~~eparsl~~eplus~~epsi~~epsiv~~eqcirc~~eqcolon~~eqsim~~eqslantgtr~~eqslantless~~equals~=~equest~~equivDD~~eqvparsl~~erDot~~erarr~~escr~~esdot~~esim~~excl~!~expectation~~exponentiale~~fallingdotseq~~fcy~~female~~ffilig~~fflig~~ffllig~~ffr~~filig~~fjlig~fj~flat~~fllig~~fltns~~fopf~~fork~~forkv~~fpartint~~frac13~~frac15~~frac16~~frac18~~frac23~~frac25~~frac35~~frac38~~frac45~~frac56~~frac58~~frac78~~frown~~fscr~~gE~~gEl~~gacute~~gammad~~gap~~gbreve~~gcirc~~gcy~~gdot~~gel~~geq~~geqq~~geqslant~~ges~~gescc~~gesdot~~gesdoto~~gesdotol~~gesl~~gesles~~gfr~~gg~~ggg~~gimel~~gjcy~~gl~~glE~~gla~~glj~~gnE~~gnap~~gnapprox~~gne~~gneq~~gneqq~~gnsim~~gopf~~grave~`~gscr~~gsim~~gsime~~gsiml~~gtcc~~gtcir~~gtdot~~gtlPar~~gtquest~~gtrapprox~~gtrarr~~gtrdot~~gtreqless~~gtreqqless~~gtrless~~gtrsim~~gvertneqq~~gvnE~~hairsp~~half~~hamilt~~hardcy~~harrcir~~harrw~~hbar~~hcirc~~heartsuit~~hercon~~hfr~~hksearow~~hkswarow~~hoarr~~homtht~~hookleftarrow~~hookrightarrow~~hopf~~horbar~~hscr~~hslash~~hstrok~~hybull~~hyphen~~ic~~icy~~iecy~~iff~~ifr~~ii~~iiiint~~iiint~~iinfin~~iiota~~ijlig~~imacr~~imagline~~imagpart~~imath~~imof~~imped~~in~~incare~~infintie~~inodot~~intcal~~integers~~intercal~~intlarhk~~intprod~~iocy~~iogon~~iopf~~iprod~~iscr~~isinE~~isindot~~isins~~isinsv~~isinv~~it~~itilde~~iukcy~~jcirc~~jcy~~jfr~~jmath~~jopf~~jscr~~jsercy~~jukcy~~kappav~~kcedil~~kcy~~kfr~~kgreen~~khcy~~kjcy~~kopf~~kscr~~lAarr~~lAtail~~lBarr~~lE~~lEg~~lHar~~lacute~~laemptyv~~lagran~~langd~~langle~~lap~~larrb~~larrbfs~~larrfs~~larrhk~~larrlp~~larrpl~~larrsim~~larrtl~~lat~~latail~~late~~lates~~lbarr~~lbbrk~~lbrace~{~lbrack~[~lbrke~~lbrksld~~lbrkslu~~lcaron~~lcedil~~lcub~{~lcy~~ldca~~ldquor~~ldrdhar~~ldrushar~~ldsh~~leftarrow~~leftarrowtail~~leftharpoondown~~leftharpoonup~~leftleftarrows~~leftrightarrow~~leftrightarrows~~leftrightharpoons~~leftrightsquigarrow~~leftthreetimes~~leg~~leq~~leqq~~leqslant~~les~~lescc~~lesdot~~lesdoto~~lesdotor~~lesg~~lesges~~lessapprox~~lessdot~~lesseqgtr~~lesseqqgtr~~lessgtr~~lesssim~~lfisht~~lfr~~lg~~lgE~~lhard~~lharu~~lharul~~lhblk~~ljcy~~ll~~llarr~~llcorner~~llhard~~lltri~~lmidot~~lmoust~~lmoustache~~lnE~~lnap~~lnapprox~~lne~~lneq~~lneqq~~lnsim~~loang~~loarr~~lobrk~~longleftarrow~~longleftrightarrow~~longmapsto~~longrightarrow~~looparrowleft~~looparrowright~~lopar~~lopf~~loplus~~lotimes~~lowbar~_~lozenge~~lozf~~lpar~(~lparlt~~lrarr~~lrcorner~~lrhar~~lrhard~~lrtri~~lscr~~lsh~~lsim~~lsime~~lsimg~~lsqb~[~lsquor~~lstrok~~ltcc~~ltcir~~ltdot~~lthree~~ltimes~~ltlarr~~ltquest~~ltrPar~~ltri~~ltrie~~ltrif~~lurdshar~~luruhar~~lvertneqq~~lvnE~~mDDot~~male~~malt~~maltese~~map~~mapsto~~mapstodown~~mapstoleft~~mapstoup~~marker~~mcomma~~mcy~~measuredangle~~mfr~~mho~~mid~~midast~*~midcir~~minusb~~minusd~~minusdu~~mlcp~~mldr~~mnplus~~models~~mopf~~mp~~mscr~~mstpos~~multimap~~mumap~~nGg~~nGt~~nGtv~~nLeftarrow~~nLeftrightarrow~~nLl~~nLt~~nLtv~~nRightarrow~~nVDash~~nVdash~~nacute~~nang~~nap~~napE~~napid~~napos~~napprox~~natur~~natural~~naturals~~nbump~~nbumpe~~ncap~~ncaron~~ncedil~~ncong~~ncongdot~~ncup~~ncy~~neArr~~nearhk~~nearr~~nearrow~~nedot~~nequiv~~nesear~~nesim~~nexist~~nexists~~nfr~~ngE~~nge~~ngeq~~ngeqq~~ngeqslant~~nges~~ngsim~~ngt~~ngtr~~nhArr~~nharr~~nhpar~~nis~~nisd~~niv~~njcy~~nlArr~~nlE~~nlarr~~nldr~~nle~~nleftarrow~~nleftrightarrow~~nleq~~nleqq~~nleqslant~~nles~~nless~~nlsim~~nlt~~nltri~~nltrie~~nmid~~nopf~~notinE~~notindot~~notinva~~notinvb~~notinvc~~notni~~notniva~~notnivb~~notnivc~~npar~~nparallel~~nparsl~~npart~~npolint~~npr~~nprcue~~npre~~nprec~~npreceq~~nrArr~~nrarr~~nrarrc~~nrarrw~~nrightarrow~~nrtri~~nrtrie~~nsc~~nsccue~~nsce~~nscr~~nshortmid~~nshortparallel~~nsim~~nsime~~nsimeq~~nsmid~~nspar~~nsqsube~~nsqsupe~~nsubE~~nsube~~nsubset~~nsubseteq~~nsubseteqq~~nsucc~~nsucceq~~nsup~~nsupE~~nsupe~~nsupset~~nsupseteq~~nsupseteqq~~ntgl~~ntlg~~ntriangleleft~~ntrianglelefteq~~ntriangleright~~ntrianglerighteq~~num~#~numero~~numsp~~nvDash~~nvHarr~~nvap~~nvdash~~nvge~~nvgt~>~nvinfin~~nvlArr~~nvle~~nvlt~<~nvltrie~~nvrArr~~nvrtrie~~nvsim~~nwArr~~nwarhk~~nwarr~~nwarrow~~nwnear~~oS~~oast~~ocir~~ocy~~odash~~odblac~~odiv~~odot~~odsold~~ofcir~~ofr~~ogon~~ogt~~ohbar~~ohm~~oint~~olarr~~olcir~~olcross~~olt~~omacr~~omid~~ominus~~oopf~~opar~~operp~~orarr~~ord~~order~~orderof~~origof~~oror~~orslope~~orv~~oscr~~osol~~otimesas~~ovbar~~par~~parallel~~parsim~~parsl~~pcy~~percnt~%~period~.~pertenk~~pfr~~phiv~~phmmat~~phone~~pitchfork~~planck~~planckh~~plankv~~plus~+~plusacir~~plusb~~pluscir~~plusdo~~plusdu~~pluse~~plussim~~plustwo~~pm~~pointint~~popf~~pr~~prE~~prap~~prcue~~pre~~prec~~precapprox~~preccurlyeq~~preceq~~precnapprox~~precneqq~~precnsim~~precsim~~primes~~prnE~~prnap~~prnsim~~profalar~~profline~~profsurf~~propto~~prsim~~prurel~~pscr~~puncsp~~qfr~~qint~~qopf~~qprime~~qscr~~quaternions~~quatint~~quest~?~questeq~~rAarr~~rAtail~~rBarr~~rHar~~race~~racute~~raemptyv~~rangd~~range~~rangle~~rarrap~~rarrb~~rarrbfs~~rarrc~~rarrfs~~rarrhk~~rarrlp~~rarrpl~~rarrsim~~rarrtl~~rarrw~~ratail~~ratio~~rationals~~rbarr~~rbbrk~~rbrace~}~rbrack~]~rbrke~~rbrksld~~rbrkslu~~rcaron~~rcedil~~rcub~}~rcy~~rdca~~rdldhar~~rdquor~~rdsh~~realine~~realpart~~reals~~rect~~rfisht~~rfr~~rhard~~rharu~~rharul~~rhov~~rightarrow~~rightarrowtail~~rightharpoondown~~rightharpoonup~~rightleftarrows~~rightleftharpoons~~rightrightarrows~~rightsquigarrow~~rightthreetimes~~ring~~risingdotseq~~rlarr~~rlhar~~rmoust~~rmoustache~~rnmid~~roang~~roarr~~robrk~~ropar~~ropf~~roplus~~rotimes~~rpar~)~rpargt~~rppolint~~rrarr~~rscr~~rsh~~rsqb~]~rsquor~~rthree~~rtimes~~rtri~~rtrie~~rtrif~~rtriltri~~ruluhar~~rx~~sacute~~sc~~scE~~scap~~sccue~~sce~~scedil~~scirc~~scnE~~scnap~~scnsim~~scpolint~~scsim~~scy~~sdotb~~sdote~~seArr~~searhk~~searr~~searrow~~semi~;~seswar~~setminus~~setmn~~sext~~sfr~~sfrown~~sharp~~shchcy~~shcy~~shortmid~~shortparallel~~sigmav~~simdot~~sime~~simeq~~simg~~simgE~~siml~~simlE~~simne~~simplus~~simrarr~~slarr~~smallsetminus~~smashp~~smeparsl~~smid~~smile~~smt~~smte~~smtes~~softcy~~sol~/~solb~~solbar~~sopf~~spadesuit~~spar~~sqcap~~sqcaps~~sqcup~~sqcups~~sqsub~~sqsube~~sqsubset~~sqsubseteq~~sqsup~~sqsupe~~sqsupset~~sqsupseteq~~squ~~square~~squarf~~squf~~srarr~~sscr~~ssetmn~~ssmile~~sstarf~~star~~starf~~straightepsilon~~straightphi~~strns~~subE~~subdot~~subedot~~submult~~subnE~~subne~~subplus~~subrarr~~subset~~subseteq~~subseteqq~~subsetneq~~subsetneqq~~subsim~~subsub~~subsup~~succ~~succapprox~~succcurlyeq~~succeq~~succnapprox~~succneqq~~succnsim~~succsim~~sung~~supE~~supdot~~supdsub~~supedot~~suphsol~~suphsub~~suplarr~~supmult~~supnE~~supne~~supplus~~supset~~supseteq~~supseteqq~~supsetneq~~supsetneqq~~supsim~~supsub~~supsup~~swArr~~swarhk~~swarr~~swarrow~~swnwar~~target~~tbrk~~tcaron~~tcedil~~tcy~~tdot~~telrec~~tfr~~therefore~~thetav~~thickapprox~~thicksim~~thkap~~thksim~~timesb~~timesbar~~timesd~~tint~~toea~~top~~topbot~~topcir~~topf~~topfork~~tosa~~tprime~~triangle~~triangledown~~triangleleft~~trianglelefteq~~triangleq~~triangleright~~trianglerighteq~~tridot~~trie~~triminus~~triplus~~trisb~~tritime~~trpezium~~tscr~~tscy~~tshcy~~tstrok~~twixt~~twoheadleftarrow~~twoheadrightarrow~~uHar~~ubrcy~~ubreve~~ucy~~udarr~~udblac~~udhar~~ufisht~~ufr~~uharl~~uharr~~uhblk~~ulcorn~~ulcorner~~ulcrop~~ultri~~umacr~~uogon~~uopf~~uparrow~~updownarrow~~upharpoonleft~~upharpoonright~~uplus~~upsi~~upuparrows~~urcorn~~urcorner~~urcrop~~uring~~urtri~~uscr~~utdot~~utilde~~utri~~utrif~~uuarr~~uwangle~~vArr~~vBar~~vBarv~~vDash~~vangrt~~varepsilon~~varkappa~~varnothing~~varphi~~varpi~~varpropto~~varr~~varrho~~varsigma~~varsubsetneq~~varsubsetneqq~~varsupsetneq~~varsupsetneqq~~vartheta~~vartriangleleft~~vartriangleright~~vcy~~vdash~~vee~~veebar~~veeeq~~vellip~~verbar~|~vert~|~vfr~~vltri~~vnsub~~vnsup~~vopf~~vprop~~vrtri~~vscr~~vsubnE~~vsubne~~vsupnE~~vsupne~~vzigzag~~wcirc~~wedbar~~wedge~~wedgeq~~wfr~~wopf~~wp~~wr~~wreath~~wscr~~xcap~~xcirc~~xcup~~xdtri~~xfr~~xhArr~~xharr~~xlArr~~xlarr~~xmap~~xnis~~xodot~~xopf~~xoplus~~xotime~~xrArr~~xrarr~~xscr~~xsqcup~~xuplus~~xutri~~xvee~~xwedge~~yacy~~ycirc~~ycy~~yfr~~yicy~~yopf~~yscr~~yucy~~zacute~~zcaron~~zcy~~zdot~~zeetrf~~zfr~~zhcy~~zigrarr~~zopf~~zscr~~~AMP~&~COPY~~GT~>~LT~<~QUOT~"~REG~',e.namedReferences.html4)})(namedReferences)),namedReferences}var numericUnicodeMap={},hasRequiredNumericUnicodeMap;function requireNumericUnicodeMap(){return hasRequiredNumericUnicodeMap||(hasRequiredNumericUnicodeMap=1,Object.defineProperty(numericUnicodeMap,"__esModule",{value:!0}),numericUnicodeMap.numericUnicodeMap=void 0,numericUnicodeMap.numericUnicodeMap={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}),numericUnicodeMap}var surrogatePairs={},hasRequiredSurrogatePairs;function requireSurrogatePairs(){return hasRequiredSurrogatePairs||(hasRequiredSurrogatePairs=1,Object.defineProperty(surrogatePairs,"__esModule",{value:!0}),surrogatePairs.highSurrogateTo=surrogatePairs.highSurrogateFrom=surrogatePairs.getCodePoint=surrogatePairs.fromCodePoint=void 0,surrogatePairs.fromCodePoint=String.fromCodePoint||function(e){return String.fromCharCode(Math.floor((e-65536)/1024)+55296,(e-65536)%1024+56320)},surrogatePairs.getCodePoint=String.prototype.codePointAt?function(e,t){return e.codePointAt(t)}:function(e,t){return(e.charCodeAt(t)-55296)*1024+e.charCodeAt(t+1)-56320+65536},surrogatePairs.highSurrogateFrom=55296,surrogatePairs.highSurrogateTo=56319),surrogatePairs}var hasRequiredCommonjs;function requireCommonjs(){if(hasRequiredCommonjs)return commonjs;hasRequiredCommonjs=1;var e=commonjs&&commonjs.__assign||function(){return e=Object.assign||function(C){for(var x,j=1,D=arguments.length;j<D;j++){x=arguments[j];for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(C[k]=x[k])}return C},e.apply(this,arguments)};Object.defineProperty(commonjs,"__esModule",{value:!0}),commonjs.encode=l,commonjs.decodeEntity=O,commonjs.decode=E;var t=requireNamedReferences(),s=requireNumericUnicodeMap(),p=requireSurrogatePairs(),g=e(e({},t.namedReferences),{all:t.namedReferences.html5}),m={specialChars:/[<>'"&]/g,nonAscii:/[<>'"&\u0080-\uD7FF\uE000-\uFFFF\uDC00-\uDFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,nonAsciiPrintable:/[<>'"&\x01-\x08\x11-\x15\x17-\x1F\x7f-\uD7FF\uE000-\uFFFF\uDC00-\uDFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,nonAsciiPrintableOnly:/[\x01-\x08\x11-\x15\x17-\x1F\x7f-\uD7FF\uE000-\uFFFF\uDC00-\uDFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,extensive:/[\x01-\x0c\x0e-\x1f\x21-\x2c\x2e-\x2f\x3a-\x40\x5b-\x60\x7b-\x7d\x7f-\uD7FF\uE000-\uFFFF\uDC00-\uDFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g},d={mode:"specialChars",level:"all",numeric:"decimal"};function l(C,x){var j=x===void 0?d:x,D=j.mode,k=D===void 0?"specialChars":D,q=j.numeric,G=q===void 0?"decimal":q,$=j.level,W=$===void 0?"all":$;if(!C)return"";var K=m[k],z=g[W].characters,Q=G==="hexadecimal";return String.prototype.replace.call(C,K,function(Y){var te=z[Y];if(!te){var ae=Y.length>1?(0,p.getCodePoint)(Y,0):Y.charCodeAt(0);te=(Q?"&#x"+ae.toString(16):"&#"+ae)+";"}return te})}var a={scope:"body",level:"all"},o=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);/g,h=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+)[;=]?/g,v={xml:{strict:o,attribute:h,body:t.bodyRegExps.xml},html4:{strict:o,attribute:h,body:t.bodyRegExps.html4},html5:{strict:o,attribute:h,body:t.bodyRegExps.html5}},_=e(e({},v),{all:v.html5}),y=String.fromCharCode,w=y(65533),T={level:"all"};function I(C,x,j,D){var k=C,q=C[C.length-1];if(j&&q==="=")k=C;else if(D&&q!==";")k=C;else{var G=x[C];if(G)k=G;else if(C[0]==="&"&&C[1]==="#"){var $=C[2],W=$=="x"||$=="X"?parseInt(C.substr(3),16):parseInt(C.substr(2));k=W>=1114111?w:W>65535?(0,p.fromCodePoint)(W):y(s.numericUnicodeMap[W]||W)}}return k}function O(C,x){var j=x===void 0?T:x,D=j.level,k=D===void 0?"all":D;return C?I(C,g[k].entities,!1,!1):""}function E(C,x){var j=x===void 0?a:x,D=j.level,k=D===void 0?"all":D,q=j.scope,G=q===void 0?k==="xml"?"strict":"body":q;if(!C)return"";var $=_[k][G],W=g[k].entities,K=G==="attribute",z=G==="strict";return C.replace($,function(Q){return I(Q,W,K,z)})}return commonjs}var retryRequest={exports:{}},hasRequiredRetryRequest;function requireRetryRequest(){if(hasRequiredRetryRequest)return retryRequest.exports;hasRequiredRetryRequest=1;var e={},t={};const{PassThrough:s}=require$$1$3,p=requireExtend();let g=()=>{};typeof e<"u"&&"env"in e&&typeof t=="object"&&t.DEBUG==="retry-request"&&(g=a=>{console.log("retry-request:",a)});const m={objectMode:!1,retries:2,maxRetryDelay:64,retryDelayMultiplier:2,totalTimeout:600,noResponseRetries:2,currentRetryAttempt:0,shouldRetryFn:function(a){const o=[[100,199],[429,429],[500,599]],h=a.statusCode;g(`Response status: ${h}`);let v;for(;v=o.shift();)if(h>=v[0]&&h<=v[1])return!0}};function d(a,o,h){typeof a=="string"&&(a={url:a});const v=typeof arguments[arguments.length-1]!="function";typeof o=="function"&&(h=o);const _=o&&typeof o.currentRetryAttempt=="number";if(o=p({},m,o),typeof o.request>"u")throw new Error("A request library must be provided to retry-request.");let y=o.currentRetryAttempt,w=0,T=!1,I,O,E,C;const x={abort:function(){C&&C.abort&&C.abort()}};v&&(I=new s({objectMode:o.objectMode}),I.abort=D);const j=Date.now();if(y>0?q(y):k(),v)return I;return x;function D(){E=null,O&&(O.abort&&O.abort(),O.cancel&&O.cancel(),O.destroy?O.destroy():O.end&&O.end())}function k(){let $=!1;y++,g(`Current retry attempt: ${y}`);function W(K=[]){$||($=!0,I.emit("complete",...K))}v?(T=!1,E=new s({objectMode:o.objectMode}),O=o.request(a),setImmediate(()=>{I.emit("request")}),O.on("error",K=>{T||(T=!0,G(K))}).on("response",(K,z)=>{T||(T=!0,G(null,K,z))}).on("complete",(...K)=>W(K)).on("finish",(...K)=>W(K)),O.pipe(E)):C=o.request(a,G)}function q($){v&&D();const W=l({maxRetryDelay:o.maxRetryDelay,retryDelayMultiplier:o.retryDelayMultiplier,retryNumber:$,timeOfFirstRequest:j,totalTimeout:o.totalTimeout});if(g(`Next retry delay: ${W}`),W<=0){w=o.noResponseRetries+1;return}setTimeout(k,W)}function G($,W,K){if($){w++,w<=o.noResponseRetries?q(w):v?(I.emit("error",$),I.end()):h($,W,K);return}if((_?y:y-1)<o.retries&&o.shouldRetryFn(W)){q(y);return}v?(I.emit("response",W),E.pipe(I),O.on("error",Q=>{I.destroy(Q)})):h($,W,K)}}retryRequest.exports=d;function l(a){const{maxRetryDelay:o,retryDelayMultiplier:h,retryNumber:v,timeOfFirstRequest:_,totalTimeout:y}=a,w=o*1e3,T=y*1e3,I=Math.floor(Math.random()*1e3),O=Math.pow(h,v)*1e3+I,E=T-(Date.now()-_);return Math.min(O,E,w)}return retryRequest.exports.defaults=m,retryRequest.exports.getNextRetryDelay=l,retryRequest.exports}var src$7={},commonjsBrowser$1={},v1$2={},rng$1={},hasRequiredRng$1;function requireRng$1(){if(hasRequiredRng$1)return rng$1;hasRequiredRng$1=1,Object.defineProperty(rng$1,"__esModule",{value:!0}),rng$1.default=s;let e;const t=new Uint8Array(16);function s(){if(!e&&(e=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)}return rng$1}var stringify$1={},validate$2={},regex$1={},hasRequiredRegex$1;function requireRegex$1(){if(hasRequiredRegex$1)return regex$1;hasRequiredRegex$1=1,Object.defineProperty(regex$1,"__esModule",{value:!0}),regex$1.default=void 0;var e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return regex$1.default=e,regex$1}var hasRequiredValidate$2;function requireValidate$2(){if(hasRequiredValidate$2)return validate$2;hasRequiredValidate$2=1,Object.defineProperty(validate$2,"__esModule",{value:!0}),validate$2.default=void 0;var e=t(requireRegex$1());function t(g){return g&&g.__esModule?g:{default:g}}function s(g){return typeof g=="string"&&e.default.test(g)}var p=s;return validate$2.default=p,validate$2}var hasRequiredStringify$1;function requireStringify$1(){if(hasRequiredStringify$1)return stringify$1;hasRequiredStringify$1=1,Object.defineProperty(stringify$1,"__esModule",{value:!0}),stringify$1.default=void 0,stringify$1.unsafeStringify=p;var e=t(requireValidate$2());function t(d){return d&&d.__esModule?d:{default:d}}const s=[];for(let d=0;d<256;++d)s.push((d+256).toString(16).slice(1));function p(d,l=0){return s[d[l+0]]+s[d[l+1]]+s[d[l+2]]+s[d[l+3]]+"-"+s[d[l+4]]+s[d[l+5]]+"-"+s[d[l+6]]+s[d[l+7]]+"-"+s[d[l+8]]+s[d[l+9]]+"-"+s[d[l+10]]+s[d[l+11]]+s[d[l+12]]+s[d[l+13]]+s[d[l+14]]+s[d[l+15]]}function g(d,l=0){const a=p(d,l);if(!(0,e.default)(a))throw TypeError("Stringified UUID is invalid");return a}var m=g;return stringify$1.default=m,stringify$1}var hasRequiredV1$2;function requireV1$2(){if(hasRequiredV1$2)return v1$2;hasRequiredV1$2=1,Object.defineProperty(v1$2,"__esModule",{value:!0}),v1$2.default=void 0;var e=s(requireRng$1()),t=requireStringify$1();function s(o){return o&&o.__esModule?o:{default:o}}let p,g,m=0,d=0;function l(o,h,v){let _=h&&v||0;const y=h||new Array(16);o=o||{};let w=o.node||p,T=o.clockseq!==void 0?o.clockseq:g;if(w==null||T==null){const j=o.random||(o.rng||e.default)();w==null&&(w=p=[j[0]|1,j[1],j[2],j[3],j[4],j[5]]),T==null&&(T=g=(j[6]<<8|j[7])&16383)}let I=o.msecs!==void 0?o.msecs:Date.now(),O=o.nsecs!==void 0?o.nsecs:d+1;const E=I-m+(O-d)/1e4;if(E<0&&o.clockseq===void 0&&(T=T+1&16383),(E<0||I>m)&&o.nsecs===void 0&&(O=0),O>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");m=I,d=O,g=T,I+=122192928e5;const C=((I&268435455)*1e4+O)%4294967296;y[_++]=C>>>24&255,y[_++]=C>>>16&255,y[_++]=C>>>8&255,y[_++]=C&255;const x=I/4294967296*1e4&268435455;y[_++]=x>>>8&255,y[_++]=x&255,y[_++]=x>>>24&15|16,y[_++]=x>>>16&255,y[_++]=T>>>8|128,y[_++]=T&255;for(let j=0;j<6;++j)y[_+j]=w[j];return h||(0,t.unsafeStringify)(y)}var a=l;return v1$2.default=a,v1$2}var v3$1={},v35$1={},parse$1={},hasRequiredParse$2;function requireParse$2(){if(hasRequiredParse$2)return parse$1;hasRequiredParse$2=1,Object.defineProperty(parse$1,"__esModule",{value:!0}),parse$1.default=void 0;var e=t(requireValidate$2());function t(g){return g&&g.__esModule?g:{default:g}}function s(g){if(!(0,e.default)(g))throw TypeError("Invalid UUID");let m;const d=new Uint8Array(16);return d[0]=(m=parseInt(g.slice(0,8),16))>>>24,d[1]=m>>>16&255,d[2]=m>>>8&255,d[3]=m&255,d[4]=(m=parseInt(g.slice(9,13),16))>>>8,d[5]=m&255,d[6]=(m=parseInt(g.slice(14,18),16))>>>8,d[7]=m&255,d[8]=(m=parseInt(g.slice(19,23),16))>>>8,d[9]=m&255,d[10]=(m=parseInt(g.slice(24,36),16))/1099511627776&255,d[11]=m/4294967296&255,d[12]=m>>>24&255,d[13]=m>>>16&255,d[14]=m>>>8&255,d[15]=m&255,d}var p=s;return parse$1.default=p,parse$1}var hasRequiredV35$1;function requireV35$1(){if(hasRequiredV35$1)return v35$1;hasRequiredV35$1=1,Object.defineProperty(v35$1,"__esModule",{value:!0}),v35$1.URL=v35$1.DNS=void 0,v35$1.default=d;var e=requireStringify$1(),t=s(requireParse$2());function s(l){return l&&l.__esModule?l:{default:l}}function p(l){l=unescape(encodeURIComponent(l));const a=[];for(let o=0;o<l.length;++o)a.push(l.charCodeAt(o));return a}const g="6ba7b810-9dad-11d1-80b4-00c04fd430c8";v35$1.DNS=g;const m="6ba7b811-9dad-11d1-80b4-00c04fd430c8";v35$1.URL=m;function d(l,a,o){function h(v,_,y,w){var T;if(typeof v=="string"&&(v=p(v)),typeof _=="string"&&(_=(0,t.default)(_)),((T=_)===null||T===void 0?void 0:T.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let I=new Uint8Array(16+v.length);if(I.set(_),I.set(v,_.length),I=o(I),I[6]=I[6]&15|a,I[8]=I[8]&63|128,y){w=w||0;for(let O=0;O<16;++O)y[w+O]=I[O];return y}return(0,e.unsafeStringify)(I)}try{h.name=l}catch{}return h.DNS=g,h.URL=m,h}return v35$1}var md5$1={},hasRequiredMd5$1;function requireMd5$1(){if(hasRequiredMd5$1)return md5$1;hasRequiredMd5$1=1,Object.defineProperty(md5$1,"__esModule",{value:!0}),md5$1.default=void 0;function e(y){if(typeof y=="string"){const w=unescape(encodeURIComponent(y));y=new Uint8Array(w.length);for(let T=0;T<w.length;++T)y[T]=w.charCodeAt(T)}return t(p(g(y),y.length*8))}function t(y){const w=[],T=y.length*32,I="0123456789abcdef";for(let O=0;O<T;O+=8){const E=y[O>>5]>>>O%32&255,C=parseInt(I.charAt(E>>>4&15)+I.charAt(E&15),16);w.push(C)}return w}function s(y){return(y+64>>>9<<4)+14+1}function p(y,w){y[w>>5]|=128<<w%32,y[s(w)-1]=w;let T=1732584193,I=-271733879,O=-1732584194,E=271733878;for(let C=0;C<y.length;C+=16){const x=T,j=I,D=O,k=E;T=a(T,I,O,E,y[C],7,-680876936),E=a(E,T,I,O,y[C+1],12,-389564586),O=a(O,E,T,I,y[C+2],17,606105819),I=a(I,O,E,T,y[C+3],22,-1044525330),T=a(T,I,O,E,y[C+4],7,-176418897),E=a(E,T,I,O,y[C+5],12,1200080426),O=a(O,E,T,I,y[C+6],17,-1473231341),I=a(I,O,E,T,y[C+7],22,-45705983),T=a(T,I,O,E,y[C+8],7,1770035416),E=a(E,T,I,O,y[C+9],12,-1958414417),O=a(O,E,T,I,y[C+10],17,-42063),I=a(I,O,E,T,y[C+11],22,-1990404162),T=a(T,I,O,E,y[C+12],7,1804603682),E=a(E,T,I,O,y[C+13],12,-40341101),O=a(O,E,T,I,y[C+14],17,-1502002290),I=a(I,O,E,T,y[C+15],22,1236535329),T=o(T,I,O,E,y[C+1],5,-165796510),E=o(E,T,I,O,y[C+6],9,-1069501632),O=o(O,E,T,I,y[C+11],14,643717713),I=o(I,O,E,T,y[C],20,-373897302),T=o(T,I,O,E,y[C+5],5,-701558691),E=o(E,T,I,O,y[C+10],9,38016083),O=o(O,E,T,I,y[C+15],14,-660478335),I=o(I,O,E,T,y[C+4],20,-405537848),T=o(T,I,O,E,y[C+9],5,568446438),E=o(E,T,I,O,y[C+14],9,-1019803690),O=o(O,E,T,I,y[C+3],14,-187363961),I=o(I,O,E,T,y[C+8],20,1163531501),T=o(T,I,O,E,y[C+13],5,-1444681467),E=o(E,T,I,O,y[C+2],9,-51403784),O=o(O,E,T,I,y[C+7],14,1735328473),I=o(I,O,E,T,y[C+12],20,-1926607734),T=h(T,I,O,E,y[C+5],4,-378558),E=h(E,T,I,O,y[C+8],11,-2022574463),O=h(O,E,T,I,y[C+11],16,1839030562),I=h(I,O,E,T,y[C+14],23,-35309556),T=h(T,I,O,E,y[C+1],4,-1530992060),E=h(E,T,I,O,y[C+4],11,1272893353),O=h(O,E,T,I,y[C+7],16,-155497632),I=h(I,O,E,T,y[C+10],23,-1094730640),T=h(T,I,O,E,y[C+13],4,681279174),E=h(E,T,I,O,y[C],11,-358537222),O=h(O,E,T,I,y[C+3],16,-722521979),I=h(I,O,E,T,y[C+6],23,76029189),T=h(T,I,O,E,y[C+9],4,-640364487),E=h(E,T,I,O,y[C+12],11,-421815835),O=h(O,E,T,I,y[C+15],16,530742520),I=h(I,O,E,T,y[C+2],23,-995338651),T=v(T,I,O,E,y[C],6,-198630844),E=v(E,T,I,O,y[C+7],10,1126891415),O=v(O,E,T,I,y[C+14],15,-1416354905),I=v(I,O,E,T,y[C+5],21,-57434055),T=v(T,I,O,E,y[C+12],6,1700485571),E=v(E,T,I,O,y[C+3],10,-1894986606),O=v(O,E,T,I,y[C+10],15,-1051523),I=v(I,O,E,T,y[C+1],21,-2054922799),T=v(T,I,O,E,y[C+8],6,1873313359),E=v(E,T,I,O,y[C+15],10,-30611744),O=v(O,E,T,I,y[C+6],15,-1560198380),I=v(I,O,E,T,y[C+13],21,1309151649),T=v(T,I,O,E,y[C+4],6,-145523070),E=v(E,T,I,O,y[C+11],10,-1120210379),O=v(O,E,T,I,y[C+2],15,718787259),I=v(I,O,E,T,y[C+9],21,-343485551),T=m(T,x),I=m(I,j),O=m(O,D),E=m(E,k)}return[T,I,O,E]}function g(y){if(y.length===0)return[];const w=y.length*8,T=new Uint32Array(s(w));for(let I=0;I<w;I+=8)T[I>>5]|=(y[I/8]&255)<<I%32;return T}function m(y,w){const T=(y&65535)+(w&65535);return(y>>16)+(w>>16)+(T>>16)<<16|T&65535}function d(y,w){return y<<w|y>>>32-w}function l(y,w,T,I,O,E){return m(d(m(m(w,y),m(I,E)),O),T)}function a(y,w,T,I,O,E,C){return l(w&T|~w&I,y,w,O,E,C)}function o(y,w,T,I,O,E,C){return l(w&I|T&~I,y,w,O,E,C)}function h(y,w,T,I,O,E,C){return l(w^T^I,y,w,O,E,C)}function v(y,w,T,I,O,E,C){return l(T^(w|~I),y,w,O,E,C)}var _=e;return md5$1.default=_,md5$1}var hasRequiredV3$1;function requireV3$1(){if(hasRequiredV3$1)return v3$1;hasRequiredV3$1=1,Object.defineProperty(v3$1,"__esModule",{value:!0}),v3$1.default=void 0;var e=s(requireV35$1()),t=s(requireMd5$1());function s(m){return m&&m.__esModule?m:{default:m}}var g=(0,e.default)("v3",48,t.default);return v3$1.default=g,v3$1}var v4$1={},native$1={},hasRequiredNative$1;function requireNative$1(){if(hasRequiredNative$1)return native$1;hasRequiredNative$1=1,Object.defineProperty(native$1,"__esModule",{value:!0}),native$1.default=void 0;var t={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return native$1.default=t,native$1}var hasRequiredV4$1;function requireV4$1(){if(hasRequiredV4$1)return v4$1;hasRequiredV4$1=1,Object.defineProperty(v4$1,"__esModule",{value:!0}),v4$1.default=void 0;var e=p(requireNative$1()),t=p(requireRng$1()),s=requireStringify$1();function p(d){return d&&d.__esModule?d:{default:d}}function g(d,l,a){if(e.default.randomUUID&&!l&&!d)return e.default.randomUUID();d=d||{};const o=d.random||(d.rng||t.default)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,l){a=a||0;for(let h=0;h<16;++h)l[a+h]=o[h];return l}return(0,s.unsafeStringify)(o)}var m=g;return v4$1.default=m,v4$1}var v5$1={},sha1$1={},hasRequiredSha1$1;function requireSha1$1(){if(hasRequiredSha1$1)return sha1$1;hasRequiredSha1$1=1,Object.defineProperty(sha1$1,"__esModule",{value:!0}),sha1$1.default=void 0;function e(g,m,d,l){switch(g){case 0:return m&d^~m&l;case 1:return m^d^l;case 2:return m&d^m&l^d&l;case 3:return m^d^l}}function t(g,m){return g<<m|g>>>32-m}function s(g){const m=[1518500249,1859775393,2400959708,3395469782],d=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof g=="string"){const h=unescape(encodeURIComponent(g));g=[];for(let v=0;v<h.length;++v)g.push(h.charCodeAt(v))}else Array.isArray(g)||(g=Array.prototype.slice.call(g));g.push(128);const l=g.length/4+2,a=Math.ceil(l/16),o=new Array(a);for(let h=0;h<a;++h){const v=new Uint32Array(16);for(let _=0;_<16;++_)v[_]=g[h*64+_*4]<<24|g[h*64+_*4+1]<<16|g[h*64+_*4+2]<<8|g[h*64+_*4+3];o[h]=v}o[a-1][14]=(g.length-1)*8/Math.pow(2,32),o[a-1][14]=Math.floor(o[a-1][14]),o[a-1][15]=(g.length-1)*8&4294967295;for(let h=0;h<a;++h){const v=new Uint32Array(80);for(let O=0;O<16;++O)v[O]=o[h][O];for(let O=16;O<80;++O)v[O]=t(v[O-3]^v[O-8]^v[O-14]^v[O-16],1);let _=d[0],y=d[1],w=d[2],T=d[3],I=d[4];for(let O=0;O<80;++O){const E=Math.floor(O/20),C=t(_,5)+e(E,y,w,T)+I+m[E]+v[O]>>>0;I=T,T=w,w=t(y,30)>>>0,y=_,_=C}d[0]=d[0]+_>>>0,d[1]=d[1]+y>>>0,d[2]=d[2]+w>>>0,d[3]=d[3]+T>>>0,d[4]=d[4]+I>>>0}return[d[0]>>24&255,d[0]>>16&255,d[0]>>8&255,d[0]&255,d[1]>>24&255,d[1]>>16&255,d[1]>>8&255,d[1]&255,d[2]>>24&255,d[2]>>16&255,d[2]>>8&255,d[2]&255,d[3]>>24&255,d[3]>>16&255,d[3]>>8&255,d[3]&255,d[4]>>24&255,d[4]>>16&255,d[4]>>8&255,d[4]&255]}var p=s;return sha1$1.default=p,sha1$1}var hasRequiredV5$1;function requireV5$1(){if(hasRequiredV5$1)return v5$1;hasRequiredV5$1=1,Object.defineProperty(v5$1,"__esModule",{value:!0}),v5$1.default=void 0;var e=s(requireV35$1()),t=s(requireSha1$1());function s(m){return m&&m.__esModule?m:{default:m}}var g=(0,e.default)("v5",80,t.default);return v5$1.default=g,v5$1}var nil$1={},hasRequiredNil$1;function requireNil$1(){if(hasRequiredNil$1)return nil$1;hasRequiredNil$1=1,Object.defineProperty(nil$1,"__esModule",{value:!0}),nil$1.default=void 0;var e="00000000-0000-0000-0000-000000000000";return nil$1.default=e,nil$1}var version$4={},hasRequiredVersion$1;function requireVersion$1(){if(hasRequiredVersion$1)return version$4;hasRequiredVersion$1=1,Object.defineProperty(version$4,"__esModule",{value:!0}),version$4.default=void 0;var e=t(requireValidate$2());function t(g){return g&&g.__esModule?g:{default:g}}function s(g){if(!(0,e.default)(g))throw TypeError("Invalid UUID");return parseInt(g.slice(14,15),16)}var p=s;return version$4.default=p,version$4}var hasRequiredCommonjsBrowser$1;function requireCommonjsBrowser$1(){return hasRequiredCommonjsBrowser$1||(hasRequiredCommonjsBrowser$1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return d.default}});var t=h(requireV1$2()),s=h(requireV3$1()),p=h(requireV4$1()),g=h(requireV5$1()),m=h(requireNil$1()),d=h(requireVersion$1()),l=h(requireValidate$2()),a=h(requireStringify$1()),o=h(requireParse$2());function h(v){return v&&v.__esModule?v:{default:v}}})(commonjsBrowser$1)),commonjsBrowser$1}var agents={},agent$1={},dist$2={},hasRequiredDist$2;function requireDist$2(){if(hasRequiredDist$2)return dist$2;hasRequiredDist$2=1,Object.defineProperty(dist$2,"__esModule",{value:!0});function e(t,s,{signal:p}={}){return new Promise((g,m)=>{function d(){p?.removeEventListener("abort",d),t.removeListener(s,l),t.removeListener("error",a)}function l(...o){d(),g(o)}function a(o){d(),m(o)}p?.addEventListener("abort",d),t.on(s,l),t.on("error",a)})}return dist$2.default=e,dist$2}var promisify$1={},hasRequiredPromisify$1;function requirePromisify$1(){if(hasRequiredPromisify$1)return promisify$1;hasRequiredPromisify$1=1,Object.defineProperty(promisify$1,"__esModule",{value:!0});function e(t){return function(s,p){return new Promise((g,m)=>{t.call(this,s,p,(d,l)=>{d?m(d):g(l)})})}}return promisify$1.default=e,promisify$1}var src$6,hasRequiredSrc$8;function requireSrc$8(){if(hasRequiredSrc$8)return src$6;hasRequiredSrc$8=1;var e=src$6&&src$6.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};const t=require$$1$3,s=e(requireBrowser$2()),p=e(requirePromisify$1()),g=s.default("agent-base");function m(a){return!!a&&typeof a.addRequest=="function"}function d(){const{stack:a}=new Error;return typeof a!="string"?!1:a.split(`
`).some(o=>o.indexOf("(https.js:")!==-1||o.indexOf("node:https:")!==-1)}function l(a,o){return new l.Agent(a,o)}return(function(a){class o extends t.EventEmitter{constructor(v,_){super();let y=_;typeof v=="function"?this.callback=v:v&&(y=v),this.timeout=null,y&&typeof y.timeout=="number"&&(this.timeout=y.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:d()?443:80}set defaultPort(v){this.explicitDefaultPort=v}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:d()?"https:":"http:"}set protocol(v){this.explicitProtocol=v}callback(v,_,y){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(v,_){const y=Object.assign({},_);typeof y.secureEndpoint!="boolean"&&(y.secureEndpoint=d()),y.host==null&&(y.host="localhost"),y.port==null&&(y.port=y.secureEndpoint?443:80),y.protocol==null&&(y.protocol=y.secureEndpoint?"https:":"http:"),y.host&&y.path&&delete y.path,delete y.agent,delete y.hostname,delete y._defaultAgent,delete y.defaultPort,delete y.createConnection,v._last=!0,v.shouldKeepAlive=!1;let w=!1,T=null;const I=y.timeout||this.timeout,O=j=>{v._hadError||(v.emit("error",j),v._hadError=!0)},E=()=>{T=null,w=!0;const j=new Error(`A "socket" was not created for HTTP request before ${I}ms`);j.code="ETIMEOUT",O(j)},C=j=>{w||(T!==null&&(clearTimeout(T),T=null),O(j))},x=j=>{if(w)return;if(T!=null&&(clearTimeout(T),T=null),m(j)){g("Callback returned another Agent instance %o",j.constructor.name),j.addRequest(v,y);return}if(j){j.once("free",()=>{this.freeSocket(j,y)}),v.onSocket(j);return}const D=new Error(`no Duplex stream was returned to agent-base for \`${v.method} ${v.path}\``);O(D)};if(typeof this.callback!="function"){O(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(g("Converting legacy callback function to promise"),this.promisifiedCallback=p.default(this.callback)):this.promisifiedCallback=this.callback),typeof I=="number"&&I>0&&(T=setTimeout(E,I)),"port"in y&&typeof y.port!="number"&&(y.port=Number(y.port));try{g("Resolving socket for %o request: %o",y.protocol,`${v.method} ${v.path}`),Promise.resolve(this.promisifiedCallback(v,y)).then(x,C)}catch(j){Promise.reject(j).catch(C)}}freeSocket(v,_){g("Freeing socket %o %o",v.constructor.name,_),v.destroy()}destroy(){g("Destroying agent %o",this.constructor.name)}}a.Agent=o,a.prototype=a.Agent.prototype})(l||(l={})),src$6=l,src$6}var hasRequiredAgent$1;function requireAgent$1(){if(hasRequiredAgent$1)return agent$1;hasRequiredAgent$1=1;var e=agent$1&&agent$1.__awaiter||function(v,_,y,w){function T(I){return I instanceof y?I:new y(function(O){O(I)})}return new(y||(y=Promise))(function(I,O){function E(j){try{x(w.next(j))}catch(D){O(D)}}function C(j){try{x(w.throw(j))}catch(D){O(D)}}function x(j){j.done?I(j.value):T(j.value).then(E,C)}x((w=w.apply(v,_||[])).next())})},t=agent$1&&agent$1.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(agent$1,"__esModule",{value:!0});const s=t(require$$1$3),p=t(require$$1$3),g=t(require$$1$3),m=t(requireBrowser$2()),d=t(requireDist$2()),l=requireSrc$8(),a=(0,m.default)("http-proxy-agent");function o(v){return typeof v=="string"?/^https:?$/i.test(v):!1}class h extends l.Agent{constructor(_){let y;if(typeof _=="string"?y=g.default.parse(_):y=_,!y)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");a("Creating new HttpProxyAgent instance: %o",y),super(y);const w=Object.assign({},y);this.secureProxy=y.secureProxy||o(w.protocol),w.host=w.hostname||w.host,typeof w.port=="string"&&(w.port=parseInt(w.port,10)),!w.port&&w.host&&(w.port=this.secureProxy?443:80),w.host&&w.path&&(delete w.path,delete w.pathname),this.proxy=w}callback(_,y){return e(this,void 0,void 0,function*(){const{proxy:w,secureProxy:T}=this,I=g.default.parse(_.path);I.protocol||(I.protocol="http:"),I.hostname||(I.hostname=y.hostname||y.host||null),I.port==null&&typeof y.port&&(I.port=String(y.port)),I.port==="80"&&(I.port=""),_.path=g.default.format(I),w.auth&&_.setHeader("Proxy-Authorization",`Basic ${Buffer.from(w.auth).toString("base64")}`);let O;if(T?(a("Creating `tls.Socket`: %o",w),O=p.default.connect(w)):(a("Creating `net.Socket`: %o",w),O=s.default.connect(w)),_._header){let E,C;a("Regenerating stored HTTP header string for request"),_._header=null,_._implicitHeader(),_.output&&_.output.length>0?(a("Patching connection write() output buffer with updated header"),E=_.output[0],C=E.indexOf(`\r
\r
`)+4,_.output[0]=_._header+E.substring(C),a("Output buffer: %o",_.output)):_.outputData&&_.outputData.length>0&&(a("Patching connection write() output buffer with updated header"),E=_.outputData[0].data,C=E.indexOf(`\r
\r
`)+4,_.outputData[0].data=_._header+E.substring(C),a("Output buffer: %o",_.outputData[0].data))}return yield(0,d.default)(O,"connect"),O})}}return agent$1.default=h,agent$1}var dist$1,hasRequiredDist$1;function requireDist$1(){if(hasRequiredDist$1)return dist$1;hasRequiredDist$1=1;var e=dist$1&&dist$1.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};const t=e(requireAgent$1());function s(p){return new t.default(p)}return(function(p){p.HttpProxyAgent=t.default,p.prototype=t.default.prototype})(s||(s={})),dist$1=s,dist$1}var agent={},promisify={},hasRequiredPromisify;function requirePromisify(){if(hasRequiredPromisify)return promisify;hasRequiredPromisify=1,Object.defineProperty(promisify,"__esModule",{value:!0});function e(t){return function(s,p){return new Promise((g,m)=>{t.call(this,s,p,(d,l)=>{d?m(d):g(l)})})}}return promisify.default=e,promisify}var src$5,hasRequiredSrc$7;function requireSrc$7(){if(hasRequiredSrc$7)return src$5;hasRequiredSrc$7=1;var e=src$5&&src$5.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};const t=require$$1$3,s=e(requireBrowser$2()),p=e(requirePromisify()),g=s.default("agent-base");function m(a){return!!a&&typeof a.addRequest=="function"}function d(){const{stack:a}=new Error;return typeof a!="string"?!1:a.split(`
`).some(o=>o.indexOf("(https.js:")!==-1||o.indexOf("node:https:")!==-1)}function l(a,o){return new l.Agent(a,o)}return(function(a){class o extends t.EventEmitter{constructor(v,_){super();let y=_;typeof v=="function"?this.callback=v:v&&(y=v),this.timeout=null,y&&typeof y.timeout=="number"&&(this.timeout=y.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:d()?443:80}set defaultPort(v){this.explicitDefaultPort=v}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:d()?"https:":"http:"}set protocol(v){this.explicitProtocol=v}callback(v,_,y){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(v,_){const y=Object.assign({},_);typeof y.secureEndpoint!="boolean"&&(y.secureEndpoint=d()),y.host==null&&(y.host="localhost"),y.port==null&&(y.port=y.secureEndpoint?443:80),y.protocol==null&&(y.protocol=y.secureEndpoint?"https:":"http:"),y.host&&y.path&&delete y.path,delete y.agent,delete y.hostname,delete y._defaultAgent,delete y.defaultPort,delete y.createConnection,v._last=!0,v.shouldKeepAlive=!1;let w=!1,T=null;const I=y.timeout||this.timeout,O=j=>{v._hadError||(v.emit("error",j),v._hadError=!0)},E=()=>{T=null,w=!0;const j=new Error(`A "socket" was not created for HTTP request before ${I}ms`);j.code="ETIMEOUT",O(j)},C=j=>{w||(T!==null&&(clearTimeout(T),T=null),O(j))},x=j=>{if(w)return;if(T!=null&&(clearTimeout(T),T=null),m(j)){g("Callback returned another Agent instance %o",j.constructor.name),j.addRequest(v,y);return}if(j){j.once("free",()=>{this.freeSocket(j,y)}),v.onSocket(j);return}const D=new Error(`no Duplex stream was returned to agent-base for \`${v.method} ${v.path}\``);O(D)};if(typeof this.callback!="function"){O(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(g("Converting legacy callback function to promise"),this.promisifiedCallback=p.default(this.callback)):this.promisifiedCallback=this.callback),typeof I=="number"&&I>0&&(T=setTimeout(E,I)),"port"in y&&typeof y.port!="number"&&(y.port=Number(y.port));try{g("Resolving socket for %o request: %o",y.protocol,`${v.method} ${v.path}`),Promise.resolve(this.promisifiedCallback(v,y)).then(x,C)}catch(j){Promise.reject(j).catch(C)}}freeSocket(v,_){g("Freeing socket %o %o",v.constructor.name,_),v.destroy()}destroy(){g("Destroying agent %o",this.constructor.name)}}a.Agent=o,a.prototype=a.Agent.prototype})(l||(l={})),src$5=l,src$5}var parseProxyResponse={},hasRequiredParseProxyResponse;function requireParseProxyResponse(){if(hasRequiredParseProxyResponse)return parseProxyResponse;hasRequiredParseProxyResponse=1;var e=parseProxyResponse&&parseProxyResponse.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(parseProxyResponse,"__esModule",{value:!0});const s=e(requireBrowser$2()).default("https-proxy-agent:parse-proxy-response");function p(g){return new Promise((m,d)=>{let l=0;const a=[];function o(){const T=g.read();T?w(T):g.once("readable",o)}function h(){g.removeListener("end",_),g.removeListener("error",y),g.removeListener("close",v),g.removeListener("readable",o)}function v(T){s("onclose had error %o",T)}function _(){s("onend")}function y(T){h(),s("onerror %o",T),d(T)}function w(T){a.push(T),l+=T.length;const I=Buffer.concat(a,l);if(I.indexOf(`\r
\r
`)===-1){s("have not received end of HTTP headers yet..."),o();return}const E=I.toString("ascii",0,I.indexOf(`\r
`)),C=+E.split(" ")[1];s("got proxy server response: %o",E),m({statusCode:C,buffered:I})}g.on("error",y),g.on("close",v),g.on("end",_),o()})}return parseProxyResponse.default=p,parseProxyResponse}var hasRequiredAgent;function requireAgent(){if(hasRequiredAgent)return agent;hasRequiredAgent=1;var e=agent&&agent.__awaiter||function(T,I,O,E){function C(x){return x instanceof O?x:new O(function(j){j(x)})}return new(O||(O=Promise))(function(x,j){function D(G){try{q(E.next(G))}catch($){j($)}}function k(G){try{q(E.throw(G))}catch($){j($)}}function q(G){G.done?x(G.value):C(G.value).then(D,k)}q((E=E.apply(T,I||[])).next())})},t=agent&&agent.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(agent,"__esModule",{value:!0});const s=t(require$$1$3),p=t(require$$1$3),g=t(require$$1$3),m=t(require$$1$3),d=t(requireBrowser$2()),l=requireSrc$7(),a=t(requireParseProxyResponse()),o=d.default("https-proxy-agent:agent");class h extends l.Agent{constructor(I){let O;if(typeof I=="string"?O=g.default.parse(I):O=I,!O)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");o("creating new HttpsProxyAgent instance: %o",O),super(O);const E=Object.assign({},O);this.secureProxy=O.secureProxy||y(E.protocol),E.host=E.hostname||E.host,typeof E.port=="string"&&(E.port=parseInt(E.port,10)),!E.port&&E.host&&(E.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in E)&&(E.ALPNProtocols=["http 1.1"]),E.host&&E.path&&(delete E.path,delete E.pathname),this.proxy=E}callback(I,O){return e(this,void 0,void 0,function*(){const{proxy:E,secureProxy:C}=this;let x;C?(o("Creating `tls.Socket`: %o",E),x=p.default.connect(E)):(o("Creating `net.Socket`: %o",E),x=s.default.connect(E));const j=Object.assign({},E.headers);let k=`CONNECT ${`${O.host}:${O.port}`} HTTP/1.1\r
`;E.auth&&(j["Proxy-Authorization"]=`Basic ${Buffer.from(E.auth).toString("base64")}`);let{host:q,port:G,secureEndpoint:$}=O;_(G,$)||(q+=`:${G}`),j.Host=q,j.Connection="close";for(const Y of Object.keys(j))k+=`${Y}: ${j[Y]}\r
`;const W=a.default(x);x.write(`${k}\r
`);const{statusCode:K,buffered:z}=yield W;if(K===200){if(I.once("socket",v),O.secureEndpoint){o("Upgrading socket connection to TLS");const Y=O.servername||O.host;return p.default.connect(Object.assign(Object.assign({},w(O,"host","hostname","path","port")),{socket:x,servername:Y}))}return x}x.destroy();const Q=new s.default.Socket({writable:!1});return Q.readable=!0,I.once("socket",Y=>{o("replaying proxy buffer for failed request"),m.default(Y.listenerCount("data")>0),Y.push(z),Y.push(null)}),Q})}}agent.default=h;function v(T){T.resume()}function _(T,I){return!!(!I&&T===80||I&&T===443)}function y(T){return typeof T=="string"?/^https:?$/i.test(T):!1}function w(T,...I){const O={};let E;for(E in T)I.includes(E)||(O[E]=T[E]);return O}return agent}var dist,hasRequiredDist;function requireDist(){if(hasRequiredDist)return dist;hasRequiredDist=1;var e=dist&&dist.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};const t=e(requireAgent());function s(p){return new t.default(p)}return(function(p){p.HttpsProxyAgent=t.default,p.prototype=t.default.prototype})(s||(s={})),dist=s,dist}var hasRequiredAgents;function requireAgents(){return hasRequiredAgents||(hasRequiredAgents=1,(function(e){var t={};Object.defineProperty(e,"__esModule",{value:!0}),e.getAgent=e.pool=void 0;const s=require$$1$3,p=require$$1$3,g=require$$1$3;e.pool=new Map;function m(l){const a=t.NO_PROXY||t.no_proxy;if(!a)return!0;const o=new URL(l);for(const h of a.split(",")){const v=h.trim();if(v===o.origin||v===o.hostname)return!1;if(v.startsWith("*.")||v.startsWith(".")){const _=v.replace(/^\*\./,".");if(o.hostname.endsWith(_))return!1}}return!0}function d(l,a){const o=l.startsWith("http://"),h=a.proxy||t.HTTP_PROXY||t.http_proxy||t.HTTPS_PROXY||t.https_proxy,v=Object.assign({},a.pool),y=!!a.proxy||m(l);if(h&&y){const T=o?requireDist$1():requireDist(),I={...(0,g.parse)(h),...v};return new T(I)}let w=o?"http":"https";if(a.forever&&(w+=":forever",!e.pool.has(w))){const T=o?s.Agent:p.Agent;e.pool.set(w,new T({...v,keepAlive:!0}))}return e.pool.get(w)}e.getAgent=d})(agents)),agents}var TeenyStatistics={},hasRequiredTeenyStatistics;function requireTeenyStatistics(){if(hasRequiredTeenyStatistics)return TeenyStatistics;hasRequiredTeenyStatistics=1;var e={},t={};Object.defineProperty(TeenyStatistics,"__esModule",{value:!0}),TeenyStatistics.TeenyStatistics=TeenyStatistics.TeenyStatisticsWarning=void 0;class s extends Error{constructor(m){super(m),this.threshold=0,this.type="",this.value=0,this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}}TeenyStatistics.TeenyStatisticsWarning=s,s.CONCURRENT_REQUESTS="ConcurrentRequestsExceededWarning";let p=class es{constructor(m){this._concurrentRequests=0,this._didConcurrentRequestWarn=!1,this._options=es._prepareOptions(m)}getOptions(){return Object.assign({},this._options)}setOptions(m){const d=this._options;return this._options=es._prepareOptions(m),d}get counters(){return{concurrentRequests:this._concurrentRequests}}requestStarting(){if(this._concurrentRequests++,this._options.concurrentRequests>0&&this._concurrentRequests>=this._options.concurrentRequests&&!this._didConcurrentRequestWarn){this._didConcurrentRequestWarn=!0;const m=new s("Possible excessive concurrent requests detected. "+this._concurrentRequests+" requests in-flight, which exceeds the configured threshold of "+this._options.concurrentRequests+". Use the TEENY_REQUEST_WARN_CONCURRENT_REQUESTS environment variable or the concurrentRequests option of teeny-request to increase or disable (0) this warning.");m.type=s.CONCURRENT_REQUESTS,m.value=this._concurrentRequests,m.threshold=this._options.concurrentRequests,e.emitWarning(m)}}requestFinished(){this._concurrentRequests--}static _prepareOptions({concurrentRequests:m}={}){let d=this.DEFAULT_WARN_CONCURRENT_REQUESTS;const l=Number(t.TEENY_REQUEST_WARN_CONCURRENT_REQUESTS);return m!==void 0?d=m:Number.isNaN(l)||(d=l),{concurrentRequests:d}}};return TeenyStatistics.TeenyStatistics=p,p.DEFAULT_WARN_CONCURRENT_REQUESTS=5e3,TeenyStatistics}var stubs,hasRequiredStubs;function requireStubs(){return hasRequiredStubs||(hasRequiredStubs=1,stubs=function(t,s,p,g){if(!t||!s||!t[s])throw new Error("You must provide an object and a key for an existing method");g||(g=p,p={}),g=g||function(){},p.callthrough=p.callthrough||!1,p.calls=p.calls||0;var m=p.calls===0,d=t[s].bind(t);t[s]=function(){var l=[].slice.call(arguments),a;return p.callthrough&&(a=d.apply(t,l)),a=g.apply(t,l)||a,!m&&--p.calls===0&&(t[s]=d),a}}),stubs}var streamEvents,hasRequiredStreamEvents;function requireStreamEvents(){if(hasRequiredStreamEvents)return streamEvents;hasRequiredStreamEvents=1;var e=requireStubs();function t(s){s=s||this;var p={callthrough:!0,calls:1};return e(s,"_read",p,s.emit.bind(s,"reading")),e(s,"_write",p,s.emit.bind(s,"writing")),s}return streamEvents=t,streamEvents}var hasRequiredSrc$6;function requireSrc$6(){if(hasRequiredSrc$6)return src$7;hasRequiredSrc$6=1;Object.defineProperty(src$7,"__esModule",{value:!0}),src$7.teenyRequest=src$7.RequestError=void 0;const e=requireBrowser$3(),t=require$$1$3,s=requireCommonjsBrowser$1(),p=requireAgents(),g=requireTeenyStatistics(),m=requireStreamEvents();class d extends Error{}src$7.RequestError=d;function l(v){const _={method:v.method||"GET",...v.timeout&&{timeout:v.timeout},...typeof v.gzip=="boolean"&&{compress:v.gzip}};typeof v.json=="object"?(v.headers=v.headers||{},v.headers["Content-Type"]="application/json",_.body=JSON.stringify(v.json)):Buffer.isBuffer(v.body)?_.body=v.body:typeof v.body!="string"?_.body=JSON.stringify(v.body):_.body=v.body,_.headers=v.headers;let y=v.uri||v.url;if(!y)throw new Error("Missing uri or url in reqOpts.");if(v.useQuerystring===!0||typeof v.qs=="object"){const T=require$$1$3.stringify(v.qs);y=y+"?"+T}return _.agent=(0,p.getAgent)(y,v),{uri:y,options:_}}function a(v,_){const y={};y.agent=v.agent||!1,y.headers=v.headers||{},y.href=_.url;const w={};return _.headers.forEach((I,O)=>w[O]=I),Object.assign(_.body,{statusCode:_.status,statusMessage:_.statusText,request:y,body:_.body,headers:w,toJSON:()=>({headers:w})})}function o(v,_){const y=`--${v}--`,w=new t.PassThrough;for(const T of _){const I=`--${v}\r
Content-Type: ${T["Content-Type"]}\r
\r
`;w.write(I),typeof T.body=="string"?(w.write(T.body),w.write(`\r
`)):(T.body.pipe(w,{end:!1}),T.body.on("end",()=>{w.write(`\r
`),w.write(y),w.end()}))}return w}function h(v,_){const{uri:y,options:w}=l(v),T=v.multipart;if(v.multipart&&T.length===2){if(!_)throw new Error("Multipart without callback is not implemented.");const I=s.v4();w.headers["Content-Type"]=`multipart/related; boundary=${I}`,w.body=o(I,T),h.stats.requestStarting(),(0,e.default)(y,w).then(O=>{h.stats.requestFinished();const E=O.headers.get("content-type"),C=a(w,O),x=C.body;if(E==="application/json"||E==="application/json; charset=utf-8"){O.json().then(j=>{C.body=j,_(null,C,j)},j=>{_(j,C,x)});return}O.text().then(j=>{C.body=j,_(null,C,j)},j=>{_(j,C,x)})},O=>{h.stats.requestFinished(),_(O,null,null)});return}if(_===void 0){const I=m(new t.PassThrough);let O;return I.once("reading",()=>{O?(0,t.pipeline)(O,I,()=>{}):I.once("response",()=>{(0,t.pipeline)(O,I,()=>{})})}),w.compress=!1,h.stats.requestStarting(),(0,e.default)(y,w).then(E=>{h.stats.requestFinished(),O=E.body,O.on("error",x=>{I.emit("error",x)});const C=a(w,E);I.emit("response",C)},E=>{h.stats.requestFinished(),I.emit("error",E)}),I}h.stats.requestStarting(),(0,e.default)(y,w).then(I=>{h.stats.requestFinished();const O=I.headers.get("content-type"),E=a(w,I),C=E.body;if(O==="application/json"||O==="application/json; charset=utf-8"){if(E.statusCode===204){_(null,E,C);return}I.json().then(x=>{E.body=x,_(null,E,x)},x=>{_(x,E,C)});return}I.text().then(x=>{const j=a(w,I);j.body=x,_(null,j,x)},x=>{_(x,E,C)})},I=>{h.stats.requestFinished(),_(I,null,null)})}return src$7.teenyRequest=h,h.defaults=v=>(_,y)=>{const w={...v,..._};if(y===void 0)return h(w);h(w,y)},h.stats=new g.TeenyStatistics,h.resetStats=()=>{h.stats=new g.TeenyStatistics(h.stats.getOptions())},src$7}var util$5={},packageJsonHelper={};const name$1="@google-cloud/storage",description="Cloud Storage Client Library for Node.js",version$3="7.17.0",license="Apache-2.0",author="Google Inc.",engines={node:">=14"},repository="googleapis/nodejs-storage",main="./build/cjs/src/index.js",types$3="./build/cjs/src/index.d.ts",type$1="module",exports$1={".":{import:{types:"./build/esm/src/index.d.ts",default:"./build/esm/src/index.js"},require:{types:"./build/cjs/src/index.d.ts",default:"./build/cjs/src/index.js"}}},files=["build/cjs/src","build/cjs/package.json","!build/cjs/src/**/*.map","build/esm/src","!build/esm/src/**/*.map"],keywords=["google apis client","google api client","google apis","google api","google","google cloud platform","google cloud","cloud","google storage","storage"],scripts={"all-test":"npm test && npm run system-test && npm run samples-test",benchwrapper:"node bin/benchwrapper.js",check:"gts check",clean:"rm -rf build/","compile:cjs":"tsc -p ./tsconfig.cjs.json","compile:esm":"tsc -p .",compile:"npm run compile:cjs && npm run compile:esm","conformance-test":"mocha --parallel build/cjs/conformance-test/ --require build/cjs/conformance-test/globalHooks.js","docs-test":"linkinator docs",docs:"jsdoc -c .jsdoc.json",fix:"gts fix",lint:"gts check",postcompile:"cp ./src/package-json-helper.cjs ./build/cjs/src && cp ./src/package-json-helper.cjs ./build/esm/src","postcompile:cjs":"babel --plugins gapic-tools/build/src/replaceImportMetaUrl,gapic-tools/build/src/toggleESMFlagVariable build/cjs/src/util.js -o build/cjs/src/util.js && cp internal-tooling/helpers/package.cjs.json build/cjs/package.json",precompile:"rm -rf build/","preconformance-test":"npm run compile:cjs -- --sourceMap","predocs-test":"npm run docs",predocs:"npm run compile:cjs -- --sourceMap",prelint:"cd samples; npm link ../; npm install",prepare:"npm run compile","presystem-test:esm":"npm run compile:esm","presystem-test":"npm run compile -- --sourceMap",pretest:"npm run compile -- --sourceMap","samples-test":"npm link && cd samples/ && npm link ../ && npm test && cd ../","system-test:esm":"mocha build/esm/system-test --timeout 600000 --exit","system-test":"mocha build/cjs/system-test --timeout 600000 --exit",test:"c8 mocha build/cjs/test"},dependencies={"@google-cloud/paginator":"^5.0.0","@google-cloud/projectify":"^4.0.0","@google-cloud/promisify":"<4.1.0","abort-controller":"^3.0.0","async-retry":"^1.3.3",duplexify:"^4.1.3","fast-xml-parser":"^4.4.1",gaxios:"^6.0.2","google-auth-library":"^9.6.3","html-entities":"^2.5.2",mime:"^3.0.0","p-limit":"^3.0.1","retry-request":"^7.0.0","teeny-request":"^9.0.0",uuid:"^8.0.0"},devDependencies={"@babel/cli":"^7.22.10","@babel/core":"^7.22.11","@google-cloud/pubsub":"^4.0.0","@grpc/grpc-js":"^1.0.3","@grpc/proto-loader":"^0.8.0","@types/async-retry":"^1.4.3","@types/duplexify":"^3.6.4","@types/mime":"^3.0.0","@types/mocha":"^9.1.1","@types/mockery":"^1.4.29","@types/node":"^22.0.0","@types/node-fetch":"^2.1.3","@types/proxyquire":"^1.3.28","@types/request":"^2.48.4","@types/sinon":"^17.0.0","@types/tmp":"0.2.6","@types/uuid":"^8.0.0","@types/yargs":"^17.0.10",c8:"^9.0.0","form-data":"^4.0.4","gapic-tools":"^0.4.0",gts:"^5.0.0",jsdoc:"^4.0.4","jsdoc-fresh":"^4.0.0","jsdoc-region-tag":"^3.0.0",linkinator:"^3.0.0",mocha:"^9.2.2",mockery:"^2.1.0",nock:"~13.5.0","node-fetch":"^2.6.7","pack-n-play":"^2.0.0",proxyquire:"^2.1.3",sinon:"^18.0.0",nise:"6.0.0","path-to-regexp":"6.3.0",tmp:"^0.2.0",typescript:"^5.1.6",yargs:"^17.3.1"},require$$0$2={name:name$1,description,version:version$3,license,author,engines,repository,main,types:types$3,type:type$1,exports:exports$1,files,keywords,scripts,dependencies,devDependencies};var hasRequiredPackageJsonHelper;function requirePackageJsonHelper(){if(hasRequiredPackageJsonHelper)return packageJsonHelper;hasRequiredPackageJsonHelper=1;function e(){return require$$0$2}return packageJsonHelper.getPackageJSON=e,packageJsonHelper}var hasRequiredUtil$6;function requireUtil$6(){if(hasRequiredUtil$6)return util$5;hasRequiredUtil$6=1;var e={},t=util$5&&util$5.__createBinding||(Object.create?function(D,k,q,G){G===void 0&&(G=q);var $=Object.getOwnPropertyDescriptor(k,q);(!$||("get"in $?!k.__esModule:$.writable||$.configurable))&&($={enumerable:!0,get:function(){return k[q]}}),Object.defineProperty(D,G,$)}:function(D,k,q,G){G===void 0&&(G=q),D[G]=k[q]}),s=util$5&&util$5.__setModuleDefault||(Object.create?function(D,k){Object.defineProperty(D,"default",{enumerable:!0,value:k})}:function(D,k){D.default=k}),p=util$5&&util$5.__importStar||(function(){var D=function(k){return D=Object.getOwnPropertyNames||function(q){var G=[];for(var $ in q)Object.prototype.hasOwnProperty.call(q,$)&&(G[G.length]=$);return G},D(k)};return function(k){if(k&&k.__esModule)return k;var q={};if(k!=null)for(var G=D(k),$=0;$<G.length;$++)G[$]!=="default"&&t(q,k,G[$]);return s(q,k),q}})();Object.defineProperty(util$5,"__esModule",{value:!0}),util$5.PassThroughShim=void 0,util$5.normalize=a,util$5.objectEntries=o,util$5.fixedEncodeURIComponent=h,util$5.encodeURI=v,util$5.qsStringify=_,util$5.objectKeyToLowercase=y,util$5.unicodeJSONStringify=w,util$5.convertObjKeysToSnakeCase=T,util$5.formatAsUTCISO=I,util$5.getRuntimeTrackingString=O,util$5.getUserAgentString=E,util$5.getDirName=C,util$5.getModuleFormat=x,p(require$$1$3);const g=p(require$$1$3),m=require$$1$3,d=p(require$$1$3),l=requirePackageJsonHelper();d.fileURLToPath;function a(D,k){return{options:typeof D=="object"?D:{},callback:typeof D=="function"?D:k}}function o(D){return Object.keys(D).map(k=>[k,D[k]])}function h(D){return encodeURIComponent(D).replace(/[!'()*]/g,k=>"%"+k.charCodeAt(0).toString(16).toUpperCase())}function v(D,k){return D.split("/").map(h).join(k?"%2F":"/")}function _(D){return g.stringify(D,"&","=",{encodeURIComponent:k=>v(k,!0)})}function y(D){const k={};for(let q of Object.keys(D)){const G=D[q];q=q.toLowerCase(),k[q]=G}return k}function w(D){return JSON.stringify(D).replace(/[\u0080-\uFFFF]/g,k=>"\\u"+("0000"+k.charCodeAt(0).toString(16)).slice(-4))}function T(D){return D instanceof Date||D instanceof RegExp?D:Array.isArray(D)?D.map(T):D instanceof Object?Object.keys(D).reduce((k,q)=>{const G=q[0].toLocaleLowerCase()+q.slice(1).replace(/([A-Z]+)/g,($,W)=>`_${W.toLowerCase()}`);return k[G]=T(D[q]),k},Object()):D}function I(D,k=!1,q="",G=""){const $=D.getUTCFullYear(),W=D.getUTCMonth()+1,K=D.getUTCDate(),z=D.getUTCHours(),Q=D.getUTCMinutes(),Y=D.getUTCSeconds();let te=`${$.toString().padStart(4,"0")}${q}${W.toString().padStart(2,"0")}${q}${K.toString().padStart(2,"0")}`;return k&&(te=`${te}T${z.toString().padStart(2,"0")}${G}${Q.toString().padStart(2,"0")}${G}${Y.toString().padStart(2,"0")}Z`),te}function O(){return globalThis.Deno&&globalThis.Deno.version&&globalThis.Deno.version.deno?`gl-deno/${globalThis.Deno.version.deno}`:`gl-node/${e.versions.node}`}function E(){const D=(0,l.getPackageJSON)();return D.name.replace("@google-cloud","gcloud-node").replace("/","-")+"/"+D.version}function C(){let D="";try{D=__dirname}catch{D=__dirname}return D}function x(){return"CJS"}class j extends m.PassThrough{constructor(){super(...arguments),this.shouldEmitReading=!0,this.shouldEmitWriting=!0}_read(k){this.shouldEmitReading&&(this.emit("reading"),this.shouldEmitReading=!1),super._read(k)}_write(k,q,G){this.shouldEmitWriting&&(this.emit("writing"),this.shouldEmitWriting=!1),e.nextTick(()=>{super._write(k,q,G)})}_final(k){this.shouldEmitReading&&(this.emit("reading"),this.shouldEmitReading=!1),this.shouldEmitWriting&&(this.emit("writing"),this.shouldEmitWriting=!1),k(null)}}return util$5.PassThroughShim=j,util$5}var readableBrowser={exports:{}},streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=require$$1$3.EventEmitter),streamBrowser}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function e(w,T){var I=Object.keys(w);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(w);T&&(O=O.filter(function(E){return Object.getOwnPropertyDescriptor(w,E).enumerable})),I.push.apply(I,O)}return I}function t(w){for(var T=1;T<arguments.length;T++){var I=arguments[T]!=null?arguments[T]:{};T%2?e(Object(I),!0).forEach(function(O){s(w,O,I[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(I)):e(Object(I)).forEach(function(O){Object.defineProperty(w,O,Object.getOwnPropertyDescriptor(I,O))})}return w}function s(w,T,I){return T=d(T),T in w?Object.defineProperty(w,T,{value:I,enumerable:!0,configurable:!0,writable:!0}):w[T]=I,w}function p(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")}function g(w,T){for(var I=0;I<T.length;I++){var O=T[I];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(w,d(O.key),O)}}function m(w,T,I){return T&&g(w.prototype,T),Object.defineProperty(w,"prototype",{writable:!1}),w}function d(w){var T=l(w,"string");return typeof T=="symbol"?T:String(T)}function l(w,T){if(typeof w!="object"||w===null)return w;var I=w[Symbol.toPrimitive];if(I!==void 0){var O=I.call(w,T);if(typeof O!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(w)}var a=requireBuffer(),o=a.Buffer,h=require$$1$3,v=h.inspect,_=v&&v.custom||"inspect";function y(w,T,I){o.prototype.copy.call(w,T,I)}return buffer_list=(function(){function w(){p(this,w),this.head=null,this.tail=null,this.length=0}return m(w,[{key:"push",value:function(I){var O={data:I,next:null};this.length>0?this.tail.next=O:this.head=O,this.tail=O,++this.length}},{key:"unshift",value:function(I){var O={data:I,next:this.head};this.length===0&&(this.tail=O),this.head=O,++this.length}},{key:"shift",value:function(){if(this.length!==0){var I=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,I}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(I){if(this.length===0)return"";for(var O=this.head,E=""+O.data;O=O.next;)E+=I+O.data;return E}},{key:"concat",value:function(I){if(this.length===0)return o.alloc(0);for(var O=o.allocUnsafe(I>>>0),E=this.head,C=0;E;)y(E.data,O,C),C+=E.data.length,E=E.next;return O}},{key:"consume",value:function(I,O){var E;return I<this.head.data.length?(E=this.head.data.slice(0,I),this.head.data=this.head.data.slice(I)):I===this.head.data.length?E=this.shift():E=O?this._getString(I):this._getBuffer(I),E}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(I){var O=this.head,E=1,C=O.data;for(I-=C.length;O=O.next;){var x=O.data,j=I>x.length?x.length:I;if(j===x.length?C+=x:C+=x.slice(0,I),I-=j,I===0){j===x.length?(++E,O.next?this.head=O.next:this.head=this.tail=null):(this.head=O,O.data=x.slice(j));break}++E}return this.length-=E,C}},{key:"_getBuffer",value:function(I){var O=o.allocUnsafe(I),E=this.head,C=1;for(E.data.copy(O),I-=E.data.length;E=E.next;){var x=E.data,j=I>x.length?x.length:I;if(x.copy(O,O.length-I,0,j),I-=j,I===0){j===x.length?(++C,E.next?this.head=E.next:this.head=this.tail=null):(this.head=E,E.data=x.slice(j));break}++C}return this.length-=C,O}},{key:_,value:function(I,O){return v(this,t(t({},O),{},{depth:0,customInspect:!1}))}}]),w})(),buffer_list}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;var e={};function t(l,a){var o=this,h=this._readableState&&this._readableState.destroyed,v=this._writableState&&this._writableState.destroyed;return h||v?(a?a(l):l&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(m,this,l)):e.nextTick(m,this,l)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(l||null,function(_){!a&&_?o._writableState?o._writableState.errorEmitted?e.nextTick(p,o):(o._writableState.errorEmitted=!0,e.nextTick(s,o,_)):e.nextTick(s,o,_):a?(e.nextTick(p,o),a(_)):e.nextTick(p,o)}),this)}function s(l,a){m(l,a),p(l)}function p(l){l._writableState&&!l._writableState.emitClose||l._readableState&&!l._readableState.emitClose||l.emit("close")}function g(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function m(l,a){l.emit("error",a)}function d(l,a){var o=l._readableState,h=l._writableState;o&&o.autoDestroy||h&&h.autoDestroy?l.destroy(a):l.emit("error",a)}return destroy_1={destroy:t,undestroy:g,errorOrDestroy:d},destroy_1}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function e(l,a){l.prototype=Object.create(a.prototype),l.prototype.constructor=l,l.__proto__=a}var t={};function s(l,a,o){o||(o=Error);function h(_,y,w){return typeof a=="string"?a:a(_,y,w)}var v=(function(_){e(y,_);function y(w,T,I){return _.call(this,h(w,T,I))||this}return y})(o);v.prototype.name=o.name,v.prototype.code=l,t[l]=v}function p(l,a){if(Array.isArray(l)){var o=l.length;return l=l.map(function(h){return String(h)}),o>2?"one of ".concat(a," ").concat(l.slice(0,o-1).join(", "),", or ")+l[o-1]:o===2?"one of ".concat(a," ").concat(l[0]," or ").concat(l[1]):"of ".concat(a," ").concat(l[0])}else return"of ".concat(a," ").concat(String(l))}function g(l,a,o){return l.substr(0,a.length)===a}function m(l,a,o){return(o===void 0||o>l.length)&&(o=l.length),l.substring(o-a.length,o)===a}function d(l,a,o){return typeof o!="number"&&(o=0),o+a.length>l.length?!1:l.indexOf(a,o)!==-1}return s("ERR_INVALID_OPT_VALUE",function(l,a){return'The value "'+a+'" is invalid for option "'+l+'"'},TypeError),s("ERR_INVALID_ARG_TYPE",function(l,a,o){var h;typeof a=="string"&&g(a,"not ")?(h="must not be",a=a.replace(/^not /,"")):h="must be";var v;if(m(l," argument"))v="The ".concat(l," ").concat(h," ").concat(p(a,"type"));else{var _=d(l,".")?"property":"argument";v='The "'.concat(l,'" ').concat(_," ").concat(h," ").concat(p(a,"type"))}return v+=". Received type ".concat(typeof o),v},TypeError),s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),s("ERR_METHOD_NOT_IMPLEMENTED",function(l){return"The "+l+" method is not implemented"}),s("ERR_STREAM_PREMATURE_CLOSE","Premature close"),s("ERR_STREAM_DESTROYED",function(l){return"Cannot call "+l+" after a stream was destroyed"}),s("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),s("ERR_STREAM_WRITE_AFTER_END","write after end"),s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),s("ERR_UNKNOWN_ENCODING",function(l){return"Unknown encoding: "+l},TypeError),s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=t,errorsBrowser}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;var e=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function t(p,g,m){return p.highWaterMark!=null?p.highWaterMark:g?p[m]:null}function s(p,g,m,d){var l=t(g,d,m);if(l!=null){if(!(isFinite(l)&&Math.floor(l)===l)||l<0){var a=d?m:"highWaterMark";throw new e(a,l)}return Math.floor(l)}return p.objectMode?16:16384}return state={getHighWaterMark:s},state}var inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,typeof Object.create=="function"?inherits_browser.exports=function(t,s){s&&(t.super_=s,t.prototype=Object.create(s.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(t,s){if(s){t.super_=s;var p=function(){};p.prototype=s.prototype,t.prototype=new p,t.prototype.constructor=t}}),inherits_browser.exports}var browser$2,hasRequiredBrowser$1;function requireBrowser$1(){if(hasRequiredBrowser$1)return browser$2;hasRequiredBrowser$1=1,browser$2=e;function e(s,p){if(t("noDeprecation"))return s;var g=!1;function m(){if(!g){if(t("throwDeprecation"))throw new Error(p);t("traceDeprecation")?console.trace(p):console.warn(p),g=!0}return s.apply(this,arguments)}return m}function t(s){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var p=commonjsGlobal.localStorage[s];return p==null?!1:String(p).toLowerCase()==="true"}return browser$2}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1;var e={};_stream_writable=G;function t(Oe){var ge=this;this.next=null,this.entry=null,this.finish=function(){be(ge,Oe)}}var s;G.WritableState=k;var p={deprecate:requireBrowser$1()},g=requireStreamBrowser(),m=requireBuffer().Buffer,d=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function l(Oe){return m.from(Oe)}function a(Oe){return m.isBuffer(Oe)||Oe instanceof d}var o=requireDestroy(),h=requireState(),v=h.getHighWaterMark,_=requireErrorsBrowser().codes,y=_.ERR_INVALID_ARG_TYPE,w=_.ERR_METHOD_NOT_IMPLEMENTED,T=_.ERR_MULTIPLE_CALLBACK,I=_.ERR_STREAM_CANNOT_PIPE,O=_.ERR_STREAM_DESTROYED,E=_.ERR_STREAM_NULL_VALUES,C=_.ERR_STREAM_WRITE_AFTER_END,x=_.ERR_UNKNOWN_ENCODING,j=o.errorOrDestroy;requireInherits_browser()(G,g);function D(){}function k(Oe,ge,J){s=s||require_stream_duplex(),Oe=Oe||{},typeof J!="boolean"&&(J=ge instanceof s),this.objectMode=!!Oe.objectMode,J&&(this.objectMode=this.objectMode||!!Oe.writableObjectMode),this.highWaterMark=v(this,Oe,"writableHighWaterMark",J),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=Oe.decodeStrings===!1;this.decodeStrings=!c,this.defaultEncoding=Oe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(N){ae(ge,N)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Oe.emitClose!==!1,this.autoDestroy=!!Oe.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}k.prototype.getBuffer=function(){for(var ge=this.bufferedRequest,J=[];ge;)J.push(ge),ge=ge.next;return J},(function(){try{Object.defineProperty(k.prototype,"buffer",{get:p.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var q;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(q=Function.prototype[Symbol.hasInstance],Object.defineProperty(G,Symbol.hasInstance,{value:function(ge){return q.call(this,ge)?!0:this!==G?!1:ge&&ge._writableState instanceof k}})):q=function(ge){return ge instanceof this};function G(Oe){s=s||require_stream_duplex();var ge=this instanceof s;if(!ge&&!q.call(G,this))return new G(Oe);this._writableState=new k(Oe,this,ge),this.writable=!0,Oe&&(typeof Oe.write=="function"&&(this._write=Oe.write),typeof Oe.writev=="function"&&(this._writev=Oe.writev),typeof Oe.destroy=="function"&&(this._destroy=Oe.destroy),typeof Oe.final=="function"&&(this._final=Oe.final)),g.call(this)}G.prototype.pipe=function(){j(this,new I)};function $(Oe,ge){var J=new C;j(Oe,J),e.nextTick(ge,J)}function W(Oe,ge,J,c){var N;return J===null?N=new E:typeof J!="string"&&!ge.objectMode&&(N=new y("chunk",["string","Buffer"],J)),N?(j(Oe,N),e.nextTick(c,N),!1):!0}G.prototype.write=function(Oe,ge,J){var c=this._writableState,N=!1,A=!c.objectMode&&a(Oe);return A&&!m.isBuffer(Oe)&&(Oe=l(Oe)),typeof ge=="function"&&(J=ge,ge=null),A?ge="buffer":ge||(ge=c.defaultEncoding),typeof J!="function"&&(J=D),c.ending?$(this,J):(A||W(this,c,Oe,J))&&(c.pendingcb++,N=z(this,c,A,Oe,ge,J)),N},G.prototype.cork=function(){this._writableState.corked++},G.prototype.uncork=function(){var Oe=this._writableState;Oe.corked&&(Oe.corked--,!Oe.writing&&!Oe.corked&&!Oe.bufferProcessing&&Oe.bufferedRequest&&oe(this,Oe))},G.prototype.setDefaultEncoding=function(ge){if(typeof ge=="string"&&(ge=ge.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ge+"").toLowerCase())>-1))throw new x(ge);return this._writableState.defaultEncoding=ge,this},Object.defineProperty(G.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function K(Oe,ge,J){return!Oe.objectMode&&Oe.decodeStrings!==!1&&typeof ge=="string"&&(ge=m.from(ge,J)),ge}Object.defineProperty(G.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function z(Oe,ge,J,c,N,A){if(!J){var V=K(ge,c,N);c!==V&&(J=!0,N="buffer",c=V)}var ne=ge.objectMode?1:c.length;ge.length+=ne;var ce=ge.length<ge.highWaterMark;if(ce||(ge.needDrain=!0),ge.writing||ge.corked){var ie=ge.lastBufferedRequest;ge.lastBufferedRequest={chunk:c,encoding:N,isBuf:J,callback:A,next:null},ie?ie.next=ge.lastBufferedRequest:ge.bufferedRequest=ge.lastBufferedRequest,ge.bufferedRequestCount+=1}else Q(Oe,ge,!1,ne,c,N,A);return ce}function Q(Oe,ge,J,c,N,A,V){ge.writelen=c,ge.writecb=V,ge.writing=!0,ge.sync=!0,ge.destroyed?ge.onwrite(new O("write")):J?Oe._writev(N,ge.onwrite):Oe._write(N,A,ge.onwrite),ge.sync=!1}function Y(Oe,ge,J,c,N){--ge.pendingcb,J?(e.nextTick(N,c),e.nextTick(fe,Oe,ge),Oe._writableState.errorEmitted=!0,j(Oe,c)):(N(c),Oe._writableState.errorEmitted=!0,j(Oe,c),fe(Oe,ge))}function te(Oe){Oe.writing=!1,Oe.writecb=null,Oe.length-=Oe.writelen,Oe.writelen=0}function ae(Oe,ge){var J=Oe._writableState,c=J.sync,N=J.writecb;if(typeof N!="function")throw new T;if(te(J),ge)Y(Oe,J,c,ge,N);else{var A=de(J)||Oe.destroyed;!A&&!J.corked&&!J.bufferProcessing&&J.bufferedRequest&&oe(Oe,J),c?e.nextTick(ue,Oe,J,A,N):ue(Oe,J,A,N)}}function ue(Oe,ge,J,c){J||ee(Oe,ge),ge.pendingcb--,c(),fe(Oe,ge)}function ee(Oe,ge){ge.length===0&&ge.needDrain&&(ge.needDrain=!1,Oe.emit("drain"))}function oe(Oe,ge){ge.bufferProcessing=!0;var J=ge.bufferedRequest;if(Oe._writev&&J&&J.next){var c=ge.bufferedRequestCount,N=new Array(c),A=ge.corkedRequestsFree;A.entry=J;for(var V=0,ne=!0;J;)N[V]=J,J.isBuf||(ne=!1),J=J.next,V+=1;N.allBuffers=ne,Q(Oe,ge,!0,ge.length,N,"",A.finish),ge.pendingcb++,ge.lastBufferedRequest=null,A.next?(ge.corkedRequestsFree=A.next,A.next=null):ge.corkedRequestsFree=new t(ge),ge.bufferedRequestCount=0}else{for(;J;){var ce=J.chunk,ie=J.encoding,u=J.callback,P=ge.objectMode?1:ce.length;if(Q(Oe,ge,!1,P,ce,ie,u),J=J.next,ge.bufferedRequestCount--,ge.writing)break}J===null&&(ge.lastBufferedRequest=null)}ge.bufferedRequest=J,ge.bufferProcessing=!1}G.prototype._write=function(Oe,ge,J){J(new w("_write()"))},G.prototype._writev=null,G.prototype.end=function(Oe,ge,J){var c=this._writableState;return typeof Oe=="function"?(J=Oe,Oe=null,ge=null):typeof ge=="function"&&(J=ge,ge=null),Oe!=null&&this.write(Oe,ge),c.corked&&(c.corked=1,this.uncork()),c.ending||Se(this,c,J),this},Object.defineProperty(G.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function de(Oe){return Oe.ending&&Oe.length===0&&Oe.bufferedRequest===null&&!Oe.finished&&!Oe.writing}function he(Oe,ge){Oe._final(function(J){ge.pendingcb--,J&&j(Oe,J),ge.prefinished=!0,Oe.emit("prefinish"),fe(Oe,ge)})}function Ee(Oe,ge){!ge.prefinished&&!ge.finalCalled&&(typeof Oe._final=="function"&&!ge.destroyed?(ge.pendingcb++,ge.finalCalled=!0,e.nextTick(he,Oe,ge)):(ge.prefinished=!0,Oe.emit("prefinish")))}function fe(Oe,ge){var J=de(ge);if(J&&(Ee(Oe,ge),ge.pendingcb===0&&(ge.finished=!0,Oe.emit("finish"),ge.autoDestroy))){var c=Oe._readableState;(!c||c.autoDestroy&&c.endEmitted)&&Oe.destroy()}return J}function Se(Oe,ge,J){ge.ending=!0,fe(Oe,ge),J&&(ge.finished?e.nextTick(J):Oe.once("finish",J)),ge.ended=!0,Oe.writable=!1}function be(Oe,ge,J){var c=Oe.entry;for(Oe.entry=null;c;){var N=c.callback;ge.pendingcb--,N(J),c=c.next}ge.corkedRequestsFree.next=Oe}return Object.defineProperty(G.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(ge){this._writableState&&(this._writableState.destroyed=ge)}}),G.prototype.destroy=o.destroy,G.prototype._undestroy=o.undestroy,G.prototype._destroy=function(Oe,ge){ge(Oe)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var e={},t=Object.keys||function(h){var v=[];for(var _ in h)v.push(_);return v};_stream_duplex=l;var s=require_stream_readable(),p=require_stream_writable();requireInherits_browser()(l,s);for(var g=t(p.prototype),m=0;m<g.length;m++){var d=g[m];l.prototype[d]||(l.prototype[d]=p.prototype[d])}function l(h){if(!(this instanceof l))return new l(h);s.call(this,h),p.call(this,h),this.allowHalfOpen=!0,h&&(h.readable===!1&&(this.readable=!1),h.writable===!1&&(this.writable=!1),h.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||e.nextTick(o,this)}function o(h){h.end()}return Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(v){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=v,this._writableState.destroyed=v)}}),_stream_duplex}var string_decoder={},hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var e=requireSafeBuffer().Buffer,t=e.isEncoding||function(O){switch(O=""+O,O&&O.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(O){if(!O)return"utf8";for(var E;;)switch(O){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return O;default:if(E)return;O=(""+O).toLowerCase(),E=!0}}function p(O){var E=s(O);if(typeof E!="string"&&(e.isEncoding===t||!t(O)))throw new Error("Unknown encoding: "+O);return E||O}string_decoder.StringDecoder=g;function g(O){this.encoding=p(O);var E;switch(this.encoding){case"utf16le":this.text=v,this.end=_,E=4;break;case"utf8":this.fillLast=a,E=4;break;case"base64":this.text=y,this.end=w,E=3;break;default:this.write=T,this.end=I;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(E)}g.prototype.write=function(O){if(O.length===0)return"";var E,C;if(this.lastNeed){if(E=this.fillLast(O),E===void 0)return"";C=this.lastNeed,this.lastNeed=0}else C=0;return C<O.length?E?E+this.text(O,C):this.text(O,C):E||""},g.prototype.end=h,g.prototype.text=o,g.prototype.fillLast=function(O){if(this.lastNeed<=O.length)return O.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);O.copy(this.lastChar,this.lastTotal-this.lastNeed,0,O.length),this.lastNeed-=O.length};function m(O){return O<=127?0:O>>5===6?2:O>>4===14?3:O>>3===30?4:O>>6===2?-1:-2}function d(O,E,C){var x=E.length-1;if(x<C)return 0;var j=m(E[x]);return j>=0?(j>0&&(O.lastNeed=j-1),j):--x<C||j===-2?0:(j=m(E[x]),j>=0?(j>0&&(O.lastNeed=j-2),j):--x<C||j===-2?0:(j=m(E[x]),j>=0?(j>0&&(j===2?j=0:O.lastNeed=j-3),j):0))}function l(O,E,C){if((E[0]&192)!==128)return O.lastNeed=0,"";if(O.lastNeed>1&&E.length>1){if((E[1]&192)!==128)return O.lastNeed=1,"";if(O.lastNeed>2&&E.length>2&&(E[2]&192)!==128)return O.lastNeed=2,""}}function a(O){var E=this.lastTotal-this.lastNeed,C=l(this,O);if(C!==void 0)return C;if(this.lastNeed<=O.length)return O.copy(this.lastChar,E,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);O.copy(this.lastChar,E,0,O.length),this.lastNeed-=O.length}function o(O,E){var C=d(this,O,E);if(!this.lastNeed)return O.toString("utf8",E);this.lastTotal=C;var x=O.length-(C-this.lastNeed);return O.copy(this.lastChar,0,x),O.toString("utf8",E,x)}function h(O){var E=O&&O.length?this.write(O):"";return this.lastNeed?E+"":E}function v(O,E){if((O.length-E)%2===0){var C=O.toString("utf16le",E);if(C){var x=C.charCodeAt(C.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=O[O.length-2],this.lastChar[1]=O[O.length-1],C.slice(0,-1)}return C}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=O[O.length-1],O.toString("utf16le",E,O.length-1)}function _(O){var E=O&&O.length?this.write(O):"";if(this.lastNeed){var C=this.lastTotal-this.lastNeed;return E+this.lastChar.toString("utf16le",0,C)}return E}function y(O,E){var C=(O.length-E)%3;return C===0?O.toString("base64",E):(this.lastNeed=3-C,this.lastTotal=3,C===1?this.lastChar[0]=O[O.length-1]:(this.lastChar[0]=O[O.length-2],this.lastChar[1]=O[O.length-1]),O.toString("base64",E,O.length-C))}function w(O){var E=O&&O.length?this.write(O):"";return this.lastNeed?E+this.lastChar.toString("base64",0,3-this.lastNeed):E}function T(O){return O.toString(this.encoding)}function I(O){return O&&O.length?this.write(O):""}return string_decoder}var endOfStream$1,hasRequiredEndOfStream$1;function requireEndOfStream$1(){if(hasRequiredEndOfStream$1)return endOfStream$1;hasRequiredEndOfStream$1=1;var e=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function t(m){var d=!1;return function(){if(!d){d=!0;for(var l=arguments.length,a=new Array(l),o=0;o<l;o++)a[o]=arguments[o];m.apply(this,a)}}}function s(){}function p(m){return m.setHeader&&typeof m.abort=="function"}function g(m,d,l){if(typeof d=="function")return g(m,null,d);d||(d={}),l=t(l||s);var a=d.readable||d.readable!==!1&&m.readable,o=d.writable||d.writable!==!1&&m.writable,h=function(){m.writable||_()},v=m._writableState&&m._writableState.finished,_=function(){o=!1,v=!0,a||l.call(m)},y=m._readableState&&m._readableState.endEmitted,w=function(){a=!1,y=!0,o||l.call(m)},T=function(C){l.call(m,C)},I=function(){var C;if(a&&!y)return(!m._readableState||!m._readableState.ended)&&(C=new e),l.call(m,C);if(o&&!v)return(!m._writableState||!m._writableState.ended)&&(C=new e),l.call(m,C)},O=function(){m.req.on("finish",_)};return p(m)?(m.on("complete",_),m.on("abort",I),m.req?O():m.on("request",O)):o&&!m._writableState&&(m.on("end",h),m.on("close",h)),m.on("end",w),m.on("finish",_),d.error!==!1&&m.on("error",T),m.on("close",I),function(){m.removeListener("complete",_),m.removeListener("abort",I),m.removeListener("request",O),m.req&&m.req.removeListener("finish",_),m.removeListener("end",h),m.removeListener("close",h),m.removeListener("finish",_),m.removeListener("end",w),m.removeListener("error",T),m.removeListener("close",I)}}return endOfStream$1=g,endOfStream$1}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var e={},t;function s(x,j,D){return j=p(j),j in x?Object.defineProperty(x,j,{value:D,enumerable:!0,configurable:!0,writable:!0}):x[j]=D,x}function p(x){var j=g(x,"string");return typeof j=="symbol"?j:String(j)}function g(x,j){if(typeof x!="object"||x===null)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var k=D.call(x,j);if(typeof k!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(j==="string"?String:Number)(x)}var m=requireEndOfStream$1(),d=Symbol("lastResolve"),l=Symbol("lastReject"),a=Symbol("error"),o=Symbol("ended"),h=Symbol("lastPromise"),v=Symbol("handlePromise"),_=Symbol("stream");function y(x,j){return{value:x,done:j}}function w(x){var j=x[d];if(j!==null){var D=x[_].read();D!==null&&(x[h]=null,x[d]=null,x[l]=null,j(y(D,!1)))}}function T(x){e.nextTick(w,x)}function I(x,j){return function(D,k){x.then(function(){if(j[o]){D(y(void 0,!0));return}j[v](D,k)},k)}}var O=Object.getPrototypeOf(function(){}),E=Object.setPrototypeOf((t={get stream(){return this[_]},next:function(){var j=this,D=this[a];if(D!==null)return Promise.reject(D);if(this[o])return Promise.resolve(y(void 0,!0));if(this[_].destroyed)return new Promise(function($,W){e.nextTick(function(){j[a]?W(j[a]):$(y(void 0,!0))})});var k=this[h],q;if(k)q=new Promise(I(k,this));else{var G=this[_].read();if(G!==null)return Promise.resolve(y(G,!1));q=new Promise(this[v])}return this[h]=q,q}},s(t,Symbol.asyncIterator,function(){return this}),s(t,"return",function(){var j=this;return new Promise(function(D,k){j[_].destroy(null,function(q){if(q){k(q);return}D(y(void 0,!0))})})}),t),O),C=function(j){var D,k=Object.create(E,(D={},s(D,_,{value:j,writable:!0}),s(D,d,{value:null,writable:!0}),s(D,l,{value:null,writable:!0}),s(D,a,{value:null,writable:!0}),s(D,o,{value:j._readableState.endEmitted,writable:!0}),s(D,v,{value:function(G,$){var W=k[_].read();W?(k[h]=null,k[d]=null,k[l]=null,G(y(W,!1))):(k[d]=G,k[l]=$)},writable:!0}),D));return k[h]=null,m(j,function(q){if(q&&q.code!=="ERR_STREAM_PREMATURE_CLOSE"){var G=k[l];G!==null&&(k[h]=null,k[d]=null,k[l]=null,G(q)),k[a]=q;return}var $=k[d];$!==null&&(k[h]=null,k[d]=null,k[l]=null,$(y(void 0,!0))),k[o]=!0}),j.on("readable",T.bind(null,k)),k};return async_iterator=C,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1;var e={};_stream_readable=$;var t;$.ReadableState=G,require$$1$3.EventEmitter;var s=function(V,ne){return V.listeners(ne).length},p=requireStreamBrowser(),g=requireBuffer().Buffer,m=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function d(A){return g.from(A)}function l(A){return g.isBuffer(A)||A instanceof m}var a=require$$1$3,o;a&&a.debuglog?o=a.debuglog("stream"):o=function(){};var h=requireBuffer_list(),v=requireDestroy(),_=requireState(),y=_.getHighWaterMark,w=requireErrorsBrowser().codes,T=w.ERR_INVALID_ARG_TYPE,I=w.ERR_STREAM_PUSH_AFTER_EOF,O=w.ERR_METHOD_NOT_IMPLEMENTED,E=w.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,C,x,j;requireInherits_browser()($,p);var D=v.errorOrDestroy,k=["error","close","destroy","pause","resume"];function q(A,V,ne){if(typeof A.prependListener=="function")return A.prependListener(V,ne);!A._events||!A._events[V]?A.on(V,ne):Array.isArray(A._events[V])?A._events[V].unshift(ne):A._events[V]=[ne,A._events[V]]}function G(A,V,ne){t=t||require_stream_duplex(),A=A||{},typeof ne!="boolean"&&(ne=V instanceof t),this.objectMode=!!A.objectMode,ne&&(this.objectMode=this.objectMode||!!A.readableObjectMode),this.highWaterMark=y(this,A,"readableHighWaterMark",ne),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=A.emitClose!==!1,this.autoDestroy=!!A.autoDestroy,this.destroyed=!1,this.defaultEncoding=A.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,A.encoding&&(C||(C=requireString_decoder().StringDecoder),this.decoder=new C(A.encoding),this.encoding=A.encoding)}function $(A){if(t=t||require_stream_duplex(),!(this instanceof $))return new $(A);var V=this instanceof t;this._readableState=new G(A,this,V),this.readable=!0,A&&(typeof A.read=="function"&&(this._read=A.read),typeof A.destroy=="function"&&(this._destroy=A.destroy)),p.call(this)}Object.defineProperty($.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(V){this._readableState&&(this._readableState.destroyed=V)}}),$.prototype.destroy=v.destroy,$.prototype._undestroy=v.undestroy,$.prototype._destroy=function(A,V){V(A)},$.prototype.push=function(A,V){var ne=this._readableState,ce;return ne.objectMode?ce=!0:typeof A=="string"&&(V=V||ne.defaultEncoding,V!==ne.encoding&&(A=g.from(A,V),V=""),ce=!0),W(this,A,V,!1,ce)},$.prototype.unshift=function(A){return W(this,A,null,!0,!1)};function W(A,V,ne,ce,ie){o("readableAddChunk",V);var u=A._readableState;if(V===null)u.reading=!1,ae(A,u);else{var P;if(ie||(P=z(u,V)),P)D(A,P);else if(u.objectMode||V&&V.length>0)if(typeof V!="string"&&!u.objectMode&&Object.getPrototypeOf(V)!==g.prototype&&(V=d(V)),ce)u.endEmitted?D(A,new E):K(A,u,V,!0);else if(u.ended)D(A,new I);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!ne?(V=u.decoder.write(V),u.objectMode||V.length!==0?K(A,u,V,!1):oe(A,u)):K(A,u,V,!1)}else ce||(u.reading=!1,oe(A,u))}return!u.ended&&(u.length<u.highWaterMark||u.length===0)}function K(A,V,ne,ce){V.flowing&&V.length===0&&!V.sync?(V.awaitDrain=0,A.emit("data",ne)):(V.length+=V.objectMode?1:ne.length,ce?V.buffer.unshift(ne):V.buffer.push(ne),V.needReadable&&ue(A)),oe(A,V)}function z(A,V){var ne;return!l(V)&&typeof V!="string"&&V!==void 0&&!A.objectMode&&(ne=new T("chunk",["string","Buffer","Uint8Array"],V)),ne}$.prototype.isPaused=function(){return this._readableState.flowing===!1},$.prototype.setEncoding=function(A){C||(C=requireString_decoder().StringDecoder);var V=new C(A);this._readableState.decoder=V,this._readableState.encoding=this._readableState.decoder.encoding;for(var ne=this._readableState.buffer.head,ce="";ne!==null;)ce+=V.write(ne.data),ne=ne.next;return this._readableState.buffer.clear(),ce!==""&&this._readableState.buffer.push(ce),this._readableState.length=ce.length,this};var Q=1073741824;function Y(A){return A>=Q?A=Q:(A--,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A++),A}function te(A,V){return A<=0||V.length===0&&V.ended?0:V.objectMode?1:A!==A?V.flowing&&V.length?V.buffer.head.data.length:V.length:(A>V.highWaterMark&&(V.highWaterMark=Y(A)),A<=V.length?A:V.ended?V.length:(V.needReadable=!0,0))}$.prototype.read=function(A){o("read",A),A=parseInt(A,10);var V=this._readableState,ne=A;if(A!==0&&(V.emittedReadable=!1),A===0&&V.needReadable&&((V.highWaterMark!==0?V.length>=V.highWaterMark:V.length>0)||V.ended))return o("read: emitReadable",V.length,V.ended),V.length===0&&V.ended?J(this):ue(this),null;if(A=te(A,V),A===0&&V.ended)return V.length===0&&J(this),null;var ce=V.needReadable;o("need readable",ce),(V.length===0||V.length-A<V.highWaterMark)&&(ce=!0,o("length less than watermark",ce)),V.ended||V.reading?(ce=!1,o("reading or ended",ce)):ce&&(o("do read"),V.reading=!0,V.sync=!0,V.length===0&&(V.needReadable=!0),this._read(V.highWaterMark),V.sync=!1,V.reading||(A=te(ne,V)));var ie;return A>0?ie=ge(A,V):ie=null,ie===null?(V.needReadable=V.length<=V.highWaterMark,A=0):(V.length-=A,V.awaitDrain=0),V.length===0&&(V.ended||(V.needReadable=!0),ne!==A&&V.ended&&J(this)),ie!==null&&this.emit("data",ie),ie};function ae(A,V){if(o("onEofChunk"),!V.ended){if(V.decoder){var ne=V.decoder.end();ne&&ne.length&&(V.buffer.push(ne),V.length+=V.objectMode?1:ne.length)}V.ended=!0,V.sync?ue(A):(V.needReadable=!1,V.emittedReadable||(V.emittedReadable=!0,ee(A)))}}function ue(A){var V=A._readableState;o("emitReadable",V.needReadable,V.emittedReadable),V.needReadable=!1,V.emittedReadable||(o("emitReadable",V.flowing),V.emittedReadable=!0,e.nextTick(ee,A))}function ee(A){var V=A._readableState;o("emitReadable_",V.destroyed,V.length,V.ended),!V.destroyed&&(V.length||V.ended)&&(A.emit("readable"),V.emittedReadable=!1),V.needReadable=!V.flowing&&!V.ended&&V.length<=V.highWaterMark,Oe(A)}function oe(A,V){V.readingMore||(V.readingMore=!0,e.nextTick(de,A,V))}function de(A,V){for(;!V.reading&&!V.ended&&(V.length<V.highWaterMark||V.flowing&&V.length===0);){var ne=V.length;if(o("maybeReadMore read 0"),A.read(0),ne===V.length)break}V.readingMore=!1}$.prototype._read=function(A){D(this,new O("_read()"))},$.prototype.pipe=function(A,V){var ne=this,ce=this._readableState;switch(ce.pipesCount){case 0:ce.pipes=A;break;case 1:ce.pipes=[ce.pipes,A];break;default:ce.pipes.push(A);break}ce.pipesCount+=1,o("pipe count=%d opts=%j",ce.pipesCount,V);var ie=(!V||V.end!==!1)&&A!==e.stdout&&A!==e.stderr,u=ie?M:ke;ce.endEmitted?e.nextTick(u):ne.once("end",u),A.on("unpipe",P);function P(ze,nt){o("onunpipe"),ze===ne&&nt&&nt.hasUnpiped===!1&&(nt.hasUnpiped=!0,U())}function M(){o("onend"),A.end()}var n=he(ne);A.on("drain",n);var L=!1;function U(){o("cleanup"),A.removeListener("close",Ie),A.removeListener("finish",Le),A.removeListener("drain",n),A.removeListener("error",me),A.removeListener("unpipe",P),ne.removeListener("end",M),ne.removeListener("end",ke),ne.removeListener("data",X),L=!0,ce.awaitDrain&&(!A._writableState||A._writableState.needDrain)&&n()}ne.on("data",X);function X(ze){o("ondata");var nt=A.write(ze);o("dest.write",nt),nt===!1&&((ce.pipesCount===1&&ce.pipes===A||ce.pipesCount>1&&N(ce.pipes,A)!==-1)&&!L&&(o("false write response, pause",ce.awaitDrain),ce.awaitDrain++),ne.pause())}function me(ze){o("onerror",ze),ke(),A.removeListener("error",me),s(A,"error")===0&&D(A,ze)}q(A,"error",me);function Ie(){A.removeListener("finish",Le),ke()}A.once("close",Ie);function Le(){o("onfinish"),A.removeListener("close",Ie),ke()}A.once("finish",Le);function ke(){o("unpipe"),ne.unpipe(A)}return A.emit("pipe",ne),ce.flowing||(o("pipe resume"),ne.resume()),A};function he(A){return function(){var ne=A._readableState;o("pipeOnDrain",ne.awaitDrain),ne.awaitDrain&&ne.awaitDrain--,ne.awaitDrain===0&&s(A,"data")&&(ne.flowing=!0,Oe(A))}}$.prototype.unpipe=function(A){var V=this._readableState,ne={hasUnpiped:!1};if(V.pipesCount===0)return this;if(V.pipesCount===1)return A&&A!==V.pipes?this:(A||(A=V.pipes),V.pipes=null,V.pipesCount=0,V.flowing=!1,A&&A.emit("unpipe",this,ne),this);if(!A){var ce=V.pipes,ie=V.pipesCount;V.pipes=null,V.pipesCount=0,V.flowing=!1;for(var u=0;u<ie;u++)ce[u].emit("unpipe",this,{hasUnpiped:!1});return this}var P=N(V.pipes,A);return P===-1?this:(V.pipes.splice(P,1),V.pipesCount-=1,V.pipesCount===1&&(V.pipes=V.pipes[0]),A.emit("unpipe",this,ne),this)},$.prototype.on=function(A,V){var ne=p.prototype.on.call(this,A,V),ce=this._readableState;return A==="data"?(ce.readableListening=this.listenerCount("readable")>0,ce.flowing!==!1&&this.resume()):A==="readable"&&!ce.endEmitted&&!ce.readableListening&&(ce.readableListening=ce.needReadable=!0,ce.flowing=!1,ce.emittedReadable=!1,o("on readable",ce.length,ce.reading),ce.length?ue(this):ce.reading||e.nextTick(fe,this)),ne},$.prototype.addListener=$.prototype.on,$.prototype.removeListener=function(A,V){var ne=p.prototype.removeListener.call(this,A,V);return A==="readable"&&e.nextTick(Ee,this),ne},$.prototype.removeAllListeners=function(A){var V=p.prototype.removeAllListeners.apply(this,arguments);return(A==="readable"||A===void 0)&&e.nextTick(Ee,this),V};function Ee(A){var V=A._readableState;V.readableListening=A.listenerCount("readable")>0,V.resumeScheduled&&!V.paused?V.flowing=!0:A.listenerCount("data")>0&&A.resume()}function fe(A){o("readable nexttick read 0"),A.read(0)}$.prototype.resume=function(){var A=this._readableState;return A.flowing||(o("resume"),A.flowing=!A.readableListening,Se(this,A)),A.paused=!1,this};function Se(A,V){V.resumeScheduled||(V.resumeScheduled=!0,e.nextTick(be,A,V))}function be(A,V){o("resume",V.reading),V.reading||A.read(0),V.resumeScheduled=!1,A.emit("resume"),Oe(A),V.flowing&&!V.reading&&A.read(0)}$.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Oe(A){var V=A._readableState;for(o("flow",V.flowing);V.flowing&&A.read()!==null;);}$.prototype.wrap=function(A){var V=this,ne=this._readableState,ce=!1;A.on("end",function(){if(o("wrapped end"),ne.decoder&&!ne.ended){var P=ne.decoder.end();P&&P.length&&V.push(P)}V.push(null)}),A.on("data",function(P){if(o("wrapped data"),ne.decoder&&(P=ne.decoder.write(P)),!(ne.objectMode&&P==null)&&!(!ne.objectMode&&(!P||!P.length))){var M=V.push(P);M||(ce=!0,A.pause())}});for(var ie in A)this[ie]===void 0&&typeof A[ie]=="function"&&(this[ie]=(function(M){return function(){return A[M].apply(A,arguments)}})(ie));for(var u=0;u<k.length;u++)A.on(k[u],this.emit.bind(this,k[u]));return this._read=function(P){o("wrapped _read",P),ce&&(ce=!1,A.resume())},this},typeof Symbol=="function"&&($.prototype[Symbol.asyncIterator]=function(){return x===void 0&&(x=requireAsync_iterator()),x(this)}),Object.defineProperty($.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty($.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty($.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(V){this._readableState&&(this._readableState.flowing=V)}}),$._fromList=ge,Object.defineProperty($.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function ge(A,V){if(V.length===0)return null;var ne;return V.objectMode?ne=V.buffer.shift():!A||A>=V.length?(V.decoder?ne=V.buffer.join(""):V.buffer.length===1?ne=V.buffer.first():ne=V.buffer.concat(V.length),V.buffer.clear()):ne=V.buffer.consume(A,V.decoder),ne}function J(A){var V=A._readableState;o("endReadable",V.endEmitted),V.endEmitted||(V.ended=!0,e.nextTick(c,V,A))}function c(A,V){if(o("endReadableNT",A.endEmitted,A.length),!A.endEmitted&&A.length===0&&(A.endEmitted=!0,V.readable=!1,V.emit("end"),A.autoDestroy)){var ne=V._writableState;(!ne||ne.autoDestroy&&ne.finished)&&V.destroy()}}typeof Symbol=="function"&&($.from=function(A,V){return j===void 0&&(j=requireFromBrowser()),j($,A,V)});function N(A,V){for(var ne=0,ce=A.length;ne<ce;ne++)if(A[ne]===V)return ne;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=l;var e=requireErrorsBrowser().codes,t=e.ERR_METHOD_NOT_IMPLEMENTED,s=e.ERR_MULTIPLE_CALLBACK,p=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,g=e.ERR_TRANSFORM_WITH_LENGTH_0,m=require_stream_duplex();requireInherits_browser()(l,m);function d(h,v){var _=this._transformState;_.transforming=!1;var y=_.writecb;if(y===null)return this.emit("error",new s);_.writechunk=null,_.writecb=null,v!=null&&this.push(v),y(h);var w=this._readableState;w.reading=!1,(w.needReadable||w.length<w.highWaterMark)&&this._read(w.highWaterMark)}function l(h){if(!(this instanceof l))return new l(h);m.call(this,h),this._transformState={afterTransform:d.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,h&&(typeof h.transform=="function"&&(this._transform=h.transform),typeof h.flush=="function"&&(this._flush=h.flush)),this.on("prefinish",a)}function a(){var h=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(v,_){o(h,v,_)}):o(this,null,null)}l.prototype.push=function(h,v){return this._transformState.needTransform=!1,m.prototype.push.call(this,h,v)},l.prototype._transform=function(h,v,_){_(new t("_transform()"))},l.prototype._write=function(h,v,_){var y=this._transformState;if(y.writecb=_,y.writechunk=h,y.writeencoding=v,!y.transforming){var w=this._readableState;(y.needTransform||w.needReadable||w.length<w.highWaterMark)&&this._read(w.highWaterMark)}},l.prototype._read=function(h){var v=this._transformState;v.writechunk!==null&&!v.transforming?(v.transforming=!0,this._transform(v.writechunk,v.writeencoding,v.afterTransform)):v.needTransform=!0},l.prototype._destroy=function(h,v){m.prototype._destroy.call(this,h,function(_){v(_)})};function o(h,v,_){if(v)return h.emit("error",v);if(_!=null&&h.push(_),h._writableState.length)throw new g;if(h._transformState.transforming)throw new p;return h.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=t;var e=require_stream_transform();requireInherits_browser()(t,e);function t(s){if(!(this instanceof t))return new t(s);e.call(this,s)}return t.prototype._transform=function(s,p,g){g(null,s)},_stream_passthrough}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var e;function t(_){var y=!1;return function(){y||(y=!0,_.apply(void 0,arguments))}}var s=requireErrorsBrowser().codes,p=s.ERR_MISSING_ARGS,g=s.ERR_STREAM_DESTROYED;function m(_){if(_)throw _}function d(_){return _.setHeader&&typeof _.abort=="function"}function l(_,y,w,T){T=t(T);var I=!1;_.on("close",function(){I=!0}),e===void 0&&(e=requireEndOfStream$1()),e(_,{readable:y,writable:w},function(E){if(E)return T(E);I=!0,T()});var O=!1;return function(E){if(!I&&!O){if(O=!0,d(_))return _.abort();if(typeof _.destroy=="function")return _.destroy();T(E||new g("pipe"))}}}function a(_){_()}function o(_,y){return _.pipe(y)}function h(_){return!_.length||typeof _[_.length-1]!="function"?m:_.pop()}function v(){for(var _=arguments.length,y=new Array(_),w=0;w<_;w++)y[w]=arguments[w];var T=h(y);if(Array.isArray(y[0])&&(y=y[0]),y.length<2)throw new p("streams");var I,O=y.map(function(E,C){var x=C<y.length-1,j=C>0;return l(E,x,j,function(D){I||(I=D),D&&O.forEach(a),!x&&(O.forEach(a),T(I))})});return y.reduce(o)}return pipeline_1=v,pipeline_1}var hasRequiredReadableBrowser;function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,(function(e,t){t=e.exports=require_stream_readable(),t.Stream=t,t.Readable=t,t.Writable=require_stream_writable(),t.Duplex=require_stream_duplex(),t.Transform=require_stream_transform(),t.PassThrough=require_stream_passthrough(),t.finished=requireEndOfStream$1(),t.pipeline=requirePipeline()})(readableBrowser,readableBrowser.exports)),readableBrowser.exports}var once={exports:{}},wrappy_1,hasRequiredWrappy;function requireWrappy(){if(hasRequiredWrappy)return wrappy_1;hasRequiredWrappy=1,wrappy_1=e;function e(t,s){if(t&&s)return e(t)(s);if(typeof t!="function")throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(g){p[g]=t[g]}),p;function p(){for(var g=new Array(arguments.length),m=0;m<g.length;m++)g[m]=arguments[m];var d=t.apply(this,g),l=g[g.length-1];return typeof d=="function"&&d!==l&&Object.keys(l).forEach(function(a){d[a]=l[a]}),d}}return wrappy_1}var hasRequiredOnce;function requireOnce(){if(hasRequiredOnce)return once.exports;hasRequiredOnce=1;var e=requireWrappy();once.exports=e(t),once.exports.strict=e(s),t.proto=t(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return t(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return s(this)},configurable:!0})});function t(p){var g=function(){return g.called?g.value:(g.called=!0,g.value=p.apply(this,arguments))};return g.called=!1,g}function s(p){var g=function(){if(g.called)throw new Error(g.onceError);return g.called=!0,g.value=p.apply(this,arguments)},m=p.name||"Function wrapped with `once`";return g.onceError=m+" shouldn't be called more than once",g.called=!1,g}return once.exports}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var e={},t=requireOnce(),s=function(){},p=commonjsGlobal.Bare?queueMicrotask:e.nextTick.bind(e),g=function(l){return l.setHeader&&typeof l.abort=="function"},m=function(l){return l.stdio&&Array.isArray(l.stdio)&&l.stdio.length===3},d=function(l,a,o){if(typeof a=="function")return d(l,null,a);a||(a={}),o=t(o||s);var h=l._writableState,v=l._readableState,_=a.readable||a.readable!==!1&&l.readable,y=a.writable||a.writable!==!1&&l.writable,w=!1,T=function(){l.writable||I()},I=function(){y=!1,_||o.call(l)},O=function(){_=!1,y||o.call(l)},E=function(k){o.call(l,k?new Error("exited with error code: "+k):null)},C=function(k){o.call(l,k)},x=function(){p(j)},j=function(){if(!w){if(_&&!(v&&v.ended&&!v.destroyed))return o.call(l,new Error("premature close"));if(y&&!(h&&h.ended&&!h.destroyed))return o.call(l,new Error("premature close"))}},D=function(){l.req.on("finish",I)};return g(l)?(l.on("complete",I),l.on("abort",x),l.req?D():l.on("request",D)):y&&!h&&(l.on("end",T),l.on("close",T)),m(l)&&l.on("exit",E),l.on("end",O),l.on("finish",I),a.error!==!1&&l.on("error",C),l.on("close",x),function(){w=!0,l.removeListener("complete",I),l.removeListener("abort",x),l.removeListener("request",D),l.req&&l.req.removeListener("finish",I),l.removeListener("end",T),l.removeListener("close",T),l.removeListener("finish",I),l.removeListener("exit",E),l.removeListener("end",O),l.removeListener("error",C),l.removeListener("close",x)}};return endOfStream=d,endOfStream}var streamShift,hasRequiredStreamShift;function requireStreamShift(){if(hasRequiredStreamShift)return streamShift;hasRequiredStreamShift=1,streamShift=e;function e(s){var p=s._readableState;return p?p.objectMode||typeof s._duplexState=="number"?s.read():s.read(t(p)):null}function t(s){if(s.buffer.length){var p=s.bufferIndex||0;if(s.buffer.head)return s.buffer.head.data.length;if(s.buffer.length-p>0&&s.buffer[p])return s.buffer[p].length}return s.length}return streamShift}var duplexify,hasRequiredDuplexify;function requireDuplexify(){if(hasRequiredDuplexify)return duplexify;hasRequiredDuplexify=1;var e={},t=requireReadableBrowser(),s=requireEndOfStream(),p=requireInherits_browser(),g=requireStreamShift(),m=Buffer.from&&Buffer.from!==Uint8Array.from?Buffer.from([0]):new Buffer([0]),d=function(y,w){y._corked?y.once("uncork",w):w()},l=function(y,w){y._autoDestroy&&y.destroy(w)},a=function(y,w){return function(T){T?l(y,T.message==="premature close"?null:T):w&&!y._ended&&y.end()}},o=function(y,w){if(!y||y._writableState&&y._writableState.finished)return w();if(y._writableState)return y.end(w);y.end(),w()},h=function(){},v=function(y){return new t.Readable({objectMode:!0,highWaterMark:16}).wrap(y)},_=function(y,w,T){if(!(this instanceof _))return new _(y,w,T);t.Duplex.call(this,T),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!T||T.autoDestroy!==!1,this._forwardDestroy=!T||T.destroy!==!1,this._forwardEnd=!T||T.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,y&&this.setWritable(y),w&&this.setReadable(w)};return p(_,t.Duplex),_.obj=function(y,w,T){return T||(T={}),T.objectMode=!0,T.highWaterMark=16,new _(y,w,T)},_.prototype.cork=function(){++this._corked===1&&this.emit("cork")},_.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")},_.prototype.setWritable=function(y){if(this._unwrite&&this._unwrite(),this.destroyed){y&&y.destroy&&y.destroy();return}if(y===null||y===!1){this.end();return}var w=this,T=s(y,{writable:!0,readable:!1},a(this,this._forwardEnd)),I=function(){var E=w._ondrain;w._ondrain=null,E&&E()},O=function(){w._writable.removeListener("drain",I),T()};this._unwrite&&e.nextTick(I),this._writable=y,this._writable.on("drain",I),this._unwrite=O,this.uncork()},_.prototype.setReadable=function(y){if(this._unread&&this._unread(),this.destroyed){y&&y.destroy&&y.destroy();return}if(y===null||y===!1){this.push(null),this.resume();return}var w=this,T=s(y,{writable:!1,readable:!0},a(this)),I=function(){w._forward()},O=function(){w.push(null)},E=function(){w._readable2.removeListener("readable",I),w._readable2.removeListener("end",O),T()};this._drained=!0,this._readable=y,this._readable2=y._readableState?y:v(y),this._readable2.on("readable",I),this._readable2.on("end",O),this._unread=E,this._forward()},_.prototype._read=function(){this._drained=!0,this._forward()},_.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var y;this._drained&&(y=g(this._readable2))!==null;)this.destroyed||(this._drained=this.push(y));this._forwarding=!1}},_.prototype.destroy=function(y,w){if(w||(w=h),this.destroyed)return w(null);this.destroyed=!0;var T=this;e.nextTick(function(){T._destroy(y),w(null)})},_.prototype._destroy=function(y){if(y){var w=this._ondrain;this._ondrain=null,w?w(y):this.emit("error",y)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},_.prototype._write=function(y,w,T){if(!this.destroyed){if(this._corked)return d(this,this._write.bind(this,y,w,T));if(y===m)return this._finish(T);if(!this._writable)return T();this._writable.write(y)===!1?this._ondrain=T:this.destroyed||T()}},_.prototype._finish=function(y){var w=this;this.emit("preend"),d(this,function(){o(w._forwardEnd&&w._writable,function(){w._writableState.prefinished===!1&&(w._writableState.prefinished=!0),w.emit("prefinish"),d(w,y)})})},_.prototype.end=function(y,w,T){return typeof y=="function"?this.end(null,null,y):typeof w=="function"?this.end(y,null,w):(this._ended=!0,y&&this.write(y),!this._writableState.ending&&!this._writableState.destroyed&&this.write(m),t.Writable.prototype.end.call(this,T))},duplexify=_,duplexify}var hasRequiredUtil$5;function requireUtil$5(){return hasRequiredUtil$5||(hasRequiredUtil$5=1,(function(e){var t=util$6&&util$6.__createBinding||(Object.create?(function(G,$,W,K){K===void 0&&(K=W);var z=Object.getOwnPropertyDescriptor($,W);(!z||("get"in z?!$.__esModule:z.writable||z.configurable))&&(z={enumerable:!0,get:function(){return $[W]}}),Object.defineProperty(G,K,z)}):(function(G,$,W,K){K===void 0&&(K=W),G[K]=$[W]})),s=util$6&&util$6.__setModuleDefault||(Object.create?(function(G,$){Object.defineProperty(G,"default",{enumerable:!0,value:$})}):function(G,$){G.default=$}),p=util$6&&util$6.__importStar||(function(){var G=function($){return G=Object.getOwnPropertyNames||function(W){var K=[];for(var z in W)Object.prototype.hasOwnProperty.call(W,z)&&(K[K.length]=z);return K},G($)};return function($){if($&&$.__esModule)return $;var W={};if($!=null)for(var K=G($),z=0;z<K.length;z++)K[z]!=="default"&&t(W,$,K[z]);return s(W,$),W}})(),g=util$6&&util$6.__importDefault||function(G){return G&&G.__esModule?G:{default:G}};Object.defineProperty(e,"__esModule",{value:!0}),e.util=e.Util=e.PartialFailureError=e.ApiError=e.GCCL_GCS_CMD_KEY=void 0;const m=requireSrc$9(),d=p(requireCommonjs()),l=requireSrc$b(),a=g(requireRetryRequest()),o=require$$1$3,h=requireSrc$6(),v=p(require$$6$1),_=requireService$2(),y=requireUtil$6(),w=g(requireDuplexify()),I=(0,requirePackageJsonHelper().getPackageJSON)();e.GCCL_GCS_CMD_KEY=Symbol.for("GCCL_GCS_CMD");const O={timeout:6e4,gzip:!0,forever:!0,pool:{maxSockets:1/0}},E=!0,C=3;class x extends Error{constructor($){if(super(),typeof $!="object"){this.message=$||"";return}const W=$;this.code=W.code,this.errors=W.errors,this.response=W.response;try{this.errors=JSON.parse(this.response.body).error.errors}catch{this.errors=W.errors}this.message=x.createMultiErrorMessage(W,this.errors),Error.captureStackTrace(this)}static createMultiErrorMessage($,W){const K=new Set;$.message&&K.add($.message),W&&W.length?W.forEach(({message:Q})=>K.add(Q)):$.response&&$.response.body?K.add(d.decode($.response.body.toString())):$.message||K.add("A failure occurred during this request.");let z=Array.from(K);return z.length>1&&(z=z.map((Q,Y)=>`    ${Y+1}. ${Q}`),z.unshift("Multiple errors occurred during the request. Please see the `errors` array for complete details.\n"),z.push(`
`)),z.join(`
`)}}e.ApiError=x;class j extends Error{constructor($){super();const W=$;this.errors=W.errors,this.name="PartialFailureError",this.response=W.response,this.message=x.createMultiErrorMessage(W,this.errors)}}e.PartialFailureError=j;class D{constructor(){this.ApiError=x,this.PartialFailureError=j}noop(){}handleResp($,W,K,z){z=z||q.noop;const Q={err:$||null,...W&&q.parseHttpRespMessage(W),...K&&q.parseHttpRespBody(K)};!Q.err&&W&&typeof Q.body=="object"&&(Q.resp.body=Q.body),Q.err&&W&&(Q.err.response=W),z(Q.err,Q.body,Q.resp)}parseHttpRespMessage($){const W={resp:$};return($.statusCode<200||$.statusCode>299)&&(W.err=new x({errors:new Array,code:$.statusCode,message:$.statusMessage,response:$})),W}parseHttpRespBody($){const W={body:$};if(typeof $=="string")try{W.body=JSON.parse($)}catch{W.body=$}return W.body&&W.body.error&&(W.err=new x(W.body.error)),W}makeWritableStream($,W,K){var z;K=K||q.noop;const Q=new k;Q.on("progress",ue=>$.emit("progress",ue)),$.setWritable(Q);const Y={method:"POST",qs:{uploadType:"multipart"},timeout:0,maxRetries:0},te=W.metadata||{},ae={...Y,...W.request,qs:{...Y.qs,...(z=W.request)===null||z===void 0?void 0:z.qs},multipart:[{"Content-Type":"application/json",body:JSON.stringify(te)},{"Content-Type":te.contentType||"application/octet-stream",body:Q}]};W.makeAuthenticatedRequest(ae,{onAuthenticated(ue,ee){if(ue){$.destroy(ue);return}O.headers=q._getDefaultHeaders(ae[e.GCCL_GCS_CMD_KEY]),h.teenyRequest.defaults(O)(ee,(de,he,Ee)=>{q.handleResp(de,he,Ee,(fe,Se)=>{if(fe){$.destroy(fe);return}$.emit("response",he),K(Se)})})}})}shouldRetryRequest($){if($){if([408,429,500,502,503,504].indexOf($.code)!==-1)return!0;if($.errors)for(const W of $.errors){const K=W.reason;if(K==="rateLimitExceeded"||K==="userRateLimitExceeded"||K&&K.includes("EAI_AGAIN"))return!0}}return!1}makeAuthenticatedRequestFactory($){const W={...$};W.projectId===_.DEFAULT_PROJECT_ID_TOKEN&&delete W.projectId;let K;W.authClient instanceof l.GoogleAuth?K=W.authClient:K=new l.GoogleAuth({...W,authClient:W.authClient,clientOptions:W.clientOptions});function z(Y,te){let ae,ue;const ee={...$};let oe;te||(ae=(0,w.default)(),ee.stream=ae);const de=typeof te=="object"?te:void 0,he=typeof te=="function"?te:void 0;async function Ee(){ue=await K.getProjectId()}const fe=async(be,Oe)=>{const ge=be,J=be&&typeof be.message=="string"&&be.message.indexOf("Could not load the default credentials")>-1;if(J&&(Oe=Y),!be||J)try{Oe=q.decorateRequest(Oe,ue),be=null}catch(c){if(c instanceof m.MissingProjectIdError)try{await Ee(),Oe=q.decorateRequest(Oe,ue),be=null}catch(N){be=be||N}else be=be||c}if(be){ae?ae.destroy(be):(de&&de.onAuthenticated?de.onAuthenticated:he)(be);return}de&&de.onAuthenticated?de.onAuthenticated(null,Oe):oe=q.makeRequest(Oe,ee,(c,...N)=>{c&&c.code===401&&ge&&(c=ge),he(c,...N)})};return(async()=>{try{const be=async()=>$.projectId&&$.projectId!==_.DEFAULT_PROJECT_ID_TOKEN?$.projectId:$.projectIdRequired===!1?_.DEFAULT_PROJECT_ID_TOKEN:Ee(),Oe=async()=>ee.customEndpoint&&!ee.useAuthWithCustomEndpoint?Y:K.authorizeRequest(Y),[ge,J]=await Promise.all([be(),Oe()]);return ge&&(ue=ge),fe(null,J)}catch(be){return fe(be)}})(),ae||{abort(){setImmediate(()=>{oe&&(oe.abort(),oe=null)})}}}const Q=z;return Q.getCredentials=K.getCredentials.bind(K),Q.authClient=K,Q}makeRequest($,W,K){var z,Q,Y,te,ae;let ue=E;W.autoRetry!==void 0?ue=W.autoRetry:((z=W.retryOptions)===null||z===void 0?void 0:z.autoRetry)!==void 0&&(ue=W.retryOptions.autoRetry);let ee=C;W.maxRetries!==void 0?ee=W.maxRetries:((Q=W.retryOptions)===null||Q===void 0?void 0:Q.maxRetries)!==void 0&&(ee=W.retryOptions.maxRetries),O.headers=this._getDefaultHeaders($[e.GCCL_GCS_CMD_KEY]);const oe={request:h.teenyRequest.defaults(O),retries:ue!==!1?ee:0,noResponseRetries:ue!==!1?ee:0,shouldRetryFn(fe){var Se,be;const Oe=q.parseHttpRespMessage(fe).err;return!((Se=W.retryOptions)===null||Se===void 0)&&Se.retryableErrorFn?Oe&&((be=W.retryOptions)===null||be===void 0?void 0:be.retryableErrorFn(Oe)):Oe&&q.shouldRetryRequest(Oe)},maxRetryDelay:(Y=W.retryOptions)===null||Y===void 0?void 0:Y.maxRetryDelay,retryDelayMultiplier:(te=W.retryOptions)===null||te===void 0?void 0:te.retryDelayMultiplier,totalTimeout:(ae=W.retryOptions)===null||ae===void 0?void 0:ae.totalTimeout};if(typeof $.maxRetries=="number"&&(oe.retries=$.maxRetries,oe.noResponseRetries=$.maxRetries),!W.stream)return(0,a.default)($,oe,(fe,Se,be)=>{q.handleResp(fe,Se,be,K)});const de=W.stream;let he;return($.method||"GET").toUpperCase()==="GET"?(he=(0,a.default)($,oe),de.setReadable(he)):(he=oe.request($),de.setWritable(he)),he.on("error",de.destroy.bind(de)).on("response",de.emit.bind(de,"response")).on("complete",de.emit.bind(de,"complete")),de.abort=he.abort,de}decorateRequest($,W){return delete $.autoPaginate,delete $.autoPaginateVal,delete $.objectMode,$.qs!==null&&typeof $.qs=="object"&&(delete $.qs.autoPaginate,delete $.qs.autoPaginateVal,$.qs=(0,m.replaceProjectIdToken)($.qs,W)),Array.isArray($.multipart)&&($.multipart=$.multipart.map(K=>(0,m.replaceProjectIdToken)(K,W))),$.json!==null&&typeof $.json=="object"&&(delete $.json.autoPaginate,delete $.json.autoPaginateVal,$.json=(0,m.replaceProjectIdToken)($.json,W)),$.uri=(0,m.replaceProjectIdToken)($.uri,W),$}isCustomType($,W){function K(ae){return ae.constructor&&ae.constructor.name.toLowerCase()}const z=W.split("/"),Q=z[0]&&z[0].toLowerCase(),Y=z[1]&&z[1].toLowerCase();if(Y&&K($)!==Y)return!1;let te=$;for(;;){if(K(te)===Q)return!0;if(te=te.parent,!te)return!1}}maybeOptionsOrCallback($,W){return typeof $=="function"?[{},$]:[$,W]}_getDefaultHeaders($){const W={"User-Agent":(0,y.getUserAgentString)(),"x-goog-api-client":`${(0,y.getRuntimeTrackingString)()} gccl/${I.version}-${(0,y.getModuleFormat)()} gccl-invocation-id/${v.v4()}`};return $&&(W["x-goog-api-client"]+=` gccl-gcs-cmd/${$}`),W}}e.Util=D;class k extends o.Transform{constructor(){super(...arguments),this.bytesRead=0}_transform($,W,K){this.bytesRead+=$.length,this.emit("progress",{bytesWritten:this.bytesRead,contentLength:"*"}),this.push($),K()}}const q=new D;e.util=q})(util$6)),util$6}var hasRequiredService$2;function requireService$2(){return hasRequiredService$2||(hasRequiredService$2=1,(function(e){var t={},s=service$2&&service$2.__createBinding||(Object.create?(function(h,v,_,y){y===void 0&&(y=_);var w=Object.getOwnPropertyDescriptor(v,_);(!w||("get"in w?!v.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return v[_]}}),Object.defineProperty(h,y,w)}):(function(h,v,_,y){y===void 0&&(y=_),h[y]=v[_]})),p=service$2&&service$2.__setModuleDefault||(Object.create?(function(h,v){Object.defineProperty(h,"default",{enumerable:!0,value:v})}):function(h,v){h.default=v}),g=service$2&&service$2.__importStar||(function(){var h=function(v){return h=Object.getOwnPropertyNames||function(_){var y=[];for(var w in _)Object.prototype.hasOwnProperty.call(_,w)&&(y[y.length]=w);return y},h(v)};return function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var y=h(v),w=0;w<y.length;w++)y[w]!=="default"&&s(_,v,y[w]);return p(_,v),_}})();Object.defineProperty(e,"__esModule",{value:!0}),e.Service=e.DEFAULT_PROJECT_ID_TOKEN=void 0;const m=requireSrc$b(),d=g(require$$6$1),l=requireUtil$5(),a=requireUtil$6();e.DEFAULT_PROJECT_ID_TOKEN="{{projectId}}";class o{constructor(v,_={}){this.baseUrl=v.baseUrl,this.apiEndpoint=v.apiEndpoint,this.timeout=_.timeout,this.globalInterceptors=Array.isArray(_.interceptors_)?_.interceptors_:[],this.interceptors=[],this.packageJson=v.packageJson,this.projectId=_.projectId||e.DEFAULT_PROJECT_ID_TOKEN,this.projectIdRequired=v.projectIdRequired!==!1,this.providedUserAgent=_.userAgent,this.universeDomain=_.universeDomain||m.DEFAULT_UNIVERSE,this.customEndpoint=v.customEndpoint||!1,this.makeAuthenticatedRequest=l.util.makeAuthenticatedRequestFactory({...v,projectIdRequired:this.projectIdRequired,projectId:this.projectId,authClient:_.authClient||v.authClient,credentials:_.credentials,keyFile:_.keyFilename,email:_.email,clientOptions:{universeDomain:_.universeDomain,..._.clientOptions}}),this.authClient=this.makeAuthenticatedRequest.authClient,t.FUNCTION_NAME&&this.interceptors.push({request(w){return w.forever=!1,w}})}getRequestInterceptors(){return[].slice.call(this.globalInterceptors).concat(this.interceptors).filter(v=>typeof v.request=="function").map(v=>v.request)}getProjectId(v){if(!v)return this.getProjectIdAsync();this.getProjectIdAsync().then(_=>v(null,_),v)}async getProjectIdAsync(){const v=await this.authClient.getProjectId();return this.projectId===e.DEFAULT_PROJECT_ID_TOKEN&&v&&(this.projectId=v),this.projectId}request_(v,_){v={...v,timeout:this.timeout};const y=v.uri.indexOf("http")===0,w=[this.baseUrl];this.projectIdRequired&&(v.projectId?(w.push("projects"),w.push(v.projectId)):(w.push("projects"),w.push(this.projectId))),w.push(v.uri),y&&w.splice(0,w.indexOf(v.uri)),v.uri=w.map(C=>{const x=/^\/*|\/*$/g;return C.replace(x,"")}).join("/").replace(/\/:/g,":");const T=this.getRequestInterceptors();(Array.isArray(v.interceptors_)?v.interceptors_:[]).forEach(C=>{typeof C.request=="function"&&T.push(C.request)}),T.forEach(C=>{v=C(v)}),delete v.interceptors_;const O=this.packageJson;let E=(0,a.getUserAgentString)();if(this.providedUserAgent&&(E=`${this.providedUserAgent} ${E}`),v.headers={...v.headers,"User-Agent":E,"x-goog-api-client":`${(0,a.getRuntimeTrackingString)()} gccl/${O.version}-${(0,a.getModuleFormat)()} gccl-invocation-id/${d.v4()}`},v[l.GCCL_GCS_CMD_KEY]&&(v.headers["x-goog-api-client"]+=` gccl-gcs-cmd/${v[l.GCCL_GCS_CMD_KEY]}`),v.shouldReturnStream)return this.makeAuthenticatedRequest(v);this.makeAuthenticatedRequest(v,_)}request(v,_){o.prototype.request_.call(this,v,_)}requestStream(v){const _={...v,shouldReturnStream:!0};return o.prototype.request_.call(this,_)}}e.Service=o})(service$2)),service$2}var serviceObject={},src$4={},hasRequiredSrc$5;function requireSrc$5(){return hasRequiredSrc$5||(hasRequiredSrc$5=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.callbackifyAll=e.callbackify=e.promisifyAll=e.promisify=void 0;function t(m,d){if(m.promisified_)return m;d=d||{};const l=Array.prototype.slice,a=function(){let o;for(o=arguments.length-1;o>=0;o--){const _=arguments[o];if(!(typeof _>"u")){if(typeof _!="function")break;return m.apply(this,arguments)}}const h=l.call(arguments,0,o+1);let v=Promise;return this&&this.Promise&&(v=this.Promise),new v((_,y)=>{h.push((...w)=>{const T=l.call(w),I=T.shift();if(I)return y(I);d.singular&&T.length===1?_(T[0]):_(T)}),m.apply(this,h)})};return a.promisified_=!0,a}e.promisify=t;function s(m,d){const l=d&&d.exclude||[];Object.getOwnPropertyNames(m.prototype).filter(h=>!l.includes(h)&&typeof m.prototype[h]=="function"&&!/(^_|(Stream|_)|promise$)|^constructor$/.test(h)).forEach(h=>{const v=m.prototype[h];v.promisified_||(m.prototype[h]=e.promisify(v,d))})}e.promisifyAll=s;function p(m){if(m.callbackified_)return m;const d=function(){if(typeof arguments[arguments.length-1]!="function")return m.apply(this,arguments);const l=Array.prototype.pop.call(arguments);m.apply(this,arguments).then(a=>{a=Array.isArray(a)?a:[a],l(null,...a)},a=>l(a))};return d.callbackified_=!0,d}e.callbackify=p;function g(m,d){const l=d&&d.exclude||[];Object.getOwnPropertyNames(m.prototype).filter(h=>!l.includes(h)&&typeof m.prototype[h]=="function"&&!/^_|(Stream|_)|^constructor$/.test(h)).forEach(h=>{const v=m.prototype[h];v.callbackified_||(m.prototype[h]=e.callbackify(v))})}e.callbackifyAll=g})(src$4)),src$4}var hasRequiredServiceObject;function requireServiceObject(){if(hasRequiredServiceObject)return serviceObject;hasRequiredServiceObject=1,Object.defineProperty(serviceObject,"__esModule",{value:!0}),serviceObject.ServiceObject=void 0;const e=requireSrc$5(),t=require$$1$3,s=requireUtil$5();class p extends t.EventEmitter{constructor(m){super(),this.metadata={},this.baseUrl=m.baseUrl,this.parent=m.parent,this.id=m.id,this.createMethod=m.createMethod,this.methods=m.methods||{},this.interceptors=[],this.projectId=m.projectId,m.methods&&Object.getOwnPropertyNames(p.prototype).filter(d=>!/^request/.test(d)&&!/^getRequestInterceptors/.test(d)&&this[d]===p.prototype[d]&&!m.methods[d]).forEach(d=>{this[d]=void 0})}create(m,d){const l=this,a=[this.id];typeof m=="function"&&(d=m),typeof m=="object"&&a.push(m);function o(...h){const[v,_]=h;v||(l.metadata=_.metadata,l.id&&_.metadata&&(l.id=_.metadata.id),h[1]=l),d(...h)}a.push(o),this.createMethod.apply(null,a)}delete(m,d){var l;const[a,o]=s.util.maybeOptionsOrCallback(m,d),h=a.ignoreNotFound;delete a.ignoreNotFound;const v=typeof this.methods.delete=="object"&&this.methods.delete||{},_={method:"DELETE",uri:"",...v.reqOpts,qs:{...(l=v.reqOpts)===null||l===void 0?void 0:l.qs,...a}};p.prototype.request.call(this,_,(y,w,T)=>{y&&y.code===404&&h&&(y=null),o(y,T)})}exists(m,d){const[l,a]=s.util.maybeOptionsOrCallback(m,d);this.get(l,o=>{if(o){o.code===404?a(null,!1):a(o);return}a(null,!0)})}get(m,d){const l=this,[a,o]=s.util.maybeOptionsOrCallback(m,d),h=Object.assign({},a),v=h.autoCreate&&typeof this.create=="function";delete h.autoCreate;function _(y,w,T){if(y){if(y.code===409){l.get(h,o);return}o(y,null,T);return}o(null,w,T)}this.getMetadata(h,(y,w)=>{if(y){if(y.code===404&&v){const T=[];Object.keys(h).length>0&&T.push(h),T.push(_),l.create(...T);return}o(y,null,w);return}o(null,l,w)})}getMetadata(m,d){var l;const[a,o]=s.util.maybeOptionsOrCallback(m,d),h=typeof this.methods.getMetadata=="object"&&this.methods.getMetadata||{},v={uri:"",...h.reqOpts,qs:{...(l=h.reqOpts)===null||l===void 0?void 0:l.qs,...a}};p.prototype.request.call(this,v,(_,y,w)=>{this.metadata=y,o(_,this.metadata,w)})}getRequestInterceptors(){const m=this.interceptors.filter(d=>typeof d.request=="function").map(d=>d.request);return this.parent.getRequestInterceptors().concat(m)}setMetadata(m,d,l){var a,o;const[h,v]=s.util.maybeOptionsOrCallback(d,l),_=typeof this.methods.setMetadata=="object"&&this.methods.setMetadata||{},y={method:"PATCH",uri:"",..._.reqOpts,json:{...(a=_.reqOpts)===null||a===void 0?void 0:a.json,...m},qs:{...(o=_.reqOpts)===null||o===void 0?void 0:o.qs,...h}};p.prototype.request.call(this,y,(w,T,I)=>{this.metadata=T,v(w,this.metadata,I)})}request_(m,d){m={...m},this.projectId&&(m.projectId=this.projectId);const l=m.uri.indexOf("http")===0,a=[this.baseUrl,this.id||"",m.uri];l&&a.splice(0,a.indexOf(m.uri)),m.uri=a.filter(v=>v.trim()).map(v=>{const _=/^\/*|\/*$/g;return v.replace(_,"")}).join("/");const o=Array.isArray(m.interceptors_)?m.interceptors_:[],h=[].slice.call(this.interceptors);if(m.interceptors_=o.concat(h),m.shouldReturnStream)return this.parent.requestStream(m);this.parent.request(m,d)}request(m,d){this.request_(m,d)}requestStream(m){const d={...m,shouldReturnStream:!0};return this.request_(d)}}return serviceObject.ServiceObject=p,(0,e.promisifyAll)(p,{exclude:["getRequestInterceptors"]}),serviceObject}var hasRequiredNodejsCommon;function requireNodejsCommon(){return hasRequiredNodejsCommon||(hasRequiredNodejsCommon=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.util=e.ApiError=e.ServiceObject=e.Service=void 0;var t=requireService$2();Object.defineProperty(e,"Service",{enumerable:!0,get:function(){return t.Service}});var s=requireServiceObject();Object.defineProperty(e,"ServiceObject",{enumerable:!0,get:function(){return s.ServiceObject}});var p=requireUtil$5();Object.defineProperty(e,"ApiError",{enumerable:!0,get:function(){return p.ApiError}}),Object.defineProperty(e,"util",{enumerable:!0,get:function(){return p.util}})})(nodejsCommon)),nodejsCommon}var storage$1={},src$3={},arrify_1,hasRequiredArrify;function requireArrify(){return hasRequiredArrify||(hasRequiredArrify=1,arrify_1=t=>t==null?[]:Array.isArray(t)?t:typeof t=="string"?[t]:typeof t[Symbol.iterator]=="function"?[...t]:[t]),arrify_1}var resourceStream={},hasRequiredResourceStream;function requireResourceStream(){if(hasRequiredResourceStream)return resourceStream;hasRequiredResourceStream=1;Object.defineProperty(resourceStream,"__esModule",{value:!0}),resourceStream.ResourceStream=void 0;const e=require$$1$3;class t extends e.Transform{constructor(p,g){const m=Object.assign({objectMode:!0},p.streamOptions);super(m),this._ended=!1,this._maxApiCalls=p.maxApiCalls===-1?1/0:p.maxApiCalls,this._nextQuery=p.query,this._reading=!1,this._requestFn=g,this._requestsMade=0,this._resultsToSend=p.maxResults===-1?1/0:p.maxResults,this._otherArgs=[]}end(...p){return this._ended=!0,super.end(...p)}_read(){if(!this._reading){this._reading=!0;try{this._requestFn(this._nextQuery,(p,g,m,...d)=>{if(p){this.destroy(p);return}this._otherArgs=d,this._nextQuery=m,this._resultsToSend!==1/0&&(g=g.splice(0,this._resultsToSend),this._resultsToSend-=g.length);let l=!0;for(const h of g){if(this._ended)break;l=this.push(h)}const a=!this._nextQuery||this._resultsToSend<1,o=++this._requestsMade>=this._maxApiCalls;(a||o)&&this.end(),l&&!this._ended&&setImmediate(()=>this._read()),this._reading=!1})}catch(p){this.destroy(p)}}}}return resourceStream.ResourceStream=t,resourceStream}var hasRequiredSrc$4;function requireSrc$4(){return hasRequiredSrc$4||(hasRequiredSrc$4=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ResourceStream=e.paginator=e.Paginator=void 0;const t=requireArrify(),s=requireExtend(),p=requireResourceStream();Object.defineProperty(e,"ResourceStream",{enumerable:!0,get:function(){return p.ResourceStream}});class g{extend(l,a){a=t(a),a.forEach(o=>{const h=l.prototype[o];l.prototype[o+"_"]=h,l.prototype[o]=function(...v){const _=m.parseArguments_(v);return m.run_(_,h.bind(this))}})}streamify(l){return function(...a){const o=m.parseArguments_(a),h=this[l+"_"]||this[l];return m.runAsStream_(o,h.bind(this))}}parseArguments_(l){let a,o=!0,h=-1,v=-1,_;const y=l[0],w=l[l.length-1];typeof y=="function"?_=y:a=y,typeof w=="function"&&(_=w),typeof a=="object"&&(a=s(!0,{},a),a.maxResults&&typeof a.maxResults=="number"?v=a.maxResults:typeof a.pageSize=="number"&&(v=a.pageSize),a.maxApiCalls&&typeof a.maxApiCalls=="number"&&(h=a.maxApiCalls,delete a.maxApiCalls),(v!==-1||a.autoPaginate===!1)&&(o=!1));const T={query:a||{},autoPaginate:o,maxApiCalls:h,maxResults:v,callback:_};return T.streamOptions=s(!0,{},T.query),delete T.streamOptions.autoPaginate,delete T.streamOptions.maxResults,delete T.streamOptions.pageSize,T}run_(l,a){const o=l.query,h=l.callback;if(!l.autoPaginate)return a(o,h);const v=new Array;let _=[];const y=new Promise((w,T)=>{const I=m.runAsStream_(l,a);I.on("error",T).on("data",O=>v.push(O)).on("end",()=>{_=I._otherArgs||[],w(v)})});if(!h)return y.then(w=>[w,o,..._]);y.then(w=>h(null,w,o,..._),w=>h(w))}runAsStream_(l,a){return new p.ResourceStream(l,a)}}e.Paginator=g;const m=new g;e.paginator=m})(src$3)),src$3}var bucket={},Mime_1,hasRequiredMime$1;function requireMime$1(){if(hasRequiredMime$1)return Mime_1;hasRequiredMime$1=1;function e(){this._types=Object.create(null),this._extensions=Object.create(null);for(let t=0;t<arguments.length;t++)this.define(arguments[t]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}return e.prototype.define=function(t,s){for(let p in t){let g=t[p].map(function(m){return m.toLowerCase()});p=p.toLowerCase();for(let m=0;m<g.length;m++){const d=g[m];if(d[0]!=="*"){if(!s&&d in this._types)throw new Error('Attempt to change mapping for "'+d+'" extension from "'+this._types[d]+'" to "'+p+'". Pass `force=true` to allow this, otherwise remove "'+d+'" from the list of extensions for "'+p+'".');this._types[d]=p}}if(s||!this._extensions[p]){const m=g[0];this._extensions[p]=m[0]!=="*"?m:m.substr(1)}}},e.prototype.getType=function(t){t=String(t);let s=t.replace(/^.*[/\\]/,"").toLowerCase(),p=s.replace(/^.*\./,"").toLowerCase(),g=s.length<t.length;return(p.length<s.length-1||!g)&&this._types[p]||null},e.prototype.getExtension=function(t){return t=/^\s*([^;\s]*)/.test(t)&&RegExp.$1,t&&this._extensions[t.toLowerCase()]||null},Mime_1=e,Mime_1}var standard,hasRequiredStandard;function requireStandard(){return hasRequiredStandard||(hasRequiredStandard=1,standard={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}),standard}var other,hasRequiredOther;function requireOther(){return hasRequiredOther||(hasRequiredOther=1,other={"application/prs.cww":["cww"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mapbox-vector-tile":["mvt"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-iwork-keynote-sffkey":["*key"],"application/x-iwork-numbers-sffnumbers":["*numbers"],"application/x-iwork-pages-sffpages":["*pages"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.sap.vds":["vds"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}),other}var mime,hasRequiredMime;function requireMime(){if(hasRequiredMime)return mime;hasRequiredMime=1;let e=requireMime$1();return mime=new e(requireStandard(),requireOther()),mime}var yoctoQueue,hasRequiredYoctoQueue;function requireYoctoQueue(){if(hasRequiredYoctoQueue)return yoctoQueue;hasRequiredYoctoQueue=1;class e{constructor(p){this.value=p,this.next=void 0}}class t{constructor(){this.clear()}enqueue(p){const g=new e(p);this._head?(this._tail.next=g,this._tail=g):(this._head=g,this._tail=g),this._size++}dequeue(){const p=this._head;if(p)return this._head=this._head.next,this._size--,p.value}clear(){this._head=void 0,this._tail=void 0,this._size=0}get size(){return this._size}*[Symbol.iterator](){let p=this._head;for(;p;)yield p.value,p=p.next}}return yoctoQueue=t,yoctoQueue}var pLimit_1,hasRequiredPLimit;function requirePLimit(){if(hasRequiredPLimit)return pLimit_1;hasRequiredPLimit=1;const e=requireYoctoQueue();return pLimit_1=s=>{if(!((Number.isInteger(s)||s===1/0)&&s>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");const p=new e;let g=0;const m=()=>{g--,p.size>0&&p.dequeue()()},d=async(o,h,...v)=>{g++;const _=(async()=>o(...v))();h(_);try{await _}catch{}m()},l=(o,h,...v)=>{p.enqueue(d.bind(null,o,h,...v)),(async()=>(await Promise.resolve(),g<s&&p.size>0&&p.dequeue()()))()},a=(o,...h)=>new Promise(v=>{l(o,v,...h)});return Object.defineProperties(a,{activeCount:{get:()=>g},pendingCount:{get:()=>p.size},clearQueue:{value:()=>{p.clear()}}}),a},pLimit_1}var retry$1={},retry_operation,hasRequiredRetry_operation;function requireRetry_operation(){if(hasRequiredRetry_operation)return retry_operation;hasRequiredRetry_operation=1;function e(t,s){typeof s=="boolean"&&(s={forever:s}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=s||{},this._maxRetryTime=s&&s.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return retry_operation=e,e.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},e.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},e.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var s=new Date().getTime();if(t&&s-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var p=this._timeouts.shift();if(p===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),p=this._cachedTimeouts.slice(-1);else return!1;var g=this;return this._timer=setTimeout(function(){g._attempts++,g._operationTimeoutCb&&(g._timeout=setTimeout(function(){g._operationTimeoutCb(g._attempts)},g._operationTimeout),g._options.unref&&g._timeout.unref()),g._fn(g._attempts)},p),this._options.unref&&this._timer.unref(),!0},e.prototype.attempt=function(t,s){this._fn=t,s&&(s.timeout&&(this._operationTimeout=s.timeout),s.cb&&(this._operationTimeoutCb=s.cb));var p=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){p._operationTimeoutCb()},p._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},e.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)},e.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)},e.prototype.start=e.prototype.try,e.prototype.errors=function(){return this._errors},e.prototype.attempts=function(){return this._attempts},e.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},s=null,p=0,g=0;g<this._errors.length;g++){var m=this._errors[g],d=m.message,l=(t[d]||0)+1;t[d]=l,l>=p&&(s=m,p=l)}return s},retry_operation}var hasRequiredRetry$1;function requireRetry$1(){return hasRequiredRetry$1||(hasRequiredRetry$1=1,(function(e){var t=requireRetry_operation();e.operation=function(s){var p=e.timeouts(s);return new t(p,{forever:s&&(s.forever||s.retries===1/0),unref:s&&s.unref,maxRetryTime:s&&s.maxRetryTime})},e.timeouts=function(s){if(s instanceof Array)return[].concat(s);var p={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var g in s)p[g]=s[g];if(p.minTimeout>p.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var m=[],d=0;d<p.retries;d++)m.push(this.createTimeout(d,p));return s&&s.forever&&!m.length&&m.push(this.createTimeout(d,p)),m.sort(function(l,a){return l-a}),m},e.createTimeout=function(s,p){var g=p.randomize?Math.random()+1:1,m=Math.round(g*Math.max(p.minTimeout,1)*Math.pow(p.factor,s));return m=Math.min(m,p.maxTimeout),m},e.wrap=function(s,p,g){if(p instanceof Array&&(g=p,p=null),!g){g=[];for(var m in s)typeof s[m]=="function"&&g.push(m)}for(var d=0;d<g.length;d++){var l=g[d],a=s[l];s[l]=(function(h){var v=e.operation(p),_=Array.prototype.slice.call(arguments,1),y=_.pop();_.push(function(w){v.retry(w)||(w&&(arguments[0]=v.mainError()),y.apply(this,arguments))}),v.attempt(function(){h.apply(s,_)})}).bind(s,a),s[l].options=p}}})(retry$1)),retry$1}var retry,hasRequiredRetry;function requireRetry(){return hasRequiredRetry||(hasRequiredRetry=1,retry=requireRetry$1()),retry}var lib$1,hasRequiredLib$1;function requireLib$1(){if(hasRequiredLib$1)return lib$1;hasRequiredLib$1=1;var e=requireRetry();function t(s,p){function g(m,d){var l=p||{},a;"randomize"in l||(l.randomize=!0),a=e.operation(l);function o(_){d(_||new Error("Aborted"))}function h(_,y){if(_.bail){o(_);return}a.retry(_)?l.onRetry&&l.onRetry(_,y):d(a.mainError())}function v(_){var y;try{y=s(o,_)}catch(w){h(w,_);return}Promise.resolve(y).then(m).catch(function(T){h(T,_)})}a.attempt(v)}return new Promise(g)}return lib$1=t,lib$1}var acl={},hasRequiredAcl;function requireAcl(){if(hasRequiredAcl)return acl;hasRequiredAcl=1,Object.defineProperty(acl,"__esModule",{value:!0}),acl.AclRoleAccessorMethods=acl.Acl=void 0;const e=requireSrc$5();class t{constructor(){this.owners={},this.readers={},this.writers={},this.owners={},this.readers={},this.writers={},t.roles.forEach(this._assignAccessMethods.bind(this))}_assignAccessMethods(g){const m=t.accessMethods,d=t.entities,l=g.toLowerCase()+"s";this[l]=d.reduce((a,o)=>{const h=o.charAt(o.length-1)==="-";return m.forEach(v=>{let _=v+o[0].toUpperCase()+o.substring(1);h&&(_=_.replace("-","")),a[_]=(y,w,T)=>{let I;typeof w=="function"&&(T=w,w={}),h?I=o+y:(I=o,T=y),w=Object.assign({entity:I,role:g},w);const O=[w];return typeof T=="function"&&O.push(T),this[v].apply(this,O)}}),a},{})}}acl.AclRoleAccessorMethods=t,t.accessMethods=["add","delete"],t.entities=["allAuthenticatedUsers","allUsers","domain-","group-","project-","user-"],t.roles=["OWNER","READER","WRITER"];class s extends t{constructor(g){super(),this.pathPrefix=g.pathPrefix,this.request_=g.request}add(g,m){const d={};g.generation&&(d.generation=g.generation),g.userProject&&(d.userProject=g.userProject),this.request({method:"POST",uri:"",qs:d,maxRetries:0,json:{entity:g.entity,role:g.role.toUpperCase()}},(l,a)=>{if(l){m(l,null,a);return}m(null,this.makeAclObject_(a),a)})}delete(g,m){const d={};g.generation&&(d.generation=g.generation),g.userProject&&(d.userProject=g.userProject),this.request({method:"DELETE",uri:"/"+encodeURIComponent(g.entity),qs:d},(l,a)=>{m(l,a)})}get(g,m){const d=typeof g=="object"?g:null,l=typeof g=="function"?g:m;let a="";const o={};d&&(a="/"+encodeURIComponent(d.entity),d.generation&&(o.generation=d.generation),d.userProject&&(o.userProject=d.userProject)),this.request({uri:a,qs:o},(h,v)=>{if(h){l(h,null,v);return}let _;v.items?_=v.items.map(this.makeAclObject_):_=this.makeAclObject_(v),l(null,_,v)})}update(g,m){const d={};g.generation&&(d.generation=g.generation),g.userProject&&(d.userProject=g.userProject),this.request({method:"PUT",uri:"/"+encodeURIComponent(g.entity),qs:d,json:{role:g.role.toUpperCase()}},(l,a)=>{if(l){m(l,null,a);return}m(null,this.makeAclObject_(a),a)})}makeAclObject_(g){const m={entity:g.entity,role:g.role};return g.projectTeam&&(m.projectTeam=g.projectTeam),m}request(g,m){g.uri=this.pathPrefix+g.uri,this.request_(g,m)}}acl.Acl=s;return(0,e.promisifyAll)(s,{exclude:["request"]}),acl}var file={},resumableUpload={},browser$1={exports:{}},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser$1.exports;hasRequiredBrowser=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return browser$1.exports=e,browser$1.exports.AbortSignal=t,browser$1.exports.default=e,browser$1.exports}var hasRequiredResumableUpload;function requireResumableUpload(){return hasRequiredResumableUpload||(hasRequiredResumableUpload=1,(function(e){var t={},s=resumableUpload&&resumableUpload.__createBinding||(Object.create?(function(z,Q,Y,te){te===void 0&&(te=Y);var ae=Object.getOwnPropertyDescriptor(Q,Y);(!ae||("get"in ae?!Q.__esModule:ae.writable||ae.configurable))&&(ae={enumerable:!0,get:function(){return Q[Y]}}),Object.defineProperty(z,te,ae)}):(function(z,Q,Y,te){te===void 0&&(te=Y),z[te]=Q[Y]})),p=resumableUpload&&resumableUpload.__setModuleDefault||(Object.create?(function(z,Q){Object.defineProperty(z,"default",{enumerable:!0,value:Q})}):function(z,Q){z.default=Q}),g=resumableUpload&&resumableUpload.__importStar||(function(){var z=function(Q){return z=Object.getOwnPropertyNames||function(Y){var te=[];for(var ae in Y)Object.prototype.hasOwnProperty.call(Y,ae)&&(te[te.length]=ae);return te},z(Q)};return function(Q){if(Q&&Q.__esModule)return Q;var Y={};if(Q!=null)for(var te=z(Q),ae=0;ae<te.length;ae++)te[ae]!=="default"&&s(Y,Q,te[ae]);return p(Y,Q),Y}})(),m=resumableUpload&&resumableUpload.__classPrivateFieldSet||function(z,Q,Y,te,ae){if(te==="m")throw new TypeError("Private method is not writable");if(te==="a"&&!ae)throw new TypeError("Private accessor was defined without a setter");if(typeof Q=="function"?z!==Q||!ae:!Q.has(z))throw new TypeError("Cannot write private member to an object whose class did not declare it");return te==="a"?ae.call(z,Y):ae?ae.value=Y:Q.set(z,Y),Y},d=resumableUpload&&resumableUpload.__classPrivateFieldGet||function(z,Q,Y,te){if(Y==="a"&&!te)throw new TypeError("Private accessor was defined without a getter");if(typeof Q=="function"?z!==Q||!te:!Q.has(z))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Y==="m"?te:Y==="a"?te.call(z):te?te.value:Q.get(z)},l=resumableUpload&&resumableUpload.__importDefault||function(z){return z&&z.__esModule?z:{default:z}},a,o,h,v;Object.defineProperty(e,"__esModule",{value:!0}),e.Upload=e.PROTOCOL_REGEX=void 0,e.upload=$,e.createURI=W,e.checkUploadStatus=K;const _=l(requireBrowser()),y=require$$1$3,w=g(requireSrc$f()),T=requireSrc$b(),I=require$$1$3,O=l(requireLib$1()),E=g(require$$6$1),C=requireUtil$6(),x=requireUtil$5(),j=requirePackageJsonHelper(),D=404,k=308,q=(0,j.getPackageJSON)();e.PROTOCOL_REGEX=/^(\w*):\/\//;class G extends I.Writable{constructor(Q){var Y;if(super(Q),a.add(this),this.numBytesWritten=0,this.numRetries=0,this.currentInvocationId={checkUploadStatus:E.v4(),chunk:E.v4(),uri:E.v4()},this.writeBuffers=[],this.numChunksReadInRequest=0,this.localWriteCache=[],this.localWriteCacheByteLength=0,this.upstreamEnded=!1,o.set(this,void 0),Q=Q||{},!Q.bucket||!Q.file)throw new Error("A bucket and file name are required");if(Q.offset&&!Q.uri)throw new RangeError("Cannot provide an `offset` without providing a `uri`");if(Q.isPartialUpload&&!Q.chunkSize)throw new RangeError("Cannot set `isPartialUpload` without providing a `chunkSize`");Q.authConfig=Q.authConfig||{},Q.authConfig.scopes=["https://www.googleapis.com/auth/devstorage.full_control"],this.authClient=Q.authClient||new T.GoogleAuth(Q.authConfig);const te=Q.universeDomain||T.DEFAULT_UNIVERSE;if(this.apiEndpoint=`https://storage.${te}`,Q.apiEndpoint&&Q.apiEndpoint!==this.apiEndpoint){this.apiEndpoint=this.sanitizeEndpoint(Q.apiEndpoint);const oe=new URL(this.apiEndpoint).hostname,de=oe===te,he=oe===T.DEFAULT_UNIVERSE,Ee=oe.slice(-(te.length+1))===`.${te}`,fe=oe.slice(-(T.DEFAULT_UNIVERSE.length+1))===`.${T.DEFAULT_UNIVERSE}`;!de&&!he&&!Ee&&!fe&&(this.authClient=w)}this.baseURI=`${this.apiEndpoint}/upload/storage/v1/b`,this.bucket=Q.bucket;const ae=[Q.bucket,Q.file];if(typeof Q.generation=="number"&&ae.push(`${Q.generation}`),this.cacheKey=ae.join("/"),this.customRequestOptions=Q.customRequestOptions||{},this.file=Q.file,this.generation=Q.generation,this.kmsKeyName=Q.kmsKeyName,this.metadata=Q.metadata||{},this.offset=Q.offset,this.origin=Q.origin,this.params=Q.params||{},this.userProject=Q.userProject,this.chunkSize=Q.chunkSize,this.retryOptions=Q.retryOptions,this.isPartialUpload=(Y=Q.isPartialUpload)!==null&&Y!==void 0?Y:!1,Q.key)if(typeof Q.key=="string"){const oe=Buffer.from(Q.key).toString("base64");this.encryption={key:oe,hash:(0,y.createHash)("sha256").update(Q.key).digest("base64")}}else{const oe=Q.key.toString("base64");this.encryption={key:oe,hash:(0,y.createHash)("sha256").update(Q.key).digest("base64")}}this.predefinedAcl=Q.predefinedAcl,Q.private&&(this.predefinedAcl="private"),Q.public&&(this.predefinedAcl="publicRead");const ue=Q.retryOptions.autoRetry;this.uriProvidedManually=!!Q.uri,this.uri=Q.uri,this.offset&&(this.numBytesWritten=this.offset),this.numRetries=0,ue||(Q.retryOptions.maxRetries=0),this.timeOfFirstRequest=Date.now();const ee=Q.metadata?Number(Q.metadata.contentLength):NaN;this.contentLength=isNaN(ee)?"*":ee,m(this,o,Q[x.GCCL_GCS_CMD_KEY],"f"),this.once("writing",()=>{this.uri?this.continueUploading():this.createURI(oe=>{if(oe)return this.destroy(oe);this.startUploading()})})}_final(Q=()=>{}){this.upstreamEnded=!0,this.once("uploadFinished",Q),t.nextTick(()=>{this.emit("upstreamFinished"),this.emit("writing")})}_write(Q,Y,te=()=>{}){this.emit("writing"),this.writeBuffers.push(typeof Q=="string"?Buffer.from(Q,Y):Q),this.once("readFromChunkBuffer",te),t.nextTick(()=>this.emit("wroteToChunkBuffer"))}prependLocalBufferToUpstream(Q){let Y=[];if(Q){let ae=0;for(;Q>ae;){let ue=this.localWriteCache.pop();if(!ue)break;if(ae+=ue.byteLength,ae>Q){const ee=ae-Q;ue=ue.subarray(ee),ae-=ee}Y.unshift(ue)}}else Y=this.localWriteCache;const te=this.writeBuffers;this.writeBuffers=Y;for(const ae of te)this.writeBuffers.push(ae);d(this,a,"m",h).call(this)}*pullFromChunkBuffer(Q){for(;Q;){const Y=this.writeBuffers.shift();if(!Y)break;let te=Y;Y.byteLength>Q?(te=Y.subarray(0,Q),this.writeBuffers.unshift(Y.subarray(Q)),Q=0):Q-=Y.byteLength,yield te,this.emit("readFromChunkBuffer")}}async waitForNextChunk(){return await new Promise(Y=>{if(this.writeBuffers.length)return Y(!0);if(this.upstreamEnded)return Y(!1);const te=()=>(ue(),Y(!0)),ae=()=>(ue(),this.writeBuffers.length?Y(!0):Y(!1)),ue=()=>{this.removeListener("wroteToChunkBuffer",te),this.removeListener("upstreamFinished",ae)};this.once("wroteToChunkBuffer",te),this.once("upstreamFinished",ae)})}async*upstreamIterator(Q=1/0){for(;Q&&await this.waitForNextChunk();)for(const Y of this.pullFromChunkBuffer(Q))Q-=Y.byteLength,yield Y}createURI(Q){if(!Q)return this.createURIAsync();this.createURIAsync().then(Y=>Q(null,Y),Q)}async createURIAsync(){const Q={...this.metadata},Y={};Q.contentLength&&(Y["X-Upload-Content-Length"]=Q.contentLength.toString(),delete Q.contentLength),Q.contentType&&(Y["X-Upload-Content-Type"]=Q.contentType,delete Q.contentType);let te=`${(0,C.getRuntimeTrackingString)()} gccl/${q.version}-${(0,C.getModuleFormat)()} gccl-invocation-id/${this.currentInvocationId.uri}`;d(this,o,"f")&&(te+=` gccl-gcs-cmd/${d(this,o,"f")}`);const ae={method:"POST",url:[this.baseURI,this.bucket,"o"].join("/"),params:Object.assign({name:this.file,uploadType:"resumable"},this.params),data:Q,headers:{"User-Agent":(0,C.getUserAgentString)(),"x-goog-api-client":te,...Y}};Q.contentLength&&(ae.headers["X-Upload-Content-Length"]=Q.contentLength.toString()),Q.contentType&&(ae.headers["X-Upload-Content-Type"]=Q.contentType),typeof this.generation<"u"&&(ae.params.ifGenerationMatch=this.generation),this.kmsKeyName&&(ae.params.kmsKeyName=this.kmsKeyName),this.predefinedAcl&&(ae.params.predefinedAcl=this.predefinedAcl),this.origin&&(ae.headers.Origin=this.origin);const ue=await(0,O.default)(async ee=>{var oe,de,he;try{const Ee=await this.makeRequest(ae);return this.currentInvocationId.uri=E.v4(),Ee.headers.location}catch(Ee){const fe=Ee,Se={code:(oe=fe.response)===null||oe===void 0?void 0:oe.status,name:(de=fe.response)===null||de===void 0?void 0:de.statusText,message:(he=fe.response)===null||he===void 0?void 0:he.statusText,errors:[{reason:fe.code}]};if(this.retryOptions.maxRetries>0&&this.retryOptions.retryableErrorFn(Se))throw fe;return ee(fe)}},{retries:this.retryOptions.maxRetries,factor:this.retryOptions.retryDelayMultiplier,maxTimeout:this.retryOptions.maxRetryDelay*1e3,maxRetryTime:this.retryOptions.totalTimeout*1e3});return this.uri=ue,this.offset=0,this.emit("uri",ue),ue}async continueUploading(){var Q;return(Q=this.offset)!==null&&Q!==void 0||await this.getAndSetOffset(),this.startUploading()}async startUploading(){const Q=!!this.chunkSize;let Y=!1;if(this.numChunksReadInRequest=0,this.offset||(this.offset=0),this.offset<this.numBytesWritten){const he=this.numBytesWritten-this.offset,Ee=`The offset is lower than the number of bytes written. The server has ${this.offset} bytes and while ${this.numBytesWritten} bytes has been uploaded - thus ${he} bytes are missing. Stopping as this could result in data loss. Initiate a new upload to continue.`;this.emit("error",new RangeError(Ee));return}if(this.numBytesWritten<this.offset){const he=this.offset-this.numBytesWritten;for await(const Ee of this.upstreamIterator(he));this.numBytesWritten=this.offset}let te;typeof this.contentLength=="number"&&(te=this.contentLength-this.numBytesWritten),this.chunkSize&&(te=te?Math.min(this.chunkSize,te):this.chunkSize);const ae=this.upstreamIterator(te),ue=new I.Readable({read:async()=>{Y&&ue.push(null);const he=await ae.next();he.value&&(this.numChunksReadInRequest++,Q?d(this,a,"m",v).call(this,he.value):(d(this,a,"m",h).call(this),d(this,a,"m",v).call(this,he.value)),this.numBytesWritten+=he.value.byteLength,this.emit("progress",{bytesWritten:this.numBytesWritten,contentLength:this.contentLength}),ue.push(he.value)),he.done&&ue.push(null)}});let ee=`${(0,C.getRuntimeTrackingString)()} gccl/${q.version}-${(0,C.getModuleFormat)()} gccl-invocation-id/${this.currentInvocationId.chunk}`;d(this,o,"f")&&(ee+=` gccl-gcs-cmd/${d(this,o,"f")}`);const oe={"User-Agent":(0,C.getUserAgentString)(),"x-goog-api-client":ee};if(Q){for await(const be of this.upstreamIterator(te))d(this,a,"m",v).call(this,be);const he=this.localWriteCacheByteLength,Ee=!await this.waitForNextChunk();this.prependLocalBufferToUpstream();let fe=this.contentLength;typeof this.contentLength!="number"&&Ee&&!this.isPartialUpload&&(fe=he+this.numBytesWritten);const Se=he+this.numBytesWritten-1;oe["Content-Length"]=he,oe["Content-Range"]=`bytes ${this.offset}-${Se}/${fe}`}else oe["Content-Range"]=`bytes ${this.offset}-*/${this.contentLength}`;const de={method:"PUT",url:this.uri,headers:oe,body:ue};try{const he=await this.makeRequestStream(de);he&&(Y=!0,await this.responseHandler(he))}catch(he){const Ee=he;if(this.retryOptions.retryableErrorFn(Ee)){this.attemptDelayedRetry({status:NaN,data:Ee});return}this.destroy(Ee)}}async responseHandler(Q){if(Q.data.error){this.destroy(Q.data.error);return}this.currentInvocationId.chunk=E.v4();const Y=await this.waitForNextChunk(),te=this.chunkSize&&Q.status===k&&Q.headers.range&&Y,ae=this.isPartialUpload&&Q.status===k&&!Y;if(te){const ue=Q.headers.range;this.offset=Number(ue.split("-")[1])+1;const ee=this.numBytesWritten-this.offset;ee?(this.prependLocalBufferToUpstream(ee),this.numBytesWritten-=ee):d(this,a,"m",h).call(this),this.continueUploading()}else if(!this.isSuccessfulResponse(Q.status)&&!ae){const ue=new Error("Upload failed");ue.code=Q.status,ue.name="Upload failed",Q?.data&&(ue.errors=[Q?.data]),this.destroy(ue)}else d(this,a,"m",h).call(this),Q&&Q.data&&(Q.data.size=Number(Q.data.size)),this.emit("metadata",Q.data),this.emit("uploadFinished")}async checkUploadStatus(Q={}){let Y=`${(0,C.getRuntimeTrackingString)()} gccl/${q.version}-${(0,C.getModuleFormat)()} gccl-invocation-id/${this.currentInvocationId.checkUploadStatus}`;d(this,o,"f")&&(Y+=` gccl-gcs-cmd/${d(this,o,"f")}`);const te={method:"PUT",url:this.uri,headers:{"Content-Length":0,"Content-Range":"bytes */*","User-Agent":(0,C.getUserAgentString)(),"x-goog-api-client":Y}};try{const ae=await this.makeRequest(te);return this.currentInvocationId.checkUploadStatus=E.v4(),ae}catch(ae){if(Q.retry===!1||!(ae instanceof Error)||!this.retryOptions.retryableErrorFn(ae))throw ae;const ue=this.getRetryDelay();if(ue<=0)throw ae;return await new Promise(ee=>setTimeout(ee,ue)),this.checkUploadStatus(Q)}}async getAndSetOffset(){try{const Q=await this.checkUploadStatus({retry:!1});if(Q.status===k&&typeof Q.headers.range=="string"){this.offset=Number(Q.headers.range.split("-")[1])+1;return}this.offset=0}catch(Q){const Y=Q;if(this.retryOptions.retryableErrorFn(Y)){this.attemptDelayedRetry({status:NaN,data:Y});return}this.destroy(Y)}}async makeRequest(Q){this.encryption&&(Q.headers=Q.headers||{},Q.headers["x-goog-encryption-algorithm"]="AES256",Q.headers["x-goog-encryption-key"]=this.encryption.key.toString(),Q.headers["x-goog-encryption-key-sha256"]=this.encryption.hash.toString()),this.userProject&&(Q.params=Q.params||{},Q.params.userProject=this.userProject),Q.validateStatus=ae=>this.isSuccessfulResponse(ae)||ae===k;const Y={...this.customRequestOptions,...Q,headers:{...this.customRequestOptions.headers,...Q.headers}},te=await this.authClient.request(Y);if(te.data&&te.data.error)throw te.data.error;return te}async makeRequestStream(Q){const Y=new _.default,te=()=>Y.abort();this.once("error",te),this.userProject&&(Q.params=Q.params||{},Q.params.userProject=this.userProject),Q.signal=Y.signal,Q.validateStatus=()=>!0;const ae={...this.customRequestOptions,...Q,headers:{...this.customRequestOptions.headers,...Q.headers}},ue=await this.authClient.request(ae),ee=this.onResponse(ue);return this.removeListener("error",te),ee?ue:null}onResponse(Q){return Q.status!==200&&this.retryOptions.retryableErrorFn({code:Q.status,message:Q.statusText,name:Q.statusText})?(this.attemptDelayedRetry(Q),!1):(this.emit("response",Q),!0)}attemptDelayedRetry(Q){if(this.numRetries<this.retryOptions.maxRetries){if(Q.status===D&&this.numChunksReadInRequest===0)this.startUploading();else{const Y=this.getRetryDelay();if(Y<=0){this.destroy(new Error(`Retry total time limit exceeded - ${JSON.stringify(Q.data)}`));return}this.numBytesWritten-=this.localWriteCacheByteLength,this.prependLocalBufferToUpstream(),this.offset=void 0,setTimeout(this.continueUploading.bind(this),Y)}this.numRetries++}else this.destroy(new Error(`Retry limit exceeded - ${JSON.stringify(Q.data)}`))}getRetryDelay(){const Q=Math.round(Math.random()*1e3),Y=Math.pow(this.retryOptions.retryDelayMultiplier,this.numRetries)*1e3+Q,te=this.retryOptions.totalTimeout*1e3-(Date.now()-this.timeOfFirstRequest),ae=this.retryOptions.maxRetryDelay*1e3;return Math.min(Y,ae,te)}sanitizeEndpoint(Q){return e.PROTOCOL_REGEX.test(Q)||(Q=`https://${Q}`),Q.replace(/\/+$/,"")}isSuccessfulResponse(Q){return Q>=200&&Q<300}}e.Upload=G,o=new WeakMap,a=new WeakSet,h=function(){this.localWriteCache=[],this.localWriteCacheByteLength=0},v=function(Q){this.localWriteCache.push(Q),this.localWriteCacheByteLength+=Q.byteLength};function $(z){return new G(z)}function W(z,Q){const Y=new G(z);if(!Q)return Y.createURI();Y.createURI().then(te=>Q(null,te),Q)}function K(z){return new G(z).checkUploadStatus()}})(resumableUpload)),resumableUpload}var signer={},hasRequiredSigner;function requireSigner(){if(hasRequiredSigner)return signer;hasRequiredSigner=1;var e=signer&&signer.__createBinding||(Object.create?(function(_,y,w,T){T===void 0&&(T=w);var I=Object.getOwnPropertyDescriptor(y,w);(!I||("get"in I?!y.__esModule:I.writable||I.configurable))&&(I={enumerable:!0,get:function(){return y[w]}}),Object.defineProperty(_,T,I)}):(function(_,y,w,T){T===void 0&&(T=w),_[T]=y[w]})),t=signer&&signer.__setModuleDefault||(Object.create?(function(_,y){Object.defineProperty(_,"default",{enumerable:!0,value:y})}):function(_,y){_.default=y}),s=signer&&signer.__importStar||(function(){var _=function(y){return _=Object.getOwnPropertyNames||function(w){var T=[];for(var I in w)Object.prototype.hasOwnProperty.call(w,I)&&(T[T.length]=I);return T},_(y)};return function(y){if(y&&y.__esModule)return y;var w={};if(y!=null)for(var T=_(y),I=0;I<T.length;I++)T[I]!=="default"&&e(w,y,T[I]);return t(w,y),w}})();Object.defineProperty(signer,"__esModule",{value:!0}),signer.SigningError=signer.URLSigner=signer.PATH_STYLED_HOST=signer.SignerExceptionMessages=void 0;const p=s(require$$1$3),g=s(require$$1$3),m=requireStorage$2(),d=requireUtil$6();var l;(function(_){_.ACCESSIBLE_DATE_INVALID="The accessible at date provided was invalid.",_.EXPIRATION_BEFORE_ACCESSIBLE_DATE="An expiration date cannot be before accessible date.",_.X_GOOG_CONTENT_SHA256="The header X-Goog-Content-SHA256 must be a hexadecimal string."})(l||(signer.SignerExceptionMessages=l={}));const a="v2",o=10080*60;signer.PATH_STYLED_HOST="https://storage.googleapis.com";class h{constructor(y,w,T,I=new m.Storage){this.auth=y,this.bucket=w,this.file=T,this.storage=I}getSignedUrl(y){const w=this.parseExpires(y.expires),T=y.method,I=this.parseAccessibleAt(y.accessibleAt);if(w<I)throw new Error(l.EXPIRATION_BEFORE_ACCESSIBLE_DATE);let O;const E=y.virtualHostedStyle||!1;y.cname?O=y.cname:E&&(O=`https://${this.bucket.name}.storage.${this.storage.universeDomain}`);const C=1e3,x=Object.assign({},y,{method:T,expiration:w,accessibleAt:new Date(C*I),bucket:this.bucket.name,file:this.file?(0,d.encodeURI)(this.file.name,!1):void 0});O&&(x.cname=O);const j=y.version||a;let D;if(j==="v2")D=this.getSignedUrlV2(x);else if(j==="v4")D=this.getSignedUrlV4(x);else throw new Error(`Invalid signed URL version: ${j}. Supported versions are 'v2' and 'v4'.`);return D.then(k=>{var q;k=Object.assign(k,y.queryParams);const G=new g.URL(((q=y.host)===null||q===void 0?void 0:q.toString())||x.cname||this.storage.apiEndpoint);return G.pathname=this.getResourcePath(!!x.cname,this.bucket.name,x.file),G.search=(0,d.qsStringify)(k),G.href})}getSignedUrlV2(y){const w=this.getCanonicalHeaders(y.extensionHeaders||{}),T=this.getResourcePath(!1,y.bucket,y.file),I=[y.method,y.contentMd5||"",y.contentType||"",y.expiration,w+T].join(`
`);return(async()=>{var E;const C=this.auth;try{const x=await C.sign(I,(E=y.signingEndpoint)===null||E===void 0?void 0:E.toString());return{GoogleAccessId:(await C.getCredentials()).client_email,Expires:y.expiration,Signature:x}}catch(x){const j=x,D=new v(j.message);throw D.stack=j.stack,D}})()}getSignedUrlV4(y){var w;y.accessibleAt=y.accessibleAt?y.accessibleAt:new Date;const T=1/1e3,I=y.expiration-y.accessibleAt.valueOf()*T;if(I>o)throw new Error(`Max allowed expiration is seven days (${o} seconds).`);const O=Object.assign({},y.extensionHeaders),E=new g.URL(((w=y.host)===null||w===void 0?void 0:w.toString())||y.cname||this.storage.apiEndpoint);O.host=E.hostname,y.contentMd5&&(O["content-md5"]=y.contentMd5),y.contentType&&(O["content-type"]=y.contentType);let C;const x=O["x-goog-content-sha256"];if(x){if(typeof x!="string"||!/[A-Fa-f0-9]{40}/.test(x))throw new Error(l.X_GOOG_CONTENT_SHA256);C=x}const j=Object.keys(O).map($=>$.toLowerCase()).sort().join(";"),D=this.getCanonicalHeaders(O),q=`${(0,d.formatAsUTCISO)(y.accessibleAt)}/auto/storage/goog4_request`;return(async()=>{var $;const K=`${(await this.auth.getCredentials()).client_email}/${q}`,z=(0,d.formatAsUTCISO)(y.accessibleAt?y.accessibleAt:new Date,!0),Q={"X-Goog-Algorithm":"GOOG4-RSA-SHA256","X-Goog-Credential":K,"X-Goog-Date":z,"X-Goog-Expires":I.toString(10),"X-Goog-SignedHeaders":j,...y.queryParams||{}},Y=this.getCanonicalQueryParams(Q),te=this.getCanonicalRequest(y.method,this.getResourcePath(!!y.cname,y.bucket,y.file),Y,D,j,C),ae=p.createHash("sha256").update(te).digest("hex"),ue=["GOOG4-RSA-SHA256",z,q,ae].join(`
`);try{const ee=await this.auth.sign(ue,($=y.signingEndpoint)===null||$===void 0?void 0:$.toString()),oe=Buffer.from(ee,"base64").toString("hex");return Object.assign({},Q,{"X-Goog-Signature":oe})}catch(ee){const oe=ee,de=new v(oe.message);throw de.stack=oe.stack,de}})()}getCanonicalHeaders(y){return(0,d.objectEntries)(y).map(([T,I])=>[T.toLowerCase(),I]).sort((T,I)=>T[0].localeCompare(I[0])).filter(([,T])=>T!==void 0).map(([T,I])=>{const O=`${I}`.trim().replace(/\s{2,}/g," ");return`${T}:${O}
`}).join("")}getCanonicalRequest(y,w,T,I,O,E){return[y,w,T,I,O,E||"UNSIGNED-PAYLOAD"].join(`
`)}getCanonicalQueryParams(y){return(0,d.objectEntries)(y).map(([w,T])=>[(0,d.encodeURI)(w,!0),(0,d.encodeURI)(T,!0)]).sort((w,T)=>w[0]<T[0]?-1:1).map(([w,T])=>`${w}=${T}`).join("&")}getResourcePath(y,w,T){return y?"/"+(T||""):T?`/${w}/${T}`:`/${w}`}parseExpires(y,w=new Date){const T=new Date(y).valueOf();if(isNaN(T))throw new Error(m.ExceptionMessages.EXPIRATION_DATE_INVALID);if(T<w.valueOf())throw new Error(m.ExceptionMessages.EXPIRATION_DATE_PAST);return Math.floor(T/1e3)}parseAccessibleAt(y){const w=new Date(y||new Date).valueOf();if(isNaN(w))throw new Error(l.ACCESSIBLE_DATE_INVALID);return Math.floor(w/1e3)}}signer.URLSigner=h;class v extends Error{constructor(){super(...arguments),this.name="SigningError"}}return signer.SigningError=v,signer}var crc32c={},hasRequiredCrc32c;function requireCrc32c(){if(hasRequiredCrc32c)return crc32c;hasRequiredCrc32c=1;var e=crc32c&&crc32c.__classPrivateFieldSet||function(o,h,v,_,y){if(_==="m")throw new TypeError("Private method is not writable");if(_==="a"&&!y)throw new TypeError("Private accessor was defined without a setter");if(typeof h=="function"?o!==h||!y:!h.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return _==="a"?y.call(o,v):y?y.value=v:h.set(o,v),v},t=crc32c&&crc32c.__classPrivateFieldGet||function(o,h,v,_){if(v==="a"&&!_)throw new TypeError("Private accessor was defined without a getter");if(typeof h=="function"?o!==h||!_:!h.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return v==="m"?_:v==="a"?_.call(o):_?_.value:h.get(o)},s;Object.defineProperty(crc32c,"__esModule",{value:!0}),crc32c.CRC32C_EXTENSION_TABLE=crc32c.CRC32C_EXTENSIONS=crc32c.CRC32C_EXCEPTION_MESSAGES=crc32c.CRC32C_DEFAULT_VALIDATOR_GENERATOR=crc32c.CRC32C=void 0;const p=require$$1$3,g=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697];crc32c.CRC32C_EXTENSIONS=g;const m=new Int32Array(g);crc32c.CRC32C_EXTENSION_TABLE=m;const d=()=>new a;crc32c.CRC32C_DEFAULT_VALIDATOR_GENERATOR=d;const l={INVALID_INIT_BASE64_RANGE:o=>`base64-encoded data expected to equal 4 bytes, not ${o}`,INVALID_INIT_BUFFER_LENGTH:o=>`Buffer expected to equal 4 bytes, not ${o}`,INVALID_INIT_INTEGER:o=>`Number expected to be a safe, unsigned 32-bit integer, not ${o}`};crc32c.CRC32C_EXCEPTION_MESSAGES=l;class a{constructor(h=0){s.set(this,0),e(this,s,h,"f")}update(h){let v=t(this,s,"f")^4294967295;for(const _ of h)v=a.CRC32C_EXTENSION_TABLE[(_^v)&255]^v>>>8;e(this,s,v^4294967295,"f")}validate(h){return typeof h=="number"?h===t(this,s,"f"):typeof h=="string"?h===this.toString():Buffer.isBuffer(h)?Buffer.compare(h,this.toBuffer())===0:h.toString()===this.toString()}toBuffer(){const h=Buffer.alloc(4);return h.writeInt32BE(t(this,s,"f")),h}toJSON(){return this.toString()}toString(){return this.toBuffer().toString("base64")}valueOf(){return t(this,s,"f")}static fromBuffer(h){let v;if(Buffer.isBuffer(h)?v=h:"buffer"in h?v=Buffer.from(h.buffer):v=Buffer.from(h),v.byteLength!==4)throw new RangeError(l.INVALID_INIT_BUFFER_LENGTH(v.byteLength));return new a(v.readInt32BE())}static async fromFile(h){const v=new a;return await new Promise((_,y)=>{(0,p.createReadStream)(h).on("data",w=>{typeof w=="string"?v.update(Buffer.from(w)):v.update(w)}).on("end",()=>_()).on("error",y)}),v}static fromString(h){const v=Buffer.from(h,"base64");if(v.byteLength!==4)throw new RangeError(l.INVALID_INIT_BASE64_RANGE(v.byteLength));return this.fromBuffer(v)}static fromNumber(h){if(!Number.isSafeInteger(h)||h>4294967296||h<-4294967296)throw new RangeError(l.INVALID_INIT_INTEGER(h));return new a(h)}static from(h){return typeof h=="number"?this.fromNumber(h):typeof h=="string"?this.fromString(h):"byteLength"in h?this.fromBuffer(h):this.fromString(h.toString())}}return crc32c.CRC32C=a,s=new WeakMap,a.CRC32C_EXTENSIONS=g,a.CRC32C_EXTENSION_TABLE=m,crc32c}var hashStreamValidator={},hasRequiredHashStreamValidator;function requireHashStreamValidator(){if(hasRequiredHashStreamValidator)return hashStreamValidator;hasRequiredHashStreamValidator=1;var e=hashStreamValidator&&hashStreamValidator.__classPrivateFieldSet||function(h,v,_,y,w){if(y==="m")throw new TypeError("Private method is not writable");if(y==="a"&&!w)throw new TypeError("Private accessor was defined without a setter");if(typeof v=="function"?h!==v||!w:!v.has(h))throw new TypeError("Cannot write private member to an object whose class did not declare it");return y==="a"?w.call(h,_):w?w.value=_:v.set(h,_),_},t=hashStreamValidator&&hashStreamValidator.__classPrivateFieldGet||function(h,v,_,y){if(_==="a"&&!y)throw new TypeError("Private accessor was defined without a getter");if(typeof v=="function"?h!==v||!y:!v.has(h))throw new TypeError("Cannot read private member from an object whose class did not declare it");return _==="m"?y:_==="a"?y.call(h):y?y.value:v.get(h)},s,p,g;Object.defineProperty(hashStreamValidator,"__esModule",{value:!0}),hashStreamValidator.HashStreamValidator=void 0;const m=require$$1$3,d=require$$1$3,l=requireCrc32c(),a=requireFile();class o extends d.Transform{constructor(v={}){if(super(),this.updateHashesOnly=!1,s.set(this,void 0),p.set(this,void 0),g.set(this,""),this.crc32cEnabled=!!v.crc32c,this.md5Enabled=!!v.md5,this.updateHashesOnly=!!v.updateHashesOnly,this.crc32cExpected=v.crc32cExpected,this.md5Expected=v.md5Expected,this.crc32cEnabled)if(v.crc32cInstance)e(this,s,v.crc32cInstance,"f");else{const _=v.crc32cGenerator||l.CRC32C_DEFAULT_VALIDATOR_GENERATOR;e(this,s,_(),"f")}this.md5Enabled&&e(this,p,(0,m.createHash)("md5"),"f")}get crc32c(){var v;return(v=t(this,s,"f"))===null||v===void 0?void 0:v.toString()}_flush(v){if(t(this,p,"f")&&e(this,g,t(this,p,"f").digest("base64"),"f"),this.updateHashesOnly){v();return}let _=this.crc32cEnabled||this.md5Enabled;if(this.crc32cEnabled&&this.crc32cExpected&&(_=!this.test("crc32c",this.crc32cExpected)),this.md5Enabled&&this.md5Expected&&(_=!this.test("md5",this.md5Expected)),_){const y=new a.RequestError(a.FileExceptionMessages.DOWNLOAD_MISMATCH);y.code="CONTENT_DOWNLOAD_MISMATCH",v(y)}else v()}_transform(v,_,y){this.push(v,_);try{t(this,s,"f")&&t(this,s,"f").update(v),t(this,p,"f")&&t(this,p,"f").update(v),y()}catch(w){y(w)}}test(v,_){const y=Buffer.isBuffer(_)?_.toString("base64"):_;return v==="crc32c"&&t(this,s,"f")?t(this,s,"f").validate(y):v==="md5"&&t(this,p,"f")?t(this,g,"f")===y:!1}}return hashStreamValidator.HashStreamValidator=o,s=new WeakMap,p=new WeakMap,g=new WeakMap,hashStreamValidator}var hasRequiredFile;function requireFile(){if(hasRequiredFile)return file;hasRequiredFile=1;var e=file&&file.__createBinding||(Object.create?(function(ue,ee,oe,de){de===void 0&&(de=oe);var he=Object.getOwnPropertyDescriptor(ee,oe);(!he||("get"in he?!ee.__esModule:he.writable||he.configurable))&&(he={enumerable:!0,get:function(){return ee[oe]}}),Object.defineProperty(ue,de,he)}):(function(ue,ee,oe,de){de===void 0&&(de=oe),ue[de]=ee[oe]})),t=file&&file.__setModuleDefault||(Object.create?(function(ue,ee){Object.defineProperty(ue,"default",{enumerable:!0,value:ee})}):function(ue,ee){ue.default=ee}),s=file&&file.__importStar||(function(){var ue=function(ee){return ue=Object.getOwnPropertyNames||function(oe){var de=[];for(var he in oe)Object.prototype.hasOwnProperty.call(oe,he)&&(de[de.length]=he);return de},ue(ee)};return function(ee){if(ee&&ee.__esModule)return ee;var oe={};if(ee!=null)for(var de=ue(ee),he=0;he<de.length;he++)de[he]!=="default"&&e(oe,ee,de[he]);return t(oe,ee),oe}})(),p=file&&file.__classPrivateFieldGet||function(ue,ee,oe,de){if(oe==="a"&&!de)throw new TypeError("Private accessor was defined without a getter");if(typeof ee=="function"?ue!==ee||!de:!ee.has(ue))throw new TypeError("Cannot read private member from an object whose class did not declare it");return oe==="m"?de:oe==="a"?de.call(ue):de?de.value:ee.get(ue)},g=file&&file.__importDefault||function(ue){return ue&&ue.__esModule?ue:{default:ue}},m,d;Object.defineProperty(file,"__esModule",{value:!0}),file.File=file.FileExceptionMessages=file.RequestError=file.STORAGE_POST_POLICY_BASE_URL=file.ActionToHTTPMethod=void 0;const l=requireNodejsCommon(),a=requireSrc$5(),o=s(require$$1$3),h=s(require$$1$3),v=g(requireMime()),_=s(requireResumableUpload()),y=require$$1$3,w=s(require$$1$3),T=requireStorage$2(),I=requireBucket(),O=requireAcl(),E=requireSigner(),C=requireUtil$5(),x=g(requireDuplexify()),j=requireUtil$6(),D=requireCrc32c(),k=requireHashStreamValidator(),q=g(requireLib$1());var G;(function(ue){ue.read="GET",ue.write="PUT",ue.delete="DELETE",ue.resumable="POST"})(G||(file.ActionToHTTPMethod=G={})),file.STORAGE_POST_POLICY_BASE_URL="https://storage.googleapis.com";const $=/^gs:\/\/([a-z0-9_.-]+)\/(.+)$/,W=new RegExp([/^text\/|application\/ecmascript|application\/javascript|application\/json/,/|application\/postscript|application\/rtf|application\/toml|application\/vnd.dart/,/|application\/vnd.ms-fontobject|application\/wasm|application\/x-httpd-php|application\/x-ns-proxy-autoconfig/,/|application\/x-sh(?!ockwave-flash)|application\/x-tar|application\/x-virtualbox-hdd|application\/x-virtualbox-ova|application\/x-virtualbox-ovf/,/|^application\/x-virtualbox-vbox$|application\/x-virtualbox-vdi|application\/x-virtualbox-vhd|application\/x-virtualbox-vmdk/,/|application\/xml|application\/xml-dtd|font\/otf|font\/ttf|image\/bmp|image\/vnd.adobe.photoshop|image\/vnd.microsoft.icon/,/|image\/vnd.ms-dds|image\/x-icon|image\/x-ms-bmp|message\/rfc822|model\/gltf-binary|\+json|\+text|\+xml|\+yaml/].map(ue=>ue.source).join(""),"i");class K extends Error{}file.RequestError=K;const z=10080*60,Q=/(gs):\/\/([a-z0-9_.-]+)\/(.+)/g,Y=/(https):\/\/(storage\.googleapis\.com)\/([a-z0-9_.-]+)\/(.+)/g;var te;(function(ue){ue.EXPIRATION_TIME_NA="An expiration time is not available.",ue.DESTINATION_NO_NAME="Destination file should have a name.",ue.INVALID_VALIDATION_FILE_RANGE="Cannot use validation with file ranges (start/end).",ue.MD5_NOT_AVAILABLE="MD5 verification was specified, but is not available for the requested object. MD5 is not available for composite objects.",ue.EQUALS_CONDITION_TWO_ELEMENTS="Equals condition must be an array of 2 elements.",ue.STARTS_WITH_TWO_ELEMENTS="StartsWith condition must be an array of 2 elements.",ue.CONTENT_LENGTH_RANGE_MIN_MAX="ContentLengthRange must have numeric min & max fields.",ue.DOWNLOAD_MISMATCH="The downloaded data did not match the data from the server. To be sure the content is the same, you should download the file again.",ue.UPLOAD_MISMATCH_DELETE_FAIL=`The uploaded data did not match the data from the server.
    As a precaution, we attempted to delete the file, but it was not successful.
    To be sure the content is the same, you should try removing the file manually,
    then uploading the file again.
    

The delete attempt failed with this message:

  `,ue.UPLOAD_MISMATCH=`The uploaded data did not match the data from the server.
    As a precaution, the file has been deleted.
    To be sure the content is the same, you should try uploading the file again.`,ue.MD5_RESUMED_UPLOAD="MD5 cannot be used with a continued resumable upload as MD5 cannot be extended from an existing value",ue.MISSING_RESUME_CRC32C_FINAL_UPLOAD="The CRC32C is missing for the final portion of a resumed upload, which is required for validation. Please provide `resumeCRC32C` if validation is required, or disable `validation`."})(te||(file.FileExceptionMessages=te={}));class ae extends l.ServiceObject{constructor(ee,oe,de={}){var he,Ee;const fe={};let Se;de.generation!==null&&(typeof de.generation=="string"?Se=Number(de.generation):Se=de.generation,isNaN(Se)||(fe.generation=Se)),Object.assign(fe,de.preconditionOpts);const be=de.userProject||ee.userProject;typeof be=="string"&&(fe.userProject=be);const Oe={delete:{reqOpts:{qs:fe}},exists:{reqOpts:{qs:fe}},get:{reqOpts:{qs:fe}},getMetadata:{reqOpts:{qs:fe}},setMetadata:{reqOpts:{qs:fe}}};if(super({parent:ee,baseUrl:"/o",id:encodeURIComponent(oe),methods:Oe}),m.add(this),this.bucket=ee,this.storage=ee.parent,de.generation!==null){let ge;typeof de.generation=="string"?ge=Number(de.generation):ge=de.generation,isNaN(ge)||(this.generation=ge)}this.kmsKeyName=de.kmsKeyName,this.userProject=be,this.name=oe,de.encryptionKey&&this.setEncryptionKey(de.encryptionKey),this.acl=new O.Acl({request:this.request.bind(this),pathPrefix:"/acl"}),this.crc32cGenerator=de.crc32cGenerator||this.bucket.crc32cGenerator,this.instanceRetryValue=(Ee=(he=this.storage)===null||he===void 0?void 0:he.retryOptions)===null||Ee===void 0?void 0:Ee.autoRetry,this.instancePreconditionOpts=de?.preconditionOpts}get cloudStorageURI(){const ee=this.bucket.cloudStorageURI;return ee.pathname=this.name,ee}shouldRetryBasedOnPreconditionAndIdempotencyStrat(ee){var oe;return!(ee?.ifGenerationMatch===void 0&&((oe=this.instancePreconditionOpts)===null||oe===void 0?void 0:oe.ifGenerationMatch)===void 0&&this.storage.retryOptions.idempotencyStrategy===T.IdempotencyStrategy.RetryConditional||this.storage.retryOptions.idempotencyStrategy===T.IdempotencyStrategy.RetryNever)}copy(ee,oe,de){var he,Ee;const fe=new Error(te.DESTINATION_NO_NAME);if(!ee)throw fe;let Se={};typeof oe=="function"?de=oe:oe&&(Se={...oe}),de=de||l.util.noop;let be,Oe,ge;if(typeof ee=="string"){const N=$.exec(ee);N!==null&&N.length===3?(be=this.storage.bucket(N[1]),Oe=N[2]):(be=this.bucket,Oe=ee)}else if(ee instanceof I.Bucket)be=ee,Oe=this.name;else if(ee instanceof ae)be=ee.bucket,Oe=ee.name,ge=ee;else throw fe;const J={};this.generation!==void 0&&(J.sourceGeneration=this.generation),Se.token!==void 0&&(J.rewriteToken=Se.token),Se.userProject!==void 0&&(J.userProject=Se.userProject,delete Se.userProject),Se.predefinedAcl!==void 0&&(J.destinationPredefinedAcl=Se.predefinedAcl,delete Se.predefinedAcl),ge=ge||be.file(Oe);const c={};if(this.encryptionKey!==void 0&&(c["x-goog-copy-source-encryption-algorithm"]="AES256",c["x-goog-copy-source-encryption-key"]=this.encryptionKeyBase64,c["x-goog-copy-source-encryption-key-sha256"]=this.encryptionKeyHash),ge.encryptionKey!==void 0?this.setEncryptionKey(ge.encryptionKey):Se.destinationKmsKeyName!==void 0?(J.destinationKmsKeyName=Se.destinationKmsKeyName,delete Se.destinationKmsKeyName):ge.kmsKeyName!==void 0&&(J.destinationKmsKeyName=ge.kmsKeyName),J.destinationKmsKeyName){this.kmsKeyName=J.destinationKmsKeyName;const N=this.interceptors.indexOf(this.encryptionKeyInterceptor);N>-1&&this.interceptors.splice(N,1)}this.shouldRetryBasedOnPreconditionAndIdempotencyStrat(Se?.preconditionOpts)||(this.storage.retryOptions.autoRetry=!1),((he=Se.preconditionOpts)===null||he===void 0?void 0:he.ifGenerationMatch)!==void 0&&(J.ifGenerationMatch=(Ee=Se.preconditionOpts)===null||Ee===void 0?void 0:Ee.ifGenerationMatch,delete Se.preconditionOpts),this.request({method:"POST",uri:`/rewriteTo/b/${be.name}/o/${encodeURIComponent(ge.name)}`,qs:J,json:Se,headers:c},(N,A)=>{if(this.storage.retryOptions.autoRetry=this.instanceRetryValue,N){de(N,null,A);return}if(A.rewriteToken){const V={token:A.rewriteToken};J.userProject&&(V.userProject=J.userProject),J.destinationKmsKeyName&&(V.destinationKmsKeyName=J.destinationKmsKeyName),this.copy(ge,V,de);return}de(null,ge,A)})}createReadStream(ee={}){ee=Object.assign({decompress:!0},ee);const oe=typeof ee.start=="number"||typeof ee.end=="number",de=ee.end<0;let he,Ee;const fe=new j.PassThroughShim;let Se=!0,be=!1;if(typeof ee.validation=="string"){const N=ee.validation.toLowerCase().trim();Se=N==="crc32c",be=N==="md5"}else ee.validation===!1&&(Se=!1);const Oe=!oe&&(Se||be);if(oe){if(typeof ee.validation=="string"||ee.validation===!0)throw new Error(te.INVALID_VALIDATION_FILE_RANGE);Se=!1,be=!1}const ge=N=>{N&&(Ee?.agent&&Ee.agent.destroy(),fe.destroy(N))},J=(N,A,V)=>{if(N){this.getBufferFromReadable(V).then(M=>{N.message=M.toString("utf8"),fe.destroy(N)});return}Ee=V.request;const ne=V.toJSON().headers,ce=ne["content-encoding"]==="gzip",ie={},u=ne["x-goog-stored-content-encoding"]==="gzip"&&ce||ne["x-goog-stored-content-encoding"]==="identity",P=[];if(Oe&&(typeof ne["x-goog-hash"]=="string"&&ne["x-goog-hash"].split(",").forEach(M=>{const n=M.indexOf("="),L=M.substring(0,n),U=M.substring(n+1);ie[L]=U}),he=new k.HashStreamValidator({crc32c:Se,md5:be,crc32cGenerator:this.crc32cGenerator,crc32cExpected:ie.crc32c,md5Expected:ie.md5})),be&&!ie.md5){const M=new K(te.MD5_NOT_AVAILABLE);M.code="MD5_NOT_AVAILABLE",fe.destroy(M);return}u&&Oe&&he&&P.push(he),ce&&ee.decompress&&P.push(w.createGunzip()),(0,y.pipeline)(V,...P,fe,ge)},c=()=>{const N={alt:"media"};this.generation&&(N.generation=this.generation),ee.userProject&&(N.userProject=ee.userProject);const A={"Accept-Encoding":"gzip","Cache-Control":"no-store"};if(oe){const ne=typeof ee.start=="number"?ee.start:"0",ce=typeof ee.end=="number"?ee.end:"";A.Range=`bytes=${de?ce:`${ne}-${ce}`}`}const V={uri:"",headers:A,qs:N};ee[C.GCCL_GCS_CMD_KEY]&&(V[C.GCCL_GCS_CMD_KEY]=ee[C.GCCL_GCS_CMD_KEY]),this.requestStream(V).on("error",ne=>{fe.destroy(ne)}).on("response",ne=>{fe.emit("response",ne),l.util.handleResp(null,ne,null,J)}).resume()};return fe.on("reading",c),fe}createResumableUpload(ee,oe){var de,he;const Ee=typeof ee=="object"?ee:{};oe=typeof ee=="function"?ee:oe;const fe=this.storage.retryOptions;(((de=Ee?.preconditionOpts)===null||de===void 0?void 0:de.ifGenerationMatch)===void 0&&((he=this.instancePreconditionOpts)===null||he===void 0?void 0:he.ifGenerationMatch)===void 0&&this.storage.retryOptions.idempotencyStrategy===T.IdempotencyStrategy.RetryConditional||this.storage.retryOptions.idempotencyStrategy===T.IdempotencyStrategy.RetryNever)&&(fe.autoRetry=!1),_.createURI({authClient:this.storage.authClient,apiEndpoint:this.storage.apiEndpoint,bucket:this.bucket.name,customRequestOptions:this.getRequestInterceptors().reduce((Se,be)=>be(Se),{}),file:this.name,generation:this.generation,key:this.encryptionKey,kmsKeyName:this.kmsKeyName,metadata:Ee.metadata,offset:Ee.offset,origin:Ee.origin,predefinedAcl:Ee.predefinedAcl,private:Ee.private,public:Ee.public,userProject:Ee.userProject||this.userProject,retryOptions:fe,params:Ee?.preconditionOpts||this.instancePreconditionOpts,universeDomain:this.bucket.storage.universeDomain,[C.GCCL_GCS_CMD_KEY]:Ee[C.GCCL_GCS_CMD_KEY]},oe),this.storage.retryOptions.autoRetry=this.instanceRetryValue}createWriteStream(ee={}){var oe;if((oe=ee.metadata)!==null&&oe!==void 0||(ee.metadata={}),ee.contentType&&(ee.metadata.contentType=ee.contentType),!ee.metadata.contentType||ee.metadata.contentType==="auto"){const A=v.default.getType(this.name);A&&(ee.metadata.contentType=A)}let de=ee.gzip;de==="auto"&&(de=W.test(ee.metadata.contentType||"")),de&&(ee.metadata.contentEncoding="gzip");let he=!0,Ee=!1;if(typeof ee.validation=="string"?(ee.validation=ee.validation.toLowerCase(),he=ee.validation==="crc32c",Ee=ee.validation==="md5"):ee.validation===!1&&(he=!1,Ee=!1),ee.offset){if(Ee)throw new RangeError(te.MD5_RESUMED_UPLOAD);if(he&&!ee.isPartialUpload&&!ee.resumeCRC32C)throw new RangeError(te.MISSING_RESUME_CRC32C_FINAL_UPLOAD)}let fe=A=>{Se.destroy(A||void 0)};const Se=new y.Writable({final(A){fe=A,Oe.end()},write(A,V,ne){Oe.write(A,V,ne)}});Se.once("error",A=>{Oe.destroy(A)}),Se.once("close",()=>{Oe.destroy()});const be=[];de&&be.push(w.createGzip());const Oe=new j.PassThroughShim,ge=()=>{};Oe.on("error",ge);let J=null;if(he||Ee){const A=ee.resumeCRC32C?D.CRC32C.from(ee.resumeCRC32C):void 0;J=new k.HashStreamValidator({crc32c:he,crc32cInstance:A,md5:Ee,crc32cGenerator:this.crc32cGenerator,updateHashesOnly:!0}),be.push(J)}const c=(0,x.default)();let N=!1;return Oe.on("reading",()=>Se.emit("reading")),Oe.on("writing",()=>Se.emit("writing")),c.on("uri",A=>Se.emit("uri",A)),c.on("progress",A=>Se.emit("progress",A)),c.on("response",A=>Se.emit("response",A)),c.once("metadata",()=>{N=!0}),Se.once("writing",()=>{ee.resumable===!1?this.startSimpleUpload_(c,ee):this.startResumableUpload_(c,ee),Oe.removeListener("error",ge),(0,y.pipeline)(Oe,...be,c,async A=>{if(A)return fe(A);if(!N)try{await new Promise((V,ne)=>{c.once("metadata",V),c.once("error",ne)})}catch(V){return fe(V)}J?.crc32c&&Se.emit("crc32c",J.crc32c);try{const V=ee.isPartialUpload&&!this.metadata;J&&!V&&await p(this,m,"m",d).call(this,J,{crc32c:he,md5:Ee}),fe()}catch(V){fe(V)}})}),Se}delete(ee,oe){const de=typeof ee=="object"?ee:{};oe=typeof ee=="function"?ee:oe,this.disableAutoRetryConditionallyIdempotent_(this.methods.delete,I.AvailableServiceObjectMethods.delete,de),super.delete(de).then(he=>oe(null,...he)).catch(oe).finally(()=>{this.storage.retryOptions.autoRetry=this.instanceRetryValue})}download(ee,oe){let de;typeof ee=="function"?(oe=ee,de={}):de=ee;let he=!1;const Ee=((...Oe)=>{he||oe(...Oe),he=!0}),fe=de.destination;delete de.destination,de.encryptionKey&&(this.setEncryptionKey(de.encryptionKey),delete de.encryptionKey);const Se=this.createReadStream(de);let be=!1;fe?Se.on("error",Ee).once("data",Oe=>{be=!0;const ge=h.createWriteStream(fe);ge.write(Oe),Se.pipe(ge).on("error",J=>{Ee(J,Buffer.from(""))}).on("finish",()=>{Ee(null,Oe)})}).on("end",()=>{if(!be){const Oe=Buffer.alloc(0);try{h.writeFileSync(fe,Oe),Ee(null,Oe)}catch(ge){Ee(ge,Oe)}}}):this.getBufferFromReadable(Se).then(Oe=>Ee?.(null,Oe)).catch(Ee)}setEncryptionKey(ee){return this.encryptionKey=ee,this.encryptionKeyBase64=Buffer.from(ee).toString("base64"),this.encryptionKeyHash=o.createHash("sha256").update(this.encryptionKeyBase64,"base64").digest("base64"),this.encryptionKeyInterceptor={request:oe=>(oe.headers=oe.headers||{},oe.headers["x-goog-encryption-algorithm"]="AES256",oe.headers["x-goog-encryption-key"]=this.encryptionKeyBase64,oe.headers["x-goog-encryption-key-sha256"]=this.encryptionKeyHash,oe)},this.interceptors.push(this.encryptionKeyInterceptor),this}static from(ee,oe,de){const he=[...ee.matchAll(Q)],Ee=[...ee.matchAll(Y)];if(he.length>0){const fe=new I.Bucket(oe,he[0][2]);return new ae(fe,he[0][3],de)}else if(Ee.length>0){const fe=new I.Bucket(oe,Ee[0][3]);return new ae(fe,Ee[0][4],de)}else throw new Error("URL string must be of format gs://bucket/file or https://storage.googleapis.com/bucket/file")}get(ee,oe){const de=typeof ee=="object"?ee:{};oe=typeof ee=="function"?ee:oe,super.get(de).then(he=>oe(null,...he)).catch(oe)}getExpirationDate(ee){this.getMetadata((oe,de,he)=>{if(oe){ee(oe,null,he);return}if(!de.retentionExpirationTime){const Ee=new Error(te.EXPIRATION_TIME_NA);ee(Ee,null,he);return}ee(null,new Date(de.retentionExpirationTime),he)})}generateSignedPostPolicyV2(ee,oe){const de=(0,j.normalize)(ee,oe);let he=de.options;const Ee=de.callback,fe=new Date(he.expires);if(isNaN(fe.getTime()))throw new Error(T.ExceptionMessages.EXPIRATION_DATE_INVALID);if(fe.valueOf()<Date.now())throw new Error(T.ExceptionMessages.EXPIRATION_DATE_PAST);he=Object.assign({},he);const Se=[["eq","$key",this.name],{bucket:this.bucket.name}];if(Array.isArray(he.equals)&&(Array.isArray(he.equals[0])||(he.equals=[he.equals]),he.equals.forEach(J=>{if(!Array.isArray(J)||J.length!==2)throw new Error(te.EQUALS_CONDITION_TWO_ELEMENTS);Se.push(["eq",J[0],J[1]])})),Array.isArray(he.startsWith)&&(Array.isArray(he.startsWith[0])||(he.startsWith=[he.startsWith]),he.startsWith.forEach(J=>{if(!Array.isArray(J)||J.length!==2)throw new Error(te.STARTS_WITH_TWO_ELEMENTS);Se.push(["starts-with",J[0],J[1]])})),he.acl&&Se.push({acl:he.acl}),he.successRedirect&&Se.push({success_action_redirect:he.successRedirect}),he.successStatus&&Se.push({success_action_status:he.successStatus}),he.contentLengthRange){const J=he.contentLengthRange.min,c=he.contentLengthRange.max;if(typeof J!="number"||typeof c!="number")throw new Error(te.CONTENT_LENGTH_RANGE_MIN_MAX);Se.push(["content-length-range",J,c])}const be={expiration:fe.toISOString(),conditions:Se},Oe=JSON.stringify(be),ge=Buffer.from(Oe).toString("base64");this.storage.authClient.sign(ge,he.signingEndpoint).then(J=>{Ee(null,{string:Oe,base64:ge,signature:J})},J=>{Ee(new E.SigningError(J.message))})}generateSignedPostPolicyV4(ee,oe){const de=(0,j.normalize)(ee,oe);let he=de.options;const Ee=de.callback,fe=new Date(he.expires);if(isNaN(fe.getTime()))throw new Error(T.ExceptionMessages.EXPIRATION_DATE_INVALID);if(fe.valueOf()<Date.now())throw new Error(T.ExceptionMessages.EXPIRATION_DATE_PAST);if(fe.valueOf()-Date.now()>z*1e3)throw new Error(`Max allowed expiration is seven days (${z} seconds).`);he=Object.assign({},he);let Se=Object.assign({},he.fields);const be=new Date,Oe=(0,j.formatAsUTCISO)(be,!0),ge=(0,j.formatAsUTCISO)(be);(async()=>{const{client_email:c}=await this.storage.authClient.getCredentials(),N=`${c}/${ge}/auto/storage/goog4_request`;Se={...Se,bucket:this.bucket.name,key:this.name,"x-goog-date":Oe,"x-goog-credential":N,"x-goog-algorithm":"GOOG4-RSA-SHA256"};const A=he.conditions||[];Object.entries(Se).forEach(([u,P])=>{u.startsWith("x-ignore-")||A.push({[u]:P})}),delete Se.bucket;const V=(0,j.formatAsUTCISO)(fe,!0,"-",":"),ne={conditions:A,expiration:V},ce=(0,j.unicodeJSONStringify)(ne),ie=Buffer.from(ce).toString("base64");try{const u=await this.storage.authClient.sign(ie,he.signingEndpoint),P=Buffer.from(u,"base64").toString("hex"),M=this.parent.storage.universeDomain;Se.policy=ie,Se["x-goog-signature"]=P;let n;return this.storage.customEndpoint?n=this.storage.apiEndpoint:he.virtualHostedStyle?n=`https://${this.bucket.name}.storage.${M}/`:he.bucketBoundHostname?n=`${he.bucketBoundHostname}/`:n=`https://storage.${M}/${this.bucket.name}/`,{url:n,fields:Se}}catch(u){throw new E.SigningError(u.message)}})().then(c=>Ee(null,c),Ee)}getSignedUrl(ee,oe){const de=G[ee.action],he=(0,j.objectKeyToLowercase)(ee.extensionHeaders||{});ee.action==="resumable"&&(he["x-goog-resumable"]="start");const Ee=Object.assign({},ee.queryParams);typeof ee.responseType=="string"&&(Ee["response-content-type"]=ee.responseType),typeof ee.promptSaveAs=="string"&&(Ee["response-content-disposition"]='attachment; filename="'+ee.promptSaveAs+'"'),typeof ee.responseDisposition=="string"&&(Ee["response-content-disposition"]=ee.responseDisposition),this.generation&&(Ee.generation=this.generation.toString());const fe={method:de,expires:ee.expires,accessibleAt:ee.accessibleAt,extensionHeaders:he,queryParams:Ee,contentMd5:ee.contentMd5,contentType:ee.contentType,host:ee.host};ee.cname&&(fe.cname=ee.cname),ee.version&&(fe.version=ee.version),ee.virtualHostedStyle&&(fe.virtualHostedStyle=ee.virtualHostedStyle),this.signer||(this.signer=new E.URLSigner(this.storage.authClient,this.bucket,this,this.storage)),this.signer.getSignedUrl(fe).then(Se=>oe(null,Se),oe)}isPublic(ee){var oe;const de=((oe=this.storage)===null||oe===void 0?void 0:oe.interceptors)||[],he=this.interceptors||[],fe=de.concat(he).reduce((Se,be)=>{const Oe=be.request({uri:`${this.storage.apiEndpoint}/${this.bucket.name}/${encodeURIComponent(this.name)}`});return Object.assign(Se,Oe.headers),Se},{});l.util.makeRequest({method:"GET",uri:`${this.storage.apiEndpoint}/${this.bucket.name}/${encodeURIComponent(this.name)}`,headers:fe},{retryOptions:this.storage.retryOptions},Se=>{Se?Se.code===403?ee(null,!1):ee(Se):ee(null,!0)})}makePrivate(ee,oe){var de,he;const Ee=typeof ee=="object"?ee:{};oe=typeof ee=="function"?ee:oe;const fe={predefinedAcl:Ee.strict?"private":"projectPrivate"};((de=Ee.preconditionOpts)===null||de===void 0?void 0:de.ifMetagenerationMatch)!==void 0&&(fe.ifMetagenerationMatch=(he=Ee.preconditionOpts)===null||he===void 0?void 0:he.ifMetagenerationMatch,delete Ee.preconditionOpts),Ee.userProject&&(fe.userProject=Ee.userProject);const Se={...Ee.metadata,acl:null};this.setMetadata(Se,fe,oe)}makePublic(ee){ee=ee||l.util.noop,this.acl.add({entity:"allUsers",role:"READER"},(oe,de,he)=>{ee(oe,he)})}publicUrl(){return`${this.storage.apiEndpoint}/${this.bucket.name}/${encodeURIComponent(this.name)}`}moveFileAtomic(ee,oe,de){var he,Ee;const fe=new Error(te.DESTINATION_NO_NAME);if(!ee)throw fe;let Se={};typeof oe=="function"?de=oe:oe&&(Se={...oe}),de=de||l.util.noop;let be,Oe;if(typeof ee=="string"){const J=$.exec(ee);J!==null&&J.length===3?be=J[2]:be=ee}else if(ee instanceof ae)be=ee.name,Oe=ee;else throw fe;Oe=Oe||this.bucket.file(be),this.shouldRetryBasedOnPreconditionAndIdempotencyStrat(Se?.preconditionOpts)||(this.storage.retryOptions.autoRetry=!1);const ge={};Se.userProject!==void 0&&(ge.userProject=Se.userProject,delete Se.userProject),((he=Se.preconditionOpts)===null||he===void 0?void 0:he.ifGenerationMatch)!==void 0&&(ge.ifGenerationMatch=(Ee=Se.preconditionOpts)===null||Ee===void 0?void 0:Ee.ifGenerationMatch,delete Se.preconditionOpts),this.request({method:"POST",uri:`/moveTo/o/${encodeURIComponent(Oe.name)}`,qs:ge,json:Se},(J,c)=>{if(this.storage.retryOptions.autoRetry=this.instanceRetryValue,J){de(J,null,c);return}de(null,Oe,c)})}move(ee,oe,de){const he=typeof oe=="object"?oe:{};de=typeof oe=="function"?oe:de,de=de||l.util.noop,this.copy(ee,he,(Ee,fe,Se)=>{if(Ee){Ee.message="file#copy failed with an error - "+Ee.message,de(Ee,null,Se);return}this.name!==fe.name||this.bucket.name!==fe.bucket.name?this.delete(he,(be,Oe)=>{if(be){be.message="file#delete failed with an error - "+be.message,de(be,fe,Oe);return}de(null,fe,Se)}):de(null,fe,Se)})}rename(ee,oe,de){const he=typeof oe=="object"?oe:{};de=typeof oe=="function"?oe:de,de=de||l.util.noop,this.move(ee,he,de)}async restore(ee){const[oe]=await this.request({method:"POST",uri:"/restore",qs:ee});return oe}request(ee,oe){return this.parent.request.call(this,ee,oe)}rotateEncryptionKey(ee,oe){var de;oe=typeof ee=="function"?ee:oe;let he={};typeof ee=="string"||ee instanceof Buffer?he={encryptionKey:ee}:typeof ee=="object"&&(he=ee);const Ee=this.bucket.file(this.id,he),fe=((de=he.preconditionOpts)===null||de===void 0?void 0:de.ifGenerationMatch)!==void 0?{preconditionOpts:he.preconditionOpts}:{};this.copy(Ee,fe,oe)}save(ee,oe,de){de=typeof oe=="function"?oe:de;const he=typeof oe=="object"?oe:{};let Ee=this.storage.retryOptions.maxRetries;this.shouldRetryBasedOnPreconditionAndIdempotencyStrat(he?.preconditionOpts)||(Ee=0);const fe=(0,q.default)(async Se=>new Promise((be,Oe)=>{Ee===0&&(this.storage.retryOptions.autoRetry=!1);const ge=this.createWriteStream(he);he.onUploadProgress&&ge.on("progress",he.onUploadProgress);const J=c=>this.storage.retryOptions.autoRetry&&this.storage.retryOptions.retryableErrorFn(c)?Oe(c):Se(c);typeof ee=="string"||Buffer.isBuffer(ee)||ee instanceof Uint8Array?ge.on("error",J).on("finish",()=>be()).end(ee):(0,y.pipeline)(ee,ge,c=>{if(c){if(typeof ee!="function")return Se(c);J(c)}else be()})}),{retries:Ee,factor:this.storage.retryOptions.retryDelayMultiplier,maxTimeout:this.storage.retryOptions.maxRetryDelay*1e3,maxRetryTime:this.storage.retryOptions.totalTimeout*1e3});return de?fe.then(()=>{if(de)return de()}).catch(de):fe}setMetadata(ee,oe,de){const he=typeof oe=="object"?oe:{};de=typeof oe=="function"?oe:de,this.disableAutoRetryConditionallyIdempotent_(this.methods.setMetadata,I.AvailableServiceObjectMethods.setMetadata,he),super.setMetadata(ee,he).then(Ee=>de(null,...Ee)).catch(de).finally(()=>{this.storage.retryOptions.autoRetry=this.instanceRetryValue})}setStorageClass(ee,oe,de){de=typeof oe=="function"?oe:de;const Ee={...typeof oe=="object"?oe:{},storageClass:ee.replace(/-/g,"_").replace(/([a-z])([A-Z])/g,(fe,Se,be)=>Se+"_"+be).toUpperCase()};this.copy(this,Ee,(fe,Se,be)=>{if(fe){de(fe,be);return}this.metadata=Se.metadata,de(null,be)})}setUserProject(ee){this.bucket.setUserProject.call(this,ee)}startResumableUpload_(ee,oe={}){var de;(de=oe.metadata)!==null&&de!==void 0||(oe.metadata={});const he=this.storage.retryOptions;this.shouldRetryBasedOnPreconditionAndIdempotencyStrat(oe.preconditionOpts)||(he.autoRetry=!1);const Ee={authClient:this.storage.authClient,apiEndpoint:this.storage.apiEndpoint,bucket:this.bucket.name,customRequestOptions:this.getRequestInterceptors().reduce((Se,be)=>be(Se),{}),file:this.name,generation:this.generation,isPartialUpload:oe.isPartialUpload,key:this.encryptionKey,kmsKeyName:this.kmsKeyName,metadata:oe.metadata,offset:oe.offset,predefinedAcl:oe.predefinedAcl,private:oe.private,public:oe.public,uri:oe.uri,userProject:oe.userProject||this.userProject,retryOptions:{...he},params:oe?.preconditionOpts||this.instancePreconditionOpts,chunkSize:oe?.chunkSize,highWaterMark:oe?.highWaterMark,universeDomain:this.bucket.storage.universeDomain,[C.GCCL_GCS_CMD_KEY]:oe[C.GCCL_GCS_CMD_KEY]};let fe;try{fe=_.upload(Ee)}catch(Se){ee.destroy(Se),this.storage.retryOptions.autoRetry=this.instanceRetryValue;return}fe.on("response",Se=>{ee.emit("response",Se)}).on("uri",Se=>{ee.emit("uri",Se)}).on("metadata",Se=>{this.metadata=Se,ee.emit("metadata")}).on("finish",()=>{ee.emit("complete")}).on("progress",Se=>ee.emit("progress",Se)),ee.setWritable(fe),this.storage.retryOptions.autoRetry=this.instanceRetryValue}startSimpleUpload_(ee,oe={}){var de;(de=oe.metadata)!==null&&de!==void 0||(oe.metadata={});const he=this.storage.apiEndpoint,Ee=this.bucket.name,fe=`${he}/upload/storage/v1/b/${Ee}/o`,Se={qs:{name:this.name},uri:fe,[C.GCCL_GCS_CMD_KEY]:oe[C.GCCL_GCS_CMD_KEY]};this.generation!==void 0&&(Se.qs.ifGenerationMatch=this.generation),this.kmsKeyName!==void 0&&(Se.qs.kmsKeyName=this.kmsKeyName),typeof oe.timeout=="number"&&(Se.timeout=oe.timeout),(oe.userProject||this.userProject)&&(Se.qs.userProject=oe.userProject||this.userProject),oe.predefinedAcl?Se.qs.predefinedAcl=oe.predefinedAcl:oe.private?Se.qs.predefinedAcl="private":oe.public&&(Se.qs.predefinedAcl="publicRead"),Object.assign(Se.qs,this.instancePreconditionOpts,oe.preconditionOpts),l.util.makeWritableStream(ee,{makeAuthenticatedRequest:be=>{this.request(be,(Oe,ge,J)=>{if(Oe){ee.destroy(Oe);return}this.metadata=ge,ee.emit("metadata",ge),ee.emit("response",J),ee.emit("complete")})},metadata:oe.metadata,request:Se})}disableAutoRetryConditionallyIdempotent_(ee,oe,de){var he,Ee,fe,Se;(typeof ee=="object"&&((Ee=(he=ee?.reqOpts)===null||he===void 0?void 0:he.qs)===null||Ee===void 0?void 0:Ee.ifGenerationMatch)===void 0&&de?.ifGenerationMatch===void 0&&oe===I.AvailableServiceObjectMethods.delete&&this.storage.retryOptions.idempotencyStrategy===T.IdempotencyStrategy.RetryConditional||this.storage.retryOptions.idempotencyStrategy===T.IdempotencyStrategy.RetryNever)&&(this.storage.retryOptions.autoRetry=!1),(typeof ee=="object"&&((Se=(fe=ee?.reqOpts)===null||fe===void 0?void 0:fe.qs)===null||Se===void 0?void 0:Se.ifMetagenerationMatch)===void 0&&de?.ifMetagenerationMatch===void 0&&oe===I.AvailableServiceObjectMethods.setMetadata&&this.storage.retryOptions.idempotencyStrategy===T.IdempotencyStrategy.RetryConditional||this.storage.retryOptions.idempotencyStrategy===T.IdempotencyStrategy.RetryNever)&&(this.storage.retryOptions.autoRetry=!1)}async getBufferFromReadable(ee){const oe=[];for await(const de of ee)oe.push(de);return Buffer.concat(oe)}}file.File=ae,m=new WeakSet,d=async function(ee,oe={}){const de=this.metadata;let he=!!(oe.crc32c||oe.md5);if(oe.crc32c&&de.crc32c&&(he=!ee.test("crc32c",de.crc32c)),oe.md5&&de.md5Hash&&(he=!ee.test("md5",de.md5Hash)),he){const Ee=[];let fe="",Se="";try{await this.delete(),oe.md5&&!de.md5Hash?(fe="MD5_NOT_AVAILABLE",Se=te.MD5_NOT_AVAILABLE):(fe="FILE_NO_UPLOAD",Se=te.UPLOAD_MISMATCH)}catch(Oe){const ge=Oe;fe="FILE_NO_UPLOAD_DELETE",Se=`${te.UPLOAD_MISMATCH_DELETE_FAIL}${ge.message}`,Ee.push(ge)}const be=new K(Se);throw be.code=fe,be.errors=Ee,be}return!0};return(0,a.promisifyAll)(ae,{exclude:["cloudStorageURI","publicUrl","request","save","setEncryptionKey","shouldRetryBasedOnPreconditionAndIdempotencyStrat","getBufferFromReadable","restore"]}),file}var iam={},hasRequiredIam;function requireIam(){if(hasRequiredIam)return iam;hasRequiredIam=1,Object.defineProperty(iam,"__esModule",{value:!0}),iam.Iam=iam.IAMExceptionMessages=void 0;const e=requireSrc$5(),t=requireUtil$6();var s;(function(g){g.POLICY_OBJECT_REQUIRED="A policy object is required.",g.PERMISSIONS_REQUIRED="Permissions are required."})(s||(iam.IAMExceptionMessages=s={}));class p{constructor(m){this.request_=m.request.bind(m),this.resourceId_="buckets/"+m.getId()}getPolicy(m,d){const{options:l,callback:a}=(0,t.normalize)(m,d),o={};l.userProject&&(o.userProject=l.userProject),l.requestedPolicyVersion!==null&&l.requestedPolicyVersion!==void 0&&(o.optionsRequestedPolicyVersion=l.requestedPolicyVersion),this.request_({uri:"/iam",qs:o},a)}setPolicy(m,d,l){if(m===null||typeof m!="object")throw new Error(s.POLICY_OBJECT_REQUIRED);const{options:a,callback:o}=(0,t.normalize)(d,l);let h;m.etag===void 0&&(h=0),this.request_({method:"PUT",uri:"/iam",maxRetries:h,json:Object.assign({resourceId:this.resourceId_},m),qs:a},o)}testPermissions(m,d,l){if(!Array.isArray(m)&&typeof m!="string")throw new Error(s.PERMISSIONS_REQUIRED);const{options:a,callback:o}=(0,t.normalize)(d,l),h=Array.isArray(m)?m:[m],v=Object.assign({permissions:h},a);this.request_({uri:"/iam/testPermissions",qs:v,useQuerystring:!0},(_,y)=>{if(_){o(_,null,y);return}const w=Array.isArray(y.permissions)?y.permissions:[],T=h.reduce((I,O)=>(I[O]=w.indexOf(O)>-1,I),{});o(null,T,y)})}}iam.Iam=p;return(0,e.promisifyAll)(p),iam}var notification={},hasRequiredNotification;function requireNotification(){if(hasRequiredNotification)return notification;hasRequiredNotification=1,Object.defineProperty(notification,"__esModule",{value:!0}),notification.Notification=void 0;const e=requireNodejsCommon(),t=requireSrc$5();class s extends e.ServiceObject{constructor(g,m){const d={},l={create:!0,delete:{reqOpts:{qs:d}},get:{reqOpts:{qs:d}},getMetadata:{reqOpts:{qs:d}},exists:!0};super({parent:g,baseUrl:"/notificationConfigs",id:m.toString(),createMethod:g.createNotification.bind(g),methods:l})}}notification.Notification=s;return(0,t.promisifyAll)(s),notification}var hasRequiredBucket;function requireBucket(){if(hasRequiredBucket)return bucket;hasRequiredBucket=1;var e=bucket&&bucket.__createBinding||(Object.create?(function($,W,K,z){z===void 0&&(z=K);var Q=Object.getOwnPropertyDescriptor(W,K);(!Q||("get"in Q?!W.__esModule:Q.writable||Q.configurable))&&(Q={enumerable:!0,get:function(){return W[K]}}),Object.defineProperty($,z,Q)}):(function($,W,K,z){z===void 0&&(z=K),$[z]=W[K]})),t=bucket&&bucket.__setModuleDefault||(Object.create?(function($,W){Object.defineProperty($,"default",{enumerable:!0,value:W})}):function($,W){$.default=W}),s=bucket&&bucket.__importStar||(function(){var $=function(W){return $=Object.getOwnPropertyNames||function(K){var z=[];for(var Q in K)Object.prototype.hasOwnProperty.call(K,Q)&&(z[z.length]=Q);return z},$(W)};return function(W){if(W&&W.__esModule)return W;var K={};if(W!=null)for(var z=$(W),Q=0;Q<z.length;Q++)z[Q]!=="default"&&e(K,W,z[Q]);return t(K,W),K}})(),p=bucket&&bucket.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(bucket,"__esModule",{value:!0}),bucket.Bucket=bucket.BucketExceptionMessages=bucket.AvailableServiceObjectMethods=bucket.BucketActionToHTTPMethod=void 0;const g=requireNodejsCommon(),m=requireSrc$4(),d=requireSrc$5(),l=s(require$$1$3),a=p(requireMime()),o=s(require$$1$3),h=p(requirePLimit()),v=require$$1$3,_=p(requireLib$1()),y=requireUtil$6(),w=requireAcl(),T=requireFile(),I=requireIam(),O=requireNotification(),E=requireStorage$2(),C=requireSigner(),x=require$$1$3,j=require$$1$3;var D;(function($){$.list="GET"})(D||(bucket.BucketActionToHTTPMethod=D={}));var k;(function($){$[$.setMetadata=0]="setMetadata",$[$.delete=1]="delete"})(k||(bucket.AvailableServiceObjectMethods=k={}));var q;(function($){$.PROVIDE_SOURCE_FILE="You must provide at least one source file.",$.DESTINATION_FILE_NOT_SPECIFIED="A destination file must be specified.",$.CHANNEL_ID_REQUIRED="An ID is required to create a channel.",$.TOPIC_NAME_REQUIRED="A valid topic name is required.",$.CONFIGURATION_OBJECT_PREFIX_REQUIRED="A configuration object with a prefix is required.",$.SPECIFY_FILE_NAME="A file name must be specified.",$.METAGENERATION_NOT_PROVIDED="A metageneration must be provided.",$.SUPPLY_NOTIFICATION_ID="You must supply a notification ID."})(q||(bucket.BucketExceptionMessages=q={}));class G extends g.ServiceObject{getFilesStream(W){return new x.Readable}constructor(W,K,z){var Q,Y,te,ae;z=z||{},K=K.replace(/^gs:\/\//,"").replace(/\/+$/,"");const ue={};!((Q=z?.preconditionOpts)===null||Q===void 0)&&Q.ifGenerationMatch&&(ue.ifGenerationMatch=z.preconditionOpts.ifGenerationMatch),!((Y=z?.preconditionOpts)===null||Y===void 0)&&Y.ifGenerationNotMatch&&(ue.ifGenerationNotMatch=z.preconditionOpts.ifGenerationNotMatch),!((te=z?.preconditionOpts)===null||te===void 0)&&te.ifMetagenerationMatch&&(ue.ifMetagenerationMatch=z.preconditionOpts.ifMetagenerationMatch),!((ae=z?.preconditionOpts)===null||ae===void 0)&&ae.ifMetagenerationNotMatch&&(ue.ifMetagenerationNotMatch=z.preconditionOpts.ifMetagenerationNotMatch);const ee=z.userProject;typeof ee=="string"&&(ue.userProject=ee);const oe={create:{reqOpts:{qs:ue}},delete:{reqOpts:{qs:ue}},exists:{reqOpts:{qs:ue}},get:{reqOpts:{qs:ue}},getMetadata:{reqOpts:{qs:ue}},setMetadata:{reqOpts:{qs:ue}}};super({parent:W,baseUrl:"/b",id:K,createMethod:W.createBucket.bind(W),methods:oe}),this.name=K,this.storage=W,this.userProject=z.userProject,this.acl=new w.Acl({request:this.request.bind(this),pathPrefix:"/acl"}),this.acl.default=new w.Acl({request:this.request.bind(this),pathPrefix:"/defaultObjectAcl"}),this.crc32cGenerator=z.crc32cGenerator||this.storage.crc32cGenerator,this.iam=new I.Iam(this),this.getFilesStream=m.paginator.streamify("getFiles"),this.instanceRetryValue=W.retryOptions.autoRetry,this.instancePreconditionOpts=z?.preconditionOpts}get cloudStorageURI(){const W=new j.URL("gs://");return W.host=this.name,W}addLifecycleRule(W,K,z){let Q={};typeof K=="function"?z=K:K&&(Q=K),Q=Q||{};const Y=Array.isArray(W)?W:[W];for(const te of Y)te.condition.createdBefore instanceof Date&&(te.condition.createdBefore=te.condition.createdBefore.toISOString().replace(/T.+$/,"")),te.condition.customTimeBefore instanceof Date&&(te.condition.customTimeBefore=te.condition.customTimeBefore.toISOString().replace(/T.+$/,"")),te.condition.noncurrentTimeBefore instanceof Date&&(te.condition.noncurrentTimeBefore=te.condition.noncurrentTimeBefore.toISOString().replace(/T.+$/,""));if(Q.append===!1){this.setMetadata({lifecycle:{rule:Y}},Q,z);return}this.getMetadata((te,ae)=>{var ue,ee;if(te){z(te);return}const oe=Array.isArray((ue=ae.lifecycle)===null||ue===void 0?void 0:ue.rule)?(ee=ae.lifecycle)===null||ee===void 0?void 0:ee.rule:[];this.setMetadata({lifecycle:{rule:oe.concat(Y)}},Q,z)})}combine(W,K,z,Q){var Y;if(!Array.isArray(W)||W.length===0)throw new Error(q.PROVIDE_SOURCE_FILE);if(!K)throw new Error(q.DESTINATION_FILE_NOT_SPECIFIED);let te={};typeof z=="function"?Q=z:z&&(te=z),this.disableAutoRetryConditionallyIdempotent_(this.methods.setMetadata,k.setMetadata,te);const ae=oe=>oe instanceof T.File?oe:this.file(oe);W=W.map(ae);const ue=ae(K);if(Q=Q||g.util.noop,!ue.metadata.contentType){const oe=a.default.getType(ue.name)||void 0;oe&&(ue.metadata.contentType=oe)}let ee=this.storage.retryOptions.maxRetries;(((Y=ue?.instancePreconditionOpts)===null||Y===void 0?void 0:Y.ifGenerationMatch)===void 0&&te.ifGenerationMatch===void 0&&this.storage.retryOptions.idempotencyStrategy===E.IdempotencyStrategy.RetryConditional||this.storage.retryOptions.idempotencyStrategy===E.IdempotencyStrategy.RetryNever)&&(ee=0),te.ifGenerationMatch===void 0&&Object.assign(te,ue.instancePreconditionOpts,te),ue.request({method:"POST",uri:"/compose",maxRetries:ee,json:{destination:{contentType:ue.metadata.contentType,contentEncoding:ue.metadata.contentEncoding},sourceObjects:W.map(oe=>{const de={name:oe.name};return oe.metadata&&oe.metadata.generation&&(de.generation=parseInt(oe.metadata.generation.toString())),de})},qs:te},(oe,de)=>{if(this.storage.retryOptions.autoRetry=this.instanceRetryValue,oe){Q(oe,null,de);return}Q(null,ue,de)})}createChannel(W,K,z,Q){if(typeof W!="string")throw new Error(q.CHANNEL_ID_REQUIRED);let Y={};typeof z=="function"?Q=z:z&&(Y=z),this.request({method:"POST",uri:"/o/watch",json:Object.assign({id:W,type:"web_hook"},K),qs:Y},(te,ae)=>{if(te){Q(te,null,ae);return}const ue=ae.resourceId,ee=this.storage.channel(W,ue);ee.metadata=ae,Q(null,ee,ae)})}createNotification(W,K,z){let Q={};if(typeof K=="function"?z=K:K&&(Q=K),W!==null&&typeof W=="object"&&g.util.isCustomType(W,"pubsub/topic")&&(W=W.name),typeof W!="string")throw new Error(q.TOPIC_NAME_REQUIRED);const te=Object.assign({topic:W},Q);te.topic.indexOf("projects")!==0&&(te.topic="projects/{{projectId}}/topics/"+te.topic),te.topic=`//pubsub.${this.storage.universeDomain}/`+te.topic,te.payloadFormat||(te.payloadFormat="JSON_API_V1");const ae={};te.userProject&&(ae.userProject=te.userProject,delete te.userProject),this.request({method:"POST",uri:"/notificationConfigs",json:(0,y.convertObjKeysToSnakeCase)(te),qs:ae,maxRetries:0},(ue,ee)=>{if(ue){z(ue,null,ee);return}const oe=this.notification(ee.id);oe.metadata=ee,z(null,oe,ee)})}deleteFiles(W,K){let z={};typeof W=="function"?K=W:W&&(z=W);const Q=10,Y=1e3,te=[],ae=ue=>ue.delete(z).catch(ee=>{if(!z.force)throw ee;te.push(ee)});(async()=>{try{let ue=[];const ee=(0,h.default)(Q),oe=this.getFilesStream(z);for await(const de of oe)ue.length>=Y&&(await Promise.all(ue),ue=[]),ue.push(ee(()=>ae(de)).catch(he=>{throw oe.destroy(),he}));await Promise.all(ue),K(te.length>0?te:null)}catch(ue){K(ue);return}})()}deleteLabels(W,K,z){let Q=new Array,Y={};typeof W=="function"?z=W:typeof W=="string"?Q=[W]:Array.isArray(W)?Q=W:W&&(Y=W),typeof K=="function"?z=K:K&&(Y=K);const te=ae=>{const ue=ae.reduce((ee,oe)=>(ee[oe]=null,ee),{});Y?.ifMetagenerationMatch!==void 0?this.setLabels(ue,Y,z):this.setLabels(ue,z)};Q.length===0?this.getLabels((ae,ue)=>{if(ae){z(ae);return}te(Object.keys(ue))}):te(Q)}disableRequesterPays(W,K){let z={};typeof W=="function"?K=W:W&&(z=W),this.setMetadata({billing:{requesterPays:!1}},z,K)}enableLogging(W,K){if(!W||typeof W=="function"||typeof W.prefix>"u")throw new Error(q.CONFIGURATION_OBJECT_PREFIX_REQUIRED);let z=this.id;W.bucket&&W.bucket instanceof G?z=W.bucket.id:W.bucket&&typeof W.bucket=="string"&&(z=W.bucket);const Q={};W?.ifMetagenerationMatch&&(Q.ifMetagenerationMatch=W.ifMetagenerationMatch),W?.ifMetagenerationNotMatch&&(Q.ifMetagenerationNotMatch=W.ifMetagenerationNotMatch),(async()=>{try{const[Y]=await this.iam.getPolicy();Y.bindings.push({members:["group:cloud-storage-analytics@google.com"],role:"roles/storage.objectCreator"}),await this.iam.setPolicy(Y),this.setMetadata({logging:{logBucket:z,logObjectPrefix:W.prefix}},Q,K)}catch(Y){K(Y);return}})()}enableRequesterPays(W,K){let z={};typeof W=="function"?K=W:W&&(z=W),this.setMetadata({billing:{requesterPays:!0}},z,K)}file(W,K){if(!W)throw Error(q.SPECIFY_FILE_NAME);return new T.File(this,W,K)}getFiles(W,K){let z=typeof W=="object"?W:{};K||(K=W),z=Object.assign({},z),z.fields&&z.autoPaginate&&!z.fields.includes("nextPageToken")&&(z.fields=`${z.fields},nextPageToken`),this.request({uri:"/o",qs:z},(Q,Y)=>{if(Q){K(Q,null,null,Y);return}const ae=(Y.items?Y.items:[]).map(ee=>{const oe={};if(z.fields)return ee;z.versions&&(oe.generation=ee.generation),ee.kmsKeyName&&(oe.kmsKeyName=ee.kmsKeyName);const de=this.file(ee.name,oe);return de.metadata=ee,de});let ue=null;Y.nextPageToken&&(ue=Object.assign({},z,{pageToken:Y.nextPageToken})),K(null,ae,ue,Y)})}getLabels(W,K){let z={};typeof W=="function"?K=W:W&&(z=W),this.getMetadata(z,(Q,Y)=>{if(Q){K(Q,null);return}K(null,Y?.labels||{})})}getNotifications(W,K){let z={};typeof W=="function"?K=W:W&&(z=W),this.request({uri:"/notificationConfigs",qs:z},(Q,Y)=>{if(Q){K(Q,null,Y);return}const ae=(Y.items?Y.items:[]).map(ue=>{const ee=this.notification(ue.id);return ee.metadata=ue,ee});K(null,ae,Y)})}getSignedUrl(W,K){const Q={method:D[W.action],expires:W.expires,version:W.version,cname:W.cname,extensionHeaders:W.extensionHeaders||{},queryParams:W.queryParams||{},host:W.host,signingEndpoint:W.signingEndpoint};this.signer||(this.signer=new C.URLSigner(this.storage.authClient,this,void 0,this.storage)),this.signer.getSignedUrl(Q).then(Y=>K(null,Y),K)}lock(W,K){const z=typeof W;if(z!=="number"&&z!=="string")throw new Error(q.METAGENERATION_NOT_PROVIDED);this.request({method:"POST",uri:"/lockRetentionPolicy",qs:{ifMetagenerationMatch:W}},K)}async restore(W){const[K]=await this.request({method:"POST",uri:"/restore",qs:W});return K}makePrivate(W,K){var z,Q,Y,te;const ae=typeof W=="object"?W:{};K=typeof W=="function"?W:K,ae.private=!0;const ue={predefinedAcl:"projectPrivate"};ae.userProject&&(ue.userProject=ae.userProject),!((z=ae.preconditionOpts)===null||z===void 0)&&z.ifGenerationMatch&&(ue.ifGenerationMatch=ae.preconditionOpts.ifGenerationMatch),!((Q=ae.preconditionOpts)===null||Q===void 0)&&Q.ifGenerationNotMatch&&(ue.ifGenerationNotMatch=ae.preconditionOpts.ifGenerationNotMatch),!((Y=ae.preconditionOpts)===null||Y===void 0)&&Y.ifMetagenerationMatch&&(ue.ifMetagenerationMatch=ae.preconditionOpts.ifMetagenerationMatch),!((te=ae.preconditionOpts)===null||te===void 0)&&te.ifMetagenerationNotMatch&&(ue.ifMetagenerationNotMatch=ae.preconditionOpts.ifMetagenerationNotMatch);const ee={...ae.metadata,acl:null};this.setMetadata(ee,ue,oe=>{oe&&K(oe),(ae.includeFiles?(0,v.promisify)(this.makeAllFilesPublicPrivate_).call(this,ae):Promise.resolve([])).then(he=>K(null,he)).catch(K)})}makePublic(W,K){const z=typeof W=="object"?W:{};K=typeof W=="function"?W:K;const Q={public:!0,...z};this.acl.add({entity:"allUsers",role:"READER"}).then(()=>this.acl.default.add({entity:"allUsers",role:"READER"})).then(()=>Q.includeFiles?(0,v.promisify)(this.makeAllFilesPublicPrivate_).call(this,Q):[]).then(Y=>K(null,Y),K)}notification(W){if(!W)throw new Error(q.SUPPLY_NOTIFICATION_ID);return new O.Notification(this,W)}removeRetentionPeriod(W,K){const z=typeof W=="object"?W:{};K=typeof W=="function"?W:K,this.setMetadata({retentionPolicy:null},z,K)}request(W,K){return this.userProject&&(!W.qs||!W.qs.userProject)&&(W.qs={...W.qs,userProject:this.userProject}),super.request(W,K)}setLabels(W,K,z){const Q=typeof K=="object"?K:{};z=typeof K=="function"?K:z,z=z||g.util.noop,this.setMetadata({labels:W},Q,z)}setMetadata(W,K,z){const Q=typeof K=="object"?K:{};z=typeof K=="function"?K:z,this.disableAutoRetryConditionallyIdempotent_(this.methods.setMetadata,k.setMetadata,Q),super.setMetadata(W,Q).then(Y=>z(null,...Y)).catch(z).finally(()=>{this.storage.retryOptions.autoRetry=this.instanceRetryValue})}setRetentionPeriod(W,K,z){const Q=typeof K=="object"?K:{};z=typeof K=="function"?K:z,this.setMetadata({retentionPolicy:{retentionPeriod:W.toString()}},Q,z)}setCorsConfiguration(W,K,z){const Q=typeof K=="object"?K:{};z=typeof K=="function"?K:z,this.setMetadata({cors:W},Q,z)}setStorageClass(W,K,z){const Q=typeof K=="object"?K:{};z=typeof K=="function"?K:z,W=W.replace(/-/g,"_").replace(/([a-z])([A-Z])/g,(Y,te,ae)=>te+"_"+ae).toUpperCase(),this.setMetadata({storageClass:W},Q,z)}setUserProject(W){this.userProject=W,["create","delete","exists","get","getMetadata","setMetadata"].forEach(z=>{const Q=this.methods[z];typeof Q=="object"&&(typeof Q.reqOpts=="object"?Object.assign(Q.reqOpts.qs,{userProject:W}):Q.reqOpts={qs:{userProject:W}})})}upload(W,K,z){var Q,Y;const te=oe=>{const de=(0,_.default)(async he=>{await new Promise((Ee,fe)=>{var Se,be;oe===0&&(!((be=(Se=ee?.storage)===null||Se===void 0?void 0:Se.retryOptions)===null||be===void 0)&&be.autoRetry)&&(ee.storage.retryOptions.autoRetry=!1);const Oe=ee.createWriteStream(ae);ae.onUploadProgress&&Oe.on("progress",ae.onUploadProgress),l.createReadStream(W).on("error",he).pipe(Oe).on("error",ge=>this.storage.retryOptions.autoRetry&&this.storage.retryOptions.retryableErrorFn(ge)?fe(ge):he(ge)).on("finish",()=>Ee())})},{retries:oe,factor:this.storage.retryOptions.retryDelayMultiplier,maxTimeout:this.storage.retryOptions.maxRetryDelay*1e3,maxRetryTime:this.storage.retryOptions.totalTimeout*1e3});return z?de.then(()=>{if(z)return z(null,ee,ee.metadata)}).catch(z):de};if(commonjsGlobal.GCLOUD_SANDBOX_ENV)return;let ae=typeof K=="object"?K:{};z=typeof K=="function"?K:z,ae=Object.assign({metadata:{}},ae);let ue=this.storage.retryOptions.maxRetries;(((Q=ae?.preconditionOpts)===null||Q===void 0?void 0:Q.ifGenerationMatch)===void 0&&((Y=this.instancePreconditionOpts)===null||Y===void 0?void 0:Y.ifGenerationMatch)===void 0&&this.storage.retryOptions.idempotencyStrategy===E.IdempotencyStrategy.RetryConditional||this.storage.retryOptions.idempotencyStrategy===E.IdempotencyStrategy.RetryNever)&&(ue=0);let ee;if(ae.destination instanceof T.File)ee=ae.destination;else if(ae.destination!==null&&typeof ae.destination=="string")ee=this.file(ae.destination,{encryptionKey:ae.encryptionKey,kmsKeyName:ae.kmsKeyName,preconditionOpts:this.instancePreconditionOpts});else{const oe=o.basename(W);ee=this.file(oe,{encryptionKey:ae.encryptionKey,kmsKeyName:ae.kmsKeyName,preconditionOpts:this.instancePreconditionOpts})}te(ue)}makeAllFilesPublicPrivate_(W,K){const Q=[],Y=[],te=typeof W=="object"?W:{};K=typeof W=="function"?W:K;const ae=async ue=>{try{await(te.public?ue.makePublic():ue.makePrivate(te)),Y.push(ue)}catch(ee){if(!te.force)throw ee;Q.push(ee)}};this.getFiles(te).then(([ue])=>{const ee=(0,h.default)(10),oe=ue.map(de=>ee(()=>ae(de)));return Promise.all(oe)}).then(()=>K(Q.length>0?Q:null,Y),ue=>K(ue,Y))}getId(){return this.id}disableAutoRetryConditionallyIdempotent_(W,K,z){var Q,Y;typeof W=="object"&&((Y=(Q=W?.reqOpts)===null||Q===void 0?void 0:Q.qs)===null||Y===void 0?void 0:Y.ifMetagenerationMatch)===void 0&&z?.ifMetagenerationMatch===void 0&&(K===k.setMetadata||K===k.delete)&&this.storage.retryOptions.idempotencyStrategy===E.IdempotencyStrategy.RetryConditional?this.storage.retryOptions.autoRetry=!1:this.storage.retryOptions.idempotencyStrategy===E.IdempotencyStrategy.RetryNever&&(this.storage.retryOptions.autoRetry=!1)}}bucket.Bucket=G;m.paginator.extend(G,"getFiles");return(0,d.promisifyAll)(G,{exclude:["cloudStorageURI","request","file","notification","restore"]}),bucket}var channel={},hasRequiredChannel;function requireChannel(){if(hasRequiredChannel)return channel;hasRequiredChannel=1,Object.defineProperty(channel,"__esModule",{value:!0}),channel.Channel=void 0;const e=requireNodejsCommon(),t=requireSrc$5();class s extends e.ServiceObject{constructor(g,m,d){const l={parent:g,baseUrl:"/channels",id:"",methods:{}};super(l),this.metadata.id=m,this.metadata.resourceId=d}stop(g){g=g||e.util.noop,this.request({method:"POST",uri:"/stop",json:this.metadata},(m,d)=>{g(m,d)})}}channel.Channel=s;return(0,t.promisifyAll)(s),channel}var hmacKey={},hasRequiredHmacKey;function requireHmacKey(){if(hasRequiredHmacKey)return hmacKey;hasRequiredHmacKey=1,Object.defineProperty(hmacKey,"__esModule",{value:!0}),hmacKey.HmacKey=void 0;const e=requireNodejsCommon(),t=requireStorage$2(),s=requireSrc$5();class p extends e.ServiceObject{constructor(m,d,l){const a={delete:!0,get:!0,getMetadata:!0,setMetadata:{reqOpts:{method:"PUT"}}},o=l&&l.projectId||m.projectId;super({parent:m,id:d,baseUrl:`/projects/${o}/hmacKeys`,methods:a}),this.storage=m,this.instanceRetryValue=m.retryOptions.autoRetry}setMetadata(m,d,l){this.storage.retryOptions.idempotencyStrategy!==t.IdempotencyStrategy.RetryAlways&&(this.storage.retryOptions.autoRetry=!1);const a=typeof d=="object"?d:{};l=typeof d=="function"?d:l,super.setMetadata(m,a).then(o=>l(null,...o)).catch(l).finally(()=>{this.storage.retryOptions.autoRetry=this.instanceRetryValue})}}hmacKey.HmacKey=p;return(0,s.promisifyAll)(p),hmacKey}var hasRequiredStorage$2;function requireStorage$2(){return hasRequiredStorage$2||(hasRequiredStorage$2=1,(function(e){var t={};Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=e.RETRYABLE_ERR_FN_DEFAULT=e.MAX_RETRY_DELAY_DEFAULT=e.TOTAL_TIMEOUT_DEFAULT=e.RETRY_DELAY_MULTIPLIER_DEFAULT=e.MAX_RETRY_DEFAULT=e.AUTO_RETRY_DEFAULT=e.PROTOCOL_REGEX=e.StorageExceptionMessages=e.ExceptionMessages=e.IdempotencyStrategy=void 0;const s=requireNodejsCommon(),p=requireSrc$4(),g=requireSrc$5(),m=require$$1$3,d=requireBucket(),l=requireChannel(),a=requireFile(),o=requireUtil$6(),h=requirePackageJsonHelper(),v=requireHmacKey(),_=requireCrc32c(),y=requireSrc$b();var w;(function(x){x[x.RetryAlways=0]="RetryAlways",x[x.RetryConditional=1]="RetryConditional",x[x.RetryNever=2]="RetryNever"})(w||(e.IdempotencyStrategy=w={}));var T;(function(x){x.EXPIRATION_DATE_INVALID="The expiration date provided was invalid.",x.EXPIRATION_DATE_PAST="An expiration date cannot be in the past."})(T||(e.ExceptionMessages=T={}));var I;(function(x){x.BUCKET_NAME_REQUIRED="A bucket name is needed to use Cloud Storage.",x.BUCKET_NAME_REQUIRED_CREATE="A name is required to create a bucket.",x.HMAC_SERVICE_ACCOUNT="The first argument must be a service account email to create an HMAC key.",x.HMAC_ACCESS_ID="An access ID is needed to create an HmacKey object."})(I||(e.StorageExceptionMessages=I={})),e.PROTOCOL_REGEX=/^(\w*):\/\//,e.AUTO_RETRY_DEFAULT=!0,e.MAX_RETRY_DEFAULT=3,e.RETRY_DELAY_MULTIPLIER_DEFAULT=2,e.TOTAL_TIMEOUT_DEFAULT=600,e.MAX_RETRY_DELAY_DEFAULT=64;const O=w.RetryConditional,E=function(x){var j;const D=k=>k.includes("eai_again")||k==="econnreset"||k==="unexpected connection closure"||k==="epipe"||k==="socket connection timeout";if(x){if([408,429,500,502,503,504].indexOf(x.code)!==-1)return!0;if(typeof x.code=="string"){if(["408","429","500","502","503","504"].indexOf(x.code)!==-1)return!0;const k=x.code.toLowerCase();if(D(k))return!0}if(x.errors)for(const k of x.errors){const q=(j=k?.reason)===null||j===void 0?void 0:j.toString().toLowerCase();if(q&&D(q))return!0}}return!1};e.RETRYABLE_ERR_FN_DEFAULT=E;class C extends s.Service{getBucketsStream(){return new m.Readable}getHmacKeysStream(){return new m.Readable}constructor(j={}){var D,k,q,G,$,W,K,z,Q,Y,te,ae,ue,ee;let de=`https://storage.${j.universeDomain||y.DEFAULT_UNIVERSE}`,he=!1;const Ee=t.STORAGE_EMULATOR_HOST;typeof Ee=="string"&&(de=C.sanitizeEndpoint(Ee),he=!0),j.apiEndpoint&&j.apiEndpoint!==de&&(de=C.sanitizeEndpoint(j.apiEndpoint),he=!0),j=Object.assign({},j,{apiEndpoint:de});const fe=Ee||`${j.apiEndpoint}/storage/v1`,Se={apiEndpoint:j.apiEndpoint,retryOptions:{autoRetry:((D=j.retryOptions)===null||D===void 0?void 0:D.autoRetry)!==void 0?(k=j.retryOptions)===null||k===void 0?void 0:k.autoRetry:e.AUTO_RETRY_DEFAULT,maxRetries:!((q=j.retryOptions)===null||q===void 0)&&q.maxRetries?(G=j.retryOptions)===null||G===void 0?void 0:G.maxRetries:e.MAX_RETRY_DEFAULT,retryDelayMultiplier:!(($=j.retryOptions)===null||$===void 0)&&$.retryDelayMultiplier?(W=j.retryOptions)===null||W===void 0?void 0:W.retryDelayMultiplier:e.RETRY_DELAY_MULTIPLIER_DEFAULT,totalTimeout:!((K=j.retryOptions)===null||K===void 0)&&K.totalTimeout?(z=j.retryOptions)===null||z===void 0?void 0:z.totalTimeout:e.TOTAL_TIMEOUT_DEFAULT,maxRetryDelay:!((Q=j.retryOptions)===null||Q===void 0)&&Q.maxRetryDelay?(Y=j.retryOptions)===null||Y===void 0?void 0:Y.maxRetryDelay:e.MAX_RETRY_DELAY_DEFAULT,retryableErrorFn:!((te=j.retryOptions)===null||te===void 0)&&te.retryableErrorFn?(ae=j.retryOptions)===null||ae===void 0?void 0:ae.retryableErrorFn:e.RETRYABLE_ERR_FN_DEFAULT,idempotencyStrategy:((ue=j.retryOptions)===null||ue===void 0?void 0:ue.idempotencyStrategy)!==void 0?(ee=j.retryOptions)===null||ee===void 0?void 0:ee.idempotencyStrategy:O},baseUrl:fe,customEndpoint:he,useAuthWithCustomEndpoint:j?.useAuthWithCustomEndpoint,projectIdRequired:!1,scopes:["https://www.googleapis.com/auth/iam","https://www.googleapis.com/auth/cloud-platform","https://www.googleapis.com/auth/devstorage.full_control"],packageJson:(0,h.getPackageJSON)()};super(Se,j),this.acl=C.acl,this.crc32cGenerator=j.crc32cGenerator||_.CRC32C_DEFAULT_VALIDATOR_GENERATOR,this.retryOptions=Se.retryOptions,this.getBucketsStream=p.paginator.streamify("getBuckets"),this.getHmacKeysStream=p.paginator.streamify("getHmacKeys")}static sanitizeEndpoint(j){return e.PROTOCOL_REGEX.test(j)||(j=`https://${j}`),j.replace(/\/+$/,"")}bucket(j,D){if(!j)throw new Error(I.BUCKET_NAME_REQUIRED);return new d.Bucket(this,j,D)}channel(j,D){return new l.Channel(this,j,D)}createBucket(j,D,k){if(!j)throw new Error(I.BUCKET_NAME_REQUIRED_CREATE);let q;k?q=D:(k=D,q={});const G={...q,name:j},$={archive:"ARCHIVE",coldline:"COLDLINE",dra:"DURABLE_REDUCED_AVAILABILITY",multiRegional:"MULTI_REGIONAL",nearline:"NEARLINE",regional:"REGIONAL",standard:"STANDARD"},W=Object.keys($);for(const z of W)if(G[z]){if(q.storageClass&&q.storageClass!==z)throw new Error(`Both \`${z}\` and \`storageClass\` were provided.`);G.storageClass=$[z],delete G[z]}G.requesterPays&&(G.billing={requesterPays:G.requesterPays},delete G.requesterPays);const K={project:this.projectId};G.userProject&&(K.userProject=G.userProject,delete G.userProject),G.enableObjectRetention&&(K.enableObjectRetention=G.enableObjectRetention,delete G.enableObjectRetention),G.predefinedAcl&&(K.predefinedAcl=G.predefinedAcl,delete G.predefinedAcl),G.predefinedDefaultObjectAcl&&(K.predefinedDefaultObjectAcl=G.predefinedDefaultObjectAcl,delete G.predefinedDefaultObjectAcl),G.projection&&(K.projection=G.projection,delete G.projection),this.request({method:"POST",uri:"/b",qs:K,json:G},(z,Q)=>{if(z){k(z,null,Q);return}const Y=this.bucket(j);Y.metadata=Q,k(null,Y,Q)})}createHmacKey(j,D,k){if(typeof j!="string")throw new Error(I.HMAC_SERVICE_ACCOUNT);const{options:q,callback:G}=(0,o.normalize)(D,k),$=Object.assign({},q,{serviceAccountEmail:j}),W=$.projectId||this.projectId;delete $.projectId,this.request({method:"POST",uri:`/projects/${W}/hmacKeys`,qs:$,maxRetries:0},(K,z)=>{if(K){G(K,null,null,z);return}const Q=z.metadata,Y=this.hmacKey(Q.accessId,{projectId:Q.projectId});Y.metadata=z.metadata,G(null,Y,z.secret,z)})}getBuckets(j,D){const{options:k,callback:q}=(0,o.normalize)(j,D);k.project=k.project||this.projectId,this.request({uri:"/b",qs:k},(G,$)=>{if(G){q(G,null,null,$);return}const K=($.items?$.items:[]).map(Q=>{const Y=this.bucket(Q.id);return Y.metadata=Q,Y}),z=$.nextPageToken?Object.assign({},k,{pageToken:$.nextPageToken}):null;q(null,K,z,$)})}getHmacKeys(j,D){const{options:k,callback:q}=(0,o.normalize)(j,D),G=Object.assign({},k),$=G.projectId||this.projectId;delete G.projectId,this.request({uri:`/projects/${$}/hmacKeys`,qs:G},(W,K)=>{if(W){q(W,null,null,K);return}const Q=(K.items?K.items:[]).map(te=>{const ae=this.hmacKey(te.accessId,{projectId:te.projectId});return ae.metadata=te,ae}),Y=K.nextPageToken?Object.assign({},k,{pageToken:K.nextPageToken}):null;q(null,Q,Y,K)})}getServiceAccount(j,D){const{options:k,callback:q}=(0,o.normalize)(j,D);this.request({uri:`/projects/${this.projectId}/serviceAccount`,qs:k},(G,$)=>{if(G){q(G,null,$);return}const W={};for(const K in $)if($.hasOwnProperty(K)){const z=K.replace(/_(\w)/g,(Q,Y)=>Y.toUpperCase());W[z]=$[K]}q(null,W,$)})}hmacKey(j,D){if(!j)throw new Error(I.HMAC_ACCESS_ID);return new v.HmacKey(this,j,D)}}e.Storage=C,C.Bucket=d.Bucket,C.Channel=l.Channel,C.File=a.File,C.HmacKey=v.HmacKey,C.acl={OWNER_ROLE:"OWNER",READER_ROLE:"READER",WRITER_ROLE:"WRITER"};p.paginator.extend(C,["getBuckets","getHmacKeys"]);(0,g.promisifyAll)(C,{exclude:["bucket","channel","hmacKey"]})})(storage$1)),storage$1}var transferManager={},validator={},util$4={},hasRequiredUtil$4;function requireUtil$4(){return hasRequiredUtil$4||(hasRequiredUtil$4=1,(function(e){const t=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s=t+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",p="["+t+"]["+s+"]*",g=new RegExp("^"+p+"$"),m=function(l,a){const o=[];let h=a.exec(l);for(;h;){const v=[];v.startIndex=a.lastIndex-h[0].length;const _=h.length;for(let y=0;y<_;y++)v.push(h[y]);o.push(v),h=a.exec(l)}return o},d=function(l){const a=g.exec(l);return!(a===null||typeof a>"u")};e.isExist=function(l){return typeof l<"u"},e.isEmptyObject=function(l){return Object.keys(l).length===0},e.merge=function(l,a,o){if(a){const h=Object.keys(a),v=h.length;for(let _=0;_<v;_++)o==="strict"?l[h[_]]=[a[h[_]]]:l[h[_]]=a[h[_]]}},e.getValue=function(l){return e.isExist(l)?l:""},e.isName=d,e.getAllMatches=m,e.nameRegexp=p})(util$4)),util$4}var hasRequiredValidator;function requireValidator(){if(hasRequiredValidator)return validator;hasRequiredValidator=1;const e=requireUtil$4(),t={allowBooleanAttributes:!1,unpairedTags:[]};validator.validate=function(O,E){E=Object.assign({},t,E);const C=[];let x=!1,j=!1;O[0]==="\uFEFF"&&(O=O.substr(1));for(let D=0;D<O.length;D++)if(O[D]==="<"&&O[D+1]==="?"){if(D+=2,D=p(O,D),D.err)return D}else if(O[D]==="<"){let k=D;if(D++,O[D]==="!"){D=g(O,D);continue}else{let q=!1;O[D]==="/"&&(q=!0,D++);let G="";for(;D<O.length&&O[D]!==">"&&O[D]!==" "&&O[D]!=="	"&&O[D]!==`
`&&O[D]!=="\r";D++)G+=O[D];if(G=G.trim(),G[G.length-1]==="/"&&(G=G.substring(0,G.length-1),D--),!w(G)){let K;return G.trim().length===0?K="Invalid space after '<'.":K="Tag '"+G+"' is an invalid name.",_("InvalidTag",K,T(O,D))}const $=l(O,D);if($===!1)return _("InvalidAttr","Attributes for '"+G+"' have open quote.",T(O,D));let W=$.value;if(D=$.index,W[W.length-1]==="/"){const K=D-W.length;W=W.substring(0,W.length-1);const z=o(W,E);if(z===!0)x=!0;else return _(z.err.code,z.err.msg,T(O,K+z.err.line))}else if(q)if($.tagClosed){if(W.trim().length>0)return _("InvalidTag","Closing tag '"+G+"' can't have attributes or invalid starting.",T(O,k));if(C.length===0)return _("InvalidTag","Closing tag '"+G+"' has not been opened.",T(O,k));{const K=C.pop();if(G!==K.tagName){let z=T(O,K.tagStartPos);return _("InvalidTag","Expected closing tag '"+K.tagName+"' (opened in line "+z.line+", col "+z.col+") instead of closing tag '"+G+"'.",T(O,k))}C.length==0&&(j=!0)}}else return _("InvalidTag","Closing tag '"+G+"' doesn't have proper closing.",T(O,D));else{const K=o(W,E);if(K!==!0)return _(K.err.code,K.err.msg,T(O,D-W.length+K.err.line));if(j===!0)return _("InvalidXml","Multiple possible root nodes found.",T(O,D));E.unpairedTags.indexOf(G)!==-1||C.push({tagName:G,tagStartPos:k}),x=!0}for(D++;D<O.length;D++)if(O[D]==="<")if(O[D+1]==="!"){D++,D=g(O,D);continue}else if(O[D+1]==="?"){if(D=p(O,++D),D.err)return D}else break;else if(O[D]==="&"){const K=v(O,D);if(K==-1)return _("InvalidChar","char '&' is not expected.",T(O,D));D=K}else if(j===!0&&!s(O[D]))return _("InvalidXml","Extra text at the end",T(O,D));O[D]==="<"&&D--}}else{if(s(O[D]))continue;return _("InvalidChar","char '"+O[D]+"' is not expected.",T(O,D))}if(x){if(C.length==1)return _("InvalidTag","Unclosed tag '"+C[0].tagName+"'.",T(O,C[0].tagStartPos));if(C.length>0)return _("InvalidXml","Invalid '"+JSON.stringify(C.map(D=>D.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return _("InvalidXml","Start tag expected.",1);return!0};function s(O){return O===" "||O==="	"||O===`
`||O==="\r"}function p(O,E){const C=E;for(;E<O.length;E++)if(O[E]=="?"||O[E]==" "){const x=O.substr(C,E-C);if(E>5&&x==="xml")return _("InvalidXml","XML declaration allowed only at the start of the document.",T(O,E));if(O[E]=="?"&&O[E+1]==">"){E++;break}else continue}return E}function g(O,E){if(O.length>E+5&&O[E+1]==="-"&&O[E+2]==="-"){for(E+=3;E<O.length;E++)if(O[E]==="-"&&O[E+1]==="-"&&O[E+2]===">"){E+=2;break}}else if(O.length>E+8&&O[E+1]==="D"&&O[E+2]==="O"&&O[E+3]==="C"&&O[E+4]==="T"&&O[E+5]==="Y"&&O[E+6]==="P"&&O[E+7]==="E"){let C=1;for(E+=8;E<O.length;E++)if(O[E]==="<")C++;else if(O[E]===">"&&(C--,C===0))break}else if(O.length>E+9&&O[E+1]==="["&&O[E+2]==="C"&&O[E+3]==="D"&&O[E+4]==="A"&&O[E+5]==="T"&&O[E+6]==="A"&&O[E+7]==="["){for(E+=8;E<O.length;E++)if(O[E]==="]"&&O[E+1]==="]"&&O[E+2]===">"){E+=2;break}}return E}const m='"',d="'";function l(O,E){let C="",x="",j=!1;for(;E<O.length;E++){if(O[E]===m||O[E]===d)x===""?x=O[E]:x!==O[E]||(x="");else if(O[E]===">"&&x===""){j=!0;break}C+=O[E]}return x!==""?!1:{value:C,index:E,tagClosed:j}}const a=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function o(O,E){const C=e.getAllMatches(O,a),x={};for(let j=0;j<C.length;j++){if(C[j][1].length===0)return _("InvalidAttr","Attribute '"+C[j][2]+"' has no space in starting.",I(C[j]));if(C[j][3]!==void 0&&C[j][4]===void 0)return _("InvalidAttr","Attribute '"+C[j][2]+"' is without value.",I(C[j]));if(C[j][3]===void 0&&!E.allowBooleanAttributes)return _("InvalidAttr","boolean attribute '"+C[j][2]+"' is not allowed.",I(C[j]));const D=C[j][2];if(!y(D))return _("InvalidAttr","Attribute '"+D+"' is an invalid name.",I(C[j]));if(!x.hasOwnProperty(D))x[D]=1;else return _("InvalidAttr","Attribute '"+D+"' is repeated.",I(C[j]))}return!0}function h(O,E){let C=/\d/;for(O[E]==="x"&&(E++,C=/[\da-fA-F]/);E<O.length;E++){if(O[E]===";")return E;if(!O[E].match(C))break}return-1}function v(O,E){if(E++,O[E]===";")return-1;if(O[E]==="#")return E++,h(O,E);let C=0;for(;E<O.length;E++,C++)if(!(O[E].match(/\w/)&&C<20)){if(O[E]===";")break;return-1}return E}function _(O,E,C){return{err:{code:O,msg:E,line:C.line||C,col:C.col}}}function y(O){return e.isName(O)}function w(O){return e.isName(O)}function T(O,E){const C=O.substring(0,E).split(/\r?\n/);return{line:C.length,col:C[C.length-1].length+1}}function I(O){return O.startIndex+O[1].length}return validator}var OptionsBuilder={},hasRequiredOptionsBuilder;function requireOptionsBuilder(){if(hasRequiredOptionsBuilder)return OptionsBuilder;hasRequiredOptionsBuilder=1;const e={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(s,p){return p},attributeValueProcessor:function(s,p){return p},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(s,p,g){return s}},t=function(s){return Object.assign({},e,s)};return OptionsBuilder.buildOptions=t,OptionsBuilder.defaultOptions=e,OptionsBuilder}var xmlNode,hasRequiredXmlNode;function requireXmlNode(){if(hasRequiredXmlNode)return xmlNode;hasRequiredXmlNode=1;class e{constructor(s){this.tagname=s,this.child=[],this[":@"]={}}add(s,p){s==="__proto__"&&(s="#__proto__"),this.child.push({[s]:p})}addChild(s){s.tagname==="__proto__"&&(s.tagname="#__proto__"),s[":@"]&&Object.keys(s[":@"]).length>0?this.child.push({[s.tagname]:s.child,":@":s[":@"]}):this.child.push({[s.tagname]:s.child})}}return xmlNode=e,xmlNode}var DocTypeReader,hasRequiredDocTypeReader;function requireDocTypeReader(){if(hasRequiredDocTypeReader)return DocTypeReader;hasRequiredDocTypeReader=1;const e=requireUtil$4();function t(o,h){const v={};if(o[h+3]==="O"&&o[h+4]==="C"&&o[h+5]==="T"&&o[h+6]==="Y"&&o[h+7]==="P"&&o[h+8]==="E"){h=h+9;let _=1,y=!1,w=!1,T="";for(;h<o.length;h++)if(o[h]==="<"&&!w){if(y&&g(o,h)){h+=7;let I,O;[I,O,h]=s(o,h+1),O.indexOf("&")===-1&&(v[a(I)]={regx:RegExp(`&${I};`,"g"),val:O})}else if(y&&m(o,h))h+=8;else if(y&&d(o,h))h+=8;else if(y&&l(o,h))h+=9;else if(p)w=!0;else throw new Error("Invalid DOCTYPE");_++,T=""}else if(o[h]===">"){if(w?o[h-1]==="-"&&o[h-2]==="-"&&(w=!1,_--):_--,_===0)break}else o[h]==="["?y=!0:T+=o[h];if(_!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:v,i:h}}function s(o,h){let v="";for(;h<o.length&&o[h]!=="'"&&o[h]!=='"';h++)v+=o[h];if(v=v.trim(),v.indexOf(" ")!==-1)throw new Error("External entites are not supported");const _=o[h++];let y="";for(;h<o.length&&o[h]!==_;h++)y+=o[h];return[v,y,h]}function p(o,h){return o[h+1]==="!"&&o[h+2]==="-"&&o[h+3]==="-"}function g(o,h){return o[h+1]==="!"&&o[h+2]==="E"&&o[h+3]==="N"&&o[h+4]==="T"&&o[h+5]==="I"&&o[h+6]==="T"&&o[h+7]==="Y"}function m(o,h){return o[h+1]==="!"&&o[h+2]==="E"&&o[h+3]==="L"&&o[h+4]==="E"&&o[h+5]==="M"&&o[h+6]==="E"&&o[h+7]==="N"&&o[h+8]==="T"}function d(o,h){return o[h+1]==="!"&&o[h+2]==="A"&&o[h+3]==="T"&&o[h+4]==="T"&&o[h+5]==="L"&&o[h+6]==="I"&&o[h+7]==="S"&&o[h+8]==="T"}function l(o,h){return o[h+1]==="!"&&o[h+2]==="N"&&o[h+3]==="O"&&o[h+4]==="T"&&o[h+5]==="A"&&o[h+6]==="T"&&o[h+7]==="I"&&o[h+8]==="O"&&o[h+9]==="N"}function a(o){if(e.isName(o))return o;throw new Error(`Invalid entity name ${o}`)}return DocTypeReader=t,DocTypeReader}var strnum,hasRequiredStrnum;function requireStrnum(){if(hasRequiredStrnum)return strnum;hasRequiredStrnum=1;const e=/^[-+]?0x[a-fA-F0-9]+$/,t=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,s={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function p(d,l={}){if(l=Object.assign({},s,l),!d||typeof d!="string")return d;let a=d.trim();if(l.skipLike!==void 0&&l.skipLike.test(a))return d;if(d==="0")return 0;if(l.hex&&e.test(a))return m(a,16);if(a.search(/[eE]/)!==-1){const o=a.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(o){if(l.leadingZeros)a=(o[1]||"")+o[3];else if(!(o[2]==="0"&&o[3][0]==="."))return d;return l.eNotation?Number(a):d}else return d}else{const o=t.exec(a);if(o){const h=o[1],v=o[2];let _=g(o[3]);if(!l.leadingZeros&&v.length>0&&h&&a[2]!==".")return d;if(!l.leadingZeros&&v.length>0&&!h&&a[1]!==".")return d;if(l.leadingZeros&&v===d)return 0;{const y=Number(a),w=""+y;return w.search(/[eE]/)!==-1?l.eNotation?y:d:a.indexOf(".")!==-1?w==="0"&&_===""||w===_||h&&w==="-"+_?y:d:v?_===w||h+_===w?y:d:a===w||a===h+w?y:d}}else return d}}function g(d){return d&&d.indexOf(".")!==-1&&(d=d.replace(/0+$/,""),d==="."?d="0":d[0]==="."?d="0"+d:d[d.length-1]==="."&&(d=d.substr(0,d.length-1))),d}function m(d,l){if(parseInt)return parseInt(d,l);if(Number.parseInt)return Number.parseInt(d,l);if(window&&window.parseInt)return window.parseInt(d,l);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}return strnum=p,strnum}var ignoreAttributes,hasRequiredIgnoreAttributes;function requireIgnoreAttributes(){if(hasRequiredIgnoreAttributes)return ignoreAttributes;hasRequiredIgnoreAttributes=1;function e(t){return typeof t=="function"?t:Array.isArray(t)?s=>{for(const p of t)if(typeof p=="string"&&s===p||p instanceof RegExp&&p.test(s))return!0}:()=>!1}return ignoreAttributes=e,ignoreAttributes}var OrderedObjParser_1,hasRequiredOrderedObjParser;function requireOrderedObjParser(){if(hasRequiredOrderedObjParser)return OrderedObjParser_1;hasRequiredOrderedObjParser=1;const e=requireUtil$4(),t=requireXmlNode(),s=requireDocTypeReader(),p=requireStrnum(),g=requireIgnoreAttributes();class m{constructor(D){this.options=D,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""},num_dec:{regex:/&#([0-9]{1,7});/g,val:(k,q)=>String.fromCharCode(Number.parseInt(q,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(k,q)=>String.fromCharCode(Number.parseInt(q,16))}},this.addExternalEntities=d,this.parseXml=v,this.parseTextData=l,this.resolveNameSpace=a,this.buildAttributesMap=h,this.isItStopNode=T,this.replaceEntitiesValue=y,this.readStopNodeData=C,this.saveTextToParentTag=w,this.addChild=_,this.ignoreAttributesFn=g(this.options.ignoreAttributes)}}function d(j){const D=Object.keys(j);for(let k=0;k<D.length;k++){const q=D[k];this.lastEntities[q]={regex:new RegExp("&"+q+";","g"),val:j[q]}}}function l(j,D,k,q,G,$,W){if(j!==void 0&&(this.options.trimValues&&!q&&(j=j.trim()),j.length>0)){W||(j=this.replaceEntitiesValue(j));const K=this.options.tagValueProcessor(D,j,k,G,$);return K==null?j:typeof K!=typeof j||K!==j?K:this.options.trimValues?x(j,this.options.parseTagValue,this.options.numberParseOptions):j.trim()===j?x(j,this.options.parseTagValue,this.options.numberParseOptions):j}}function a(j){if(this.options.removeNSPrefix){const D=j.split(":"),k=j.charAt(0)==="/"?"/":"";if(D[0]==="xmlns")return"";D.length===2&&(j=k+D[1])}return j}const o=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function h(j,D,k){if(this.options.ignoreAttributes!==!0&&typeof j=="string"){const q=e.getAllMatches(j,o),G=q.length,$={};for(let W=0;W<G;W++){const K=this.resolveNameSpace(q[W][1]);if(this.ignoreAttributesFn(K,D))continue;let z=q[W][4],Q=this.options.attributeNamePrefix+K;if(K.length)if(this.options.transformAttributeName&&(Q=this.options.transformAttributeName(Q)),Q==="__proto__"&&(Q="#__proto__"),z!==void 0){this.options.trimValues&&(z=z.trim()),z=this.replaceEntitiesValue(z);const Y=this.options.attributeValueProcessor(K,z,D);Y==null?$[Q]=z:typeof Y!=typeof z||Y!==z?$[Q]=Y:$[Q]=x(z,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&($[Q]=!0)}if(!Object.keys($).length)return;if(this.options.attributesGroupName){const W={};return W[this.options.attributesGroupName]=$,W}return $}}const v=function(j){j=j.replace(/\r\n?/g,`
`);const D=new t("!xml");let k=D,q="",G="";for(let $=0;$<j.length;$++)if(j[$]==="<")if(j[$+1]==="/"){const K=O(j,">",$,"Closing Tag is not closed.");let z=j.substring($+2,K).trim();if(this.options.removeNSPrefix){const te=z.indexOf(":");te!==-1&&(z=z.substr(te+1))}this.options.transformTagName&&(z=this.options.transformTagName(z)),k&&(q=this.saveTextToParentTag(q,k,G));const Q=G.substring(G.lastIndexOf(".")+1);if(z&&this.options.unpairedTags.indexOf(z)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${z}>`);let Y=0;Q&&this.options.unpairedTags.indexOf(Q)!==-1?(Y=G.lastIndexOf(".",G.lastIndexOf(".")-1),this.tagsNodeStack.pop()):Y=G.lastIndexOf("."),G=G.substring(0,Y),k=this.tagsNodeStack.pop(),q="",$=K}else if(j[$+1]==="?"){let K=E(j,$,!1,"?>");if(!K)throw new Error("Pi Tag is not closed.");if(q=this.saveTextToParentTag(q,k,G),!(this.options.ignoreDeclaration&&K.tagName==="?xml"||this.options.ignorePiTags)){const z=new t(K.tagName);z.add(this.options.textNodeName,""),K.tagName!==K.tagExp&&K.attrExpPresent&&(z[":@"]=this.buildAttributesMap(K.tagExp,G,K.tagName)),this.addChild(k,z,G)}$=K.closeIndex+1}else if(j.substr($+1,3)==="!--"){const K=O(j,"-->",$+4,"Comment is not closed.");if(this.options.commentPropName){const z=j.substring($+4,K-2);q=this.saveTextToParentTag(q,k,G),k.add(this.options.commentPropName,[{[this.options.textNodeName]:z}])}$=K}else if(j.substr($+1,2)==="!D"){const K=s(j,$);this.docTypeEntities=K.entities,$=K.i}else if(j.substr($+1,2)==="!["){const K=O(j,"]]>",$,"CDATA is not closed.")-2,z=j.substring($+9,K);q=this.saveTextToParentTag(q,k,G);let Q=this.parseTextData(z,k.tagname,G,!0,!1,!0,!0);Q==null&&(Q=""),this.options.cdataPropName?k.add(this.options.cdataPropName,[{[this.options.textNodeName]:z}]):k.add(this.options.textNodeName,Q),$=K+2}else{let K=E(j,$,this.options.removeNSPrefix),z=K.tagName;const Q=K.rawTagName;let Y=K.tagExp,te=K.attrExpPresent,ae=K.closeIndex;this.options.transformTagName&&(z=this.options.transformTagName(z)),k&&q&&k.tagname!=="!xml"&&(q=this.saveTextToParentTag(q,k,G,!1));const ue=k;if(ue&&this.options.unpairedTags.indexOf(ue.tagname)!==-1&&(k=this.tagsNodeStack.pop(),G=G.substring(0,G.lastIndexOf("."))),z!==D.tagname&&(G+=G?"."+z:z),this.isItStopNode(this.options.stopNodes,G,z)){let ee="";if(Y.length>0&&Y.lastIndexOf("/")===Y.length-1)z[z.length-1]==="/"?(z=z.substr(0,z.length-1),G=G.substr(0,G.length-1),Y=z):Y=Y.substr(0,Y.length-1),$=K.closeIndex;else if(this.options.unpairedTags.indexOf(z)!==-1)$=K.closeIndex;else{const de=this.readStopNodeData(j,Q,ae+1);if(!de)throw new Error(`Unexpected end of ${Q}`);$=de.i,ee=de.tagContent}const oe=new t(z);z!==Y&&te&&(oe[":@"]=this.buildAttributesMap(Y,G,z)),ee&&(ee=this.parseTextData(ee,z,G,!0,te,!0,!0)),G=G.substr(0,G.lastIndexOf(".")),oe.add(this.options.textNodeName,ee),this.addChild(k,oe,G)}else{if(Y.length>0&&Y.lastIndexOf("/")===Y.length-1){z[z.length-1]==="/"?(z=z.substr(0,z.length-1),G=G.substr(0,G.length-1),Y=z):Y=Y.substr(0,Y.length-1),this.options.transformTagName&&(z=this.options.transformTagName(z));const ee=new t(z);z!==Y&&te&&(ee[":@"]=this.buildAttributesMap(Y,G,z)),this.addChild(k,ee,G),G=G.substr(0,G.lastIndexOf("."))}else{const ee=new t(z);this.tagsNodeStack.push(k),z!==Y&&te&&(ee[":@"]=this.buildAttributesMap(Y,G,z)),this.addChild(k,ee,G),k=ee}q="",$=ae}}else q+=j[$];return D.child};function _(j,D,k){const q=this.options.updateTag(D.tagname,k,D[":@"]);q===!1||(typeof q=="string"&&(D.tagname=q),j.addChild(D))}const y=function(j){if(this.options.processEntities){for(let D in this.docTypeEntities){const k=this.docTypeEntities[D];j=j.replace(k.regx,k.val)}for(let D in this.lastEntities){const k=this.lastEntities[D];j=j.replace(k.regex,k.val)}if(this.options.htmlEntities)for(let D in this.htmlEntities){const k=this.htmlEntities[D];j=j.replace(k.regex,k.val)}j=j.replace(this.ampEntity.regex,this.ampEntity.val)}return j};function w(j,D,k,q){return j&&(q===void 0&&(q=D.child.length===0),j=this.parseTextData(j,D.tagname,k,!1,D[":@"]?Object.keys(D[":@"]).length!==0:!1,q),j!==void 0&&j!==""&&D.add(this.options.textNodeName,j),j=""),j}function T(j,D,k){const q="*."+k;for(const G in j){const $=j[G];if(q===$||D===$)return!0}return!1}function I(j,D,k=">"){let q,G="";for(let $=D;$<j.length;$++){let W=j[$];if(q)W===q&&(q="");else if(W==='"'||W==="'")q=W;else if(W===k[0])if(k[1]){if(j[$+1]===k[1])return{data:G,index:$}}else return{data:G,index:$};else W==="	"&&(W=" ");G+=W}}function O(j,D,k,q){const G=j.indexOf(D,k);if(G===-1)throw new Error(q);return G+D.length-1}function E(j,D,k,q=">"){const G=I(j,D+1,q);if(!G)return;let $=G.data;const W=G.index,K=$.search(/\s/);let z=$,Q=!0;K!==-1&&(z=$.substring(0,K),$=$.substring(K+1).trimStart());const Y=z;if(k){const te=z.indexOf(":");te!==-1&&(z=z.substr(te+1),Q=z!==G.data.substr(te+1))}return{tagName:z,tagExp:$,closeIndex:W,attrExpPresent:Q,rawTagName:Y}}function C(j,D,k){const q=k;let G=1;for(;k<j.length;k++)if(j[k]==="<")if(j[k+1]==="/"){const $=O(j,">",k,`${D} is not closed`);if(j.substring(k+2,$).trim()===D&&(G--,G===0))return{tagContent:j.substring(q,k),i:$};k=$}else if(j[k+1]==="?")k=O(j,"?>",k+1,"StopNode is not closed.");else if(j.substr(k+1,3)==="!--")k=O(j,"-->",k+3,"StopNode is not closed.");else if(j.substr(k+1,2)==="![")k=O(j,"]]>",k,"StopNode is not closed.")-2;else{const $=E(j,k,">");$&&(($&&$.tagName)===D&&$.tagExp[$.tagExp.length-1]!=="/"&&G++,k=$.closeIndex)}}function x(j,D,k){if(D&&typeof j=="string"){const q=j.trim();return q==="true"?!0:q==="false"?!1:p(j,k)}else return e.isExist(j)?j:""}return OrderedObjParser_1=m,OrderedObjParser_1}var node2json={},hasRequiredNode2json;function requireNode2json(){if(hasRequiredNode2json)return node2json;hasRequiredNode2json=1;function e(m,d){return t(m,d)}function t(m,d,l){let a;const o={};for(let h=0;h<m.length;h++){const v=m[h],_=s(v);let y="";if(l===void 0?y=_:y=l+"."+_,_===d.textNodeName)a===void 0?a=v[_]:a+=""+v[_];else{if(_===void 0)continue;if(v[_]){let w=t(v[_],d,y);const T=g(w,d);v[":@"]?p(w,v[":@"],y,d):Object.keys(w).length===1&&w[d.textNodeName]!==void 0&&!d.alwaysCreateTextNode?w=w[d.textNodeName]:Object.keys(w).length===0&&(d.alwaysCreateTextNode?w[d.textNodeName]="":w=""),o[_]!==void 0&&o.hasOwnProperty(_)?(Array.isArray(o[_])||(o[_]=[o[_]]),o[_].push(w)):d.isArray(_,y,T)?o[_]=[w]:o[_]=w}}}return typeof a=="string"?a.length>0&&(o[d.textNodeName]=a):a!==void 0&&(o[d.textNodeName]=a),o}function s(m){const d=Object.keys(m);for(let l=0;l<d.length;l++){const a=d[l];if(a!==":@")return a}}function p(m,d,l,a){if(d){const o=Object.keys(d),h=o.length;for(let v=0;v<h;v++){const _=o[v];a.isArray(_,l+"."+_,!0,!0)?m[_]=[d[_]]:m[_]=d[_]}}}function g(m,d){const{textNodeName:l}=d,a=Object.keys(m).length;return!!(a===0||a===1&&(m[l]||typeof m[l]=="boolean"||m[l]===0))}return node2json.prettify=e,node2json}var XMLParser_1,hasRequiredXMLParser;function requireXMLParser(){if(hasRequiredXMLParser)return XMLParser_1;hasRequiredXMLParser=1;const{buildOptions:e}=requireOptionsBuilder(),t=requireOrderedObjParser(),{prettify:s}=requireNode2json(),p=requireValidator();class g{constructor(d){this.externalEntities={},this.options=e(d)}parse(d,l){if(typeof d!="string")if(d.toString)d=d.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(l){l===!0&&(l={});const h=p.validate(d,l);if(h!==!0)throw Error(`${h.err.msg}:${h.err.line}:${h.err.col}`)}const a=new t(this.options);a.addExternalEntities(this.externalEntities);const o=a.parseXml(d);return this.options.preserveOrder||o===void 0?o:s(o,this.options)}addEntity(d,l){if(l.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(d.indexOf("&")!==-1||d.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(l==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[d]=l}}return XMLParser_1=g,XMLParser_1}var orderedJs2Xml,hasRequiredOrderedJs2Xml;function requireOrderedJs2Xml(){if(hasRequiredOrderedJs2Xml)return orderedJs2Xml;hasRequiredOrderedJs2Xml=1;const e=`
`;function t(l,a){let o="";return a.format&&a.indentBy.length>0&&(o=e),s(l,a,"",o)}function s(l,a,o,h){let v="",_=!1;for(let y=0;y<l.length;y++){const w=l[y],T=p(w);if(T===void 0)continue;let I="";if(o.length===0?I=T:I=`${o}.${T}`,T===a.textNodeName){let j=w[T];m(I,a)||(j=a.tagValueProcessor(T,j),j=d(j,a)),_&&(v+=h),v+=j,_=!1;continue}else if(T===a.cdataPropName){_&&(v+=h),v+=`<![CDATA[${w[T][0][a.textNodeName]}]]>`,_=!1;continue}else if(T===a.commentPropName){v+=h+`<!--${w[T][0][a.textNodeName]}-->`,_=!0;continue}else if(T[0]==="?"){const j=g(w[":@"],a),D=T==="?xml"?"":h;let k=w[T][0][a.textNodeName];k=k.length!==0?" "+k:"",v+=D+`<${T}${k}${j}?>`,_=!0;continue}let O=h;O!==""&&(O+=a.indentBy);const E=g(w[":@"],a),C=h+`<${T}${E}`,x=s(w[T],a,I,O);a.unpairedTags.indexOf(T)!==-1?a.suppressUnpairedNode?v+=C+">":v+=C+"/>":(!x||x.length===0)&&a.suppressEmptyNode?v+=C+"/>":x&&x.endsWith(">")?v+=C+`>${x}${h}</${T}>`:(v+=C+">",x&&h!==""&&(x.includes("/>")||x.includes("</"))?v+=h+a.indentBy+x+h:v+=x,v+=`</${T}>`),_=!0}return v}function p(l){const a=Object.keys(l);for(let o=0;o<a.length;o++){const h=a[o];if(l.hasOwnProperty(h)&&h!==":@")return h}}function g(l,a){let o="";if(l&&!a.ignoreAttributes)for(let h in l){if(!l.hasOwnProperty(h))continue;let v=a.attributeValueProcessor(h,l[h]);v=d(v,a),v===!0&&a.suppressBooleanAttributes?o+=` ${h.substr(a.attributeNamePrefix.length)}`:o+=` ${h.substr(a.attributeNamePrefix.length)}="${v}"`}return o}function m(l,a){l=l.substr(0,l.length-a.textNodeName.length-1);let o=l.substr(l.lastIndexOf(".")+1);for(let h in a.stopNodes)if(a.stopNodes[h]===l||a.stopNodes[h]==="*."+o)return!0;return!1}function d(l,a){if(l&&l.length>0&&a.processEntities)for(let o=0;o<a.entities.length;o++){const h=a.entities[o];l=l.replace(h.regex,h.val)}return l}return orderedJs2Xml=t,orderedJs2Xml}var json2xml,hasRequiredJson2xml;function requireJson2xml(){if(hasRequiredJson2xml)return json2xml;hasRequiredJson2xml=1;const e=requireOrderedJs2Xml(),t=requireIgnoreAttributes(),s={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(l,a){return a},attributeValueProcessor:function(l,a){return a},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function p(l){this.options=Object.assign({},s,l),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=t(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=d),this.processTextOrObjNode=g,this.options.format?(this.indentate=m,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}p.prototype.build=function(l){return this.options.preserveOrder?e(l,this.options):(Array.isArray(l)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(l={[this.options.arrayNodeName]:l}),this.j2x(l,0,[]).val)},p.prototype.j2x=function(l,a,o){let h="",v="";const _=o.join(".");for(let y in l)if(Object.prototype.hasOwnProperty.call(l,y))if(typeof l[y]>"u")this.isAttribute(y)&&(v+="");else if(l[y]===null)this.isAttribute(y)||y===this.options.cdataPropName?v+="":y[0]==="?"?v+=this.indentate(a)+"<"+y+"?"+this.tagEndChar:v+=this.indentate(a)+"<"+y+"/"+this.tagEndChar;else if(l[y]instanceof Date)v+=this.buildTextValNode(l[y],y,"",a);else if(typeof l[y]!="object"){const w=this.isAttribute(y);if(w&&!this.ignoreAttributesFn(w,_))h+=this.buildAttrPairStr(w,""+l[y]);else if(!w)if(y===this.options.textNodeName){let T=this.options.tagValueProcessor(y,""+l[y]);v+=this.replaceEntitiesValue(T)}else v+=this.buildTextValNode(l[y],y,"",a)}else if(Array.isArray(l[y])){const w=l[y].length;let T="",I="";for(let O=0;O<w;O++){const E=l[y][O];if(!(typeof E>"u"))if(E===null)y[0]==="?"?v+=this.indentate(a)+"<"+y+"?"+this.tagEndChar:v+=this.indentate(a)+"<"+y+"/"+this.tagEndChar;else if(typeof E=="object")if(this.options.oneListGroup){const C=this.j2x(E,a+1,o.concat(y));T+=C.val,this.options.attributesGroupName&&E.hasOwnProperty(this.options.attributesGroupName)&&(I+=C.attrStr)}else T+=this.processTextOrObjNode(E,y,a,o);else if(this.options.oneListGroup){let C=this.options.tagValueProcessor(y,E);C=this.replaceEntitiesValue(C),T+=C}else T+=this.buildTextValNode(E,y,"",a)}this.options.oneListGroup&&(T=this.buildObjectNode(T,y,I,a)),v+=T}else if(this.options.attributesGroupName&&y===this.options.attributesGroupName){const w=Object.keys(l[y]),T=w.length;for(let I=0;I<T;I++)h+=this.buildAttrPairStr(w[I],""+l[y][w[I]])}else v+=this.processTextOrObjNode(l[y],y,a,o);return{attrStr:h,val:v}},p.prototype.buildAttrPairStr=function(l,a){return a=this.options.attributeValueProcessor(l,""+a),a=this.replaceEntitiesValue(a),this.options.suppressBooleanAttributes&&a==="true"?" "+l:" "+l+'="'+a+'"'};function g(l,a,o,h){const v=this.j2x(l,o+1,h.concat(a));return l[this.options.textNodeName]!==void 0&&Object.keys(l).length===1?this.buildTextValNode(l[this.options.textNodeName],a,v.attrStr,o):this.buildObjectNode(v.val,a,v.attrStr,o)}p.prototype.buildObjectNode=function(l,a,o,h){if(l==="")return a[0]==="?"?this.indentate(h)+"<"+a+o+"?"+this.tagEndChar:this.indentate(h)+"<"+a+o+this.closeTag(a)+this.tagEndChar;{let v="</"+a+this.tagEndChar,_="";return a[0]==="?"&&(_="?",v=""),(o||o==="")&&l.indexOf("<")===-1?this.indentate(h)+"<"+a+o+_+">"+l+v:this.options.commentPropName!==!1&&a===this.options.commentPropName&&_.length===0?this.indentate(h)+`<!--${l}-->`+this.newLine:this.indentate(h)+"<"+a+o+_+this.tagEndChar+l+this.indentate(h)+v}},p.prototype.closeTag=function(l){let a="";return this.options.unpairedTags.indexOf(l)!==-1?this.options.suppressUnpairedNode||(a="/"):this.options.suppressEmptyNode?a="/":a=`></${l}`,a},p.prototype.buildTextValNode=function(l,a,o,h){if(this.options.cdataPropName!==!1&&a===this.options.cdataPropName)return this.indentate(h)+`<![CDATA[${l}]]>`+this.newLine;if(this.options.commentPropName!==!1&&a===this.options.commentPropName)return this.indentate(h)+`<!--${l}-->`+this.newLine;if(a[0]==="?")return this.indentate(h)+"<"+a+o+"?"+this.tagEndChar;{let v=this.options.tagValueProcessor(a,l);return v=this.replaceEntitiesValue(v),v===""?this.indentate(h)+"<"+a+o+this.closeTag(a)+this.tagEndChar:this.indentate(h)+"<"+a+o+">"+v+"</"+a+this.tagEndChar}},p.prototype.replaceEntitiesValue=function(l){if(l&&l.length>0&&this.options.processEntities)for(let a=0;a<this.options.entities.length;a++){const o=this.options.entities[a];l=l.replace(o.regex,o.val)}return l};function m(l){return this.options.indentBy.repeat(l)}function d(l){return l.startsWith(this.options.attributeNamePrefix)&&l!==this.options.textNodeName?l.substr(this.attrPrefixLen):!1}return json2xml=p,json2xml}var fxp,hasRequiredFxp;function requireFxp(){if(hasRequiredFxp)return fxp;hasRequiredFxp=1;const e=requireValidator(),t=requireXMLParser(),s=requireJson2xml();return fxp={XMLParser:t,XMLValidator:e,XMLBuilder:s},fxp}var hasRequiredTransferManager;function requireTransferManager(){if(hasRequiredTransferManager)return transferManager;hasRequiredTransferManager=1;var e=transferManager&&transferManager.__createBinding||(Object.create?(function(ue,ee,oe,de){de===void 0&&(de=oe);var he=Object.getOwnPropertyDescriptor(ee,oe);(!he||("get"in he?!ee.__esModule:he.writable||he.configurable))&&(he={enumerable:!0,get:function(){return ee[oe]}}),Object.defineProperty(ue,de,he)}):(function(ue,ee,oe,de){de===void 0&&(de=oe),ue[de]=ee[oe]})),t=transferManager&&transferManager.__setModuleDefault||(Object.create?(function(ue,ee){Object.defineProperty(ue,"default",{enumerable:!0,value:ee})}):function(ue,ee){ue.default=ee}),s=transferManager&&transferManager.__importStar||(function(){var ue=function(ee){return ue=Object.getOwnPropertyNames||function(oe){var de=[];for(var he in oe)Object.prototype.hasOwnProperty.call(oe,he)&&(de[de.length]=he);return de},ue(ee)};return function(ee){if(ee&&ee.__esModule)return ee;var oe={};if(ee!=null)for(var de=ue(ee),he=0;he<de.length;he++)de[he]!=="default"&&e(oe,ee,de[he]);return t(oe,ee),oe}})(),p=transferManager&&transferManager.__classPrivateFieldGet||function(ue,ee,oe,de){if(oe==="a"&&!de)throw new TypeError("Private accessor was defined without a getter");if(typeof ee=="function"?ue!==ee||!de:!ee.has(ue))throw new TypeError("Cannot read private member from an object whose class did not declare it");return oe==="m"?de:oe==="a"?de.call(ue):de?de.value:ee.get(ue)},g=transferManager&&transferManager.__importDefault||function(ue){return ue&&ue.__esModule?ue:{default:ue}},m,d,l;Object.defineProperty(transferManager,"__esModule",{value:!0}),transferManager.TransferManager=transferManager.MultiPartUploadError=void 0;const a=requireFile(),o=g(requirePLimit()),h=s(require$$1$3),v=require$$1$3,_=requireCrc32c(),y=requireSrc$b(),w=requireFxp(),T=g(requireLib$1()),I=require$$1$3,O=requireUtil$5(),E=requireUtil$6(),x=(0,requirePackageJsonHelper().getPackageJSON)(),j=5,D=5,k=5,q=32*1024*1024,G=32*1024*1024,$=32*1024*1024,W=5,K="(?:)",z={UPLOAD_MANY:"tm.upload_many",DOWNLOAD_MANY:"tm.download_many",UPLOAD_SHARDED:"tm.upload_sharded",DOWNLOAD_SHARDED:"tm.download_sharded"},Q=(ue,ee,oe,de)=>new te(ue,ee,oe,de);class Y extends Error{constructor(ee,oe,de){super(ee),this.uploadId=oe,this.partsMap=de}}transferManager.MultiPartUploadError=Y;class te{constructor(ee,oe,de,he){m.add(this),this.authClient=ee.storage.authClient||new y.GoogleAuth,this.uploadId=de||"",this.bucket=ee,this.fileName=oe,this.baseUrl=`https://${ee.name}.${new URL(this.bucket.storage.apiEndpoint).hostname}/${oe}`,this.xmlBuilder=new w.XMLBuilder({arrayNodeName:"Part"}),this.xmlParser=new w.XMLParser,this.partsMap=he||new Map,this.retryOptions={retries:this.bucket.storage.retryOptions.maxRetries,factor:this.bucket.storage.retryOptions.retryDelayMultiplier,maxTimeout:this.bucket.storage.retryOptions.maxRetryDelay*1e3,maxRetryTime:this.bucket.storage.retryOptions.totalTimeout*1e3}}async initiateUpload(ee={}){const oe=`${this.baseUrl}?uploads`;return(0,T.default)(async de=>{try{const he=await this.authClient.request({headers:p(this,m,"m",d).call(this,ee),method:"POST",url:oe});if(he.data&&he.data.error)throw he.data.error;const Ee=this.xmlParser.parse(he.data);this.uploadId=Ee.InitiateMultipartUploadResult.UploadId}catch(he){p(this,m,"m",l).call(this,he,de)}},this.retryOptions)}async uploadPart(ee,oe,de){const he=`${this.baseUrl}?partNumber=${ee}&uploadId=${this.uploadId}`;let Ee=p(this,m,"m",d).call(this);return de==="md5"&&(Ee={"Content-MD5":(0,I.createHash)("md5").update(oe).digest("base64")}),(0,T.default)(async fe=>{try{const Se=await this.authClient.request({url:he,method:"PUT",body:oe,headers:Ee});if(Se.data&&Se.data.error)throw Se.data.error;this.partsMap.set(ee,Se.headers.etag)}catch(Se){p(this,m,"m",l).call(this,Se,fe)}},this.retryOptions)}async completeUpload(){const ee=`${this.baseUrl}?uploadId=${this.uploadId}`,oe=new Map([...this.partsMap.entries()].sort((Ee,fe)=>Ee[0]-fe[0])),de=[];for(const Ee of oe.entries())de.push({PartNumber:Ee[0],ETag:Ee[1]});const he=`<CompleteMultipartUpload>${this.xmlBuilder.build(de)}</CompleteMultipartUpload>`;return(0,T.default)(async Ee=>{try{const fe=await this.authClient.request({headers:p(this,m,"m",d).call(this),url:ee,method:"POST",body:he});if(fe.data&&fe.data.error)throw fe.data.error;return fe}catch(fe){p(this,m,"m",l).call(this,fe,Ee);return}},this.retryOptions)}async abortUpload(){const ee=`${this.baseUrl}?uploadId=${this.uploadId}`;return(0,T.default)(async oe=>{try{const de=await this.authClient.request({url:ee,method:"DELETE"});if(de.data&&de.data.error)throw de.data.error}catch(de){p(this,m,"m",l).call(this,de,oe);return}},this.retryOptions)}}m=new WeakSet,d=function(ee={}){let oe=!1,de=!1;for(const[he,Ee]of Object.entries(ee))he.toLocaleLowerCase().trim()==="x-goog-api-client"?(oe=!0,Ee.includes(z.UPLOAD_SHARDED)||(ee[he]=`${Ee} gccl-gcs-cmd/${z.UPLOAD_SHARDED}`)):he.toLocaleLowerCase().trim()==="user-agent"&&(de=!0);return oe||(ee["x-goog-api-client"]=`${(0,E.getRuntimeTrackingString)()} gccl/${x.version} gccl-gcs-cmd/${z.UPLOAD_SHARDED}`),de||(ee["User-Agent"]=(0,E.getUserAgentString)()),ee},l=function(ee,oe){if(this.bucket.storage.retryOptions.autoRetry&&this.bucket.storage.retryOptions.retryableErrorFn(ee))throw ee;oe(ee)};class ae{constructor(ee){this.bucket=ee}async uploadManyFiles(ee,oe={}){var de;oe.skipIfExists&&(!((de=oe.passthroughOptions)===null||de===void 0)&&de.preconditionOpts)?oe.passthroughOptions.preconditionOpts.ifGenerationMatch=0:oe.skipIfExists&&oe.passthroughOptions===void 0&&(oe.passthroughOptions={preconditionOpts:{ifGenerationMatch:0}});const he=(0,o.default)(oe.concurrencyLimit||j),Ee=[];let fe=[];if(Array.isArray(ee))fe=ee;else for await(const Se of this.getPathsFromDirectory(ee))fe.push(Se);for(const Se of fe){if((await v.promises.lstat(Se)).isDirectory())continue;const Oe={...oe.passthroughOptions,[O.GCCL_GCS_CMD_KEY]:z.UPLOAD_MANY};Oe.destination=oe.customDestinationBuilder?oe.customDestinationBuilder(Se,oe):Se.split(h.sep).join(h.posix.sep),oe.prefix&&(Oe.destination=h.posix.join(...oe.prefix.split(h.sep),Oe.destination)),Ee.push(he(()=>this.bucket.upload(Se,Oe)))}return Promise.all(Ee)}async downloadManyFiles(ee,oe={}){const de=(0,o.default)(oe.concurrencyLimit||D),he=[];let Ee=[];Array.isArray(ee)?Ee=ee.map(be=>typeof be=="string"?this.bucket.file(be):be):Ee=(await this.bucket.getFiles({prefix:ee}))[0];const fe=oe.stripPrefix?`^${oe.stripPrefix}`:K,Se=new RegExp(fe,"g");for(const be of Ee){const Oe={...oe.passthroughOptions,[O.GCCL_GCS_CMD_KEY]:z.DOWNLOAD_MANY};(oe.prefix||Oe.destination)&&(Oe.destination=h.join(oe.prefix||"",Oe.destination||"",be.name)),oe.stripPrefix&&(Oe.destination=be.name.replace(Se,"")),!(oe.skipIfExists&&(0,v.existsSync)(Oe.destination||""))&&he.push(de(async()=>{const ge=Oe.destination;return ge&&ge.endsWith(h.sep)?(await v.promises.mkdir(ge,{recursive:!0}),Promise.resolve([Buffer.alloc(0)])):be.download(Oe)}))}return Promise.all(he)}async downloadFileInChunks(ee,oe={}){let de=oe.chunkSizeBytes||G,he=(0,o.default)(oe.concurrencyLimit||k);const Ee=!!oe.noReturnData,fe=[],Se=typeof ee=="string"?this.bucket.file(ee):ee,be=await Se.get(),Oe=parseInt(be[0].metadata.size.toString());Oe<q&&(he=(0,o.default)(1),de=Oe);let ge=0;const J=oe.destination||h.basename(Se.name),c=await v.promises.open(J,"w");for(;ge<Oe;){const A=ge;let V=ge+de-1;V=V>Oe?Oe:V,fe.push(he(async()=>{const ne=await Se.download({start:A,end:V,[O.GCCL_GCS_CMD_KEY]:z.DOWNLOAD_SHARDED}),ce=await c.write(ne[0],0,ne[0].length,A);if(!Ee)return ce.buffer})),ge+=de}let N;try{N=await Promise.all(fe)}finally{await c.close()}if(oe.validation==="crc32c"&&be[0].metadata.crc32c&&!(await _.CRC32C.fromFile(J)).validate(be[0].metadata.crc32c)){const V=new a.RequestError(a.FileExceptionMessages.DOWNLOAD_MISMATCH);throw V.code="CONTENT_DOWNLOAD_MISMATCH",V}if(!Ee)return[Buffer.concat(N,Oe)]}async uploadFileInChunks(ee,oe={},de=Q){const he=oe.chunkSizeBytes||$,Ee=(0,o.default)(oe.concurrencyLimit||W),fe=oe.maxQueueSize||oe.concurrencyLimit||W,Se=oe.uploadName||h.basename(ee),be=de(this.bucket,Se,oe.uploadId,oe.partsMap);let Oe=1,ge=[];try{oe.uploadId===void 0&&await be.initiateUpload(oe.headers);const J=be.partsMap.size*he,c=(0,v.createReadStream)(ee,{highWaterMark:he,start:J});for await(const N of c)ge.length>=fe&&(await Promise.all(ge),ge=[]),ge.push(Ee(()=>be.uploadPart(Oe++,N,oe.validation)));return await Promise.all(ge),await be.completeUpload()}catch(J){if((oe.autoAbortFailure===void 0||oe.autoAbortFailure)&&be.uploadId)try{await be.abortUpload();return}catch(c){throw new Y(c.message,be.uploadId,be.partsMap)}throw new Y(J.message,be.uploadId,be.partsMap)}}async*getPathsFromDirectory(ee){const oe=await v.promises.readdir(ee,{withFileTypes:!0});for(const de of oe){const he=h.join(ee,de.name);de.isDirectory()?yield*this.getPathsFromDirectory(he):yield he}}}return transferManager.TransferManager=ae,transferManager}var hasRequiredSrc$3;function requireSrc$3(){return hasRequiredSrc$3||(hasRequiredSrc$3=1,(function(e){var t=src$9&&src$9.__createBinding||(Object.create?(function(v,_,y,w){w===void 0&&(w=y);var T=Object.getOwnPropertyDescriptor(_,y);(!T||("get"in T?!_.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return _[y]}}),Object.defineProperty(v,w,T)}):(function(v,_,y,w){w===void 0&&(w=y),v[w]=_[y]})),s=src$9&&src$9.__exportStar||function(v,_){for(var y in v)y!=="default"&&!Object.prototype.hasOwnProperty.call(_,y)&&t(_,v,y)};Object.defineProperty(e,"__esModule",{value:!0}),e.Notification=e.Iam=e.HmacKey=e.File=e.Channel=e.Bucket=e.Storage=e.RETRYABLE_ERR_FN_DEFAULT=e.IdempotencyStrategy=e.ApiError=void 0;var p=requireNodejsCommon();Object.defineProperty(e,"ApiError",{enumerable:!0,get:function(){return p.ApiError}});var g=requireStorage$2();Object.defineProperty(e,"IdempotencyStrategy",{enumerable:!0,get:function(){return g.IdempotencyStrategy}}),Object.defineProperty(e,"RETRYABLE_ERR_FN_DEFAULT",{enumerable:!0,get:function(){return g.RETRYABLE_ERR_FN_DEFAULT}}),Object.defineProperty(e,"Storage",{enumerable:!0,get:function(){return g.Storage}});var m=requireBucket();Object.defineProperty(e,"Bucket",{enumerable:!0,get:function(){return m.Bucket}}),s(requireCrc32c(),e);var d=requireChannel();Object.defineProperty(e,"Channel",{enumerable:!0,get:function(){return d.Channel}});var l=requireFile();Object.defineProperty(e,"File",{enumerable:!0,get:function(){return l.File}}),s(requireHashStreamValidator(),e);var a=requireHmacKey();Object.defineProperty(e,"HmacKey",{enumerable:!0,get:function(){return a.HmacKey}});var o=requireIam();Object.defineProperty(e,"Iam",{enumerable:!0,get:function(){return o.Iam}});var h=requireNotification();Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return h.Notification}}),s(requireTransferManager(),e)})(src$9)),src$9}var hasRequiredStorage$1;function requireStorage$1(){if(hasRequiredStorage$1)return storage$2;hasRequiredStorage$1=1;var e={};Object.defineProperty(storage$2,"__esModule",{value:!0}),storage$2.Storage=void 0;const t=requireError(),s=requireCredentialInternal(),p=requireUtils$2(),g=requireValidator$1();class m{constructor(l){if(!g.isNonNullObject(l)||!("options"in l))throw new t.FirebaseError({code:"storage/invalid-argument",message:"First argument passed to admin.storage() must be a valid Firebase app instance."});if(!e.STORAGE_EMULATOR_HOST&&e.FIREBASE_STORAGE_EMULATOR_HOST){if(e.FIREBASE_STORAGE_EMULATOR_HOST.match(/https?:\/\//))throw new t.FirebaseError({code:"storage/invalid-emulator-host",message:"FIREBASE_STORAGE_EMULATOR_HOST should not contain a protocol (http or https)."});e.STORAGE_EMULATOR_HOST=`http://${e.FIREBASE_STORAGE_EMULATOR_HOST}`}let a;try{a=requireSrc$3().Storage}catch(v){throw new t.FirebaseError({code:"storage/missing-dependencies",message:`Failed to import the Cloud Storage client library for Node.js. Make sure to install the "@google-cloud/storage" npm package. Original error: ${v}`})}const o=p.getExplicitProjectId(l),h=l.options.credential;if(h instanceof s.ServiceAccountCredential)this.storageClient=new a({projectId:o,credentials:{private_key:h.privateKey,client_email:h.clientEmail}});else if((0,s.isApplicationDefault)(l.options.credential))this.storageClient=new a;else throw new t.FirebaseError({code:"storage/invalid-credential",message:"Failed to initialize Google Cloud Storage client with the available credential. Must initialize the SDK with a certificate credential or application default credentials to use Cloud Storage API."});this.appInternal=l}bucket(l){const a=typeof l<"u"?l:this.appInternal.options.storageBucket;if(g.isNonEmptyString(a))return this.storageClient.bucket(a);throw new t.FirebaseError({code:"storage/invalid-argument",message:"Bucket name not specified or invalid. Specify a valid bucket name via the storageBucket option when initializing the app, or specify the bucket name explicitly when calling the getBucket() method."})}get app(){return this.appInternal}}return storage$2.Storage=m,storage$2}var src$2={exports:{}},backoff={},logger={},validate$1={},util$3={};const interfaces$5={"google.firestore.v1.Firestore":{retry_codes:{non_idempotent:[],idempotent:["DEADLINE_EXCEEDED","UNAVAILABLE"],deadline_exceeded_resource_exhausted_internal_unavailable:["DEADLINE_EXCEEDED","RESOURCE_EXHAUSTED","INTERNAL","UNAVAILABLE"],resource_exhausted_unavailable:["RESOURCE_EXHAUSTED","UNAVAILABLE"],resource_exhausted_aborted_unavailable:["RESOURCE_EXHAUSTED","ABORTED","UNAVAILABLE"]},retry_params:{default:{initial_retry_delay_millis:100,retry_delay_multiplier:1.3,max_retry_delay_millis:6e4,initial_rpc_timeout_millis:6e4,rpc_timeout_multiplier:1,max_rpc_timeout_millis:6e4,total_timeout_millis:6e5}},methods:{GetDocument:{timeout_millis:6e4,retry_codes_name:"deadline_exceeded_resource_exhausted_internal_unavailable",retry_params_name:"default"},ListDocuments:{timeout_millis:6e4,retry_codes_name:"deadline_exceeded_resource_exhausted_internal_unavailable",retry_params_name:"default"},UpdateDocument:{timeout_millis:6e4,retry_codes_name:"resource_exhausted_unavailable",retry_params_name:"default"},DeleteDocument:{timeout_millis:6e4,retry_codes_name:"deadline_exceeded_resource_exhausted_internal_unavailable",retry_params_name:"default"},BatchGetDocuments:{timeout_millis:3e5,retry_codes_name:"deadline_exceeded_resource_exhausted_internal_unavailable",retry_params_name:"default"},BeginTransaction:{timeout_millis:6e4,retry_codes_name:"deadline_exceeded_resource_exhausted_internal_unavailable",retry_params_name:"default"},Commit:{timeout_millis:6e4,retry_codes_name:"resource_exhausted_unavailable",retry_params_name:"default"},Rollback:{timeout_millis:6e4,retry_codes_name:"deadline_exceeded_resource_exhausted_internal_unavailable",retry_params_name:"default"},RunQuery:{timeout_millis:3e5,retry_codes_name:"deadline_exceeded_resource_exhausted_internal_unavailable",retry_params_name:"default"},RunAggregationQuery:{timeout_millis:3e5,retry_codes_name:"deadline_exceeded_resource_exhausted_internal_unavailable",retry_params_name:"default"},PartitionQuery:{timeout_millis:3e5,retry_codes_name:"deadline_exceeded_resource_exhausted_internal_unavailable",retry_params_name:"default"},Write:{timeout_millis:864e5,retry_codes_name:"non_idempotent",retry_params_name:"default"},Listen:{timeout_millis:864e5,retry_codes_name:"deadline_exceeded_resource_exhausted_internal_unavailable",retry_params_name:"default"},ListCollectionIds:{timeout_millis:6e4,retry_codes_name:"deadline_exceeded_resource_exhausted_internal_unavailable",retry_params_name:"default"},BatchWrite:{timeout_millis:6e4,retry_codes_name:"resource_exhausted_aborted_unavailable",retry_params_name:"default"},CreateDocument:{timeout_millis:6e4,retry_codes_name:"resource_exhausted_unavailable",retry_params_name:"default"}}}},require$$19={interfaces:interfaces$5};var fallback={exports:{}};function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var object_hash={exports:{}},hasRequiredObject_hash;function requireObject_hash(){return hasRequiredObject_hash||(hasRequiredObject_hash=1,(function(e,t){(function(s){e.exports=s()})(function(){return(function s(p,g,m){function d(o,h){if(!g[o]){if(!p[o]){var v=typeof commonjsRequire=="function"&&commonjsRequire;if(!h&&v)return v(o,!0);if(l)return l(o,!0);throw new Error("Cannot find module '"+o+"'")}h=g[o]={exports:{}},p[o][0].call(h.exports,function(_){var y=p[o][1][_];return d(y||_)},h,h.exports,s,p,g,m)}return g[o].exports}for(var l=typeof commonjsRequire=="function"&&commonjsRequire,a=0;a<m.length;a++)d(m[a]);return d})({1:[function(s,p,g){(function(m,d,l,a,o,h,v,_,y){var w=s("crypto");function T(D,k){k=E(D,k);var q;return(q=k.algorithm!=="passthrough"?w.createHash(k.algorithm):new j).write===void 0&&(q.write=q.update,q.end=q.update),x(k,q).dispatch(D),q.update||q.end(""),q.digest?q.digest(k.encoding==="buffer"?void 0:k.encoding):(D=q.read(),k.encoding!=="buffer"?D.toString(k.encoding):D)}(g=p.exports=T).sha1=function(D){return T(D)},g.keys=function(D){return T(D,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},g.MD5=function(D){return T(D,{algorithm:"md5",encoding:"hex"})},g.keysMD5=function(D){return T(D,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var I=w.getHashes?w.getHashes().slice():["sha1","md5"],O=(I.push("passthrough"),["buffer","hex","binary","base64"]);function E(D,k){var q={};if(q.algorithm=(k=k||{}).algorithm||"sha1",q.encoding=k.encoding||"hex",q.excludeValues=!!k.excludeValues,q.algorithm=q.algorithm.toLowerCase(),q.encoding=q.encoding.toLowerCase(),q.ignoreUnknown=k.ignoreUnknown===!0,q.respectType=k.respectType!==!1,q.respectFunctionNames=k.respectFunctionNames!==!1,q.respectFunctionProperties=k.respectFunctionProperties!==!1,q.unorderedArrays=k.unorderedArrays===!0,q.unorderedSets=k.unorderedSets!==!1,q.unorderedObjects=k.unorderedObjects!==!1,q.replacer=k.replacer||void 0,q.excludeKeys=k.excludeKeys||void 0,D===void 0)throw new Error("Object argument required.");for(var G=0;G<I.length;++G)I[G].toLowerCase()===q.algorithm.toLowerCase()&&(q.algorithm=I[G]);if(I.indexOf(q.algorithm)===-1)throw new Error('Algorithm "'+q.algorithm+'"  not supported. supported values: '+I.join(", "));if(O.indexOf(q.encoding)===-1&&q.algorithm!=="passthrough")throw new Error('Encoding "'+q.encoding+'"  not supported. supported values: '+O.join(", "));return q}function C(D){if(typeof D=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(D))!=null}function x(D,k,q){q=q||[];function G($){return k.update?k.update($,"utf8"):k.write($,"utf8")}return{dispatch:function($){return this["_"+(($=D.replacer?D.replacer($):$)===null?"null":typeof $)]($)},_object:function($){var W,K=Object.prototype.toString.call($),z=/\[object (.*)\]/i.exec(K);if(z=(z=z?z[1]:"unknown:["+K+"]").toLowerCase(),0<=(K=q.indexOf($)))return this.dispatch("[CIRCULAR:"+K+"]");if(q.push($),l!==void 0&&l.isBuffer&&l.isBuffer($))return G("buffer:"),G($);if(z==="object"||z==="function"||z==="asyncfunction")return K=Object.keys($),D.unorderedObjects&&(K=K.sort()),D.respectType===!1||C($)||K.splice(0,0,"prototype","__proto__","constructor"),D.excludeKeys&&(K=K.filter(function(Q){return!D.excludeKeys(Q)})),G("object:"+K.length+":"),W=this,K.forEach(function(Q){W.dispatch(Q),G(":"),D.excludeValues||W.dispatch($[Q]),G(",")});if(!this["_"+z]){if(D.ignoreUnknown)return G("["+z+"]");throw new Error('Unknown object type "'+z+'"')}this["_"+z]($)},_array:function($,Q){Q=Q!==void 0?Q:D.unorderedArrays!==!1;var K=this;if(G("array:"+$.length+":"),!Q||$.length<=1)return $.forEach(function(Y){return K.dispatch(Y)});var z=[],Q=$.map(function(Y){var te=new j,ae=q.slice();return x(D,te,ae).dispatch(Y),z=z.concat(ae.slice(q.length)),te.read().toString()});return q=q.concat(z),Q.sort(),this._array(Q,!1)},_date:function($){return G("date:"+$.toJSON())},_symbol:function($){return G("symbol:"+$.toString())},_error:function($){return G("error:"+$.toString())},_boolean:function($){return G("bool:"+$.toString())},_string:function($){G("string:"+$.length+":"),G($.toString())},_function:function($){G("fn:"),C($)?this.dispatch("[native]"):this.dispatch($.toString()),D.respectFunctionNames!==!1&&this.dispatch("function-name:"+String($.name)),D.respectFunctionProperties&&this._object($)},_number:function($){return G("number:"+$.toString())},_xml:function($){return G("xml:"+$.toString())},_null:function(){return G("Null")},_undefined:function(){return G("Undefined")},_regexp:function($){return G("regex:"+$.toString())},_uint8array:function($){return G("uint8array:"),this.dispatch(Array.prototype.slice.call($))},_uint8clampedarray:function($){return G("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call($))},_int8array:function($){return G("int8array:"),this.dispatch(Array.prototype.slice.call($))},_uint16array:function($){return G("uint16array:"),this.dispatch(Array.prototype.slice.call($))},_int16array:function($){return G("int16array:"),this.dispatch(Array.prototype.slice.call($))},_uint32array:function($){return G("uint32array:"),this.dispatch(Array.prototype.slice.call($))},_int32array:function($){return G("int32array:"),this.dispatch(Array.prototype.slice.call($))},_float32array:function($){return G("float32array:"),this.dispatch(Array.prototype.slice.call($))},_float64array:function($){return G("float64array:"),this.dispatch(Array.prototype.slice.call($))},_arraybuffer:function($){return G("arraybuffer:"),this.dispatch(new Uint8Array($))},_url:function($){return G("url:"+$.toString())},_map:function($){return G("map:"),$=Array.from($),this._array($,D.unorderedSets!==!1)},_set:function($){return G("set:"),$=Array.from($),this._array($,D.unorderedSets!==!1)},_file:function($){return G("file:"),this.dispatch([$.name,$.size,$.type,$.lastModfied])},_blob:function(){if(D.ignoreUnknown)return G("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return G("domwindow")},_bigint:function($){return G("bigint:"+$.toString())},_process:function(){return G("process")},_timer:function(){return G("timer")},_pipe:function(){return G("pipe")},_tcp:function(){return G("tcp")},_udp:function(){return G("udp")},_tty:function(){return G("tty")},_statwatcher:function(){return G("statwatcher")},_securecontext:function(){return G("securecontext")},_connection:function(){return G("connection")},_zlib:function(){return G("zlib")},_context:function(){return G("context")},_nodescript:function(){return G("nodescript")},_httpparser:function(){return G("httpparser")},_dataview:function(){return G("dataview")},_signal:function(){return G("signal")},_fsevent:function(){return G("fsevent")},_tlswrap:function(){return G("tlswrap")}}}function j(){return{buf:"",write:function(D){this.buf+=D},end:function(D){this.buf+=D},read:function(){return this.buf}}}g.writeToStream=function(D,k,q){return q===void 0&&(q=k,k={}),x(k=E(D,k),q).dispatch(D)}}).call(this,s("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},s("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(s,p,g){(function(m,d,l,a,o,h,v,_,y){(function(w){var T=typeof Uint8Array<"u"?Uint8Array:Array,I=43,O=47,E=48,C=97,x=65,j=45,D=95;function k(q){return q=q.charCodeAt(0),q===I||q===j?62:q===O||q===D?63:q<E?-1:q<E+10?q-E+26+26:q<x+26?q-x:q<C+26?q-C+26:void 0}w.toByteArray=function(q){var G,$;if(0<q.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var W=q.length,W=q.charAt(W-2)==="="?2:q.charAt(W-1)==="="?1:0,K=new T(3*q.length/4-W),z=0<W?q.length-4:q.length,Q=0;function Y(te){K[Q++]=te}for(G=0;G<z;G+=4,0)Y((16711680&($=k(q.charAt(G))<<18|k(q.charAt(G+1))<<12|k(q.charAt(G+2))<<6|k(q.charAt(G+3))))>>16),Y((65280&$)>>8),Y(255&$);return W==2?Y(255&($=k(q.charAt(G))<<2|k(q.charAt(G+1))>>4)):W==1&&(Y(($=k(q.charAt(G))<<10|k(q.charAt(G+1))<<4|k(q.charAt(G+2))>>2)>>8&255),Y(255&$)),K},w.fromByteArray=function(q){var G,$,W,K,z=q.length%3,Q="";function Y(te){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(te)}for(G=0,W=q.length-z;G<W;G+=3)$=(q[G]<<16)+(q[G+1]<<8)+q[G+2],Q+=Y((K=$)>>18&63)+Y(K>>12&63)+Y(K>>6&63)+Y(63&K);switch(z){case 1:Q=(Q+=Y(($=q[q.length-1])>>2))+Y($<<4&63)+"==";break;case 2:Q=(Q=(Q+=Y(($=(q[q.length-2]<<8)+q[q.length-1])>>10))+Y($>>4&63))+Y($<<2&63)+"="}return Q}})(g===void 0?this.base64js={}:g)}).call(this,s("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},s("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(s,p,g){(function(m,d,I,a,o,h,v,_,y){var w=s("base64-js"),T=s("ieee754");function I(J,c,N){if(!(this instanceof I))return new I(J,c,N);var A,V,ne,ce,ie=typeof J;if(c==="base64"&&ie=="string")for(J=(ce=J).trim?ce.trim():ce.replace(/^\s+|\s+$/g,"");J.length%4!=0;)J+="=";if(ie=="number")A=ue(J);else if(ie=="string")A=I.byteLength(J,c);else{if(ie!="object")throw new Error("First argument needs to be a number, array or string.");A=ue(J.length)}if(I._useTypedArrays?V=I._augment(new Uint8Array(A)):((V=this).length=A,V._isBuffer=!0),I._useTypedArrays&&typeof J.byteLength=="number")V._set(J);else if(ee(ce=J)||I.isBuffer(ce)||ce&&typeof ce=="object"&&typeof ce.length=="number")for(ne=0;ne<A;ne++)I.isBuffer(J)?V[ne]=J.readUInt8(ne):V[ne]=J[ne];else if(ie=="string")V.write(J,0,c);else if(ie=="number"&&!I._useTypedArrays&&!N)for(ne=0;ne<A;ne++)V[ne]=0;return V}function O(J,c,N,A){return I._charsWritten=Ee((function(V){for(var ne=[],ce=0;ce<V.length;ce++)ne.push(255&V.charCodeAt(ce));return ne})(c),J,N,A)}function E(J,c,N,A){return I._charsWritten=Ee((function(V){for(var ne,ce,ie=[],u=0;u<V.length;u++)ce=V.charCodeAt(u),ne=ce>>8,ce=ce%256,ie.push(ce),ie.push(ne);return ie})(c),J,N,A)}function C(J,c,N){var A="";N=Math.min(J.length,N);for(var V=c;V<N;V++)A+=String.fromCharCode(J[V]);return A}function x(J,c,N,ne){ne||(ge(typeof N=="boolean","missing or invalid endian"),ge(c!=null,"missing offset"),ge(c+1<J.length,"Trying to read beyond buffer length"));var V,ne=J.length;if(!(ne<=c))return N?(V=J[c],c+1<ne&&(V|=J[c+1]<<8)):(V=J[c]<<8,c+1<ne&&(V|=J[c+1])),V}function j(J,c,N,ne){ne||(ge(typeof N=="boolean","missing or invalid endian"),ge(c!=null,"missing offset"),ge(c+3<J.length,"Trying to read beyond buffer length"));var V,ne=J.length;if(!(ne<=c))return N?(c+2<ne&&(V=J[c+2]<<16),c+1<ne&&(V|=J[c+1]<<8),V|=J[c],c+3<ne&&(V+=J[c+3]<<24>>>0)):(c+1<ne&&(V=J[c+1]<<16),c+2<ne&&(V|=J[c+2]<<8),c+3<ne&&(V|=J[c+3]),V+=J[c]<<24>>>0),V}function D(J,c,N,A){if(A||(ge(typeof N=="boolean","missing or invalid endian"),ge(c!=null,"missing offset"),ge(c+1<J.length,"Trying to read beyond buffer length")),!(J.length<=c))return A=x(J,c,N,!0),32768&A?-1*(65535-A+1):A}function k(J,c,N,A){if(A||(ge(typeof N=="boolean","missing or invalid endian"),ge(c!=null,"missing offset"),ge(c+3<J.length,"Trying to read beyond buffer length")),!(J.length<=c))return A=j(J,c,N,!0),2147483648&A?-1*(4294967295-A+1):A}function q(J,c,N,A){return A||(ge(typeof N=="boolean","missing or invalid endian"),ge(c+3<J.length,"Trying to read beyond buffer length")),T.read(J,c,N,23,4)}function G(J,c,N,A){return A||(ge(typeof N=="boolean","missing or invalid endian"),ge(c+7<J.length,"Trying to read beyond buffer length")),T.read(J,c,N,52,8)}function $(J,c,N,A,V){if(V||(ge(c!=null,"missing value"),ge(typeof A=="boolean","missing or invalid endian"),ge(N!=null,"missing offset"),ge(N+1<J.length,"trying to write beyond buffer length"),Se(c,65535)),V=J.length,!(V<=N))for(var ne=0,ce=Math.min(V-N,2);ne<ce;ne++)J[N+ne]=(c&255<<8*(A?ne:1-ne))>>>8*(A?ne:1-ne)}function W(J,c,N,A,V){if(V||(ge(c!=null,"missing value"),ge(typeof A=="boolean","missing or invalid endian"),ge(N!=null,"missing offset"),ge(N+3<J.length,"trying to write beyond buffer length"),Se(c,4294967295)),V=J.length,!(V<=N))for(var ne=0,ce=Math.min(V-N,4);ne<ce;ne++)J[N+ne]=c>>>8*(A?ne:3-ne)&255}function K(J,c,N,A,V){V||(ge(c!=null,"missing value"),ge(typeof A=="boolean","missing or invalid endian"),ge(N!=null,"missing offset"),ge(N+1<J.length,"Trying to write beyond buffer length"),be(c,32767,-32768)),J.length<=N||$(J,0<=c?c:65535+c+1,N,A,V)}function z(J,c,N,A,V){V||(ge(c!=null,"missing value"),ge(typeof A=="boolean","missing or invalid endian"),ge(N!=null,"missing offset"),ge(N+3<J.length,"Trying to write beyond buffer length"),be(c,2147483647,-2147483648)),J.length<=N||W(J,0<=c?c:4294967295+c+1,N,A,V)}function Q(J,c,N,A,V){V||(ge(c!=null,"missing value"),ge(typeof A=="boolean","missing or invalid endian"),ge(N!=null,"missing offset"),ge(N+3<J.length,"Trying to write beyond buffer length"),Oe(c,34028234663852886e22,-34028234663852886e22)),J.length<=N||T.write(J,c,N,A,23,4)}function Y(J,c,N,A,V){V||(ge(c!=null,"missing value"),ge(typeof A=="boolean","missing or invalid endian"),ge(N!=null,"missing offset"),ge(N+7<J.length,"Trying to write beyond buffer length"),Oe(c,17976931348623157e292,-17976931348623157e292)),J.length<=N||T.write(J,c,N,A,52,8)}g.Buffer=I,g.SlowBuffer=I,g.INSPECT_MAX_BYTES=50,I.poolSize=8192,I._useTypedArrays=(function(){try{var J=new ArrayBuffer(0),c=new Uint8Array(J);return c.foo=function(){return 42},c.foo()===42&&typeof c.subarray=="function"}catch{return!1}})(),I.isEncoding=function(J){switch(String(J).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},I.isBuffer=function(J){return!(J==null||!J._isBuffer)},I.byteLength=function(J,c){var N;switch(J+="",c||"utf8"){case"hex":N=J.length/2;break;case"utf8":case"utf-8":N=de(J).length;break;case"ascii":case"binary":case"raw":N=J.length;break;case"base64":N=he(J).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":N=2*J.length;break;default:throw new Error("Unknown encoding")}return N},I.concat=function(J,c){if(ge(ee(J),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),J.length===0)return new I(0);if(J.length===1)return J[0];if(typeof c!="number")for(V=c=0;V<J.length;V++)c+=J[V].length;for(var N=new I(c),A=0,V=0;V<J.length;V++){var ne=J[V];ne.copy(N,A),A+=ne.length}return N},I.prototype.write=function(J,c,N,A){isFinite(c)?isFinite(N)||(A=N,N=void 0):(u=A,A=c,c=N,N=u),c=Number(c)||0;var V,ne,ce,ie,u=this.length-c;switch((!N||u<(N=Number(N)))&&(N=u),A=String(A||"utf8").toLowerCase()){case"hex":V=(function(P,M,n,L){n=Number(n)||0;var U=P.length-n;(!L||U<(L=Number(L)))&&(L=U),ge((U=M.length)%2==0,"Invalid hex string"),U/2<L&&(L=U/2);for(var X=0;X<L;X++){var me=parseInt(M.substr(2*X,2),16);ge(!isNaN(me),"Invalid hex string"),P[n+X]=me}return I._charsWritten=2*X,X})(this,J,c,N);break;case"utf8":case"utf-8":ne=this,ce=c,ie=N,V=I._charsWritten=Ee(de(J),ne,ce,ie);break;case"ascii":case"binary":V=O(this,J,c,N);break;case"base64":ne=this,ce=c,ie=N,V=I._charsWritten=Ee(he(J),ne,ce,ie);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":V=E(this,J,c,N);break;default:throw new Error("Unknown encoding")}return V},I.prototype.toString=function(J,c,N){var A,V,ne,ce,ie=this;if(J=String(J||"utf8").toLowerCase(),c=Number(c)||0,(N=N!==void 0?Number(N):ie.length)===c)return"";switch(J){case"hex":A=(function(u,P,M){var n=u.length;(!P||P<0)&&(P=0),(!M||M<0||n<M)&&(M=n);for(var L="",U=P;U<M;U++)L+=oe(u[U]);return L})(ie,c,N);break;case"utf8":case"utf-8":A=(function(u,P,M){var n="",L="";M=Math.min(u.length,M);for(var U=P;U<M;U++)u[U]<=127?(n+=fe(L)+String.fromCharCode(u[U]),L=""):L+="%"+u[U].toString(16);return n+fe(L)})(ie,c,N);break;case"ascii":case"binary":A=C(ie,c,N);break;case"base64":V=ie,ce=N,A=(ne=c)===0&&ce===V.length?w.fromByteArray(V):w.fromByteArray(V.slice(ne,ce));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":A=(function(u,P,M){for(var n=u.slice(P,M),L="",U=0;U<n.length;U+=2)L+=String.fromCharCode(n[U]+256*n[U+1]);return L})(ie,c,N);break;default:throw new Error("Unknown encoding")}return A},I.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},I.prototype.copy=function(J,c,N,A){if(c=c||0,(A=A||A===0?A:this.length)!==(N=N||0)&&J.length!==0&&this.length!==0){ge(N<=A,"sourceEnd < sourceStart"),ge(0<=c&&c<J.length,"targetStart out of bounds"),ge(0<=N&&N<this.length,"sourceStart out of bounds"),ge(0<=A&&A<=this.length,"sourceEnd out of bounds"),A>this.length&&(A=this.length);var V=(A=J.length-c<A-N?J.length-c+N:A)-N;if(V<100||!I._useTypedArrays)for(var ne=0;ne<V;ne++)J[ne+c]=this[ne+N];else J._set(this.subarray(N,N+V),c)}},I.prototype.slice=function(J,c){var N=this.length;if(J=ae(J,N,0),c=ae(c,N,N),I._useTypedArrays)return I._augment(this.subarray(J,c));for(var A=c-J,V=new I(A,void 0,!0),ne=0;ne<A;ne++)V[ne]=this[ne+J];return V},I.prototype.get=function(J){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(J)},I.prototype.set=function(J,c){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(J,c)},I.prototype.readUInt8=function(J,c){if(c||(ge(J!=null,"missing offset"),ge(J<this.length,"Trying to read beyond buffer length")),!(J>=this.length))return this[J]},I.prototype.readUInt16LE=function(J,c){return x(this,J,!0,c)},I.prototype.readUInt16BE=function(J,c){return x(this,J,!1,c)},I.prototype.readUInt32LE=function(J,c){return j(this,J,!0,c)},I.prototype.readUInt32BE=function(J,c){return j(this,J,!1,c)},I.prototype.readInt8=function(J,c){if(c||(ge(J!=null,"missing offset"),ge(J<this.length,"Trying to read beyond buffer length")),!(J>=this.length))return 128&this[J]?-1*(255-this[J]+1):this[J]},I.prototype.readInt16LE=function(J,c){return D(this,J,!0,c)},I.prototype.readInt16BE=function(J,c){return D(this,J,!1,c)},I.prototype.readInt32LE=function(J,c){return k(this,J,!0,c)},I.prototype.readInt32BE=function(J,c){return k(this,J,!1,c)},I.prototype.readFloatLE=function(J,c){return q(this,J,!0,c)},I.prototype.readFloatBE=function(J,c){return q(this,J,!1,c)},I.prototype.readDoubleLE=function(J,c){return G(this,J,!0,c)},I.prototype.readDoubleBE=function(J,c){return G(this,J,!1,c)},I.prototype.writeUInt8=function(J,c,N){N||(ge(J!=null,"missing value"),ge(c!=null,"missing offset"),ge(c<this.length,"trying to write beyond buffer length"),Se(J,255)),c>=this.length||(this[c]=J)},I.prototype.writeUInt16LE=function(J,c,N){$(this,J,c,!0,N)},I.prototype.writeUInt16BE=function(J,c,N){$(this,J,c,!1,N)},I.prototype.writeUInt32LE=function(J,c,N){W(this,J,c,!0,N)},I.prototype.writeUInt32BE=function(J,c,N){W(this,J,c,!1,N)},I.prototype.writeInt8=function(J,c,N){N||(ge(J!=null,"missing value"),ge(c!=null,"missing offset"),ge(c<this.length,"Trying to write beyond buffer length"),be(J,127,-128)),c>=this.length||(0<=J?this.writeUInt8(J,c,N):this.writeUInt8(255+J+1,c,N))},I.prototype.writeInt16LE=function(J,c,N){K(this,J,c,!0,N)},I.prototype.writeInt16BE=function(J,c,N){K(this,J,c,!1,N)},I.prototype.writeInt32LE=function(J,c,N){z(this,J,c,!0,N)},I.prototype.writeInt32BE=function(J,c,N){z(this,J,c,!1,N)},I.prototype.writeFloatLE=function(J,c,N){Q(this,J,c,!0,N)},I.prototype.writeFloatBE=function(J,c,N){Q(this,J,c,!1,N)},I.prototype.writeDoubleLE=function(J,c,N){Y(this,J,c,!0,N)},I.prototype.writeDoubleBE=function(J,c,N){Y(this,J,c,!1,N)},I.prototype.fill=function(J,c,N){if(c=c||0,N=N||this.length,ge(typeof(J=typeof(J=J||0)=="string"?J.charCodeAt(0):J)=="number"&&!isNaN(J),"value is not a number"),ge(c<=N,"end < start"),N!==c&&this.length!==0){ge(0<=c&&c<this.length,"start out of bounds"),ge(0<=N&&N<=this.length,"end out of bounds");for(var A=c;A<N;A++)this[A]=J}},I.prototype.inspect=function(){for(var J=[],c=this.length,N=0;N<c;N++)if(J[N]=oe(this[N]),N===g.INSPECT_MAX_BYTES){J[N+1]="...";break}return"<Buffer "+J.join(" ")+">"},I.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(I._useTypedArrays)return new I(this).buffer;for(var J=new Uint8Array(this.length),c=0,N=J.length;c<N;c+=1)J[c]=this[c];return J.buffer};var te=I.prototype;function ae(J,c,N){return typeof J!="number"?N:c<=(J=~~J)?c:0<=J||0<=(J+=c)?J:0}function ue(J){return(J=~~Math.ceil(+J))<0?0:J}function ee(J){return(Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"})(J)}function oe(J){return J<16?"0"+J.toString(16):J.toString(16)}function de(J){for(var c=[],N=0;N<J.length;N++){var A=J.charCodeAt(N);if(A<=127)c.push(J.charCodeAt(N));else for(var V=N,ne=(55296<=A&&A<=57343&&N++,encodeURIComponent(J.slice(V,N+1)).substr(1).split("%")),ce=0;ce<ne.length;ce++)c.push(parseInt(ne[ce],16))}return c}function he(J){return w.toByteArray(J)}function Ee(J,c,N,A){for(var V=0;V<A&&!(V+N>=c.length||V>=J.length);V++)c[V+N]=J[V];return V}function fe(J){try{return decodeURIComponent(J)}catch{return""}}function Se(J,c){ge(typeof J=="number","cannot write a non-number as a number"),ge(0<=J,"specified a negative value for writing an unsigned value"),ge(J<=c,"value is larger than maximum value for type"),ge(Math.floor(J)===J,"value has a fractional component")}function be(J,c,N){ge(typeof J=="number","cannot write a non-number as a number"),ge(J<=c,"value larger than maximum allowed value"),ge(N<=J,"value smaller than minimum allowed value"),ge(Math.floor(J)===J,"value has a fractional component")}function Oe(J,c,N){ge(typeof J=="number","cannot write a non-number as a number"),ge(J<=c,"value larger than maximum allowed value"),ge(N<=J,"value smaller than minimum allowed value")}function ge(J,c){if(!J)throw new Error(c||"Failed assertion")}I._augment=function(J){return J._isBuffer=!0,J._get=J.get,J._set=J.set,J.get=te.get,J.set=te.set,J.write=te.write,J.toString=te.toString,J.toLocaleString=te.toString,J.toJSON=te.toJSON,J.copy=te.copy,J.slice=te.slice,J.readUInt8=te.readUInt8,J.readUInt16LE=te.readUInt16LE,J.readUInt16BE=te.readUInt16BE,J.readUInt32LE=te.readUInt32LE,J.readUInt32BE=te.readUInt32BE,J.readInt8=te.readInt8,J.readInt16LE=te.readInt16LE,J.readInt16BE=te.readInt16BE,J.readInt32LE=te.readInt32LE,J.readInt32BE=te.readInt32BE,J.readFloatLE=te.readFloatLE,J.readFloatBE=te.readFloatBE,J.readDoubleLE=te.readDoubleLE,J.readDoubleBE=te.readDoubleBE,J.writeUInt8=te.writeUInt8,J.writeUInt16LE=te.writeUInt16LE,J.writeUInt16BE=te.writeUInt16BE,J.writeUInt32LE=te.writeUInt32LE,J.writeUInt32BE=te.writeUInt32BE,J.writeInt8=te.writeInt8,J.writeInt16LE=te.writeInt16LE,J.writeInt16BE=te.writeInt16BE,J.writeInt32LE=te.writeInt32LE,J.writeInt32BE=te.writeInt32BE,J.writeFloatLE=te.writeFloatLE,J.writeFloatBE=te.writeFloatBE,J.writeDoubleLE=te.writeDoubleLE,J.writeDoubleBE=te.writeDoubleBE,J.fill=te.fill,J.inspect=te.inspect,J.toArrayBuffer=te.toArrayBuffer,J}}).call(this,s("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},s("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(s,p,g){(function(m,d,w,a,o,h,v,_,y){var w=s("buffer").Buffer,T=4,I=new w(T);I.fill(0),p.exports={hash:function(O,E,C,x){for(var j=E((function($,W){$.length%T!=0&&(K=$.length+(T-$.length%T),$=w.concat([$,I],K));for(var K,z=[],Q=W?$.readInt32BE:$.readInt32LE,Y=0;Y<$.length;Y+=T)z.push(Q.call($,Y));return z})(O=w.isBuffer(O)?O:new w(O),x),8*O.length),E=x,D=new w(C),k=E?D.writeInt32BE:D.writeInt32LE,q=0;q<j.length;q++)k.call(D,j[q],4*q,!0);return D}}}).call(this,s("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},s("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(s,p,g){(function(m,d,w,a,o,h,v,_,y){var w=s("buffer").Buffer,T=s("./sha"),I=s("./sha256"),O=s("./rng"),E={sha1:T,sha256:I,md5:s("./md5")},C=64,x=new w(C);function j($,W){var K=E[$=$||"sha1"],z=[];return K||D("algorithm:",$,"is not yet supported"),{update:function(Q){return w.isBuffer(Q)||(Q=new w(Q)),z.push(Q),Q.length,this},digest:function(Q){var Y=w.concat(z),Y=W?(function(te,ae,ue){w.isBuffer(ae)||(ae=new w(ae)),w.isBuffer(ue)||(ue=new w(ue)),ae.length>C?ae=te(ae):ae.length<C&&(ae=w.concat([ae,x],C));for(var ee=new w(C),oe=new w(C),de=0;de<C;de++)ee[de]=54^ae[de],oe[de]=92^ae[de];return ue=te(w.concat([ee,ue])),te(w.concat([oe,ue]))})(K,W,Y):K(Y);return z=null,Q?Y.toString(Q):Y}}}function D(){var $=[].slice.call(arguments).join(" ");throw new Error([$,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}x.fill(0),g.createHash=function($){return j($)},g.createHmac=j,g.randomBytes=function($,W){if(!W||!W.call)return new w(O($));try{W.call(this,void 0,new w(O($)))}catch(K){W(K)}};var k,q=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],G=function($){g[$]=function(){D("sorry,",$,"is not implemented yet")}};for(k in q)G(q[k])}).call(this,s("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},s("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(s,p,g){(function(m,d,l,a,o,h,v,_,y){var w=s("./helpers");function T(D,k){D[k>>5]|=128<<k%32,D[14+(k+64>>>9<<4)]=k;for(var q=1732584193,G=-271733879,$=-1732584194,W=271733878,K=0;K<D.length;K+=16){var z=q,Q=G,Y=$,te=W,q=O(q,G,$,W,D[K+0],7,-680876936),W=O(W,q,G,$,D[K+1],12,-389564586),$=O($,W,q,G,D[K+2],17,606105819),G=O(G,$,W,q,D[K+3],22,-1044525330);q=O(q,G,$,W,D[K+4],7,-176418897),W=O(W,q,G,$,D[K+5],12,1200080426),$=O($,W,q,G,D[K+6],17,-1473231341),G=O(G,$,W,q,D[K+7],22,-45705983),q=O(q,G,$,W,D[K+8],7,1770035416),W=O(W,q,G,$,D[K+9],12,-1958414417),$=O($,W,q,G,D[K+10],17,-42063),G=O(G,$,W,q,D[K+11],22,-1990404162),q=O(q,G,$,W,D[K+12],7,1804603682),W=O(W,q,G,$,D[K+13],12,-40341101),$=O($,W,q,G,D[K+14],17,-1502002290),q=E(q,G=O(G,$,W,q,D[K+15],22,1236535329),$,W,D[K+1],5,-165796510),W=E(W,q,G,$,D[K+6],9,-1069501632),$=E($,W,q,G,D[K+11],14,643717713),G=E(G,$,W,q,D[K+0],20,-373897302),q=E(q,G,$,W,D[K+5],5,-701558691),W=E(W,q,G,$,D[K+10],9,38016083),$=E($,W,q,G,D[K+15],14,-660478335),G=E(G,$,W,q,D[K+4],20,-405537848),q=E(q,G,$,W,D[K+9],5,568446438),W=E(W,q,G,$,D[K+14],9,-1019803690),$=E($,W,q,G,D[K+3],14,-187363961),G=E(G,$,W,q,D[K+8],20,1163531501),q=E(q,G,$,W,D[K+13],5,-1444681467),W=E(W,q,G,$,D[K+2],9,-51403784),$=E($,W,q,G,D[K+7],14,1735328473),q=C(q,G=E(G,$,W,q,D[K+12],20,-1926607734),$,W,D[K+5],4,-378558),W=C(W,q,G,$,D[K+8],11,-2022574463),$=C($,W,q,G,D[K+11],16,1839030562),G=C(G,$,W,q,D[K+14],23,-35309556),q=C(q,G,$,W,D[K+1],4,-1530992060),W=C(W,q,G,$,D[K+4],11,1272893353),$=C($,W,q,G,D[K+7],16,-155497632),G=C(G,$,W,q,D[K+10],23,-1094730640),q=C(q,G,$,W,D[K+13],4,681279174),W=C(W,q,G,$,D[K+0],11,-358537222),$=C($,W,q,G,D[K+3],16,-722521979),G=C(G,$,W,q,D[K+6],23,76029189),q=C(q,G,$,W,D[K+9],4,-640364487),W=C(W,q,G,$,D[K+12],11,-421815835),$=C($,W,q,G,D[K+15],16,530742520),q=x(q,G=C(G,$,W,q,D[K+2],23,-995338651),$,W,D[K+0],6,-198630844),W=x(W,q,G,$,D[K+7],10,1126891415),$=x($,W,q,G,D[K+14],15,-1416354905),G=x(G,$,W,q,D[K+5],21,-57434055),q=x(q,G,$,W,D[K+12],6,1700485571),W=x(W,q,G,$,D[K+3],10,-1894986606),$=x($,W,q,G,D[K+10],15,-1051523),G=x(G,$,W,q,D[K+1],21,-2054922799),q=x(q,G,$,W,D[K+8],6,1873313359),W=x(W,q,G,$,D[K+15],10,-30611744),$=x($,W,q,G,D[K+6],15,-1560198380),G=x(G,$,W,q,D[K+13],21,1309151649),q=x(q,G,$,W,D[K+4],6,-145523070),W=x(W,q,G,$,D[K+11],10,-1120210379),$=x($,W,q,G,D[K+2],15,718787259),G=x(G,$,W,q,D[K+9],21,-343485551),q=j(q,z),G=j(G,Q),$=j($,Y),W=j(W,te)}return Array(q,G,$,W)}function I(D,k,q,G,$,W){return j((k=j(j(k,D),j(G,W)))<<$|k>>>32-$,q)}function O(D,k,q,G,$,W,K){return I(k&q|~k&G,D,k,$,W,K)}function E(D,k,q,G,$,W,K){return I(k&G|q&~G,D,k,$,W,K)}function C(D,k,q,G,$,W,K){return I(k^q^G,D,k,$,W,K)}function x(D,k,q,G,$,W,K){return I(q^(k|~G),D,k,$,W,K)}function j(D,k){var q=(65535&D)+(65535&k);return(D>>16)+(k>>16)+(q>>16)<<16|65535&q}p.exports=function(D){return w.hash(D,T,16)}}).call(this,s("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},s("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(s,p,g){(function(m,d,l,a,o,h,v,_,y){p.exports=function(w){for(var T,I=new Array(w),O=0;O<w;O++)(3&O)==0&&(T=4294967296*Math.random()),I[O]=T>>>((3&O)<<3)&255;return I}}).call(this,s("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},s("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(s,p,g){(function(m,d,l,a,o,h,v,_,y){var w=s("./helpers");function T(E,C){E[C>>5]|=128<<24-C%32,E[15+(C+64>>9<<4)]=C;for(var x,j,D,k=Array(80),q=1732584193,G=-271733879,$=-1732584194,W=271733878,K=-1009589776,z=0;z<E.length;z+=16){for(var Q=q,Y=G,te=$,ae=W,ue=K,ee=0;ee<80;ee++){k[ee]=ee<16?E[z+ee]:O(k[ee-3]^k[ee-8]^k[ee-14]^k[ee-16],1);var oe=I(I(O(q,5),(oe=G,j=$,D=W,(x=ee)<20?oe&j|~oe&D:!(x<40)&&x<60?oe&j|oe&D|j&D:oe^j^D)),I(I(K,k[ee]),(x=ee)<20?1518500249:x<40?1859775393:x<60?-1894007588:-899497514)),K=W,W=$,$=O(G,30),G=q,q=oe}q=I(q,Q),G=I(G,Y),$=I($,te),W=I(W,ae),K=I(K,ue)}return Array(q,G,$,W,K)}function I(E,C){var x=(65535&E)+(65535&C);return(E>>16)+(C>>16)+(x>>16)<<16|65535&x}function O(E,C){return E<<C|E>>>32-C}p.exports=function(E){return w.hash(E,T,20,!0)}}).call(this,s("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},s("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(s,p,g){(function(m,d,l,a,o,h,v,_,y){function w(C,x){var j=(65535&C)+(65535&x);return(C>>16)+(x>>16)+(j>>16)<<16|65535&j}function T(C,x){var j,D=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),k=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),q=new Array(64);C[x>>5]|=128<<24-x%32,C[15+(x+64>>9<<4)]=x;for(var G,$,W=0;W<C.length;W+=16){for(var K=k[0],z=k[1],Q=k[2],Y=k[3],te=k[4],ae=k[5],ue=k[6],ee=k[7],oe=0;oe<64;oe++)q[oe]=oe<16?C[oe+W]:w(w(w(($=q[oe-2],O($,17)^O($,19)^E($,10)),q[oe-7]),($=q[oe-15],O($,7)^O($,18)^E($,3))),q[oe-16]),j=w(w(w(w(ee,O($=te,6)^O($,11)^O($,25)),te&ae^~te&ue),D[oe]),q[oe]),G=w(O(G=K,2)^O(G,13)^O(G,22),K&z^K&Q^z&Q),ee=ue,ue=ae,ae=te,te=w(Y,j),Y=Q,Q=z,z=K,K=w(j,G);k[0]=w(K,k[0]),k[1]=w(z,k[1]),k[2]=w(Q,k[2]),k[3]=w(Y,k[3]),k[4]=w(te,k[4]),k[5]=w(ae,k[5]),k[6]=w(ue,k[6]),k[7]=w(ee,k[7])}return k}var I=s("./helpers"),O=function(C,x){return C>>>x|C<<32-x},E=function(C,x){return C>>>x};p.exports=function(C){return I.hash(C,T,32,!0)}}).call(this,s("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},s("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(s,p,g){(function(m,d,l,a,o,h,v,_,y){g.read=function(w,T,I,O,W){var C,x,j=8*W-O-1,D=(1<<j)-1,k=D>>1,q=-7,G=I?W-1:0,$=I?-1:1,W=w[T+G];for(G+=$,C=W&(1<<-q)-1,W>>=-q,q+=j;0<q;C=256*C+w[T+G],G+=$,q-=8);for(x=C&(1<<-q)-1,C>>=-q,q+=O;0<q;x=256*x+w[T+G],G+=$,q-=8);if(C===0)C=1-k;else{if(C===D)return x?NaN:1/0*(W?-1:1);x+=Math.pow(2,O),C-=k}return(W?-1:1)*x*Math.pow(2,C-O)},g.write=function(w,T,I,O,E,K){var x,j,D=8*K-E-1,k=(1<<D)-1,q=k>>1,G=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,$=O?0:K-1,W=O?1:-1,K=T<0||T===0&&1/T<0?1:0;for(T=Math.abs(T),isNaN(T)||T===1/0?(j=isNaN(T)?1:0,x=k):(x=Math.floor(Math.log(T)/Math.LN2),T*(O=Math.pow(2,-x))<1&&(x--,O*=2),2<=(T+=1<=x+q?G/O:G*Math.pow(2,1-q))*O&&(x++,O/=2),k<=x+q?(j=0,x=k):1<=x+q?(j=(T*O-1)*Math.pow(2,E),x+=q):(j=T*Math.pow(2,q-1)*Math.pow(2,E),x=0));8<=E;w[I+$]=255&j,$+=W,j/=256,E-=8);for(x=x<<E|j,D+=E;0<D;w[I+$]=255&x,$+=W,x/=256,D-=8);w[I+$-W]|=128*K}}).call(this,s("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},s("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(s,p,g){(function(m,d,l,a,o,h,v,_,y){var w,T,I;function O(){}(m=p.exports={}).nextTick=(T=typeof window<"u"&&window.setImmediate,I=typeof window<"u"&&window.postMessage&&window.addEventListener,T?function(E){return window.setImmediate(E)}:I?(w=[],window.addEventListener("message",function(E){var C=E.source;C!==window&&C!==null||E.data!=="process-tick"||(E.stopPropagation(),0<w.length&&w.shift()())},!0),function(E){w.push(E),window.postMessage("process-tick","*")}):function(E){setTimeout(E,0)}),m.title="browser",m.browser=!0,m.env={},m.argv=[],m.on=O,m.addListener=O,m.once=O,m.off=O,m.removeListener=O,m.removeAllListeners=O,m.emit=O,m.binding=function(E){throw new Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(E){throw new Error("process.chdir is not supported")}}).call(this,s("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},s("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(object_hash)),object_hash.exports}var src$1={exports:{}},indexLight={exports:{}},indexMinimal={},minimal$1={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;hasRequiredAspromise=1,aspromise=e;function e(t,s){for(var p=new Array(arguments.length-1),g=0,m=2,d=!0;m<arguments.length;)p[g++]=arguments[m++];return new Promise(function(a,o){p[g]=function(v){if(d)if(d=!1,v)o(v);else{for(var _=new Array(arguments.length-1),y=0;y<_.length;)_[y++]=arguments[y];a.apply(null,_)}};try{t.apply(s||null,p)}catch(h){d&&(d=!1,o(h))}})}return aspromise}var base64={},hasRequiredBase64;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,(function(e){var t=e;t.length=function(l){var a=l.length;if(!a)return 0;for(var o=0;--a%4>1&&l.charAt(a)==="=";)++o;return Math.ceil(l.length*3)/4-o};for(var s=new Array(64),p=new Array(123),g=0;g<64;)p[s[g]=g<26?g+65:g<52?g+71:g<62?g-4:g-59|43]=g++;t.encode=function(l,a,o){for(var h=null,v=[],_=0,y=0,w;a<o;){var T=l[a++];switch(y){case 0:v[_++]=s[T>>2],w=(T&3)<<4,y=1;break;case 1:v[_++]=s[w|T>>4],w=(T&15)<<2,y=2;break;case 2:v[_++]=s[w|T>>6],v[_++]=s[T&63],y=0;break}_>8191&&((h||(h=[])).push(String.fromCharCode.apply(String,v)),_=0)}return y&&(v[_++]=s[w],v[_++]=61,y===1&&(v[_++]=61)),h?(_&&h.push(String.fromCharCode.apply(String,v.slice(0,_))),h.join("")):String.fromCharCode.apply(String,v.slice(0,_))};var m="invalid encoding";t.decode=function(l,a,o){for(var h=o,v=0,_,y=0;y<l.length;){var w=l.charCodeAt(y++);if(w===61&&v>1)break;if((w=p[w])===void 0)throw Error(m);switch(v){case 0:_=w,v=1;break;case 1:a[o++]=_<<2|(w&48)>>4,_=w,v=2;break;case 2:a[o++]=(_&15)<<4|(w&60)>>2,_=w,v=3;break;case 3:a[o++]=(_&3)<<6|w,v=0;break}}if(v===1)throw Error(m);return o-h},t.test=function(l){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(l)}})(base64)),base64}var eventemitter,hasRequiredEventemitter;function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;hasRequiredEventemitter=1,eventemitter=e;function e(){this._listeners={}}return e.prototype.on=function(s,p,g){return(this._listeners[s]||(this._listeners[s]=[])).push({fn:p,ctx:g||this}),this},e.prototype.off=function(s,p){if(s===void 0)this._listeners={};else if(p===void 0)this._listeners[s]=[];else for(var g=this._listeners[s],m=0;m<g.length;)g[m].fn===p?g.splice(m,1):++m;return this},e.prototype.emit=function(s){var p=this._listeners[s];if(p){for(var g=[],m=1;m<arguments.length;)g.push(arguments[m++]);for(m=0;m<p.length;)p[m].fn.apply(p[m++].ctx,g)}return this},eventemitter}var float,hasRequiredFloat;function requireFloat(){if(hasRequiredFloat)return float;hasRequiredFloat=1,float=e(e);function e(m){return typeof Float32Array<"u"?(function(){var d=new Float32Array([-0]),l=new Uint8Array(d.buffer),a=l[3]===128;function o(y,w,T){d[0]=y,w[T]=l[0],w[T+1]=l[1],w[T+2]=l[2],w[T+3]=l[3]}function h(y,w,T){d[0]=y,w[T]=l[3],w[T+1]=l[2],w[T+2]=l[1],w[T+3]=l[0]}m.writeFloatLE=a?o:h,m.writeFloatBE=a?h:o;function v(y,w){return l[0]=y[w],l[1]=y[w+1],l[2]=y[w+2],l[3]=y[w+3],d[0]}function _(y,w){return l[3]=y[w],l[2]=y[w+1],l[1]=y[w+2],l[0]=y[w+3],d[0]}m.readFloatLE=a?v:_,m.readFloatBE=a?_:v})():(function(){function d(a,o,h,v){var _=o<0?1:0;if(_&&(o=-o),o===0)a(1/o>0?0:2147483648,h,v);else if(isNaN(o))a(2143289344,h,v);else if(o>34028234663852886e22)a((_<<31|2139095040)>>>0,h,v);else if(o<11754943508222875e-54)a((_<<31|Math.round(o/1401298464324817e-60))>>>0,h,v);else{var y=Math.floor(Math.log(o)/Math.LN2),w=Math.round(o*Math.pow(2,-y)*8388608)&8388607;a((_<<31|y+127<<23|w)>>>0,h,v)}}m.writeFloatLE=d.bind(null,t),m.writeFloatBE=d.bind(null,s);function l(a,o,h){var v=a(o,h),_=(v>>31)*2+1,y=v>>>23&255,w=v&8388607;return y===255?w?NaN:_*(1/0):y===0?_*1401298464324817e-60*w:_*Math.pow(2,y-150)*(w+8388608)}m.readFloatLE=l.bind(null,p),m.readFloatBE=l.bind(null,g)})(),typeof Float64Array<"u"?(function(){var d=new Float64Array([-0]),l=new Uint8Array(d.buffer),a=l[7]===128;function o(y,w,T){d[0]=y,w[T]=l[0],w[T+1]=l[1],w[T+2]=l[2],w[T+3]=l[3],w[T+4]=l[4],w[T+5]=l[5],w[T+6]=l[6],w[T+7]=l[7]}function h(y,w,T){d[0]=y,w[T]=l[7],w[T+1]=l[6],w[T+2]=l[5],w[T+3]=l[4],w[T+4]=l[3],w[T+5]=l[2],w[T+6]=l[1],w[T+7]=l[0]}m.writeDoubleLE=a?o:h,m.writeDoubleBE=a?h:o;function v(y,w){return l[0]=y[w],l[1]=y[w+1],l[2]=y[w+2],l[3]=y[w+3],l[4]=y[w+4],l[5]=y[w+5],l[6]=y[w+6],l[7]=y[w+7],d[0]}function _(y,w){return l[7]=y[w],l[6]=y[w+1],l[5]=y[w+2],l[4]=y[w+3],l[3]=y[w+4],l[2]=y[w+5],l[1]=y[w+6],l[0]=y[w+7],d[0]}m.readDoubleLE=a?v:_,m.readDoubleBE=a?_:v})():(function(){function d(a,o,h,v,_,y){var w=v<0?1:0;if(w&&(v=-v),v===0)a(0,_,y+o),a(1/v>0?0:2147483648,_,y+h);else if(isNaN(v))a(0,_,y+o),a(2146959360,_,y+h);else if(v>17976931348623157e292)a(0,_,y+o),a((w<<31|2146435072)>>>0,_,y+h);else{var T;if(v<22250738585072014e-324)T=v/5e-324,a(T>>>0,_,y+o),a((w<<31|T/4294967296)>>>0,_,y+h);else{var I=Math.floor(Math.log(v)/Math.LN2);I===1024&&(I=1023),T=v*Math.pow(2,-I),a(T*4503599627370496>>>0,_,y+o),a((w<<31|I+1023<<20|T*1048576&1048575)>>>0,_,y+h)}}}m.writeDoubleLE=d.bind(null,t,0,4),m.writeDoubleBE=d.bind(null,s,4,0);function l(a,o,h,v,_){var y=a(v,_+o),w=a(v,_+h),T=(w>>31)*2+1,I=w>>>20&2047,O=4294967296*(w&1048575)+y;return I===2047?O?NaN:T*(1/0):I===0?T*5e-324*O:T*Math.pow(2,I-1075)*(O+4503599627370496)}m.readDoubleLE=l.bind(null,p,0,4),m.readDoubleBE=l.bind(null,g,4,0)})(),m}function t(m,d,l){d[l]=m&255,d[l+1]=m>>>8&255,d[l+2]=m>>>16&255,d[l+3]=m>>>24}function s(m,d,l){d[l]=m>>>24,d[l+1]=m>>>16&255,d[l+2]=m>>>8&255,d[l+3]=m&255}function p(m,d){return(m[d]|m[d+1]<<8|m[d+2]<<16|m[d+3]<<24)>>>0}function g(m,d){return(m[d]<<24|m[d+1]<<16|m[d+2]<<8|m[d+3])>>>0}return float}var inquire_1,hasRequiredInquire;function requireInquire(){if(hasRequiredInquire)return inquire_1;hasRequiredInquire=1,inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}return inquire_1}var utf8={},hasRequiredUtf8;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,(function(e){var t=e;t.length=function(p){for(var g=0,m=0,d=0;d<p.length;++d)m=p.charCodeAt(d),m<128?g+=1:m<2048?g+=2:(m&64512)===55296&&(p.charCodeAt(d+1)&64512)===56320?(++d,g+=4):g+=3;return g},t.read=function(p,g,m){var d=m-g;if(d<1)return"";for(var l=null,a=[],o=0,h;g<m;)h=p[g++],h<128?a[o++]=h:h>191&&h<224?a[o++]=(h&31)<<6|p[g++]&63:h>239&&h<365?(h=((h&7)<<18|(p[g++]&63)<<12|(p[g++]&63)<<6|p[g++]&63)-65536,a[o++]=55296+(h>>10),a[o++]=56320+(h&1023)):a[o++]=(h&15)<<12|(p[g++]&63)<<6|p[g++]&63,o>8191&&((l||(l=[])).push(String.fromCharCode.apply(String,a)),o=0);return l?(o&&l.push(String.fromCharCode.apply(String,a.slice(0,o))),l.join("")):String.fromCharCode.apply(String,a.slice(0,o))},t.write=function(p,g,m){for(var d=m,l,a,o=0;o<p.length;++o)l=p.charCodeAt(o),l<128?g[m++]=l:l<2048?(g[m++]=l>>6|192,g[m++]=l&63|128):(l&64512)===55296&&((a=p.charCodeAt(o+1))&64512)===56320?(l=65536+((l&1023)<<10)+(a&1023),++o,g[m++]=l>>18|240,g[m++]=l>>12&63|128,g[m++]=l>>6&63|128,g[m++]=l&63|128):(g[m++]=l>>12|224,g[m++]=l>>6&63|128,g[m++]=l&63|128);return m-d}})(utf8)),utf8}var pool_1,hasRequiredPool$1;function requirePool$1(){if(hasRequiredPool$1)return pool_1;hasRequiredPool$1=1,pool_1=e;function e(t,s,p){var g=p||8192,m=g>>>1,d=null,l=g;return function(o){if(o<1||o>m)return t(o);l+o>g&&(d=t(g),l=0);var h=s.call(d,l,l+=o);return l&7&&(l=(l|7)+1),h}}return pool_1}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=t;var e=requireMinimal$1();function t(m,d){this.lo=m>>>0,this.hi=d>>>0}var s=t.zero=new t(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var p=t.zeroHash="\0\0\0\0\0\0\0\0";t.fromNumber=function(d){if(d===0)return s;var l=d<0;l&&(d=-d);var a=d>>>0,o=(d-a)/4294967296>>>0;return l&&(o=~o>>>0,a=~a>>>0,++a>4294967295&&(a=0,++o>4294967295&&(o=0))),new t(a,o)},t.from=function(d){if(typeof d=="number")return t.fromNumber(d);if(e.isString(d))if(e.Long)d=e.Long.fromString(d);else return t.fromNumber(parseInt(d,10));return d.low||d.high?new t(d.low>>>0,d.high>>>0):s},t.prototype.toNumber=function(d){if(!d&&this.hi>>>31){var l=~this.lo+1>>>0,a=~this.hi>>>0;return l||(a=a+1>>>0),-(l+a*4294967296)}return this.lo+this.hi*4294967296},t.prototype.toLong=function(d){return e.Long?new e.Long(this.lo|0,this.hi|0,!!d):{low:this.lo|0,high:this.hi|0,unsigned:!!d}};var g=String.prototype.charCodeAt;return t.fromHash=function(d){return d===p?s:new t((g.call(d,0)|g.call(d,1)<<8|g.call(d,2)<<16|g.call(d,3)<<24)>>>0,(g.call(d,4)|g.call(d,5)<<8|g.call(d,6)<<16|g.call(d,7)<<24)>>>0)},t.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},t.prototype.zzEncode=function(){var d=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^d)>>>0,this.lo=(this.lo<<1^d)>>>0,this},t.prototype.zzDecode=function(){var d=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^d)>>>0,this.hi=(this.hi>>>1^d)>>>0,this},t.prototype.length=function(){var d=this.lo,l=(this.lo>>>28|this.hi<<4)>>>0,a=this.hi>>>24;return a===0?l===0?d<16384?d<128?1:2:d<2097152?3:4:l<16384?l<128?5:6:l<2097152?7:8:a<128?9:10},longbits}var hasRequiredMinimal$1;function requireMinimal$1(){return hasRequiredMinimal$1||(hasRequiredMinimal$1=1,(function(e){var t=e;t.asPromise=requireAspromise(),t.base64=requireBase64(),t.EventEmitter=requireEventemitter(),t.float=requireFloat(),t.inquire=requireInquire(),t.utf8=requireUtf8(),t.pool=requirePool$1(),t.LongBits=requireLongbits(),t.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),t.global=t.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||minimal$1,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(m){return typeof m=="number"&&isFinite(m)&&Math.floor(m)===m},t.isString=function(m){return typeof m=="string"||m instanceof String},t.isObject=function(m){return m&&typeof m=="object"},t.isset=t.isSet=function(m,d){var l=m[d];return l!=null&&m.hasOwnProperty(d)?typeof l!="object"||(Array.isArray(l)?l.length:Object.keys(l).length)>0:!1},t.Buffer=(function(){try{var g=t.inquire("buffer").Buffer;return g.prototype.utf8Write?g:null}catch{return null}})(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(m){return typeof m=="number"?t.Buffer?t._Buffer_allocUnsafe(m):new t.Array(m):t.Buffer?t._Buffer_from(m):typeof Uint8Array>"u"?m:new Uint8Array(m)},t.Array=typeof Uint8Array<"u"?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(m){return m?t.LongBits.from(m).toHash():t.LongBits.zeroHash},t.longFromHash=function(m,d){var l=t.LongBits.fromHash(m);return t.Long?t.Long.fromBits(l.lo,l.hi,d):l.toNumber(!!d)};function s(g,m,d){for(var l=Object.keys(m),a=0;a<l.length;++a)(g[l[a]]===void 0||!d)&&(g[l[a]]=m[l[a]]);return g}t.merge=s,t.lcFirst=function(m){return m.charAt(0).toLowerCase()+m.substring(1)};function p(g){function m(d,l){if(!(this instanceof m))return new m(d,l);Object.defineProperty(this,"message",{get:function(){return d}}),Error.captureStackTrace?Error.captureStackTrace(this,m):Object.defineProperty(this,"stack",{value:new Error().stack||""}),l&&s(this,l)}return m.prototype=Object.create(Error.prototype,{constructor:{value:m,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return g},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),m}t.newError=p,t.ProtocolError=p("ProtocolError"),t.oneOfGetter=function(m){for(var d={},l=0;l<m.length;++l)d[m[l]]=1;return function(){for(var a=Object.keys(this),o=a.length-1;o>-1;--o)if(d[a[o]]===1&&this[a[o]]!==void 0&&this[a[o]]!==null)return a[o]}},t.oneOfSetter=function(m){return function(d){for(var l=0;l<m.length;++l)m[l]!==d&&delete this[m[l]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var g=t.Buffer;if(!g){t._Buffer_from=t._Buffer_allocUnsafe=null;return}t._Buffer_from=g.from!==Uint8Array.from&&g.from||function(d,l){return new g(d,l)},t._Buffer_allocUnsafe=g.allocUnsafe||function(d){return new g(d)}}})(minimal$1)),minimal$1}var writer,hasRequiredWriter;function requireWriter(){if(hasRequiredWriter)return writer;hasRequiredWriter=1,writer=a;var e=requireMinimal$1(),t,s=e.LongBits,p=e.base64,g=e.utf8;function m(I,O,E){this.fn=I,this.len=O,this.next=void 0,this.val=E}function d(){}function l(I){this.head=I.head,this.tail=I.tail,this.len=I.len,this.next=I.states}function a(){this.len=0,this.head=new m(d,0,0),this.tail=this.head,this.states=null}var o=function(){return e.Buffer?function(){return(a.create=function(){return new t})()}:function(){return new a}};a.create=o(),a.alloc=function(O){return new e.Array(O)},e.Array!==Array&&(a.alloc=e.pool(a.alloc,e.Array.prototype.subarray)),a.prototype._push=function(O,E,C){return this.tail=this.tail.next=new m(O,E,C),this.len+=E,this};function h(I,O,E){O[E]=I&255}function v(I,O,E){for(;I>127;)O[E++]=I&127|128,I>>>=7;O[E]=I}function _(I,O){this.len=I,this.next=void 0,this.val=O}_.prototype=Object.create(m.prototype),_.prototype.fn=v,a.prototype.uint32=function(O){return this.len+=(this.tail=this.tail.next=new _((O=O>>>0)<128?1:O<16384?2:O<2097152?3:O<268435456?4:5,O)).len,this},a.prototype.int32=function(O){return O<0?this._push(y,10,s.fromNumber(O)):this.uint32(O)},a.prototype.sint32=function(O){return this.uint32((O<<1^O>>31)>>>0)};function y(I,O,E){for(;I.hi;)O[E++]=I.lo&127|128,I.lo=(I.lo>>>7|I.hi<<25)>>>0,I.hi>>>=7;for(;I.lo>127;)O[E++]=I.lo&127|128,I.lo=I.lo>>>7;O[E++]=I.lo}a.prototype.uint64=function(O){var E=s.from(O);return this._push(y,E.length(),E)},a.prototype.int64=a.prototype.uint64,a.prototype.sint64=function(O){var E=s.from(O).zzEncode();return this._push(y,E.length(),E)},a.prototype.bool=function(O){return this._push(h,1,O?1:0)};function w(I,O,E){O[E]=I&255,O[E+1]=I>>>8&255,O[E+2]=I>>>16&255,O[E+3]=I>>>24}a.prototype.fixed32=function(O){return this._push(w,4,O>>>0)},a.prototype.sfixed32=a.prototype.fixed32,a.prototype.fixed64=function(O){var E=s.from(O);return this._push(w,4,E.lo)._push(w,4,E.hi)},a.prototype.sfixed64=a.prototype.fixed64,a.prototype.float=function(O){return this._push(e.float.writeFloatLE,4,O)},a.prototype.double=function(O){return this._push(e.float.writeDoubleLE,8,O)};var T=e.Array.prototype.set?function(O,E,C){E.set(O,C)}:function(O,E,C){for(var x=0;x<O.length;++x)E[C+x]=O[x]};return a.prototype.bytes=function(O){var E=O.length>>>0;if(!E)return this._push(h,1,0);if(e.isString(O)){var C=a.alloc(E=p.length(O));p.decode(O,C,0),O=C}return this.uint32(E)._push(T,E,O)},a.prototype.string=function(O){var E=g.length(O);return E?this.uint32(E)._push(g.write,E,O):this._push(h,1,0)},a.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new m(d,0,0),this.len=0,this},a.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new m(d,0,0),this.len=0),this},a.prototype.ldelim=function(){var O=this.head,E=this.tail,C=this.len;return this.reset().uint32(C),C&&(this.tail.next=O.next,this.tail=E,this.len+=C),this},a.prototype.finish=function(){for(var O=this.head.next,E=this.constructor.alloc(this.len),C=0;O;)O.fn(O.val,E,C),C+=O.len,O=O.next;return E},a._configure=function(I){t=I,a.create=o(),t._configure()},writer}var writer_buffer,hasRequiredWriter_buffer;function requireWriter_buffer(){if(hasRequiredWriter_buffer)return writer_buffer;hasRequiredWriter_buffer=1,writer_buffer=s;var e=requireWriter();(s.prototype=Object.create(e.prototype)).constructor=s;var t=requireMinimal$1();function s(){e.call(this)}s._configure=function(){s.alloc=t._Buffer_allocUnsafe,s.writeBytesBuffer=t.Buffer&&t.Buffer.prototype instanceof Uint8Array&&t.Buffer.prototype.set.name==="set"?function(m,d,l){d.set(m,l)}:function(m,d,l){if(m.copy)m.copy(d,l,0,m.length);else for(var a=0;a<m.length;)d[l++]=m[a++]}},s.prototype.bytes=function(m){t.isString(m)&&(m=t._Buffer_from(m,"base64"));var d=m.length>>>0;return this.uint32(d),d&&this._push(s.writeBytesBuffer,d,m),this};function p(g,m,d){g.length<40?t.utf8.write(g,m,d):m.utf8Write?m.utf8Write(g,d):m.write(g,d)}return s.prototype.string=function(m){var d=t.Buffer.byteLength(m);return this.uint32(d),d&&this._push(p,d,m),this},s._configure(),writer_buffer}var reader,hasRequiredReader;function requireReader(){if(hasRequiredReader)return reader;hasRequiredReader=1,reader=m;var e=requireMinimal$1(),t,s=e.LongBits,p=e.utf8;function g(v,_){return RangeError("index out of range: "+v.pos+" + "+(_||1)+" > "+v.len)}function m(v){this.buf=v,this.pos=0,this.len=v.length}var d=typeof Uint8Array<"u"?function(_){if(_ instanceof Uint8Array||Array.isArray(_))return new m(_);throw Error("illegal buffer")}:function(_){if(Array.isArray(_))return new m(_);throw Error("illegal buffer")},l=function(){return e.Buffer?function(y){return(m.create=function(T){return e.Buffer.isBuffer(T)?new t(T):d(T)})(y)}:d};m.create=l(),m.prototype._slice=e.Array.prototype.subarray||e.Array.prototype.slice,m.prototype.uint32=(function(){var _=4294967295;return function(){if(_=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(_=(_|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(_=(_|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(_=(_|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(_=(_|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return _;if((this.pos+=5)>this.len)throw this.pos=this.len,g(this,10);return _}})(),m.prototype.int32=function(){return this.uint32()|0},m.prototype.sint32=function(){var _=this.uint32();return _>>>1^-(_&1)|0};function a(){var v=new s(0,0),_=0;if(this.len-this.pos>4){for(;_<4;++_)if(v.lo=(v.lo|(this.buf[this.pos]&127)<<_*7)>>>0,this.buf[this.pos++]<128)return v;if(v.lo=(v.lo|(this.buf[this.pos]&127)<<28)>>>0,v.hi=(v.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return v;_=0}else{for(;_<3;++_){if(this.pos>=this.len)throw g(this);if(v.lo=(v.lo|(this.buf[this.pos]&127)<<_*7)>>>0,this.buf[this.pos++]<128)return v}return v.lo=(v.lo|(this.buf[this.pos++]&127)<<_*7)>>>0,v}if(this.len-this.pos>4){for(;_<5;++_)if(v.hi=(v.hi|(this.buf[this.pos]&127)<<_*7+3)>>>0,this.buf[this.pos++]<128)return v}else for(;_<5;++_){if(this.pos>=this.len)throw g(this);if(v.hi=(v.hi|(this.buf[this.pos]&127)<<_*7+3)>>>0,this.buf[this.pos++]<128)return v}throw Error("invalid varint encoding")}m.prototype.bool=function(){return this.uint32()!==0};function o(v,_){return(v[_-4]|v[_-3]<<8|v[_-2]<<16|v[_-1]<<24)>>>0}m.prototype.fixed32=function(){if(this.pos+4>this.len)throw g(this,4);return o(this.buf,this.pos+=4)},m.prototype.sfixed32=function(){if(this.pos+4>this.len)throw g(this,4);return o(this.buf,this.pos+=4)|0};function h(){if(this.pos+8>this.len)throw g(this,8);return new s(o(this.buf,this.pos+=4),o(this.buf,this.pos+=4))}return m.prototype.float=function(){if(this.pos+4>this.len)throw g(this,4);var _=e.float.readFloatLE(this.buf,this.pos);return this.pos+=4,_},m.prototype.double=function(){if(this.pos+8>this.len)throw g(this,4);var _=e.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,_},m.prototype.bytes=function(){var _=this.uint32(),y=this.pos,w=this.pos+_;if(w>this.len)throw g(this,_);if(this.pos+=_,Array.isArray(this.buf))return this.buf.slice(y,w);if(y===w){var T=e.Buffer;return T?T.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,y,w)},m.prototype.string=function(){var _=this.bytes();return p.read(_,0,_.length)},m.prototype.skip=function(_){if(typeof _=="number"){if(this.pos+_>this.len)throw g(this,_);this.pos+=_}else do if(this.pos>=this.len)throw g(this);while(this.buf[this.pos++]&128);return this},m.prototype.skipType=function(v){switch(v){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(v=this.uint32()&7)!==4;)this.skipType(v);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+v+" at offset "+this.pos)}return this},m._configure=function(v){t=v,m.create=l(),t._configure();var _=e.Long?"toLong":"toNumber";e.merge(m.prototype,{int64:function(){return a.call(this)[_](!1)},uint64:function(){return a.call(this)[_](!0)},sint64:function(){return a.call(this).zzDecode()[_](!1)},fixed64:function(){return h.call(this)[_](!0)},sfixed64:function(){return h.call(this)[_](!1)}})},reader}var reader_buffer,hasRequiredReader_buffer;function requireReader_buffer(){if(hasRequiredReader_buffer)return reader_buffer;hasRequiredReader_buffer=1,reader_buffer=s;var e=requireReader();(s.prototype=Object.create(e.prototype)).constructor=s;var t=requireMinimal$1();function s(p){e.call(this,p)}return s._configure=function(){t.Buffer&&(s.prototype._slice=t.Buffer.prototype.slice)},s.prototype.string=function(){var g=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+g,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+g,this.len))},s._configure(),reader_buffer}var rpc={},service$1,hasRequiredService$1;function requireService$1(){if(hasRequiredService$1)return service$1;hasRequiredService$1=1,service$1=t;var e=requireMinimal$1();(t.prototype=Object.create(e.EventEmitter.prototype)).constructor=t;function t(s,p,g){if(typeof s!="function")throw TypeError("rpcImpl must be a function");e.EventEmitter.call(this),this.rpcImpl=s,this.requestDelimited=!!p,this.responseDelimited=!!g}return t.prototype.rpcCall=function s(p,g,m,d,l){if(!d)throw TypeError("request must be specified");var a=this;if(!l)return e.asPromise(s,a,p,g,m,d);if(!a.rpcImpl){setTimeout(function(){l(Error("already ended"))},0);return}try{return a.rpcImpl(p,g[a.requestDelimited?"encodeDelimited":"encode"](d).finish(),function(h,v){if(h)return a.emit("error",h,p),l(h);if(v===null){a.end(!0);return}if(!(v instanceof m))try{v=m[a.responseDelimited?"decodeDelimited":"decode"](v)}catch(_){return a.emit("error",_,p),l(_)}return a.emit("data",v,p),l(null,v)})}catch(o){a.emit("error",o,p),setTimeout(function(){l(o)},0);return}},t.prototype.end=function(p){return this.rpcImpl&&(p||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},service$1}var hasRequiredRpc;function requireRpc(){return hasRequiredRpc||(hasRequiredRpc=1,(function(e){var t=e;t.Service=requireService$1()})(rpc)),rpc}var roots,hasRequiredRoots;function requireRoots(){return hasRequiredRoots||(hasRequiredRoots=1,roots={}),roots}var hasRequiredIndexMinimal;function requireIndexMinimal(){return hasRequiredIndexMinimal||(hasRequiredIndexMinimal=1,(function(e){var t=e;t.build="minimal",t.Writer=requireWriter(),t.BufferWriter=requireWriter_buffer(),t.Reader=requireReader(),t.BufferReader=requireReader_buffer(),t.util=requireMinimal$1(),t.rpc=requireRpc(),t.roots=requireRoots(),t.configure=s;function s(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}s()})(indexMinimal)),indexMinimal}var types$2={},util$2={exports:{}},codegen_1,hasRequiredCodegen;function requireCodegen(){if(hasRequiredCodegen)return codegen_1;hasRequiredCodegen=1,codegen_1=e;function e(t,s){typeof t=="string"&&(s=t,t=void 0);var p=[];function g(d){if(typeof d!="string"){var l=m();if(e.verbose&&console.log("codegen: "+l),l="return "+l,d){for(var a=Object.keys(d),o=new Array(a.length+1),h=new Array(a.length),v=0;v<a.length;)o[v]=a[v],h[v]=d[a[v++]];return o[v]=l,Function.apply(null,o).apply(null,h)}return Function(l)()}for(var _=new Array(arguments.length-1),y=0;y<_.length;)_[y]=arguments[++y];if(y=0,d=d.replace(/%([%dfijs])/g,function(T,I){var O=_[y++];switch(I){case"d":case"f":return String(Number(O));case"i":return String(Math.floor(O));case"j":return JSON.stringify(O);case"s":return String(O)}return"%"}),y!==_.length)throw Error("parameter count mismatch");return p.push(d),g}function m(d){return"function "+(d||s||"")+"("+(t&&t.join(",")||"")+`){
  `+p.join(`
  `)+`
}`}return g.toString=m,g}return e.verbose=!1,codegen_1}var fetch_1,hasRequiredFetch;function requireFetch(){if(hasRequiredFetch)return fetch_1;hasRequiredFetch=1,fetch_1=p;var e=requireAspromise(),t=requireInquire(),s=t("fs");function p(g,m,d){return typeof m=="function"?(d=m,m={}):m||(m={}),d?!m.xhr&&s&&s.readFile?s.readFile(g,function(a,o){return a&&typeof XMLHttpRequest<"u"?p.xhr(g,m,d):a?d(a):d(null,m.binary?o:o.toString("utf8"))}):p.xhr(g,m,d):e(p,this,g,m)}return p.xhr=function(m,d,l){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(a.readyState===4){if(a.status!==0&&a.status!==200)return l(Error("status "+a.status));if(d.binary){var h=a.response;if(!h){h=[];for(var v=0;v<a.responseText.length;++v)h.push(a.responseText.charCodeAt(v)&255)}return l(null,typeof Uint8Array<"u"?new Uint8Array(h):h)}return l(null,a.responseText)}},d.binary&&("overrideMimeType"in a&&a.overrideMimeType("text/plain; charset=x-user-defined"),a.responseType="arraybuffer"),a.open("GET",m),a.send()},fetch_1}var path$1={},hasRequiredPath$1;function requirePath$1(){return hasRequiredPath$1||(hasRequiredPath$1=1,(function(e){var t=e,s=t.isAbsolute=function(m){return/^(?:\/|\w+:)/.test(m)},p=t.normalize=function(m){m=m.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var d=m.split("/"),l=s(m),a="";l&&(a=d.shift()+"/");for(var o=0;o<d.length;)d[o]===".."?o>0&&d[o-1]!==".."?d.splice(--o,2):l?d.splice(o,1):++o:d[o]==="."?d.splice(o,1):++o;return a+d.join("/")};t.resolve=function(m,d,l){return l||(d=p(d)),s(d)?d:(l||(m=p(m)),(m=m.replace(/(?:\/|^)[^/]+$/,"")).length?p(m+"/"+d):d)}})(path$1)),path$1}var namespace,hasRequiredNamespace;function requireNamespace(){if(hasRequiredNamespace)return namespace;hasRequiredNamespace=1,namespace=a;var e=requireObject();((a.prototype=Object.create(e.prototype)).constructor=a).className="Namespace";var t=requireField(),s=requireUtil$3(),p=requireOneof(),g,m,d;a.fromJSON=function(v,_){return new a(v,_.options).addJSON(_.nested)};function l(h,v){if(h&&h.length){for(var _={},y=0;y<h.length;++y)_[h[y].name]=h[y].toJSON(v);return _}}a.arrayToJSON=l,a.isReservedId=function(v,_){if(v){for(var y=0;y<v.length;++y)if(typeof v[y]!="string"&&v[y][0]<=_&&v[y][1]>_)return!0}return!1},a.isReservedName=function(v,_){if(v){for(var y=0;y<v.length;++y)if(v[y]===_)return!0}return!1};function a(h,v){e.call(this,h,v),this.nested=void 0,this._nestedArray=null,this._lookupCache={},this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0}function o(h){h._nestedArray=null,h._lookupCache={};for(var v=h;v=v.parent;)v._lookupCache={};return h}return Object.defineProperty(a.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=s.toArray(this.nested))}}),a.prototype.toJSON=function(v){return s.toObject(["options",this.options,"nested",l(this.nestedArray,v)])},a.prototype.addJSON=function(v){var _=this;if(v)for(var y=Object.keys(v),w=0,T;w<y.length;++w)T=v[y[w]],_.add((T.fields!==void 0?g.fromJSON:T.values!==void 0?d.fromJSON:T.methods!==void 0?m.fromJSON:T.id!==void 0?t.fromJSON:a.fromJSON)(y[w],T));return this},a.prototype.get=function(v){return this.nested&&this.nested[v]||null},a.prototype.getEnum=function(v){if(this.nested&&this.nested[v]instanceof d)return this.nested[v].values;throw Error("no such enum: "+v)},a.prototype.add=function(v){if(!(v instanceof t&&v.extend!==void 0||v instanceof g||v instanceof p||v instanceof d||v instanceof m||v instanceof a))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var _=this.get(v.name);if(_)if(_ instanceof a&&v instanceof a&&!(_ instanceof g||_ instanceof m)){for(var y=_.nestedArray,w=0;w<y.length;++w)v.add(y[w]);this.remove(_),this.nested||(this.nested={}),v.setOptions(_.options,!0)}else throw Error("duplicate name '"+v.name+"' in "+this)}this.nested[v.name]=v,this instanceof g||this instanceof m||this instanceof d||this instanceof t||v._edition||(v._edition=v._defaultEdition),this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0;for(var T=this;T=T.parent;)T._needsRecursiveFeatureResolution=!0,T._needsRecursiveResolve=!0;return v.onAdd(this),o(this)},a.prototype.remove=function(v){if(!(v instanceof e))throw TypeError("object must be a ReflectionObject");if(v.parent!==this)throw Error(v+" is not a member of "+this);return delete this.nested[v.name],Object.keys(this.nested).length||(this.nested=void 0),v.onRemove(this),o(this)},a.prototype.define=function(v,_){if(s.isString(v))v=v.split(".");else if(!Array.isArray(v))throw TypeError("illegal path");if(v&&v.length&&v[0]==="")throw Error("path must be relative");for(var y=this;v.length>0;){var w=v.shift();if(y.nested&&y.nested[w]){if(y=y.nested[w],!(y instanceof a))throw Error("path conflicts with non-namespace objects")}else y.add(y=new a(w))}return _&&y.addJSON(_),y},a.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;this._resolveFeaturesRecursive(this._edition);var v=this.nestedArray,_=0;for(this.resolve();_<v.length;)v[_]instanceof a?v[_++].resolveAll():v[_++].resolve();return this._needsRecursiveResolve=!1,this},a.prototype._resolveFeaturesRecursive=function(v){return this._needsRecursiveFeatureResolution?(this._needsRecursiveFeatureResolution=!1,v=this._edition||v,e.prototype._resolveFeaturesRecursive.call(this,v),this.nestedArray.forEach(_=>{_._resolveFeaturesRecursive(v)}),this):this},a.prototype.lookup=function(v,_,y){if(typeof _=="boolean"?(y=_,_=void 0):_&&!Array.isArray(_)&&(_=[_]),s.isString(v)&&v.length){if(v===".")return this.root;v=v.split(".")}else if(!v.length)return this;var w=v.join(".");if(v[0]==="")return this.root.lookup(v.slice(1),_);var T=this.root._fullyQualifiedObjects&&this.root._fullyQualifiedObjects["."+w];if(T&&(!_||_.indexOf(T.constructor)>-1)||(T=this._lookupImpl(v,w),T&&(!_||_.indexOf(T.constructor)>-1)))return T;if(y)return null;for(var I=this;I.parent;){if(T=I.parent._lookupImpl(v,w),T&&(!_||_.indexOf(T.constructor)>-1))return T;I=I.parent}return null},a.prototype._lookupImpl=function(v,_){if(Object.prototype.hasOwnProperty.call(this._lookupCache,_))return this._lookupCache[_];var y=this.get(v[0]),w=null;if(y)v.length===1?w=y:y instanceof a&&(v=v.slice(1),w=y._lookupImpl(v,v.join(".")));else for(var T=0;T<this.nestedArray.length;++T)this._nestedArray[T]instanceof a&&(y=this._nestedArray[T]._lookupImpl(v,_))&&(w=y);return this._lookupCache[_]=w,w},a.prototype.lookupType=function(v){var _=this.lookup(v,[g]);if(!_)throw Error("no such type: "+v);return _},a.prototype.lookupEnum=function(v){var _=this.lookup(v,[d]);if(!_)throw Error("no such Enum '"+v+"' in "+this);return _},a.prototype.lookupTypeOrEnum=function(v){var _=this.lookup(v,[g,d]);if(!_)throw Error("no such Type or Enum '"+v+"' in "+this);return _},a.prototype.lookupService=function(v){var _=this.lookup(v,[m]);if(!_)throw Error("no such Service '"+v+"' in "+this);return _},a._configure=function(h,v,_){g=h,m=v,d=_},namespace}var mapfield,hasRequiredMapfield;function requireMapfield(){if(hasRequiredMapfield)return mapfield;hasRequiredMapfield=1,mapfield=p;var e=requireField();((p.prototype=Object.create(e.prototype)).constructor=p).className="MapField";var t=requireTypes$2(),s=requireUtil$3();function p(g,m,d,l,a,o){if(e.call(this,g,m,l,void 0,void 0,a,o),!s.isString(d))throw TypeError("keyType must be a string");this.keyType=d,this.resolvedKeyType=null,this.map=!0}return p.fromJSON=function(m,d){return new p(m,d.id,d.keyType,d.type,d.options,d.comment)},p.prototype.toJSON=function(m){var d=m?!!m.keepComments:!1;return s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",d?this.comment:void 0])},p.prototype.resolve=function(){if(this.resolved)return this;if(t.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return e.prototype.resolve.call(this)},p.d=function(m,d,l){return typeof l=="function"?l=s.decorateType(l).name:l&&typeof l=="object"&&(l=s.decorateEnum(l).name),function(o,h){s.decorateType(o.constructor).add(new p(h,m,d,l))}},mapfield}var method,hasRequiredMethod;function requireMethod(){if(hasRequiredMethod)return method;hasRequiredMethod=1,method=s;var e=requireObject();((s.prototype=Object.create(e.prototype)).constructor=s).className="Method";var t=requireUtil$3();function s(p,g,m,d,l,a,o,h,v){if(t.isObject(l)?(o=l,l=a=void 0):t.isObject(a)&&(o=a,a=void 0),!(g===void 0||t.isString(g)))throw TypeError("type must be a string");if(!t.isString(m))throw TypeError("requestType must be a string");if(!t.isString(d))throw TypeError("responseType must be a string");e.call(this,p,o),this.type=g||"rpc",this.requestType=m,this.requestStream=l?!0:void 0,this.responseType=d,this.responseStream=a?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=h,this.parsedOptions=v}return s.fromJSON=function(g,m){return new s(g,m.type,m.requestType,m.responseType,m.requestStream,m.responseStream,m.options,m.comment,m.parsedOptions)},s.prototype.toJSON=function(g){var m=g?!!g.keepComments:!1;return t.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",m?this.comment:void 0,"parsedOptions",this.parsedOptions])},s.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),e.prototype.resolve.call(this))},method}var service,hasRequiredService;function requireService(){if(hasRequiredService)return service;hasRequiredService=1,service=g;var e=requireNamespace();((g.prototype=Object.create(e.prototype)).constructor=g).className="Service";var t=requireMethod(),s=requireUtil$3(),p=requireRpc();function g(d,l){e.call(this,d,l),this.methods={},this._methodsArray=null}g.fromJSON=function(l,a){var o=new g(l,a.options);if(a.methods)for(var h=Object.keys(a.methods),v=0;v<h.length;++v)o.add(t.fromJSON(h[v],a.methods[h[v]]));return a.nested&&o.addJSON(a.nested),a.edition&&(o._edition=a.edition),o.comment=a.comment,o._defaultEdition="proto3",o},g.prototype.toJSON=function(l){var a=e.prototype.toJSON.call(this,l),o=l?!!l.keepComments:!1;return s.toObject(["edition",this._editionToJSON(),"options",a&&a.options||void 0,"methods",e.arrayToJSON(this.methodsArray,l)||{},"nested",a&&a.nested||void 0,"comment",o?this.comment:void 0])},Object.defineProperty(g.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods))}});function m(d){return d._methodsArray=null,d}return g.prototype.get=function(l){return this.methods[l]||e.prototype.get.call(this,l)},g.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;e.prototype.resolve.call(this);for(var l=this.methodsArray,a=0;a<l.length;++a)l[a].resolve();return this},g.prototype._resolveFeaturesRecursive=function(l){return this._needsRecursiveFeatureResolution?(l=this._edition||l,e.prototype._resolveFeaturesRecursive.call(this,l),this.methodsArray.forEach(a=>{a._resolveFeaturesRecursive(l)}),this):this},g.prototype.add=function(l){if(this.get(l.name))throw Error("duplicate name '"+l.name+"' in "+this);return l instanceof t?(this.methods[l.name]=l,l.parent=this,m(this)):e.prototype.add.call(this,l)},g.prototype.remove=function(l){if(l instanceof t){if(this.methods[l.name]!==l)throw Error(l+" is not a member of "+this);return delete this.methods[l.name],l.parent=null,m(this)}return e.prototype.remove.call(this,l)},g.prototype.create=function(l,a,o){for(var h=new p.Service(l,a,o),v=0,_;v<this.methodsArray.length;++v){var y=s.lcFirst((_=this._methodsArray[v]).resolve().name).replace(/[^$\w_]/g,"");h[y]=s.codegen(["r","c"],s.isReserved(y)?y+"_":y)("return this.rpcCall(m,q,s,r,c)")({m:_,q:_.resolvedRequestType.ctor,s:_.resolvedResponseType.ctor})}return h},service}var message,hasRequiredMessage;function requireMessage(){if(hasRequiredMessage)return message;hasRequiredMessage=1,message=t;var e=requireMinimal$1();function t(s){if(s)for(var p=Object.keys(s),g=0;g<p.length;++g)this[p[g]]=s[p[g]]}return t.create=function(p){return this.$type.create(p)},t.encode=function(p,g){return this.$type.encode(p,g)},t.encodeDelimited=function(p,g){return this.$type.encodeDelimited(p,g)},t.decode=function(p){return this.$type.decode(p)},t.decodeDelimited=function(p){return this.$type.decodeDelimited(p)},t.verify=function(p){return this.$type.verify(p)},t.fromObject=function(p){return this.$type.fromObject(p)},t.toObject=function(p,g){return this.$type.toObject(p,g)},t.prototype.toJSON=function(){return this.$type.toObject(this,e.toJSONOptions)},message}var decoder_1,hasRequiredDecoder;function requireDecoder(){if(hasRequiredDecoder)return decoder_1;hasRequiredDecoder=1,decoder_1=g;var e=require_enum$1(),t=requireTypes$2(),s=requireUtil$3();function p(m){return"missing required '"+m.name+"'"}function g(m){for(var d=s.codegen(["r","l","e"],m.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(m.fieldsArray.filter(function(_){return _.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()")("if(t===e)")("break")("switch(t>>>3){"),l=0;l<m.fieldsArray.length;++l){var a=m._fieldsArray[l].resolve(),o=a.resolvedType instanceof e?"int32":a.type,h="m"+s.safeProp(a.name);d("case %i: {",a.id),a.map?(d("if(%s===util.emptyObject)",h)("%s={}",h)("var c2 = r.uint32()+r.pos"),t.defaults[a.keyType]!==void 0?d("k=%j",t.defaults[a.keyType]):d("k=null"),t.defaults[o]!==void 0?d("value=%j",t.defaults[o]):d("value=null"),d("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),t.basic[o]===void 0?d("value=types[%i].decode(r,r.uint32())",l):d("value=r.%s()",o),d("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),t.long[a.keyType]!==void 0?d('%s[typeof k==="object"?util.longToHash(k):k]=value',h):d("%s[k]=value",h)):a.repeated?(d("if(!(%s&&%s.length))",h,h)("%s=[]",h),t.packed[o]!==void 0&&d("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",h,o)("}else"),t.basic[o]===void 0?d(a.delimited?"%s.push(types[%i].decode(r,undefined,((t&~7)|4)))":"%s.push(types[%i].decode(r,r.uint32()))",h,l):d("%s.push(r.%s())",h,o)):t.basic[o]===void 0?d(a.delimited?"%s=types[%i].decode(r,undefined,((t&~7)|4))":"%s=types[%i].decode(r,r.uint32())",h,l):d("%s=r.%s()",h,o),d("break")("}")}for(d("default:")("r.skipType(t&7)")("break")("}")("}"),l=0;l<m._fieldsArray.length;++l){var v=m._fieldsArray[l];v.required&&d("if(!m.hasOwnProperty(%j))",v.name)("throw util.ProtocolError(%j,{instance:m})",p(v))}return d("return m")}return decoder_1}var verifier_1,hasRequiredVerifier;function requireVerifier(){if(hasRequiredVerifier)return verifier_1;hasRequiredVerifier=1,verifier_1=m;var e=require_enum$1(),t=requireUtil$3();function s(d,l){return d.name+": "+l+(d.repeated&&l!=="array"?"[]":d.map&&l!=="object"?"{k:"+d.keyType+"}":"")+" expected"}function p(d,l,a,o){if(l.resolvedType)if(l.resolvedType instanceof e){d("switch(%s){",o)("default:")("return%j",s(l,"enum value"));for(var h=Object.keys(l.resolvedType.values),v=0;v<h.length;++v)d("case %i:",l.resolvedType.values[h[v]]);d("break")("}")}else d("{")("var e=types[%i].verify(%s);",a,o)("if(e)")("return%j+e",l.name+".")("}");else switch(l.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":d("if(!util.isInteger(%s))",o)("return%j",s(l,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":d("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",o,o,o,o)("return%j",s(l,"integer|Long"));break;case"float":case"double":d('if(typeof %s!=="number")',o)("return%j",s(l,"number"));break;case"bool":d('if(typeof %s!=="boolean")',o)("return%j",s(l,"boolean"));break;case"string":d("if(!util.isString(%s))",o)("return%j",s(l,"string"));break;case"bytes":d('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',o,o,o)("return%j",s(l,"buffer"));break}return d}function g(d,l,a){switch(l.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":d("if(!util.key32Re.test(%s))",a)("return%j",s(l,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":d("if(!util.key64Re.test(%s))",a)("return%j",s(l,"integer|Long key"));break;case"bool":d("if(!util.key2Re.test(%s))",a)("return%j",s(l,"boolean key"));break}return d}function m(d){var l=t.codegen(["m"],d.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),a=d.oneofsArray,o={};a.length&&l("var p={}");for(var h=0;h<d.fieldsArray.length;++h){var v=d._fieldsArray[h].resolve(),_="m"+t.safeProp(v.name);if(v.optional&&l("if(%s!=null&&m.hasOwnProperty(%j)){",_,v.name),v.map)l("if(!util.isObject(%s))",_)("return%j",s(v,"object"))("var k=Object.keys(%s)",_)("for(var i=0;i<k.length;++i){"),g(l,v,"k[i]"),p(l,v,h,_+"[k[i]]")("}");else if(v.repeated)l("if(!Array.isArray(%s))",_)("return%j",s(v,"array"))("for(var i=0;i<%s.length;++i){",_),p(l,v,h,_+"[i]")("}");else{if(v.partOf){var y=t.safeProp(v.partOf.name);o[v.partOf.name]===1&&l("if(p%s===1)",y)("return%j",v.partOf.name+": multiple values"),o[v.partOf.name]=1,l("p%s=1",y)}p(l,v,h,_)}v.optional&&l("}")}return l("return null")}return verifier_1}var converter={},hasRequiredConverter;function requireConverter(){return hasRequiredConverter||(hasRequiredConverter=1,(function(e){var t=e,s=require_enum$1(),p=requireUtil$3();function g(d,l,a,o){var h=!1;if(l.resolvedType)if(l.resolvedType instanceof s){d("switch(d%s){",o);for(var v=l.resolvedType.values,_=Object.keys(v),y=0;y<_.length;++y)v[_[y]]===l.typeDefault&&!h&&(d("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',o,o,o),l.repeated||d("break"),h=!0),d("case%j:",_[y])("case %i:",v[_[y]])("m%s=%j",o,v[_[y]])("break");d("}")}else d('if(typeof d%s!=="object")',o)("throw TypeError(%j)",l.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",o,a,o);else{var w=!1;switch(l.type){case"double":case"float":d("m%s=Number(d%s)",o,o);break;case"uint32":case"fixed32":d("m%s=d%s>>>0",o,o);break;case"int32":case"sint32":case"sfixed32":d("m%s=d%s|0",o,o);break;case"uint64":w=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":d("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",o,o,w)('else if(typeof d%s==="string")',o)("m%s=parseInt(d%s,10)",o,o)('else if(typeof d%s==="number")',o)("m%s=d%s",o,o)('else if(typeof d%s==="object")',o)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",o,o,o,w?"true":"");break;case"bytes":d('if(typeof d%s==="string")',o)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",o,o,o)("else if(d%s.length >= 0)",o)("m%s=d%s",o,o);break;case"string":d("m%s=String(d%s)",o,o);break;case"bool":d("m%s=Boolean(d%s)",o,o);break}}return d}t.fromObject=function(l){var a=l.fieldsArray,o=p.codegen(["d"],l.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!a.length)return o("return new this.ctor");o("var m=new this.ctor");for(var h=0;h<a.length;++h){var v=a[h].resolve(),_=p.safeProp(v.name);v.map?(o("if(d%s){",_)('if(typeof d%s!=="object")',_)("throw TypeError(%j)",v.fullName+": object expected")("m%s={}",_)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",_),g(o,v,h,_+"[ks[i]]")("}")("}")):v.repeated?(o("if(d%s){",_)("if(!Array.isArray(d%s))",_)("throw TypeError(%j)",v.fullName+": array expected")("m%s=[]",_)("for(var i=0;i<d%s.length;++i){",_),g(o,v,h,_+"[i]")("}")("}")):(v.resolvedType instanceof s||o("if(d%s!=null){",_),g(o,v,h,_),v.resolvedType instanceof s||o("}"))}return o("return m")};function m(d,l,a,o){if(l.resolvedType)l.resolvedType instanceof s?d("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",o,a,o,o,a,o,o):d("d%s=types[%i].toObject(m%s,o)",o,a,o);else{var h=!1;switch(l.type){case"double":case"float":d("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",o,o,o,o);break;case"uint64":h=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":d('if(typeof m%s==="number")',o)("d%s=o.longs===String?String(m%s):m%s",o,o,o)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",o,o,o,o,h?"true":"",o);break;case"bytes":d("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",o,o,o,o,o);break;default:d("d%s=m%s",o,o);break}}return d}t.toObject=function(l){var a=l.fieldsArray.slice().sort(p.compareFieldsById);if(!a.length)return p.codegen()("return {}");for(var o=p.codegen(["m","o"],l.name+"$toObject")("if(!o)")("o={}")("var d={}"),h=[],v=[],_=[],y=0;y<a.length;++y)a[y].partOf||(a[y].resolve().repeated?h:a[y].map?v:_).push(a[y]);if(h.length){for(o("if(o.arrays||o.defaults){"),y=0;y<h.length;++y)o("d%s=[]",p.safeProp(h[y].name));o("}")}if(v.length){for(o("if(o.objects||o.defaults){"),y=0;y<v.length;++y)o("d%s={}",p.safeProp(v[y].name));o("}")}if(_.length){for(o("if(o.defaults){"),y=0;y<_.length;++y){var w=_[y],T=p.safeProp(w.name);if(w.resolvedType instanceof s)o("d%s=o.enums===String?%j:%j",T,w.resolvedType.valuesById[w.typeDefault],w.typeDefault);else if(w.long)o("if(util.Long){")("var n=new util.Long(%i,%i,%j)",w.typeDefault.low,w.typeDefault.high,w.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",T)("}else")("d%s=o.longs===String?%j:%i",T,w.typeDefault.toString(),w.typeDefault.toNumber());else if(w.bytes){var I="["+Array.prototype.slice.call(w.typeDefault).join(",")+"]";o("if(o.bytes===String)d%s=%j",T,String.fromCharCode.apply(String,w.typeDefault))("else{")("d%s=%s",T,I)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",T,T)("}")}else o("d%s=%j",T,w.typeDefault)}o("}")}var O=!1;for(y=0;y<a.length;++y){var w=a[y],E=l._fieldsArray.indexOf(w),T=p.safeProp(w.name);w.map?(O||(O=!0,o("var ks2")),o("if(m%s&&(ks2=Object.keys(m%s)).length){",T,T)("d%s={}",T)("for(var j=0;j<ks2.length;++j){"),m(o,w,E,T+"[ks2[j]]")("}")):w.repeated?(o("if(m%s&&m%s.length){",T,T)("d%s=[]",T)("for(var j=0;j<m%s.length;++j){",T),m(o,w,E,T+"[j]")("}")):(o("if(m%s!=null&&m.hasOwnProperty(%j)){",T,w.name),m(o,w,E,T),w.partOf&&o("if(o.oneofs)")("d%s=%j",p.safeProp(w.partOf.name),w.name)),o("}")}return o("return d")}})(converter)),converter}var wrappers$1={},hasRequiredWrappers$1;function requireWrappers$1(){return hasRequiredWrappers$1||(hasRequiredWrappers$1=1,(function(e){var t=e,s=requireMessage();t[".google.protobuf.Any"]={fromObject:function(p){if(p&&p["@type"]){var g=p["@type"].substring(p["@type"].lastIndexOf("/")+1),m=this.lookup(g);if(m){var d=p["@type"].charAt(0)==="."?p["@type"].slice(1):p["@type"];return d.indexOf("/")===-1&&(d="/"+d),this.create({type_url:d,value:m.encode(m.fromObject(p)).finish()})}}return this.fromObject(p)},toObject:function(p,g){var m="type.googleapis.com/",d="",l="";if(g&&g.json&&p.type_url&&p.value){l=p.type_url.substring(p.type_url.lastIndexOf("/")+1),d=p.type_url.substring(0,p.type_url.lastIndexOf("/")+1);var a=this.lookup(l);a&&(p=a.decode(p.value))}if(!(p instanceof this.ctor)&&p instanceof s){var o=p.$type.toObject(p,g),h=p.$type.fullName[0]==="."?p.$type.fullName.slice(1):p.$type.fullName;return d===""&&(d=m),l=d+h,o["@type"]=l,o}return this.toObject(p,g)}}})(wrappers$1)),wrappers$1}var type,hasRequiredType;function requireType(){if(hasRequiredType)return type;hasRequiredType=1,type=T;var e=requireNamespace();((T.prototype=Object.create(e.prototype)).constructor=T).className="Type";var t=require_enum$1(),s=requireOneof(),p=requireField(),g=requireMapfield(),m=requireService(),d=requireMessage(),l=requireReader(),a=requireWriter(),o=requireUtil$3(),h=requireEncoder(),v=requireDecoder(),_=requireVerifier(),y=requireConverter(),w=requireWrappers$1();function T(O,E){e.call(this,O,E),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(T.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var O=Object.keys(this.fields),E=0;E<O.length;++E){var C=this.fields[O[E]],x=C.id;if(this._fieldsById[x])throw Error("duplicate id "+x+" in "+this);this._fieldsById[x]=C}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=o.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=o.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=T.generateConstructor(this)())},set:function(O){var E=O.prototype;E instanceof d||((O.prototype=new d).constructor=O,o.merge(O.prototype,E)),O.$type=O.prototype.$type=this,o.merge(O,d,!0),this._ctor=O;for(var C=0;C<this.fieldsArray.length;++C)this._fieldsArray[C].resolve();var x={};for(C=0;C<this.oneofsArray.length;++C)x[this._oneofsArray[C].resolve().name]={get:o.oneOfGetter(this._oneofsArray[C].oneof),set:o.oneOfSetter(this._oneofsArray[C].oneof)};C&&Object.defineProperties(O.prototype,x)}}}),T.generateConstructor=function(E){for(var C=o.codegen(["p"],E.name),x=0,j;x<E.fieldsArray.length;++x)(j=E._fieldsArray[x]).map?C("this%s={}",o.safeProp(j.name)):j.repeated&&C("this%s=[]",o.safeProp(j.name));return C("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function I(O){return O._fieldsById=O._fieldsArray=O._oneofsArray=null,delete O.encode,delete O.decode,delete O.verify,O}return T.fromJSON=function(E,C){var x=new T(E,C.options);x.extensions=C.extensions,x.reserved=C.reserved;for(var j=Object.keys(C.fields),D=0;D<j.length;++D)x.add((typeof C.fields[j[D]].keyType<"u"?g.fromJSON:p.fromJSON)(j[D],C.fields[j[D]]));if(C.oneofs)for(j=Object.keys(C.oneofs),D=0;D<j.length;++D)x.add(s.fromJSON(j[D],C.oneofs[j[D]]));if(C.nested)for(j=Object.keys(C.nested),D=0;D<j.length;++D){var k=C.nested[j[D]];x.add((k.id!==void 0?p.fromJSON:k.fields!==void 0?T.fromJSON:k.values!==void 0?t.fromJSON:k.methods!==void 0?m.fromJSON:e.fromJSON)(j[D],k))}return C.extensions&&C.extensions.length&&(x.extensions=C.extensions),C.reserved&&C.reserved.length&&(x.reserved=C.reserved),C.group&&(x.group=!0),C.comment&&(x.comment=C.comment),C.edition&&(x._edition=C.edition),x._defaultEdition="proto3",x},T.prototype.toJSON=function(E){var C=e.prototype.toJSON.call(this,E),x=E?!!E.keepComments:!1;return o.toObject(["edition",this._editionToJSON(),"options",C&&C.options||void 0,"oneofs",e.arrayToJSON(this.oneofsArray,E),"fields",e.arrayToJSON(this.fieldsArray.filter(function(j){return!j.declaringField}),E)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",C&&C.nested||void 0,"comment",x?this.comment:void 0])},T.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;e.prototype.resolveAll.call(this);var E=this.oneofsArray;for(x=0;x<E.length;)E[x++].resolve();for(var C=this.fieldsArray,x=0;x<C.length;)C[x++].resolve();return this},T.prototype._resolveFeaturesRecursive=function(E){return this._needsRecursiveFeatureResolution?(E=this._edition||E,e.prototype._resolveFeaturesRecursive.call(this,E),this.oneofsArray.forEach(C=>{C._resolveFeatures(E)}),this.fieldsArray.forEach(C=>{C._resolveFeatures(E)}),this):this},T.prototype.get=function(E){return this.fields[E]||this.oneofs&&this.oneofs[E]||this.nested&&this.nested[E]||null},T.prototype.add=function(E){if(this.get(E.name))throw Error("duplicate name '"+E.name+"' in "+this);if(E instanceof p&&E.extend===void 0){if(this._fieldsById?this._fieldsById[E.id]:this.fieldsById[E.id])throw Error("duplicate id "+E.id+" in "+this);if(this.isReservedId(E.id))throw Error("id "+E.id+" is reserved in "+this);if(this.isReservedName(E.name))throw Error("name '"+E.name+"' is reserved in "+this);return E.parent&&E.parent.remove(E),this.fields[E.name]=E,E.message=this,E.onAdd(this),I(this)}return E instanceof s?(this.oneofs||(this.oneofs={}),this.oneofs[E.name]=E,E.onAdd(this),I(this)):e.prototype.add.call(this,E)},T.prototype.remove=function(E){if(E instanceof p&&E.extend===void 0){if(!this.fields||this.fields[E.name]!==E)throw Error(E+" is not a member of "+this);return delete this.fields[E.name],E.parent=null,E.onRemove(this),I(this)}if(E instanceof s){if(!this.oneofs||this.oneofs[E.name]!==E)throw Error(E+" is not a member of "+this);return delete this.oneofs[E.name],E.parent=null,E.onRemove(this),I(this)}return e.prototype.remove.call(this,E)},T.prototype.isReservedId=function(E){return e.isReservedId(this.reserved,E)},T.prototype.isReservedName=function(E){return e.isReservedName(this.reserved,E)},T.prototype.create=function(E){return new this.ctor(E)},T.prototype.setup=function(){for(var E=this.fullName,C=[],x=0;x<this.fieldsArray.length;++x)C.push(this._fieldsArray[x].resolve().resolvedType);this.encode=h(this)({Writer:a,types:C,util:o}),this.decode=v(this)({Reader:l,types:C,util:o}),this.verify=_(this)({types:C,util:o}),this.fromObject=y.fromObject(this)({types:C,util:o}),this.toObject=y.toObject(this)({types:C,util:o});var j=w[E];if(j){var D=Object.create(this);D.fromObject=this.fromObject,this.fromObject=j.fromObject.bind(D),D.toObject=this.toObject,this.toObject=j.toObject.bind(D)}return this},T.prototype.encode=function(E,C){return this.setup().encode(E,C)},T.prototype.encodeDelimited=function(E,C){return this.encode(E,C&&C.len?C.fork():C).ldelim()},T.prototype.decode=function(E,C){return this.setup().decode(E,C)},T.prototype.decodeDelimited=function(E){return E instanceof l||(E=l.create(E)),this.decode(E,E.uint32())},T.prototype.verify=function(E){return this.setup().verify(E)},T.prototype.fromObject=function(E){return this.setup().fromObject(E)},T.prototype.toObject=function(E,C){return this.setup().toObject(E,C)},T.d=function(E){return function(x){o.decorateType(x,E)}},type}var root,hasRequiredRoot;function requireRoot(){if(hasRequiredRoot)return root;hasRequiredRoot=1,root=a;var e=requireNamespace();((a.prototype=Object.create(e.prototype)).constructor=a).className="Root";var t=requireField(),s=require_enum$1(),p=requireOneof(),g=requireUtil$3(),m,d,l;function a(_){e.call(this,"",_),this.deferred=[],this.files=[],this._edition="proto2",this._fullyQualifiedObjects={}}a.fromJSON=function(y,w){return w||(w=new a),y.options&&w.setOptions(y.options),w.addJSON(y.nested).resolveAll()},a.prototype.resolvePath=g.path.resolve,a.prototype.fetch=g.fetch;function o(){}a.prototype.load=function _(y,w,T){typeof w=="function"&&(T=w,w=void 0);var I=this;if(!T)return g.asPromise(_,I,y,w);var O=T===o;function E(G,$){if(T){if(O)throw G;$&&$.resolveAll();var W=T;T=null,W(G,$)}}function C(G){var $=G.lastIndexOf("google/protobuf/");if($>-1){var W=G.substring($);if(W in l)return W}return null}function x(G,$){try{if(g.isString($)&&$.charAt(0)==="{"&&($=JSON.parse($)),!g.isString($))I.setOptions($.options).addJSON($.nested);else{d.filename=G;var W=d($,I,w),K,z=0;if(W.imports)for(;z<W.imports.length;++z)(K=C(W.imports[z])||I.resolvePath(G,W.imports[z]))&&j(K);if(W.weakImports)for(z=0;z<W.weakImports.length;++z)(K=C(W.weakImports[z])||I.resolvePath(G,W.weakImports[z]))&&j(K,!0)}}catch(Q){E(Q)}!O&&!D&&E(null,I)}function j(G,$){if(G=C(G)||G,!(I.files.indexOf(G)>-1)){if(I.files.push(G),G in l){O?x(G,l[G]):(++D,setTimeout(function(){--D,x(G,l[G])}));return}if(O){var W;try{W=g.fs.readFileSync(G).toString("utf8")}catch(K){$||E(K);return}x(G,W)}else++D,I.fetch(G,function(K,z){if(--D,!!T){if(K){$?D||E(null,I):E(K);return}x(G,z)}})}}var D=0;g.isString(y)&&(y=[y]);for(var k=0,q;k<y.length;++k)(q=I.resolvePath("",y[k]))&&j(q);return O?(I.resolveAll(),I):(D||E(null,I),I)},a.prototype.loadSync=function(y,w){if(!g.isNode)throw Error("not supported");return this.load(y,w,o)},a.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(y){return"'extend "+y.extend+"' in "+y.parent.fullName}).join(", "));return e.prototype.resolveAll.call(this)};var h=/^[A-Z]/;function v(_,y){var w=y.parent.lookup(y.extend);if(w){var T=new t(y.fullName,y.id,y.type,y.rule,void 0,y.options);return w.get(T.name)||(T.declaringField=y,y.extensionField=T,w.add(T)),!0}return!1}return a.prototype._handleAdd=function(y){if(y instanceof t)y.extend!==void 0&&!y.extensionField&&(v(this,y)||this.deferred.push(y));else if(y instanceof s)h.test(y.name)&&(y.parent[y.name]=y.values);else if(!(y instanceof p)){if(y instanceof m)for(var w=0;w<this.deferred.length;)v(this,this.deferred[w])?this.deferred.splice(w,1):++w;for(var T=0;T<y.nestedArray.length;++T)this._handleAdd(y._nestedArray[T]);h.test(y.name)&&(y.parent[y.name]=y)}(y instanceof m||y instanceof s||y instanceof t)&&(this._fullyQualifiedObjects[y.fullName]=y)},a.prototype._handleRemove=function(y){if(y instanceof t){if(y.extend!==void 0)if(y.extensionField)y.extensionField.parent.remove(y.extensionField),y.extensionField=null;else{var w=this.deferred.indexOf(y);w>-1&&this.deferred.splice(w,1)}}else if(y instanceof s)h.test(y.name)&&delete y.parent[y.name];else if(y instanceof e){for(var T=0;T<y.nestedArray.length;++T)this._handleRemove(y._nestedArray[T]);h.test(y.name)&&delete y.parent[y.name]}delete this._fullyQualifiedObjects[y.fullName]},a._configure=function(_,y,w){m=_,d=y,l=w},root}var hasRequiredUtil$3;function requireUtil$3(){if(hasRequiredUtil$3)return util$2.exports;hasRequiredUtil$3=1;var e=util$2.exports=requireMinimal$1(),t=requireRoots(),s,p;e.codegen=requireCodegen(),e.fetch=requireFetch(),e.path=requirePath$1(),e.fs=e.inquire("fs"),e.toArray=function(o){if(o){for(var h=Object.keys(o),v=new Array(h.length),_=0;_<h.length;)v[_]=o[h[_++]];return v}return[]},e.toObject=function(o){for(var h={},v=0;v<o.length;){var _=o[v++],y=o[v++];y!==void 0&&(h[_]=y)}return h};var g=/\\/g,m=/"/g;e.isReserved=function(o){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(o)},e.safeProp=function(o){return!/^[$\w_]+$/.test(o)||e.isReserved(o)?'["'+o.replace(g,"\\\\").replace(m,'\\"')+'"]':"."+o},e.ucFirst=function(o){return o.charAt(0).toUpperCase()+o.substring(1)};var d=/_([a-z])/g;e.camelCase=function(o){return o.substring(0,1)+o.substring(1).replace(d,function(h,v){return v.toUpperCase()})},e.compareFieldsById=function(o,h){return o.id-h.id},e.decorateType=function(o,h){if(o.$type)return h&&o.$type.name!==h&&(e.decorateRoot.remove(o.$type),o.$type.name=h,e.decorateRoot.add(o.$type)),o.$type;s||(s=requireType());var v=new s(h||o.name);return e.decorateRoot.add(v),v.ctor=o,Object.defineProperty(o,"$type",{value:v,enumerable:!1}),Object.defineProperty(o.prototype,"$type",{value:v,enumerable:!1}),v};var l=0;return e.decorateEnum=function(o){if(o.$type)return o.$type;p||(p=require_enum$1());var h=new p("Enum"+l++,o);return e.decorateRoot.add(h),Object.defineProperty(o,"$type",{value:h,enumerable:!1}),h},e.setProperty=function(o,h,v,_){function y(w,T,I){var O=T.shift();if(O==="__proto__"||O==="prototype")return w;if(T.length>0)w[O]=y(w[O]||{},T,I);else{var E=w[O];if(E&&_)return w;E&&(I=[].concat(E).concat(I)),w[O]=I}return w}if(typeof o!="object")throw TypeError("dst must be an object");if(!h)throw TypeError("path must be specified");return h=h.split("."),y(o,h,v)},Object.defineProperty(e,"decorateRoot",{get:function(){return t.decorated||(t.decorated=new(requireRoot()))}}),util$2.exports}var hasRequiredTypes$2;function requireTypes$2(){return hasRequiredTypes$2||(hasRequiredTypes$2=1,(function(e){var t=e,s=requireUtil$3(),p=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function g(m,d){var l=0,a={};for(d|=0;l<m.length;)a[p[l+d]]=m[l++];return a}t.basic=g([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),t.defaults=g([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",s.emptyArray,null]),t.long=g([0,0,0,1,1],7),t.mapKey=g([0,0,0,5,5,0,0,0,1,1,0,2],2),t.packed=g([1,5,0,0,0,5,5,0,0,0,1,1,0])})(types$2)),types$2}var field,hasRequiredField;function requireField(){if(hasRequiredField)return field;hasRequiredField=1,field=d;var e=requireObject();((d.prototype=Object.create(e.prototype)).constructor=d).className="Field";var t=require_enum$1(),s=requireTypes$2(),p=requireUtil$3(),g,m=/^required|optional|repeated$/;d.fromJSON=function(a,o){var h=new d(a,o.id,o.type,o.rule,o.extend,o.options,o.comment);return o.edition&&(h._edition=o.edition),h._defaultEdition="proto3",h};function d(l,a,o,h,v,_,y){if(p.isObject(h)?(y=v,_=h,h=v=void 0):p.isObject(v)&&(y=_,_=v,v=void 0),e.call(this,l,_),!p.isInteger(a)||a<0)throw TypeError("id must be a non-negative integer");if(!p.isString(o))throw TypeError("type must be a string");if(h!==void 0&&!m.test(h=h.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(v!==void 0&&!p.isString(v))throw TypeError("extend must be a string");h==="proto3_optional"&&(h="optional"),this.rule=h&&h!=="optional"?h:void 0,this.type=o,this.id=a,this.extend=v||void 0,this.repeated=h==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=p.Long?s.long[o]!==void 0:!1,this.bytes=o==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.comment=y}return Object.defineProperty(d.prototype,"required",{get:function(){return this._features.field_presence==="LEGACY_REQUIRED"}}),Object.defineProperty(d.prototype,"optional",{get:function(){return!this.required}}),Object.defineProperty(d.prototype,"delimited",{get:function(){return this.resolvedType instanceof g&&this._features.message_encoding==="DELIMITED"}}),Object.defineProperty(d.prototype,"packed",{get:function(){return this._features.repeated_field_encoding==="PACKED"}}),Object.defineProperty(d.prototype,"hasPresence",{get:function(){return this.repeated||this.map?!1:this.partOf||this.declaringField||this.extensionField||this._features.field_presence!=="IMPLICIT"}}),d.prototype.setOption=function(a,o,h){return e.prototype.setOption.call(this,a,o,h)},d.prototype.toJSON=function(a){var o=a?!!a.keepComments:!1;return p.toObject(["edition",this._editionToJSON(),"rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",o?this.comment:void 0])},d.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=s.defaults[this.type])===void 0?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof g?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof t&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof t)&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=p.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var a;p.base64.test(this.typeDefault)?p.base64.decode(this.typeDefault,a=p.newBuffer(p.base64.length(this.typeDefault)),0):p.utf8.write(this.typeDefault,a=p.newBuffer(p.utf8.length(this.typeDefault)),0),this.typeDefault=a}return this.map?this.defaultValue=p.emptyObject:this.repeated?this.defaultValue=p.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof g&&(this.parent.ctor.prototype[this.name]=this.defaultValue),e.prototype.resolve.call(this)},d.prototype._inferLegacyProtoFeatures=function(a){if(a!=="proto2"&&a!=="proto3")return{};var o={};if(this.rule==="required"&&(o.field_presence="LEGACY_REQUIRED"),this.parent&&s.defaults[this.type]===void 0){var h=this.parent.get(this.type.split(".").pop());h&&h instanceof g&&h.group&&(o.message_encoding="DELIMITED")}return this.getOption("packed")===!0?o.repeated_field_encoding="PACKED":this.getOption("packed")===!1&&(o.repeated_field_encoding="EXPANDED"),o},d.prototype._resolveFeatures=function(a){return e.prototype._resolveFeatures.call(this,this._edition||a)},d.d=function(a,o,h,v){return typeof o=="function"?o=p.decorateType(o).name:o&&typeof o=="object"&&(o=p.decorateEnum(o).name),function(y,w){p.decorateType(y.constructor).add(new d(w,a,o,h,{default:v}))}},d._configure=function(a){g=a},field}var oneof,hasRequiredOneof;function requireOneof(){if(hasRequiredOneof)return oneof;hasRequiredOneof=1,oneof=p;var e=requireObject();((p.prototype=Object.create(e.prototype)).constructor=p).className="OneOf";var t=requireField(),s=requireUtil$3();function p(m,d,l,a){if(Array.isArray(d)||(l=d,d=void 0),e.call(this,m,l),!(d===void 0||Array.isArray(d)))throw TypeError("fieldNames must be an Array");this.oneof=d||[],this.fieldsArray=[],this.comment=a}p.fromJSON=function(d,l){return new p(d,l.oneof,l.options,l.comment)},p.prototype.toJSON=function(d){var l=d?!!d.keepComments:!1;return s.toObject(["options",this.options,"oneof",this.oneof,"comment",l?this.comment:void 0])};function g(m){if(m.parent)for(var d=0;d<m.fieldsArray.length;++d)m.fieldsArray[d].parent||m.parent.add(m.fieldsArray[d])}return p.prototype.add=function(d){if(!(d instanceof t))throw TypeError("field must be a Field");return d.parent&&d.parent!==this.parent&&d.parent.remove(d),this.oneof.push(d.name),this.fieldsArray.push(d),d.partOf=this,g(this),this},p.prototype.remove=function(d){if(!(d instanceof t))throw TypeError("field must be a Field");var l=this.fieldsArray.indexOf(d);if(l<0)throw Error(d+" is not a member of "+this);return this.fieldsArray.splice(l,1),l=this.oneof.indexOf(d.name),l>-1&&this.oneof.splice(l,1),d.partOf=null,this},p.prototype.onAdd=function(d){e.prototype.onAdd.call(this,d);for(var l=this,a=0;a<this.oneof.length;++a){var o=d.get(this.oneof[a]);o&&!o.partOf&&(o.partOf=l,l.fieldsArray.push(o))}g(this)},p.prototype.onRemove=function(d){for(var l=0,a;l<this.fieldsArray.length;++l)(a=this.fieldsArray[l]).parent&&a.parent.remove(a);e.prototype.onRemove.call(this,d)},Object.defineProperty(p.prototype,"isProto3Optional",{get:function(){if(this.fieldsArray==null||this.fieldsArray.length!==1)return!1;var m=this.fieldsArray[0];return m.options!=null&&m.options.proto3_optional===!0}}),p.d=function(){for(var d=new Array(arguments.length),l=0;l<arguments.length;)d[l]=arguments[l++];return function(o,h){s.decorateType(o.constructor).add(new p(h,d)),Object.defineProperty(o,h,{get:s.oneOfGetter(d),set:s.oneOfSetter(d)})}},oneof}var object,hasRequiredObject;function requireObject(){if(hasRequiredObject)return object;hasRequiredObject=1,object=d,d.className="ReflectionObject";const e=requireOneof();var t=requireUtil$3(),s,p={enum_type:"OPEN",field_presence:"EXPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"},g={enum_type:"CLOSED",field_presence:"EXPLICIT",json_format:"LEGACY_BEST_EFFORT",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"EXPANDED",utf8_validation:"NONE"},m={enum_type:"OPEN",field_presence:"IMPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"};function d(l,a){if(!t.isString(l))throw TypeError("name must be a string");if(a&&!t.isObject(a))throw TypeError("options must be an object");this.options=a,this.parsedOptions=null,this.name=l,this._edition=null,this._defaultEdition="proto2",this._features={},this._featuresResolved=!1,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}return Object.defineProperties(d.prototype,{root:{get:function(){for(var l=this;l.parent!==null;)l=l.parent;return l}},fullName:{get:function(){for(var l=[this.name],a=this.parent;a;)l.unshift(a.name),a=a.parent;return l.join(".")}}}),d.prototype.toJSON=function(){throw Error()},d.prototype.onAdd=function(a){this.parent&&this.parent!==a&&this.parent.remove(this),this.parent=a,this.resolved=!1;var o=a.root;o instanceof s&&o._handleAdd(this)},d.prototype.onRemove=function(a){var o=a.root;o instanceof s&&o._handleRemove(this),this.parent=null,this.resolved=!1},d.prototype.resolve=function(){return this.resolved?this:(this.root instanceof s&&(this.resolved=!0),this)},d.prototype._resolveFeaturesRecursive=function(a){return this._resolveFeatures(this._edition||a)},d.prototype._resolveFeatures=function(a){if(!this._featuresResolved){var o={};if(!a)throw new Error("Unknown edition for "+this.fullName);var h=Object.assign(this.options?Object.assign({},this.options.features):{},this._inferLegacyProtoFeatures(a));if(this._edition){if(a==="proto2")o=Object.assign({},g);else if(a==="proto3")o=Object.assign({},m);else if(a==="2023")o=Object.assign({},p);else throw new Error("Unknown edition: "+a);this._features=Object.assign(o,h||{}),this._featuresResolved=!0;return}if(this.partOf instanceof e){var v=Object.assign({},this.partOf._features);this._features=Object.assign(v,h||{})}else if(!this.declaringField)if(this.parent){var _=Object.assign({},this.parent._features);this._features=Object.assign(_,h||{})}else throw new Error("Unable to find a parent for "+this.fullName);this.extensionField&&(this.extensionField._features=this._features),this._featuresResolved=!0}},d.prototype._inferLegacyProtoFeatures=function(){return{}},d.prototype.getOption=function(a){if(this.options)return this.options[a]},d.prototype.setOption=function(a,o,h){return this.options||(this.options={}),/^features\./.test(a)?t.setProperty(this.options,a,o,h):(!h||this.options[a]===void 0)&&(this.getOption(a)!==o&&(this.resolved=!1),this.options[a]=o),this},d.prototype.setParsedOption=function(a,o,h){this.parsedOptions||(this.parsedOptions=[]);var v=this.parsedOptions;if(h){var _=v.find(function(T){return Object.prototype.hasOwnProperty.call(T,a)});if(_){var y=_[a];t.setProperty(y,h,o)}else _={},_[a]=t.setProperty({},h,o),v.push(_)}else{var w={};w[a]=o,v.push(w)}return this},d.prototype.setOptions=function(a,o){if(a)for(var h=Object.keys(a),v=0;v<h.length;++v)this.setOption(h[v],a[h[v]],o);return this},d.prototype.toString=function(){var a=this.constructor.className,o=this.fullName;return o.length?a+" "+o:a},d.prototype._editionToJSON=function(){if(!(!this._edition||this._edition==="proto3"))return this._edition},d._configure=function(l){s=l},object}var _enum$1,hasRequired_enum$1;function require_enum$1(){if(hasRequired_enum$1)return _enum$1;hasRequired_enum$1=1,_enum$1=p;var e=requireObject();((p.prototype=Object.create(e.prototype)).constructor=p).className="Enum";var t=requireNamespace(),s=requireUtil$3();function p(g,m,d,l,a,o){if(e.call(this,g,d),m&&typeof m!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=l,this.comments=a||{},this.valuesOptions=o,this._valuesFeatures={},this.reserved=void 0,m)for(var h=Object.keys(m),v=0;v<h.length;++v)typeof m[h[v]]=="number"&&(this.valuesById[this.values[h[v]]=m[h[v]]]=h[v])}return p.prototype._resolveFeatures=function(m){return m=this._edition||m,e.prototype._resolveFeatures.call(this,m),Object.keys(this.values).forEach(d=>{var l=Object.assign({},this._features);this._valuesFeatures[d]=Object.assign(l,this.valuesOptions&&this.valuesOptions[d]&&this.valuesOptions[d].features)}),this},p.fromJSON=function(m,d){var l=new p(m,d.values,d.options,d.comment,d.comments);return l.reserved=d.reserved,d.edition&&(l._edition=d.edition),l._defaultEdition="proto3",l},p.prototype.toJSON=function(m){var d=m?!!m.keepComments:!1;return s.toObject(["edition",this._editionToJSON(),"options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",d?this.comment:void 0,"comments",d?this.comments:void 0])},p.prototype.add=function(m,d,l,a){if(!s.isString(m))throw TypeError("name must be a string");if(!s.isInteger(d))throw TypeError("id must be an integer");if(this.values[m]!==void 0)throw Error("duplicate name '"+m+"' in "+this);if(this.isReservedId(d))throw Error("id "+d+" is reserved in "+this);if(this.isReservedName(m))throw Error("name '"+m+"' is reserved in "+this);if(this.valuesById[d]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+d+" in "+this);this.values[m]=d}else this.valuesById[this.values[m]=d]=m;return a&&(this.valuesOptions===void 0&&(this.valuesOptions={}),this.valuesOptions[m]=a||null),this.comments[m]=l||null,this},p.prototype.remove=function(m){if(!s.isString(m))throw TypeError("name must be a string");var d=this.values[m];if(d==null)throw Error("name '"+m+"' does not exist in "+this);return delete this.valuesById[d],delete this.values[m],delete this.comments[m],this.valuesOptions&&delete this.valuesOptions[m],this},p.prototype.isReservedId=function(m){return t.isReservedId(this.reserved,m)},p.prototype.isReservedName=function(m){return t.isReservedName(this.reserved,m)},_enum$1}var encoder_1,hasRequiredEncoder;function requireEncoder(){if(hasRequiredEncoder)return encoder_1;hasRequiredEncoder=1,encoder_1=g;var e=require_enum$1(),t=requireTypes$2(),s=requireUtil$3();function p(m,d,l,a){return d.delimited?m("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",l,a,(d.id<<3|3)>>>0,(d.id<<3|4)>>>0):m("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",l,a,(d.id<<3|2)>>>0)}function g(m){for(var d=s.codegen(["m","w"],m.name+"$encode")("if(!w)")("w=Writer.create()"),l,a,o=m.fieldsArray.slice().sort(s.compareFieldsById),l=0;l<o.length;++l){var h=o[l].resolve(),v=m._fieldsArray.indexOf(h),_=h.resolvedType instanceof e?"int32":h.type,y=t.basic[_];a="m"+s.safeProp(h.name),h.map?(d("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",a,h.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",a)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(h.id<<3|2)>>>0,8|t.mapKey[h.keyType],h.keyType),y===void 0?d("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",v,a):d(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|y,_,a),d("}")("}")):h.repeated?(d("if(%s!=null&&%s.length){",a,a),h.packed&&t.packed[_]!==void 0?d("w.uint32(%i).fork()",(h.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",a)("w.%s(%s[i])",_,a)("w.ldelim()"):(d("for(var i=0;i<%s.length;++i)",a),y===void 0?p(d,h,v,a+"[i]"):d("w.uint32(%i).%s(%s[i])",(h.id<<3|y)>>>0,_,a)),d("}")):(h.optional&&d("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",a,h.name),y===void 0?p(d,h,v,a):d("w.uint32(%i).%s(%s)",(h.id<<3|y)>>>0,_,a))}return d("return w")}return encoder_1}var hasRequiredIndexLight;function requireIndexLight(){if(hasRequiredIndexLight)return indexLight.exports;hasRequiredIndexLight=1;var e=indexLight.exports=requireIndexMinimal();e.build="light";function t(p,g,m){return typeof g=="function"?(m=g,g=new e.Root):g||(g=new e.Root),g.load(p,m)}e.load=t;function s(p,g){return g||(g=new e.Root),g.loadSync(p)}return e.loadSync=s,e.encoder=requireEncoder(),e.decoder=requireDecoder(),e.verifier=requireVerifier(),e.converter=requireConverter(),e.ReflectionObject=requireObject(),e.Namespace=requireNamespace(),e.Root=requireRoot(),e.Enum=require_enum$1(),e.Type=requireType(),e.Field=requireField(),e.OneOf=requireOneof(),e.MapField=requireMapfield(),e.Service=requireService(),e.Method=requireMethod(),e.Message=requireMessage(),e.wrappers=requireWrappers$1(),e.types=requireTypes$2(),e.util=requireUtil$3(),e.ReflectionObject._configure(e.Root),e.Namespace._configure(e.Type,e.Service,e.Enum),e.Root._configure(e.Type),e.Field._configure(e.Type),indexLight.exports}var tokenize_1,hasRequiredTokenize;function requireTokenize(){if(hasRequiredTokenize)return tokenize_1;hasRequiredTokenize=1,tokenize_1=h;var e=/[\s{}=;:[\],'"()<>]/g,t=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,s=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,p=/^ *[*/]+ */,g=/^\s*\*?\/*/,m=/\n/g,d=/\s/,l=/\\(.?)/g,a={0:"\0",r:"\r",n:`
`,t:"	"};function o(v){return v.replace(l,function(_,y){switch(y){case"\\":case"":return y;default:return a[y]||""}})}h.unescape=o;function h(v,_){v=v.toString();var y=0,w=v.length,T=1,I=0,O={},E=[],C=null;function x(Y){return Error("illegal "+Y+" (line "+T+")")}function j(){var Y=C==="'"?s:t;Y.lastIndex=y-1;var te=Y.exec(v);if(!te)throw x("string");return y=Y.lastIndex,W(C),C=null,o(te[1])}function D(Y){return v.charAt(Y)}function k(Y,te,ae){var ue={type:v.charAt(Y++),lineEmpty:!1,leading:ae},ee;_?ee=2:ee=3;var oe=Y-ee,de;do if(--oe<0||(de=v.charAt(oe))===`
`){ue.lineEmpty=!0;break}while(de===" "||de==="	");for(var he=v.substring(Y,te).split(m),Ee=0;Ee<he.length;++Ee)he[Ee]=he[Ee].replace(_?g:p,"").trim();ue.text=he.join(`
`).trim(),O[T]=ue,I=T}function q(Y){var te=G(Y),ae=v.substring(Y,te),ue=/^\s*\/\//.test(ae);return ue}function G(Y){for(var te=Y;te<w&&D(te)!==`
`;)te++;return te}function $(){if(E.length>0)return E.shift();if(C)return j();var Y,te,ae,ue,ee,oe=y===0;do{if(y===w)return null;for(Y=!1;d.test(ae=D(y));)if(ae===`
`&&(oe=!0,++T),++y===w)return null;if(D(y)==="/"){if(++y===w)throw x("comment");if(D(y)==="/")if(_){if(ue=y,ee=!1,q(y-1)){ee=!0;do if(y=G(y),y===w||(y++,!oe))break;while(q(y))}else y=Math.min(w,G(y)+1);ee&&(k(ue,y,oe),oe=!0),T++,Y=!0}else{for(ee=D(ue=y+1)==="/";D(++y)!==`
`;)if(y===w)return null;++y,ee&&(k(ue,y-1,oe),oe=!0),++T,Y=!0}else if((ae=D(y))==="*"){ue=y+1,ee=_||D(ue)==="*";do{if(ae===`
`&&++T,++y===w)throw x("comment");te=ae,ae=D(y)}while(te!=="*"||ae!=="/");++y,ee&&(k(ue,y-2,oe),oe=!0),Y=!0}else return"/"}}while(Y);var de=y;e.lastIndex=0;var he=e.test(D(de++));if(!he)for(;de<w&&!e.test(D(de));)++de;var Ee=v.substring(y,y=de);return(Ee==='"'||Ee==="'")&&(C=Ee),Ee}function W(Y){E.push(Y)}function K(){if(!E.length){var Y=$();if(Y===null)return null;W(Y)}return E[0]}function z(Y,te){var ae=K(),ue=ae===Y;if(ue)return $(),!0;if(!te)throw x("token '"+ae+"', '"+Y+"' expected");return!1}function Q(Y){var te=null,ae;return Y===void 0?(ae=O[T-1],delete O[T-1],ae&&(_||ae.type==="*"||ae.lineEmpty)&&(te=ae.leading?ae.text:null)):(I<Y&&K(),ae=O[Y],delete O[Y],ae&&!ae.lineEmpty&&(_||ae.type==="/")&&(te=ae.leading?null:ae.text)),te}return Object.defineProperty({next:$,peek:K,push:W,skip:z,cmnt:Q},"line",{get:function(){return T}})}return tokenize_1}var parse_1,hasRequiredParse$1;function requireParse$1(){if(hasRequiredParse$1)return parse_1;hasRequiredParse$1=1,parse_1=j,j.filename=null,j.defaults={keepCase:!1};var e=requireTokenize(),t=requireRoot(),s=requireType(),p=requireField(),g=requireMapfield(),m=requireOneof(),d=require_enum$1(),l=requireService(),a=requireMethod(),o=requireObject(),h=requireTypes$2(),v=requireUtil$3(),_=/^[1-9][0-9]*$/,y=/^-?[1-9][0-9]*$/,w=/^0[x][0-9a-fA-F]+$/,T=/^-?0[x][0-9a-fA-F]+$/,I=/^0[0-7]+$/,O=/^-?0[0-7]+$/,E=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,C=/^[a-zA-Z_][a-zA-Z_0-9]*$/,x=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/;function j(D,k,q){k instanceof t||(q=k,k=new t),q||(q=j.defaults);var G=q.preferTrailingComment||!1,$=e(D,q.alternateCommentMode||!1),W=$.next,K=$.push,z=$.peek,Q=$.skip,Y=$.cmnt,te=!0,ae,ue,ee,oe="proto2",de=k,he=[],Ee={},fe=q.keepCase?function(Be){return Be}:v.camelCase;function Se(){he.forEach(Be=>{Be._edition=oe,Object.keys(Ee).forEach(Me=>{Be.getOption(Me)===void 0&&Be.setOption(Me,Ee[Me],!0)})})}function be(Be,Me,Ve){var Je=j.filename;return Ve||(j.filename=null),Error("illegal "+(Me||"token")+" '"+Be+"' ("+(Je?Je+", ":"")+"line "+$.line+")")}function Oe(){var Be=[],Me;do{if((Me=W())!=='"'&&Me!=="'")throw be(Me);Be.push(W()),Q(Me),Me=z()}while(Me==='"'||Me==="'");return Be.join("")}function ge(Be){var Me=W();switch(Me){case"'":case'"':return K(Me),Oe();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return c(Me,!0)}catch{if(x.test(Me))return Me;throw be(Me,"value")}}function J(Be,Me){var Ve,Je;do if(Me&&((Ve=z())==='"'||Ve==="'")){var Qe=Oe();if(Be.push(Qe),oe>=2023)throw be(Qe,"id")}else try{Be.push([Je=N(W()),Q("to",!0)?N(W()):Je])}catch(gt){if(Me&&x.test(Ve)&&oe>=2023)Be.push(Ve);else throw gt}while(Q(",",!0));var st={options:void 0};st.setOption=function(gt,St){this.options===void 0&&(this.options={}),this.options[gt]=St},u(st,function(St){if(St==="option")Ie(st,St),Q(";");else throw be(St)},function(){nt(st)})}function c(Be,Me){var Ve=1;switch(Be.charAt(0)==="-"&&(Ve=-1,Be=Be.substring(1)),Be){case"inf":case"INF":case"Inf":return Ve*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(_.test(Be))return Ve*parseInt(Be,10);if(w.test(Be))return Ve*parseInt(Be,16);if(I.test(Be))return Ve*parseInt(Be,8);if(E.test(Be))return Ve*parseFloat(Be);throw be(Be,"number",Me)}function N(Be,Me){switch(Be){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!Me&&Be.charAt(0)==="-")throw be(Be,"id");if(y.test(Be))return parseInt(Be,10);if(T.test(Be))return parseInt(Be,16);if(O.test(Be))return parseInt(Be,8);throw be(Be,"id")}function A(){if(ae!==void 0)throw be("package");if(ae=W(),!x.test(ae))throw be(ae,"name");de=de.define(ae),Q(";")}function V(){var Be=z(),Me;switch(Be){case"weak":Me=ee||(ee=[]),W();break;case"public":W();default:Me=ue||(ue=[]);break}Be=Oe(),Q(";"),Me.push(Be)}function ne(){if(Q("="),oe=Oe(),oe<2023)throw be(oe,"syntax");Q(";")}function ce(){if(Q("="),oe=Oe(),!["2023"].includes(oe))throw be(oe,"edition");Q(";")}function ie(Be,Me){switch(Me){case"option":return Ie(Be,Me),Q(";"),!0;case"message":return P(Be,Me),!0;case"enum":return X(Be,Me),!0;case"service":return bt(Be,Me),!0;case"extend":return Et(Be,Me),!0}return!1}function u(Be,Me,Ve){var Je=$.line;if(Be&&(typeof Be.comment!="string"&&(Be.comment=Y()),Be.filename=j.filename),Q("{",!0)){for(var Qe;(Qe=W())!=="}";)Me(Qe);Q(";",!0)}else Ve&&Ve(),Q(";"),Be&&(typeof Be.comment!="string"||G)&&(Be.comment=Y(Je)||Be.comment)}function P(Be,Me){if(!C.test(Me=W()))throw be(Me,"type name");var Ve=new s(Me);u(Ve,function(Qe){if(!ie(Ve,Qe))switch(Qe){case"map":L(Ve);break;case"required":if(oe!=="proto2")throw be(Qe);case"repeated":M(Ve,Qe);break;case"optional":if(oe==="proto3")M(Ve,"proto3_optional");else{if(oe!=="proto2")throw be(Qe);M(Ve,"optional")}break;case"oneof":U(Ve,Qe);break;case"extensions":J(Ve.extensions||(Ve.extensions=[]));break;case"reserved":J(Ve.reserved||(Ve.reserved=[]),!0);break;default:if(oe==="proto2"||!x.test(Qe))throw be(Qe);K(Qe),M(Ve,"optional");break}}),Be.add(Ve),Be===de&&he.push(Ve)}function M(Be,Me,Ve){var Je=W();if(Je==="group"){n(Be,Me);return}for(;Je.endsWith(".")||z().startsWith(".");)Je+=W();if(!x.test(Je))throw be(Je,"type");var Qe=W();if(!C.test(Qe))throw be(Qe,"name");Qe=fe(Qe),Q("=");var st=new p(Qe,N(W()),Je,Me,Ve);if(u(st,function(mt){if(mt==="option")Ie(st,mt),Q(";");else throw be(mt)},function(){nt(st)}),Me==="proto3_optional"){var gt=new m("_"+Qe);st.setOption("proto3_optional",!0),gt.add(st),Be.add(gt)}else Be.add(st);Be===de&&he.push(st)}function n(Be,Me){if(oe>=2023)throw be("group");var Ve=W();if(!C.test(Ve))throw be(Ve,"name");var Je=v.lcFirst(Ve);Ve===Je&&(Ve=v.ucFirst(Ve)),Q("=");var Qe=N(W()),st=new s(Ve);st.group=!0;var gt=new p(Je,Qe,Ve,Me);gt.filename=j.filename,u(st,function(mt){switch(mt){case"option":Ie(st,mt),Q(";");break;case"required":case"repeated":M(st,mt);break;case"optional":oe==="proto3"?M(st,"proto3_optional"):M(st,"optional");break;case"message":P(st,mt);break;case"enum":X(st,mt);break;case"reserved":J(st.reserved||(st.reserved=[]),!0);break;default:throw be(mt)}}),Be.add(st).add(gt)}function L(Be){Q("<");var Me=W();if(h.mapKey[Me]===void 0)throw be(Me,"type");Q(",");var Ve=W();if(!x.test(Ve))throw be(Ve,"type");Q(">");var Je=W();if(!C.test(Je))throw be(Je,"name");Q("=");var Qe=new g(fe(Je),N(W()),Me,Ve);u(Qe,function(gt){if(gt==="option")Ie(Qe,gt),Q(";");else throw be(gt)},function(){nt(Qe)}),Be.add(Qe)}function U(Be,Me){if(!C.test(Me=W()))throw be(Me,"name");var Ve=new m(fe(Me));u(Ve,function(Qe){Qe==="option"?(Ie(Ve,Qe),Q(";")):(K(Qe),M(Ve,"optional"))}),Be.add(Ve)}function X(Be,Me){if(!C.test(Me=W()))throw be(Me,"name");var Ve=new d(Me);u(Ve,function(Qe){switch(Qe){case"option":Ie(Ve,Qe),Q(";");break;case"reserved":J(Ve.reserved||(Ve.reserved=[]),!0),Ve.reserved===void 0&&(Ve.reserved=[]);break;default:me(Ve,Qe)}}),Be.add(Ve),Be===de&&he.push(Ve)}function me(Be,Me){if(!C.test(Me))throw be(Me,"name");Q("=");var Ve=N(W(),!0),Je={options:void 0};Je.getOption=function(Qe){return this.options[Qe]},Je.setOption=function(Qe,st){o.prototype.setOption.call(Je,Qe,st)},Je.setParsedOption=function(){},u(Je,function(st){if(st==="option")Ie(Je,st),Q(";");else throw be(st)},function(){nt(Je)}),Be.add(Me,Ve,Je.comment,Je.parsedOptions||Je.options)}function Ie(Be,Me){var Ve,Je,Qe=!0;for(Me==="option"&&(Me=W());Me!=="=";){if(Me==="("){var st=W();Q(")"),Me="("+st+")"}if(Qe){if(Qe=!1,Me.includes(".")&&!Me.includes("(")){var gt=Me.split(".");Ve=gt[0]+".",Me=gt[1];continue}Ve=Me}else Je=Je?Je+=Me:Me;Me=W()}var St=Je?Ve.concat(Je):Ve,mt=Le(Be,St);Je=Je&&Je[0]==="."?Je.slice(1):Je,Ve=Ve&&Ve[Ve.length-1]==="."?Ve.slice(0,-1):Ve,ze(Be,Ve,mt,Je)}function Le(Be,Me){if(Q("{",!0)){for(var Ve={};!Q("}",!0);){if(!C.test(lt=W()))throw be(lt,"name");if(lt===null)throw be(lt,"end of input");var Je,Qe=lt;if(Q(":",!0),z()==="{")Je=Le(Be,Me+"."+lt);else if(z()==="["){Je=[];var st;if(Q("[",!0)){do st=ge(),Je.push(st);while(Q(",",!0));Q("]"),typeof st<"u"&&ke(Be,Me+"."+lt,st)}}else Je=ge(),ke(Be,Me+"."+lt,Je);var gt=Ve[Qe];gt&&(Je=[].concat(gt).concat(Je)),Ve[Qe]=Je,Q(",",!0),Q(";",!0)}return Ve}var St=ge();return ke(Be,Me,St),St}function ke(Be,Me,Ve){if(de===Be&&/^features\./.test(Me)){Ee[Me]=Ve;return}Be.setOption&&Be.setOption(Me,Ve)}function ze(Be,Me,Ve,Je){Be.setParsedOption&&Be.setParsedOption(Me,Ve,Je)}function nt(Be){if(Q("[",!0)){do Ie(Be,"option");while(Q(",",!0));Q("]")}return Be}function bt(Be,Me){if(!C.test(Me=W()))throw be(Me,"service name");var Ve=new l(Me);u(Ve,function(Qe){if(!ie(Ve,Qe))if(Qe==="rpc")dt(Ve,Qe);else throw be(Qe)}),Be.add(Ve),Be===de&&he.push(Ve)}function dt(Be,Me){var Ve=Y(),Je=Me;if(!C.test(Me=W()))throw be(Me,"name");var Qe=Me,st,gt,St,mt;if(Q("("),Q("stream",!0)&&(gt=!0),!x.test(Me=W())||(st=Me,Q(")"),Q("returns"),Q("("),Q("stream",!0)&&(mt=!0),!x.test(Me=W())))throw be(Me);St=Me,Q(")");var zt=new a(Qe,Je,st,St,gt,mt);zt.comment=Ve,u(zt,function(Tt){if(Tt==="option")Ie(zt,Tt),Q(";");else throw be(Tt)}),Be.add(zt)}function Et(Be,Me){if(!x.test(Me=W()))throw be(Me,"reference");var Ve=Me;u(null,function(Qe){switch(Qe){case"required":case"repeated":M(Be,Qe,Ve);break;case"optional":oe==="proto3"?M(Be,"proto3_optional",Ve):M(Be,"optional",Ve);break;default:if(oe==="proto2"||!x.test(Qe))throw be(Qe);K(Qe),M(Be,"optional",Ve);break}})}for(var lt;(lt=W())!==null;)switch(lt){case"package":if(!te)throw be(lt);A();break;case"import":if(!te)throw be(lt);V();break;case"syntax":if(!te)throw be(lt);ne();break;case"edition":if(!te)throw be(lt);ce();break;case"option":Ie(de,lt),Q(";",!0);break;default:if(ie(de,lt)){te=!1;continue}throw be(lt)}return Se(),j.filename=null,{package:ae,imports:ue,weakImports:ee,root:k}}return parse_1}var common_1,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common_1;hasRequiredCommon=1,common_1=t;var e=/\/|\./;function t(p,g){e.test(p)||(p="google/protobuf/"+p+".proto",g={nested:{google:{nested:{protobuf:{nested:g}}}}}),t[p]=g}t("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var s;return t("duration",{Duration:s={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),t("timestamp",{Timestamp:s}),t("empty",{Empty:{fields:{}}}),t("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),t("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),t("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),t.get=function(g){return t[g]||null},common_1}var hasRequiredSrc$2;function requireSrc$2(){if(hasRequiredSrc$2)return src$1.exports;hasRequiredSrc$2=1;var e=src$1.exports=requireIndexLight();return e.build="full",e.tokenize=requireTokenize(),e.parse=requireParse$1(),e.common=requireCommon(),e.Root._configure(e.Type,e.parse,e.common),src$1.exports}var protobufjs,hasRequiredProtobufjs;function requireProtobufjs(){return hasRequiredProtobufjs||(hasRequiredProtobufjs=1,protobufjs=requireSrc$2()),protobufjs}var gax={},warnings={},featureDetection={},hasRequiredFeatureDetection;function requireFeatureDetection(){if(hasRequiredFeatureDetection)return featureDetection;hasRequiredFeatureDetection=1;var e={},t;Object.defineProperty(featureDetection,"__esModule",{value:!0}),featureDetection.hasWindowFetch=p,featureDetection.isNodeJS=g,featureDetection.hasAbortController=m;const s={windowFetch:typeof window<"u"&&window?.fetch&&typeof window?.fetch=="function",nodeJS:typeof e<"u"&&((t=e?.versions)===null||t===void 0?void 0:t.node),abortController:typeof AbortController<"u"};function p(){return s.windowFetch}function g(){return s.nodeJS}function m(){return s.abortController}return featureDetection}var hasRequiredWarnings;function requireWarnings(){if(hasRequiredWarnings)return warnings;hasRequiredWarnings=1;var e={};Object.defineProperty(warnings,"__esModule",{value:!0}),warnings.warn=p;const t=requireFeatureDetection(),s=new Set;function p(g,m,d){s.has(g)||(s.add(g),(0,t.isNodeJS)()?typeof d<"u"?e.emitWarning(m,{type:d}):e.emitWarning(m):console.warn(m))}return warnings}var util$1={},commonjsBrowser={},v1$1={},rng={},hasRequiredRng;function requireRng(){if(hasRequiredRng)return rng;hasRequiredRng=1,Object.defineProperty(rng,"__esModule",{value:!0}),rng.default=s;let e;const t=new Uint8Array(16);function s(){if(!e&&(e=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)}return rng}var stringify={},validate={},regex={},hasRequiredRegex;function requireRegex(){if(hasRequiredRegex)return regex;hasRequiredRegex=1,Object.defineProperty(regex,"__esModule",{value:!0}),regex.default=void 0;var e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return regex.default=e,regex}var hasRequiredValidate$1;function requireValidate$1(){if(hasRequiredValidate$1)return validate;hasRequiredValidate$1=1,Object.defineProperty(validate,"__esModule",{value:!0}),validate.default=void 0;var e=t(requireRegex());function t(g){return g&&g.__esModule?g:{default:g}}function s(g){return typeof g=="string"&&e.default.test(g)}var p=s;return validate.default=p,validate}var hasRequiredStringify;function requireStringify(){if(hasRequiredStringify)return stringify;hasRequiredStringify=1,Object.defineProperty(stringify,"__esModule",{value:!0}),stringify.default=void 0,stringify.unsafeStringify=p;var e=t(requireValidate$1());function t(d){return d&&d.__esModule?d:{default:d}}const s=[];for(let d=0;d<256;++d)s.push((d+256).toString(16).slice(1));function p(d,l=0){return s[d[l+0]]+s[d[l+1]]+s[d[l+2]]+s[d[l+3]]+"-"+s[d[l+4]]+s[d[l+5]]+"-"+s[d[l+6]]+s[d[l+7]]+"-"+s[d[l+8]]+s[d[l+9]]+"-"+s[d[l+10]]+s[d[l+11]]+s[d[l+12]]+s[d[l+13]]+s[d[l+14]]+s[d[l+15]]}function g(d,l=0){const a=p(d,l);if(!(0,e.default)(a))throw TypeError("Stringified UUID is invalid");return a}var m=g;return stringify.default=m,stringify}var hasRequiredV1$1;function requireV1$1(){if(hasRequiredV1$1)return v1$1;hasRequiredV1$1=1,Object.defineProperty(v1$1,"__esModule",{value:!0}),v1$1.default=void 0;var e=s(requireRng()),t=requireStringify();function s(o){return o&&o.__esModule?o:{default:o}}let p,g,m=0,d=0;function l(o,h,v){let _=h&&v||0;const y=h||new Array(16);o=o||{};let w=o.node||p,T=o.clockseq!==void 0?o.clockseq:g;if(w==null||T==null){const j=o.random||(o.rng||e.default)();w==null&&(w=p=[j[0]|1,j[1],j[2],j[3],j[4],j[5]]),T==null&&(T=g=(j[6]<<8|j[7])&16383)}let I=o.msecs!==void 0?o.msecs:Date.now(),O=o.nsecs!==void 0?o.nsecs:d+1;const E=I-m+(O-d)/1e4;if(E<0&&o.clockseq===void 0&&(T=T+1&16383),(E<0||I>m)&&o.nsecs===void 0&&(O=0),O>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");m=I,d=O,g=T,I+=122192928e5;const C=((I&268435455)*1e4+O)%4294967296;y[_++]=C>>>24&255,y[_++]=C>>>16&255,y[_++]=C>>>8&255,y[_++]=C&255;const x=I/4294967296*1e4&268435455;y[_++]=x>>>8&255,y[_++]=x&255,y[_++]=x>>>24&15|16,y[_++]=x>>>16&255,y[_++]=T>>>8|128,y[_++]=T&255;for(let j=0;j<6;++j)y[_+j]=w[j];return h||(0,t.unsafeStringify)(y)}var a=l;return v1$1.default=a,v1$1}var v3={},v35={},parse={},hasRequiredParse;function requireParse(){if(hasRequiredParse)return parse;hasRequiredParse=1,Object.defineProperty(parse,"__esModule",{value:!0}),parse.default=void 0;var e=t(requireValidate$1());function t(g){return g&&g.__esModule?g:{default:g}}function s(g){if(!(0,e.default)(g))throw TypeError("Invalid UUID");let m;const d=new Uint8Array(16);return d[0]=(m=parseInt(g.slice(0,8),16))>>>24,d[1]=m>>>16&255,d[2]=m>>>8&255,d[3]=m&255,d[4]=(m=parseInt(g.slice(9,13),16))>>>8,d[5]=m&255,d[6]=(m=parseInt(g.slice(14,18),16))>>>8,d[7]=m&255,d[8]=(m=parseInt(g.slice(19,23),16))>>>8,d[9]=m&255,d[10]=(m=parseInt(g.slice(24,36),16))/1099511627776&255,d[11]=m/4294967296&255,d[12]=m>>>24&255,d[13]=m>>>16&255,d[14]=m>>>8&255,d[15]=m&255,d}var p=s;return parse.default=p,parse}var hasRequiredV35;function requireV35(){if(hasRequiredV35)return v35;hasRequiredV35=1,Object.defineProperty(v35,"__esModule",{value:!0}),v35.URL=v35.DNS=void 0,v35.default=d;var e=requireStringify(),t=s(requireParse());function s(l){return l&&l.__esModule?l:{default:l}}function p(l){l=unescape(encodeURIComponent(l));const a=[];for(let o=0;o<l.length;++o)a.push(l.charCodeAt(o));return a}const g="6ba7b810-9dad-11d1-80b4-00c04fd430c8";v35.DNS=g;const m="6ba7b811-9dad-11d1-80b4-00c04fd430c8";v35.URL=m;function d(l,a,o){function h(v,_,y,w){var T;if(typeof v=="string"&&(v=p(v)),typeof _=="string"&&(_=(0,t.default)(_)),((T=_)===null||T===void 0?void 0:T.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let I=new Uint8Array(16+v.length);if(I.set(_),I.set(v,_.length),I=o(I),I[6]=I[6]&15|a,I[8]=I[8]&63|128,y){w=w||0;for(let O=0;O<16;++O)y[w+O]=I[O];return y}return(0,e.unsafeStringify)(I)}try{h.name=l}catch{}return h.DNS=g,h.URL=m,h}return v35}var md5={},hasRequiredMd5;function requireMd5(){if(hasRequiredMd5)return md5;hasRequiredMd5=1,Object.defineProperty(md5,"__esModule",{value:!0}),md5.default=void 0;function e(y){if(typeof y=="string"){const w=unescape(encodeURIComponent(y));y=new Uint8Array(w.length);for(let T=0;T<w.length;++T)y[T]=w.charCodeAt(T)}return t(p(g(y),y.length*8))}function t(y){const w=[],T=y.length*32,I="0123456789abcdef";for(let O=0;O<T;O+=8){const E=y[O>>5]>>>O%32&255,C=parseInt(I.charAt(E>>>4&15)+I.charAt(E&15),16);w.push(C)}return w}function s(y){return(y+64>>>9<<4)+14+1}function p(y,w){y[w>>5]|=128<<w%32,y[s(w)-1]=w;let T=1732584193,I=-271733879,O=-1732584194,E=271733878;for(let C=0;C<y.length;C+=16){const x=T,j=I,D=O,k=E;T=a(T,I,O,E,y[C],7,-680876936),E=a(E,T,I,O,y[C+1],12,-389564586),O=a(O,E,T,I,y[C+2],17,606105819),I=a(I,O,E,T,y[C+3],22,-1044525330),T=a(T,I,O,E,y[C+4],7,-176418897),E=a(E,T,I,O,y[C+5],12,1200080426),O=a(O,E,T,I,y[C+6],17,-1473231341),I=a(I,O,E,T,y[C+7],22,-45705983),T=a(T,I,O,E,y[C+8],7,1770035416),E=a(E,T,I,O,y[C+9],12,-1958414417),O=a(O,E,T,I,y[C+10],17,-42063),I=a(I,O,E,T,y[C+11],22,-1990404162),T=a(T,I,O,E,y[C+12],7,1804603682),E=a(E,T,I,O,y[C+13],12,-40341101),O=a(O,E,T,I,y[C+14],17,-1502002290),I=a(I,O,E,T,y[C+15],22,1236535329),T=o(T,I,O,E,y[C+1],5,-165796510),E=o(E,T,I,O,y[C+6],9,-1069501632),O=o(O,E,T,I,y[C+11],14,643717713),I=o(I,O,E,T,y[C],20,-373897302),T=o(T,I,O,E,y[C+5],5,-701558691),E=o(E,T,I,O,y[C+10],9,38016083),O=o(O,E,T,I,y[C+15],14,-660478335),I=o(I,O,E,T,y[C+4],20,-405537848),T=o(T,I,O,E,y[C+9],5,568446438),E=o(E,T,I,O,y[C+14],9,-1019803690),O=o(O,E,T,I,y[C+3],14,-187363961),I=o(I,O,E,T,y[C+8],20,1163531501),T=o(T,I,O,E,y[C+13],5,-1444681467),E=o(E,T,I,O,y[C+2],9,-51403784),O=o(O,E,T,I,y[C+7],14,1735328473),I=o(I,O,E,T,y[C+12],20,-1926607734),T=h(T,I,O,E,y[C+5],4,-378558),E=h(E,T,I,O,y[C+8],11,-2022574463),O=h(O,E,T,I,y[C+11],16,1839030562),I=h(I,O,E,T,y[C+14],23,-35309556),T=h(T,I,O,E,y[C+1],4,-1530992060),E=h(E,T,I,O,y[C+4],11,1272893353),O=h(O,E,T,I,y[C+7],16,-155497632),I=h(I,O,E,T,y[C+10],23,-1094730640),T=h(T,I,O,E,y[C+13],4,681279174),E=h(E,T,I,O,y[C],11,-358537222),O=h(O,E,T,I,y[C+3],16,-722521979),I=h(I,O,E,T,y[C+6],23,76029189),T=h(T,I,O,E,y[C+9],4,-640364487),E=h(E,T,I,O,y[C+12],11,-421815835),O=h(O,E,T,I,y[C+15],16,530742520),I=h(I,O,E,T,y[C+2],23,-995338651),T=v(T,I,O,E,y[C],6,-198630844),E=v(E,T,I,O,y[C+7],10,1126891415),O=v(O,E,T,I,y[C+14],15,-1416354905),I=v(I,O,E,T,y[C+5],21,-57434055),T=v(T,I,O,E,y[C+12],6,1700485571),E=v(E,T,I,O,y[C+3],10,-1894986606),O=v(O,E,T,I,y[C+10],15,-1051523),I=v(I,O,E,T,y[C+1],21,-2054922799),T=v(T,I,O,E,y[C+8],6,1873313359),E=v(E,T,I,O,y[C+15],10,-30611744),O=v(O,E,T,I,y[C+6],15,-1560198380),I=v(I,O,E,T,y[C+13],21,1309151649),T=v(T,I,O,E,y[C+4],6,-145523070),E=v(E,T,I,O,y[C+11],10,-1120210379),O=v(O,E,T,I,y[C+2],15,718787259),I=v(I,O,E,T,y[C+9],21,-343485551),T=m(T,x),I=m(I,j),O=m(O,D),E=m(E,k)}return[T,I,O,E]}function g(y){if(y.length===0)return[];const w=y.length*8,T=new Uint32Array(s(w));for(let I=0;I<w;I+=8)T[I>>5]|=(y[I/8]&255)<<I%32;return T}function m(y,w){const T=(y&65535)+(w&65535);return(y>>16)+(w>>16)+(T>>16)<<16|T&65535}function d(y,w){return y<<w|y>>>32-w}function l(y,w,T,I,O,E){return m(d(m(m(w,y),m(I,E)),O),T)}function a(y,w,T,I,O,E,C){return l(w&T|~w&I,y,w,O,E,C)}function o(y,w,T,I,O,E,C){return l(w&I|T&~I,y,w,O,E,C)}function h(y,w,T,I,O,E,C){return l(w^T^I,y,w,O,E,C)}function v(y,w,T,I,O,E,C){return l(T^(w|~I),y,w,O,E,C)}var _=e;return md5.default=_,md5}var hasRequiredV3;function requireV3(){if(hasRequiredV3)return v3;hasRequiredV3=1,Object.defineProperty(v3,"__esModule",{value:!0}),v3.default=void 0;var e=s(requireV35()),t=s(requireMd5());function s(m){return m&&m.__esModule?m:{default:m}}var g=(0,e.default)("v3",48,t.default);return v3.default=g,v3}var v4={},native={},hasRequiredNative;function requireNative(){if(hasRequiredNative)return native;hasRequiredNative=1,Object.defineProperty(native,"__esModule",{value:!0}),native.default=void 0;var t={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return native.default=t,native}var hasRequiredV4;function requireV4(){if(hasRequiredV4)return v4;hasRequiredV4=1,Object.defineProperty(v4,"__esModule",{value:!0}),v4.default=void 0;var e=p(requireNative()),t=p(requireRng()),s=requireStringify();function p(d){return d&&d.__esModule?d:{default:d}}function g(d,l,a){if(e.default.randomUUID&&!l&&!d)return e.default.randomUUID();d=d||{};const o=d.random||(d.rng||t.default)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,l){a=a||0;for(let h=0;h<16;++h)l[a+h]=o[h];return l}return(0,s.unsafeStringify)(o)}var m=g;return v4.default=m,v4}var v5={},sha1={},hasRequiredSha1;function requireSha1(){if(hasRequiredSha1)return sha1;hasRequiredSha1=1,Object.defineProperty(sha1,"__esModule",{value:!0}),sha1.default=void 0;function e(g,m,d,l){switch(g){case 0:return m&d^~m&l;case 1:return m^d^l;case 2:return m&d^m&l^d&l;case 3:return m^d^l}}function t(g,m){return g<<m|g>>>32-m}function s(g){const m=[1518500249,1859775393,2400959708,3395469782],d=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof g=="string"){const h=unescape(encodeURIComponent(g));g=[];for(let v=0;v<h.length;++v)g.push(h.charCodeAt(v))}else Array.isArray(g)||(g=Array.prototype.slice.call(g));g.push(128);const l=g.length/4+2,a=Math.ceil(l/16),o=new Array(a);for(let h=0;h<a;++h){const v=new Uint32Array(16);for(let _=0;_<16;++_)v[_]=g[h*64+_*4]<<24|g[h*64+_*4+1]<<16|g[h*64+_*4+2]<<8|g[h*64+_*4+3];o[h]=v}o[a-1][14]=(g.length-1)*8/Math.pow(2,32),o[a-1][14]=Math.floor(o[a-1][14]),o[a-1][15]=(g.length-1)*8&4294967295;for(let h=0;h<a;++h){const v=new Uint32Array(80);for(let O=0;O<16;++O)v[O]=o[h][O];for(let O=16;O<80;++O)v[O]=t(v[O-3]^v[O-8]^v[O-14]^v[O-16],1);let _=d[0],y=d[1],w=d[2],T=d[3],I=d[4];for(let O=0;O<80;++O){const E=Math.floor(O/20),C=t(_,5)+e(E,y,w,T)+I+m[E]+v[O]>>>0;I=T,T=w,w=t(y,30)>>>0,y=_,_=C}d[0]=d[0]+_>>>0,d[1]=d[1]+y>>>0,d[2]=d[2]+w>>>0,d[3]=d[3]+T>>>0,d[4]=d[4]+I>>>0}return[d[0]>>24&255,d[0]>>16&255,d[0]>>8&255,d[0]&255,d[1]>>24&255,d[1]>>16&255,d[1]>>8&255,d[1]&255,d[2]>>24&255,d[2]>>16&255,d[2]>>8&255,d[2]&255,d[3]>>24&255,d[3]>>16&255,d[3]>>8&255,d[3]&255,d[4]>>24&255,d[4]>>16&255,d[4]>>8&255,d[4]&255]}var p=s;return sha1.default=p,sha1}var hasRequiredV5;function requireV5(){if(hasRequiredV5)return v5;hasRequiredV5=1,Object.defineProperty(v5,"__esModule",{value:!0}),v5.default=void 0;var e=s(requireV35()),t=s(requireSha1());function s(m){return m&&m.__esModule?m:{default:m}}var g=(0,e.default)("v5",80,t.default);return v5.default=g,v5}var nil={},hasRequiredNil;function requireNil(){if(hasRequiredNil)return nil;hasRequiredNil=1,Object.defineProperty(nil,"__esModule",{value:!0}),nil.default=void 0;var e="00000000-0000-0000-0000-000000000000";return nil.default=e,nil}var version$2={},hasRequiredVersion;function requireVersion(){if(hasRequiredVersion)return version$2;hasRequiredVersion=1,Object.defineProperty(version$2,"__esModule",{value:!0}),version$2.default=void 0;var e=t(requireValidate$1());function t(g){return g&&g.__esModule?g:{default:g}}function s(g){if(!(0,e.default)(g))throw TypeError("Invalid UUID");return parseInt(g.slice(14,15),16)}var p=s;return version$2.default=p,version$2}var hasRequiredCommonjsBrowser;function requireCommonjsBrowser(){return hasRequiredCommonjsBrowser||(hasRequiredCommonjsBrowser=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return d.default}});var t=h(requireV1$1()),s=h(requireV3()),p=h(requireV4()),g=h(requireV5()),m=h(requireNil()),d=h(requireVersion()),l=h(requireValidate$1()),a=h(requireStringify()),o=h(requireParse());function h(v){return v&&v.__esModule?v:{default:v}}})(commonjsBrowser)),commonjsBrowser}var hasRequiredUtil$2;function requireUtil$2(){if(hasRequiredUtil$2)return util$1;hasRequiredUtil$2=1,Object.defineProperty(util$1,"__esModule",{value:!0}),util$1.camelToSnakeCase=p,util$1.toCamelCase=m,util$1.toLowerCamelCase=d,util$1.makeUUID=l;const e=requireCommonjsBrowser();function t(a,o=!1){return o&&(a=a.replace(/([A-Z])([A-Z]+)([A-Z])/g,h=>h[0]+h.slice(1,h.length-1).toLowerCase()+h[h.length-1])),a.split(/(?=[A-Z])|[^A-Za-z0-9.]+/).filter(h=>h.length>0).map((h,v)=>v===0?h:h.toLowerCase())}function s(a){return a.length===0?a:a[0].toLowerCase()+a.slice(1)}function p(a){const o=t(a);if(o.length===0)return a;const h=[o[0]];return h.push(...o.slice(1).map(s)),h.join("_")}function g(a){return a.length===0?a:a[0].toUpperCase()+a.slice(1)}function m(a){const o=t(a,!0);if(o.length===0)return a;const h=[o[0]];return h.push(...o.slice(1).map(v=>v.match(/^\d+$/)?"_"+v:g(v))),h.join("")}function d(a){const o=m(a);return o.length===0?o:o[0].toLowerCase()+o.slice(1)}function l(){return(0,e.v4)()}return util$1}var status={},hasRequiredStatus;function requireStatus(){return hasRequiredStatus||(hasRequiredStatus=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.HttpCodeToRpcCodeMap=e.Status=void 0,e.rpcCodeFromHttpStatusCode=s;var t;(function(p){p[p.OK=0]="OK",p[p.CANCELLED=1]="CANCELLED",p[p.UNKNOWN=2]="UNKNOWN",p[p.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",p[p.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",p[p.NOT_FOUND=5]="NOT_FOUND",p[p.ALREADY_EXISTS=6]="ALREADY_EXISTS",p[p.PERMISSION_DENIED=7]="PERMISSION_DENIED",p[p.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",p[p.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",p[p.ABORTED=10]="ABORTED",p[p.OUT_OF_RANGE=11]="OUT_OF_RANGE",p[p.UNIMPLEMENTED=12]="UNIMPLEMENTED",p[p.INTERNAL=13]="INTERNAL",p[p.UNAVAILABLE=14]="UNAVAILABLE",p[p.DATA_LOSS=15]="DATA_LOSS",p[p.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(t||(e.Status=t={})),e.HttpCodeToRpcCodeMap=new Map([[400,t.INVALID_ARGUMENT],[401,t.UNAUTHENTICATED],[403,t.PERMISSION_DENIED],[404,t.NOT_FOUND],[409,t.ABORTED],[416,t.OUT_OF_RANGE],[429,t.RESOURCE_EXHAUSTED],[499,t.CANCELLED],[501,t.UNIMPLEMENTED],[503,t.UNAVAILABLE],[504,t.DEADLINE_EXCEEDED]]);function s(p){return e.HttpCodeToRpcCodeMap.has(p)?e.HttpCodeToRpcCodeMap.get(p):p>=200&&p<300?t.OK:p>=400&&p<500?t.FAILED_PRECONDITION:p>=500&&p<600?t.INTERNAL:t.UNKNOWN}})(status)),status}var hasRequiredGax;function requireGax(){if(hasRequiredGax)return gax;hasRequiredGax=1,Object.defineProperty(gax,"__esModule",{value:!0}),gax.CallSettings=gax.RetryOptions=void 0,gax.convertRetryOptions=m,gax.createRetryOptions=d,gax.createBackoffSettings=l,gax.createDefaultBackoffSettings=a,gax.createMaxRetriesBackoffSettings=o,gax.createBundleOptions=h,gax.constructSettings=y,gax.createByteLengthFunction=w;const e=requireWarnings(),t=requireUtil$2(),s=requireStatus();class p{constructor(I,O,E,C){this.retryCodes=I,this.backoffSettings=O,this.shouldRetryFn=E,this.getResumptionRequestFn=C}}gax.RetryOptions=p;class g{constructor(I){var O;I=I||{},this.timeout=I.timeout||3e4,this.retry=I.retry,this.autoPaginate="autoPaginate"in I?I.autoPaginate:!0,this.maxResults=I.maxResults,this.otherArgs=I.otherArgs||{},this.bundleOptions=I.bundleOptions,this.isBundling="isBundling"in I?I.isBundling:!0,this.longrunning="longrunning"in I?I.longrunning:void 0,this.apiName=(O=I.apiName)!==null&&O!==void 0?O:void 0,this.retryRequestOptions=I.retryRequestOptions}merge(I){if(!I)return new g(this);let O=this.timeout,E=this.retry,C=this.autoPaginate,x=this.maxResults,j=this.otherArgs,D=this.isBundling,k=this.longrunning,q=this.apiName,G=this.retryRequestOptions;if("timeout"in I&&(O=I.timeout),E?.retryCodes&&(E.backoffSettings.initialRpcTimeoutMillis=O,E.backoffSettings.maxRpcTimeoutMillis=O,E.backoffSettings.totalTimeoutMillis=O),"retry"in I&&(E=_(E||{},I.retry)),"autoPaginate"in I&&!I.autoPaginate&&(C=!1),"maxResults"in I&&(x=I.maxResults),"otherArgs"in I){j={};for(const $ in this.otherArgs)j[$]=this.otherArgs[$];for(const $ in I.otherArgs)j[$]=I.otherArgs[$]}return"isBundling"in I&&(D=I.isBundling),"maxRetries"in I&&I.maxRetries!==void 0&&(E.backoffSettings.maxRetries=I.maxRetries,delete E.backoffSettings.totalTimeoutMillis),"longrunning"in I&&(k=I.longrunning),"apiName"in I&&(q=I.apiName),"retryRequestOptions"in I&&(G=I.retryRequestOptions),new g({timeout:O,retry:E,bundleOptions:this.bundleOptions,longrunning:k,autoPaginate:C,maxResults:x,otherArgs:j,isBundling:D,apiName:q,retryRequestOptions:G})}}gax.CallSettings=g;function m(T,I){var O,E,C,x;if(!T||!I)return T;if(T.retry&&T.retryRequestOptions)throw new Error("Only one of retry or retryRequestOptions may be set");if(T.retryRequestOptions){T.retryRequestOptions.objectMode!==void 0&&(0,e.warn)("retry_request_options","objectMode override is not supported. It is set to true internally by default in gax.","UnsupportedParameterWarning"),T.retryRequestOptions.noResponseRetries!==void 0&&(0,e.warn)("retry_request_options","noResponseRetries override is not supported. Please specify retry codes or a function to determine retry eligibility.","UnsupportedParameterWarning"),T.retryRequestOptions.currentRetryAttempt!==void 0&&(0,e.warn)("retry_request_options","currentRetryAttempt override is not supported. Retry attempts are tracked internally.","UnsupportedParameterWarning");let j=[s.Status.UNAVAILABLE],D;T.retryRequestOptions.shouldRetryFn&&(j=[],D=T.retryRequestOptions.shouldRetryFn),T.maxRetries=(E=(O=T?.retryRequestOptions)===null||O===void 0?void 0:O.retries)!==null&&E!==void 0?E:T.maxRetries;const k=a();let q,G;T.retryRequestOptions.maxRetryDelay!==void 0&&(q=T.retryRequestOptions.maxRetryDelay*1e3);const $=(x=(C=T?.retryRequestOptions)===null||C===void 0?void 0:C.retryDelayMultiplier)!==null&&x!==void 0?x:k.retryDelayMultiplier;T.retryRequestOptions.totalTimeout!==void 0?G=T.retryRequestOptions.totalTimeout*1e3:T.maxRetries===void 0&&(G=3e4,(0,e.warn)("retry_request_options_no_max_retries_timeout","Neither maxRetries nor totalTimeout were passed. Defaulting to totalTimeout of 30000ms.","MissingParameterWarning")),k.maxRetryDelayMillis=q??k.maxRetryDelayMillis,k.retryDelayMultiplier=$??k.retryDelayMultiplier,k.totalTimeoutMillis=G??k.totalTimeoutMillis;const W=d(j,k,D);T.retry=W,delete T.retryRequestOptions,(0,e.warn)("retry_request_options","retryRequestOptions will be deprecated in a future release. Please use retryOptions to pass retry options at call time","DeprecationWarning")}return T}function d(T,I,O,E){return{retryCodes:T,backoffSettings:I,shouldRetryFn:O,getResumptionRequestFn:E}}function l(T,I,O,E,C,x,j){return{initialRetryDelayMillis:T,retryDelayMultiplier:I,maxRetryDelayMillis:O,initialRpcTimeoutMillis:E,rpcTimeoutMultiplier:C,maxRpcTimeoutMillis:x,totalTimeoutMillis:j}}function a(){return l(100,1.3,6e4,null,null,null,null)}function o(T,I,O,E,C,x,j){return{initialRetryDelayMillis:T,retryDelayMultiplier:I,maxRetryDelayMillis:O,initialRpcTimeoutMillis:E,rpcTimeoutMultiplier:C,maxRpcTimeoutMillis:x,maxRetries:j}}function h(T){["element_count_threshold","element_count_limit","request_byte_threshold","request_byte_limit","delay_threshold_millis"].forEach(D=>{if(D in T&&typeof T[D]!="number")throw new Error(`${D} should be a number`)});const O=T.element_count_threshold||0,E=T.element_count_limit||0,C=T.request_byte_threshold||0,x=T.request_byte_limit||0,j=T.delay_threshold_millis||0;if(O===0&&C===0&&j===0)throw new Error("one threshold should be > 0");return{elementCountThreshold:O,elementCountLimit:E,requestByteThreshold:C,requestByteLimit:x,delayThreshold:j}}function v(T,I,O,E){if(!T)return null;let C=null;if(I&&"retry_codes_name"in T){const j=T.retry_codes_name;C=(I[j]||[]).map(D=>Number(E[D]))}let x=null;if(O&&"retry_params_name"in T){const j=O[T.retry_params_name];x=l(j.initial_retry_delay_millis,j.retry_delay_multiplier,j.max_retry_delay_millis,j.initial_rpc_timeout_millis,j.rpc_timeout_multiplier,j.max_rpc_timeout_millis,j.total_timeout_millis)}return d(C,x)}function _(T,I){if(!I)return null;if(!I.retryCodes&&!I.backoffSettings&&!I.shouldRetryFn&&!I.getResumptionRequestFn)return T;const O=I.retryCodes?I.retryCodes:T.retryCodes,E=I.backoffSettings?I.backoffSettings:T.backoffSettings,C=I.shouldRetryFn?I.shouldRetryFn:T.shouldRetryFn,x=I.getResumptionRequestFn?I.getResumptionRequestFn:T.getResumptionRequestFn;return d(O,E,C,x)}function y(T,I,O,E,C){C=C||{};const x={},j=(I.interfaces||{})[T];if(!j)return null;const D=(O.interfaces||{})[T]||{},k=j.methods,q=D.methods||{};for(const G in k){const $=k[G],W=(0,t.toLowerCamelCase)(G);let K=v($,j.retry_codes,j.retry_params,E),z=$.bundling,Q=$.timeout_millis;if(G in q){const te=q[G];te&&("bundling"in te&&(z=te.bundling),"timeout_millis"in te&&(Q=te.timeout_millis)),K=_(K,v(te,D.retry_codes,D.retry_params,E))}const Y=T;x[W]=new g({timeout:Q,retry:K,bundleOptions:z?h(z):null,otherArgs:C,apiName:Y})}return x}function w(T){return function(O){try{return T.encode(O).finish().length}catch(E){const C=JSON.stringify(O);return(0,e.warn)("error_encoding_protobufjs_object",`Cannot encode protobuf.js object: ${C}: ${E}`),C.length}}}return gax}var routingHeader={},hasRequiredRoutingHeader;function requireRoutingHeader(){if(hasRequiredRoutingHeader)return routingHeader;hasRequiredRoutingHeader=1,Object.defineProperty(routingHeader,"__esModule",{value:!0}),routingHeader.fromParams=t;const e=require$$1$3;function t(s){return e.stringify(s)}return routingHeader}var operationsClient={},createApiCall={},apiCaller={},normalApiCaller={},call={},googleError={},src={},toproto3json={},any={},fromproto3json={},bytes={},hasRequiredBytes;function requireBytes(){if(hasRequiredBytes)return bytes;hasRequiredBytes=1,Object.defineProperty(bytes,"__esModule",{value:!0}),bytes.bytesFromProto3JSON=bytes.bytesToProto3JSON=void 0;function e(s){return Buffer.isBuffer(s)?s.toString("base64"):Buffer.from(s.buffer,0,s.byteLength).toString("base64")}bytes.bytesToProto3JSON=e;function t(s){return Buffer.from(s,"base64")}return bytes.bytesFromProto3JSON=t,bytes}var _enum={},hasRequired_enum;function require_enum(){if(hasRequired_enum)return _enum;hasRequired_enum=1,Object.defineProperty(_enum,"__esModule",{value:!0}),_enum.resolveEnumValueToNumber=_enum.resolveEnumValueToString=void 0;function e(s,p){if(typeof p=="number"){const g=s.valuesById[p];return typeof g>"u"?p:g}if(typeof p=="string")return p;throw new Error("resolveEnumValueToString: enum value must be a string or a number")}_enum.resolveEnumValueToString=e;function t(s,p){if(typeof p=="number")return p;if(typeof p=="string"){const g=s.values[p];return typeof g>"u"?p:g}throw new Error("resolveEnumValueToNumber: enum value must be a string or a number")}return _enum.resolveEnumValueToNumber=t,_enum}var value={},util={},hasRequiredUtil$1;function requireUtil$1(){if(hasRequiredUtil$1)return util;hasRequiredUtil$1=1,Object.defineProperty(util,"__esModule",{value:!0}),util.assert=util.wrapperTypes=util.getFullyQualifiedTypeName=void 0;function e(s){let p="";for(;s.parent;)p=`.${s.name}${p}`,s=s.parent;return p}util.getFullyQualifiedTypeName=e,util.wrapperTypes=new Set([".google.protobuf.DoubleValue",".google.protobuf.FloatValue",".google.protobuf.Int64Value",".google.protobuf.UInt64Value",".google.protobuf.Int32Value",".google.protobuf.UInt32Value",".google.protobuf.BoolValue",".google.protobuf.StringValue",".google.protobuf.BytesValue"]);function t(s,p){if(!s)throw new Error(p)}return util.assert=t,util}var hasRequiredValue;function requireValue(){if(hasRequiredValue)return value;hasRequiredValue=1,Object.defineProperty(value,"__esModule",{value:!0}),value.googleProtobufValueFromProto3JSON=value.googleProtobufListValueFromProto3JSON=value.googleProtobufStructFromProto3JSON=value.googleProtobufValueToProto3JSON=value.googleProtobufListValueToProto3JSON=value.googleProtobufStructToProto3JSON=void 0;const e=requireUtil$1();function t(l){const a={},o=l.fields;for(const[h,v]of Object.entries(o))a[h]=p(v);return a}value.googleProtobufStructToProto3JSON=t;function s(l){return(0,e.assert)(Array.isArray(l.values),"ListValue internal representation must contain array of values"),l.values.map(p)}value.googleProtobufListValueToProto3JSON=s;function p(l){return Object.prototype.hasOwnProperty.call(l,"nullValue")?null:Object.prototype.hasOwnProperty.call(l,"numberValue")&&typeof l.numberValue=="number"?Number.isFinite(l.numberValue)?l.numberValue:l.numberValue.toString():Object.prototype.hasOwnProperty.call(l,"stringValue")&&typeof l.stringValue=="string"?l.stringValue:Object.prototype.hasOwnProperty.call(l,"boolValue")&&typeof l.boolValue=="boolean"?l.boolValue:Object.prototype.hasOwnProperty.call(l,"structValue")&&typeof l.structValue=="object"?t(l.structValue):Object.prototype.hasOwnProperty.call(l,"listValue")&&typeof l=="object"&&typeof l.listValue=="object"?s(l.listValue):null}value.googleProtobufValueToProto3JSON=p;function g(l){const a={};for(const[o,h]of Object.entries(l))a[o]=d(h);return{fields:a}}value.googleProtobufStructFromProto3JSON=g;function m(l){return{values:l.map(a=>d(a))}}value.googleProtobufListValueFromProto3JSON=m;function d(l){if(l===null)return{nullValue:"NULL_VALUE"};if(typeof l=="number")return{numberValue:l};if(typeof l=="string")return{stringValue:l};if(typeof l=="boolean")return{boolValue:l};if(Array.isArray(l))return{listValue:m(l)};if(typeof l=="object")return{structValue:g(l)};throw new Error(`googleProtobufValueFromProto3JSON: incorrect parameter type: ${typeof l}`)}return value.googleProtobufValueFromProto3JSON=d,value}var duration={},hasRequiredDuration;function requireDuration(){if(hasRequiredDuration)return duration;hasRequiredDuration=1,Object.defineProperty(duration,"__esModule",{value:!0}),duration.googleProtobufDurationFromProto3JSON=duration.googleProtobufDurationToProto3JSON=void 0;function e(s){let p=s.seconds.toString();if(typeof s.nanos=="number"&&s.nanos>0){const g=s.nanos.toString().padStart(9,"0").replace(/^((?:\d\d\d)+?)(?:0*)$/,"$1");p+="."+g}return p+="s",p}duration.googleProtobufDurationToProto3JSON=e;function t(s){const p=s.match(/^(\d*)(?:\.(\d*))?s$/);if(!p)throw new Error(`googleProtobufDurationFromProto3JSON: incorrect value ${s} passed as google.protobuf.Duration`);let g=0,m=0;typeof p[1]=="string"&&p[1].length>0&&(g=parseInt(p[1])),typeof p[2]=="string"&&p[2].length>0&&(m=parseInt(p[2].padEnd(9,"0")));const d={};return g!==0&&(d.seconds=g),m!==0&&(d.nanos=m),d}return duration.googleProtobufDurationFromProto3JSON=t,duration}var timestamp$1={},hasRequiredTimestamp$1;function requireTimestamp$1(){if(hasRequiredTimestamp$1)return timestamp$1;hasRequiredTimestamp$1=1,Object.defineProperty(timestamp$1,"__esModule",{value:!0}),timestamp$1.googleProtobufTimestampFromProto3JSON=timestamp$1.googleProtobufTimestampToProto3JSON=void 0;function e(s){var p;const g=s.seconds,m=new Date(g*1e3).toISOString();let d=(p=s.nanos)===null||p===void 0?void 0:p.toString().padStart(9,"0");for(;d&&d.length>3&&d.endsWith("000");)d=d.slice(0,-3);return m.replace(/(?:\.\d{0,9})/,"."+d)}timestamp$1.googleProtobufTimestampToProto3JSON=e;function t(s){if(!s.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?/))throw new Error(`googleProtobufDurationFromProto3JSON: incorrect value ${s} passed as google.protobuf.Duration`);const m=new Date(s).getTime(),d=Math.floor(m/1e3);let l=0;const a=s.split(".")[1];a&&(l=parseInt(a.slice(0,-1).padEnd(9,"0")));const o={};return d!==0&&(o.seconds=d),l!==0&&(o.nanos=l),o}return timestamp$1.googleProtobufTimestampFromProto3JSON=t,timestamp$1}var wrappers={},hasRequiredWrappers;function requireWrappers(){if(hasRequiredWrappers)return wrappers;hasRequiredWrappers=1,Object.defineProperty(wrappers,"__esModule",{value:!0}),wrappers.wrapperFromProto3JSON=wrappers.wrapperToProto3JSON=void 0;const e=requireBytes(),t=requireUtil$1();function s(g){return Object.prototype.hasOwnProperty.call(g,"value")?Buffer.isBuffer(g.value)||g.value instanceof Uint8Array?(0,e.bytesToProto3JSON)(g.value):typeof g.value=="object"?((0,t.assert)(g.value.constructor.name==="Long",`wrapperToProto3JSON: expected to see a number, a string, a boolean, or a Long, but got ${g.value}`),g.value.toString()):typeof g.value=="number"&&!Number.isFinite(g.value)?g.value.toString():g.value:null}wrappers.wrapperToProto3JSON=s;function p(g,m){if(m===null)return{value:null};if(g===".google.protobuf.BytesValue"){if(typeof m!="string")throw new Error(`numberWrapperFromProto3JSON: expected to get a string for google.protobuf.BytesValue but got ${typeof m}`);return{value:(0,e.bytesFromProto3JSON)(m)}}return{value:m}}return wrappers.wrapperFromProto3JSON=p,wrappers}var fieldmask={},hasRequiredFieldmask;function requireFieldmask(){if(hasRequiredFieldmask)return fieldmask;hasRequiredFieldmask=1,Object.defineProperty(fieldmask,"__esModule",{value:!0}),fieldmask.googleProtobufFieldMaskFromProto3JSON=fieldmask.googleProtobufFieldMaskToProto3JSON=void 0;function e(s){return s.paths.join(",")}fieldmask.googleProtobufFieldMaskToProto3JSON=e;function t(s){return{paths:s.split(",")}}return fieldmask.googleProtobufFieldMaskFromProto3JSON=t,fieldmask}var hasRequiredFromproto3json;function requireFromproto3json(){if(hasRequiredFromproto3json)return fromproto3json;hasRequiredFromproto3json=1,Object.defineProperty(fromproto3json,"__esModule",{value:!0}),fromproto3json.fromProto3JSON=fromproto3json.fromProto3JSONToInternalRepresentation=void 0;const e=requireAny(),t=requireBytes(),s=require_enum(),p=requireValue(),g=requireUtil$1(),m=requireDuration(),d=requireTimestamp$1(),l=requireWrappers(),a=requireFieldmask();function o(v,_){const y=typeof v=="string"?v:(0,g.getFullyQualifiedTypeName)(v);if(typeof v!="string"&&"values"in v)return y===".google.protobuf.NullValue"?"NULL_VALUE":(0,s.resolveEnumValueToString)(v,_);if(typeof v!="string"&&v.resolveAll(),typeof v=="string")return _;if(y===".google.protobuf.Value")return(0,p.googleProtobufValueFromProto3JSON)(_);if(g.wrapperTypes.has(y)){if(_!==null&&typeof _=="object"||Array.isArray(_))throw new Error(`fromProto3JSONToInternalRepresentation: JSON representation for ${y} expects a string, a number, or a boolean, but got ${typeof _}`);return(0,l.wrapperFromProto3JSON)(y,_)}if(_===null)return null;if(y===".google.protobuf.Any")return(0,e.googleProtobufAnyFromProto3JSON)(v.root,_);if(y===".google.protobuf.Struct"){if(typeof _!="object")throw new Error(`fromProto3JSONToInternalRepresentation: google.protobuf.Struct must be an object but got ${typeof _}`);if(Array.isArray(_))throw new Error("fromProto3JSONToInternalRepresentation: google.protobuf.Struct must be an object but got an array");return(0,p.googleProtobufStructFromProto3JSON)(_)}if(y===".google.protobuf.ListValue"){if(!Array.isArray(_))throw new Error(`fromProto3JSONToInternalRepresentation: google.protobuf.ListValue must be an array but got ${typeof _}`);return(0,p.googleProtobufListValueFromProto3JSON)(_)}if(y===".google.protobuf.Duration"){if(typeof _!="string")throw new Error(`fromProto3JSONToInternalRepresentation: google.protobuf.Duration must be a string but got ${typeof _}`);return(0,m.googleProtobufDurationFromProto3JSON)(_)}if(y===".google.protobuf.Timestamp"){if(typeof _!="string")throw new Error(`fromProto3JSONToInternalRepresentation: google.protobuf.Timestamp must be a string but got ${typeof _}`);return(0,d.googleProtobufTimestampFromProto3JSON)(_)}if(y===".google.protobuf.FieldMask"){if(typeof _!="string")throw new Error(`fromProto3JSONToInternalRepresentation: google.protobuf.FieldMask must be a string but got ${typeof _}`);return(0,a.googleProtobufFieldMaskFromProto3JSON)(_)}const w={};for(const[T,I]of Object.entries(_)){const O=v.fields[T];if(!O)continue;const E=O.resolvedType,C=O.type;if(O.repeated)if(I===null)w[T]=[];else{if(!Array.isArray(I))throw new Error(`fromProto3JSONToInternalRepresentation: expected an array for field ${T}`);w[T]=I.map(x=>o(E||C,x))}else if(O.map){const x={};for(const[j,D]of Object.entries(I))x[j]=o(E||C,D);w[T]=x}else if(C.match(/^(?:(?:(?:u?int|fixed)(?:32|64))|float|double)$/)){if(typeof I!="number"&&typeof I!="string")throw new Error(`fromProto3JSONToInternalRepresentation: field ${T} of type ${O.type} cannot contain value ${I}`);w[T]=I}else if(C==="string"){if(typeof I!="string")throw new Error(`fromProto3JSONToInternalRepresentation: field ${T} of type ${O.type} cannot contain value ${I}`);w[T]=I}else if(C==="bool"){if(typeof I!="boolean")throw new Error(`fromProto3JSONToInternalRepresentation: field ${T} of type ${O.type} cannot contain value ${I}`);w[T]=I}else if(C==="bytes"){if(typeof I!="string")throw new Error(`fromProto3JSONToInternalRepresentation: field ${T} of type ${O.type} cannot contain value ${I}`);w[T]=(0,t.bytesFromProto3JSON)(I)}else{(0,g.assert)(E!==null,`Expected to be able to resolve type for field ${O.name}`);const x=o(E,I);w[T]=x}}return w}fromproto3json.fromProto3JSONToInternalRepresentation=o;function h(v,_){const y=o(v,_);return y===null?null:((0,g.assert)(typeof y=="object"&&!Array.isArray(y),`fromProto3JSON: expected an object, not ${_}`),v.fromObject(y))}return fromproto3json.fromProto3JSON=h,fromproto3json}var hasRequiredAny;function requireAny(){if(hasRequiredAny)return any;hasRequiredAny=1,Object.defineProperty(any,"__esModule",{value:!0}),any.googleProtobufAnyFromProto3JSON=any.googleProtobufAnyToProto3JSON=void 0;const e=requireFromproto3json(),t=requireToproto3json(),s=new Set(["google.protobuf.Any","google.protobuf.Duration","google.protobuf.FieldMask","google.protobuf.ListValue","google.protobuf.Struct","google.protobuf.Timestamp","google.protobuf.Value"]);function p(m,d){const l=m.type_url.replace(/^.*\//,"");let a;try{a=m.$type.root.lookupType(l)}catch(v){throw new Error(`googleProtobufAnyToProto3JSON: cannot find type ${l}: ${v}`)}const o=a.decode(m.value),h=(0,t.toProto3JSON)(o,d);return s.has(l)?{"@type":m.type_url,value:h}:(h["@type"]=m.type_url,h)}any.googleProtobufAnyToProto3JSON=p;function g(m,d){if(d===null||typeof d!="object"||Array.isArray(d))throw new Error("googleProtobufAnyFromProto3JSON: must be an object to decode google.protobuf.Any");const l=d["@type"];if(!l||typeof l!="string")throw new Error("googleProtobufAnyFromProto3JSON: JSON serialization of google.protobuf.Any must contain @type field");const a=l.replace(/^.*\//,"");let o;try{o=m.lookupType(a)}catch(T){throw new Error(`googleProtobufAnyFromProto3JSON: cannot find type ${a}: ${T}`)}let h=d;if(s.has(a)){if(!("value"in d))throw new Error(`googleProtobufAnyFromProto3JSON: JSON representation of google.protobuf.Any with type ${a} must contain the value field`);h=d.value}const v=(0,e.fromProto3JSON)(o,h);if(v===null)return{type_url:l,value:null};const _=o.encode(v).finish(),w=Buffer.from(_,0,_.byteLength).toString("base64");return{type_url:l,value:w}}return any.googleProtobufAnyFromProto3JSON=g,any}var hasRequiredToproto3json;function requireToproto3json(){if(hasRequiredToproto3json)return toproto3json;hasRequiredToproto3json=1,Object.defineProperty(toproto3json,"__esModule",{value:!0}),toproto3json.toProto3JSON=void 0;const e=requireAny(),t=requireBytes(),s=requireUtil$1(),p=require_enum(),g=requireValue(),m=requireDuration(),d=requireTimestamp$1(),l=requireWrappers(),a=requireFieldmask();function o(v){var _;if(typeof v=="object"){if(((_=v?.constructor)===null||_===void 0?void 0:_.name)==="Long")return v.toString();throw new Error(`toProto3JSON: don't know how to convert value ${v}`)}return v}function h(v,_){const y=v.$type;if(!y)throw new Error("Cannot serialize object to proto3 JSON since its .$type is unknown. Use Type.fromObject(obj) before calling toProto3JSON.");y.resolveAll();const w=(0,s.getFullyQualifiedTypeName)(y);if(w===".google.protobuf.Any")return(0,e.googleProtobufAnyToProto3JSON)(v,_);if(w===".google.protobuf.Value")return(0,g.googleProtobufValueToProto3JSON)(v);if(w===".google.protobuf.Struct")return(0,g.googleProtobufStructToProto3JSON)(v);if(w===".google.protobuf.ListValue")return(0,g.googleProtobufListValueToProto3JSON)(v);if(w===".google.protobuf.Duration")return(0,m.googleProtobufDurationToProto3JSON)(v);if(w===".google.protobuf.Timestamp")return(0,d.googleProtobufTimestampToProto3JSON)(v);if(w===".google.protobuf.FieldMask")return(0,a.googleProtobufFieldMaskToProto3JSON)(v);if(s.wrapperTypes.has(w))return(0,l.wrapperToProto3JSON)(v);const T={};for(const[I,O]of Object.entries(v)){const E=y.fields[I],C=E.resolvedType,x=C?(0,s.getFullyQualifiedTypeName)(C):null;if(O===null){T[I]=null;continue}if(Array.isArray(O)){if(O.length===0)continue;T[I]=O.map(C?j=>h(j,_):o);continue}if(E.map){const j={};for(const[D,k]of Object.entries(O))j[D]=C?h(k,_):o(k);T[I]=j;continue}if(x===".google.protobuf.NullValue"){T[I]=null;continue}if(C&&"values"in C&&O!==null){_?.numericEnums?T[I]=(0,p.resolveEnumValueToNumber)(C,O):T[I]=(0,p.resolveEnumValueToString)(C,O);continue}if(C){T[I]=h(O,_);continue}if(typeof O=="string"||typeof O=="number"||typeof O=="boolean"||O===null){if(typeof O=="number"&&!Number.isFinite(O)){T[I]=O.toString();continue}T[I]=O;continue}if(Buffer.isBuffer(O)||O instanceof Uint8Array){T[I]=(0,t.bytesToProto3JSON)(O);continue}T[I]=o(O)}return T}return toproto3json.toProto3JSON=h,toproto3json}var hasRequiredSrc$1;function requireSrc$1(){return hasRequiredSrc$1||(hasRequiredSrc$1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fromProto3JSON=e.toProto3JSON=void 0;var t=requireToproto3json();Object.defineProperty(e,"toProto3JSON",{enumerable:!0,get:function(){return t.toProto3JSON}});var s=requireFromproto3json();Object.defineProperty(e,"fromProto3JSON",{enumerable:!0,get:function(){return s.fromProto3JSON}})})(src)),src}const nested$6={google:{nested:{protobuf:{nested:{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}},Duration:{fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}},rpc:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/rpc/errdetails;errdetails",java_multiple_files:!0,java_outer_classname:"ErrorDetailsProto",java_package:"com.google.rpc",objc_class_prefix:"RPC"},nested:{Status:{fields:{code:{type:"int32",id:1},message:{type:"string",id:2},details:{rule:"repeated",type:"google.protobuf.Any",id:3}}},RetryInfo:{fields:{retryDelay:{type:"google.protobuf.Duration",id:1}}},DebugInfo:{fields:{stackEntries:{rule:"repeated",type:"string",id:1},detail:{type:"string",id:2}}},QuotaFailure:{fields:{violations:{rule:"repeated",type:"Violation",id:1}},nested:{Violation:{fields:{subject:{type:"string",id:1},description:{type:"string",id:2}}}}},ErrorInfo:{fields:{reason:{type:"string",id:1},domain:{type:"string",id:2},metadata:{keyType:"string",type:"string",id:3}}},PreconditionFailure:{fields:{violations:{rule:"repeated",type:"Violation",id:1}},nested:{Violation:{fields:{type:{type:"string",id:1},subject:{type:"string",id:2},description:{type:"string",id:3}}}}},BadRequest:{fields:{fieldViolations:{rule:"repeated",type:"FieldViolation",id:1}},nested:{FieldViolation:{fields:{field:{type:"string",id:1},description:{type:"string",id:2}}}}},RequestInfo:{fields:{requestId:{type:"string",id:1},servingData:{type:"string",id:2}}},ResourceInfo:{fields:{resourceType:{type:"string",id:1},resourceName:{type:"string",id:2},owner:{type:"string",id:3},description:{type:"string",id:4}}},Help:{fields:{links:{rule:"repeated",type:"Link",id:1}},nested:{Link:{fields:{description:{type:"string",id:1},url:{type:"string",id:2}}}}},LocalizedMessage:{fields:{locale:{type:"string",id:1},message:{type:"string",id:2}}}}}}}},require$$4$1={nested:nested$6};var hasRequiredGoogleError;function requireGoogleError(){if(hasRequiredGoogleError)return googleError;hasRequiredGoogleError=1,Object.defineProperty(googleError,"__esModule",{value:!0}),googleError.GoogleErrorDecoder=googleError.GoogleError=void 0;const e=requireStatus(),t=requireProtobufjs(),s=requireSrc$1(),p=requireFallback();class g extends Error{static parseGRPCStatusDetails(l){const a=new m;try{if(l.metadata&&l.metadata.get("grpc-status-details-bin")){const o=a.decodeGRPCStatusDetails(l.metadata.get("grpc-status-details-bin"));o&&o.details&&o.details.length>0&&(l.statusDetails=o.details),o&&o.errorInfo&&(l.reason=o.errorInfo.reason,l.domain=o.errorInfo.domain,l.errorInfoMetadata=o.errorInfo.metadata)}}catch{}return l}static parseHttpError(l){Array.isArray(l)&&(l=l.find(v=>"error"in v)),l.error||(l.error={},Object.keys(l).filter(v=>v!=="error").forEach(v=>{l.error[v]=l[v],delete l[v]}));const a=new m,o=a.decodeHTTPError(l.error),h=Object.assign(new g(l.error.message),o);if(l.error.code?h.code=(0,e.rpcCodeFromHttpStatusCode)(l.error.code):delete h.code,h.details)try{const v=a.decodeHttpStatusDetails(h.details);v&&v.details&&v.details.length>0&&(h.statusDetails=v.details),v&&v.errorInfo&&(h.reason=v.errorInfo.reason,h.domain=v.errorInfo.domain,h.errorInfoMetadata=v.errorInfo.metadata)}catch{}return h}}googleError.GoogleError=g;class m{constructor(){const l=require$$4$1;this.root=t.Root.fromJSON(l),this.anyType=this.root.lookupType("google.protobuf.Any"),this.statusType=this.root.lookupType("google.rpc.Status")}decodeProtobufAny(l){const a=l.type_url.match(/^type.googleapis.com\/(.*)/);if(!a)throw new Error(`Unknown type encoded in google.protobuf.any: ${l.type_url}`);const o=a[1],h=this.root.lookupType(o);if(!h)throw new Error(`Cannot lookup type ${o}`);return h.decode(l.value)}decodeRpcStatus(l){const a=new Uint8Array(l),o=this.statusType.decode(a),h=[];let v;for(const y of o.details)try{const w=this.decodeProtobufAny(y);h.push(w),y.type_url==="type.googleapis.com/google.rpc.ErrorInfo"&&(v=w)}catch{}return{code:o.code,message:o.message,statusDetails:h,reason:v?.reason,domain:v?.domain,errorInfoMetadata:v?.metadata}}callErrorFromStatus(l){return l.message=`${l.code} ${e.Status[l.code]}: ${l.message}`,Object.assign(new g(l.message),l)}decodeErrorFromBuffer(l){return this.callErrorFromStatus(this.decodeRpcStatus(l))}decodeGRPCStatusDetails(l){const a=[];let o;return l.forEach(v=>{const _=new Uint8Array(v),y=this.statusType.decode(_);for(const w of y.details)try{const T=this.decodeProtobufAny(w);a.push(T),w.type_url==="type.googleapis.com/google.rpc.ErrorInfo"&&(o=T)}catch{}}),{details:a,errorInfo:o}}decodeHTTPError(l){const a=s.fromProto3JSON(this.statusType,l);if(!a)throw new Error(`Received error message ${l}, but failed to serialize as proto3 message`);return this.statusType.toObject(a,p.defaultToObjectOptions)}decodeHttpStatusDetails(l){const a=[];let o;for(const h of l)try{const v=this.decodeProtobufAny(h);a.push(v),h.type_url==="type.googleapis.com/google.rpc.ErrorInfo"&&(o=v)}catch{}return{details:a,errorInfo:o}}}return googleError.GoogleErrorDecoder=m,googleError}var hasRequiredCall;function requireCall(){if(hasRequiredCall)return call;hasRequiredCall=1,Object.defineProperty(call,"__esModule",{value:!0}),call.OngoingCallPromise=call.OngoingCall=void 0;const e=requireStatus(),t=requireGoogleError();class s{constructor(m){this.callback=m,this.completed=!1}cancel(){if(!this.completed)if(this.completed=!0,this.cancelFunc)this.cancelFunc();else{const m=new t.GoogleError("cancelled");m.code=e.Status.CANCELLED,this.callback(m)}}call(m,d){if(this.completed)return;const l=m(d,(a,o,h,v)=>{this.completed=!0,setImmediate(this.callback,a,o,h,v)});l instanceof Promise&&l.catch(a=>{setImmediate(this.callback,new t.GoogleError(a),null,null,null)}),this.cancelFunc=()=>l.cancel()}}call.OngoingCall=s;class p extends s{constructor(){let m,d;const l=(o,h,v,_)=>{if(o)o.metadata?d(t.GoogleError.parseGRPCStatusDetails(o)):d(o);else if(h!==void 0)m([h,v||null,_||null]);else throw new t.GoogleError("Neither error nor response are defined")},a=new Promise((o,h)=>{m=o,d=h});super(l),this.promise=a,this.promise.cancel=()=>{this.cancel()}}}return call.OngoingCallPromise=p,call}var hasRequiredNormalApiCaller;function requireNormalApiCaller(){if(hasRequiredNormalApiCaller)return normalApiCaller;hasRequiredNormalApiCaller=1,Object.defineProperty(normalApiCaller,"__esModule",{value:!0}),normalApiCaller.NormalApiCaller=void 0;const e=requireCall();class t{init(p){return p?new e.OngoingCall(p):new e.OngoingCallPromise}wrap(p){return p}call(p,g,m,d){d.call(p,g)}fail(p,g){p.callback(g)}result(p){return p.promise}}return normalApiCaller.NormalApiCaller=t,normalApiCaller}var hasRequiredApiCaller;function requireApiCaller(){if(hasRequiredApiCaller)return apiCaller;hasRequiredApiCaller=1,Object.defineProperty(apiCaller,"__esModule",{value:!0}),apiCaller.createAPICaller=t;const e=requireNormalApiCaller();function t(s,p){return p?p.getApiCaller(s):new e.NormalApiCaller}return apiCaller}var retries={},timeout={},hasRequiredTimeout;function requireTimeout(){if(hasRequiredTimeout)return timeout;hasRequiredTimeout=1,Object.defineProperty(timeout,"__esModule",{value:!0}),timeout.addTimeoutArg=e;function e(t,s,p,g){return(m,d)=>{const l=new Date,a=p.options||{};a.deadline=new Date(l.getTime()+s);const o=p.metadataBuilder?p.metadataBuilder(g,p.headers||{}):null;return t(m,o,a,d)}}return timeout}var hasRequiredRetries;function requireRetries(){if(hasRequiredRetries)return retries;hasRequiredRetries=1,Object.defineProperty(retries,"__esModule",{value:!0}),retries.retryable=p;const e=requireStatus(),t=requireGoogleError(),s=requireTimeout();function p(g,m,d,l){const a=m.backoffSettings.retryDelayMultiplier,o=m.backoffSettings.maxRetryDelayMillis,h=m.backoffSettings.rpcTimeoutMultiplier,v=m.backoffSettings.maxRpcTimeoutMillis;let _=m.backoffSettings.initialRetryDelayMillis,y=m.backoffSettings.initialRpcTimeoutMillis;return(w,T)=>{let I,O,E=new Date,C;m.backoffSettings.totalTimeoutMillis&&(C=E.getTime()+m.backoffSettings.totalTimeoutMillis);let x=0;const j=m.backoffSettings.maxRetries;function D(k){if(O=null,C&&E.getTime()>=C){const $=new t.GoogleError(`Total timeout of API ${l} exceeded ${m.backoffSettings.totalTimeoutMillis} milliseconds ${k?`retrying error ${k} `:""} before any response was received.`);$.code=e.Status.DEADLINE_EXCEEDED,T($);return}if(x&&x>=j){const $=new t.GoogleError("Exceeded maximum number of retries "+(k?`retrying error ${k} `:"")+"before any response was received");$.code=e.Status.DEADLINE_EXCEEDED,T($);return}x++;let q=k;I=(0,s.addTimeoutArg)(g,y,d)(w,($,W,K,z)=>{if($&&$.code!==4&&(q=$),!$){T(null,W,K,z);return}if(I=null,m.retryCodes.length>0&&m.retryCodes.indexOf($.code)<0)$.note="Exception occurred in retry method that was not classified as transient",T($);else{const Q=Math.random()*_;O=setTimeout(()=>{E=new Date,_=Math.min(_*a,o);const Y=y&&h?y*h:0,te=v||0,ae=C?C-E.getTime():0;y=Math.min(Y,te,ae),D(q)},Q)}}),I instanceof Promise&&I.catch($=>{T(new t.GoogleError($))})}if(j&&C){const k=new t.GoogleError("Cannot set both totalTimeoutMillis and maxRetries in backoffSettings.");k.code=e.Status.INVALID_ARGUMENT,T(k)}else D();return{cancel(){if(O&&clearTimeout(O),I)I.cancel();else{const k=new t.GoogleError("cancelled");k.code=e.Status.CANCELLED,T(k)}}}}}return retries}var streamingApiCaller={},streaming={},hasRequiredStreaming;function requireStreaming(){if(hasRequiredStreaming)return streaming;hasRequiredStreaming=1,Object.defineProperty(streaming,"__esModule",{value:!0}),streaming.StreamProxy=streaming.StreamType=void 0;const e=requireGax(),t=requireGoogleError(),s=requireStatus(),p=require$$1$3,g=requireDuplexify(),m=requireRetryRequest();var d;(function(o){o[o.SERVER_STREAMING=1]="SERVER_STREAMING",o[o.CLIENT_STREAMING=2]="CLIENT_STREAMING",o[o.BIDI_STREAMING=3]="BIDI_STREAMING"})(d||(streaming.StreamType=d={}));const l=null;class a extends g{constructor(h,v,_,y){super(void 0,void 0,{objectMode:!0,readable:h!==d.CLIENT_STREAMING,writable:h!==d.SERVER_STREAMING}),this.type=h,this._callback=v,this._isCancelCalled=!1,this._responseHasSent=!1,this.rest=_,this.gaxServerStreamingRetries=y}shouldRetryRequest(h,v){const _=t.GoogleError.parseGRPCStatusDetails(h);let y=this.defaultShouldRetry(_,v);return v.shouldRetryFn&&(y=v.shouldRetryFn(_)),y}cancel(){this.stream?this.stream.cancel():this._isCancelCalled=!0}throwIfMaxRetriesOrTotalTimeoutExceeded(h,v,_,y,w,T){const O=new Date().getTime();if(w&&(_===0||_<0||h&&O>=h)){const E=new t.GoogleError(`Total timeout of API exceeded ${w} milliseconds ${y?`retrying error ${y} `:""} before any response was received.`);throw E.code=s.Status.DEADLINE_EXCEEDED,E}if(v===0){const E=y;throw E.note="Max retries is set to zero.",E}if(T&&T>=v){const E=new t.GoogleError("Exceeded maximum number of retries "+(y?`retrying error ${y} `:"")+"before any response was received");throw E.code=s.Status.DEADLINE_EXCEEDED,E}}eventForwardHelper(h){["metadata","response","status"].forEach(_=>{h.on(_,this.emit.bind(this,_))})}statusMetadataHelper(h){h.on("status",()=>{this._responseHasSent||h.emit("response",{code:200,details:"",message:"OK"})}),h.on("metadata",v=>{h.emit("response",{code:200,details:"",message:"OK",metadata:v}),this._responseHasSent=!0})}forwardEvents(h){this.eventForwardHelper(h),this.statusMetadataHelper(h),h.on("error",v=>{t.GoogleError.parseGRPCStatusDetails(v)})}defaultShouldRetry(h,v){return!(v.retryCodes.length>0&&v.retryCodes.indexOf(h.code)<0||v.retryCodes.length===0)}setStream(h,v,_={},y){if(this.apiCall=h,this.argument=v,this.type===d.SERVER_STREAMING){if(this.rest){const T=h(v,this._callback);this.stream=T,this.setReadable(T)}else if(this.gaxServerStreamingRetries){const T=()=>{if(this._isCancelCalled){this.stream&&this.stream.cancel();return}return h(v,this._callback)},I=this.newStreamingRetryRequest({request:T,retry:y});this.stream=I,this.eventForwardHelper(I),this.setReadable(I)}else{const T=m(null,{objectMode:!0,request:()=>{if(this._isCancelCalled){this.stream&&this.stream.cancel();return}const I=h(v,this._callback);return this.stream=I,this.forwardEvents(I),I},retries:_.retries,currentRetryAttempt:_.currentRetryAttempt,noResponseRetries:_.noResponseRetries,shouldRetryFn:_.shouldRetryFn});this.setReadable(T)}return}const w=h(v,this._callback);this.stream=w,this.forwardEvents(w),this.type===d.CLIENT_STREAMING&&this.setWritable(w),this.type===d.BIDI_STREAMING&&(this.setReadable(w),this.setWritable(w)),this._isCancelCalled&&this.stream&&this.stream.cancel()}newStreamingRetryRequest(h){var v,_,y,w;const T=(v=h.retry)!==null&&v!==void 0?v:{retryCodes:[],backoffSettings:(0,e.createDefaultBackoffSettings)()};let I=0;const O=new p.PassThrough({objectMode:!0}),E=(_=T.backoffSettings.totalTimeoutMillis)!==null&&_!==void 0?_:void 0,C=(y=T.backoffSettings.maxRetries)!==null&&y!==void 0?y:void 0;let x=(w=T.backoffSettings.initialRpcTimeoutMillis)!==null&&w!==void 0?w:void 0,j=new Date,D=0;E&&(D=j.getTime()+E);const k=(G,$)=>{const W=t.GoogleError.parseGRPCStatusDetails(G);return W.note="Exception occurred in retry method that was not classified as transient",$.destroy(),O.destroy(W),O},q=G=>{let $=!1,W=!1,K=!1;const z=G.request(l);return O.cancel=z.cancel,["metadata","response","status"].forEach(Y=>{z.on(Y,O.emit.bind(O,Y))}),this.statusMetadataHelper(z),z.on("data",Y=>{I=0,this.emit.bind(this,"data")(Y)}),z.on("status",()=>(W=!0,$&&O.end(),O)),z.on("end",()=>(K||($=!0,W&&O.end()),O)),z.on("error",Y=>{if(K=!0,typeof C!==void 0||typeof E!==void 0)if(this.shouldRetryRequest(Y,T))if(C&&E){const te=new t.GoogleError("Cannot set both totalTimeoutMillis and maxRetries in backoffSettings.");return te.code=s.Status.INVALID_ARGUMENT,z.destroy(),O.destroy(te),O}else{try{this.throwIfMaxRetriesOrTotalTimeoutExceeded(D,C,x,Y,E,I)}catch(Ee){const fe=t.GoogleError.parseGRPCStatusDetails(Ee);return z.destroy(),O.destroy(fe),O}const te=T.backoffSettings.retryDelayMultiplier,ae=T.backoffSettings.maxRetryDelayMillis,ue=T.backoffSettings.rpcTimeoutMultiplier,ee=T.backoffSettings.maxRpcTimeoutMillis;let oe=T.backoffSettings.initialRetryDelayMillis;const de=Math.random()*oe;return void setTimeout(()=>{if(x){j=new Date,oe=Math.min(oe*te,ae);const Se=x&&ue?x*ue:0,be=ee||0,Oe=D?D-j.getTime():0;x=Math.min(Se,be,Oe)}I++;let Ee=this.argument;T.getResumptionRequestFn!==void 0&&(Ee=T.getResumptionRequestFn(Ee));const fe=()=>{if(this._isCancelCalled){this.stream&&this.stream.cancel();return}return this.apiCall(Ee,this._callback)};return h.request=fe,q(h)},de)}else return k(Y,z);else return k(Y,z)}),O};return q(h)}}return streaming.StreamProxy=a,streaming}var hasRequiredStreamingApiCaller;function requireStreamingApiCaller(){if(hasRequiredStreamingApiCaller)return streamingApiCaller;hasRequiredStreamingApiCaller=1,Object.defineProperty(streamingApiCaller,"__esModule",{value:!0}),streamingApiCaller.StreamingApiCaller=void 0;const e=requireWarnings(),t=requireStreaming();class s{constructor(g){this.descriptor=g}init(g){return new t.StreamProxy(this.descriptor.type,g,this.descriptor.rest,this.descriptor.gaxStreamingRetries)}wrap(g){switch(this.descriptor.type){case t.StreamType.SERVER_STREAMING:return(m,d,l)=>g(m,d,l);case t.StreamType.CLIENT_STREAMING:return(m,d,l,a)=>g(d,l,a);case t.StreamType.BIDI_STREAMING:return(m,d,l)=>g(d,l);default:(0,e.warn)("streaming_wrap_unknown_stream_type",`Unknown stream type: ${this.descriptor.type}`)}return g}call(g,m,d,l){l.setStream(g,m,d.retryRequestOptions,d.retry)}fail(g,m){g.emit("error",m)}result(g){return g}}return streamingApiCaller.StreamingApiCaller=s,streamingApiCaller}var hasRequiredCreateApiCall;function requireCreateApiCall(){if(hasRequiredCreateApiCall)return createApiCall;hasRequiredCreateApiCall=1,Object.defineProperty(createApiCall,"__esModule",{value:!0}),createApiCall.createApiCall=d;const e=requireApiCaller(),t=requireGax(),s=requireRetries(),p=requireTimeout(),g=requireStreamingApiCaller(),m=requireWarnings();function d(l,a,o,h){const v=typeof l=="function"?Promise.resolve(l):l,_=(0,e.createAPICaller)(a,o);return(y,w,T)=>{var I,O;let E=_,C;if(E instanceof g.StreamingApiCaller){const j=(O=(I=E.descriptor)===null||I===void 0?void 0:I.gaxStreamingRetries)!==null&&O!==void 0?O:!1,D=(0,t.convertRetryOptions)(w,j);C=a.merge(D)}else C=a.merge(w);a.isBundling&&!C.isBundling&&(E=(0,e.createAPICaller)(a,void 0));const x=E.init(T);return v.then(j=>{var D,k,q;j=E.wrap(j);const G=(D=E.descriptor)===null||D===void 0?void 0:D.streaming,$=C.retry;if(G&&$&&($.retryCodes.length>0&&$.shouldRetryFn&&((0,m.warn)("either_retrycodes_or_shouldretryfn","Only one of retryCodes or shouldRetryFn may be defined. Ignoring retryCodes."),$.retryCodes=[]),!E.descriptor.gaxStreamingRetries&&$.getResumptionRequestFn))throw new Error("getResumptionRequestFn can only be used when gaxStreamingRetries is set to true.");if(!G&&$){if($.shouldRetryFn)throw new Error("Using a function to determine retry eligibility is only supported with server streaming calls");if($.getResumptionRequestFn)throw new Error("Resumption strategy can only be used with server streaming retries");if($.retryCodes&&$.retryCodes.length>0)return(k=(q=$.backoffSettings).initialRpcTimeoutMillis)!==null&&k!==void 0||(q.initialRpcTimeoutMillis=C.timeout),(0,s.retryable)(j,C.retry,C.otherArgs,C.apiName)}return(0,p.addTimeoutArg)(j,C.timeout,C.otherArgs)}).then(j=>{E.call(j,y,C,x)}).catch(j=>{E.fail(x,j)}),E.result(x)}}return createApiCall}var descriptor={},longRunningDescriptor={},longRunningApiCaller={},longrunning={},operations={exports:{}},minimal,hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,minimal=requireIndexMinimal()),minimal}var hasRequiredOperations;function requireOperations(){return hasRequiredOperations||(hasRequiredOperations=1,(function(e){(t=>{typeof commonjsRequire=="function"&&e&&e.exports&&(e.exports=t(requireMinimal()))})(function(t){var s,p,g,m,d=t.Reader,l=t.Writer,a=t.util,o=t.roots.operations_protos||(t.roots.operations_protos={});function h(u,P,M){t.rpc.Service.call(this,u,P,M)}function v(u){if(u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function _(u){if(u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function y(u){if(u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function w(u){if(this.operations=[],u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function T(u){if(u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function I(u){if(u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function O(u){if(u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function E(u){if(u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function C(u){if(this.rules=[],u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function x(u){if(this.additionalBindings=[],u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function j(u){if(u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function D(u){if(this.file=[],u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function k(u){if(this.dependency=[],this.publicDependency=[],this.weakDependency=[],this.messageType=[],this.enumType=[],this.service=[],this.extension=[],u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function q(u){if(this.field=[],this.extension=[],this.nestedType=[],this.enumType=[],this.extensionRange=[],this.oneofDecl=[],this.reservedRange=[],this.reservedName=[],u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function G(u){if(u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function $(u){if(u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function W(u){if(this.uninterpretedOption=[],u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function K(u){if(u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function z(u){if(u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function Q(u){if(this.value=[],this.reservedRange=[],this.reservedName=[],u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function Y(u){if(u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function te(u){if(u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function ae(u){if(this.method=[],u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function ue(u){if(u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function ee(u){if(this.uninterpretedOption=[],u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function oe(u){if(this.uninterpretedOption=[],u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function de(u){if(this.uninterpretedOption=[],u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function he(u){if(this.uninterpretedOption=[],u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function Ee(u){if(this.uninterpretedOption=[],u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function fe(u){if(this.uninterpretedOption=[],u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function Se(u){if(this.uninterpretedOption=[],u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function be(u){if(this.uninterpretedOption=[],this[".google.api.methodSignature"]=[],u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function Oe(u){if(this.name=[],u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function ge(u){if(u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function J(u){if(this.location=[],u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function c(u){if(this.path=[],this.span=[],this.leadingDetachedComments=[],u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function N(u){if(this.annotation=[],u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function A(u){if(this.path=[],u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function V(u){if(u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function ne(u){if(u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function ce(u){if(u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}function ie(u){if(this.details=[],u)for(var P=Object.keys(u),M=0;M<P.length;++M)u[P[M]]!=null&&(this[P[M]]=u[P[M]])}return o.google=((m={}).longrunning=((p={}).Operations=(((h.prototype=Object.create(t.rpc.Service.prototype)).constructor=h).create=function(u,P,M){return new this(u,P,M)},Object.defineProperty(h.prototype.listOperations=function u(P,M){return this.rpcCall(u,o.google.longrunning.ListOperationsRequest,o.google.longrunning.ListOperationsResponse,P,M)},"name",{value:"ListOperations"}),Object.defineProperty(h.prototype.getOperation=function u(P,M){return this.rpcCall(u,o.google.longrunning.GetOperationRequest,o.google.longrunning.Operation,P,M)},"name",{value:"GetOperation"}),Object.defineProperty(h.prototype.deleteOperation=function u(P,M){return this.rpcCall(u,o.google.longrunning.DeleteOperationRequest,o.google.protobuf.Empty,P,M)},"name",{value:"DeleteOperation"}),Object.defineProperty(h.prototype.cancelOperation=function u(P,M){return this.rpcCall(u,o.google.longrunning.CancelOperationRequest,o.google.protobuf.Empty,P,M)},"name",{value:"CancelOperation"}),Object.defineProperty(h.prototype.waitOperation=function u(P,M){return this.rpcCall(u,o.google.longrunning.WaitOperationRequest,o.google.longrunning.Operation,P,M)},"name",{value:"WaitOperation"}),h),p.Operation=(v.prototype.name="",v.prototype.metadata=null,v.prototype.done=!1,v.prototype.error=null,v.prototype.response=null,Object.defineProperty(v.prototype,"result",{get:a.oneOfGetter(g=["error","response"]),set:a.oneOfSetter(g)}),v.create=function(u){return new v(u)},v.encode=function(u,P){return P=P||l.create(),u.name!=null&&Object.hasOwnProperty.call(u,"name")&&P.uint32(10).string(u.name),u.metadata!=null&&Object.hasOwnProperty.call(u,"metadata")&&o.google.protobuf.Any.encode(u.metadata,P.uint32(18).fork()).ldelim(),u.done!=null&&Object.hasOwnProperty.call(u,"done")&&P.uint32(24).bool(u.done),u.error!=null&&Object.hasOwnProperty.call(u,"error")&&o.google.rpc.Status.encode(u.error,P.uint32(34).fork()).ldelim(),u.response!=null&&Object.hasOwnProperty.call(u,"response")&&o.google.protobuf.Any.encode(u.response,P.uint32(42).fork()).ldelim(),P},v.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},v.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.longrunning.Operation;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.name=u.string();break;case 2:n.metadata=o.google.protobuf.Any.decode(u,u.uint32());break;case 3:n.done=u.bool();break;case 4:n.error=o.google.rpc.Status.decode(u,u.uint32());break;case 5:n.response=o.google.protobuf.Any.decode(u,u.uint32());break;default:u.skipType(7&L)}}return n},v.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},v.verify=function(u){if(typeof u!="object"||u===null)return"object expected";var P,M={};if(u.name!=null&&u.hasOwnProperty("name")&&!a.isString(u.name))return"name: string expected";if(u.metadata!=null&&u.hasOwnProperty("metadata")&&(P=o.google.protobuf.Any.verify(u.metadata)))return"metadata."+P;if(u.done!=null&&u.hasOwnProperty("done")&&typeof u.done!="boolean")return"done: boolean expected";if(u.error!=null&&u.hasOwnProperty("error")&&(M.result=1,P=o.google.rpc.Status.verify(u.error)))return"error."+P;if(u.response!=null&&u.hasOwnProperty("response")){if(M.result===1)return"result: multiple values";if(M.result=1,P=o.google.protobuf.Any.verify(u.response))return"response."+P}return null},v.fromObject=function(u){if(u instanceof o.google.longrunning.Operation)return u;var P=new o.google.longrunning.Operation;if(u.name!=null&&(P.name=String(u.name)),u.metadata!=null){if(typeof u.metadata!="object")throw TypeError(".google.longrunning.Operation.metadata: object expected");P.metadata=o.google.protobuf.Any.fromObject(u.metadata)}if(u.done!=null&&(P.done=!!u.done),u.error!=null){if(typeof u.error!="object")throw TypeError(".google.longrunning.Operation.error: object expected");P.error=o.google.rpc.Status.fromObject(u.error)}if(u.response!=null){if(typeof u.response!="object")throw TypeError(".google.longrunning.Operation.response: object expected");P.response=o.google.protobuf.Any.fromObject(u.response)}return P},v.toObject=function(u,P){var M={};return(P=P||{}).defaults&&(M.name="",M.metadata=null,M.done=!1),u.name!=null&&u.hasOwnProperty("name")&&(M.name=u.name),u.metadata!=null&&u.hasOwnProperty("metadata")&&(M.metadata=o.google.protobuf.Any.toObject(u.metadata,P)),u.done!=null&&u.hasOwnProperty("done")&&(M.done=u.done),u.error!=null&&u.hasOwnProperty("error")&&(M.error=o.google.rpc.Status.toObject(u.error,P),P.oneofs)&&(M.result="error"),u.response!=null&&u.hasOwnProperty("response")&&(M.response=o.google.protobuf.Any.toObject(u.response,P),P.oneofs)&&(M.result="response"),M},v.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},v),p.GetOperationRequest=(_.prototype.name="",_.create=function(u){return new _(u)},_.encode=function(u,P){return P=P||l.create(),u.name!=null&&Object.hasOwnProperty.call(u,"name")&&P.uint32(10).string(u.name),P},_.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},_.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.longrunning.GetOperationRequest;u.pos<M;){var L=u.uint32();L>>>3==1?n.name=u.string():u.skipType(7&L)}return n},_.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},_.verify=function(u){return typeof u!="object"||u===null?"object expected":u.name!=null&&u.hasOwnProperty("name")&&!a.isString(u.name)?"name: string expected":null},_.fromObject=function(u){var P;return u instanceof o.google.longrunning.GetOperationRequest?u:(P=new o.google.longrunning.GetOperationRequest,u.name!=null&&(P.name=String(u.name)),P)},_.toObject=function(u,P){var M={};return(P=P||{}).defaults&&(M.name=""),u.name!=null&&u.hasOwnProperty("name")&&(M.name=u.name),M},_.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},_),p.ListOperationsRequest=(y.prototype.name="",y.prototype.filter="",y.prototype.pageSize=0,y.prototype.pageToken="",y.create=function(u){return new y(u)},y.encode=function(u,P){return P=P||l.create(),u.filter!=null&&Object.hasOwnProperty.call(u,"filter")&&P.uint32(10).string(u.filter),u.pageSize!=null&&Object.hasOwnProperty.call(u,"pageSize")&&P.uint32(16).int32(u.pageSize),u.pageToken!=null&&Object.hasOwnProperty.call(u,"pageToken")&&P.uint32(26).string(u.pageToken),u.name!=null&&Object.hasOwnProperty.call(u,"name")&&P.uint32(34).string(u.name),P},y.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},y.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.longrunning.ListOperationsRequest;u.pos<M;){var L=u.uint32();switch(L>>>3){case 4:n.name=u.string();break;case 1:n.filter=u.string();break;case 2:n.pageSize=u.int32();break;case 3:n.pageToken=u.string();break;default:u.skipType(7&L)}}return n},y.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},y.verify=function(u){return typeof u!="object"||u===null?"object expected":u.name!=null&&u.hasOwnProperty("name")&&!a.isString(u.name)?"name: string expected":u.filter!=null&&u.hasOwnProperty("filter")&&!a.isString(u.filter)?"filter: string expected":u.pageSize!=null&&u.hasOwnProperty("pageSize")&&!a.isInteger(u.pageSize)?"pageSize: integer expected":u.pageToken!=null&&u.hasOwnProperty("pageToken")&&!a.isString(u.pageToken)?"pageToken: string expected":null},y.fromObject=function(u){var P;return u instanceof o.google.longrunning.ListOperationsRequest?u:(P=new o.google.longrunning.ListOperationsRequest,u.name!=null&&(P.name=String(u.name)),u.filter!=null&&(P.filter=String(u.filter)),u.pageSize!=null&&(P.pageSize=0|u.pageSize),u.pageToken!=null&&(P.pageToken=String(u.pageToken)),P)},y.toObject=function(u,P){var M={};return(P=P||{}).defaults&&(M.filter="",M.pageSize=0,M.pageToken="",M.name=""),u.filter!=null&&u.hasOwnProperty("filter")&&(M.filter=u.filter),u.pageSize!=null&&u.hasOwnProperty("pageSize")&&(M.pageSize=u.pageSize),u.pageToken!=null&&u.hasOwnProperty("pageToken")&&(M.pageToken=u.pageToken),u.name!=null&&u.hasOwnProperty("name")&&(M.name=u.name),M},y.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},y),p.ListOperationsResponse=(w.prototype.operations=a.emptyArray,w.prototype.nextPageToken="",w.create=function(u){return new w(u)},w.encode=function(u,P){if(P=P||l.create(),u.operations!=null&&u.operations.length)for(var M=0;M<u.operations.length;++M)o.google.longrunning.Operation.encode(u.operations[M],P.uint32(10).fork()).ldelim();return u.nextPageToken!=null&&Object.hasOwnProperty.call(u,"nextPageToken")&&P.uint32(18).string(u.nextPageToken),P},w.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},w.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.longrunning.ListOperationsResponse;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.operations&&n.operations.length||(n.operations=[]),n.operations.push(o.google.longrunning.Operation.decode(u,u.uint32()));break;case 2:n.nextPageToken=u.string();break;default:u.skipType(7&L)}}return n},w.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},w.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.operations!=null&&u.hasOwnProperty("operations")){if(!Array.isArray(u.operations))return"operations: array expected";for(var P=0;P<u.operations.length;++P){var M=o.google.longrunning.Operation.verify(u.operations[P]);if(M)return"operations."+M}}return u.nextPageToken!=null&&u.hasOwnProperty("nextPageToken")&&!a.isString(u.nextPageToken)?"nextPageToken: string expected":null},w.fromObject=function(u){if(u instanceof o.google.longrunning.ListOperationsResponse)return u;var P=new o.google.longrunning.ListOperationsResponse;if(u.operations){if(!Array.isArray(u.operations))throw TypeError(".google.longrunning.ListOperationsResponse.operations: array expected");P.operations=[];for(var M=0;M<u.operations.length;++M){if(typeof u.operations[M]!="object")throw TypeError(".google.longrunning.ListOperationsResponse.operations: object expected");P.operations[M]=o.google.longrunning.Operation.fromObject(u.operations[M])}}return u.nextPageToken!=null&&(P.nextPageToken=String(u.nextPageToken)),P},w.toObject=function(u,P){var M={};if(((P=P||{}).arrays||P.defaults)&&(M.operations=[]),P.defaults&&(M.nextPageToken=""),u.operations&&u.operations.length){M.operations=[];for(var n=0;n<u.operations.length;++n)M.operations[n]=o.google.longrunning.Operation.toObject(u.operations[n],P)}return u.nextPageToken!=null&&u.hasOwnProperty("nextPageToken")&&(M.nextPageToken=u.nextPageToken),M},w.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},w),p.CancelOperationRequest=(T.prototype.name="",T.create=function(u){return new T(u)},T.encode=function(u,P){return P=P||l.create(),u.name!=null&&Object.hasOwnProperty.call(u,"name")&&P.uint32(10).string(u.name),P},T.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},T.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.longrunning.CancelOperationRequest;u.pos<M;){var L=u.uint32();L>>>3==1?n.name=u.string():u.skipType(7&L)}return n},T.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},T.verify=function(u){return typeof u!="object"||u===null?"object expected":u.name!=null&&u.hasOwnProperty("name")&&!a.isString(u.name)?"name: string expected":null},T.fromObject=function(u){var P;return u instanceof o.google.longrunning.CancelOperationRequest?u:(P=new o.google.longrunning.CancelOperationRequest,u.name!=null&&(P.name=String(u.name)),P)},T.toObject=function(u,P){var M={};return(P=P||{}).defaults&&(M.name=""),u.name!=null&&u.hasOwnProperty("name")&&(M.name=u.name),M},T.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},T),p.DeleteOperationRequest=(I.prototype.name="",I.create=function(u){return new I(u)},I.encode=function(u,P){return P=P||l.create(),u.name!=null&&Object.hasOwnProperty.call(u,"name")&&P.uint32(10).string(u.name),P},I.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},I.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.longrunning.DeleteOperationRequest;u.pos<M;){var L=u.uint32();L>>>3==1?n.name=u.string():u.skipType(7&L)}return n},I.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},I.verify=function(u){return typeof u!="object"||u===null?"object expected":u.name!=null&&u.hasOwnProperty("name")&&!a.isString(u.name)?"name: string expected":null},I.fromObject=function(u){var P;return u instanceof o.google.longrunning.DeleteOperationRequest?u:(P=new o.google.longrunning.DeleteOperationRequest,u.name!=null&&(P.name=String(u.name)),P)},I.toObject=function(u,P){var M={};return(P=P||{}).defaults&&(M.name=""),u.name!=null&&u.hasOwnProperty("name")&&(M.name=u.name),M},I.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},I),p.WaitOperationRequest=(O.prototype.name="",O.prototype.timeout=null,O.create=function(u){return new O(u)},O.encode=function(u,P){return P=P||l.create(),u.name!=null&&Object.hasOwnProperty.call(u,"name")&&P.uint32(10).string(u.name),u.timeout!=null&&Object.hasOwnProperty.call(u,"timeout")&&o.google.protobuf.Duration.encode(u.timeout,P.uint32(18).fork()).ldelim(),P},O.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},O.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.longrunning.WaitOperationRequest;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.name=u.string();break;case 2:n.timeout=o.google.protobuf.Duration.decode(u,u.uint32());break;default:u.skipType(7&L)}}return n},O.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},O.verify=function(u){return typeof u!="object"||u===null?"object expected":u.name!=null&&u.hasOwnProperty("name")&&!a.isString(u.name)?"name: string expected":u.timeout!=null&&u.hasOwnProperty("timeout")&&(u=o.google.protobuf.Duration.verify(u.timeout),u)?"timeout."+u:null},O.fromObject=function(u){if(u instanceof o.google.longrunning.WaitOperationRequest)return u;var P=new o.google.longrunning.WaitOperationRequest;if(u.name!=null&&(P.name=String(u.name)),u.timeout!=null){if(typeof u.timeout!="object")throw TypeError(".google.longrunning.WaitOperationRequest.timeout: object expected");P.timeout=o.google.protobuf.Duration.fromObject(u.timeout)}return P},O.toObject=function(u,P){var M={};return(P=P||{}).defaults&&(M.name="",M.timeout=null),u.name!=null&&u.hasOwnProperty("name")&&(M.name=u.name),u.timeout!=null&&u.hasOwnProperty("timeout")&&(M.timeout=o.google.protobuf.Duration.toObject(u.timeout,P)),M},O.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},O),p.OperationInfo=(E.prototype.responseType="",E.prototype.metadataType="",E.create=function(u){return new E(u)},E.encode=function(u,P){return P=P||l.create(),u.responseType!=null&&Object.hasOwnProperty.call(u,"responseType")&&P.uint32(10).string(u.responseType),u.metadataType!=null&&Object.hasOwnProperty.call(u,"metadataType")&&P.uint32(18).string(u.metadataType),P},E.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},E.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.longrunning.OperationInfo;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.responseType=u.string();break;case 2:n.metadataType=u.string();break;default:u.skipType(7&L)}}return n},E.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},E.verify=function(u){return typeof u!="object"||u===null?"object expected":u.responseType!=null&&u.hasOwnProperty("responseType")&&!a.isString(u.responseType)?"responseType: string expected":u.metadataType!=null&&u.hasOwnProperty("metadataType")&&!a.isString(u.metadataType)?"metadataType: string expected":null},E.fromObject=function(u){var P;return u instanceof o.google.longrunning.OperationInfo?u:(P=new o.google.longrunning.OperationInfo,u.responseType!=null&&(P.responseType=String(u.responseType)),u.metadataType!=null&&(P.metadataType=String(u.metadataType)),P)},E.toObject=function(u,P){var M={};return(P=P||{}).defaults&&(M.responseType="",M.metadataType=""),u.responseType!=null&&u.hasOwnProperty("responseType")&&(M.responseType=u.responseType),u.metadataType!=null&&u.hasOwnProperty("metadataType")&&(M.metadataType=u.metadataType),M},E.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},E),p),m.api=((g={}).Http=(C.prototype.rules=a.emptyArray,C.prototype.fullyDecodeReservedExpansion=!1,C.create=function(u){return new C(u)},C.encode=function(u,P){if(P=P||l.create(),u.rules!=null&&u.rules.length)for(var M=0;M<u.rules.length;++M)o.google.api.HttpRule.encode(u.rules[M],P.uint32(10).fork()).ldelim();return u.fullyDecodeReservedExpansion!=null&&Object.hasOwnProperty.call(u,"fullyDecodeReservedExpansion")&&P.uint32(16).bool(u.fullyDecodeReservedExpansion),P},C.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},C.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.api.Http;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.rules&&n.rules.length||(n.rules=[]),n.rules.push(o.google.api.HttpRule.decode(u,u.uint32()));break;case 2:n.fullyDecodeReservedExpansion=u.bool();break;default:u.skipType(7&L)}}return n},C.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},C.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.rules!=null&&u.hasOwnProperty("rules")){if(!Array.isArray(u.rules))return"rules: array expected";for(var P=0;P<u.rules.length;++P){var M=o.google.api.HttpRule.verify(u.rules[P]);if(M)return"rules."+M}}return u.fullyDecodeReservedExpansion!=null&&u.hasOwnProperty("fullyDecodeReservedExpansion")&&typeof u.fullyDecodeReservedExpansion!="boolean"?"fullyDecodeReservedExpansion: boolean expected":null},C.fromObject=function(u){if(u instanceof o.google.api.Http)return u;var P=new o.google.api.Http;if(u.rules){if(!Array.isArray(u.rules))throw TypeError(".google.api.Http.rules: array expected");P.rules=[];for(var M=0;M<u.rules.length;++M){if(typeof u.rules[M]!="object")throw TypeError(".google.api.Http.rules: object expected");P.rules[M]=o.google.api.HttpRule.fromObject(u.rules[M])}}return u.fullyDecodeReservedExpansion!=null&&(P.fullyDecodeReservedExpansion=!!u.fullyDecodeReservedExpansion),P},C.toObject=function(u,P){var M={};if(((P=P||{}).arrays||P.defaults)&&(M.rules=[]),P.defaults&&(M.fullyDecodeReservedExpansion=!1),u.rules&&u.rules.length){M.rules=[];for(var n=0;n<u.rules.length;++n)M.rules[n]=o.google.api.HttpRule.toObject(u.rules[n],P)}return u.fullyDecodeReservedExpansion!=null&&u.hasOwnProperty("fullyDecodeReservedExpansion")&&(M.fullyDecodeReservedExpansion=u.fullyDecodeReservedExpansion),M},C.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},C),g.HttpRule=(x.prototype.selector="",x.prototype.get="",x.prototype.put="",x.prototype.post="",x.prototype.delete="",x.prototype.patch="",x.prototype.custom=null,x.prototype.body="",x.prototype.responseBody="",x.prototype.additionalBindings=a.emptyArray,Object.defineProperty(x.prototype,"pattern",{get:a.oneOfGetter(p=["get","put","post","delete","patch","custom"]),set:a.oneOfSetter(p)}),x.create=function(u){return new x(u)},x.encode=function(u,P){if(P=P||l.create(),u.selector!=null&&Object.hasOwnProperty.call(u,"selector")&&P.uint32(10).string(u.selector),u.get!=null&&Object.hasOwnProperty.call(u,"get")&&P.uint32(18).string(u.get),u.put!=null&&Object.hasOwnProperty.call(u,"put")&&P.uint32(26).string(u.put),u.post!=null&&Object.hasOwnProperty.call(u,"post")&&P.uint32(34).string(u.post),u.delete!=null&&Object.hasOwnProperty.call(u,"delete")&&P.uint32(42).string(u.delete),u.patch!=null&&Object.hasOwnProperty.call(u,"patch")&&P.uint32(50).string(u.patch),u.body!=null&&Object.hasOwnProperty.call(u,"body")&&P.uint32(58).string(u.body),u.custom!=null&&Object.hasOwnProperty.call(u,"custom")&&o.google.api.CustomHttpPattern.encode(u.custom,P.uint32(66).fork()).ldelim(),u.additionalBindings!=null&&u.additionalBindings.length)for(var M=0;M<u.additionalBindings.length;++M)o.google.api.HttpRule.encode(u.additionalBindings[M],P.uint32(90).fork()).ldelim();return u.responseBody!=null&&Object.hasOwnProperty.call(u,"responseBody")&&P.uint32(98).string(u.responseBody),P},x.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},x.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.api.HttpRule;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.selector=u.string();break;case 2:n.get=u.string();break;case 3:n.put=u.string();break;case 4:n.post=u.string();break;case 5:n.delete=u.string();break;case 6:n.patch=u.string();break;case 8:n.custom=o.google.api.CustomHttpPattern.decode(u,u.uint32());break;case 7:n.body=u.string();break;case 12:n.responseBody=u.string();break;case 11:n.additionalBindings&&n.additionalBindings.length||(n.additionalBindings=[]),n.additionalBindings.push(o.google.api.HttpRule.decode(u,u.uint32()));break;default:u.skipType(7&L)}}return n},x.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},x.verify=function(u){if(typeof u!="object"||u===null)return"object expected";var P={};if(u.selector!=null&&u.hasOwnProperty("selector")&&!a.isString(u.selector))return"selector: string expected";if(u.get!=null&&u.hasOwnProperty("get")&&(P.pattern=1,!a.isString(u.get)))return"get: string expected";if(u.put!=null&&u.hasOwnProperty("put")){if(P.pattern===1)return"pattern: multiple values";if(P.pattern=1,!a.isString(u.put))return"put: string expected"}if(u.post!=null&&u.hasOwnProperty("post")){if(P.pattern===1)return"pattern: multiple values";if(P.pattern=1,!a.isString(u.post))return"post: string expected"}if(u.delete!=null&&u.hasOwnProperty("delete")){if(P.pattern===1)return"pattern: multiple values";if(P.pattern=1,!a.isString(u.delete))return"delete: string expected"}if(u.patch!=null&&u.hasOwnProperty("patch")){if(P.pattern===1)return"pattern: multiple values";if(P.pattern=1,!a.isString(u.patch))return"patch: string expected"}if(u.custom!=null&&u.hasOwnProperty("custom")){if(P.pattern===1)return"pattern: multiple values";if(P.pattern=1,M=o.google.api.CustomHttpPattern.verify(u.custom))return"custom."+M}if(u.body!=null&&u.hasOwnProperty("body")&&!a.isString(u.body))return"body: string expected";if(u.responseBody!=null&&u.hasOwnProperty("responseBody")&&!a.isString(u.responseBody))return"responseBody: string expected";if(u.additionalBindings!=null&&u.hasOwnProperty("additionalBindings")){if(!Array.isArray(u.additionalBindings))return"additionalBindings: array expected";for(var M,n=0;n<u.additionalBindings.length;++n)if(M=o.google.api.HttpRule.verify(u.additionalBindings[n]))return"additionalBindings."+M}return null},x.fromObject=function(u){if(u instanceof o.google.api.HttpRule)return u;var P=new o.google.api.HttpRule;if(u.selector!=null&&(P.selector=String(u.selector)),u.get!=null&&(P.get=String(u.get)),u.put!=null&&(P.put=String(u.put)),u.post!=null&&(P.post=String(u.post)),u.delete!=null&&(P.delete=String(u.delete)),u.patch!=null&&(P.patch=String(u.patch)),u.custom!=null){if(typeof u.custom!="object")throw TypeError(".google.api.HttpRule.custom: object expected");P.custom=o.google.api.CustomHttpPattern.fromObject(u.custom)}if(u.body!=null&&(P.body=String(u.body)),u.responseBody!=null&&(P.responseBody=String(u.responseBody)),u.additionalBindings){if(!Array.isArray(u.additionalBindings))throw TypeError(".google.api.HttpRule.additionalBindings: array expected");P.additionalBindings=[];for(var M=0;M<u.additionalBindings.length;++M){if(typeof u.additionalBindings[M]!="object")throw TypeError(".google.api.HttpRule.additionalBindings: object expected");P.additionalBindings[M]=o.google.api.HttpRule.fromObject(u.additionalBindings[M])}}return P},x.toObject=function(u,P){var M={};if(((P=P||{}).arrays||P.defaults)&&(M.additionalBindings=[]),P.defaults&&(M.selector="",M.body="",M.responseBody=""),u.selector!=null&&u.hasOwnProperty("selector")&&(M.selector=u.selector),u.get!=null&&u.hasOwnProperty("get")&&(M.get=u.get,P.oneofs)&&(M.pattern="get"),u.put!=null&&u.hasOwnProperty("put")&&(M.put=u.put,P.oneofs)&&(M.pattern="put"),u.post!=null&&u.hasOwnProperty("post")&&(M.post=u.post,P.oneofs)&&(M.pattern="post"),u.delete!=null&&u.hasOwnProperty("delete")&&(M.delete=u.delete,P.oneofs)&&(M.pattern="delete"),u.patch!=null&&u.hasOwnProperty("patch")&&(M.patch=u.patch,P.oneofs)&&(M.pattern="patch"),u.body!=null&&u.hasOwnProperty("body")&&(M.body=u.body),u.custom!=null&&u.hasOwnProperty("custom")&&(M.custom=o.google.api.CustomHttpPattern.toObject(u.custom,P),P.oneofs)&&(M.pattern="custom"),u.additionalBindings&&u.additionalBindings.length){M.additionalBindings=[];for(var n=0;n<u.additionalBindings.length;++n)M.additionalBindings[n]=o.google.api.HttpRule.toObject(u.additionalBindings[n],P)}return u.responseBody!=null&&u.hasOwnProperty("responseBody")&&(M.responseBody=u.responseBody),M},x.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},x),g.CustomHttpPattern=(j.prototype.kind="",j.prototype.path="",j.create=function(u){return new j(u)},j.encode=function(u,P){return P=P||l.create(),u.kind!=null&&Object.hasOwnProperty.call(u,"kind")&&P.uint32(10).string(u.kind),u.path!=null&&Object.hasOwnProperty.call(u,"path")&&P.uint32(18).string(u.path),P},j.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},j.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.api.CustomHttpPattern;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.kind=u.string();break;case 2:n.path=u.string();break;default:u.skipType(7&L)}}return n},j.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},j.verify=function(u){return typeof u!="object"||u===null?"object expected":u.kind!=null&&u.hasOwnProperty("kind")&&!a.isString(u.kind)?"kind: string expected":u.path!=null&&u.hasOwnProperty("path")&&!a.isString(u.path)?"path: string expected":null},j.fromObject=function(u){var P;return u instanceof o.google.api.CustomHttpPattern?u:(P=new o.google.api.CustomHttpPattern,u.kind!=null&&(P.kind=String(u.kind)),u.path!=null&&(P.path=String(u.path)),P)},j.toObject=function(u,P){var M={};return(P=P||{}).defaults&&(M.kind="",M.path=""),u.kind!=null&&u.hasOwnProperty("kind")&&(M.kind=u.kind),u.path!=null&&u.hasOwnProperty("path")&&(M.path=u.path),M},j.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},j),g),m.protobuf=((p={}).FileDescriptorSet=(D.prototype.file=a.emptyArray,D.create=function(u){return new D(u)},D.encode=function(u,P){if(P=P||l.create(),u.file!=null&&u.file.length)for(var M=0;M<u.file.length;++M)o.google.protobuf.FileDescriptorProto.encode(u.file[M],P.uint32(10).fork()).ldelim();return P},D.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},D.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.FileDescriptorSet;u.pos<M;){var L=u.uint32();L>>>3==1?(n.file&&n.file.length||(n.file=[]),n.file.push(o.google.protobuf.FileDescriptorProto.decode(u,u.uint32()))):u.skipType(7&L)}return n},D.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},D.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.file!=null&&u.hasOwnProperty("file")){if(!Array.isArray(u.file))return"file: array expected";for(var P=0;P<u.file.length;++P){var M=o.google.protobuf.FileDescriptorProto.verify(u.file[P]);if(M)return"file."+M}}return null},D.fromObject=function(u){if(u instanceof o.google.protobuf.FileDescriptorSet)return u;var P=new o.google.protobuf.FileDescriptorSet;if(u.file){if(!Array.isArray(u.file))throw TypeError(".google.protobuf.FileDescriptorSet.file: array expected");P.file=[];for(var M=0;M<u.file.length;++M){if(typeof u.file[M]!="object")throw TypeError(".google.protobuf.FileDescriptorSet.file: object expected");P.file[M]=o.google.protobuf.FileDescriptorProto.fromObject(u.file[M])}}return P},D.toObject=function(u,P){var M={};if(((P=P||{}).arrays||P.defaults)&&(M.file=[]),u.file&&u.file.length){M.file=[];for(var n=0;n<u.file.length;++n)M.file[n]=o.google.protobuf.FileDescriptorProto.toObject(u.file[n],P)}return M},D.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},D),p.FileDescriptorProto=(k.prototype.name="",k.prototype.package="",k.prototype.dependency=a.emptyArray,k.prototype.publicDependency=a.emptyArray,k.prototype.weakDependency=a.emptyArray,k.prototype.messageType=a.emptyArray,k.prototype.enumType=a.emptyArray,k.prototype.service=a.emptyArray,k.prototype.extension=a.emptyArray,k.prototype.options=null,k.prototype.sourceCodeInfo=null,k.prototype.syntax="",k.create=function(u){return new k(u)},k.encode=function(u,P){if(P=P||l.create(),u.name!=null&&Object.hasOwnProperty.call(u,"name")&&P.uint32(10).string(u.name),u.package!=null&&Object.hasOwnProperty.call(u,"package")&&P.uint32(18).string(u.package),u.dependency!=null&&u.dependency.length)for(var M=0;M<u.dependency.length;++M)P.uint32(26).string(u.dependency[M]);if(u.messageType!=null&&u.messageType.length)for(M=0;M<u.messageType.length;++M)o.google.protobuf.DescriptorProto.encode(u.messageType[M],P.uint32(34).fork()).ldelim();if(u.enumType!=null&&u.enumType.length)for(M=0;M<u.enumType.length;++M)o.google.protobuf.EnumDescriptorProto.encode(u.enumType[M],P.uint32(42).fork()).ldelim();if(u.service!=null&&u.service.length)for(M=0;M<u.service.length;++M)o.google.protobuf.ServiceDescriptorProto.encode(u.service[M],P.uint32(50).fork()).ldelim();if(u.extension!=null&&u.extension.length)for(M=0;M<u.extension.length;++M)o.google.protobuf.FieldDescriptorProto.encode(u.extension[M],P.uint32(58).fork()).ldelim();if(u.options!=null&&Object.hasOwnProperty.call(u,"options")&&o.google.protobuf.FileOptions.encode(u.options,P.uint32(66).fork()).ldelim(),u.sourceCodeInfo!=null&&Object.hasOwnProperty.call(u,"sourceCodeInfo")&&o.google.protobuf.SourceCodeInfo.encode(u.sourceCodeInfo,P.uint32(74).fork()).ldelim(),u.publicDependency!=null&&u.publicDependency.length)for(M=0;M<u.publicDependency.length;++M)P.uint32(80).int32(u.publicDependency[M]);if(u.weakDependency!=null&&u.weakDependency.length)for(M=0;M<u.weakDependency.length;++M)P.uint32(88).int32(u.weakDependency[M]);return u.syntax!=null&&Object.hasOwnProperty.call(u,"syntax")&&P.uint32(98).string(u.syntax),P},k.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},k.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.FileDescriptorProto;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.name=u.string();break;case 2:n.package=u.string();break;case 3:n.dependency&&n.dependency.length||(n.dependency=[]),n.dependency.push(u.string());break;case 10:if(n.publicDependency&&n.publicDependency.length||(n.publicDependency=[]),(7&L)==2)for(var U=u.uint32()+u.pos;u.pos<U;)n.publicDependency.push(u.int32());else n.publicDependency.push(u.int32());break;case 11:if(n.weakDependency&&n.weakDependency.length||(n.weakDependency=[]),(7&L)==2)for(U=u.uint32()+u.pos;u.pos<U;)n.weakDependency.push(u.int32());else n.weakDependency.push(u.int32());break;case 4:n.messageType&&n.messageType.length||(n.messageType=[]),n.messageType.push(o.google.protobuf.DescriptorProto.decode(u,u.uint32()));break;case 5:n.enumType&&n.enumType.length||(n.enumType=[]),n.enumType.push(o.google.protobuf.EnumDescriptorProto.decode(u,u.uint32()));break;case 6:n.service&&n.service.length||(n.service=[]),n.service.push(o.google.protobuf.ServiceDescriptorProto.decode(u,u.uint32()));break;case 7:n.extension&&n.extension.length||(n.extension=[]),n.extension.push(o.google.protobuf.FieldDescriptorProto.decode(u,u.uint32()));break;case 8:n.options=o.google.protobuf.FileOptions.decode(u,u.uint32());break;case 9:n.sourceCodeInfo=o.google.protobuf.SourceCodeInfo.decode(u,u.uint32());break;case 12:n.syntax=u.string();break;default:u.skipType(7&L)}}return n},k.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},k.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.name!=null&&u.hasOwnProperty("name")&&!a.isString(u.name))return"name: string expected";if(u.package!=null&&u.hasOwnProperty("package")&&!a.isString(u.package))return"package: string expected";if(u.dependency!=null&&u.hasOwnProperty("dependency")){if(!Array.isArray(u.dependency))return"dependency: array expected";for(var P=0;P<u.dependency.length;++P)if(!a.isString(u.dependency[P]))return"dependency: string[] expected"}if(u.publicDependency!=null&&u.hasOwnProperty("publicDependency")){if(!Array.isArray(u.publicDependency))return"publicDependency: array expected";for(P=0;P<u.publicDependency.length;++P)if(!a.isInteger(u.publicDependency[P]))return"publicDependency: integer[] expected"}if(u.weakDependency!=null&&u.hasOwnProperty("weakDependency")){if(!Array.isArray(u.weakDependency))return"weakDependency: array expected";for(P=0;P<u.weakDependency.length;++P)if(!a.isInteger(u.weakDependency[P]))return"weakDependency: integer[] expected"}if(u.messageType!=null&&u.hasOwnProperty("messageType")){if(!Array.isArray(u.messageType))return"messageType: array expected";for(P=0;P<u.messageType.length;++P)if(M=o.google.protobuf.DescriptorProto.verify(u.messageType[P]))return"messageType."+M}if(u.enumType!=null&&u.hasOwnProperty("enumType")){if(!Array.isArray(u.enumType))return"enumType: array expected";for(P=0;P<u.enumType.length;++P)if(M=o.google.protobuf.EnumDescriptorProto.verify(u.enumType[P]))return"enumType."+M}if(u.service!=null&&u.hasOwnProperty("service")){if(!Array.isArray(u.service))return"service: array expected";for(P=0;P<u.service.length;++P)if(M=o.google.protobuf.ServiceDescriptorProto.verify(u.service[P]))return"service."+M}if(u.extension!=null&&u.hasOwnProperty("extension")){if(!Array.isArray(u.extension))return"extension: array expected";for(P=0;P<u.extension.length;++P)if(M=o.google.protobuf.FieldDescriptorProto.verify(u.extension[P]))return"extension."+M}var M;return u.options!=null&&u.hasOwnProperty("options")&&(M=o.google.protobuf.FileOptions.verify(u.options))?"options."+M:u.sourceCodeInfo!=null&&u.hasOwnProperty("sourceCodeInfo")&&(M=o.google.protobuf.SourceCodeInfo.verify(u.sourceCodeInfo))?"sourceCodeInfo."+M:u.syntax!=null&&u.hasOwnProperty("syntax")&&!a.isString(u.syntax)?"syntax: string expected":null},k.fromObject=function(u){if(u instanceof o.google.protobuf.FileDescriptorProto)return u;var P=new o.google.protobuf.FileDescriptorProto;if(u.name!=null&&(P.name=String(u.name)),u.package!=null&&(P.package=String(u.package)),u.dependency){if(!Array.isArray(u.dependency))throw TypeError(".google.protobuf.FileDescriptorProto.dependency: array expected");P.dependency=[];for(var M=0;M<u.dependency.length;++M)P.dependency[M]=String(u.dependency[M])}if(u.publicDependency){if(!Array.isArray(u.publicDependency))throw TypeError(".google.protobuf.FileDescriptorProto.publicDependency: array expected");for(P.publicDependency=[],M=0;M<u.publicDependency.length;++M)P.publicDependency[M]=0|u.publicDependency[M]}if(u.weakDependency){if(!Array.isArray(u.weakDependency))throw TypeError(".google.protobuf.FileDescriptorProto.weakDependency: array expected");for(P.weakDependency=[],M=0;M<u.weakDependency.length;++M)P.weakDependency[M]=0|u.weakDependency[M]}if(u.messageType){if(!Array.isArray(u.messageType))throw TypeError(".google.protobuf.FileDescriptorProto.messageType: array expected");for(P.messageType=[],M=0;M<u.messageType.length;++M){if(typeof u.messageType[M]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.messageType: object expected");P.messageType[M]=o.google.protobuf.DescriptorProto.fromObject(u.messageType[M])}}if(u.enumType){if(!Array.isArray(u.enumType))throw TypeError(".google.protobuf.FileDescriptorProto.enumType: array expected");for(P.enumType=[],M=0;M<u.enumType.length;++M){if(typeof u.enumType[M]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.enumType: object expected");P.enumType[M]=o.google.protobuf.EnumDescriptorProto.fromObject(u.enumType[M])}}if(u.service){if(!Array.isArray(u.service))throw TypeError(".google.protobuf.FileDescriptorProto.service: array expected");for(P.service=[],M=0;M<u.service.length;++M){if(typeof u.service[M]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.service: object expected");P.service[M]=o.google.protobuf.ServiceDescriptorProto.fromObject(u.service[M])}}if(u.extension){if(!Array.isArray(u.extension))throw TypeError(".google.protobuf.FileDescriptorProto.extension: array expected");for(P.extension=[],M=0;M<u.extension.length;++M){if(typeof u.extension[M]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.extension: object expected");P.extension[M]=o.google.protobuf.FieldDescriptorProto.fromObject(u.extension[M])}}if(u.options!=null){if(typeof u.options!="object")throw TypeError(".google.protobuf.FileDescriptorProto.options: object expected");P.options=o.google.protobuf.FileOptions.fromObject(u.options)}if(u.sourceCodeInfo!=null){if(typeof u.sourceCodeInfo!="object")throw TypeError(".google.protobuf.FileDescriptorProto.sourceCodeInfo: object expected");P.sourceCodeInfo=o.google.protobuf.SourceCodeInfo.fromObject(u.sourceCodeInfo)}return u.syntax!=null&&(P.syntax=String(u.syntax)),P},k.toObject=function(u,P){var M={};if(((P=P||{}).arrays||P.defaults)&&(M.dependency=[],M.messageType=[],M.enumType=[],M.service=[],M.extension=[],M.publicDependency=[],M.weakDependency=[]),P.defaults&&(M.name="",M.package="",M.options=null,M.sourceCodeInfo=null,M.syntax=""),u.name!=null&&u.hasOwnProperty("name")&&(M.name=u.name),u.package!=null&&u.hasOwnProperty("package")&&(M.package=u.package),u.dependency&&u.dependency.length){M.dependency=[];for(var n=0;n<u.dependency.length;++n)M.dependency[n]=u.dependency[n]}if(u.messageType&&u.messageType.length)for(M.messageType=[],n=0;n<u.messageType.length;++n)M.messageType[n]=o.google.protobuf.DescriptorProto.toObject(u.messageType[n],P);if(u.enumType&&u.enumType.length)for(M.enumType=[],n=0;n<u.enumType.length;++n)M.enumType[n]=o.google.protobuf.EnumDescriptorProto.toObject(u.enumType[n],P);if(u.service&&u.service.length)for(M.service=[],n=0;n<u.service.length;++n)M.service[n]=o.google.protobuf.ServiceDescriptorProto.toObject(u.service[n],P);if(u.extension&&u.extension.length)for(M.extension=[],n=0;n<u.extension.length;++n)M.extension[n]=o.google.protobuf.FieldDescriptorProto.toObject(u.extension[n],P);if(u.options!=null&&u.hasOwnProperty("options")&&(M.options=o.google.protobuf.FileOptions.toObject(u.options,P)),u.sourceCodeInfo!=null&&u.hasOwnProperty("sourceCodeInfo")&&(M.sourceCodeInfo=o.google.protobuf.SourceCodeInfo.toObject(u.sourceCodeInfo,P)),u.publicDependency&&u.publicDependency.length)for(M.publicDependency=[],n=0;n<u.publicDependency.length;++n)M.publicDependency[n]=u.publicDependency[n];if(u.weakDependency&&u.weakDependency.length)for(M.weakDependency=[],n=0;n<u.weakDependency.length;++n)M.weakDependency[n]=u.weakDependency[n];return u.syntax!=null&&u.hasOwnProperty("syntax")&&(M.syntax=u.syntax),M},k.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},k),p.DescriptorProto=(q.prototype.name="",q.prototype.field=a.emptyArray,q.prototype.extension=a.emptyArray,q.prototype.nestedType=a.emptyArray,q.prototype.enumType=a.emptyArray,q.prototype.extensionRange=a.emptyArray,q.prototype.oneofDecl=a.emptyArray,q.prototype.options=null,q.prototype.reservedRange=a.emptyArray,q.prototype.reservedName=a.emptyArray,q.create=function(u){return new q(u)},q.encode=function(u,P){if(P=P||l.create(),u.name!=null&&Object.hasOwnProperty.call(u,"name")&&P.uint32(10).string(u.name),u.field!=null&&u.field.length)for(var M=0;M<u.field.length;++M)o.google.protobuf.FieldDescriptorProto.encode(u.field[M],P.uint32(18).fork()).ldelim();if(u.nestedType!=null&&u.nestedType.length)for(M=0;M<u.nestedType.length;++M)o.google.protobuf.DescriptorProto.encode(u.nestedType[M],P.uint32(26).fork()).ldelim();if(u.enumType!=null&&u.enumType.length)for(M=0;M<u.enumType.length;++M)o.google.protobuf.EnumDescriptorProto.encode(u.enumType[M],P.uint32(34).fork()).ldelim();if(u.extensionRange!=null&&u.extensionRange.length)for(M=0;M<u.extensionRange.length;++M)o.google.protobuf.DescriptorProto.ExtensionRange.encode(u.extensionRange[M],P.uint32(42).fork()).ldelim();if(u.extension!=null&&u.extension.length)for(M=0;M<u.extension.length;++M)o.google.protobuf.FieldDescriptorProto.encode(u.extension[M],P.uint32(50).fork()).ldelim();if(u.options!=null&&Object.hasOwnProperty.call(u,"options")&&o.google.protobuf.MessageOptions.encode(u.options,P.uint32(58).fork()).ldelim(),u.oneofDecl!=null&&u.oneofDecl.length)for(M=0;M<u.oneofDecl.length;++M)o.google.protobuf.OneofDescriptorProto.encode(u.oneofDecl[M],P.uint32(66).fork()).ldelim();if(u.reservedRange!=null&&u.reservedRange.length)for(M=0;M<u.reservedRange.length;++M)o.google.protobuf.DescriptorProto.ReservedRange.encode(u.reservedRange[M],P.uint32(74).fork()).ldelim();if(u.reservedName!=null&&u.reservedName.length)for(M=0;M<u.reservedName.length;++M)P.uint32(82).string(u.reservedName[M]);return P},q.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},q.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.DescriptorProto;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.name=u.string();break;case 2:n.field&&n.field.length||(n.field=[]),n.field.push(o.google.protobuf.FieldDescriptorProto.decode(u,u.uint32()));break;case 6:n.extension&&n.extension.length||(n.extension=[]),n.extension.push(o.google.protobuf.FieldDescriptorProto.decode(u,u.uint32()));break;case 3:n.nestedType&&n.nestedType.length||(n.nestedType=[]),n.nestedType.push(o.google.protobuf.DescriptorProto.decode(u,u.uint32()));break;case 4:n.enumType&&n.enumType.length||(n.enumType=[]),n.enumType.push(o.google.protobuf.EnumDescriptorProto.decode(u,u.uint32()));break;case 5:n.extensionRange&&n.extensionRange.length||(n.extensionRange=[]),n.extensionRange.push(o.google.protobuf.DescriptorProto.ExtensionRange.decode(u,u.uint32()));break;case 8:n.oneofDecl&&n.oneofDecl.length||(n.oneofDecl=[]),n.oneofDecl.push(o.google.protobuf.OneofDescriptorProto.decode(u,u.uint32()));break;case 7:n.options=o.google.protobuf.MessageOptions.decode(u,u.uint32());break;case 9:n.reservedRange&&n.reservedRange.length||(n.reservedRange=[]),n.reservedRange.push(o.google.protobuf.DescriptorProto.ReservedRange.decode(u,u.uint32()));break;case 10:n.reservedName&&n.reservedName.length||(n.reservedName=[]),n.reservedName.push(u.string());break;default:u.skipType(7&L)}}return n},q.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},q.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.name!=null&&u.hasOwnProperty("name")&&!a.isString(u.name))return"name: string expected";if(u.field!=null&&u.hasOwnProperty("field")){if(!Array.isArray(u.field))return"field: array expected";for(var P=0;P<u.field.length;++P)if(M=o.google.protobuf.FieldDescriptorProto.verify(u.field[P]))return"field."+M}if(u.extension!=null&&u.hasOwnProperty("extension")){if(!Array.isArray(u.extension))return"extension: array expected";for(P=0;P<u.extension.length;++P)if(M=o.google.protobuf.FieldDescriptorProto.verify(u.extension[P]))return"extension."+M}if(u.nestedType!=null&&u.hasOwnProperty("nestedType")){if(!Array.isArray(u.nestedType))return"nestedType: array expected";for(P=0;P<u.nestedType.length;++P)if(M=o.google.protobuf.DescriptorProto.verify(u.nestedType[P]))return"nestedType."+M}if(u.enumType!=null&&u.hasOwnProperty("enumType")){if(!Array.isArray(u.enumType))return"enumType: array expected";for(P=0;P<u.enumType.length;++P)if(M=o.google.protobuf.EnumDescriptorProto.verify(u.enumType[P]))return"enumType."+M}if(u.extensionRange!=null&&u.hasOwnProperty("extensionRange")){if(!Array.isArray(u.extensionRange))return"extensionRange: array expected";for(P=0;P<u.extensionRange.length;++P)if(M=o.google.protobuf.DescriptorProto.ExtensionRange.verify(u.extensionRange[P]))return"extensionRange."+M}if(u.oneofDecl!=null&&u.hasOwnProperty("oneofDecl")){if(!Array.isArray(u.oneofDecl))return"oneofDecl: array expected";for(P=0;P<u.oneofDecl.length;++P)if(M=o.google.protobuf.OneofDescriptorProto.verify(u.oneofDecl[P]))return"oneofDecl."+M}if(u.options!=null&&u.hasOwnProperty("options")&&(M=o.google.protobuf.MessageOptions.verify(u.options)))return"options."+M;if(u.reservedRange!=null&&u.hasOwnProperty("reservedRange")){if(!Array.isArray(u.reservedRange))return"reservedRange: array expected";for(var M,P=0;P<u.reservedRange.length;++P)if(M=o.google.protobuf.DescriptorProto.ReservedRange.verify(u.reservedRange[P]))return"reservedRange."+M}if(u.reservedName!=null&&u.hasOwnProperty("reservedName")){if(!Array.isArray(u.reservedName))return"reservedName: array expected";for(P=0;P<u.reservedName.length;++P)if(!a.isString(u.reservedName[P]))return"reservedName: string[] expected"}return null},q.fromObject=function(u){if(u instanceof o.google.protobuf.DescriptorProto)return u;var P=new o.google.protobuf.DescriptorProto;if(u.name!=null&&(P.name=String(u.name)),u.field){if(!Array.isArray(u.field))throw TypeError(".google.protobuf.DescriptorProto.field: array expected");P.field=[];for(var M=0;M<u.field.length;++M){if(typeof u.field[M]!="object")throw TypeError(".google.protobuf.DescriptorProto.field: object expected");P.field[M]=o.google.protobuf.FieldDescriptorProto.fromObject(u.field[M])}}if(u.extension){if(!Array.isArray(u.extension))throw TypeError(".google.protobuf.DescriptorProto.extension: array expected");for(P.extension=[],M=0;M<u.extension.length;++M){if(typeof u.extension[M]!="object")throw TypeError(".google.protobuf.DescriptorProto.extension: object expected");P.extension[M]=o.google.protobuf.FieldDescriptorProto.fromObject(u.extension[M])}}if(u.nestedType){if(!Array.isArray(u.nestedType))throw TypeError(".google.protobuf.DescriptorProto.nestedType: array expected");for(P.nestedType=[],M=0;M<u.nestedType.length;++M){if(typeof u.nestedType[M]!="object")throw TypeError(".google.protobuf.DescriptorProto.nestedType: object expected");P.nestedType[M]=o.google.protobuf.DescriptorProto.fromObject(u.nestedType[M])}}if(u.enumType){if(!Array.isArray(u.enumType))throw TypeError(".google.protobuf.DescriptorProto.enumType: array expected");for(P.enumType=[],M=0;M<u.enumType.length;++M){if(typeof u.enumType[M]!="object")throw TypeError(".google.protobuf.DescriptorProto.enumType: object expected");P.enumType[M]=o.google.protobuf.EnumDescriptorProto.fromObject(u.enumType[M])}}if(u.extensionRange){if(!Array.isArray(u.extensionRange))throw TypeError(".google.protobuf.DescriptorProto.extensionRange: array expected");for(P.extensionRange=[],M=0;M<u.extensionRange.length;++M){if(typeof u.extensionRange[M]!="object")throw TypeError(".google.protobuf.DescriptorProto.extensionRange: object expected");P.extensionRange[M]=o.google.protobuf.DescriptorProto.ExtensionRange.fromObject(u.extensionRange[M])}}if(u.oneofDecl){if(!Array.isArray(u.oneofDecl))throw TypeError(".google.protobuf.DescriptorProto.oneofDecl: array expected");for(P.oneofDecl=[],M=0;M<u.oneofDecl.length;++M){if(typeof u.oneofDecl[M]!="object")throw TypeError(".google.protobuf.DescriptorProto.oneofDecl: object expected");P.oneofDecl[M]=o.google.protobuf.OneofDescriptorProto.fromObject(u.oneofDecl[M])}}if(u.options!=null){if(typeof u.options!="object")throw TypeError(".google.protobuf.DescriptorProto.options: object expected");P.options=o.google.protobuf.MessageOptions.fromObject(u.options)}if(u.reservedRange){if(!Array.isArray(u.reservedRange))throw TypeError(".google.protobuf.DescriptorProto.reservedRange: array expected");for(P.reservedRange=[],M=0;M<u.reservedRange.length;++M){if(typeof u.reservedRange[M]!="object")throw TypeError(".google.protobuf.DescriptorProto.reservedRange: object expected");P.reservedRange[M]=o.google.protobuf.DescriptorProto.ReservedRange.fromObject(u.reservedRange[M])}}if(u.reservedName){if(!Array.isArray(u.reservedName))throw TypeError(".google.protobuf.DescriptorProto.reservedName: array expected");for(P.reservedName=[],M=0;M<u.reservedName.length;++M)P.reservedName[M]=String(u.reservedName[M])}return P},q.toObject=function(u,P){var M={};if(((P=P||{}).arrays||P.defaults)&&(M.field=[],M.nestedType=[],M.enumType=[],M.extensionRange=[],M.extension=[],M.oneofDecl=[],M.reservedRange=[],M.reservedName=[]),P.defaults&&(M.name="",M.options=null),u.name!=null&&u.hasOwnProperty("name")&&(M.name=u.name),u.field&&u.field.length){M.field=[];for(var n=0;n<u.field.length;++n)M.field[n]=o.google.protobuf.FieldDescriptorProto.toObject(u.field[n],P)}if(u.nestedType&&u.nestedType.length)for(M.nestedType=[],n=0;n<u.nestedType.length;++n)M.nestedType[n]=o.google.protobuf.DescriptorProto.toObject(u.nestedType[n],P);if(u.enumType&&u.enumType.length)for(M.enumType=[],n=0;n<u.enumType.length;++n)M.enumType[n]=o.google.protobuf.EnumDescriptorProto.toObject(u.enumType[n],P);if(u.extensionRange&&u.extensionRange.length)for(M.extensionRange=[],n=0;n<u.extensionRange.length;++n)M.extensionRange[n]=o.google.protobuf.DescriptorProto.ExtensionRange.toObject(u.extensionRange[n],P);if(u.extension&&u.extension.length)for(M.extension=[],n=0;n<u.extension.length;++n)M.extension[n]=o.google.protobuf.FieldDescriptorProto.toObject(u.extension[n],P);if(u.options!=null&&u.hasOwnProperty("options")&&(M.options=o.google.protobuf.MessageOptions.toObject(u.options,P)),u.oneofDecl&&u.oneofDecl.length)for(M.oneofDecl=[],n=0;n<u.oneofDecl.length;++n)M.oneofDecl[n]=o.google.protobuf.OneofDescriptorProto.toObject(u.oneofDecl[n],P);if(u.reservedRange&&u.reservedRange.length)for(M.reservedRange=[],n=0;n<u.reservedRange.length;++n)M.reservedRange[n]=o.google.protobuf.DescriptorProto.ReservedRange.toObject(u.reservedRange[n],P);if(u.reservedName&&u.reservedName.length)for(M.reservedName=[],n=0;n<u.reservedName.length;++n)M.reservedName[n]=u.reservedName[n];return M},q.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},q.ExtensionRange=(G.prototype.start=0,G.prototype.end=0,G.prototype.options=null,G.create=function(u){return new G(u)},G.encode=function(u,P){return P=P||l.create(),u.start!=null&&Object.hasOwnProperty.call(u,"start")&&P.uint32(8).int32(u.start),u.end!=null&&Object.hasOwnProperty.call(u,"end")&&P.uint32(16).int32(u.end),u.options!=null&&Object.hasOwnProperty.call(u,"options")&&o.google.protobuf.ExtensionRangeOptions.encode(u.options,P.uint32(26).fork()).ldelim(),P},G.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},G.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.DescriptorProto.ExtensionRange;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.start=u.int32();break;case 2:n.end=u.int32();break;case 3:n.options=o.google.protobuf.ExtensionRangeOptions.decode(u,u.uint32());break;default:u.skipType(7&L)}}return n},G.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},G.verify=function(u){return typeof u!="object"||u===null?"object expected":u.start!=null&&u.hasOwnProperty("start")&&!a.isInteger(u.start)?"start: integer expected":u.end!=null&&u.hasOwnProperty("end")&&!a.isInteger(u.end)?"end: integer expected":u.options!=null&&u.hasOwnProperty("options")&&(u=o.google.protobuf.ExtensionRangeOptions.verify(u.options),u)?"options."+u:null},G.fromObject=function(u){if(u instanceof o.google.protobuf.DescriptorProto.ExtensionRange)return u;var P=new o.google.protobuf.DescriptorProto.ExtensionRange;if(u.start!=null&&(P.start=0|u.start),u.end!=null&&(P.end=0|u.end),u.options!=null){if(typeof u.options!="object")throw TypeError(".google.protobuf.DescriptorProto.ExtensionRange.options: object expected");P.options=o.google.protobuf.ExtensionRangeOptions.fromObject(u.options)}return P},G.toObject=function(u,P){var M={};return(P=P||{}).defaults&&(M.start=0,M.end=0,M.options=null),u.start!=null&&u.hasOwnProperty("start")&&(M.start=u.start),u.end!=null&&u.hasOwnProperty("end")&&(M.end=u.end),u.options!=null&&u.hasOwnProperty("options")&&(M.options=o.google.protobuf.ExtensionRangeOptions.toObject(u.options,P)),M},G.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},G),q.ReservedRange=($.prototype.start=0,$.prototype.end=0,$.create=function(u){return new $(u)},$.encode=function(u,P){return P=P||l.create(),u.start!=null&&Object.hasOwnProperty.call(u,"start")&&P.uint32(8).int32(u.start),u.end!=null&&Object.hasOwnProperty.call(u,"end")&&P.uint32(16).int32(u.end),P},$.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},$.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.DescriptorProto.ReservedRange;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.start=u.int32();break;case 2:n.end=u.int32();break;default:u.skipType(7&L)}}return n},$.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},$.verify=function(u){return typeof u!="object"||u===null?"object expected":u.start!=null&&u.hasOwnProperty("start")&&!a.isInteger(u.start)?"start: integer expected":u.end!=null&&u.hasOwnProperty("end")&&!a.isInteger(u.end)?"end: integer expected":null},$.fromObject=function(u){var P;return u instanceof o.google.protobuf.DescriptorProto.ReservedRange?u:(P=new o.google.protobuf.DescriptorProto.ReservedRange,u.start!=null&&(P.start=0|u.start),u.end!=null&&(P.end=0|u.end),P)},$.toObject=function(u,P){var M={};return(P=P||{}).defaults&&(M.start=0,M.end=0),u.start!=null&&u.hasOwnProperty("start")&&(M.start=u.start),u.end!=null&&u.hasOwnProperty("end")&&(M.end=u.end),M},$.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},$),q),p.ExtensionRangeOptions=(W.prototype.uninterpretedOption=a.emptyArray,W.create=function(u){return new W(u)},W.encode=function(u,P){if(P=P||l.create(),u.uninterpretedOption!=null&&u.uninterpretedOption.length)for(var M=0;M<u.uninterpretedOption.length;++M)o.google.protobuf.UninterpretedOption.encode(u.uninterpretedOption[M],P.uint32(7994).fork()).ldelim();return P},W.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},W.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.ExtensionRangeOptions;u.pos<M;){var L=u.uint32();L>>>3==999?(n.uninterpretedOption&&n.uninterpretedOption.length||(n.uninterpretedOption=[]),n.uninterpretedOption.push(o.google.protobuf.UninterpretedOption.decode(u,u.uint32()))):u.skipType(7&L)}return n},W.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},W.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.uninterpretedOption!=null&&u.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(u.uninterpretedOption))return"uninterpretedOption: array expected";for(var P=0;P<u.uninterpretedOption.length;++P){var M=o.google.protobuf.UninterpretedOption.verify(u.uninterpretedOption[P]);if(M)return"uninterpretedOption."+M}}return null},W.fromObject=function(u){if(u instanceof o.google.protobuf.ExtensionRangeOptions)return u;var P=new o.google.protobuf.ExtensionRangeOptions;if(u.uninterpretedOption){if(!Array.isArray(u.uninterpretedOption))throw TypeError(".google.protobuf.ExtensionRangeOptions.uninterpretedOption: array expected");P.uninterpretedOption=[];for(var M=0;M<u.uninterpretedOption.length;++M){if(typeof u.uninterpretedOption[M]!="object")throw TypeError(".google.protobuf.ExtensionRangeOptions.uninterpretedOption: object expected");P.uninterpretedOption[M]=o.google.protobuf.UninterpretedOption.fromObject(u.uninterpretedOption[M])}}return P},W.toObject=function(u,P){var M={};if(((P=P||{}).arrays||P.defaults)&&(M.uninterpretedOption=[]),u.uninterpretedOption&&u.uninterpretedOption.length){M.uninterpretedOption=[];for(var n=0;n<u.uninterpretedOption.length;++n)M.uninterpretedOption[n]=o.google.protobuf.UninterpretedOption.toObject(u.uninterpretedOption[n],P)}return M},W.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},W),p.FieldDescriptorProto=(K.prototype.name="",K.prototype.number=0,K.prototype.label=1,K.prototype.type=1,K.prototype.typeName="",K.prototype.extendee="",K.prototype.defaultValue="",K.prototype.oneofIndex=0,K.prototype.jsonName="",K.prototype.options=null,K.prototype.proto3Optional=!1,K.create=function(u){return new K(u)},K.encode=function(u,P){return P=P||l.create(),u.name!=null&&Object.hasOwnProperty.call(u,"name")&&P.uint32(10).string(u.name),u.extendee!=null&&Object.hasOwnProperty.call(u,"extendee")&&P.uint32(18).string(u.extendee),u.number!=null&&Object.hasOwnProperty.call(u,"number")&&P.uint32(24).int32(u.number),u.label!=null&&Object.hasOwnProperty.call(u,"label")&&P.uint32(32).int32(u.label),u.type!=null&&Object.hasOwnProperty.call(u,"type")&&P.uint32(40).int32(u.type),u.typeName!=null&&Object.hasOwnProperty.call(u,"typeName")&&P.uint32(50).string(u.typeName),u.defaultValue!=null&&Object.hasOwnProperty.call(u,"defaultValue")&&P.uint32(58).string(u.defaultValue),u.options!=null&&Object.hasOwnProperty.call(u,"options")&&o.google.protobuf.FieldOptions.encode(u.options,P.uint32(66).fork()).ldelim(),u.oneofIndex!=null&&Object.hasOwnProperty.call(u,"oneofIndex")&&P.uint32(72).int32(u.oneofIndex),u.jsonName!=null&&Object.hasOwnProperty.call(u,"jsonName")&&P.uint32(82).string(u.jsonName),u.proto3Optional!=null&&Object.hasOwnProperty.call(u,"proto3Optional")&&P.uint32(136).bool(u.proto3Optional),P},K.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},K.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.FieldDescriptorProto;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.name=u.string();break;case 3:n.number=u.int32();break;case 4:n.label=u.int32();break;case 5:n.type=u.int32();break;case 6:n.typeName=u.string();break;case 2:n.extendee=u.string();break;case 7:n.defaultValue=u.string();break;case 9:n.oneofIndex=u.int32();break;case 10:n.jsonName=u.string();break;case 8:n.options=o.google.protobuf.FieldOptions.decode(u,u.uint32());break;case 17:n.proto3Optional=u.bool();break;default:u.skipType(7&L)}}return n},K.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},K.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.name!=null&&u.hasOwnProperty("name")&&!a.isString(u.name))return"name: string expected";if(u.number!=null&&u.hasOwnProperty("number")&&!a.isInteger(u.number))return"number: integer expected";if(u.label!=null&&u.hasOwnProperty("label"))switch(u.label){default:return"label: enum value expected";case 1:case 2:case 3:}if(u.type!=null&&u.hasOwnProperty("type"))switch(u.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:}if(u.typeName!=null&&u.hasOwnProperty("typeName")&&!a.isString(u.typeName))return"typeName: string expected";if(u.extendee!=null&&u.hasOwnProperty("extendee")&&!a.isString(u.extendee))return"extendee: string expected";if(u.defaultValue!=null&&u.hasOwnProperty("defaultValue")&&!a.isString(u.defaultValue))return"defaultValue: string expected";if(u.oneofIndex!=null&&u.hasOwnProperty("oneofIndex")&&!a.isInteger(u.oneofIndex))return"oneofIndex: integer expected";if(u.jsonName!=null&&u.hasOwnProperty("jsonName")&&!a.isString(u.jsonName))return"jsonName: string expected";if(u.options!=null&&u.hasOwnProperty("options")){var P=o.google.protobuf.FieldOptions.verify(u.options);if(P)return"options."+P}return u.proto3Optional!=null&&u.hasOwnProperty("proto3Optional")&&typeof u.proto3Optional!="boolean"?"proto3Optional: boolean expected":null},K.fromObject=function(u){if(u instanceof o.google.protobuf.FieldDescriptorProto)return u;var P=new o.google.protobuf.FieldDescriptorProto;switch(u.name!=null&&(P.name=String(u.name)),u.number!=null&&(P.number=0|u.number),u.label){case"LABEL_OPTIONAL":case 1:P.label=1;break;case"LABEL_REQUIRED":case 2:P.label=2;break;case"LABEL_REPEATED":case 3:P.label=3}switch(u.type){case"TYPE_DOUBLE":case 1:P.type=1;break;case"TYPE_FLOAT":case 2:P.type=2;break;case"TYPE_INT64":case 3:P.type=3;break;case"TYPE_UINT64":case 4:P.type=4;break;case"TYPE_INT32":case 5:P.type=5;break;case"TYPE_FIXED64":case 6:P.type=6;break;case"TYPE_FIXED32":case 7:P.type=7;break;case"TYPE_BOOL":case 8:P.type=8;break;case"TYPE_STRING":case 9:P.type=9;break;case"TYPE_GROUP":case 10:P.type=10;break;case"TYPE_MESSAGE":case 11:P.type=11;break;case"TYPE_BYTES":case 12:P.type=12;break;case"TYPE_UINT32":case 13:P.type=13;break;case"TYPE_ENUM":case 14:P.type=14;break;case"TYPE_SFIXED32":case 15:P.type=15;break;case"TYPE_SFIXED64":case 16:P.type=16;break;case"TYPE_SINT32":case 17:P.type=17;break;case"TYPE_SINT64":case 18:P.type=18}if(u.typeName!=null&&(P.typeName=String(u.typeName)),u.extendee!=null&&(P.extendee=String(u.extendee)),u.defaultValue!=null&&(P.defaultValue=String(u.defaultValue)),u.oneofIndex!=null&&(P.oneofIndex=0|u.oneofIndex),u.jsonName!=null&&(P.jsonName=String(u.jsonName)),u.options!=null){if(typeof u.options!="object")throw TypeError(".google.protobuf.FieldDescriptorProto.options: object expected");P.options=o.google.protobuf.FieldOptions.fromObject(u.options)}return u.proto3Optional!=null&&(P.proto3Optional=!!u.proto3Optional),P},K.toObject=function(u,P){var M={};return(P=P||{}).defaults&&(M.name="",M.extendee="",M.number=0,M.label=P.enums===String?"LABEL_OPTIONAL":1,M.type=P.enums===String?"TYPE_DOUBLE":1,M.typeName="",M.defaultValue="",M.options=null,M.oneofIndex=0,M.jsonName="",M.proto3Optional=!1),u.name!=null&&u.hasOwnProperty("name")&&(M.name=u.name),u.extendee!=null&&u.hasOwnProperty("extendee")&&(M.extendee=u.extendee),u.number!=null&&u.hasOwnProperty("number")&&(M.number=u.number),u.label!=null&&u.hasOwnProperty("label")&&(M.label=P.enums===String?o.google.protobuf.FieldDescriptorProto.Label[u.label]:u.label),u.type!=null&&u.hasOwnProperty("type")&&(M.type=P.enums===String?o.google.protobuf.FieldDescriptorProto.Type[u.type]:u.type),u.typeName!=null&&u.hasOwnProperty("typeName")&&(M.typeName=u.typeName),u.defaultValue!=null&&u.hasOwnProperty("defaultValue")&&(M.defaultValue=u.defaultValue),u.options!=null&&u.hasOwnProperty("options")&&(M.options=o.google.protobuf.FieldOptions.toObject(u.options,P)),u.oneofIndex!=null&&u.hasOwnProperty("oneofIndex")&&(M.oneofIndex=u.oneofIndex),u.jsonName!=null&&u.hasOwnProperty("jsonName")&&(M.jsonName=u.jsonName),u.proto3Optional!=null&&u.hasOwnProperty("proto3Optional")&&(M.proto3Optional=u.proto3Optional),M},K.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},K.Type=(g={},(s=Object.create(g))[g[1]="TYPE_DOUBLE"]=1,s[g[2]="TYPE_FLOAT"]=2,s[g[3]="TYPE_INT64"]=3,s[g[4]="TYPE_UINT64"]=4,s[g[5]="TYPE_INT32"]=5,s[g[6]="TYPE_FIXED64"]=6,s[g[7]="TYPE_FIXED32"]=7,s[g[8]="TYPE_BOOL"]=8,s[g[9]="TYPE_STRING"]=9,s[g[10]="TYPE_GROUP"]=10,s[g[11]="TYPE_MESSAGE"]=11,s[g[12]="TYPE_BYTES"]=12,s[g[13]="TYPE_UINT32"]=13,s[g[14]="TYPE_ENUM"]=14,s[g[15]="TYPE_SFIXED32"]=15,s[g[16]="TYPE_SFIXED64"]=16,s[g[17]="TYPE_SINT32"]=17,s[g[18]="TYPE_SINT64"]=18,s),K.Label=(g={},(s=Object.create(g))[g[1]="LABEL_OPTIONAL"]=1,s[g[2]="LABEL_REQUIRED"]=2,s[g[3]="LABEL_REPEATED"]=3,s),K),p.OneofDescriptorProto=(z.prototype.name="",z.prototype.options=null,z.create=function(u){return new z(u)},z.encode=function(u,P){return P=P||l.create(),u.name!=null&&Object.hasOwnProperty.call(u,"name")&&P.uint32(10).string(u.name),u.options!=null&&Object.hasOwnProperty.call(u,"options")&&o.google.protobuf.OneofOptions.encode(u.options,P.uint32(18).fork()).ldelim(),P},z.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},z.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.OneofDescriptorProto;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.name=u.string();break;case 2:n.options=o.google.protobuf.OneofOptions.decode(u,u.uint32());break;default:u.skipType(7&L)}}return n},z.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},z.verify=function(u){return typeof u!="object"||u===null?"object expected":u.name!=null&&u.hasOwnProperty("name")&&!a.isString(u.name)?"name: string expected":u.options!=null&&u.hasOwnProperty("options")&&(u=o.google.protobuf.OneofOptions.verify(u.options),u)?"options."+u:null},z.fromObject=function(u){if(u instanceof o.google.protobuf.OneofDescriptorProto)return u;var P=new o.google.protobuf.OneofDescriptorProto;if(u.name!=null&&(P.name=String(u.name)),u.options!=null){if(typeof u.options!="object")throw TypeError(".google.protobuf.OneofDescriptorProto.options: object expected");P.options=o.google.protobuf.OneofOptions.fromObject(u.options)}return P},z.toObject=function(u,P){var M={};return(P=P||{}).defaults&&(M.name="",M.options=null),u.name!=null&&u.hasOwnProperty("name")&&(M.name=u.name),u.options!=null&&u.hasOwnProperty("options")&&(M.options=o.google.protobuf.OneofOptions.toObject(u.options,P)),M},z.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},z),p.EnumDescriptorProto=(Q.prototype.name="",Q.prototype.value=a.emptyArray,Q.prototype.options=null,Q.prototype.reservedRange=a.emptyArray,Q.prototype.reservedName=a.emptyArray,Q.create=function(u){return new Q(u)},Q.encode=function(u,P){if(P=P||l.create(),u.name!=null&&Object.hasOwnProperty.call(u,"name")&&P.uint32(10).string(u.name),u.value!=null&&u.value.length)for(var M=0;M<u.value.length;++M)o.google.protobuf.EnumValueDescriptorProto.encode(u.value[M],P.uint32(18).fork()).ldelim();if(u.options!=null&&Object.hasOwnProperty.call(u,"options")&&o.google.protobuf.EnumOptions.encode(u.options,P.uint32(26).fork()).ldelim(),u.reservedRange!=null&&u.reservedRange.length)for(M=0;M<u.reservedRange.length;++M)o.google.protobuf.EnumDescriptorProto.EnumReservedRange.encode(u.reservedRange[M],P.uint32(34).fork()).ldelim();if(u.reservedName!=null&&u.reservedName.length)for(M=0;M<u.reservedName.length;++M)P.uint32(42).string(u.reservedName[M]);return P},Q.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},Q.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.EnumDescriptorProto;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.name=u.string();break;case 2:n.value&&n.value.length||(n.value=[]),n.value.push(o.google.protobuf.EnumValueDescriptorProto.decode(u,u.uint32()));break;case 3:n.options=o.google.protobuf.EnumOptions.decode(u,u.uint32());break;case 4:n.reservedRange&&n.reservedRange.length||(n.reservedRange=[]),n.reservedRange.push(o.google.protobuf.EnumDescriptorProto.EnumReservedRange.decode(u,u.uint32()));break;case 5:n.reservedName&&n.reservedName.length||(n.reservedName=[]),n.reservedName.push(u.string());break;default:u.skipType(7&L)}}return n},Q.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},Q.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.name!=null&&u.hasOwnProperty("name")&&!a.isString(u.name))return"name: string expected";if(u.value!=null&&u.hasOwnProperty("value")){if(!Array.isArray(u.value))return"value: array expected";for(var P=0;P<u.value.length;++P)if(M=o.google.protobuf.EnumValueDescriptorProto.verify(u.value[P]))return"value."+M}if(u.options!=null&&u.hasOwnProperty("options")&&(M=o.google.protobuf.EnumOptions.verify(u.options)))return"options."+M;if(u.reservedRange!=null&&u.hasOwnProperty("reservedRange")){if(!Array.isArray(u.reservedRange))return"reservedRange: array expected";for(var M,P=0;P<u.reservedRange.length;++P)if(M=o.google.protobuf.EnumDescriptorProto.EnumReservedRange.verify(u.reservedRange[P]))return"reservedRange."+M}if(u.reservedName!=null&&u.hasOwnProperty("reservedName")){if(!Array.isArray(u.reservedName))return"reservedName: array expected";for(P=0;P<u.reservedName.length;++P)if(!a.isString(u.reservedName[P]))return"reservedName: string[] expected"}return null},Q.fromObject=function(u){if(u instanceof o.google.protobuf.EnumDescriptorProto)return u;var P=new o.google.protobuf.EnumDescriptorProto;if(u.name!=null&&(P.name=String(u.name)),u.value){if(!Array.isArray(u.value))throw TypeError(".google.protobuf.EnumDescriptorProto.value: array expected");P.value=[];for(var M=0;M<u.value.length;++M){if(typeof u.value[M]!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.value: object expected");P.value[M]=o.google.protobuf.EnumValueDescriptorProto.fromObject(u.value[M])}}if(u.options!=null){if(typeof u.options!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.options: object expected");P.options=o.google.protobuf.EnumOptions.fromObject(u.options)}if(u.reservedRange){if(!Array.isArray(u.reservedRange))throw TypeError(".google.protobuf.EnumDescriptorProto.reservedRange: array expected");for(P.reservedRange=[],M=0;M<u.reservedRange.length;++M){if(typeof u.reservedRange[M]!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.reservedRange: object expected");P.reservedRange[M]=o.google.protobuf.EnumDescriptorProto.EnumReservedRange.fromObject(u.reservedRange[M])}}if(u.reservedName){if(!Array.isArray(u.reservedName))throw TypeError(".google.protobuf.EnumDescriptorProto.reservedName: array expected");for(P.reservedName=[],M=0;M<u.reservedName.length;++M)P.reservedName[M]=String(u.reservedName[M])}return P},Q.toObject=function(u,P){var M={};if(((P=P||{}).arrays||P.defaults)&&(M.value=[],M.reservedRange=[],M.reservedName=[]),P.defaults&&(M.name="",M.options=null),u.name!=null&&u.hasOwnProperty("name")&&(M.name=u.name),u.value&&u.value.length){M.value=[];for(var n=0;n<u.value.length;++n)M.value[n]=o.google.protobuf.EnumValueDescriptorProto.toObject(u.value[n],P)}if(u.options!=null&&u.hasOwnProperty("options")&&(M.options=o.google.protobuf.EnumOptions.toObject(u.options,P)),u.reservedRange&&u.reservedRange.length)for(M.reservedRange=[],n=0;n<u.reservedRange.length;++n)M.reservedRange[n]=o.google.protobuf.EnumDescriptorProto.EnumReservedRange.toObject(u.reservedRange[n],P);if(u.reservedName&&u.reservedName.length)for(M.reservedName=[],n=0;n<u.reservedName.length;++n)M.reservedName[n]=u.reservedName[n];return M},Q.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Q.EnumReservedRange=(Y.prototype.start=0,Y.prototype.end=0,Y.create=function(u){return new Y(u)},Y.encode=function(u,P){return P=P||l.create(),u.start!=null&&Object.hasOwnProperty.call(u,"start")&&P.uint32(8).int32(u.start),u.end!=null&&Object.hasOwnProperty.call(u,"end")&&P.uint32(16).int32(u.end),P},Y.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},Y.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.EnumDescriptorProto.EnumReservedRange;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.start=u.int32();break;case 2:n.end=u.int32();break;default:u.skipType(7&L)}}return n},Y.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},Y.verify=function(u){return typeof u!="object"||u===null?"object expected":u.start!=null&&u.hasOwnProperty("start")&&!a.isInteger(u.start)?"start: integer expected":u.end!=null&&u.hasOwnProperty("end")&&!a.isInteger(u.end)?"end: integer expected":null},Y.fromObject=function(u){var P;return u instanceof o.google.protobuf.EnumDescriptorProto.EnumReservedRange?u:(P=new o.google.protobuf.EnumDescriptorProto.EnumReservedRange,u.start!=null&&(P.start=0|u.start),u.end!=null&&(P.end=0|u.end),P)},Y.toObject=function(u,P){var M={};return(P=P||{}).defaults&&(M.start=0,M.end=0),u.start!=null&&u.hasOwnProperty("start")&&(M.start=u.start),u.end!=null&&u.hasOwnProperty("end")&&(M.end=u.end),M},Y.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Y),Q),p.EnumValueDescriptorProto=(te.prototype.name="",te.prototype.number=0,te.prototype.options=null,te.create=function(u){return new te(u)},te.encode=function(u,P){return P=P||l.create(),u.name!=null&&Object.hasOwnProperty.call(u,"name")&&P.uint32(10).string(u.name),u.number!=null&&Object.hasOwnProperty.call(u,"number")&&P.uint32(16).int32(u.number),u.options!=null&&Object.hasOwnProperty.call(u,"options")&&o.google.protobuf.EnumValueOptions.encode(u.options,P.uint32(26).fork()).ldelim(),P},te.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},te.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.EnumValueDescriptorProto;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.name=u.string();break;case 2:n.number=u.int32();break;case 3:n.options=o.google.protobuf.EnumValueOptions.decode(u,u.uint32());break;default:u.skipType(7&L)}}return n},te.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},te.verify=function(u){return typeof u!="object"||u===null?"object expected":u.name!=null&&u.hasOwnProperty("name")&&!a.isString(u.name)?"name: string expected":u.number!=null&&u.hasOwnProperty("number")&&!a.isInteger(u.number)?"number: integer expected":u.options!=null&&u.hasOwnProperty("options")&&(u=o.google.protobuf.EnumValueOptions.verify(u.options),u)?"options."+u:null},te.fromObject=function(u){if(u instanceof o.google.protobuf.EnumValueDescriptorProto)return u;var P=new o.google.protobuf.EnumValueDescriptorProto;if(u.name!=null&&(P.name=String(u.name)),u.number!=null&&(P.number=0|u.number),u.options!=null){if(typeof u.options!="object")throw TypeError(".google.protobuf.EnumValueDescriptorProto.options: object expected");P.options=o.google.protobuf.EnumValueOptions.fromObject(u.options)}return P},te.toObject=function(u,P){var M={};return(P=P||{}).defaults&&(M.name="",M.number=0,M.options=null),u.name!=null&&u.hasOwnProperty("name")&&(M.name=u.name),u.number!=null&&u.hasOwnProperty("number")&&(M.number=u.number),u.options!=null&&u.hasOwnProperty("options")&&(M.options=o.google.protobuf.EnumValueOptions.toObject(u.options,P)),M},te.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},te),p.ServiceDescriptorProto=(ae.prototype.name="",ae.prototype.method=a.emptyArray,ae.prototype.options=null,ae.create=function(u){return new ae(u)},ae.encode=function(u,P){if(P=P||l.create(),u.name!=null&&Object.hasOwnProperty.call(u,"name")&&P.uint32(10).string(u.name),u.method!=null&&u.method.length)for(var M=0;M<u.method.length;++M)o.google.protobuf.MethodDescriptorProto.encode(u.method[M],P.uint32(18).fork()).ldelim();return u.options!=null&&Object.hasOwnProperty.call(u,"options")&&o.google.protobuf.ServiceOptions.encode(u.options,P.uint32(26).fork()).ldelim(),P},ae.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},ae.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.ServiceDescriptorProto;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.name=u.string();break;case 2:n.method&&n.method.length||(n.method=[]),n.method.push(o.google.protobuf.MethodDescriptorProto.decode(u,u.uint32()));break;case 3:n.options=o.google.protobuf.ServiceOptions.decode(u,u.uint32());break;default:u.skipType(7&L)}}return n},ae.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},ae.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.name!=null&&u.hasOwnProperty("name")&&!a.isString(u.name))return"name: string expected";if(u.method!=null&&u.hasOwnProperty("method")){if(!Array.isArray(u.method))return"method: array expected";for(var P=0;P<u.method.length;++P)if(M=o.google.protobuf.MethodDescriptorProto.verify(u.method[P]))return"method."+M}var M;return u.options!=null&&u.hasOwnProperty("options")&&(M=o.google.protobuf.ServiceOptions.verify(u.options))?"options."+M:null},ae.fromObject=function(u){if(u instanceof o.google.protobuf.ServiceDescriptorProto)return u;var P=new o.google.protobuf.ServiceDescriptorProto;if(u.name!=null&&(P.name=String(u.name)),u.method){if(!Array.isArray(u.method))throw TypeError(".google.protobuf.ServiceDescriptorProto.method: array expected");P.method=[];for(var M=0;M<u.method.length;++M){if(typeof u.method[M]!="object")throw TypeError(".google.protobuf.ServiceDescriptorProto.method: object expected");P.method[M]=o.google.protobuf.MethodDescriptorProto.fromObject(u.method[M])}}if(u.options!=null){if(typeof u.options!="object")throw TypeError(".google.protobuf.ServiceDescriptorProto.options: object expected");P.options=o.google.protobuf.ServiceOptions.fromObject(u.options)}return P},ae.toObject=function(u,P){var M={};if(((P=P||{}).arrays||P.defaults)&&(M.method=[]),P.defaults&&(M.name="",M.options=null),u.name!=null&&u.hasOwnProperty("name")&&(M.name=u.name),u.method&&u.method.length){M.method=[];for(var n=0;n<u.method.length;++n)M.method[n]=o.google.protobuf.MethodDescriptorProto.toObject(u.method[n],P)}return u.options!=null&&u.hasOwnProperty("options")&&(M.options=o.google.protobuf.ServiceOptions.toObject(u.options,P)),M},ae.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ae),p.MethodDescriptorProto=(ue.prototype.name="",ue.prototype.inputType="",ue.prototype.outputType="",ue.prototype.options=null,ue.prototype.clientStreaming=!1,ue.prototype.serverStreaming=!1,ue.create=function(u){return new ue(u)},ue.encode=function(u,P){return P=P||l.create(),u.name!=null&&Object.hasOwnProperty.call(u,"name")&&P.uint32(10).string(u.name),u.inputType!=null&&Object.hasOwnProperty.call(u,"inputType")&&P.uint32(18).string(u.inputType),u.outputType!=null&&Object.hasOwnProperty.call(u,"outputType")&&P.uint32(26).string(u.outputType),u.options!=null&&Object.hasOwnProperty.call(u,"options")&&o.google.protobuf.MethodOptions.encode(u.options,P.uint32(34).fork()).ldelim(),u.clientStreaming!=null&&Object.hasOwnProperty.call(u,"clientStreaming")&&P.uint32(40).bool(u.clientStreaming),u.serverStreaming!=null&&Object.hasOwnProperty.call(u,"serverStreaming")&&P.uint32(48).bool(u.serverStreaming),P},ue.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},ue.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.MethodDescriptorProto;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.name=u.string();break;case 2:n.inputType=u.string();break;case 3:n.outputType=u.string();break;case 4:n.options=o.google.protobuf.MethodOptions.decode(u,u.uint32());break;case 5:n.clientStreaming=u.bool();break;case 6:n.serverStreaming=u.bool();break;default:u.skipType(7&L)}}return n},ue.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},ue.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.name!=null&&u.hasOwnProperty("name")&&!a.isString(u.name))return"name: string expected";if(u.inputType!=null&&u.hasOwnProperty("inputType")&&!a.isString(u.inputType))return"inputType: string expected";if(u.outputType!=null&&u.hasOwnProperty("outputType")&&!a.isString(u.outputType))return"outputType: string expected";if(u.options!=null&&u.hasOwnProperty("options")){var P=o.google.protobuf.MethodOptions.verify(u.options);if(P)return"options."+P}return u.clientStreaming!=null&&u.hasOwnProperty("clientStreaming")&&typeof u.clientStreaming!="boolean"?"clientStreaming: boolean expected":u.serverStreaming!=null&&u.hasOwnProperty("serverStreaming")&&typeof u.serverStreaming!="boolean"?"serverStreaming: boolean expected":null},ue.fromObject=function(u){if(u instanceof o.google.protobuf.MethodDescriptorProto)return u;var P=new o.google.protobuf.MethodDescriptorProto;if(u.name!=null&&(P.name=String(u.name)),u.inputType!=null&&(P.inputType=String(u.inputType)),u.outputType!=null&&(P.outputType=String(u.outputType)),u.options!=null){if(typeof u.options!="object")throw TypeError(".google.protobuf.MethodDescriptorProto.options: object expected");P.options=o.google.protobuf.MethodOptions.fromObject(u.options)}return u.clientStreaming!=null&&(P.clientStreaming=!!u.clientStreaming),u.serverStreaming!=null&&(P.serverStreaming=!!u.serverStreaming),P},ue.toObject=function(u,P){var M={};return(P=P||{}).defaults&&(M.name="",M.inputType="",M.outputType="",M.options=null,M.clientStreaming=!1,M.serverStreaming=!1),u.name!=null&&u.hasOwnProperty("name")&&(M.name=u.name),u.inputType!=null&&u.hasOwnProperty("inputType")&&(M.inputType=u.inputType),u.outputType!=null&&u.hasOwnProperty("outputType")&&(M.outputType=u.outputType),u.options!=null&&u.hasOwnProperty("options")&&(M.options=o.google.protobuf.MethodOptions.toObject(u.options,P)),u.clientStreaming!=null&&u.hasOwnProperty("clientStreaming")&&(M.clientStreaming=u.clientStreaming),u.serverStreaming!=null&&u.hasOwnProperty("serverStreaming")&&(M.serverStreaming=u.serverStreaming),M},ue.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ue),p.FileOptions=(ee.prototype.javaPackage="",ee.prototype.javaOuterClassname="",ee.prototype.javaMultipleFiles=!1,ee.prototype.javaGenerateEqualsAndHash=!1,ee.prototype.javaStringCheckUtf8=!1,ee.prototype.optimizeFor=1,ee.prototype.goPackage="",ee.prototype.ccGenericServices=!1,ee.prototype.javaGenericServices=!1,ee.prototype.pyGenericServices=!1,ee.prototype.phpGenericServices=!1,ee.prototype.deprecated=!1,ee.prototype.ccEnableArenas=!0,ee.prototype.objcClassPrefix="",ee.prototype.csharpNamespace="",ee.prototype.swiftPrefix="",ee.prototype.phpClassPrefix="",ee.prototype.phpNamespace="",ee.prototype.phpMetadataNamespace="",ee.prototype.rubyPackage="",ee.prototype.uninterpretedOption=a.emptyArray,ee.create=function(u){return new ee(u)},ee.encode=function(u,P){if(P=P||l.create(),u.javaPackage!=null&&Object.hasOwnProperty.call(u,"javaPackage")&&P.uint32(10).string(u.javaPackage),u.javaOuterClassname!=null&&Object.hasOwnProperty.call(u,"javaOuterClassname")&&P.uint32(66).string(u.javaOuterClassname),u.optimizeFor!=null&&Object.hasOwnProperty.call(u,"optimizeFor")&&P.uint32(72).int32(u.optimizeFor),u.javaMultipleFiles!=null&&Object.hasOwnProperty.call(u,"javaMultipleFiles")&&P.uint32(80).bool(u.javaMultipleFiles),u.goPackage!=null&&Object.hasOwnProperty.call(u,"goPackage")&&P.uint32(90).string(u.goPackage),u.ccGenericServices!=null&&Object.hasOwnProperty.call(u,"ccGenericServices")&&P.uint32(128).bool(u.ccGenericServices),u.javaGenericServices!=null&&Object.hasOwnProperty.call(u,"javaGenericServices")&&P.uint32(136).bool(u.javaGenericServices),u.pyGenericServices!=null&&Object.hasOwnProperty.call(u,"pyGenericServices")&&P.uint32(144).bool(u.pyGenericServices),u.javaGenerateEqualsAndHash!=null&&Object.hasOwnProperty.call(u,"javaGenerateEqualsAndHash")&&P.uint32(160).bool(u.javaGenerateEqualsAndHash),u.deprecated!=null&&Object.hasOwnProperty.call(u,"deprecated")&&P.uint32(184).bool(u.deprecated),u.javaStringCheckUtf8!=null&&Object.hasOwnProperty.call(u,"javaStringCheckUtf8")&&P.uint32(216).bool(u.javaStringCheckUtf8),u.ccEnableArenas!=null&&Object.hasOwnProperty.call(u,"ccEnableArenas")&&P.uint32(248).bool(u.ccEnableArenas),u.objcClassPrefix!=null&&Object.hasOwnProperty.call(u,"objcClassPrefix")&&P.uint32(290).string(u.objcClassPrefix),u.csharpNamespace!=null&&Object.hasOwnProperty.call(u,"csharpNamespace")&&P.uint32(298).string(u.csharpNamespace),u.swiftPrefix!=null&&Object.hasOwnProperty.call(u,"swiftPrefix")&&P.uint32(314).string(u.swiftPrefix),u.phpClassPrefix!=null&&Object.hasOwnProperty.call(u,"phpClassPrefix")&&P.uint32(322).string(u.phpClassPrefix),u.phpNamespace!=null&&Object.hasOwnProperty.call(u,"phpNamespace")&&P.uint32(330).string(u.phpNamespace),u.phpGenericServices!=null&&Object.hasOwnProperty.call(u,"phpGenericServices")&&P.uint32(336).bool(u.phpGenericServices),u.phpMetadataNamespace!=null&&Object.hasOwnProperty.call(u,"phpMetadataNamespace")&&P.uint32(354).string(u.phpMetadataNamespace),u.rubyPackage!=null&&Object.hasOwnProperty.call(u,"rubyPackage")&&P.uint32(362).string(u.rubyPackage),u.uninterpretedOption!=null&&u.uninterpretedOption.length)for(var M=0;M<u.uninterpretedOption.length;++M)o.google.protobuf.UninterpretedOption.encode(u.uninterpretedOption[M],P.uint32(7994).fork()).ldelim();return P},ee.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},ee.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.FileOptions;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.javaPackage=u.string();break;case 8:n.javaOuterClassname=u.string();break;case 10:n.javaMultipleFiles=u.bool();break;case 20:n.javaGenerateEqualsAndHash=u.bool();break;case 27:n.javaStringCheckUtf8=u.bool();break;case 9:n.optimizeFor=u.int32();break;case 11:n.goPackage=u.string();break;case 16:n.ccGenericServices=u.bool();break;case 17:n.javaGenericServices=u.bool();break;case 18:n.pyGenericServices=u.bool();break;case 42:n.phpGenericServices=u.bool();break;case 23:n.deprecated=u.bool();break;case 31:n.ccEnableArenas=u.bool();break;case 36:n.objcClassPrefix=u.string();break;case 37:n.csharpNamespace=u.string();break;case 39:n.swiftPrefix=u.string();break;case 40:n.phpClassPrefix=u.string();break;case 41:n.phpNamespace=u.string();break;case 44:n.phpMetadataNamespace=u.string();break;case 45:n.rubyPackage=u.string();break;case 999:n.uninterpretedOption&&n.uninterpretedOption.length||(n.uninterpretedOption=[]),n.uninterpretedOption.push(o.google.protobuf.UninterpretedOption.decode(u,u.uint32()));break;default:u.skipType(7&L)}}return n},ee.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},ee.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.javaPackage!=null&&u.hasOwnProperty("javaPackage")&&!a.isString(u.javaPackage))return"javaPackage: string expected";if(u.javaOuterClassname!=null&&u.hasOwnProperty("javaOuterClassname")&&!a.isString(u.javaOuterClassname))return"javaOuterClassname: string expected";if(u.javaMultipleFiles!=null&&u.hasOwnProperty("javaMultipleFiles")&&typeof u.javaMultipleFiles!="boolean")return"javaMultipleFiles: boolean expected";if(u.javaGenerateEqualsAndHash!=null&&u.hasOwnProperty("javaGenerateEqualsAndHash")&&typeof u.javaGenerateEqualsAndHash!="boolean")return"javaGenerateEqualsAndHash: boolean expected";if(u.javaStringCheckUtf8!=null&&u.hasOwnProperty("javaStringCheckUtf8")&&typeof u.javaStringCheckUtf8!="boolean")return"javaStringCheckUtf8: boolean expected";if(u.optimizeFor!=null&&u.hasOwnProperty("optimizeFor"))switch(u.optimizeFor){default:return"optimizeFor: enum value expected";case 1:case 2:case 3:}if(u.goPackage!=null&&u.hasOwnProperty("goPackage")&&!a.isString(u.goPackage))return"goPackage: string expected";if(u.ccGenericServices!=null&&u.hasOwnProperty("ccGenericServices")&&typeof u.ccGenericServices!="boolean")return"ccGenericServices: boolean expected";if(u.javaGenericServices!=null&&u.hasOwnProperty("javaGenericServices")&&typeof u.javaGenericServices!="boolean")return"javaGenericServices: boolean expected";if(u.pyGenericServices!=null&&u.hasOwnProperty("pyGenericServices")&&typeof u.pyGenericServices!="boolean")return"pyGenericServices: boolean expected";if(u.phpGenericServices!=null&&u.hasOwnProperty("phpGenericServices")&&typeof u.phpGenericServices!="boolean")return"phpGenericServices: boolean expected";if(u.deprecated!=null&&u.hasOwnProperty("deprecated")&&typeof u.deprecated!="boolean")return"deprecated: boolean expected";if(u.ccEnableArenas!=null&&u.hasOwnProperty("ccEnableArenas")&&typeof u.ccEnableArenas!="boolean")return"ccEnableArenas: boolean expected";if(u.objcClassPrefix!=null&&u.hasOwnProperty("objcClassPrefix")&&!a.isString(u.objcClassPrefix))return"objcClassPrefix: string expected";if(u.csharpNamespace!=null&&u.hasOwnProperty("csharpNamespace")&&!a.isString(u.csharpNamespace))return"csharpNamespace: string expected";if(u.swiftPrefix!=null&&u.hasOwnProperty("swiftPrefix")&&!a.isString(u.swiftPrefix))return"swiftPrefix: string expected";if(u.phpClassPrefix!=null&&u.hasOwnProperty("phpClassPrefix")&&!a.isString(u.phpClassPrefix))return"phpClassPrefix: string expected";if(u.phpNamespace!=null&&u.hasOwnProperty("phpNamespace")&&!a.isString(u.phpNamespace))return"phpNamespace: string expected";if(u.phpMetadataNamespace!=null&&u.hasOwnProperty("phpMetadataNamespace")&&!a.isString(u.phpMetadataNamespace))return"phpMetadataNamespace: string expected";if(u.rubyPackage!=null&&u.hasOwnProperty("rubyPackage")&&!a.isString(u.rubyPackage))return"rubyPackage: string expected";if(u.uninterpretedOption!=null&&u.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(u.uninterpretedOption))return"uninterpretedOption: array expected";for(var P=0;P<u.uninterpretedOption.length;++P){var M=o.google.protobuf.UninterpretedOption.verify(u.uninterpretedOption[P]);if(M)return"uninterpretedOption."+M}}return null},ee.fromObject=function(u){if(u instanceof o.google.protobuf.FileOptions)return u;var P=new o.google.protobuf.FileOptions;switch(u.javaPackage!=null&&(P.javaPackage=String(u.javaPackage)),u.javaOuterClassname!=null&&(P.javaOuterClassname=String(u.javaOuterClassname)),u.javaMultipleFiles!=null&&(P.javaMultipleFiles=!!u.javaMultipleFiles),u.javaGenerateEqualsAndHash!=null&&(P.javaGenerateEqualsAndHash=!!u.javaGenerateEqualsAndHash),u.javaStringCheckUtf8!=null&&(P.javaStringCheckUtf8=!!u.javaStringCheckUtf8),u.optimizeFor){case"SPEED":case 1:P.optimizeFor=1;break;case"CODE_SIZE":case 2:P.optimizeFor=2;break;case"LITE_RUNTIME":case 3:P.optimizeFor=3}if(u.goPackage!=null&&(P.goPackage=String(u.goPackage)),u.ccGenericServices!=null&&(P.ccGenericServices=!!u.ccGenericServices),u.javaGenericServices!=null&&(P.javaGenericServices=!!u.javaGenericServices),u.pyGenericServices!=null&&(P.pyGenericServices=!!u.pyGenericServices),u.phpGenericServices!=null&&(P.phpGenericServices=!!u.phpGenericServices),u.deprecated!=null&&(P.deprecated=!!u.deprecated),u.ccEnableArenas!=null&&(P.ccEnableArenas=!!u.ccEnableArenas),u.objcClassPrefix!=null&&(P.objcClassPrefix=String(u.objcClassPrefix)),u.csharpNamespace!=null&&(P.csharpNamespace=String(u.csharpNamespace)),u.swiftPrefix!=null&&(P.swiftPrefix=String(u.swiftPrefix)),u.phpClassPrefix!=null&&(P.phpClassPrefix=String(u.phpClassPrefix)),u.phpNamespace!=null&&(P.phpNamespace=String(u.phpNamespace)),u.phpMetadataNamespace!=null&&(P.phpMetadataNamespace=String(u.phpMetadataNamespace)),u.rubyPackage!=null&&(P.rubyPackage=String(u.rubyPackage)),u.uninterpretedOption){if(!Array.isArray(u.uninterpretedOption))throw TypeError(".google.protobuf.FileOptions.uninterpretedOption: array expected");P.uninterpretedOption=[];for(var M=0;M<u.uninterpretedOption.length;++M){if(typeof u.uninterpretedOption[M]!="object")throw TypeError(".google.protobuf.FileOptions.uninterpretedOption: object expected");P.uninterpretedOption[M]=o.google.protobuf.UninterpretedOption.fromObject(u.uninterpretedOption[M])}}return P},ee.toObject=function(u,P){var M={};if(((P=P||{}).arrays||P.defaults)&&(M.uninterpretedOption=[]),P.defaults&&(M.javaPackage="",M.javaOuterClassname="",M.optimizeFor=P.enums===String?"SPEED":1,M.javaMultipleFiles=!1,M.goPackage="",M.ccGenericServices=!1,M.javaGenericServices=!1,M.pyGenericServices=!1,M.javaGenerateEqualsAndHash=!1,M.deprecated=!1,M.javaStringCheckUtf8=!1,M.ccEnableArenas=!0,M.objcClassPrefix="",M.csharpNamespace="",M.swiftPrefix="",M.phpClassPrefix="",M.phpNamespace="",M.phpGenericServices=!1,M.phpMetadataNamespace="",M.rubyPackage=""),u.javaPackage!=null&&u.hasOwnProperty("javaPackage")&&(M.javaPackage=u.javaPackage),u.javaOuterClassname!=null&&u.hasOwnProperty("javaOuterClassname")&&(M.javaOuterClassname=u.javaOuterClassname),u.optimizeFor!=null&&u.hasOwnProperty("optimizeFor")&&(M.optimizeFor=P.enums===String?o.google.protobuf.FileOptions.OptimizeMode[u.optimizeFor]:u.optimizeFor),u.javaMultipleFiles!=null&&u.hasOwnProperty("javaMultipleFiles")&&(M.javaMultipleFiles=u.javaMultipleFiles),u.goPackage!=null&&u.hasOwnProperty("goPackage")&&(M.goPackage=u.goPackage),u.ccGenericServices!=null&&u.hasOwnProperty("ccGenericServices")&&(M.ccGenericServices=u.ccGenericServices),u.javaGenericServices!=null&&u.hasOwnProperty("javaGenericServices")&&(M.javaGenericServices=u.javaGenericServices),u.pyGenericServices!=null&&u.hasOwnProperty("pyGenericServices")&&(M.pyGenericServices=u.pyGenericServices),u.javaGenerateEqualsAndHash!=null&&u.hasOwnProperty("javaGenerateEqualsAndHash")&&(M.javaGenerateEqualsAndHash=u.javaGenerateEqualsAndHash),u.deprecated!=null&&u.hasOwnProperty("deprecated")&&(M.deprecated=u.deprecated),u.javaStringCheckUtf8!=null&&u.hasOwnProperty("javaStringCheckUtf8")&&(M.javaStringCheckUtf8=u.javaStringCheckUtf8),u.ccEnableArenas!=null&&u.hasOwnProperty("ccEnableArenas")&&(M.ccEnableArenas=u.ccEnableArenas),u.objcClassPrefix!=null&&u.hasOwnProperty("objcClassPrefix")&&(M.objcClassPrefix=u.objcClassPrefix),u.csharpNamespace!=null&&u.hasOwnProperty("csharpNamespace")&&(M.csharpNamespace=u.csharpNamespace),u.swiftPrefix!=null&&u.hasOwnProperty("swiftPrefix")&&(M.swiftPrefix=u.swiftPrefix),u.phpClassPrefix!=null&&u.hasOwnProperty("phpClassPrefix")&&(M.phpClassPrefix=u.phpClassPrefix),u.phpNamespace!=null&&u.hasOwnProperty("phpNamespace")&&(M.phpNamespace=u.phpNamespace),u.phpGenericServices!=null&&u.hasOwnProperty("phpGenericServices")&&(M.phpGenericServices=u.phpGenericServices),u.phpMetadataNamespace!=null&&u.hasOwnProperty("phpMetadataNamespace")&&(M.phpMetadataNamespace=u.phpMetadataNamespace),u.rubyPackage!=null&&u.hasOwnProperty("rubyPackage")&&(M.rubyPackage=u.rubyPackage),u.uninterpretedOption&&u.uninterpretedOption.length){M.uninterpretedOption=[];for(var n=0;n<u.uninterpretedOption.length;++n)M.uninterpretedOption[n]=o.google.protobuf.UninterpretedOption.toObject(u.uninterpretedOption[n],P)}return M},ee.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ee.OptimizeMode=(g={},(s=Object.create(g))[g[1]="SPEED"]=1,s[g[2]="CODE_SIZE"]=2,s[g[3]="LITE_RUNTIME"]=3,s),ee),p.MessageOptions=(oe.prototype.messageSetWireFormat=!1,oe.prototype.noStandardDescriptorAccessor=!1,oe.prototype.deprecated=!1,oe.prototype.mapEntry=!1,oe.prototype.uninterpretedOption=a.emptyArray,oe.create=function(u){return new oe(u)},oe.encode=function(u,P){if(P=P||l.create(),u.messageSetWireFormat!=null&&Object.hasOwnProperty.call(u,"messageSetWireFormat")&&P.uint32(8).bool(u.messageSetWireFormat),u.noStandardDescriptorAccessor!=null&&Object.hasOwnProperty.call(u,"noStandardDescriptorAccessor")&&P.uint32(16).bool(u.noStandardDescriptorAccessor),u.deprecated!=null&&Object.hasOwnProperty.call(u,"deprecated")&&P.uint32(24).bool(u.deprecated),u.mapEntry!=null&&Object.hasOwnProperty.call(u,"mapEntry")&&P.uint32(56).bool(u.mapEntry),u.uninterpretedOption!=null&&u.uninterpretedOption.length)for(var M=0;M<u.uninterpretedOption.length;++M)o.google.protobuf.UninterpretedOption.encode(u.uninterpretedOption[M],P.uint32(7994).fork()).ldelim();return P},oe.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},oe.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.MessageOptions;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.messageSetWireFormat=u.bool();break;case 2:n.noStandardDescriptorAccessor=u.bool();break;case 3:n.deprecated=u.bool();break;case 7:n.mapEntry=u.bool();break;case 999:n.uninterpretedOption&&n.uninterpretedOption.length||(n.uninterpretedOption=[]),n.uninterpretedOption.push(o.google.protobuf.UninterpretedOption.decode(u,u.uint32()));break;default:u.skipType(7&L)}}return n},oe.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},oe.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.messageSetWireFormat!=null&&u.hasOwnProperty("messageSetWireFormat")&&typeof u.messageSetWireFormat!="boolean")return"messageSetWireFormat: boolean expected";if(u.noStandardDescriptorAccessor!=null&&u.hasOwnProperty("noStandardDescriptorAccessor")&&typeof u.noStandardDescriptorAccessor!="boolean")return"noStandardDescriptorAccessor: boolean expected";if(u.deprecated!=null&&u.hasOwnProperty("deprecated")&&typeof u.deprecated!="boolean")return"deprecated: boolean expected";if(u.mapEntry!=null&&u.hasOwnProperty("mapEntry")&&typeof u.mapEntry!="boolean")return"mapEntry: boolean expected";if(u.uninterpretedOption!=null&&u.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(u.uninterpretedOption))return"uninterpretedOption: array expected";for(var P=0;P<u.uninterpretedOption.length;++P){var M=o.google.protobuf.UninterpretedOption.verify(u.uninterpretedOption[P]);if(M)return"uninterpretedOption."+M}}return null},oe.fromObject=function(u){if(u instanceof o.google.protobuf.MessageOptions)return u;var P=new o.google.protobuf.MessageOptions;if(u.messageSetWireFormat!=null&&(P.messageSetWireFormat=!!u.messageSetWireFormat),u.noStandardDescriptorAccessor!=null&&(P.noStandardDescriptorAccessor=!!u.noStandardDescriptorAccessor),u.deprecated!=null&&(P.deprecated=!!u.deprecated),u.mapEntry!=null&&(P.mapEntry=!!u.mapEntry),u.uninterpretedOption){if(!Array.isArray(u.uninterpretedOption))throw TypeError(".google.protobuf.MessageOptions.uninterpretedOption: array expected");P.uninterpretedOption=[];for(var M=0;M<u.uninterpretedOption.length;++M){if(typeof u.uninterpretedOption[M]!="object")throw TypeError(".google.protobuf.MessageOptions.uninterpretedOption: object expected");P.uninterpretedOption[M]=o.google.protobuf.UninterpretedOption.fromObject(u.uninterpretedOption[M])}}return P},oe.toObject=function(u,P){var M={};if(((P=P||{}).arrays||P.defaults)&&(M.uninterpretedOption=[]),P.defaults&&(M.messageSetWireFormat=!1,M.noStandardDescriptorAccessor=!1,M.deprecated=!1,M.mapEntry=!1),u.messageSetWireFormat!=null&&u.hasOwnProperty("messageSetWireFormat")&&(M.messageSetWireFormat=u.messageSetWireFormat),u.noStandardDescriptorAccessor!=null&&u.hasOwnProperty("noStandardDescriptorAccessor")&&(M.noStandardDescriptorAccessor=u.noStandardDescriptorAccessor),u.deprecated!=null&&u.hasOwnProperty("deprecated")&&(M.deprecated=u.deprecated),u.mapEntry!=null&&u.hasOwnProperty("mapEntry")&&(M.mapEntry=u.mapEntry),u.uninterpretedOption&&u.uninterpretedOption.length){M.uninterpretedOption=[];for(var n=0;n<u.uninterpretedOption.length;++n)M.uninterpretedOption[n]=o.google.protobuf.UninterpretedOption.toObject(u.uninterpretedOption[n],P)}return M},oe.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},oe),p.FieldOptions=(de.prototype.ctype=0,de.prototype.packed=!1,de.prototype.jstype=0,de.prototype.lazy=!1,de.prototype.deprecated=!1,de.prototype.weak=!1,de.prototype.uninterpretedOption=a.emptyArray,de.create=function(u){return new de(u)},de.encode=function(u,P){if(P=P||l.create(),u.ctype!=null&&Object.hasOwnProperty.call(u,"ctype")&&P.uint32(8).int32(u.ctype),u.packed!=null&&Object.hasOwnProperty.call(u,"packed")&&P.uint32(16).bool(u.packed),u.deprecated!=null&&Object.hasOwnProperty.call(u,"deprecated")&&P.uint32(24).bool(u.deprecated),u.lazy!=null&&Object.hasOwnProperty.call(u,"lazy")&&P.uint32(40).bool(u.lazy),u.jstype!=null&&Object.hasOwnProperty.call(u,"jstype")&&P.uint32(48).int32(u.jstype),u.weak!=null&&Object.hasOwnProperty.call(u,"weak")&&P.uint32(80).bool(u.weak),u.uninterpretedOption!=null&&u.uninterpretedOption.length)for(var M=0;M<u.uninterpretedOption.length;++M)o.google.protobuf.UninterpretedOption.encode(u.uninterpretedOption[M],P.uint32(7994).fork()).ldelim();return P},de.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},de.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.FieldOptions;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.ctype=u.int32();break;case 2:n.packed=u.bool();break;case 6:n.jstype=u.int32();break;case 5:n.lazy=u.bool();break;case 3:n.deprecated=u.bool();break;case 10:n.weak=u.bool();break;case 999:n.uninterpretedOption&&n.uninterpretedOption.length||(n.uninterpretedOption=[]),n.uninterpretedOption.push(o.google.protobuf.UninterpretedOption.decode(u,u.uint32()));break;default:u.skipType(7&L)}}return n},de.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},de.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.ctype!=null&&u.hasOwnProperty("ctype"))switch(u.ctype){default:return"ctype: enum value expected";case 0:case 1:case 2:}if(u.packed!=null&&u.hasOwnProperty("packed")&&typeof u.packed!="boolean")return"packed: boolean expected";if(u.jstype!=null&&u.hasOwnProperty("jstype"))switch(u.jstype){default:return"jstype: enum value expected";case 0:case 1:case 2:}if(u.lazy!=null&&u.hasOwnProperty("lazy")&&typeof u.lazy!="boolean")return"lazy: boolean expected";if(u.deprecated!=null&&u.hasOwnProperty("deprecated")&&typeof u.deprecated!="boolean")return"deprecated: boolean expected";if(u.weak!=null&&u.hasOwnProperty("weak")&&typeof u.weak!="boolean")return"weak: boolean expected";if(u.uninterpretedOption!=null&&u.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(u.uninterpretedOption))return"uninterpretedOption: array expected";for(var P=0;P<u.uninterpretedOption.length;++P){var M=o.google.protobuf.UninterpretedOption.verify(u.uninterpretedOption[P]);if(M)return"uninterpretedOption."+M}}return null},de.fromObject=function(u){if(u instanceof o.google.protobuf.FieldOptions)return u;var P=new o.google.protobuf.FieldOptions;switch(u.ctype){case"STRING":case 0:P.ctype=0;break;case"CORD":case 1:P.ctype=1;break;case"STRING_PIECE":case 2:P.ctype=2}switch(u.packed!=null&&(P.packed=!!u.packed),u.jstype){case"JS_NORMAL":case 0:P.jstype=0;break;case"JS_STRING":case 1:P.jstype=1;break;case"JS_NUMBER":case 2:P.jstype=2}if(u.lazy!=null&&(P.lazy=!!u.lazy),u.deprecated!=null&&(P.deprecated=!!u.deprecated),u.weak!=null&&(P.weak=!!u.weak),u.uninterpretedOption){if(!Array.isArray(u.uninterpretedOption))throw TypeError(".google.protobuf.FieldOptions.uninterpretedOption: array expected");P.uninterpretedOption=[];for(var M=0;M<u.uninterpretedOption.length;++M){if(typeof u.uninterpretedOption[M]!="object")throw TypeError(".google.protobuf.FieldOptions.uninterpretedOption: object expected");P.uninterpretedOption[M]=o.google.protobuf.UninterpretedOption.fromObject(u.uninterpretedOption[M])}}return P},de.toObject=function(u,P){var M={};if(((P=P||{}).arrays||P.defaults)&&(M.uninterpretedOption=[]),P.defaults&&(M.ctype=P.enums===String?"STRING":0,M.packed=!1,M.deprecated=!1,M.lazy=!1,M.jstype=P.enums===String?"JS_NORMAL":0,M.weak=!1),u.ctype!=null&&u.hasOwnProperty("ctype")&&(M.ctype=P.enums===String?o.google.protobuf.FieldOptions.CType[u.ctype]:u.ctype),u.packed!=null&&u.hasOwnProperty("packed")&&(M.packed=u.packed),u.deprecated!=null&&u.hasOwnProperty("deprecated")&&(M.deprecated=u.deprecated),u.lazy!=null&&u.hasOwnProperty("lazy")&&(M.lazy=u.lazy),u.jstype!=null&&u.hasOwnProperty("jstype")&&(M.jstype=P.enums===String?o.google.protobuf.FieldOptions.JSType[u.jstype]:u.jstype),u.weak!=null&&u.hasOwnProperty("weak")&&(M.weak=u.weak),u.uninterpretedOption&&u.uninterpretedOption.length){M.uninterpretedOption=[];for(var n=0;n<u.uninterpretedOption.length;++n)M.uninterpretedOption[n]=o.google.protobuf.UninterpretedOption.toObject(u.uninterpretedOption[n],P)}return M},de.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},de.CType=(g={},(s=Object.create(g))[g[0]="STRING"]=0,s[g[1]="CORD"]=1,s[g[2]="STRING_PIECE"]=2,s),de.JSType=(g={},(s=Object.create(g))[g[0]="JS_NORMAL"]=0,s[g[1]="JS_STRING"]=1,s[g[2]="JS_NUMBER"]=2,s),de),p.OneofOptions=(he.prototype.uninterpretedOption=a.emptyArray,he.create=function(u){return new he(u)},he.encode=function(u,P){if(P=P||l.create(),u.uninterpretedOption!=null&&u.uninterpretedOption.length)for(var M=0;M<u.uninterpretedOption.length;++M)o.google.protobuf.UninterpretedOption.encode(u.uninterpretedOption[M],P.uint32(7994).fork()).ldelim();return P},he.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},he.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.OneofOptions;u.pos<M;){var L=u.uint32();L>>>3==999?(n.uninterpretedOption&&n.uninterpretedOption.length||(n.uninterpretedOption=[]),n.uninterpretedOption.push(o.google.protobuf.UninterpretedOption.decode(u,u.uint32()))):u.skipType(7&L)}return n},he.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},he.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.uninterpretedOption!=null&&u.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(u.uninterpretedOption))return"uninterpretedOption: array expected";for(var P=0;P<u.uninterpretedOption.length;++P){var M=o.google.protobuf.UninterpretedOption.verify(u.uninterpretedOption[P]);if(M)return"uninterpretedOption."+M}}return null},he.fromObject=function(u){if(u instanceof o.google.protobuf.OneofOptions)return u;var P=new o.google.protobuf.OneofOptions;if(u.uninterpretedOption){if(!Array.isArray(u.uninterpretedOption))throw TypeError(".google.protobuf.OneofOptions.uninterpretedOption: array expected");P.uninterpretedOption=[];for(var M=0;M<u.uninterpretedOption.length;++M){if(typeof u.uninterpretedOption[M]!="object")throw TypeError(".google.protobuf.OneofOptions.uninterpretedOption: object expected");P.uninterpretedOption[M]=o.google.protobuf.UninterpretedOption.fromObject(u.uninterpretedOption[M])}}return P},he.toObject=function(u,P){var M={};if(((P=P||{}).arrays||P.defaults)&&(M.uninterpretedOption=[]),u.uninterpretedOption&&u.uninterpretedOption.length){M.uninterpretedOption=[];for(var n=0;n<u.uninterpretedOption.length;++n)M.uninterpretedOption[n]=o.google.protobuf.UninterpretedOption.toObject(u.uninterpretedOption[n],P)}return M},he.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},he),p.EnumOptions=(Ee.prototype.allowAlias=!1,Ee.prototype.deprecated=!1,Ee.prototype.uninterpretedOption=a.emptyArray,Ee.create=function(u){return new Ee(u)},Ee.encode=function(u,P){if(P=P||l.create(),u.allowAlias!=null&&Object.hasOwnProperty.call(u,"allowAlias")&&P.uint32(16).bool(u.allowAlias),u.deprecated!=null&&Object.hasOwnProperty.call(u,"deprecated")&&P.uint32(24).bool(u.deprecated),u.uninterpretedOption!=null&&u.uninterpretedOption.length)for(var M=0;M<u.uninterpretedOption.length;++M)o.google.protobuf.UninterpretedOption.encode(u.uninterpretedOption[M],P.uint32(7994).fork()).ldelim();return P},Ee.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},Ee.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.EnumOptions;u.pos<M;){var L=u.uint32();switch(L>>>3){case 2:n.allowAlias=u.bool();break;case 3:n.deprecated=u.bool();break;case 999:n.uninterpretedOption&&n.uninterpretedOption.length||(n.uninterpretedOption=[]),n.uninterpretedOption.push(o.google.protobuf.UninterpretedOption.decode(u,u.uint32()));break;default:u.skipType(7&L)}}return n},Ee.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},Ee.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.allowAlias!=null&&u.hasOwnProperty("allowAlias")&&typeof u.allowAlias!="boolean")return"allowAlias: boolean expected";if(u.deprecated!=null&&u.hasOwnProperty("deprecated")&&typeof u.deprecated!="boolean")return"deprecated: boolean expected";if(u.uninterpretedOption!=null&&u.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(u.uninterpretedOption))return"uninterpretedOption: array expected";for(var P=0;P<u.uninterpretedOption.length;++P){var M=o.google.protobuf.UninterpretedOption.verify(u.uninterpretedOption[P]);if(M)return"uninterpretedOption."+M}}return null},Ee.fromObject=function(u){if(u instanceof o.google.protobuf.EnumOptions)return u;var P=new o.google.protobuf.EnumOptions;if(u.allowAlias!=null&&(P.allowAlias=!!u.allowAlias),u.deprecated!=null&&(P.deprecated=!!u.deprecated),u.uninterpretedOption){if(!Array.isArray(u.uninterpretedOption))throw TypeError(".google.protobuf.EnumOptions.uninterpretedOption: array expected");P.uninterpretedOption=[];for(var M=0;M<u.uninterpretedOption.length;++M){if(typeof u.uninterpretedOption[M]!="object")throw TypeError(".google.protobuf.EnumOptions.uninterpretedOption: object expected");P.uninterpretedOption[M]=o.google.protobuf.UninterpretedOption.fromObject(u.uninterpretedOption[M])}}return P},Ee.toObject=function(u,P){var M={};if(((P=P||{}).arrays||P.defaults)&&(M.uninterpretedOption=[]),P.defaults&&(M.allowAlias=!1,M.deprecated=!1),u.allowAlias!=null&&u.hasOwnProperty("allowAlias")&&(M.allowAlias=u.allowAlias),u.deprecated!=null&&u.hasOwnProperty("deprecated")&&(M.deprecated=u.deprecated),u.uninterpretedOption&&u.uninterpretedOption.length){M.uninterpretedOption=[];for(var n=0;n<u.uninterpretedOption.length;++n)M.uninterpretedOption[n]=o.google.protobuf.UninterpretedOption.toObject(u.uninterpretedOption[n],P)}return M},Ee.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Ee),p.EnumValueOptions=(fe.prototype.deprecated=!1,fe.prototype.uninterpretedOption=a.emptyArray,fe.create=function(u){return new fe(u)},fe.encode=function(u,P){if(P=P||l.create(),u.deprecated!=null&&Object.hasOwnProperty.call(u,"deprecated")&&P.uint32(8).bool(u.deprecated),u.uninterpretedOption!=null&&u.uninterpretedOption.length)for(var M=0;M<u.uninterpretedOption.length;++M)o.google.protobuf.UninterpretedOption.encode(u.uninterpretedOption[M],P.uint32(7994).fork()).ldelim();return P},fe.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},fe.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.EnumValueOptions;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.deprecated=u.bool();break;case 999:n.uninterpretedOption&&n.uninterpretedOption.length||(n.uninterpretedOption=[]),n.uninterpretedOption.push(o.google.protobuf.UninterpretedOption.decode(u,u.uint32()));break;default:u.skipType(7&L)}}return n},fe.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},fe.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.deprecated!=null&&u.hasOwnProperty("deprecated")&&typeof u.deprecated!="boolean")return"deprecated: boolean expected";if(u.uninterpretedOption!=null&&u.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(u.uninterpretedOption))return"uninterpretedOption: array expected";for(var P=0;P<u.uninterpretedOption.length;++P){var M=o.google.protobuf.UninterpretedOption.verify(u.uninterpretedOption[P]);if(M)return"uninterpretedOption."+M}}return null},fe.fromObject=function(u){if(u instanceof o.google.protobuf.EnumValueOptions)return u;var P=new o.google.protobuf.EnumValueOptions;if(u.deprecated!=null&&(P.deprecated=!!u.deprecated),u.uninterpretedOption){if(!Array.isArray(u.uninterpretedOption))throw TypeError(".google.protobuf.EnumValueOptions.uninterpretedOption: array expected");P.uninterpretedOption=[];for(var M=0;M<u.uninterpretedOption.length;++M){if(typeof u.uninterpretedOption[M]!="object")throw TypeError(".google.protobuf.EnumValueOptions.uninterpretedOption: object expected");P.uninterpretedOption[M]=o.google.protobuf.UninterpretedOption.fromObject(u.uninterpretedOption[M])}}return P},fe.toObject=function(u,P){var M={};if(((P=P||{}).arrays||P.defaults)&&(M.uninterpretedOption=[]),P.defaults&&(M.deprecated=!1),u.deprecated!=null&&u.hasOwnProperty("deprecated")&&(M.deprecated=u.deprecated),u.uninterpretedOption&&u.uninterpretedOption.length){M.uninterpretedOption=[];for(var n=0;n<u.uninterpretedOption.length;++n)M.uninterpretedOption[n]=o.google.protobuf.UninterpretedOption.toObject(u.uninterpretedOption[n],P)}return M},fe.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},fe),p.ServiceOptions=(Se.prototype.deprecated=!1,Se.prototype.uninterpretedOption=a.emptyArray,Se.prototype[".google.api.defaultHost"]="",Se.prototype[".google.api.oauthScopes"]="",Se.create=function(u){return new Se(u)},Se.encode=function(u,P){if(P=P||l.create(),u.deprecated!=null&&Object.hasOwnProperty.call(u,"deprecated")&&P.uint32(264).bool(u.deprecated),u.uninterpretedOption!=null&&u.uninterpretedOption.length)for(var M=0;M<u.uninterpretedOption.length;++M)o.google.protobuf.UninterpretedOption.encode(u.uninterpretedOption[M],P.uint32(7994).fork()).ldelim();return u[".google.api.defaultHost"]!=null&&Object.hasOwnProperty.call(u,".google.api.defaultHost")&&P.uint32(8394).string(u[".google.api.defaultHost"]),u[".google.api.oauthScopes"]!=null&&Object.hasOwnProperty.call(u,".google.api.oauthScopes")&&P.uint32(8402).string(u[".google.api.oauthScopes"]),P},Se.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},Se.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.ServiceOptions;u.pos<M;){var L=u.uint32();switch(L>>>3){case 33:n.deprecated=u.bool();break;case 999:n.uninterpretedOption&&n.uninterpretedOption.length||(n.uninterpretedOption=[]),n.uninterpretedOption.push(o.google.protobuf.UninterpretedOption.decode(u,u.uint32()));break;case 1049:n[".google.api.defaultHost"]=u.string();break;case 1050:n[".google.api.oauthScopes"]=u.string();break;default:u.skipType(7&L)}}return n},Se.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},Se.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.deprecated!=null&&u.hasOwnProperty("deprecated")&&typeof u.deprecated!="boolean")return"deprecated: boolean expected";if(u.uninterpretedOption!=null&&u.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(u.uninterpretedOption))return"uninterpretedOption: array expected";for(var P=0;P<u.uninterpretedOption.length;++P){var M=o.google.protobuf.UninterpretedOption.verify(u.uninterpretedOption[P]);if(M)return"uninterpretedOption."+M}}return u[".google.api.defaultHost"]!=null&&u.hasOwnProperty(".google.api.defaultHost")&&!a.isString(u[".google.api.defaultHost"])?".google.api.defaultHost: string expected":u[".google.api.oauthScopes"]!=null&&u.hasOwnProperty(".google.api.oauthScopes")&&!a.isString(u[".google.api.oauthScopes"])?".google.api.oauthScopes: string expected":null},Se.fromObject=function(u){if(u instanceof o.google.protobuf.ServiceOptions)return u;var P=new o.google.protobuf.ServiceOptions;if(u.deprecated!=null&&(P.deprecated=!!u.deprecated),u.uninterpretedOption){if(!Array.isArray(u.uninterpretedOption))throw TypeError(".google.protobuf.ServiceOptions.uninterpretedOption: array expected");P.uninterpretedOption=[];for(var M=0;M<u.uninterpretedOption.length;++M){if(typeof u.uninterpretedOption[M]!="object")throw TypeError(".google.protobuf.ServiceOptions.uninterpretedOption: object expected");P.uninterpretedOption[M]=o.google.protobuf.UninterpretedOption.fromObject(u.uninterpretedOption[M])}}return u[".google.api.defaultHost"]!=null&&(P[".google.api.defaultHost"]=String(u[".google.api.defaultHost"])),u[".google.api.oauthScopes"]!=null&&(P[".google.api.oauthScopes"]=String(u[".google.api.oauthScopes"])),P},Se.toObject=function(u,P){var M={};if(((P=P||{}).arrays||P.defaults)&&(M.uninterpretedOption=[]),P.defaults&&(M.deprecated=!1,M[".google.api.defaultHost"]="",M[".google.api.oauthScopes"]=""),u.deprecated!=null&&u.hasOwnProperty("deprecated")&&(M.deprecated=u.deprecated),u.uninterpretedOption&&u.uninterpretedOption.length){M.uninterpretedOption=[];for(var n=0;n<u.uninterpretedOption.length;++n)M.uninterpretedOption[n]=o.google.protobuf.UninterpretedOption.toObject(u.uninterpretedOption[n],P)}return u[".google.api.defaultHost"]!=null&&u.hasOwnProperty(".google.api.defaultHost")&&(M[".google.api.defaultHost"]=u[".google.api.defaultHost"]),u[".google.api.oauthScopes"]!=null&&u.hasOwnProperty(".google.api.oauthScopes")&&(M[".google.api.oauthScopes"]=u[".google.api.oauthScopes"]),M},Se.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Se),p.MethodOptions=(be.prototype.deprecated=!1,be.prototype.idempotencyLevel=0,be.prototype.uninterpretedOption=a.emptyArray,be.prototype[".google.longrunning.operationInfo"]=null,be.prototype[".google.api.http"]=null,be.prototype[".google.api.methodSignature"]=a.emptyArray,be.create=function(u){return new be(u)},be.encode=function(u,P){if(P=P||l.create(),u.deprecated!=null&&Object.hasOwnProperty.call(u,"deprecated")&&P.uint32(264).bool(u.deprecated),u.idempotencyLevel!=null&&Object.hasOwnProperty.call(u,"idempotencyLevel")&&P.uint32(272).int32(u.idempotencyLevel),u.uninterpretedOption!=null&&u.uninterpretedOption.length)for(var M=0;M<u.uninterpretedOption.length;++M)o.google.protobuf.UninterpretedOption.encode(u.uninterpretedOption[M],P.uint32(7994).fork()).ldelim();if(u[".google.longrunning.operationInfo"]!=null&&Object.hasOwnProperty.call(u,".google.longrunning.operationInfo")&&o.google.longrunning.OperationInfo.encode(u[".google.longrunning.operationInfo"],P.uint32(8394).fork()).ldelim(),u[".google.api.methodSignature"]!=null&&u[".google.api.methodSignature"].length)for(M=0;M<u[".google.api.methodSignature"].length;++M)P.uint32(8410).string(u[".google.api.methodSignature"][M]);return u[".google.api.http"]!=null&&Object.hasOwnProperty.call(u,".google.api.http")&&o.google.api.HttpRule.encode(u[".google.api.http"],P.uint32(578365826).fork()).ldelim(),P},be.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},be.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.MethodOptions;u.pos<M;){var L=u.uint32();switch(L>>>3){case 33:n.deprecated=u.bool();break;case 34:n.idempotencyLevel=u.int32();break;case 999:n.uninterpretedOption&&n.uninterpretedOption.length||(n.uninterpretedOption=[]),n.uninterpretedOption.push(o.google.protobuf.UninterpretedOption.decode(u,u.uint32()));break;case 1049:n[".google.longrunning.operationInfo"]=o.google.longrunning.OperationInfo.decode(u,u.uint32());break;case 72295728:n[".google.api.http"]=o.google.api.HttpRule.decode(u,u.uint32());break;case 1051:n[".google.api.methodSignature"]&&n[".google.api.methodSignature"].length||(n[".google.api.methodSignature"]=[]),n[".google.api.methodSignature"].push(u.string());break;default:u.skipType(7&L)}}return n},be.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},be.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.deprecated!=null&&u.hasOwnProperty("deprecated")&&typeof u.deprecated!="boolean")return"deprecated: boolean expected";if(u.idempotencyLevel!=null&&u.hasOwnProperty("idempotencyLevel"))switch(u.idempotencyLevel){default:return"idempotencyLevel: enum value expected";case 0:case 1:case 2:}if(u.uninterpretedOption!=null&&u.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(u.uninterpretedOption))return"uninterpretedOption: array expected";for(var P=0;P<u.uninterpretedOption.length;++P)if(M=o.google.protobuf.UninterpretedOption.verify(u.uninterpretedOption[P]))return"uninterpretedOption."+M}var M;if(u[".google.longrunning.operationInfo"]!=null&&u.hasOwnProperty(".google.longrunning.operationInfo")&&(M=o.google.longrunning.OperationInfo.verify(u[".google.longrunning.operationInfo"])))return".google.longrunning.operationInfo."+M;if(u[".google.api.http"]!=null&&u.hasOwnProperty(".google.api.http")&&(M=o.google.api.HttpRule.verify(u[".google.api.http"])))return".google.api.http."+M;if(u[".google.api.methodSignature"]!=null&&u.hasOwnProperty(".google.api.methodSignature")){if(!Array.isArray(u[".google.api.methodSignature"]))return".google.api.methodSignature: array expected";for(P=0;P<u[".google.api.methodSignature"].length;++P)if(!a.isString(u[".google.api.methodSignature"][P]))return".google.api.methodSignature: string[] expected"}return null},be.fromObject=function(u){if(u instanceof o.google.protobuf.MethodOptions)return u;var P=new o.google.protobuf.MethodOptions;switch(u.deprecated!=null&&(P.deprecated=!!u.deprecated),u.idempotencyLevel){case"IDEMPOTENCY_UNKNOWN":case 0:P.idempotencyLevel=0;break;case"NO_SIDE_EFFECTS":case 1:P.idempotencyLevel=1;break;case"IDEMPOTENT":case 2:P.idempotencyLevel=2}if(u.uninterpretedOption){if(!Array.isArray(u.uninterpretedOption))throw TypeError(".google.protobuf.MethodOptions.uninterpretedOption: array expected");P.uninterpretedOption=[];for(var M=0;M<u.uninterpretedOption.length;++M){if(typeof u.uninterpretedOption[M]!="object")throw TypeError(".google.protobuf.MethodOptions.uninterpretedOption: object expected");P.uninterpretedOption[M]=o.google.protobuf.UninterpretedOption.fromObject(u.uninterpretedOption[M])}}if(u[".google.longrunning.operationInfo"]!=null){if(typeof u[".google.longrunning.operationInfo"]!="object")throw TypeError(".google.protobuf.MethodOptions..google.longrunning.operationInfo: object expected");P[".google.longrunning.operationInfo"]=o.google.longrunning.OperationInfo.fromObject(u[".google.longrunning.operationInfo"])}if(u[".google.api.http"]!=null){if(typeof u[".google.api.http"]!="object")throw TypeError(".google.protobuf.MethodOptions..google.api.http: object expected");P[".google.api.http"]=o.google.api.HttpRule.fromObject(u[".google.api.http"])}if(u[".google.api.methodSignature"]){if(!Array.isArray(u[".google.api.methodSignature"]))throw TypeError(".google.protobuf.MethodOptions..google.api.methodSignature: array expected");for(P[".google.api.methodSignature"]=[],M=0;M<u[".google.api.methodSignature"].length;++M)P[".google.api.methodSignature"][M]=String(u[".google.api.methodSignature"][M])}return P},be.toObject=function(u,P){var M={};if(((P=P||{}).arrays||P.defaults)&&(M.uninterpretedOption=[],M[".google.api.methodSignature"]=[]),P.defaults&&(M.deprecated=!1,M.idempotencyLevel=P.enums===String?"IDEMPOTENCY_UNKNOWN":0,M[".google.longrunning.operationInfo"]=null,M[".google.api.http"]=null),u.deprecated!=null&&u.hasOwnProperty("deprecated")&&(M.deprecated=u.deprecated),u.idempotencyLevel!=null&&u.hasOwnProperty("idempotencyLevel")&&(M.idempotencyLevel=P.enums===String?o.google.protobuf.MethodOptions.IdempotencyLevel[u.idempotencyLevel]:u.idempotencyLevel),u.uninterpretedOption&&u.uninterpretedOption.length){M.uninterpretedOption=[];for(var n=0;n<u.uninterpretedOption.length;++n)M.uninterpretedOption[n]=o.google.protobuf.UninterpretedOption.toObject(u.uninterpretedOption[n],P)}if(u[".google.longrunning.operationInfo"]!=null&&u.hasOwnProperty(".google.longrunning.operationInfo")&&(M[".google.longrunning.operationInfo"]=o.google.longrunning.OperationInfo.toObject(u[".google.longrunning.operationInfo"],P)),u[".google.api.methodSignature"]&&u[".google.api.methodSignature"].length)for(M[".google.api.methodSignature"]=[],n=0;n<u[".google.api.methodSignature"].length;++n)M[".google.api.methodSignature"][n]=u[".google.api.methodSignature"][n];return u[".google.api.http"]!=null&&u.hasOwnProperty(".google.api.http")&&(M[".google.api.http"]=o.google.api.HttpRule.toObject(u[".google.api.http"],P)),M},be.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},be.IdempotencyLevel=(g={},(s=Object.create(g))[g[0]="IDEMPOTENCY_UNKNOWN"]=0,s[g[1]="NO_SIDE_EFFECTS"]=1,s[g[2]="IDEMPOTENT"]=2,s),be),p.UninterpretedOption=(Oe.prototype.name=a.emptyArray,Oe.prototype.identifierValue="",Oe.prototype.positiveIntValue=a.Long?a.Long.fromBits(0,0,!0):0,Oe.prototype.negativeIntValue=a.Long?a.Long.fromBits(0,0,!1):0,Oe.prototype.doubleValue=0,Oe.prototype.stringValue=a.newBuffer([]),Oe.prototype.aggregateValue="",Oe.create=function(u){return new Oe(u)},Oe.encode=function(u,P){if(P=P||l.create(),u.name!=null&&u.name.length)for(var M=0;M<u.name.length;++M)o.google.protobuf.UninterpretedOption.NamePart.encode(u.name[M],P.uint32(18).fork()).ldelim();return u.identifierValue!=null&&Object.hasOwnProperty.call(u,"identifierValue")&&P.uint32(26).string(u.identifierValue),u.positiveIntValue!=null&&Object.hasOwnProperty.call(u,"positiveIntValue")&&P.uint32(32).uint64(u.positiveIntValue),u.negativeIntValue!=null&&Object.hasOwnProperty.call(u,"negativeIntValue")&&P.uint32(40).int64(u.negativeIntValue),u.doubleValue!=null&&Object.hasOwnProperty.call(u,"doubleValue")&&P.uint32(49).double(u.doubleValue),u.stringValue!=null&&Object.hasOwnProperty.call(u,"stringValue")&&P.uint32(58).bytes(u.stringValue),u.aggregateValue!=null&&Object.hasOwnProperty.call(u,"aggregateValue")&&P.uint32(66).string(u.aggregateValue),P},Oe.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},Oe.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.UninterpretedOption;u.pos<M;){var L=u.uint32();switch(L>>>3){case 2:n.name&&n.name.length||(n.name=[]),n.name.push(o.google.protobuf.UninterpretedOption.NamePart.decode(u,u.uint32()));break;case 3:n.identifierValue=u.string();break;case 4:n.positiveIntValue=u.uint64();break;case 5:n.negativeIntValue=u.int64();break;case 6:n.doubleValue=u.double();break;case 7:n.stringValue=u.bytes();break;case 8:n.aggregateValue=u.string();break;default:u.skipType(7&L)}}return n},Oe.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},Oe.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.name!=null&&u.hasOwnProperty("name")){if(!Array.isArray(u.name))return"name: array expected";for(var P=0;P<u.name.length;++P){var M=o.google.protobuf.UninterpretedOption.NamePart.verify(u.name[P]);if(M)return"name."+M}}return u.identifierValue!=null&&u.hasOwnProperty("identifierValue")&&!a.isString(u.identifierValue)?"identifierValue: string expected":u.positiveIntValue!=null&&u.hasOwnProperty("positiveIntValue")&&!(a.isInteger(u.positiveIntValue)||u.positiveIntValue&&a.isInteger(u.positiveIntValue.low)&&a.isInteger(u.positiveIntValue.high))?"positiveIntValue: integer|Long expected":u.negativeIntValue!=null&&u.hasOwnProperty("negativeIntValue")&&!(a.isInteger(u.negativeIntValue)||u.negativeIntValue&&a.isInteger(u.negativeIntValue.low)&&a.isInteger(u.negativeIntValue.high))?"negativeIntValue: integer|Long expected":u.doubleValue!=null&&u.hasOwnProperty("doubleValue")&&typeof u.doubleValue!="number"?"doubleValue: number expected":u.stringValue!=null&&u.hasOwnProperty("stringValue")&&!(u.stringValue&&typeof u.stringValue.length=="number"||a.isString(u.stringValue))?"stringValue: buffer expected":u.aggregateValue!=null&&u.hasOwnProperty("aggregateValue")&&!a.isString(u.aggregateValue)?"aggregateValue: string expected":null},Oe.fromObject=function(u){if(u instanceof o.google.protobuf.UninterpretedOption)return u;var P=new o.google.protobuf.UninterpretedOption;if(u.name){if(!Array.isArray(u.name))throw TypeError(".google.protobuf.UninterpretedOption.name: array expected");P.name=[];for(var M=0;M<u.name.length;++M){if(typeof u.name[M]!="object")throw TypeError(".google.protobuf.UninterpretedOption.name: object expected");P.name[M]=o.google.protobuf.UninterpretedOption.NamePart.fromObject(u.name[M])}}return u.identifierValue!=null&&(P.identifierValue=String(u.identifierValue)),u.positiveIntValue!=null&&(a.Long?(P.positiveIntValue=a.Long.fromValue(u.positiveIntValue)).unsigned=!0:typeof u.positiveIntValue=="string"?P.positiveIntValue=parseInt(u.positiveIntValue,10):typeof u.positiveIntValue=="number"?P.positiveIntValue=u.positiveIntValue:typeof u.positiveIntValue=="object"&&(P.positiveIntValue=new a.LongBits(u.positiveIntValue.low>>>0,u.positiveIntValue.high>>>0).toNumber(!0))),u.negativeIntValue!=null&&(a.Long?(P.negativeIntValue=a.Long.fromValue(u.negativeIntValue)).unsigned=!1:typeof u.negativeIntValue=="string"?P.negativeIntValue=parseInt(u.negativeIntValue,10):typeof u.negativeIntValue=="number"?P.negativeIntValue=u.negativeIntValue:typeof u.negativeIntValue=="object"&&(P.negativeIntValue=new a.LongBits(u.negativeIntValue.low>>>0,u.negativeIntValue.high>>>0).toNumber())),u.doubleValue!=null&&(P.doubleValue=Number(u.doubleValue)),u.stringValue!=null&&(typeof u.stringValue=="string"?a.base64.decode(u.stringValue,P.stringValue=a.newBuffer(a.base64.length(u.stringValue)),0):u.stringValue.length&&(P.stringValue=u.stringValue)),u.aggregateValue!=null&&(P.aggregateValue=String(u.aggregateValue)),P},Oe.toObject=function(u,P){var M,n={};if(((P=P||{}).arrays||P.defaults)&&(n.name=[]),P.defaults&&(n.identifierValue="",a.Long?(M=new a.Long(0,0,!0),n.positiveIntValue=P.longs===String?M.toString():P.longs===Number?M.toNumber():M):n.positiveIntValue=P.longs===String?"0":0,a.Long?(M=new a.Long(0,0,!1),n.negativeIntValue=P.longs===String?M.toString():P.longs===Number?M.toNumber():M):n.negativeIntValue=P.longs===String?"0":0,n.doubleValue=0,P.bytes===String?n.stringValue="":(n.stringValue=[],P.bytes!==Array&&(n.stringValue=a.newBuffer(n.stringValue))),n.aggregateValue=""),u.name&&u.name.length){n.name=[];for(var L=0;L<u.name.length;++L)n.name[L]=o.google.protobuf.UninterpretedOption.NamePart.toObject(u.name[L],P)}return u.identifierValue!=null&&u.hasOwnProperty("identifierValue")&&(n.identifierValue=u.identifierValue),u.positiveIntValue!=null&&u.hasOwnProperty("positiveIntValue")&&(typeof u.positiveIntValue=="number"?n.positiveIntValue=P.longs===String?String(u.positiveIntValue):u.positiveIntValue:n.positiveIntValue=P.longs===String?a.Long.prototype.toString.call(u.positiveIntValue):P.longs===Number?new a.LongBits(u.positiveIntValue.low>>>0,u.positiveIntValue.high>>>0).toNumber(!0):u.positiveIntValue),u.negativeIntValue!=null&&u.hasOwnProperty("negativeIntValue")&&(typeof u.negativeIntValue=="number"?n.negativeIntValue=P.longs===String?String(u.negativeIntValue):u.negativeIntValue:n.negativeIntValue=P.longs===String?a.Long.prototype.toString.call(u.negativeIntValue):P.longs===Number?new a.LongBits(u.negativeIntValue.low>>>0,u.negativeIntValue.high>>>0).toNumber():u.negativeIntValue),u.doubleValue!=null&&u.hasOwnProperty("doubleValue")&&(n.doubleValue=P.json&&!isFinite(u.doubleValue)?String(u.doubleValue):u.doubleValue),u.stringValue!=null&&u.hasOwnProperty("stringValue")&&(n.stringValue=P.bytes===String?a.base64.encode(u.stringValue,0,u.stringValue.length):P.bytes===Array?Array.prototype.slice.call(u.stringValue):u.stringValue),u.aggregateValue!=null&&u.hasOwnProperty("aggregateValue")&&(n.aggregateValue=u.aggregateValue),n},Oe.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Oe.NamePart=(ge.prototype.namePart="",ge.prototype.isExtension=!1,ge.create=function(u){return new ge(u)},ge.encode=function(u,P){return(P=P||l.create()).uint32(10).string(u.namePart),P.uint32(16).bool(u.isExtension),P},ge.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},ge.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.UninterpretedOption.NamePart;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.namePart=u.string();break;case 2:n.isExtension=u.bool();break;default:u.skipType(7&L)}}if(!n.hasOwnProperty("namePart"))throw a.ProtocolError("missing required 'namePart'",{instance:n});if(n.hasOwnProperty("isExtension"))return n;throw a.ProtocolError("missing required 'isExtension'",{instance:n})},ge.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},ge.verify=function(u){return typeof u!="object"||u===null?"object expected":a.isString(u.namePart)?typeof u.isExtension!="boolean"?"isExtension: boolean expected":null:"namePart: string expected"},ge.fromObject=function(u){var P;return u instanceof o.google.protobuf.UninterpretedOption.NamePart?u:(P=new o.google.protobuf.UninterpretedOption.NamePart,u.namePart!=null&&(P.namePart=String(u.namePart)),u.isExtension!=null&&(P.isExtension=!!u.isExtension),P)},ge.toObject=function(u,P){var M={};return(P=P||{}).defaults&&(M.namePart="",M.isExtension=!1),u.namePart!=null&&u.hasOwnProperty("namePart")&&(M.namePart=u.namePart),u.isExtension!=null&&u.hasOwnProperty("isExtension")&&(M.isExtension=u.isExtension),M},ge.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ge),Oe),p.SourceCodeInfo=(J.prototype.location=a.emptyArray,J.create=function(u){return new J(u)},J.encode=function(u,P){if(P=P||l.create(),u.location!=null&&u.location.length)for(var M=0;M<u.location.length;++M)o.google.protobuf.SourceCodeInfo.Location.encode(u.location[M],P.uint32(10).fork()).ldelim();return P},J.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},J.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.SourceCodeInfo;u.pos<M;){var L=u.uint32();L>>>3==1?(n.location&&n.location.length||(n.location=[]),n.location.push(o.google.protobuf.SourceCodeInfo.Location.decode(u,u.uint32()))):u.skipType(7&L)}return n},J.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},J.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.location!=null&&u.hasOwnProperty("location")){if(!Array.isArray(u.location))return"location: array expected";for(var P=0;P<u.location.length;++P){var M=o.google.protobuf.SourceCodeInfo.Location.verify(u.location[P]);if(M)return"location."+M}}return null},J.fromObject=function(u){if(u instanceof o.google.protobuf.SourceCodeInfo)return u;var P=new o.google.protobuf.SourceCodeInfo;if(u.location){if(!Array.isArray(u.location))throw TypeError(".google.protobuf.SourceCodeInfo.location: array expected");P.location=[];for(var M=0;M<u.location.length;++M){if(typeof u.location[M]!="object")throw TypeError(".google.protobuf.SourceCodeInfo.location: object expected");P.location[M]=o.google.protobuf.SourceCodeInfo.Location.fromObject(u.location[M])}}return P},J.toObject=function(u,P){var M={};if(((P=P||{}).arrays||P.defaults)&&(M.location=[]),u.location&&u.location.length){M.location=[];for(var n=0;n<u.location.length;++n)M.location[n]=o.google.protobuf.SourceCodeInfo.Location.toObject(u.location[n],P)}return M},J.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},J.Location=(c.prototype.path=a.emptyArray,c.prototype.span=a.emptyArray,c.prototype.leadingComments="",c.prototype.trailingComments="",c.prototype.leadingDetachedComments=a.emptyArray,c.create=function(u){return new c(u)},c.encode=function(u,P){if(P=P||l.create(),u.path!=null&&u.path.length){P.uint32(10).fork();for(var M=0;M<u.path.length;++M)P.int32(u.path[M]);P.ldelim()}if(u.span!=null&&u.span.length){for(P.uint32(18).fork(),M=0;M<u.span.length;++M)P.int32(u.span[M]);P.ldelim()}if(u.leadingComments!=null&&Object.hasOwnProperty.call(u,"leadingComments")&&P.uint32(26).string(u.leadingComments),u.trailingComments!=null&&Object.hasOwnProperty.call(u,"trailingComments")&&P.uint32(34).string(u.trailingComments),u.leadingDetachedComments!=null&&u.leadingDetachedComments.length)for(M=0;M<u.leadingDetachedComments.length;++M)P.uint32(50).string(u.leadingDetachedComments[M]);return P},c.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},c.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.SourceCodeInfo.Location;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:if(n.path&&n.path.length||(n.path=[]),(7&L)==2)for(var U=u.uint32()+u.pos;u.pos<U;)n.path.push(u.int32());else n.path.push(u.int32());break;case 2:if(n.span&&n.span.length||(n.span=[]),(7&L)==2)for(U=u.uint32()+u.pos;u.pos<U;)n.span.push(u.int32());else n.span.push(u.int32());break;case 3:n.leadingComments=u.string();break;case 4:n.trailingComments=u.string();break;case 6:n.leadingDetachedComments&&n.leadingDetachedComments.length||(n.leadingDetachedComments=[]),n.leadingDetachedComments.push(u.string());break;default:u.skipType(7&L)}}return n},c.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},c.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.path!=null&&u.hasOwnProperty("path")){if(!Array.isArray(u.path))return"path: array expected";for(var P=0;P<u.path.length;++P)if(!a.isInteger(u.path[P]))return"path: integer[] expected"}if(u.span!=null&&u.hasOwnProperty("span")){if(!Array.isArray(u.span))return"span: array expected";for(P=0;P<u.span.length;++P)if(!a.isInteger(u.span[P]))return"span: integer[] expected"}if(u.leadingComments!=null&&u.hasOwnProperty("leadingComments")&&!a.isString(u.leadingComments))return"leadingComments: string expected";if(u.trailingComments!=null&&u.hasOwnProperty("trailingComments")&&!a.isString(u.trailingComments))return"trailingComments: string expected";if(u.leadingDetachedComments!=null&&u.hasOwnProperty("leadingDetachedComments")){if(!Array.isArray(u.leadingDetachedComments))return"leadingDetachedComments: array expected";for(P=0;P<u.leadingDetachedComments.length;++P)if(!a.isString(u.leadingDetachedComments[P]))return"leadingDetachedComments: string[] expected"}return null},c.fromObject=function(u){if(u instanceof o.google.protobuf.SourceCodeInfo.Location)return u;var P=new o.google.protobuf.SourceCodeInfo.Location;if(u.path){if(!Array.isArray(u.path))throw TypeError(".google.protobuf.SourceCodeInfo.Location.path: array expected");P.path=[];for(var M=0;M<u.path.length;++M)P.path[M]=0|u.path[M]}if(u.span){if(!Array.isArray(u.span))throw TypeError(".google.protobuf.SourceCodeInfo.Location.span: array expected");for(P.span=[],M=0;M<u.span.length;++M)P.span[M]=0|u.span[M]}if(u.leadingComments!=null&&(P.leadingComments=String(u.leadingComments)),u.trailingComments!=null&&(P.trailingComments=String(u.trailingComments)),u.leadingDetachedComments){if(!Array.isArray(u.leadingDetachedComments))throw TypeError(".google.protobuf.SourceCodeInfo.Location.leadingDetachedComments: array expected");for(P.leadingDetachedComments=[],M=0;M<u.leadingDetachedComments.length;++M)P.leadingDetachedComments[M]=String(u.leadingDetachedComments[M])}return P},c.toObject=function(u,P){var M={};if(((P=P||{}).arrays||P.defaults)&&(M.path=[],M.span=[],M.leadingDetachedComments=[]),P.defaults&&(M.leadingComments="",M.trailingComments=""),u.path&&u.path.length){M.path=[];for(var n=0;n<u.path.length;++n)M.path[n]=u.path[n]}if(u.span&&u.span.length)for(M.span=[],n=0;n<u.span.length;++n)M.span[n]=u.span[n];if(u.leadingComments!=null&&u.hasOwnProperty("leadingComments")&&(M.leadingComments=u.leadingComments),u.trailingComments!=null&&u.hasOwnProperty("trailingComments")&&(M.trailingComments=u.trailingComments),u.leadingDetachedComments&&u.leadingDetachedComments.length)for(M.leadingDetachedComments=[],n=0;n<u.leadingDetachedComments.length;++n)M.leadingDetachedComments[n]=u.leadingDetachedComments[n];return M},c.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},c),J),p.GeneratedCodeInfo=(N.prototype.annotation=a.emptyArray,N.create=function(u){return new N(u)},N.encode=function(u,P){if(P=P||l.create(),u.annotation!=null&&u.annotation.length)for(var M=0;M<u.annotation.length;++M)o.google.protobuf.GeneratedCodeInfo.Annotation.encode(u.annotation[M],P.uint32(10).fork()).ldelim();return P},N.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},N.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.GeneratedCodeInfo;u.pos<M;){var L=u.uint32();L>>>3==1?(n.annotation&&n.annotation.length||(n.annotation=[]),n.annotation.push(o.google.protobuf.GeneratedCodeInfo.Annotation.decode(u,u.uint32()))):u.skipType(7&L)}return n},N.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},N.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.annotation!=null&&u.hasOwnProperty("annotation")){if(!Array.isArray(u.annotation))return"annotation: array expected";for(var P=0;P<u.annotation.length;++P){var M=o.google.protobuf.GeneratedCodeInfo.Annotation.verify(u.annotation[P]);if(M)return"annotation."+M}}return null},N.fromObject=function(u){if(u instanceof o.google.protobuf.GeneratedCodeInfo)return u;var P=new o.google.protobuf.GeneratedCodeInfo;if(u.annotation){if(!Array.isArray(u.annotation))throw TypeError(".google.protobuf.GeneratedCodeInfo.annotation: array expected");P.annotation=[];for(var M=0;M<u.annotation.length;++M){if(typeof u.annotation[M]!="object")throw TypeError(".google.protobuf.GeneratedCodeInfo.annotation: object expected");P.annotation[M]=o.google.protobuf.GeneratedCodeInfo.Annotation.fromObject(u.annotation[M])}}return P},N.toObject=function(u,P){var M={};if(((P=P||{}).arrays||P.defaults)&&(M.annotation=[]),u.annotation&&u.annotation.length){M.annotation=[];for(var n=0;n<u.annotation.length;++n)M.annotation[n]=o.google.protobuf.GeneratedCodeInfo.Annotation.toObject(u.annotation[n],P)}return M},N.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},N.Annotation=(A.prototype.path=a.emptyArray,A.prototype.sourceFile="",A.prototype.begin=0,A.prototype.end=0,A.create=function(u){return new A(u)},A.encode=function(u,P){if(P=P||l.create(),u.path!=null&&u.path.length){P.uint32(10).fork();for(var M=0;M<u.path.length;++M)P.int32(u.path[M]);P.ldelim()}return u.sourceFile!=null&&Object.hasOwnProperty.call(u,"sourceFile")&&P.uint32(18).string(u.sourceFile),u.begin!=null&&Object.hasOwnProperty.call(u,"begin")&&P.uint32(24).int32(u.begin),u.end!=null&&Object.hasOwnProperty.call(u,"end")&&P.uint32(32).int32(u.end),P},A.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},A.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.GeneratedCodeInfo.Annotation;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:if(n.path&&n.path.length||(n.path=[]),(7&L)==2)for(var U=u.uint32()+u.pos;u.pos<U;)n.path.push(u.int32());else n.path.push(u.int32());break;case 2:n.sourceFile=u.string();break;case 3:n.begin=u.int32();break;case 4:n.end=u.int32();break;default:u.skipType(7&L)}}return n},A.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},A.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.path!=null&&u.hasOwnProperty("path")){if(!Array.isArray(u.path))return"path: array expected";for(var P=0;P<u.path.length;++P)if(!a.isInteger(u.path[P]))return"path: integer[] expected"}return u.sourceFile!=null&&u.hasOwnProperty("sourceFile")&&!a.isString(u.sourceFile)?"sourceFile: string expected":u.begin!=null&&u.hasOwnProperty("begin")&&!a.isInteger(u.begin)?"begin: integer expected":u.end!=null&&u.hasOwnProperty("end")&&!a.isInteger(u.end)?"end: integer expected":null},A.fromObject=function(u){if(u instanceof o.google.protobuf.GeneratedCodeInfo.Annotation)return u;var P=new o.google.protobuf.GeneratedCodeInfo.Annotation;if(u.path){if(!Array.isArray(u.path))throw TypeError(".google.protobuf.GeneratedCodeInfo.Annotation.path: array expected");P.path=[];for(var M=0;M<u.path.length;++M)P.path[M]=0|u.path[M]}return u.sourceFile!=null&&(P.sourceFile=String(u.sourceFile)),u.begin!=null&&(P.begin=0|u.begin),u.end!=null&&(P.end=0|u.end),P},A.toObject=function(u,P){var M={};if(((P=P||{}).arrays||P.defaults)&&(M.path=[]),P.defaults&&(M.sourceFile="",M.begin=0,M.end=0),u.path&&u.path.length){M.path=[];for(var n=0;n<u.path.length;++n)M.path[n]=u.path[n]}return u.sourceFile!=null&&u.hasOwnProperty("sourceFile")&&(M.sourceFile=u.sourceFile),u.begin!=null&&u.hasOwnProperty("begin")&&(M.begin=u.begin),u.end!=null&&u.hasOwnProperty("end")&&(M.end=u.end),M},A.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},A),N),p.Any=(V.prototype.type_url="",V.prototype.value=a.newBuffer([]),V.create=function(u){return new V(u)},V.encode=function(u,P){return P=P||l.create(),u.type_url!=null&&Object.hasOwnProperty.call(u,"type_url")&&P.uint32(10).string(u.type_url),u.value!=null&&Object.hasOwnProperty.call(u,"value")&&P.uint32(18).bytes(u.value),P},V.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},V.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.Any;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.type_url=u.string();break;case 2:n.value=u.bytes();break;default:u.skipType(7&L)}}return n},V.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},V.verify=function(u){return typeof u!="object"||u===null?"object expected":u.type_url!=null&&u.hasOwnProperty("type_url")&&!a.isString(u.type_url)?"type_url: string expected":u.value!=null&&u.hasOwnProperty("value")&&!(u.value&&typeof u.value.length=="number"||a.isString(u.value))?"value: buffer expected":null},V.fromObject=function(u){var P;return u instanceof o.google.protobuf.Any?u:(P=new o.google.protobuf.Any,u.type_url!=null&&(P.type_url=String(u.type_url)),u.value!=null&&(typeof u.value=="string"?a.base64.decode(u.value,P.value=a.newBuffer(a.base64.length(u.value)),0):u.value.length&&(P.value=u.value)),P)},V.toObject=function(u,P){var M={};return(P=P||{}).defaults&&(M.type_url="",P.bytes===String?M.value="":(M.value=[],P.bytes!==Array&&(M.value=a.newBuffer(M.value)))),u.type_url!=null&&u.hasOwnProperty("type_url")&&(M.type_url=u.type_url),u.value!=null&&u.hasOwnProperty("value")&&(M.value=P.bytes===String?a.base64.encode(u.value,0,u.value.length):P.bytes===Array?Array.prototype.slice.call(u.value):u.value),M},V.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},V),p.Duration=(ne.prototype.seconds=a.Long?a.Long.fromBits(0,0,!1):0,ne.prototype.nanos=0,ne.create=function(u){return new ne(u)},ne.encode=function(u,P){return P=P||l.create(),u.seconds!=null&&Object.hasOwnProperty.call(u,"seconds")&&P.uint32(8).int64(u.seconds),u.nanos!=null&&Object.hasOwnProperty.call(u,"nanos")&&P.uint32(16).int32(u.nanos),P},ne.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},ne.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.protobuf.Duration;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.seconds=u.int64();break;case 2:n.nanos=u.int32();break;default:u.skipType(7&L)}}return n},ne.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},ne.verify=function(u){return typeof u!="object"||u===null?"object expected":u.seconds!=null&&u.hasOwnProperty("seconds")&&!(a.isInteger(u.seconds)||u.seconds&&a.isInteger(u.seconds.low)&&a.isInteger(u.seconds.high))?"seconds: integer|Long expected":u.nanos!=null&&u.hasOwnProperty("nanos")&&!a.isInteger(u.nanos)?"nanos: integer expected":null},ne.fromObject=function(u){var P;return u instanceof o.google.protobuf.Duration?u:(P=new o.google.protobuf.Duration,u.seconds!=null&&(a.Long?(P.seconds=a.Long.fromValue(u.seconds)).unsigned=!1:typeof u.seconds=="string"?P.seconds=parseInt(u.seconds,10):typeof u.seconds=="number"?P.seconds=u.seconds:typeof u.seconds=="object"&&(P.seconds=new a.LongBits(u.seconds.low>>>0,u.seconds.high>>>0).toNumber())),u.nanos!=null&&(P.nanos=0|u.nanos),P)},ne.toObject=function(u,P){var M,n={};return(P=P||{}).defaults&&(a.Long?(M=new a.Long(0,0,!1),n.seconds=P.longs===String?M.toString():P.longs===Number?M.toNumber():M):n.seconds=P.longs===String?"0":0,n.nanos=0),u.seconds!=null&&u.hasOwnProperty("seconds")&&(typeof u.seconds=="number"?n.seconds=P.longs===String?String(u.seconds):u.seconds:n.seconds=P.longs===String?a.Long.prototype.toString.call(u.seconds):P.longs===Number?new a.LongBits(u.seconds.low>>>0,u.seconds.high>>>0).toNumber():u.seconds),u.nanos!=null&&u.hasOwnProperty("nanos")&&(n.nanos=u.nanos),n},ne.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ne),p.Empty=(ce.create=function(u){return new ce(u)},ce.encode=function(u,P){return P=P||l.create()},ce.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},ce.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,P=new o.google.protobuf.Empty;u.pos<M;){var n=u.uint32();u.skipType(7&n)}return P},ce.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},ce.verify=function(u){return typeof u!="object"||u===null?"object expected":null},ce.fromObject=function(u){return u instanceof o.google.protobuf.Empty?u:new o.google.protobuf.Empty},ce.toObject=function(){return{}},ce.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ce),p),m.rpc=((g={}).Status=(ie.prototype.code=0,ie.prototype.message="",ie.prototype.details=a.emptyArray,ie.create=function(u){return new ie(u)},ie.encode=function(u,P){if(P=P||l.create(),u.code!=null&&Object.hasOwnProperty.call(u,"code")&&P.uint32(8).int32(u.code),u.message!=null&&Object.hasOwnProperty.call(u,"message")&&P.uint32(18).string(u.message),u.details!=null&&u.details.length)for(var M=0;M<u.details.length;++M)o.google.protobuf.Any.encode(u.details[M],P.uint32(26).fork()).ldelim();return P},ie.encodeDelimited=function(u,P){return this.encode(u,P).ldelim()},ie.decode=function(u,P){u instanceof d||(u=d.create(u));for(var M=P===void 0?u.len:u.pos+P,n=new o.google.rpc.Status;u.pos<M;){var L=u.uint32();switch(L>>>3){case 1:n.code=u.int32();break;case 2:n.message=u.string();break;case 3:n.details&&n.details.length||(n.details=[]),n.details.push(o.google.protobuf.Any.decode(u,u.uint32()));break;default:u.skipType(7&L)}}return n},ie.decodeDelimited=function(u){return u instanceof d||(u=new d(u)),this.decode(u,u.uint32())},ie.verify=function(u){if(typeof u!="object"||u===null)return"object expected";if(u.code!=null&&u.hasOwnProperty("code")&&!a.isInteger(u.code))return"code: integer expected";if(u.message!=null&&u.hasOwnProperty("message")&&!a.isString(u.message))return"message: string expected";if(u.details!=null&&u.hasOwnProperty("details")){if(!Array.isArray(u.details))return"details: array expected";for(var P=0;P<u.details.length;++P){var M=o.google.protobuf.Any.verify(u.details[P]);if(M)return"details."+M}}return null},ie.fromObject=function(u){if(u instanceof o.google.rpc.Status)return u;var P=new o.google.rpc.Status;if(u.code!=null&&(P.code=0|u.code),u.message!=null&&(P.message=String(u.message)),u.details){if(!Array.isArray(u.details))throw TypeError(".google.rpc.Status.details: array expected");P.details=[];for(var M=0;M<u.details.length;++M){if(typeof u.details[M]!="object")throw TypeError(".google.rpc.Status.details: object expected");P.details[M]=o.google.protobuf.Any.fromObject(u.details[M])}}return P},ie.toObject=function(u,P){var M={};if(((P=P||{}).arrays||P.defaults)&&(M.details=[]),P.defaults&&(M.code=0,M.message=""),u.code!=null&&u.hasOwnProperty("code")&&(M.code=u.code),u.message!=null&&u.hasOwnProperty("message")&&(M.message=u.message),u.details&&u.details.length){M.details=[];for(var n=0;n<u.details.length;++n)M.details[n]=o.google.protobuf.Any.toObject(u.details[n],P)}return M},ie.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ie),g),m),o})})(operations)),operations.exports}var hasRequiredLongrunning;function requireLongrunning(){if(hasRequiredLongrunning)return longrunning;hasRequiredLongrunning=1,Object.defineProperty(longrunning,"__esModule",{value:!0}),longrunning.Operation=void 0,longrunning.operation=m;const e=require$$1$3,t=requireStatus(),s=requireGoogleError(),p=requireOperations();class g extends e.EventEmitter{constructor(l,a,o,h){super(),this.completeListeners=0,this.hasActiveListeners=!1,this.latestResponse=l,this.name=this.latestResponse.name,this.done=this.latestResponse.done,this.error=this.latestResponse.error,this.longrunningDescriptor=a,this.result=null,this.metadata=null,this.backoffSettings=o,this._unpackResponse(l),this._listenForEvents(),this._callOptions=h}_listenForEvents(){this.on("newListener",l=>{l==="complete"&&(this.completeListeners++,this.hasActiveListeners||(this.hasActiveListeners=!0,this.startPolling_()))}),this.on("removeListener",l=>{l==="complete"&&--this.completeListeners===0&&(this.hasActiveListeners=!1)})}cancel(){this.currentCallPromise_&&this.currentCallPromise_.cancel();const l=this.longrunningDescriptor.operationsClient,a=new p.google.longrunning.CancelOperationRequest;return a.name=this.latestResponse.name,l.cancelOperation(a)}getOperation(l){const a=this,o=this.longrunningDescriptor.operationsClient;function h(){if(!l)return new Promise((y,w)=>{if(a.latestResponse.error){const T=new s.GoogleError(a.latestResponse.error.message);T.code=a.latestResponse.error.code,w(T)}else y([a.result,a.metadata,a.latestResponse])})}if(this.latestResponse.done)return this._unpackResponse(this.latestResponse,l),h();const v=new p.google.longrunning.GetOperationRequest;v.name=this.latestResponse.name,this.currentCallPromise_=o.getOperationInternal(v,this._callOptions);const _=this.currentCallPromise_.then(y=>(a.latestResponse=y[0],a._unpackResponse(y[0],l),h()),y=>{if(l){l(y);return}return Promise.reject(y)});if(!l)return _}_unpackResponse(l,a){const o=this.longrunningDescriptor.responseDecoder,h=this.longrunningDescriptor.metadataDecoder;let v,_;if(l.done){if(l.result==="error"){const y=new s.GoogleError(l.error.message);y.code=l.error.code,this.error=y,a&&a(y);return}o&&l.response&&(this.response=l.response,v=o(l.response.value),this.result=v,this.done=!0)}h&&l.metadata&&(_=h(l.metadata.value),this.metadata=_),a&&a(null,v,_,l)}startPolling_(){const l=this;let a=new Date;const o=this.backoffSettings.retryDelayMultiplier,h=this.backoffSettings.maxRetryDelayMillis;let v=this.backoffSettings.initialRetryDelayMillis,_=1/0;this.backoffSettings.totalTimeoutMillis&&(_=a.getTime()+this.backoffSettings.totalTimeoutMillis);let y;this.latestResponse.metadata&&(y=this.latestResponse.metadata.value);function w(O,...E){l.emit(O,...E)}function T(O,E){if(O.byteLength!==E.byteLength)return!1;for(let C=0;C<O.byteLength;++C)if(O[C]!==E[C])return!1;return!0}function I(){if(l.hasActiveListeners){if(a.getTime()>=_){const O=new s.GoogleError("Total timeout exceeded before any response was received");O.code=t.Status.DEADLINE_EXCEEDED,setImmediate(w,"error",O);return}l.getOperation((O,E,C,x)=>{if(O){setImmediate(w,"error",O);return}if(!E){if(x.metadata&&(!y||x&&!T(x.metadata.value,y))&&(setImmediate(w,"progress",C,x),y=x.metadata.value),x.done){setImmediate(w,"complete",{},C,x);return}setTimeout(()=>{a=new Date,v=Math.min(v*o,h),I()},v);return}setImmediate(w,"complete",E,C,x)})}}I()}promise(){return new Promise((l,a)=>{this.on("error",a).on("complete",(o,h,v)=>{l([o,h,v])})})}}longrunning.Operation=g;function m(d,l,a,o){return new g(d,l,a,o)}return longrunning}var hasRequiredLongRunningApiCaller;function requireLongRunningApiCaller(){if(hasRequiredLongRunningApiCaller)return longRunningApiCaller;hasRequiredLongRunningApiCaller=1,Object.defineProperty(longRunningApiCaller,"__esModule",{value:!0}),longRunningApiCaller.LongrunningApiCaller=void 0;const e=requireCall(),t=requireGax(),s=requireLongrunning();class p{constructor(m){this.longrunningDescriptor=m}init(m){return m?new e.OngoingCall(m):new e.OngoingCallPromise}wrap(m){return m}call(m,d,l,a){a.call((o,h)=>this._wrapOperation(m,l,o,h),d)}_wrapOperation(m,d,l,a){let o=d.longrunning;o||(o=(0,t.createDefaultBackoffSettings)());const h=this.longrunningDescriptor;return m(l,(v,_)=>{if(v){a(v,null,null,_);return}const y=new s.Operation(_,h,o,d);a(null,y,_)})}fail(m,d){m.callback(d)}result(m){return m.promise}}return longRunningApiCaller.LongrunningApiCaller=p,longRunningApiCaller}var hasRequiredLongRunningDescriptor;function requireLongRunningDescriptor(){if(hasRequiredLongRunningDescriptor)return longRunningDescriptor;hasRequiredLongRunningDescriptor=1,Object.defineProperty(longRunningDescriptor,"__esModule",{value:!0}),longRunningDescriptor.LongRunningDescriptor=void 0;const e=requireLongRunningApiCaller();class t{constructor(p,g,m){this.operationsClient=p,this.responseDecoder=g,this.metadataDecoder=m}getApiCaller(){return new e.LongrunningApiCaller(this)}}return longRunningDescriptor.LongRunningDescriptor=t,longRunningDescriptor}var pageDescriptor={},pagedApiCaller={},resourceCollector={},hasRequiredResourceCollector;function requireResourceCollector(){if(hasRequiredResourceCollector)return resourceCollector;hasRequiredResourceCollector=1,Object.defineProperty(resourceCollector,"__esModule",{value:!0}),resourceCollector.ResourceCollector=void 0;class e{constructor(s,p=-1){this.apiCall=s,this.resources=[],this.maxResults=p}callback(s,p,g){if(s){this.rejectCallback(s);return}for(const d of p)if(this.resources.push(d),this.resources.length===this.maxResults){g=null;break}if(!g){this.resolveCallback(this.resources);return}const m=(...d)=>this.callback(...d);setImmediate(this.apiCall,g,m)}processAllPages(s){return new Promise((p,g)=>{this.resolveCallback=p,this.rejectCallback=g;const m=(...d)=>this.callback(...d);setImmediate(this.apiCall,s,m)})}}return resourceCollector.ResourceCollector=e,resourceCollector}var hasRequiredPagedApiCaller;function requirePagedApiCaller(){if(hasRequiredPagedApiCaller)return pagedApiCaller;hasRequiredPagedApiCaller=1,Object.defineProperty(pagedApiCaller,"__esModule",{value:!0}),pagedApiCaller.PagedApiCaller=void 0;const e=requireCall(),t=requireGoogleError(),s=requireResourceCollector(),p=requireWarnings();class g{constructor(d){this.pageDescriptor=d}generateParseResponseCallback(d,l){const a=this.pageDescriptor.resourceField,o=this.pageDescriptor.responsePageTokenField,h=this.pageDescriptor.requestPageTokenField;return(v,_)=>{if(v){l(v);return}if(!d){l(new t.GoogleError("Undefined request in pagination method callback."));return}if(!_){l(new t.GoogleError("Undefined response in pagination method callback."));return}const y=_[a]||[],w=_[o];let T=null;w&&(T=Object.assign({},d),T[h]=w),l(v,y,T,_)}}wrap(d){const l=this;return function(o,h,v,_){return d(o,h,v,l.generateParseResponseCallback(o,_))}}init(d){return d?new e.OngoingCall(d):new e.OngoingCallPromise}call(d,l,a,o){if(l=Object.assign({},l),!a.autoPaginate){o.call(d,l);return}l.pageSize&&a.autoPaginate&&(0,p.warn)("autoPaginate true","Providing a pageSize without setting autoPaginate to false will still return all results. See https://github.com/googleapis/gax-nodejs/blob/main/client-libraries.md#auto-pagination for more information on how to configure manual paging","AutopaginateTrueWarning");const h=a.maxResults||-1;new s.ResourceCollector(d,h).processAllPages(l).then(_=>o.callback(null,_),_=>o.callback(_))}fail(d,l){d.callback(l)}result(d){return d.promise}}return pagedApiCaller.PagedApiCaller=g,pagedApiCaller}var hasRequiredPageDescriptor;function requirePageDescriptor(){if(hasRequiredPageDescriptor)return pageDescriptor;hasRequiredPageDescriptor=1,Object.defineProperty(pageDescriptor,"__esModule",{value:!0}),pageDescriptor.PageDescriptor=void 0;const e=require$$1$3,t=requireNormalApiCaller(),s=requireWarnings(),p=requirePagedApiCaller(),g=10;class m{constructor(l,a,o){this.requestPageTokenField=l,this.responsePageTokenField=a,this.resourceField=o}createStream(l,a,o){o?.autoPaginate&&(0,s.warn)("autoPaginate true","Autopaginate will always be set to false in stream paging methods. See more info at https://github.com/googleapis/gax-nodejs/blob/main/client-libraries.md#auto-pagination for more information on how to configure paging calls","AutopaginateTrueWarning");const h=new e.PassThrough({objectMode:!0});o=Object.assign({},o,{autoPaginate:!1});const v="maxResults"in o?o.maxResults:-1;let _=0,y=!1;function w(T,I,O,E){if(T){h.emit("error",T);return}h.emit("response",E);for(let C=0;C<I.length;++C){if(h._readableState.ended)return;I[C]!==null&&(h.push(I[C]),_++,_===v&&h.end())}if(!h._readableState.ended){if(!O){h.end();return}"pageToken"in o&&delete o.pageToken,h.isPaused()?(a=O,y=!1):setImmediate(l,O,o,w)}}return h.on("resume",()=>{y||(y=!0,l(a,o,w))}),h}asyncIterate(l,a,o){return o?.autoPaginate&&(0,s.warn)("autoPaginate true","Autopaginate will always be set to false in Async paging methods. See more info at https://github.com/googleapis/gax-nodejs/blob/main/client-libraries.md#auto-pagination for more information on how to configure paging calls","AutopaginateTrueWarning"),o=Object.assign({},o,{autoPaginate:!1}),this.createIterator(l,a,o)}createIterator(l,a,o){return{[Symbol.asyncIterator](){let v=a;const _=[];return{async next(){if(_.length>0)return Promise.resolve({done:!1,value:_.shift()});let y=0;for(;_.length===0&&v;){let w;if([w,v]=await l(v,o),w&&!Array.isArray(w))for(const[T,I]of Object.entries(w))_.push([T,I]);else _.push(...w);if(_.length===0&&(++y,y>g))break}return _.length===0?Promise.resolve({done:!0,value:void 0}):Promise.resolve({done:!1,value:_.shift()})}}}}}getApiCaller(l){return l.autoPaginate?new p.PagedApiCaller(this):new t.NormalApiCaller}}return pageDescriptor.PageDescriptor=m,pageDescriptor}var streamDescriptor={},hasRequiredStreamDescriptor;function requireStreamDescriptor(){if(hasRequiredStreamDescriptor)return streamDescriptor;hasRequiredStreamDescriptor=1,Object.defineProperty(streamDescriptor,"__esModule",{value:!0}),streamDescriptor.StreamDescriptor=void 0;const e=requireStreamingApiCaller();class t{constructor(p,g,m){this.type=p,this.streaming=!0,this.rest=g,this.gaxStreamingRetries=m}getApiCaller(){return new e.StreamingApiCaller(this)}}return streamDescriptor.StreamDescriptor=t,streamDescriptor}var bundleDescriptor={},bundleApiCaller={},hasRequiredBundleApiCaller;function requireBundleApiCaller(){if(hasRequiredBundleApiCaller)return bundleApiCaller;hasRequiredBundleApiCaller=1,Object.defineProperty(bundleApiCaller,"__esModule",{value:!0}),bundleApiCaller.BundleApiCaller=void 0;const e=requireCall(),t=requireGoogleError();class s{constructor(g){this.bundler=g}init(g){return g?new e.OngoingCall(g):new e.OngoingCallPromise}wrap(g){return g}call(g,m,d,l){if(!d.isBundling)throw new t.GoogleError("Bundling enabled with no isBundling!");l.call((a,o)=>(this.bundler.schedule(g,a,o),l),m)}fail(g,m){g.callback(m)}result(g){return g.promise}}return bundleApiCaller.BundleApiCaller=s,bundleApiCaller}var bundleExecutor={},bundlingUtils={},hasRequiredBundlingUtils;function requireBundlingUtils(){if(hasRequiredBundlingUtils)return bundlingUtils;hasRequiredBundlingUtils=1,Object.defineProperty(bundlingUtils,"__esModule",{value:!0}),bundlingUtils.computeBundleId=e;function e(s,p){const g=[];let m=!1;for(const d of p){const l=t(s,d);l===void 0?g.push(null):(m=!0,g.push(l))}if(m)return JSON.stringify(g)}function t(s,p){const g=p.split(".");let m=s;for(const d of g)m=m?.[d];return m}return bundlingUtils}var task={},hasRequiredTask;function requireTask(){if(hasRequiredTask)return task;hasRequiredTask=1,Object.defineProperty(task,"__esModule",{value:!0}),task.Task=void 0,task.deepCopyForResponse=s;const e=requireStatus(),t=requireGoogleError();function s(g,m){let d;if(g===null)return null;if(g!==void 0)return Array.isArray(g)?(d=[],g.forEach(l=>{d.push(s(l,null))}),d):g.copy!==void 0?g.copy():g instanceof ArrayBuffer?g.slice(0):typeof g=="object"?(d={},Object.keys(g).forEach(l=>{m&&l===m.field&&Array.isArray(g[l])?d[l]=g[l].slice(m.start,m.end):d[l]=s(g[l],null)}),d):g}class p{constructor(m,d,l,a){this._apiCall=m,this._request=d,this._bundledField=l,this._subresponseField=a,this._data=[]}getElementCount(){let m=0;for(let d=0;d<this._data.length;++d)m+=this._data[d].elements.length;return m}getRequestByteSize(){let m=0;for(let d=0;d<this._data.length;++d)m+=this._data[d].bytes;return m}run(){if(this._data.length===0)return[];const m=this._request,d=[],l=[];for(let o=0;o<this._data.length;++o)d.push(...this._data[o].elements),l.push(this._data[o].callback.id);m[this._bundledField]=d;const a=this;return this.callCanceller=this._apiCall(m,(o,h)=>{const v=[];if(o)a._data.forEach(()=>{v.push(void 0)});else{let _=null;a._subresponseField&&(_={field:a._subresponseField,start:0}),a._data.forEach(y=>{_&&(_.end=_.start+y.elements.length),v.push(s(h,_)),_&&(_.start=_.end)})}for(let _=0;_<a._data.length;++_)if(a._data[_].cancelled){const y=new t.GoogleError("cancelled");y.code=e.Status.CANCELLED,a._data[_].callback(y)}else a._data[_].callback(o,v[_])}),l}extend(m,d,l){this._data.push({elements:m,bytes:d,callback:l})}cancel(m){if(this.callCanceller){let d=!0;return this._data.forEach(l=>{l.callback.id===m&&(l.cancelled=!0),l.cancelled||(d=!1)}),d&&this.callCanceller.cancel(),d}for(let d=0;d<this._data.length;++d)if(this._data[d].callback.id===m){const l=new t.GoogleError("cancelled");l.code=e.Status.CANCELLED,this._data[d].callback(l),this._data.splice(d,1);break}return this._data.length===0}}return task.Task=p,task}var hasRequiredBundleExecutor;function requireBundleExecutor(){if(hasRequiredBundleExecutor)return bundleExecutor;hasRequiredBundleExecutor=1,Object.defineProperty(bundleExecutor,"__esModule",{value:!0}),bundleExecutor.BundleExecutor=void 0;const e=requireStatus(),t=requireGoogleError(),s=requireWarnings(),p=requireBundlingUtils(),g=requireTask();function m(){}class d{constructor(a,o){this._options=a,this._descriptor=o,this._tasks={},this._timers={},this._invocations={},this._invocationId=0}schedule(a,o,h){const v=(0,p.computeBundleId)(o,this._descriptor.requestDiscriminatorFields);if(h=h||m,v===void 0)return(0,s.warn)("bundling_schedule_bundleid_undefined",`The request does not have enough information for request bundling. Invoking immediately. Request: ${JSON.stringify(o)} discriminator fields: ${this._descriptor.requestDiscriminatorFields}`),a(o,h);if(o[this._descriptor.bundledField]===void 0)return(0,s.warn)("bundling_no_bundled_field",`Request does not contain field ${this._descriptor.bundledField} that must present for bundling. Invoking immediately. Request: ${JSON.stringify(o)}`),a(o,h);v in this._tasks||(this._tasks[v]=new g.Task(a,o,this._descriptor.bundledField,this._descriptor.subresponseField));let _=this._tasks[v];h.id=String(this._invocationId++),this._invocations[h.id]=v;const y=o[this._descriptor.bundledField],w=y.length;let T=0;const I=this;y.forEach(q=>{T+=this._descriptor.byteLengthFunction(q)});const O=this._options.elementCountLimit||0,E=this._options.requestByteLimit||0;if(O>0&&w>O||E>0&&T>=E){let q;O>0&&w>O?q="The number of elements "+w+" exceeds the limit "+this._options.elementCountLimit:q="The required bytes "+T+" exceeds the limit "+this._options.requestByteLimit;const G=new t.GoogleError(q);return G.code=e.Status.INVALID_ARGUMENT,h(G),{cancel:m}}const C=_.getElementCount(),x=_.getRequestByteSize();(O>0&&w+C>=O||E>0&&T+x>=E)&&(this._runNow(v),this._tasks[v]=new g.Task(a,o,this._descriptor.bundledField,this._descriptor.subresponseField),_=this._tasks[v]),_.extend(y,T,h);const j={cancel(){I._cancel(h.id)}},D=this._options.elementCountThreshold||0,k=this._options.requestByteThreshold||0;return D>0&&_.getElementCount()>=D||k>0&&_.getRequestByteSize()>=k?(this._runNow(v),j):(!(v in this._timers)&&this._options.delayThreshold>0&&(this._timers[v]=setTimeout(()=>{delete this._timers[v],this._runNow(v)},this._options.delayThreshold)),j)}_maybeClearTimeout(a){if(a in this._timers){const o=this._timers[a];delete this._timers[a],clearTimeout(o)}}_cancel(a){if(!(a in this._invocations))return;const o=this._invocations[a];if(!(o in this._tasks))return;const h=this._tasks[o];delete this._invocations[a],h.cancel(a)&&(this._maybeClearTimeout(o),delete this._tasks[o])}_runNow(a){if(!(a in this._tasks)){(0,s.warn)("bundle_runnow_bundleid_unknown",`No such bundleid: ${a}`);return}this._maybeClearTimeout(a);const o=this._tasks[a];delete this._tasks[a],o.run().forEach(h=>{delete this._invocations[h]})}}return bundleExecutor.BundleExecutor=d,bundleExecutor}var hasRequiredBundleDescriptor;function requireBundleDescriptor(){if(hasRequiredBundleDescriptor)return bundleDescriptor;hasRequiredBundleDescriptor=1,Object.defineProperty(bundleDescriptor,"__esModule",{value:!0}),bundleDescriptor.BundleDescriptor=void 0;const e=requireNormalApiCaller(),t=requireBundleApiCaller(),s=requireBundleExecutor(),p=requireUtil$2();class g{constructor(d,l,a,o){!o&&typeof a=="function"&&(o=a,a=null),this.bundledField=d,this.requestDiscriminatorFields=l.map(p.toCamelCase),this.subresponseField=a,this.byteLengthFunction=o}getApiCaller(d){return d.isBundling===!1?new e.NormalApiCaller:new t.BundleApiCaller(new s.BundleExecutor(d.bundleOptions,this))}}return bundleDescriptor.BundleDescriptor=g,bundleDescriptor}var hasRequiredDescriptor;function requireDescriptor(){return hasRequiredDescriptor||(hasRequiredDescriptor=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.BundleDescriptor=e.StreamDescriptor=e.PageDescriptor=e.LongrunningDescriptor=void 0;var t=requireLongRunningDescriptor();Object.defineProperty(e,"LongrunningDescriptor",{enumerable:!0,get:function(){return t.LongRunningDescriptor}});var s=requirePageDescriptor();Object.defineProperty(e,"PageDescriptor",{enumerable:!0,get:function(){return s.PageDescriptor}});var p=requireStreamDescriptor();Object.defineProperty(e,"StreamDescriptor",{enumerable:!0,get:function(){return p.StreamDescriptor}});var g=requireBundleDescriptor();Object.defineProperty(e,"BundleDescriptor",{enumerable:!0,get:function(){return g.BundleDescriptor}})})(descriptor)),descriptor}const interfaces$4={"google.longrunning.Operations":{retry_codes:{idempotent:["DEADLINE_EXCEEDED","UNAVAILABLE"],non_idempotent:[]},retry_params:{default:{initial_retry_delay_millis:100,retry_delay_multiplier:1.3,max_retry_delay_millis:6e4,initial_rpc_timeout_millis:9e4,rpc_timeout_multiplier:1,max_rpc_timeout_millis:9e4,total_timeout_millis:6e5}},methods:{GetOperation:{timeout_millis:6e4,retry_codes_name:"idempotent",retry_params_name:"default"},ListOperations:{timeout_millis:6e4,retry_codes_name:"idempotent",retry_params_name:"default"},CancelOperation:{timeout_millis:6e4,retry_codes_name:"idempotent",retry_params_name:"default"},DeleteOperation:{timeout_millis:6e4,retry_codes_name:"idempotent",retry_params_name:"default"}}}},require$$3={interfaces:interfaces$4},nested$5=JSON.parse('{"google":{"nested":{"longrunning":{"options":{"cc_enable_arenas":true,"csharp_namespace":"Google.LongRunning","go_package":"google.golang.org/genproto/googleapis/longrunning;longrunning","java_multiple_files":true,"java_outer_classname":"OperationsProto","java_package":"com.google.longrunning","php_namespace":"Google\\\\LongRunning"},"nested":{"operationInfo":{"type":"google.longrunning.OperationInfo","id":1049,"extend":"google.protobuf.MethodOptions"},"Operations":{"options":{"(google.api.default_host)":"longrunning.googleapis.com"},"methods":{"ListOperations":{"requestType":"ListOperationsRequest","responseType":"ListOperationsResponse","options":{"(google.api.http).get":"/v1/{name=operations}","(google.api.method_signature)":"name,filter"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=operations}"}},{"(google.api.method_signature)":"name,filter"}]},"GetOperation":{"requestType":"GetOperationRequest","responseType":"Operation","options":{"(google.api.http).get":"/v1/operations/{name}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/operations/{name}"}},{"(google.api.method_signature)":"name"}]},"DeleteOperation":{"requestType":"DeleteOperationRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).delete":"/v1/{name=operations/**}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"delete":"/v1/{name=operations/**}"}},{"(google.api.method_signature)":"name"}]},"CancelOperation":{"requestType":"CancelOperationRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).post":"/v1/{name=operations/**}:cancel","(google.api.http).body":"*","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{name=operations/**}:cancel","body":"*"}},{"(google.api.method_signature)":"name"}]},"WaitOperation":{"requestType":"WaitOperationRequest","responseType":"Operation"}}},"Operation":{"oneofs":{"result":{"oneof":["error","response"]}},"fields":{"name":{"type":"string","id":1},"metadata":{"type":"google.protobuf.Any","id":2},"done":{"type":"bool","id":3},"error":{"type":"google.rpc.Status","id":4},"response":{"type":"google.protobuf.Any","id":5}}},"GetOperationRequest":{"fields":{"name":{"type":"string","id":1}}},"ListOperationsRequest":{"fields":{"name":{"type":"string","id":4},"filter":{"type":"string","id":1},"pageSize":{"type":"int32","id":2},"pageToken":{"type":"string","id":3}}},"ListOperationsResponse":{"fields":{"operations":{"rule":"repeated","type":"Operation","id":1},"nextPageToken":{"type":"string","id":2}}},"CancelOperationRequest":{"fields":{"name":{"type":"string","id":1}}},"DeleteOperationRequest":{"fields":{"name":{"type":"string","id":1}}},"WaitOperationRequest":{"fields":{"name":{"type":"string","id":1},"timeout":{"type":"google.protobuf.Duration","id":2}}},"OperationInfo":{"fields":{"responseType":{"type":"string","id":1},"metadataType":{"type":"string","id":2}}}}},"api":{"options":{"go_package":"google.golang.org/genproto/googleapis/api/annotations;annotations","java_multiple_files":true,"java_outer_classname":"ClientProto","java_package":"com.google.api","objc_class_prefix":"GAPI","cc_enable_arenas":true},"nested":{"http":{"type":"HttpRule","id":72295728,"extend":"google.protobuf.MethodOptions"},"Http":{"fields":{"rules":{"rule":"repeated","type":"HttpRule","id":1},"fullyDecodeReservedExpansion":{"type":"bool","id":2}}},"HttpRule":{"oneofs":{"pattern":{"oneof":["get","put","post","delete","patch","custom"]}},"fields":{"selector":{"type":"string","id":1},"get":{"type":"string","id":2},"put":{"type":"string","id":3},"post":{"type":"string","id":4},"delete":{"type":"string","id":5},"patch":{"type":"string","id":6},"custom":{"type":"CustomHttpPattern","id":8},"body":{"type":"string","id":7},"responseBody":{"type":"string","id":12},"additionalBindings":{"rule":"repeated","type":"HttpRule","id":11}}},"CustomHttpPattern":{"fields":{"kind":{"type":"string","id":1},"path":{"type":"string","id":2}}},"methodSignature":{"rule":"repeated","type":"string","id":1051,"extend":"google.protobuf.MethodOptions"},"defaultHost":{"type":"string","id":1049,"extend":"google.protobuf.ServiceOptions"},"oauthScopes":{"type":"string","id":1050,"extend":"google.protobuf.ServiceOptions"}}},"protobuf":{"options":{"go_package":"github.com/golang/protobuf/protoc-gen-go/descriptor;descriptor","java_package":"com.google.protobuf","java_outer_classname":"DescriptorProtos","csharp_namespace":"Google.Protobuf.Reflection","objc_class_prefix":"GPB","cc_enable_arenas":true,"optimize_for":"SPEED"},"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2},"options":{"type":"ExtensionRangeOptions","id":3}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"ExtensionRangeOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8},"proto3Optional":{"type":"bool","id":17}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REQUIRED":2,"LABEL_REPEATED":3}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3},"reservedRange":{"rule":"repeated","type":"EnumReservedRange","id":4},"reservedName":{"rule":"repeated","type":"string","id":5}},"nested":{"EnumReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5,"options":{"default":false}},"serverStreaming":{"type":"bool","id":6,"options":{"default":false}}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10,"options":{"default":false}},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27,"options":{"default":false}},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16,"options":{"default":false}},"javaGenericServices":{"type":"bool","id":17,"options":{"default":false}},"pyGenericServices":{"type":"bool","id":18,"options":{"default":false}},"phpGenericServices":{"type":"bool","id":42,"options":{"default":false}},"deprecated":{"type":"bool","id":23,"options":{"default":false}},"ccEnableArenas":{"type":"bool","id":31,"options":{"default":true}},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"swiftPrefix":{"type":"string","id":39},"phpClassPrefix":{"type":"string","id":40},"phpNamespace":{"type":"string","id":41},"phpMetadataNamespace":{"type":"string","id":44},"rubyPackage":{"type":"string","id":45},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1,"options":{"default":false}},"noStandardDescriptorAccessor":{"type":"bool","id":2,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"mapEntry":{"type":"bool","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[8,8],[9,9]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"weak":{"type":"bool","id":10,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}}}},"OneofOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[5,5]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"deprecated":{"type":"bool","id":33,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33,"options":{"default":false}},"idempotencyLevel":{"type":"IdempotencyLevel","id":34,"options":{"default":"IDEMPOTENCY_UNKNOWN"}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"nested":{"IdempotencyLevel":{"values":{"IDEMPOTENCY_UNKNOWN":0,"NO_SIDE_EFFECTS":1,"IDEMPOTENT":2}}}},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4}}}}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"Duration":{"fields":{"seconds":{"type":"int64","id":1},"nanos":{"type":"int32","id":2}}},"Empty":{"fields":{}}}},"rpc":{"options":{"cc_enable_arenas":true,"go_package":"google.golang.org/genproto/googleapis/rpc/status;status","java_multiple_files":true,"java_outer_classname":"StatusProto","java_package":"com.google.rpc","objc_class_prefix":"RPC"},"nested":{"Status":{"fields":{"code":{"type":"int32","id":1},"message":{"type":"string","id":2},"details":{"rule":"repeated","type":"google.protobuf.Any","id":3}}}}}}}}'),require$$4={nested:nested$5};var transcoding={},hasRequiredTranscoding;function requireTranscoding(){if(hasRequiredTranscoding)return transcoding;hasRequiredTranscoding=1,Object.defineProperty(transcoding,"__esModule",{value:!0}),transcoding.getField=g,transcoding.deepCopyWithoutMatchedFields=m,transcoding.deleteField=d,transcoding.buildQueryStringComponents=l,transcoding.encodeWithSlashes=a,transcoding.encodeWithoutSlashes=o,transcoding.applyPattern=v,transcoding.match=y,transcoding.flattenObject=w,transcoding.isProto3OptionalField=T,transcoding.transcode=I,transcoding.overrideHttpRules=O;const e=requireUtil$2(),t="(google.api.http)",s="proto3_optional",p=["get","post","put","patch","delete"];function g(E,C,x=!1){const j=C.split(".");let D=E;for(const k of j){if(typeof D!="object")return;D=D[k]}if(!(!x&&typeof D=="object"&&!Array.isArray(D)&&D!==null))return D}function m(E,C,x=""){if(typeof E!="object"||E===null)return E;const j=Object.assign({},E);for(const D in j){if(C.has(`${x}${D}`)){delete j[D];continue}const k=`${x}${D}.`;Array.isArray(j[D])?j[D]=j[D].map(q=>m(q,new Set)):typeof j[D]=="object"&&j[D]!==null&&(j[D]=m(j[D],C,k))}return j}function d(E,C){const x=C.split(".");for(;x.length>1;){if(typeof E!="object")return;const D=x.shift();E=E[D]}const j=x.shift();typeof E=="object"&&delete E[j]}function l(E,C=""){const x=[];for(const j in E)if(Array.isArray(E[j]))for(const D of E[j])x.push(`${C}${o(j)}=${o(D.toString())}`);else typeof E[j]=="object"&&E[j]!==null?x.push(...l(E[j],`${j}.`)):x.push(`${C}${o(j)}=${o(E[j]===null?"null":E[j].toString())}`);return x}function a(E){return E.split("").map(C=>C.match(/[-_.~0-9a-zA-Z]/)?C:encodeURIComponent(C)).join("")}function o(E){return E.split("").map(C=>C.match(/[-_.~0-9a-zA-Z/]/)?C:encodeURIComponent(C)).join("")}function h(E){return E.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v(E,C){if(!E||E==="*")return a(C);if(!E.includes("*")&&E!==C)return;const x=new RegExp("^"+h(E).replace(/\\\*\\\*/g,"(.+)").replace(/\\\*/g,"([^/]+)")+"$");if(C.match(x))return o(C)}function _(E){return E.split(".").map(x=>(0,e.toCamelCase)(x)).join(".")}function y(E,C){let x=C;const j=[];for(;;){const D=x.match(/^(.*)\{([^}=]+)(?:=([^}]*))?\}(.*)/);if(!D)break;const[,k,q,G,$]=D,W=_(q);j.push(_(W));const K=g(E,W);if(K===void 0)return;const z=v(G,K===null?"null":K.toString());if(z===void 0)return;x=k+z+$}return{matchedFields:j,url:x}}function w(E){const C={};for(const x in E)if(E[x]!==void 0){if(Array.isArray(E[x])){C[x]=E[x];continue}if(typeof E[x]=="object"&&E[x]!==null){const j=w(E[x]);for(const D in j)C[`${x}.${D}`]=j[D];continue}C[x]=E[x]}return C}function T(E){return E&&E.options&&E.options[s]}function I(E,C){const x=[];for(const j of C){if(!(t in j))continue;const D=j[t];if(x.push(D),D?.additional_bindings){const k=Array.isArray(D.additional_bindings)?D.additional_bindings:[D.additional_bindings];x.push(...k)}}for(const j of x)for(const D of p){if(!(D in j))continue;const k=j[D],q=y(E,k);if(q===void 0)continue;const{url:G,matchedFields:$}=q;let W=m(E,new Set($));if(j.body==="*")return{httpMethod:D,url:G,queryString:"",data:W};const K=W;j.body?(W=g(K,_(j.body),!0),d(K,_(j.body))):W="";const Q=l(K).join("&");return(!W||typeof W=="object"&&Object.keys(W).length===0)&&(W=""),{httpMethod:D,url:G,queryString:Q,data:W}}}function O(E,C){for(const x of E){if(!x.selector)continue;const j=C.lookup(x.selector);if(!(!j||!j.parsedOptions))for(const D of j.parsedOptions){if(!(t in D))continue;const k=D[t];for(const q in k){if(q in x){if(q==="additional_bindings")continue;k[q]=x[q]}x.additional_bindings&&(k.additional_bindings=k.additional_bindings?Array.isArray(k.additional_bindings)?k.additional_bindings:[k.additional_bindings]:[],k.additional_bindings.push(...x.additional_bindings))}}}}return transcoding}const version$1="4.6.1",require$$17={version:version$1};var hasRequiredOperationsClient;function requireOperationsClient(){return hasRequiredOperationsClient||(hasRequiredOperationsClient=1,(function(e){var t={};Object.defineProperty(e,"__esModule",{value:!0}),e.OperationsClientBuilder=e.OperationsClient=e.ALL_SCOPES=e.SERVICE_ADDRESS=void 0;const s=requireCreateApiCall(),p=requireDescriptor(),g=requireGax(),m=require$$3,d=require$$4,l=requireTranscoding();e.SERVICE_ADDRESS="longrunning.googleapis.com";const a=require$$17.version,o=443,h="gapic/0.7.1";e.ALL_SCOPES=[];class v{constructor(w,T,I){const O=Object.assign({servicePath:e.SERVICE_ADDRESS,port:o,clientConfig:{}},I),E=["gl-node/"+t.versions.node];O.libName&&O.libVersion&&E.push(O.libName+"/"+O.libVersion),E.push(h,"gax/"+a),O.fallback?E.push("gl-web/"+a):E.push("grpc/"+w.grpcVersion);const C=w.constructSettings("google.longrunning.Operations",m,O.clientConfig||{},{"x-goog-api-client":E.join(" ")});this.auth=w.auth,this.innerApiCalls={},this.descriptor={listOperations:new p.PageDescriptor("pageToken","nextPageToken","operations")},this.operationsStub=w.createStub(O.fallback?T.lookupService("google.longrunning.Operations"):T.google.longrunning.Operations,O);const x=["getOperation","listOperations","cancelOperation","deleteOperation"];for(const j of x){const D=this.operationsStub.then(k=>(...q)=>k[j].apply(k,q),k=>()=>{throw k});this.innerApiCalls[j]=(0,s.createApiCall)(D,C[j],this.descriptor[j])}}close(){this.operationsStub.then(w=>w.close())}getProjectId(w){if(this.auth&&"getProjectId"in this.auth)return this.auth.getProjectId(w);if(w)w(new Error("Cannot determine project ID."));else return Promise.reject("Cannot determine project ID.")}getOperationInternal(w,T,I){return w=w||{},T=T||{},this.innerApiCalls.getOperation(w,T,I)}getOperation(w,T,I){let O;return T instanceof Function&&I===void 0?(I=T,O={}):O=T,w=w||{},O=O||{},this.innerApiCalls.getOperation(w,O,I)}listOperations(w,T,I){let O;return T instanceof Function&&I===void 0?(I=T,O={}):O=T,w=w||{},O=O||{},this.innerApiCalls.listOperations(w,O,I)}listOperationsStream(w,T){const I=new g.CallSettings(T);return this.descriptor.listOperations.createStream(this.innerApiCalls.listOperations,w,I)}listOperationsAsync(w,T){w=w||{},T=T||{};const I=new g.CallSettings(T);return this.descriptor.listOperations.asyncIterate(this.innerApiCalls.listOperations,w,I)}cancelOperation(w,T,I){let O;return T instanceof Function&&I===void 0?(I=T,O={}):O=T,w=w||{},O=O||{},this.innerApiCalls.cancelOperation(w,O,I)}deleteOperation(w,T,I){let O;return T instanceof Function&&I===void 0?(I=T,O={}):O=T,w=w||{},O=O||{},this.innerApiCalls.deleteOperation(w,O,I)}}e.OperationsClient=v;class _{constructor(w,T){T&&w.httpRules&&(0,l.overrideHttpRules)(w.httpRules,T);const I=T??w.loadProtoJSON(d);this.operationsClient=O=>(w.fallback&&(O.fallback=w.fallback),new v(w,I,O)),Object.assign(this.operationsClient,v)}}e.OperationsClientBuilder=_})(operationsClient)),operationsClient}var fallbackRest={},hasRequiredFallbackRest;function requireFallbackRest(){if(hasRequiredFallbackRest)return fallbackRest;hasRequiredFallbackRest=1,Object.defineProperty(fallbackRest,"__esModule",{value:!0}),fallbackRest.encodeRequest=g,fallbackRest.decodeResponse=m;const e=requireSrc$1(),t=requireFallback(),s=requireGoogleError(),p=requireTranscoding();function g(d,l,a,o,h,v){const _={"Content-Type":"application/json"},y=d.resolvedRequestType.fromObject(h),w=e.toProto3JSON(y,{numericEnums:v});if(!w)throw new Error(`Cannot send null request to RPC ${d.name}.`);if(typeof w!="object"||Array.isArray(w))throw new Error(`Request to RPC ${d.name} must be an object.`);const T=(0,p.transcode)(w,d.parsedOptions);if(!T)throw new Error(`Cannot build HTTP request for ${JSON.stringify(w)}, method: ${d.name}`);v&&(T.queryString=(T.queryString?`${T.queryString}&`:"")+"$alt=json%3Benum-encoding=int");const I=T.httpMethod.toUpperCase(),O=JSON.stringify(T.data),E=`${l}://${a}:${o}/${T.url.replace(/^\//,"")}?${T.queryString}`;return{method:I,url:E,headers:_,body:O}}function m(d,l,a){const o=new TextDecoder().decode(a);if(!o)throw new Error(`Received null response from RPC ${d.name}`);const h=JSON.parse(o);if(!l)throw s.GoogleError.parseHttpError(h);const v=e.fromProto3JSON(d.resolvedResponseType,h);if(!v)throw new Error(`Received null or malformed response from JSON serializer from RPC ${d.name}`);return d.resolvedResponseType.toObject(v,t.defaultToObjectOptions)}return fallbackRest}var fallbackServiceStub={},streamArrayParser={},hasRequiredStreamArrayParser;function requireStreamArrayParser(){if(hasRequiredStreamArrayParser)return streamArrayParser;hasRequiredStreamArrayParser=1,Object.defineProperty(streamArrayParser,"__esModule",{value:!0}),streamArrayParser.StreamArrayParser=void 0;const e=requireBrowser(),t=require$$1$3,s=requireFallbackRest(),p=requireFeatureDetection();class g extends t.Transform{constructor(d,l){super(Object.assign({},l,{readableObjectMode:!0})),this._done=!1,this._prevBlock=Buffer.from(""),this._isInString=!1,this._isSkipped=!1,this._level=0,this.rpc=d,this.cancelController=(0,p.hasAbortController)()?new AbortController:new e.AbortController,this.cancelSignal=this.cancelController.signal,this.cancelRequested=!1}_transform(d,l,a){let o=0,h=0;for(this._level===0&&h===0&&(String.fromCharCode(d[0])!=="["&&this.emit("error",new Error(`Internal Error: API service stream data must start with a '[' and close with the corresponding ']', but it start with ${String.fromCharCode(d[0])}`)),h++,this._level++);h<d.length;){const v=String.fromCharCode(d[h]);if(this._isSkipped)this._isSkipped=!1;else switch(v){case"{":this._isInString||this._level++,!this._isInString&&this._level===2&&(o=h);break;case'"':this._isInString=!this._isInString;break;case"}":if(this._isInString||this._level--,!this._isInString&&this._level===1){const _=Buffer.concat([this._prevBlock,d.slice(o,h+1)]);try{const y=(0,s.decodeResponse)(this.rpc,!0,_);this.push(y)}catch(y){this.emit("error",y)}o=h+1,this._prevBlock=Buffer.from("")}break;case"]":!this._isInString&&this._level===1&&(this._done=!0,this.push(null));break;case"\\":this._isSkipped=!0;break}h++}this._level>1&&(this._prevBlock=Buffer.concat([this._prevBlock,d.slice(o,h)])),a()}_flush(d){d()}cancel(){this._done=!0,this.cancelRequested=!0,this.cancelController.abort(),this.end()}}return streamArrayParser.StreamArrayParser=g,streamArrayParser}var hasRequiredFallbackServiceStub;function requireFallbackServiceStub(){if(hasRequiredFallbackServiceStub)return fallbackServiceStub;hasRequiredFallbackServiceStub=1,Object.defineProperty(fallbackServiceStub,"__esModule",{value:!0}),fallbackServiceStub.generateServiceStub=m;const e=requireBrowser$3(),t=requireBrowser(),s=requireFeatureDetection(),p=requireStreamArrayParser(),g=require$$1$3;function m(d,l,a,o,h,v,_,y){const w=(0,s.hasWindowFetch)()?window.fetch:e.default,T={close:()=>({cancel:()=>{}})};for(const[I,O]of Object.entries(d))T[I]=(E,C,x,j)=>{C??(C={});let D;try{D=v(O,l,a,o,E,y)}catch(z){return j&&j(z),{cancel(){}}}const k=(0,s.hasAbortController)()?new AbortController:new t.AbortController,q=k.signal;let G=!1;const $=D.url,W=D.headers;for(const z of Object.keys(C))W[z]=C[z][0];const K=new p.StreamArrayParser(O);return h.getRequestHeaders().then(z=>{const Q={headers:{...z,...W},body:D.body,method:D.method,signal:q};return(D.method==="GET"||D.method==="DELETE")&&delete Q.body,w($,Q)}).then(z=>{if(z.ok&&O.responseStream){(0,g.pipeline)(z.body,K,Q=>{Q&&(!G||Q instanceof Error&&Q.name!=="AbortError")&&(j&&j(Q),K.emit("error",Q))});return}else return Promise.all([Promise.resolve(z.ok),z.arrayBuffer()]).then(([Q,Y])=>{const te=_(O,Q,Y);j(null,te)}).catch(Q=>{if(!G||Q.name!=="AbortError")if(O.responseStream)j&&j(Q),K.emit("error",Q);else if(j)j(Q);else throw Q})}).catch(z=>{if(O.responseStream)j&&j(z),K.emit("error",z);else if(j)j(z);else throw z}),O.responseStream?K:{cancel:()=>{G=!0,k.abort()}}};return T}return fallbackServiceStub}var iam_service={exports:{}},hasRequiredIam_service;function requireIam_service(){return hasRequiredIam_service||(hasRequiredIam_service=1,(function(e){(t=>{typeof commonjsRequire=="function"&&e&&e.exports&&(e.exports=t(requireMinimal()))})(function(t){var s,p,g,m,d,l=t.Reader,a=t.Writer,o=t.util,h=t.roots.iam_protos||(t.roots.iam_protos={});function v(n,L,U){t.rpc.Service.call(this,n,L,U)}function _(n){if(n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function y(n){if(n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function w(n){if(this.permissions=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function T(n){if(this.permissions=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function I(n){if(n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function O(n){if(this.bindings=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function E(n){if(this.members=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function C(n){if(this.bindingDeltas=[],this.auditConfigDeltas=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function x(n){if(n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function j(n){if(n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function D(n){if(n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function k(n){if(this.rules=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function q(n){if(this.additionalBindings=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function G(n){if(n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function $(n){if(this.pattern=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function W(n){if(n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function K(n){if(this.file=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function z(n){if(this.dependency=[],this.publicDependency=[],this.weakDependency=[],this.messageType=[],this.enumType=[],this.service=[],this.extension=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function Q(n){if(this.field=[],this.extension=[],this.nestedType=[],this.enumType=[],this.extensionRange=[],this.oneofDecl=[],this.reservedRange=[],this.reservedName=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function Y(n){if(n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function te(n){if(n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function ae(n){if(this.uninterpretedOption=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function ue(n){if(n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function ee(n){if(n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function oe(n){if(this.value=[],this.reservedRange=[],this.reservedName=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function de(n){if(n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function he(n){if(n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function Ee(n){if(this.method=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function fe(n){if(n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function Se(n){if(this.uninterpretedOption=[],this[".google.api.resourceDefinition"]=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function be(n){if(this.uninterpretedOption=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function Oe(n){if(this.uninterpretedOption=[],this[".google.api.fieldBehavior"]=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function ge(n){if(this.uninterpretedOption=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function J(n){if(this.uninterpretedOption=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function c(n){if(this.uninterpretedOption=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function N(n){if(this.uninterpretedOption=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function A(n){if(this.uninterpretedOption=[],this[".google.api.methodSignature"]=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function V(n){if(this.name=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function ne(n){if(n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function ce(n){if(this.location=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function ie(n){if(this.path=[],this.span=[],this.leadingDetachedComments=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function u(n){if(this.annotation=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function P(n){if(this.path=[],n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}function M(n){if(n)for(var L=Object.keys(n),U=0;U<L.length;++U)n[L[U]]!=null&&(this[L[U]]=n[L[U]])}return h.google=((d={}).iam=((g={}).v1=((p={}).IAMPolicy=(((v.prototype=Object.create(t.rpc.Service.prototype)).constructor=v).create=function(n,L,U){return new this(n,L,U)},Object.defineProperty(v.prototype.setIamPolicy=function n(L,U){return this.rpcCall(n,h.google.iam.v1.SetIamPolicyRequest,h.google.iam.v1.Policy,L,U)},"name",{value:"SetIamPolicy"}),Object.defineProperty(v.prototype.getIamPolicy=function n(L,U){return this.rpcCall(n,h.google.iam.v1.GetIamPolicyRequest,h.google.iam.v1.Policy,L,U)},"name",{value:"GetIamPolicy"}),Object.defineProperty(v.prototype.testIamPermissions=function n(L,U){return this.rpcCall(n,h.google.iam.v1.TestIamPermissionsRequest,h.google.iam.v1.TestIamPermissionsResponse,L,U)},"name",{value:"TestIamPermissions"}),v),p.SetIamPolicyRequest=(_.prototype.resource="",_.prototype.policy=null,_.create=function(n){return new _(n)},_.encode=function(n,L){return L=L||a.create(),n.resource!=null&&Object.hasOwnProperty.call(n,"resource")&&L.uint32(10).string(n.resource),n.policy!=null&&Object.hasOwnProperty.call(n,"policy")&&h.google.iam.v1.Policy.encode(n.policy,L.uint32(18).fork()).ldelim(),L},_.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},_.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.iam.v1.SetIamPolicyRequest;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.resource=n.string();break;case 2:X.policy=h.google.iam.v1.Policy.decode(n,n.uint32());break;default:n.skipType(7&me)}}return X},_.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},_.verify=function(n){return typeof n!="object"||n===null?"object expected":n.resource!=null&&n.hasOwnProperty("resource")&&!o.isString(n.resource)?"resource: string expected":n.policy!=null&&n.hasOwnProperty("policy")&&(n=h.google.iam.v1.Policy.verify(n.policy),n)?"policy."+n:null},_.fromObject=function(n){if(n instanceof h.google.iam.v1.SetIamPolicyRequest)return n;var L=new h.google.iam.v1.SetIamPolicyRequest;if(n.resource!=null&&(L.resource=String(n.resource)),n.policy!=null){if(typeof n.policy!="object")throw TypeError(".google.iam.v1.SetIamPolicyRequest.policy: object expected");L.policy=h.google.iam.v1.Policy.fromObject(n.policy)}return L},_.toObject=function(n,L){var U={};return(L=L||{}).defaults&&(U.resource="",U.policy=null),n.resource!=null&&n.hasOwnProperty("resource")&&(U.resource=n.resource),n.policy!=null&&n.hasOwnProperty("policy")&&(U.policy=h.google.iam.v1.Policy.toObject(n.policy,L)),U},_.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},_),p.GetIamPolicyRequest=(y.prototype.resource="",y.prototype.options=null,y.create=function(n){return new y(n)},y.encode=function(n,L){return L=L||a.create(),n.resource!=null&&Object.hasOwnProperty.call(n,"resource")&&L.uint32(10).string(n.resource),n.options!=null&&Object.hasOwnProperty.call(n,"options")&&h.google.iam.v1.GetPolicyOptions.encode(n.options,L.uint32(18).fork()).ldelim(),L},y.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},y.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.iam.v1.GetIamPolicyRequest;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.resource=n.string();break;case 2:X.options=h.google.iam.v1.GetPolicyOptions.decode(n,n.uint32());break;default:n.skipType(7&me)}}return X},y.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},y.verify=function(n){return typeof n!="object"||n===null?"object expected":n.resource!=null&&n.hasOwnProperty("resource")&&!o.isString(n.resource)?"resource: string expected":n.options!=null&&n.hasOwnProperty("options")&&(n=h.google.iam.v1.GetPolicyOptions.verify(n.options),n)?"options."+n:null},y.fromObject=function(n){if(n instanceof h.google.iam.v1.GetIamPolicyRequest)return n;var L=new h.google.iam.v1.GetIamPolicyRequest;if(n.resource!=null&&(L.resource=String(n.resource)),n.options!=null){if(typeof n.options!="object")throw TypeError(".google.iam.v1.GetIamPolicyRequest.options: object expected");L.options=h.google.iam.v1.GetPolicyOptions.fromObject(n.options)}return L},y.toObject=function(n,L){var U={};return(L=L||{}).defaults&&(U.resource="",U.options=null),n.resource!=null&&n.hasOwnProperty("resource")&&(U.resource=n.resource),n.options!=null&&n.hasOwnProperty("options")&&(U.options=h.google.iam.v1.GetPolicyOptions.toObject(n.options,L)),U},y.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},y),p.TestIamPermissionsRequest=(w.prototype.resource="",w.prototype.permissions=o.emptyArray,w.create=function(n){return new w(n)},w.encode=function(n,L){if(L=L||a.create(),n.resource!=null&&Object.hasOwnProperty.call(n,"resource")&&L.uint32(10).string(n.resource),n.permissions!=null&&n.permissions.length)for(var U=0;U<n.permissions.length;++U)L.uint32(18).string(n.permissions[U]);return L},w.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},w.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.iam.v1.TestIamPermissionsRequest;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.resource=n.string();break;case 2:X.permissions&&X.permissions.length||(X.permissions=[]),X.permissions.push(n.string());break;default:n.skipType(7&me)}}return X},w.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},w.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.resource!=null&&n.hasOwnProperty("resource")&&!o.isString(n.resource))return"resource: string expected";if(n.permissions!=null&&n.hasOwnProperty("permissions")){if(!Array.isArray(n.permissions))return"permissions: array expected";for(var L=0;L<n.permissions.length;++L)if(!o.isString(n.permissions[L]))return"permissions: string[] expected"}return null},w.fromObject=function(n){if(n instanceof h.google.iam.v1.TestIamPermissionsRequest)return n;var L=new h.google.iam.v1.TestIamPermissionsRequest;if(n.resource!=null&&(L.resource=String(n.resource)),n.permissions){if(!Array.isArray(n.permissions))throw TypeError(".google.iam.v1.TestIamPermissionsRequest.permissions: array expected");L.permissions=[];for(var U=0;U<n.permissions.length;++U)L.permissions[U]=String(n.permissions[U])}return L},w.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.permissions=[]),L.defaults&&(U.resource=""),n.resource!=null&&n.hasOwnProperty("resource")&&(U.resource=n.resource),n.permissions&&n.permissions.length){U.permissions=[];for(var X=0;X<n.permissions.length;++X)U.permissions[X]=n.permissions[X]}return U},w.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},w),p.TestIamPermissionsResponse=(T.prototype.permissions=o.emptyArray,T.create=function(n){return new T(n)},T.encode=function(n,L){if(L=L||a.create(),n.permissions!=null&&n.permissions.length)for(var U=0;U<n.permissions.length;++U)L.uint32(10).string(n.permissions[U]);return L},T.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},T.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.iam.v1.TestIamPermissionsResponse;n.pos<U;){var me=n.uint32();me>>>3==1?(X.permissions&&X.permissions.length||(X.permissions=[]),X.permissions.push(n.string())):n.skipType(7&me)}return X},T.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},T.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.permissions!=null&&n.hasOwnProperty("permissions")){if(!Array.isArray(n.permissions))return"permissions: array expected";for(var L=0;L<n.permissions.length;++L)if(!o.isString(n.permissions[L]))return"permissions: string[] expected"}return null},T.fromObject=function(n){if(n instanceof h.google.iam.v1.TestIamPermissionsResponse)return n;var L=new h.google.iam.v1.TestIamPermissionsResponse;if(n.permissions){if(!Array.isArray(n.permissions))throw TypeError(".google.iam.v1.TestIamPermissionsResponse.permissions: array expected");L.permissions=[];for(var U=0;U<n.permissions.length;++U)L.permissions[U]=String(n.permissions[U])}return L},T.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.permissions=[]),n.permissions&&n.permissions.length){U.permissions=[];for(var X=0;X<n.permissions.length;++X)U.permissions[X]=n.permissions[X]}return U},T.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},T),p.GetPolicyOptions=(I.prototype.requestedPolicyVersion=0,I.create=function(n){return new I(n)},I.encode=function(n,L){return L=L||a.create(),n.requestedPolicyVersion!=null&&Object.hasOwnProperty.call(n,"requestedPolicyVersion")&&L.uint32(8).int32(n.requestedPolicyVersion),L},I.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},I.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.iam.v1.GetPolicyOptions;n.pos<U;){var me=n.uint32();me>>>3==1?X.requestedPolicyVersion=n.int32():n.skipType(7&me)}return X},I.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},I.verify=function(n){return typeof n!="object"||n===null?"object expected":n.requestedPolicyVersion!=null&&n.hasOwnProperty("requestedPolicyVersion")&&!o.isInteger(n.requestedPolicyVersion)?"requestedPolicyVersion: integer expected":null},I.fromObject=function(n){var L;return n instanceof h.google.iam.v1.GetPolicyOptions?n:(L=new h.google.iam.v1.GetPolicyOptions,n.requestedPolicyVersion!=null&&(L.requestedPolicyVersion=0|n.requestedPolicyVersion),L)},I.toObject=function(n,L){var U={};return(L=L||{}).defaults&&(U.requestedPolicyVersion=0),n.requestedPolicyVersion!=null&&n.hasOwnProperty("requestedPolicyVersion")&&(U.requestedPolicyVersion=n.requestedPolicyVersion),U},I.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},I),p.Policy=(O.prototype.version=0,O.prototype.bindings=o.emptyArray,O.prototype.etag=o.newBuffer([]),O.create=function(n){return new O(n)},O.encode=function(n,L){if(L=L||a.create(),n.version!=null&&Object.hasOwnProperty.call(n,"version")&&L.uint32(8).int32(n.version),n.etag!=null&&Object.hasOwnProperty.call(n,"etag")&&L.uint32(26).bytes(n.etag),n.bindings!=null&&n.bindings.length)for(var U=0;U<n.bindings.length;++U)h.google.iam.v1.Binding.encode(n.bindings[U],L.uint32(34).fork()).ldelim();return L},O.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},O.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.iam.v1.Policy;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.version=n.int32();break;case 4:X.bindings&&X.bindings.length||(X.bindings=[]),X.bindings.push(h.google.iam.v1.Binding.decode(n,n.uint32()));break;case 3:X.etag=n.bytes();break;default:n.skipType(7&me)}}return X},O.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},O.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.version!=null&&n.hasOwnProperty("version")&&!o.isInteger(n.version))return"version: integer expected";if(n.bindings!=null&&n.hasOwnProperty("bindings")){if(!Array.isArray(n.bindings))return"bindings: array expected";for(var L=0;L<n.bindings.length;++L){var U=h.google.iam.v1.Binding.verify(n.bindings[L]);if(U)return"bindings."+U}}return n.etag!=null&&n.hasOwnProperty("etag")&&!(n.etag&&typeof n.etag.length=="number"||o.isString(n.etag))?"etag: buffer expected":null},O.fromObject=function(n){if(n instanceof h.google.iam.v1.Policy)return n;var L=new h.google.iam.v1.Policy;if(n.version!=null&&(L.version=0|n.version),n.bindings){if(!Array.isArray(n.bindings))throw TypeError(".google.iam.v1.Policy.bindings: array expected");L.bindings=[];for(var U=0;U<n.bindings.length;++U){if(typeof n.bindings[U]!="object")throw TypeError(".google.iam.v1.Policy.bindings: object expected");L.bindings[U]=h.google.iam.v1.Binding.fromObject(n.bindings[U])}}return n.etag!=null&&(typeof n.etag=="string"?o.base64.decode(n.etag,L.etag=o.newBuffer(o.base64.length(n.etag)),0):n.etag.length&&(L.etag=n.etag)),L},O.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.bindings=[]),L.defaults&&(U.version=0,L.bytes===String?U.etag="":(U.etag=[],L.bytes!==Array&&(U.etag=o.newBuffer(U.etag)))),n.version!=null&&n.hasOwnProperty("version")&&(U.version=n.version),n.etag!=null&&n.hasOwnProperty("etag")&&(U.etag=L.bytes===String?o.base64.encode(n.etag,0,n.etag.length):L.bytes===Array?Array.prototype.slice.call(n.etag):n.etag),n.bindings&&n.bindings.length){U.bindings=[];for(var X=0;X<n.bindings.length;++X)U.bindings[X]=h.google.iam.v1.Binding.toObject(n.bindings[X],L)}return U},O.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},O),p.Binding=(E.prototype.role="",E.prototype.members=o.emptyArray,E.prototype.condition=null,E.create=function(n){return new E(n)},E.encode=function(n,L){if(L=L||a.create(),n.role!=null&&Object.hasOwnProperty.call(n,"role")&&L.uint32(10).string(n.role),n.members!=null&&n.members.length)for(var U=0;U<n.members.length;++U)L.uint32(18).string(n.members[U]);return n.condition!=null&&Object.hasOwnProperty.call(n,"condition")&&h.google.type.Expr.encode(n.condition,L.uint32(26).fork()).ldelim(),L},E.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},E.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.iam.v1.Binding;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.role=n.string();break;case 2:X.members&&X.members.length||(X.members=[]),X.members.push(n.string());break;case 3:X.condition=h.google.type.Expr.decode(n,n.uint32());break;default:n.skipType(7&me)}}return X},E.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},E.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.role!=null&&n.hasOwnProperty("role")&&!o.isString(n.role))return"role: string expected";if(n.members!=null&&n.hasOwnProperty("members")){if(!Array.isArray(n.members))return"members: array expected";for(var L=0;L<n.members.length;++L)if(!o.isString(n.members[L]))return"members: string[] expected"}if(n.condition!=null&&n.hasOwnProperty("condition")){var U=h.google.type.Expr.verify(n.condition);if(U)return"condition."+U}return null},E.fromObject=function(n){if(n instanceof h.google.iam.v1.Binding)return n;var L=new h.google.iam.v1.Binding;if(n.role!=null&&(L.role=String(n.role)),n.members){if(!Array.isArray(n.members))throw TypeError(".google.iam.v1.Binding.members: array expected");L.members=[];for(var U=0;U<n.members.length;++U)L.members[U]=String(n.members[U])}if(n.condition!=null){if(typeof n.condition!="object")throw TypeError(".google.iam.v1.Binding.condition: object expected");L.condition=h.google.type.Expr.fromObject(n.condition)}return L},E.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.members=[]),L.defaults&&(U.role="",U.condition=null),n.role!=null&&n.hasOwnProperty("role")&&(U.role=n.role),n.members&&n.members.length){U.members=[];for(var X=0;X<n.members.length;++X)U.members[X]=n.members[X]}return n.condition!=null&&n.hasOwnProperty("condition")&&(U.condition=h.google.type.Expr.toObject(n.condition,L)),U},E.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},E),p.PolicyDelta=(C.prototype.bindingDeltas=o.emptyArray,C.prototype.auditConfigDeltas=o.emptyArray,C.create=function(n){return new C(n)},C.encode=function(n,L){if(L=L||a.create(),n.bindingDeltas!=null&&n.bindingDeltas.length)for(var U=0;U<n.bindingDeltas.length;++U)h.google.iam.v1.BindingDelta.encode(n.bindingDeltas[U],L.uint32(10).fork()).ldelim();if(n.auditConfigDeltas!=null&&n.auditConfigDeltas.length)for(U=0;U<n.auditConfigDeltas.length;++U)h.google.iam.v1.AuditConfigDelta.encode(n.auditConfigDeltas[U],L.uint32(18).fork()).ldelim();return L},C.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},C.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.iam.v1.PolicyDelta;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.bindingDeltas&&X.bindingDeltas.length||(X.bindingDeltas=[]),X.bindingDeltas.push(h.google.iam.v1.BindingDelta.decode(n,n.uint32()));break;case 2:X.auditConfigDeltas&&X.auditConfigDeltas.length||(X.auditConfigDeltas=[]),X.auditConfigDeltas.push(h.google.iam.v1.AuditConfigDelta.decode(n,n.uint32()));break;default:n.skipType(7&me)}}return X},C.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},C.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.bindingDeltas!=null&&n.hasOwnProperty("bindingDeltas")){if(!Array.isArray(n.bindingDeltas))return"bindingDeltas: array expected";for(var L=0;L<n.bindingDeltas.length;++L)if(U=h.google.iam.v1.BindingDelta.verify(n.bindingDeltas[L]))return"bindingDeltas."+U}if(n.auditConfigDeltas!=null&&n.hasOwnProperty("auditConfigDeltas")){if(!Array.isArray(n.auditConfigDeltas))return"auditConfigDeltas: array expected";for(var U,L=0;L<n.auditConfigDeltas.length;++L)if(U=h.google.iam.v1.AuditConfigDelta.verify(n.auditConfigDeltas[L]))return"auditConfigDeltas."+U}return null},C.fromObject=function(n){if(n instanceof h.google.iam.v1.PolicyDelta)return n;var L=new h.google.iam.v1.PolicyDelta;if(n.bindingDeltas){if(!Array.isArray(n.bindingDeltas))throw TypeError(".google.iam.v1.PolicyDelta.bindingDeltas: array expected");L.bindingDeltas=[];for(var U=0;U<n.bindingDeltas.length;++U){if(typeof n.bindingDeltas[U]!="object")throw TypeError(".google.iam.v1.PolicyDelta.bindingDeltas: object expected");L.bindingDeltas[U]=h.google.iam.v1.BindingDelta.fromObject(n.bindingDeltas[U])}}if(n.auditConfigDeltas){if(!Array.isArray(n.auditConfigDeltas))throw TypeError(".google.iam.v1.PolicyDelta.auditConfigDeltas: array expected");for(L.auditConfigDeltas=[],U=0;U<n.auditConfigDeltas.length;++U){if(typeof n.auditConfigDeltas[U]!="object")throw TypeError(".google.iam.v1.PolicyDelta.auditConfigDeltas: object expected");L.auditConfigDeltas[U]=h.google.iam.v1.AuditConfigDelta.fromObject(n.auditConfigDeltas[U])}}return L},C.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.bindingDeltas=[],U.auditConfigDeltas=[]),n.bindingDeltas&&n.bindingDeltas.length){U.bindingDeltas=[];for(var X=0;X<n.bindingDeltas.length;++X)U.bindingDeltas[X]=h.google.iam.v1.BindingDelta.toObject(n.bindingDeltas[X],L)}if(n.auditConfigDeltas&&n.auditConfigDeltas.length)for(U.auditConfigDeltas=[],X=0;X<n.auditConfigDeltas.length;++X)U.auditConfigDeltas[X]=h.google.iam.v1.AuditConfigDelta.toObject(n.auditConfigDeltas[X],L);return U},C.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},C),p.BindingDelta=(x.prototype.action=0,x.prototype.role="",x.prototype.member="",x.prototype.condition=null,x.create=function(n){return new x(n)},x.encode=function(n,L){return L=L||a.create(),n.action!=null&&Object.hasOwnProperty.call(n,"action")&&L.uint32(8).int32(n.action),n.role!=null&&Object.hasOwnProperty.call(n,"role")&&L.uint32(18).string(n.role),n.member!=null&&Object.hasOwnProperty.call(n,"member")&&L.uint32(26).string(n.member),n.condition!=null&&Object.hasOwnProperty.call(n,"condition")&&h.google.type.Expr.encode(n.condition,L.uint32(34).fork()).ldelim(),L},x.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},x.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.iam.v1.BindingDelta;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.action=n.int32();break;case 2:X.role=n.string();break;case 3:X.member=n.string();break;case 4:X.condition=h.google.type.Expr.decode(n,n.uint32());break;default:n.skipType(7&me)}}return X},x.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},x.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.action!=null&&n.hasOwnProperty("action"))switch(n.action){default:return"action: enum value expected";case 0:case 1:case 2:}return n.role!=null&&n.hasOwnProperty("role")&&!o.isString(n.role)?"role: string expected":n.member!=null&&n.hasOwnProperty("member")&&!o.isString(n.member)?"member: string expected":n.condition!=null&&n.hasOwnProperty("condition")&&(n=h.google.type.Expr.verify(n.condition),n)?"condition."+n:null},x.fromObject=function(n){if(n instanceof h.google.iam.v1.BindingDelta)return n;var L=new h.google.iam.v1.BindingDelta;switch(n.action){case"ACTION_UNSPECIFIED":case 0:L.action=0;break;case"ADD":case 1:L.action=1;break;case"REMOVE":case 2:L.action=2}if(n.role!=null&&(L.role=String(n.role)),n.member!=null&&(L.member=String(n.member)),n.condition!=null){if(typeof n.condition!="object")throw TypeError(".google.iam.v1.BindingDelta.condition: object expected");L.condition=h.google.type.Expr.fromObject(n.condition)}return L},x.toObject=function(n,L){var U={};return(L=L||{}).defaults&&(U.action=L.enums===String?"ACTION_UNSPECIFIED":0,U.role="",U.member="",U.condition=null),n.action!=null&&n.hasOwnProperty("action")&&(U.action=L.enums===String?h.google.iam.v1.BindingDelta.Action[n.action]:n.action),n.role!=null&&n.hasOwnProperty("role")&&(U.role=n.role),n.member!=null&&n.hasOwnProperty("member")&&(U.member=n.member),n.condition!=null&&n.hasOwnProperty("condition")&&(U.condition=h.google.type.Expr.toObject(n.condition,L)),U},x.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},x.Action=(s={},(m=Object.create(s))[s[0]="ACTION_UNSPECIFIED"]=0,m[s[1]="ADD"]=1,m[s[2]="REMOVE"]=2,m),x),p.AuditConfigDelta=(j.prototype.action=0,j.prototype.service="",j.prototype.exemptedMember="",j.prototype.logType="",j.create=function(n){return new j(n)},j.encode=function(n,L){return L=L||a.create(),n.action!=null&&Object.hasOwnProperty.call(n,"action")&&L.uint32(8).int32(n.action),n.service!=null&&Object.hasOwnProperty.call(n,"service")&&L.uint32(18).string(n.service),n.exemptedMember!=null&&Object.hasOwnProperty.call(n,"exemptedMember")&&L.uint32(26).string(n.exemptedMember),n.logType!=null&&Object.hasOwnProperty.call(n,"logType")&&L.uint32(34).string(n.logType),L},j.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},j.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.iam.v1.AuditConfigDelta;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.action=n.int32();break;case 2:X.service=n.string();break;case 3:X.exemptedMember=n.string();break;case 4:X.logType=n.string();break;default:n.skipType(7&me)}}return X},j.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},j.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.action!=null&&n.hasOwnProperty("action"))switch(n.action){default:return"action: enum value expected";case 0:case 1:case 2:}return n.service!=null&&n.hasOwnProperty("service")&&!o.isString(n.service)?"service: string expected":n.exemptedMember!=null&&n.hasOwnProperty("exemptedMember")&&!o.isString(n.exemptedMember)?"exemptedMember: string expected":n.logType!=null&&n.hasOwnProperty("logType")&&!o.isString(n.logType)?"logType: string expected":null},j.fromObject=function(n){if(n instanceof h.google.iam.v1.AuditConfigDelta)return n;var L=new h.google.iam.v1.AuditConfigDelta;switch(n.action){case"ACTION_UNSPECIFIED":case 0:L.action=0;break;case"ADD":case 1:L.action=1;break;case"REMOVE":case 2:L.action=2}return n.service!=null&&(L.service=String(n.service)),n.exemptedMember!=null&&(L.exemptedMember=String(n.exemptedMember)),n.logType!=null&&(L.logType=String(n.logType)),L},j.toObject=function(n,L){var U={};return(L=L||{}).defaults&&(U.action=L.enums===String?"ACTION_UNSPECIFIED":0,U.service="",U.exemptedMember="",U.logType=""),n.action!=null&&n.hasOwnProperty("action")&&(U.action=L.enums===String?h.google.iam.v1.AuditConfigDelta.Action[n.action]:n.action),n.service!=null&&n.hasOwnProperty("service")&&(U.service=n.service),n.exemptedMember!=null&&n.hasOwnProperty("exemptedMember")&&(U.exemptedMember=n.exemptedMember),n.logType!=null&&n.hasOwnProperty("logType")&&(U.logType=n.logType),U},j.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},j.Action=(s={},(m=Object.create(s))[s[0]="ACTION_UNSPECIFIED"]=0,m[s[1]="ADD"]=1,m[s[2]="REMOVE"]=2,m),j),p.logging=((s={}).AuditData=(D.prototype.policyDelta=null,D.create=function(n){return new D(n)},D.encode=function(n,L){return L=L||a.create(),n.policyDelta!=null&&Object.hasOwnProperty.call(n,"policyDelta")&&h.google.iam.v1.PolicyDelta.encode(n.policyDelta,L.uint32(18).fork()).ldelim(),L},D.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},D.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.iam.v1.logging.AuditData;n.pos<U;){var me=n.uint32();me>>>3==2?X.policyDelta=h.google.iam.v1.PolicyDelta.decode(n,n.uint32()):n.skipType(7&me)}return X},D.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},D.verify=function(n){return typeof n!="object"||n===null?"object expected":n.policyDelta!=null&&n.hasOwnProperty("policyDelta")&&(n=h.google.iam.v1.PolicyDelta.verify(n.policyDelta),n)?"policyDelta."+n:null},D.fromObject=function(n){if(n instanceof h.google.iam.v1.logging.AuditData)return n;var L=new h.google.iam.v1.logging.AuditData;if(n.policyDelta!=null){if(typeof n.policyDelta!="object")throw TypeError(".google.iam.v1.logging.AuditData.policyDelta: object expected");L.policyDelta=h.google.iam.v1.PolicyDelta.fromObject(n.policyDelta)}return L},D.toObject=function(n,L){var U={};return(L=L||{}).defaults&&(U.policyDelta=null),n.policyDelta!=null&&n.hasOwnProperty("policyDelta")&&(U.policyDelta=h.google.iam.v1.PolicyDelta.toObject(n.policyDelta,L)),U},D.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},D),s),p),g),d.api=((m={}).Http=(k.prototype.rules=o.emptyArray,k.prototype.fullyDecodeReservedExpansion=!1,k.create=function(n){return new k(n)},k.encode=function(n,L){if(L=L||a.create(),n.rules!=null&&n.rules.length)for(var U=0;U<n.rules.length;++U)h.google.api.HttpRule.encode(n.rules[U],L.uint32(10).fork()).ldelim();return n.fullyDecodeReservedExpansion!=null&&Object.hasOwnProperty.call(n,"fullyDecodeReservedExpansion")&&L.uint32(16).bool(n.fullyDecodeReservedExpansion),L},k.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},k.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.api.Http;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.rules&&X.rules.length||(X.rules=[]),X.rules.push(h.google.api.HttpRule.decode(n,n.uint32()));break;case 2:X.fullyDecodeReservedExpansion=n.bool();break;default:n.skipType(7&me)}}return X},k.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},k.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.rules!=null&&n.hasOwnProperty("rules")){if(!Array.isArray(n.rules))return"rules: array expected";for(var L=0;L<n.rules.length;++L){var U=h.google.api.HttpRule.verify(n.rules[L]);if(U)return"rules."+U}}return n.fullyDecodeReservedExpansion!=null&&n.hasOwnProperty("fullyDecodeReservedExpansion")&&typeof n.fullyDecodeReservedExpansion!="boolean"?"fullyDecodeReservedExpansion: boolean expected":null},k.fromObject=function(n){if(n instanceof h.google.api.Http)return n;var L=new h.google.api.Http;if(n.rules){if(!Array.isArray(n.rules))throw TypeError(".google.api.Http.rules: array expected");L.rules=[];for(var U=0;U<n.rules.length;++U){if(typeof n.rules[U]!="object")throw TypeError(".google.api.Http.rules: object expected");L.rules[U]=h.google.api.HttpRule.fromObject(n.rules[U])}}return n.fullyDecodeReservedExpansion!=null&&(L.fullyDecodeReservedExpansion=!!n.fullyDecodeReservedExpansion),L},k.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.rules=[]),L.defaults&&(U.fullyDecodeReservedExpansion=!1),n.rules&&n.rules.length){U.rules=[];for(var X=0;X<n.rules.length;++X)U.rules[X]=h.google.api.HttpRule.toObject(n.rules[X],L)}return n.fullyDecodeReservedExpansion!=null&&n.hasOwnProperty("fullyDecodeReservedExpansion")&&(U.fullyDecodeReservedExpansion=n.fullyDecodeReservedExpansion),U},k.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},k),m.HttpRule=(q.prototype.selector="",q.prototype.get="",q.prototype.put="",q.prototype.post="",q.prototype.delete="",q.prototype.patch="",q.prototype.custom=null,q.prototype.body="",q.prototype.responseBody="",q.prototype.additionalBindings=o.emptyArray,Object.defineProperty(q.prototype,"pattern",{get:o.oneOfGetter(s=["get","put","post","delete","patch","custom"]),set:o.oneOfSetter(s)}),q.create=function(n){return new q(n)},q.encode=function(n,L){if(L=L||a.create(),n.selector!=null&&Object.hasOwnProperty.call(n,"selector")&&L.uint32(10).string(n.selector),n.get!=null&&Object.hasOwnProperty.call(n,"get")&&L.uint32(18).string(n.get),n.put!=null&&Object.hasOwnProperty.call(n,"put")&&L.uint32(26).string(n.put),n.post!=null&&Object.hasOwnProperty.call(n,"post")&&L.uint32(34).string(n.post),n.delete!=null&&Object.hasOwnProperty.call(n,"delete")&&L.uint32(42).string(n.delete),n.patch!=null&&Object.hasOwnProperty.call(n,"patch")&&L.uint32(50).string(n.patch),n.body!=null&&Object.hasOwnProperty.call(n,"body")&&L.uint32(58).string(n.body),n.custom!=null&&Object.hasOwnProperty.call(n,"custom")&&h.google.api.CustomHttpPattern.encode(n.custom,L.uint32(66).fork()).ldelim(),n.additionalBindings!=null&&n.additionalBindings.length)for(var U=0;U<n.additionalBindings.length;++U)h.google.api.HttpRule.encode(n.additionalBindings[U],L.uint32(90).fork()).ldelim();return n.responseBody!=null&&Object.hasOwnProperty.call(n,"responseBody")&&L.uint32(98).string(n.responseBody),L},q.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},q.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.api.HttpRule;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.selector=n.string();break;case 2:X.get=n.string();break;case 3:X.put=n.string();break;case 4:X.post=n.string();break;case 5:X.delete=n.string();break;case 6:X.patch=n.string();break;case 8:X.custom=h.google.api.CustomHttpPattern.decode(n,n.uint32());break;case 7:X.body=n.string();break;case 12:X.responseBody=n.string();break;case 11:X.additionalBindings&&X.additionalBindings.length||(X.additionalBindings=[]),X.additionalBindings.push(h.google.api.HttpRule.decode(n,n.uint32()));break;default:n.skipType(7&me)}}return X},q.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},q.verify=function(n){if(typeof n!="object"||n===null)return"object expected";var L={};if(n.selector!=null&&n.hasOwnProperty("selector")&&!o.isString(n.selector))return"selector: string expected";if(n.get!=null&&n.hasOwnProperty("get")&&(L.pattern=1,!o.isString(n.get)))return"get: string expected";if(n.put!=null&&n.hasOwnProperty("put")){if(L.pattern===1)return"pattern: multiple values";if(L.pattern=1,!o.isString(n.put))return"put: string expected"}if(n.post!=null&&n.hasOwnProperty("post")){if(L.pattern===1)return"pattern: multiple values";if(L.pattern=1,!o.isString(n.post))return"post: string expected"}if(n.delete!=null&&n.hasOwnProperty("delete")){if(L.pattern===1)return"pattern: multiple values";if(L.pattern=1,!o.isString(n.delete))return"delete: string expected"}if(n.patch!=null&&n.hasOwnProperty("patch")){if(L.pattern===1)return"pattern: multiple values";if(L.pattern=1,!o.isString(n.patch))return"patch: string expected"}if(n.custom!=null&&n.hasOwnProperty("custom")){if(L.pattern===1)return"pattern: multiple values";if(L.pattern=1,U=h.google.api.CustomHttpPattern.verify(n.custom))return"custom."+U}if(n.body!=null&&n.hasOwnProperty("body")&&!o.isString(n.body))return"body: string expected";if(n.responseBody!=null&&n.hasOwnProperty("responseBody")&&!o.isString(n.responseBody))return"responseBody: string expected";if(n.additionalBindings!=null&&n.hasOwnProperty("additionalBindings")){if(!Array.isArray(n.additionalBindings))return"additionalBindings: array expected";for(var U,X=0;X<n.additionalBindings.length;++X)if(U=h.google.api.HttpRule.verify(n.additionalBindings[X]))return"additionalBindings."+U}return null},q.fromObject=function(n){if(n instanceof h.google.api.HttpRule)return n;var L=new h.google.api.HttpRule;if(n.selector!=null&&(L.selector=String(n.selector)),n.get!=null&&(L.get=String(n.get)),n.put!=null&&(L.put=String(n.put)),n.post!=null&&(L.post=String(n.post)),n.delete!=null&&(L.delete=String(n.delete)),n.patch!=null&&(L.patch=String(n.patch)),n.custom!=null){if(typeof n.custom!="object")throw TypeError(".google.api.HttpRule.custom: object expected");L.custom=h.google.api.CustomHttpPattern.fromObject(n.custom)}if(n.body!=null&&(L.body=String(n.body)),n.responseBody!=null&&(L.responseBody=String(n.responseBody)),n.additionalBindings){if(!Array.isArray(n.additionalBindings))throw TypeError(".google.api.HttpRule.additionalBindings: array expected");L.additionalBindings=[];for(var U=0;U<n.additionalBindings.length;++U){if(typeof n.additionalBindings[U]!="object")throw TypeError(".google.api.HttpRule.additionalBindings: object expected");L.additionalBindings[U]=h.google.api.HttpRule.fromObject(n.additionalBindings[U])}}return L},q.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.additionalBindings=[]),L.defaults&&(U.selector="",U.body="",U.responseBody=""),n.selector!=null&&n.hasOwnProperty("selector")&&(U.selector=n.selector),n.get!=null&&n.hasOwnProperty("get")&&(U.get=n.get,L.oneofs)&&(U.pattern="get"),n.put!=null&&n.hasOwnProperty("put")&&(U.put=n.put,L.oneofs)&&(U.pattern="put"),n.post!=null&&n.hasOwnProperty("post")&&(U.post=n.post,L.oneofs)&&(U.pattern="post"),n.delete!=null&&n.hasOwnProperty("delete")&&(U.delete=n.delete,L.oneofs)&&(U.pattern="delete"),n.patch!=null&&n.hasOwnProperty("patch")&&(U.patch=n.patch,L.oneofs)&&(U.pattern="patch"),n.body!=null&&n.hasOwnProperty("body")&&(U.body=n.body),n.custom!=null&&n.hasOwnProperty("custom")&&(U.custom=h.google.api.CustomHttpPattern.toObject(n.custom,L),L.oneofs)&&(U.pattern="custom"),n.additionalBindings&&n.additionalBindings.length){U.additionalBindings=[];for(var X=0;X<n.additionalBindings.length;++X)U.additionalBindings[X]=h.google.api.HttpRule.toObject(n.additionalBindings[X],L)}return n.responseBody!=null&&n.hasOwnProperty("responseBody")&&(U.responseBody=n.responseBody),U},q.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},q),m.CustomHttpPattern=(G.prototype.kind="",G.prototype.path="",G.create=function(n){return new G(n)},G.encode=function(n,L){return L=L||a.create(),n.kind!=null&&Object.hasOwnProperty.call(n,"kind")&&L.uint32(10).string(n.kind),n.path!=null&&Object.hasOwnProperty.call(n,"path")&&L.uint32(18).string(n.path),L},G.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},G.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.api.CustomHttpPattern;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.kind=n.string();break;case 2:X.path=n.string();break;default:n.skipType(7&me)}}return X},G.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},G.verify=function(n){return typeof n!="object"||n===null?"object expected":n.kind!=null&&n.hasOwnProperty("kind")&&!o.isString(n.kind)?"kind: string expected":n.path!=null&&n.hasOwnProperty("path")&&!o.isString(n.path)?"path: string expected":null},G.fromObject=function(n){var L;return n instanceof h.google.api.CustomHttpPattern?n:(L=new h.google.api.CustomHttpPattern,n.kind!=null&&(L.kind=String(n.kind)),n.path!=null&&(L.path=String(n.path)),L)},G.toObject=function(n,L){var U={};return(L=L||{}).defaults&&(U.kind="",U.path=""),n.kind!=null&&n.hasOwnProperty("kind")&&(U.kind=n.kind),n.path!=null&&n.hasOwnProperty("path")&&(U.path=n.path),U},G.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},G),m.FieldBehavior=(s={},(p=Object.create(s))[s[0]="FIELD_BEHAVIOR_UNSPECIFIED"]=0,p[s[1]="OPTIONAL"]=1,p[s[2]="REQUIRED"]=2,p[s[3]="OUTPUT_ONLY"]=3,p[s[4]="INPUT_ONLY"]=4,p[s[5]="IMMUTABLE"]=5,p),m.ResourceDescriptor=($.prototype.type="",$.prototype.pattern=o.emptyArray,$.prototype.nameField="",$.prototype.history=0,$.prototype.plural="",$.prototype.singular="",$.create=function(n){return new $(n)},$.encode=function(n,L){if(L=L||a.create(),n.type!=null&&Object.hasOwnProperty.call(n,"type")&&L.uint32(10).string(n.type),n.pattern!=null&&n.pattern.length)for(var U=0;U<n.pattern.length;++U)L.uint32(18).string(n.pattern[U]);return n.nameField!=null&&Object.hasOwnProperty.call(n,"nameField")&&L.uint32(26).string(n.nameField),n.history!=null&&Object.hasOwnProperty.call(n,"history")&&L.uint32(32).int32(n.history),n.plural!=null&&Object.hasOwnProperty.call(n,"plural")&&L.uint32(42).string(n.plural),n.singular!=null&&Object.hasOwnProperty.call(n,"singular")&&L.uint32(50).string(n.singular),L},$.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},$.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.api.ResourceDescriptor;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.type=n.string();break;case 2:X.pattern&&X.pattern.length||(X.pattern=[]),X.pattern.push(n.string());break;case 3:X.nameField=n.string();break;case 4:X.history=n.int32();break;case 5:X.plural=n.string();break;case 6:X.singular=n.string();break;default:n.skipType(7&me)}}return X},$.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},$.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.type!=null&&n.hasOwnProperty("type")&&!o.isString(n.type))return"type: string expected";if(n.pattern!=null&&n.hasOwnProperty("pattern")){if(!Array.isArray(n.pattern))return"pattern: array expected";for(var L=0;L<n.pattern.length;++L)if(!o.isString(n.pattern[L]))return"pattern: string[] expected"}if(n.nameField!=null&&n.hasOwnProperty("nameField")&&!o.isString(n.nameField))return"nameField: string expected";if(n.history!=null&&n.hasOwnProperty("history"))switch(n.history){default:return"history: enum value expected";case 0:case 1:case 2:}return n.plural!=null&&n.hasOwnProperty("plural")&&!o.isString(n.plural)?"plural: string expected":n.singular!=null&&n.hasOwnProperty("singular")&&!o.isString(n.singular)?"singular: string expected":null},$.fromObject=function(n){if(n instanceof h.google.api.ResourceDescriptor)return n;var L=new h.google.api.ResourceDescriptor;if(n.type!=null&&(L.type=String(n.type)),n.pattern){if(!Array.isArray(n.pattern))throw TypeError(".google.api.ResourceDescriptor.pattern: array expected");L.pattern=[];for(var U=0;U<n.pattern.length;++U)L.pattern[U]=String(n.pattern[U])}switch(n.nameField!=null&&(L.nameField=String(n.nameField)),n.history){case"HISTORY_UNSPECIFIED":case 0:L.history=0;break;case"ORIGINALLY_SINGLE_PATTERN":case 1:L.history=1;break;case"FUTURE_MULTI_PATTERN":case 2:L.history=2}return n.plural!=null&&(L.plural=String(n.plural)),n.singular!=null&&(L.singular=String(n.singular)),L},$.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.pattern=[]),L.defaults&&(U.type="",U.nameField="",U.history=L.enums===String?"HISTORY_UNSPECIFIED":0,U.plural="",U.singular=""),n.type!=null&&n.hasOwnProperty("type")&&(U.type=n.type),n.pattern&&n.pattern.length){U.pattern=[];for(var X=0;X<n.pattern.length;++X)U.pattern[X]=n.pattern[X]}return n.nameField!=null&&n.hasOwnProperty("nameField")&&(U.nameField=n.nameField),n.history!=null&&n.hasOwnProperty("history")&&(U.history=L.enums===String?h.google.api.ResourceDescriptor.History[n.history]:n.history),n.plural!=null&&n.hasOwnProperty("plural")&&(U.plural=n.plural),n.singular!=null&&n.hasOwnProperty("singular")&&(U.singular=n.singular),U},$.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},$.History=(s={},(p=Object.create(s))[s[0]="HISTORY_UNSPECIFIED"]=0,p[s[1]="ORIGINALLY_SINGLE_PATTERN"]=1,p[s[2]="FUTURE_MULTI_PATTERN"]=2,p),$),m.ResourceReference=(W.prototype.type="",W.prototype.childType="",W.create=function(n){return new W(n)},W.encode=function(n,L){return L=L||a.create(),n.type!=null&&Object.hasOwnProperty.call(n,"type")&&L.uint32(10).string(n.type),n.childType!=null&&Object.hasOwnProperty.call(n,"childType")&&L.uint32(18).string(n.childType),L},W.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},W.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.api.ResourceReference;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.type=n.string();break;case 2:X.childType=n.string();break;default:n.skipType(7&me)}}return X},W.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},W.verify=function(n){return typeof n!="object"||n===null?"object expected":n.type!=null&&n.hasOwnProperty("type")&&!o.isString(n.type)?"type: string expected":n.childType!=null&&n.hasOwnProperty("childType")&&!o.isString(n.childType)?"childType: string expected":null},W.fromObject=function(n){var L;return n instanceof h.google.api.ResourceReference?n:(L=new h.google.api.ResourceReference,n.type!=null&&(L.type=String(n.type)),n.childType!=null&&(L.childType=String(n.childType)),L)},W.toObject=function(n,L){var U={};return(L=L||{}).defaults&&(U.type="",U.childType=""),n.type!=null&&n.hasOwnProperty("type")&&(U.type=n.type),n.childType!=null&&n.hasOwnProperty("childType")&&(U.childType=n.childType),U},W.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},W),m),d.protobuf=((g={}).FileDescriptorSet=(K.prototype.file=o.emptyArray,K.create=function(n){return new K(n)},K.encode=function(n,L){if(L=L||a.create(),n.file!=null&&n.file.length)for(var U=0;U<n.file.length;++U)h.google.protobuf.FileDescriptorProto.encode(n.file[U],L.uint32(10).fork()).ldelim();return L},K.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},K.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.FileDescriptorSet;n.pos<U;){var me=n.uint32();me>>>3==1?(X.file&&X.file.length||(X.file=[]),X.file.push(h.google.protobuf.FileDescriptorProto.decode(n,n.uint32()))):n.skipType(7&me)}return X},K.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},K.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.file!=null&&n.hasOwnProperty("file")){if(!Array.isArray(n.file))return"file: array expected";for(var L=0;L<n.file.length;++L){var U=h.google.protobuf.FileDescriptorProto.verify(n.file[L]);if(U)return"file."+U}}return null},K.fromObject=function(n){if(n instanceof h.google.protobuf.FileDescriptorSet)return n;var L=new h.google.protobuf.FileDescriptorSet;if(n.file){if(!Array.isArray(n.file))throw TypeError(".google.protobuf.FileDescriptorSet.file: array expected");L.file=[];for(var U=0;U<n.file.length;++U){if(typeof n.file[U]!="object")throw TypeError(".google.protobuf.FileDescriptorSet.file: object expected");L.file[U]=h.google.protobuf.FileDescriptorProto.fromObject(n.file[U])}}return L},K.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.file=[]),n.file&&n.file.length){U.file=[];for(var X=0;X<n.file.length;++X)U.file[X]=h.google.protobuf.FileDescriptorProto.toObject(n.file[X],L)}return U},K.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},K),g.FileDescriptorProto=(z.prototype.name="",z.prototype.package="",z.prototype.dependency=o.emptyArray,z.prototype.publicDependency=o.emptyArray,z.prototype.weakDependency=o.emptyArray,z.prototype.messageType=o.emptyArray,z.prototype.enumType=o.emptyArray,z.prototype.service=o.emptyArray,z.prototype.extension=o.emptyArray,z.prototype.options=null,z.prototype.sourceCodeInfo=null,z.prototype.syntax="",z.create=function(n){return new z(n)},z.encode=function(n,L){if(L=L||a.create(),n.name!=null&&Object.hasOwnProperty.call(n,"name")&&L.uint32(10).string(n.name),n.package!=null&&Object.hasOwnProperty.call(n,"package")&&L.uint32(18).string(n.package),n.dependency!=null&&n.dependency.length)for(var U=0;U<n.dependency.length;++U)L.uint32(26).string(n.dependency[U]);if(n.messageType!=null&&n.messageType.length)for(U=0;U<n.messageType.length;++U)h.google.protobuf.DescriptorProto.encode(n.messageType[U],L.uint32(34).fork()).ldelim();if(n.enumType!=null&&n.enumType.length)for(U=0;U<n.enumType.length;++U)h.google.protobuf.EnumDescriptorProto.encode(n.enumType[U],L.uint32(42).fork()).ldelim();if(n.service!=null&&n.service.length)for(U=0;U<n.service.length;++U)h.google.protobuf.ServiceDescriptorProto.encode(n.service[U],L.uint32(50).fork()).ldelim();if(n.extension!=null&&n.extension.length)for(U=0;U<n.extension.length;++U)h.google.protobuf.FieldDescriptorProto.encode(n.extension[U],L.uint32(58).fork()).ldelim();if(n.options!=null&&Object.hasOwnProperty.call(n,"options")&&h.google.protobuf.FileOptions.encode(n.options,L.uint32(66).fork()).ldelim(),n.sourceCodeInfo!=null&&Object.hasOwnProperty.call(n,"sourceCodeInfo")&&h.google.protobuf.SourceCodeInfo.encode(n.sourceCodeInfo,L.uint32(74).fork()).ldelim(),n.publicDependency!=null&&n.publicDependency.length)for(U=0;U<n.publicDependency.length;++U)L.uint32(80).int32(n.publicDependency[U]);if(n.weakDependency!=null&&n.weakDependency.length)for(U=0;U<n.weakDependency.length;++U)L.uint32(88).int32(n.weakDependency[U]);return n.syntax!=null&&Object.hasOwnProperty.call(n,"syntax")&&L.uint32(98).string(n.syntax),L},z.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},z.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.FileDescriptorProto;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.name=n.string();break;case 2:X.package=n.string();break;case 3:X.dependency&&X.dependency.length||(X.dependency=[]),X.dependency.push(n.string());break;case 10:if(X.publicDependency&&X.publicDependency.length||(X.publicDependency=[]),(7&me)==2)for(var Ie=n.uint32()+n.pos;n.pos<Ie;)X.publicDependency.push(n.int32());else X.publicDependency.push(n.int32());break;case 11:if(X.weakDependency&&X.weakDependency.length||(X.weakDependency=[]),(7&me)==2)for(Ie=n.uint32()+n.pos;n.pos<Ie;)X.weakDependency.push(n.int32());else X.weakDependency.push(n.int32());break;case 4:X.messageType&&X.messageType.length||(X.messageType=[]),X.messageType.push(h.google.protobuf.DescriptorProto.decode(n,n.uint32()));break;case 5:X.enumType&&X.enumType.length||(X.enumType=[]),X.enumType.push(h.google.protobuf.EnumDescriptorProto.decode(n,n.uint32()));break;case 6:X.service&&X.service.length||(X.service=[]),X.service.push(h.google.protobuf.ServiceDescriptorProto.decode(n,n.uint32()));break;case 7:X.extension&&X.extension.length||(X.extension=[]),X.extension.push(h.google.protobuf.FieldDescriptorProto.decode(n,n.uint32()));break;case 8:X.options=h.google.protobuf.FileOptions.decode(n,n.uint32());break;case 9:X.sourceCodeInfo=h.google.protobuf.SourceCodeInfo.decode(n,n.uint32());break;case 12:X.syntax=n.string();break;default:n.skipType(7&me)}}return X},z.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},z.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.name!=null&&n.hasOwnProperty("name")&&!o.isString(n.name))return"name: string expected";if(n.package!=null&&n.hasOwnProperty("package")&&!o.isString(n.package))return"package: string expected";if(n.dependency!=null&&n.hasOwnProperty("dependency")){if(!Array.isArray(n.dependency))return"dependency: array expected";for(var L=0;L<n.dependency.length;++L)if(!o.isString(n.dependency[L]))return"dependency: string[] expected"}if(n.publicDependency!=null&&n.hasOwnProperty("publicDependency")){if(!Array.isArray(n.publicDependency))return"publicDependency: array expected";for(L=0;L<n.publicDependency.length;++L)if(!o.isInteger(n.publicDependency[L]))return"publicDependency: integer[] expected"}if(n.weakDependency!=null&&n.hasOwnProperty("weakDependency")){if(!Array.isArray(n.weakDependency))return"weakDependency: array expected";for(L=0;L<n.weakDependency.length;++L)if(!o.isInteger(n.weakDependency[L]))return"weakDependency: integer[] expected"}if(n.messageType!=null&&n.hasOwnProperty("messageType")){if(!Array.isArray(n.messageType))return"messageType: array expected";for(L=0;L<n.messageType.length;++L)if(U=h.google.protobuf.DescriptorProto.verify(n.messageType[L]))return"messageType."+U}if(n.enumType!=null&&n.hasOwnProperty("enumType")){if(!Array.isArray(n.enumType))return"enumType: array expected";for(L=0;L<n.enumType.length;++L)if(U=h.google.protobuf.EnumDescriptorProto.verify(n.enumType[L]))return"enumType."+U}if(n.service!=null&&n.hasOwnProperty("service")){if(!Array.isArray(n.service))return"service: array expected";for(L=0;L<n.service.length;++L)if(U=h.google.protobuf.ServiceDescriptorProto.verify(n.service[L]))return"service."+U}if(n.extension!=null&&n.hasOwnProperty("extension")){if(!Array.isArray(n.extension))return"extension: array expected";for(L=0;L<n.extension.length;++L)if(U=h.google.protobuf.FieldDescriptorProto.verify(n.extension[L]))return"extension."+U}var U;return n.options!=null&&n.hasOwnProperty("options")&&(U=h.google.protobuf.FileOptions.verify(n.options))?"options."+U:n.sourceCodeInfo!=null&&n.hasOwnProperty("sourceCodeInfo")&&(U=h.google.protobuf.SourceCodeInfo.verify(n.sourceCodeInfo))?"sourceCodeInfo."+U:n.syntax!=null&&n.hasOwnProperty("syntax")&&!o.isString(n.syntax)?"syntax: string expected":null},z.fromObject=function(n){if(n instanceof h.google.protobuf.FileDescriptorProto)return n;var L=new h.google.protobuf.FileDescriptorProto;if(n.name!=null&&(L.name=String(n.name)),n.package!=null&&(L.package=String(n.package)),n.dependency){if(!Array.isArray(n.dependency))throw TypeError(".google.protobuf.FileDescriptorProto.dependency: array expected");L.dependency=[];for(var U=0;U<n.dependency.length;++U)L.dependency[U]=String(n.dependency[U])}if(n.publicDependency){if(!Array.isArray(n.publicDependency))throw TypeError(".google.protobuf.FileDescriptorProto.publicDependency: array expected");for(L.publicDependency=[],U=0;U<n.publicDependency.length;++U)L.publicDependency[U]=0|n.publicDependency[U]}if(n.weakDependency){if(!Array.isArray(n.weakDependency))throw TypeError(".google.protobuf.FileDescriptorProto.weakDependency: array expected");for(L.weakDependency=[],U=0;U<n.weakDependency.length;++U)L.weakDependency[U]=0|n.weakDependency[U]}if(n.messageType){if(!Array.isArray(n.messageType))throw TypeError(".google.protobuf.FileDescriptorProto.messageType: array expected");for(L.messageType=[],U=0;U<n.messageType.length;++U){if(typeof n.messageType[U]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.messageType: object expected");L.messageType[U]=h.google.protobuf.DescriptorProto.fromObject(n.messageType[U])}}if(n.enumType){if(!Array.isArray(n.enumType))throw TypeError(".google.protobuf.FileDescriptorProto.enumType: array expected");for(L.enumType=[],U=0;U<n.enumType.length;++U){if(typeof n.enumType[U]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.enumType: object expected");L.enumType[U]=h.google.protobuf.EnumDescriptorProto.fromObject(n.enumType[U])}}if(n.service){if(!Array.isArray(n.service))throw TypeError(".google.protobuf.FileDescriptorProto.service: array expected");for(L.service=[],U=0;U<n.service.length;++U){if(typeof n.service[U]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.service: object expected");L.service[U]=h.google.protobuf.ServiceDescriptorProto.fromObject(n.service[U])}}if(n.extension){if(!Array.isArray(n.extension))throw TypeError(".google.protobuf.FileDescriptorProto.extension: array expected");for(L.extension=[],U=0;U<n.extension.length;++U){if(typeof n.extension[U]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.extension: object expected");L.extension[U]=h.google.protobuf.FieldDescriptorProto.fromObject(n.extension[U])}}if(n.options!=null){if(typeof n.options!="object")throw TypeError(".google.protobuf.FileDescriptorProto.options: object expected");L.options=h.google.protobuf.FileOptions.fromObject(n.options)}if(n.sourceCodeInfo!=null){if(typeof n.sourceCodeInfo!="object")throw TypeError(".google.protobuf.FileDescriptorProto.sourceCodeInfo: object expected");L.sourceCodeInfo=h.google.protobuf.SourceCodeInfo.fromObject(n.sourceCodeInfo)}return n.syntax!=null&&(L.syntax=String(n.syntax)),L},z.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.dependency=[],U.messageType=[],U.enumType=[],U.service=[],U.extension=[],U.publicDependency=[],U.weakDependency=[]),L.defaults&&(U.name="",U.package="",U.options=null,U.sourceCodeInfo=null,U.syntax=""),n.name!=null&&n.hasOwnProperty("name")&&(U.name=n.name),n.package!=null&&n.hasOwnProperty("package")&&(U.package=n.package),n.dependency&&n.dependency.length){U.dependency=[];for(var X=0;X<n.dependency.length;++X)U.dependency[X]=n.dependency[X]}if(n.messageType&&n.messageType.length)for(U.messageType=[],X=0;X<n.messageType.length;++X)U.messageType[X]=h.google.protobuf.DescriptorProto.toObject(n.messageType[X],L);if(n.enumType&&n.enumType.length)for(U.enumType=[],X=0;X<n.enumType.length;++X)U.enumType[X]=h.google.protobuf.EnumDescriptorProto.toObject(n.enumType[X],L);if(n.service&&n.service.length)for(U.service=[],X=0;X<n.service.length;++X)U.service[X]=h.google.protobuf.ServiceDescriptorProto.toObject(n.service[X],L);if(n.extension&&n.extension.length)for(U.extension=[],X=0;X<n.extension.length;++X)U.extension[X]=h.google.protobuf.FieldDescriptorProto.toObject(n.extension[X],L);if(n.options!=null&&n.hasOwnProperty("options")&&(U.options=h.google.protobuf.FileOptions.toObject(n.options,L)),n.sourceCodeInfo!=null&&n.hasOwnProperty("sourceCodeInfo")&&(U.sourceCodeInfo=h.google.protobuf.SourceCodeInfo.toObject(n.sourceCodeInfo,L)),n.publicDependency&&n.publicDependency.length)for(U.publicDependency=[],X=0;X<n.publicDependency.length;++X)U.publicDependency[X]=n.publicDependency[X];if(n.weakDependency&&n.weakDependency.length)for(U.weakDependency=[],X=0;X<n.weakDependency.length;++X)U.weakDependency[X]=n.weakDependency[X];return n.syntax!=null&&n.hasOwnProperty("syntax")&&(U.syntax=n.syntax),U},z.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},z),g.DescriptorProto=(Q.prototype.name="",Q.prototype.field=o.emptyArray,Q.prototype.extension=o.emptyArray,Q.prototype.nestedType=o.emptyArray,Q.prototype.enumType=o.emptyArray,Q.prototype.extensionRange=o.emptyArray,Q.prototype.oneofDecl=o.emptyArray,Q.prototype.options=null,Q.prototype.reservedRange=o.emptyArray,Q.prototype.reservedName=o.emptyArray,Q.create=function(n){return new Q(n)},Q.encode=function(n,L){if(L=L||a.create(),n.name!=null&&Object.hasOwnProperty.call(n,"name")&&L.uint32(10).string(n.name),n.field!=null&&n.field.length)for(var U=0;U<n.field.length;++U)h.google.protobuf.FieldDescriptorProto.encode(n.field[U],L.uint32(18).fork()).ldelim();if(n.nestedType!=null&&n.nestedType.length)for(U=0;U<n.nestedType.length;++U)h.google.protobuf.DescriptorProto.encode(n.nestedType[U],L.uint32(26).fork()).ldelim();if(n.enumType!=null&&n.enumType.length)for(U=0;U<n.enumType.length;++U)h.google.protobuf.EnumDescriptorProto.encode(n.enumType[U],L.uint32(34).fork()).ldelim();if(n.extensionRange!=null&&n.extensionRange.length)for(U=0;U<n.extensionRange.length;++U)h.google.protobuf.DescriptorProto.ExtensionRange.encode(n.extensionRange[U],L.uint32(42).fork()).ldelim();if(n.extension!=null&&n.extension.length)for(U=0;U<n.extension.length;++U)h.google.protobuf.FieldDescriptorProto.encode(n.extension[U],L.uint32(50).fork()).ldelim();if(n.options!=null&&Object.hasOwnProperty.call(n,"options")&&h.google.protobuf.MessageOptions.encode(n.options,L.uint32(58).fork()).ldelim(),n.oneofDecl!=null&&n.oneofDecl.length)for(U=0;U<n.oneofDecl.length;++U)h.google.protobuf.OneofDescriptorProto.encode(n.oneofDecl[U],L.uint32(66).fork()).ldelim();if(n.reservedRange!=null&&n.reservedRange.length)for(U=0;U<n.reservedRange.length;++U)h.google.protobuf.DescriptorProto.ReservedRange.encode(n.reservedRange[U],L.uint32(74).fork()).ldelim();if(n.reservedName!=null&&n.reservedName.length)for(U=0;U<n.reservedName.length;++U)L.uint32(82).string(n.reservedName[U]);return L},Q.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},Q.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.DescriptorProto;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.name=n.string();break;case 2:X.field&&X.field.length||(X.field=[]),X.field.push(h.google.protobuf.FieldDescriptorProto.decode(n,n.uint32()));break;case 6:X.extension&&X.extension.length||(X.extension=[]),X.extension.push(h.google.protobuf.FieldDescriptorProto.decode(n,n.uint32()));break;case 3:X.nestedType&&X.nestedType.length||(X.nestedType=[]),X.nestedType.push(h.google.protobuf.DescriptorProto.decode(n,n.uint32()));break;case 4:X.enumType&&X.enumType.length||(X.enumType=[]),X.enumType.push(h.google.protobuf.EnumDescriptorProto.decode(n,n.uint32()));break;case 5:X.extensionRange&&X.extensionRange.length||(X.extensionRange=[]),X.extensionRange.push(h.google.protobuf.DescriptorProto.ExtensionRange.decode(n,n.uint32()));break;case 8:X.oneofDecl&&X.oneofDecl.length||(X.oneofDecl=[]),X.oneofDecl.push(h.google.protobuf.OneofDescriptorProto.decode(n,n.uint32()));break;case 7:X.options=h.google.protobuf.MessageOptions.decode(n,n.uint32());break;case 9:X.reservedRange&&X.reservedRange.length||(X.reservedRange=[]),X.reservedRange.push(h.google.protobuf.DescriptorProto.ReservedRange.decode(n,n.uint32()));break;case 10:X.reservedName&&X.reservedName.length||(X.reservedName=[]),X.reservedName.push(n.string());break;default:n.skipType(7&me)}}return X},Q.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},Q.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.name!=null&&n.hasOwnProperty("name")&&!o.isString(n.name))return"name: string expected";if(n.field!=null&&n.hasOwnProperty("field")){if(!Array.isArray(n.field))return"field: array expected";for(var L=0;L<n.field.length;++L)if(U=h.google.protobuf.FieldDescriptorProto.verify(n.field[L]))return"field."+U}if(n.extension!=null&&n.hasOwnProperty("extension")){if(!Array.isArray(n.extension))return"extension: array expected";for(L=0;L<n.extension.length;++L)if(U=h.google.protobuf.FieldDescriptorProto.verify(n.extension[L]))return"extension."+U}if(n.nestedType!=null&&n.hasOwnProperty("nestedType")){if(!Array.isArray(n.nestedType))return"nestedType: array expected";for(L=0;L<n.nestedType.length;++L)if(U=h.google.protobuf.DescriptorProto.verify(n.nestedType[L]))return"nestedType."+U}if(n.enumType!=null&&n.hasOwnProperty("enumType")){if(!Array.isArray(n.enumType))return"enumType: array expected";for(L=0;L<n.enumType.length;++L)if(U=h.google.protobuf.EnumDescriptorProto.verify(n.enumType[L]))return"enumType."+U}if(n.extensionRange!=null&&n.hasOwnProperty("extensionRange")){if(!Array.isArray(n.extensionRange))return"extensionRange: array expected";for(L=0;L<n.extensionRange.length;++L)if(U=h.google.protobuf.DescriptorProto.ExtensionRange.verify(n.extensionRange[L]))return"extensionRange."+U}if(n.oneofDecl!=null&&n.hasOwnProperty("oneofDecl")){if(!Array.isArray(n.oneofDecl))return"oneofDecl: array expected";for(L=0;L<n.oneofDecl.length;++L)if(U=h.google.protobuf.OneofDescriptorProto.verify(n.oneofDecl[L]))return"oneofDecl."+U}if(n.options!=null&&n.hasOwnProperty("options")&&(U=h.google.protobuf.MessageOptions.verify(n.options)))return"options."+U;if(n.reservedRange!=null&&n.hasOwnProperty("reservedRange")){if(!Array.isArray(n.reservedRange))return"reservedRange: array expected";for(var U,L=0;L<n.reservedRange.length;++L)if(U=h.google.protobuf.DescriptorProto.ReservedRange.verify(n.reservedRange[L]))return"reservedRange."+U}if(n.reservedName!=null&&n.hasOwnProperty("reservedName")){if(!Array.isArray(n.reservedName))return"reservedName: array expected";for(L=0;L<n.reservedName.length;++L)if(!o.isString(n.reservedName[L]))return"reservedName: string[] expected"}return null},Q.fromObject=function(n){if(n instanceof h.google.protobuf.DescriptorProto)return n;var L=new h.google.protobuf.DescriptorProto;if(n.name!=null&&(L.name=String(n.name)),n.field){if(!Array.isArray(n.field))throw TypeError(".google.protobuf.DescriptorProto.field: array expected");L.field=[];for(var U=0;U<n.field.length;++U){if(typeof n.field[U]!="object")throw TypeError(".google.protobuf.DescriptorProto.field: object expected");L.field[U]=h.google.protobuf.FieldDescriptorProto.fromObject(n.field[U])}}if(n.extension){if(!Array.isArray(n.extension))throw TypeError(".google.protobuf.DescriptorProto.extension: array expected");for(L.extension=[],U=0;U<n.extension.length;++U){if(typeof n.extension[U]!="object")throw TypeError(".google.protobuf.DescriptorProto.extension: object expected");L.extension[U]=h.google.protobuf.FieldDescriptorProto.fromObject(n.extension[U])}}if(n.nestedType){if(!Array.isArray(n.nestedType))throw TypeError(".google.protobuf.DescriptorProto.nestedType: array expected");for(L.nestedType=[],U=0;U<n.nestedType.length;++U){if(typeof n.nestedType[U]!="object")throw TypeError(".google.protobuf.DescriptorProto.nestedType: object expected");L.nestedType[U]=h.google.protobuf.DescriptorProto.fromObject(n.nestedType[U])}}if(n.enumType){if(!Array.isArray(n.enumType))throw TypeError(".google.protobuf.DescriptorProto.enumType: array expected");for(L.enumType=[],U=0;U<n.enumType.length;++U){if(typeof n.enumType[U]!="object")throw TypeError(".google.protobuf.DescriptorProto.enumType: object expected");L.enumType[U]=h.google.protobuf.EnumDescriptorProto.fromObject(n.enumType[U])}}if(n.extensionRange){if(!Array.isArray(n.extensionRange))throw TypeError(".google.protobuf.DescriptorProto.extensionRange: array expected");for(L.extensionRange=[],U=0;U<n.extensionRange.length;++U){if(typeof n.extensionRange[U]!="object")throw TypeError(".google.protobuf.DescriptorProto.extensionRange: object expected");L.extensionRange[U]=h.google.protobuf.DescriptorProto.ExtensionRange.fromObject(n.extensionRange[U])}}if(n.oneofDecl){if(!Array.isArray(n.oneofDecl))throw TypeError(".google.protobuf.DescriptorProto.oneofDecl: array expected");for(L.oneofDecl=[],U=0;U<n.oneofDecl.length;++U){if(typeof n.oneofDecl[U]!="object")throw TypeError(".google.protobuf.DescriptorProto.oneofDecl: object expected");L.oneofDecl[U]=h.google.protobuf.OneofDescriptorProto.fromObject(n.oneofDecl[U])}}if(n.options!=null){if(typeof n.options!="object")throw TypeError(".google.protobuf.DescriptorProto.options: object expected");L.options=h.google.protobuf.MessageOptions.fromObject(n.options)}if(n.reservedRange){if(!Array.isArray(n.reservedRange))throw TypeError(".google.protobuf.DescriptorProto.reservedRange: array expected");for(L.reservedRange=[],U=0;U<n.reservedRange.length;++U){if(typeof n.reservedRange[U]!="object")throw TypeError(".google.protobuf.DescriptorProto.reservedRange: object expected");L.reservedRange[U]=h.google.protobuf.DescriptorProto.ReservedRange.fromObject(n.reservedRange[U])}}if(n.reservedName){if(!Array.isArray(n.reservedName))throw TypeError(".google.protobuf.DescriptorProto.reservedName: array expected");for(L.reservedName=[],U=0;U<n.reservedName.length;++U)L.reservedName[U]=String(n.reservedName[U])}return L},Q.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.field=[],U.nestedType=[],U.enumType=[],U.extensionRange=[],U.extension=[],U.oneofDecl=[],U.reservedRange=[],U.reservedName=[]),L.defaults&&(U.name="",U.options=null),n.name!=null&&n.hasOwnProperty("name")&&(U.name=n.name),n.field&&n.field.length){U.field=[];for(var X=0;X<n.field.length;++X)U.field[X]=h.google.protobuf.FieldDescriptorProto.toObject(n.field[X],L)}if(n.nestedType&&n.nestedType.length)for(U.nestedType=[],X=0;X<n.nestedType.length;++X)U.nestedType[X]=h.google.protobuf.DescriptorProto.toObject(n.nestedType[X],L);if(n.enumType&&n.enumType.length)for(U.enumType=[],X=0;X<n.enumType.length;++X)U.enumType[X]=h.google.protobuf.EnumDescriptorProto.toObject(n.enumType[X],L);if(n.extensionRange&&n.extensionRange.length)for(U.extensionRange=[],X=0;X<n.extensionRange.length;++X)U.extensionRange[X]=h.google.protobuf.DescriptorProto.ExtensionRange.toObject(n.extensionRange[X],L);if(n.extension&&n.extension.length)for(U.extension=[],X=0;X<n.extension.length;++X)U.extension[X]=h.google.protobuf.FieldDescriptorProto.toObject(n.extension[X],L);if(n.options!=null&&n.hasOwnProperty("options")&&(U.options=h.google.protobuf.MessageOptions.toObject(n.options,L)),n.oneofDecl&&n.oneofDecl.length)for(U.oneofDecl=[],X=0;X<n.oneofDecl.length;++X)U.oneofDecl[X]=h.google.protobuf.OneofDescriptorProto.toObject(n.oneofDecl[X],L);if(n.reservedRange&&n.reservedRange.length)for(U.reservedRange=[],X=0;X<n.reservedRange.length;++X)U.reservedRange[X]=h.google.protobuf.DescriptorProto.ReservedRange.toObject(n.reservedRange[X],L);if(n.reservedName&&n.reservedName.length)for(U.reservedName=[],X=0;X<n.reservedName.length;++X)U.reservedName[X]=n.reservedName[X];return U},Q.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Q.ExtensionRange=(Y.prototype.start=0,Y.prototype.end=0,Y.prototype.options=null,Y.create=function(n){return new Y(n)},Y.encode=function(n,L){return L=L||a.create(),n.start!=null&&Object.hasOwnProperty.call(n,"start")&&L.uint32(8).int32(n.start),n.end!=null&&Object.hasOwnProperty.call(n,"end")&&L.uint32(16).int32(n.end),n.options!=null&&Object.hasOwnProperty.call(n,"options")&&h.google.protobuf.ExtensionRangeOptions.encode(n.options,L.uint32(26).fork()).ldelim(),L},Y.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},Y.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.DescriptorProto.ExtensionRange;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.start=n.int32();break;case 2:X.end=n.int32();break;case 3:X.options=h.google.protobuf.ExtensionRangeOptions.decode(n,n.uint32());break;default:n.skipType(7&me)}}return X},Y.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},Y.verify=function(n){return typeof n!="object"||n===null?"object expected":n.start!=null&&n.hasOwnProperty("start")&&!o.isInteger(n.start)?"start: integer expected":n.end!=null&&n.hasOwnProperty("end")&&!o.isInteger(n.end)?"end: integer expected":n.options!=null&&n.hasOwnProperty("options")&&(n=h.google.protobuf.ExtensionRangeOptions.verify(n.options),n)?"options."+n:null},Y.fromObject=function(n){if(n instanceof h.google.protobuf.DescriptorProto.ExtensionRange)return n;var L=new h.google.protobuf.DescriptorProto.ExtensionRange;if(n.start!=null&&(L.start=0|n.start),n.end!=null&&(L.end=0|n.end),n.options!=null){if(typeof n.options!="object")throw TypeError(".google.protobuf.DescriptorProto.ExtensionRange.options: object expected");L.options=h.google.protobuf.ExtensionRangeOptions.fromObject(n.options)}return L},Y.toObject=function(n,L){var U={};return(L=L||{}).defaults&&(U.start=0,U.end=0,U.options=null),n.start!=null&&n.hasOwnProperty("start")&&(U.start=n.start),n.end!=null&&n.hasOwnProperty("end")&&(U.end=n.end),n.options!=null&&n.hasOwnProperty("options")&&(U.options=h.google.protobuf.ExtensionRangeOptions.toObject(n.options,L)),U},Y.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Y),Q.ReservedRange=(te.prototype.start=0,te.prototype.end=0,te.create=function(n){return new te(n)},te.encode=function(n,L){return L=L||a.create(),n.start!=null&&Object.hasOwnProperty.call(n,"start")&&L.uint32(8).int32(n.start),n.end!=null&&Object.hasOwnProperty.call(n,"end")&&L.uint32(16).int32(n.end),L},te.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},te.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.DescriptorProto.ReservedRange;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.start=n.int32();break;case 2:X.end=n.int32();break;default:n.skipType(7&me)}}return X},te.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},te.verify=function(n){return typeof n!="object"||n===null?"object expected":n.start!=null&&n.hasOwnProperty("start")&&!o.isInteger(n.start)?"start: integer expected":n.end!=null&&n.hasOwnProperty("end")&&!o.isInteger(n.end)?"end: integer expected":null},te.fromObject=function(n){var L;return n instanceof h.google.protobuf.DescriptorProto.ReservedRange?n:(L=new h.google.protobuf.DescriptorProto.ReservedRange,n.start!=null&&(L.start=0|n.start),n.end!=null&&(L.end=0|n.end),L)},te.toObject=function(n,L){var U={};return(L=L||{}).defaults&&(U.start=0,U.end=0),n.start!=null&&n.hasOwnProperty("start")&&(U.start=n.start),n.end!=null&&n.hasOwnProperty("end")&&(U.end=n.end),U},te.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},te),Q),g.ExtensionRangeOptions=(ae.prototype.uninterpretedOption=o.emptyArray,ae.create=function(n){return new ae(n)},ae.encode=function(n,L){if(L=L||a.create(),n.uninterpretedOption!=null&&n.uninterpretedOption.length)for(var U=0;U<n.uninterpretedOption.length;++U)h.google.protobuf.UninterpretedOption.encode(n.uninterpretedOption[U],L.uint32(7994).fork()).ldelim();return L},ae.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},ae.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.ExtensionRangeOptions;n.pos<U;){var me=n.uint32();me>>>3==999?(X.uninterpretedOption&&X.uninterpretedOption.length||(X.uninterpretedOption=[]),X.uninterpretedOption.push(h.google.protobuf.UninterpretedOption.decode(n,n.uint32()))):n.skipType(7&me)}return X},ae.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},ae.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.uninterpretedOption!=null&&n.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(n.uninterpretedOption))return"uninterpretedOption: array expected";for(var L=0;L<n.uninterpretedOption.length;++L){var U=h.google.protobuf.UninterpretedOption.verify(n.uninterpretedOption[L]);if(U)return"uninterpretedOption."+U}}return null},ae.fromObject=function(n){if(n instanceof h.google.protobuf.ExtensionRangeOptions)return n;var L=new h.google.protobuf.ExtensionRangeOptions;if(n.uninterpretedOption){if(!Array.isArray(n.uninterpretedOption))throw TypeError(".google.protobuf.ExtensionRangeOptions.uninterpretedOption: array expected");L.uninterpretedOption=[];for(var U=0;U<n.uninterpretedOption.length;++U){if(typeof n.uninterpretedOption[U]!="object")throw TypeError(".google.protobuf.ExtensionRangeOptions.uninterpretedOption: object expected");L.uninterpretedOption[U]=h.google.protobuf.UninterpretedOption.fromObject(n.uninterpretedOption[U])}}return L},ae.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.uninterpretedOption=[]),n.uninterpretedOption&&n.uninterpretedOption.length){U.uninterpretedOption=[];for(var X=0;X<n.uninterpretedOption.length;++X)U.uninterpretedOption[X]=h.google.protobuf.UninterpretedOption.toObject(n.uninterpretedOption[X],L)}return U},ae.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ae),g.FieldDescriptorProto=(ue.prototype.name="",ue.prototype.number=0,ue.prototype.label=1,ue.prototype.type=1,ue.prototype.typeName="",ue.prototype.extendee="",ue.prototype.defaultValue="",ue.prototype.oneofIndex=0,ue.prototype.jsonName="",ue.prototype.options=null,ue.prototype.proto3Optional=!1,ue.create=function(n){return new ue(n)},ue.encode=function(n,L){return L=L||a.create(),n.name!=null&&Object.hasOwnProperty.call(n,"name")&&L.uint32(10).string(n.name),n.extendee!=null&&Object.hasOwnProperty.call(n,"extendee")&&L.uint32(18).string(n.extendee),n.number!=null&&Object.hasOwnProperty.call(n,"number")&&L.uint32(24).int32(n.number),n.label!=null&&Object.hasOwnProperty.call(n,"label")&&L.uint32(32).int32(n.label),n.type!=null&&Object.hasOwnProperty.call(n,"type")&&L.uint32(40).int32(n.type),n.typeName!=null&&Object.hasOwnProperty.call(n,"typeName")&&L.uint32(50).string(n.typeName),n.defaultValue!=null&&Object.hasOwnProperty.call(n,"defaultValue")&&L.uint32(58).string(n.defaultValue),n.options!=null&&Object.hasOwnProperty.call(n,"options")&&h.google.protobuf.FieldOptions.encode(n.options,L.uint32(66).fork()).ldelim(),n.oneofIndex!=null&&Object.hasOwnProperty.call(n,"oneofIndex")&&L.uint32(72).int32(n.oneofIndex),n.jsonName!=null&&Object.hasOwnProperty.call(n,"jsonName")&&L.uint32(82).string(n.jsonName),n.proto3Optional!=null&&Object.hasOwnProperty.call(n,"proto3Optional")&&L.uint32(136).bool(n.proto3Optional),L},ue.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},ue.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.FieldDescriptorProto;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.name=n.string();break;case 3:X.number=n.int32();break;case 4:X.label=n.int32();break;case 5:X.type=n.int32();break;case 6:X.typeName=n.string();break;case 2:X.extendee=n.string();break;case 7:X.defaultValue=n.string();break;case 9:X.oneofIndex=n.int32();break;case 10:X.jsonName=n.string();break;case 8:X.options=h.google.protobuf.FieldOptions.decode(n,n.uint32());break;case 17:X.proto3Optional=n.bool();break;default:n.skipType(7&me)}}return X},ue.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},ue.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.name!=null&&n.hasOwnProperty("name")&&!o.isString(n.name))return"name: string expected";if(n.number!=null&&n.hasOwnProperty("number")&&!o.isInteger(n.number))return"number: integer expected";if(n.label!=null&&n.hasOwnProperty("label"))switch(n.label){default:return"label: enum value expected";case 1:case 2:case 3:}if(n.type!=null&&n.hasOwnProperty("type"))switch(n.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:}if(n.typeName!=null&&n.hasOwnProperty("typeName")&&!o.isString(n.typeName))return"typeName: string expected";if(n.extendee!=null&&n.hasOwnProperty("extendee")&&!o.isString(n.extendee))return"extendee: string expected";if(n.defaultValue!=null&&n.hasOwnProperty("defaultValue")&&!o.isString(n.defaultValue))return"defaultValue: string expected";if(n.oneofIndex!=null&&n.hasOwnProperty("oneofIndex")&&!o.isInteger(n.oneofIndex))return"oneofIndex: integer expected";if(n.jsonName!=null&&n.hasOwnProperty("jsonName")&&!o.isString(n.jsonName))return"jsonName: string expected";if(n.options!=null&&n.hasOwnProperty("options")){var L=h.google.protobuf.FieldOptions.verify(n.options);if(L)return"options."+L}return n.proto3Optional!=null&&n.hasOwnProperty("proto3Optional")&&typeof n.proto3Optional!="boolean"?"proto3Optional: boolean expected":null},ue.fromObject=function(n){if(n instanceof h.google.protobuf.FieldDescriptorProto)return n;var L=new h.google.protobuf.FieldDescriptorProto;switch(n.name!=null&&(L.name=String(n.name)),n.number!=null&&(L.number=0|n.number),n.label){case"LABEL_OPTIONAL":case 1:L.label=1;break;case"LABEL_REQUIRED":case 2:L.label=2;break;case"LABEL_REPEATED":case 3:L.label=3}switch(n.type){case"TYPE_DOUBLE":case 1:L.type=1;break;case"TYPE_FLOAT":case 2:L.type=2;break;case"TYPE_INT64":case 3:L.type=3;break;case"TYPE_UINT64":case 4:L.type=4;break;case"TYPE_INT32":case 5:L.type=5;break;case"TYPE_FIXED64":case 6:L.type=6;break;case"TYPE_FIXED32":case 7:L.type=7;break;case"TYPE_BOOL":case 8:L.type=8;break;case"TYPE_STRING":case 9:L.type=9;break;case"TYPE_GROUP":case 10:L.type=10;break;case"TYPE_MESSAGE":case 11:L.type=11;break;case"TYPE_BYTES":case 12:L.type=12;break;case"TYPE_UINT32":case 13:L.type=13;break;case"TYPE_ENUM":case 14:L.type=14;break;case"TYPE_SFIXED32":case 15:L.type=15;break;case"TYPE_SFIXED64":case 16:L.type=16;break;case"TYPE_SINT32":case 17:L.type=17;break;case"TYPE_SINT64":case 18:L.type=18}if(n.typeName!=null&&(L.typeName=String(n.typeName)),n.extendee!=null&&(L.extendee=String(n.extendee)),n.defaultValue!=null&&(L.defaultValue=String(n.defaultValue)),n.oneofIndex!=null&&(L.oneofIndex=0|n.oneofIndex),n.jsonName!=null&&(L.jsonName=String(n.jsonName)),n.options!=null){if(typeof n.options!="object")throw TypeError(".google.protobuf.FieldDescriptorProto.options: object expected");L.options=h.google.protobuf.FieldOptions.fromObject(n.options)}return n.proto3Optional!=null&&(L.proto3Optional=!!n.proto3Optional),L},ue.toObject=function(n,L){var U={};return(L=L||{}).defaults&&(U.name="",U.extendee="",U.number=0,U.label=L.enums===String?"LABEL_OPTIONAL":1,U.type=L.enums===String?"TYPE_DOUBLE":1,U.typeName="",U.defaultValue="",U.options=null,U.oneofIndex=0,U.jsonName="",U.proto3Optional=!1),n.name!=null&&n.hasOwnProperty("name")&&(U.name=n.name),n.extendee!=null&&n.hasOwnProperty("extendee")&&(U.extendee=n.extendee),n.number!=null&&n.hasOwnProperty("number")&&(U.number=n.number),n.label!=null&&n.hasOwnProperty("label")&&(U.label=L.enums===String?h.google.protobuf.FieldDescriptorProto.Label[n.label]:n.label),n.type!=null&&n.hasOwnProperty("type")&&(U.type=L.enums===String?h.google.protobuf.FieldDescriptorProto.Type[n.type]:n.type),n.typeName!=null&&n.hasOwnProperty("typeName")&&(U.typeName=n.typeName),n.defaultValue!=null&&n.hasOwnProperty("defaultValue")&&(U.defaultValue=n.defaultValue),n.options!=null&&n.hasOwnProperty("options")&&(U.options=h.google.protobuf.FieldOptions.toObject(n.options,L)),n.oneofIndex!=null&&n.hasOwnProperty("oneofIndex")&&(U.oneofIndex=n.oneofIndex),n.jsonName!=null&&n.hasOwnProperty("jsonName")&&(U.jsonName=n.jsonName),n.proto3Optional!=null&&n.hasOwnProperty("proto3Optional")&&(U.proto3Optional=n.proto3Optional),U},ue.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ue.Type=(s={},(p=Object.create(s))[s[1]="TYPE_DOUBLE"]=1,p[s[2]="TYPE_FLOAT"]=2,p[s[3]="TYPE_INT64"]=3,p[s[4]="TYPE_UINT64"]=4,p[s[5]="TYPE_INT32"]=5,p[s[6]="TYPE_FIXED64"]=6,p[s[7]="TYPE_FIXED32"]=7,p[s[8]="TYPE_BOOL"]=8,p[s[9]="TYPE_STRING"]=9,p[s[10]="TYPE_GROUP"]=10,p[s[11]="TYPE_MESSAGE"]=11,p[s[12]="TYPE_BYTES"]=12,p[s[13]="TYPE_UINT32"]=13,p[s[14]="TYPE_ENUM"]=14,p[s[15]="TYPE_SFIXED32"]=15,p[s[16]="TYPE_SFIXED64"]=16,p[s[17]="TYPE_SINT32"]=17,p[s[18]="TYPE_SINT64"]=18,p),ue.Label=(s={},(p=Object.create(s))[s[1]="LABEL_OPTIONAL"]=1,p[s[2]="LABEL_REQUIRED"]=2,p[s[3]="LABEL_REPEATED"]=3,p),ue),g.OneofDescriptorProto=(ee.prototype.name="",ee.prototype.options=null,ee.create=function(n){return new ee(n)},ee.encode=function(n,L){return L=L||a.create(),n.name!=null&&Object.hasOwnProperty.call(n,"name")&&L.uint32(10).string(n.name),n.options!=null&&Object.hasOwnProperty.call(n,"options")&&h.google.protobuf.OneofOptions.encode(n.options,L.uint32(18).fork()).ldelim(),L},ee.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},ee.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.OneofDescriptorProto;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.name=n.string();break;case 2:X.options=h.google.protobuf.OneofOptions.decode(n,n.uint32());break;default:n.skipType(7&me)}}return X},ee.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},ee.verify=function(n){return typeof n!="object"||n===null?"object expected":n.name!=null&&n.hasOwnProperty("name")&&!o.isString(n.name)?"name: string expected":n.options!=null&&n.hasOwnProperty("options")&&(n=h.google.protobuf.OneofOptions.verify(n.options),n)?"options."+n:null},ee.fromObject=function(n){if(n instanceof h.google.protobuf.OneofDescriptorProto)return n;var L=new h.google.protobuf.OneofDescriptorProto;if(n.name!=null&&(L.name=String(n.name)),n.options!=null){if(typeof n.options!="object")throw TypeError(".google.protobuf.OneofDescriptorProto.options: object expected");L.options=h.google.protobuf.OneofOptions.fromObject(n.options)}return L},ee.toObject=function(n,L){var U={};return(L=L||{}).defaults&&(U.name="",U.options=null),n.name!=null&&n.hasOwnProperty("name")&&(U.name=n.name),n.options!=null&&n.hasOwnProperty("options")&&(U.options=h.google.protobuf.OneofOptions.toObject(n.options,L)),U},ee.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ee),g.EnumDescriptorProto=(oe.prototype.name="",oe.prototype.value=o.emptyArray,oe.prototype.options=null,oe.prototype.reservedRange=o.emptyArray,oe.prototype.reservedName=o.emptyArray,oe.create=function(n){return new oe(n)},oe.encode=function(n,L){if(L=L||a.create(),n.name!=null&&Object.hasOwnProperty.call(n,"name")&&L.uint32(10).string(n.name),n.value!=null&&n.value.length)for(var U=0;U<n.value.length;++U)h.google.protobuf.EnumValueDescriptorProto.encode(n.value[U],L.uint32(18).fork()).ldelim();if(n.options!=null&&Object.hasOwnProperty.call(n,"options")&&h.google.protobuf.EnumOptions.encode(n.options,L.uint32(26).fork()).ldelim(),n.reservedRange!=null&&n.reservedRange.length)for(U=0;U<n.reservedRange.length;++U)h.google.protobuf.EnumDescriptorProto.EnumReservedRange.encode(n.reservedRange[U],L.uint32(34).fork()).ldelim();if(n.reservedName!=null&&n.reservedName.length)for(U=0;U<n.reservedName.length;++U)L.uint32(42).string(n.reservedName[U]);return L},oe.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},oe.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.EnumDescriptorProto;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.name=n.string();break;case 2:X.value&&X.value.length||(X.value=[]),X.value.push(h.google.protobuf.EnumValueDescriptorProto.decode(n,n.uint32()));break;case 3:X.options=h.google.protobuf.EnumOptions.decode(n,n.uint32());break;case 4:X.reservedRange&&X.reservedRange.length||(X.reservedRange=[]),X.reservedRange.push(h.google.protobuf.EnumDescriptorProto.EnumReservedRange.decode(n,n.uint32()));break;case 5:X.reservedName&&X.reservedName.length||(X.reservedName=[]),X.reservedName.push(n.string());break;default:n.skipType(7&me)}}return X},oe.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},oe.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.name!=null&&n.hasOwnProperty("name")&&!o.isString(n.name))return"name: string expected";if(n.value!=null&&n.hasOwnProperty("value")){if(!Array.isArray(n.value))return"value: array expected";for(var L=0;L<n.value.length;++L)if(U=h.google.protobuf.EnumValueDescriptorProto.verify(n.value[L]))return"value."+U}if(n.options!=null&&n.hasOwnProperty("options")&&(U=h.google.protobuf.EnumOptions.verify(n.options)))return"options."+U;if(n.reservedRange!=null&&n.hasOwnProperty("reservedRange")){if(!Array.isArray(n.reservedRange))return"reservedRange: array expected";for(var U,L=0;L<n.reservedRange.length;++L)if(U=h.google.protobuf.EnumDescriptorProto.EnumReservedRange.verify(n.reservedRange[L]))return"reservedRange."+U}if(n.reservedName!=null&&n.hasOwnProperty("reservedName")){if(!Array.isArray(n.reservedName))return"reservedName: array expected";for(L=0;L<n.reservedName.length;++L)if(!o.isString(n.reservedName[L]))return"reservedName: string[] expected"}return null},oe.fromObject=function(n){if(n instanceof h.google.protobuf.EnumDescriptorProto)return n;var L=new h.google.protobuf.EnumDescriptorProto;if(n.name!=null&&(L.name=String(n.name)),n.value){if(!Array.isArray(n.value))throw TypeError(".google.protobuf.EnumDescriptorProto.value: array expected");L.value=[];for(var U=0;U<n.value.length;++U){if(typeof n.value[U]!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.value: object expected");L.value[U]=h.google.protobuf.EnumValueDescriptorProto.fromObject(n.value[U])}}if(n.options!=null){if(typeof n.options!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.options: object expected");L.options=h.google.protobuf.EnumOptions.fromObject(n.options)}if(n.reservedRange){if(!Array.isArray(n.reservedRange))throw TypeError(".google.protobuf.EnumDescriptorProto.reservedRange: array expected");for(L.reservedRange=[],U=0;U<n.reservedRange.length;++U){if(typeof n.reservedRange[U]!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.reservedRange: object expected");L.reservedRange[U]=h.google.protobuf.EnumDescriptorProto.EnumReservedRange.fromObject(n.reservedRange[U])}}if(n.reservedName){if(!Array.isArray(n.reservedName))throw TypeError(".google.protobuf.EnumDescriptorProto.reservedName: array expected");for(L.reservedName=[],U=0;U<n.reservedName.length;++U)L.reservedName[U]=String(n.reservedName[U])}return L},oe.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.value=[],U.reservedRange=[],U.reservedName=[]),L.defaults&&(U.name="",U.options=null),n.name!=null&&n.hasOwnProperty("name")&&(U.name=n.name),n.value&&n.value.length){U.value=[];for(var X=0;X<n.value.length;++X)U.value[X]=h.google.protobuf.EnumValueDescriptorProto.toObject(n.value[X],L)}if(n.options!=null&&n.hasOwnProperty("options")&&(U.options=h.google.protobuf.EnumOptions.toObject(n.options,L)),n.reservedRange&&n.reservedRange.length)for(U.reservedRange=[],X=0;X<n.reservedRange.length;++X)U.reservedRange[X]=h.google.protobuf.EnumDescriptorProto.EnumReservedRange.toObject(n.reservedRange[X],L);if(n.reservedName&&n.reservedName.length)for(U.reservedName=[],X=0;X<n.reservedName.length;++X)U.reservedName[X]=n.reservedName[X];return U},oe.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},oe.EnumReservedRange=(de.prototype.start=0,de.prototype.end=0,de.create=function(n){return new de(n)},de.encode=function(n,L){return L=L||a.create(),n.start!=null&&Object.hasOwnProperty.call(n,"start")&&L.uint32(8).int32(n.start),n.end!=null&&Object.hasOwnProperty.call(n,"end")&&L.uint32(16).int32(n.end),L},de.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},de.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.EnumDescriptorProto.EnumReservedRange;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.start=n.int32();break;case 2:X.end=n.int32();break;default:n.skipType(7&me)}}return X},de.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},de.verify=function(n){return typeof n!="object"||n===null?"object expected":n.start!=null&&n.hasOwnProperty("start")&&!o.isInteger(n.start)?"start: integer expected":n.end!=null&&n.hasOwnProperty("end")&&!o.isInteger(n.end)?"end: integer expected":null},de.fromObject=function(n){var L;return n instanceof h.google.protobuf.EnumDescriptorProto.EnumReservedRange?n:(L=new h.google.protobuf.EnumDescriptorProto.EnumReservedRange,n.start!=null&&(L.start=0|n.start),n.end!=null&&(L.end=0|n.end),L)},de.toObject=function(n,L){var U={};return(L=L||{}).defaults&&(U.start=0,U.end=0),n.start!=null&&n.hasOwnProperty("start")&&(U.start=n.start),n.end!=null&&n.hasOwnProperty("end")&&(U.end=n.end),U},de.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},de),oe),g.EnumValueDescriptorProto=(he.prototype.name="",he.prototype.number=0,he.prototype.options=null,he.create=function(n){return new he(n)},he.encode=function(n,L){return L=L||a.create(),n.name!=null&&Object.hasOwnProperty.call(n,"name")&&L.uint32(10).string(n.name),n.number!=null&&Object.hasOwnProperty.call(n,"number")&&L.uint32(16).int32(n.number),n.options!=null&&Object.hasOwnProperty.call(n,"options")&&h.google.protobuf.EnumValueOptions.encode(n.options,L.uint32(26).fork()).ldelim(),L},he.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},he.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.EnumValueDescriptorProto;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.name=n.string();break;case 2:X.number=n.int32();break;case 3:X.options=h.google.protobuf.EnumValueOptions.decode(n,n.uint32());break;default:n.skipType(7&me)}}return X},he.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},he.verify=function(n){return typeof n!="object"||n===null?"object expected":n.name!=null&&n.hasOwnProperty("name")&&!o.isString(n.name)?"name: string expected":n.number!=null&&n.hasOwnProperty("number")&&!o.isInteger(n.number)?"number: integer expected":n.options!=null&&n.hasOwnProperty("options")&&(n=h.google.protobuf.EnumValueOptions.verify(n.options),n)?"options."+n:null},he.fromObject=function(n){if(n instanceof h.google.protobuf.EnumValueDescriptorProto)return n;var L=new h.google.protobuf.EnumValueDescriptorProto;if(n.name!=null&&(L.name=String(n.name)),n.number!=null&&(L.number=0|n.number),n.options!=null){if(typeof n.options!="object")throw TypeError(".google.protobuf.EnumValueDescriptorProto.options: object expected");L.options=h.google.protobuf.EnumValueOptions.fromObject(n.options)}return L},he.toObject=function(n,L){var U={};return(L=L||{}).defaults&&(U.name="",U.number=0,U.options=null),n.name!=null&&n.hasOwnProperty("name")&&(U.name=n.name),n.number!=null&&n.hasOwnProperty("number")&&(U.number=n.number),n.options!=null&&n.hasOwnProperty("options")&&(U.options=h.google.protobuf.EnumValueOptions.toObject(n.options,L)),U},he.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},he),g.ServiceDescriptorProto=(Ee.prototype.name="",Ee.prototype.method=o.emptyArray,Ee.prototype.options=null,Ee.create=function(n){return new Ee(n)},Ee.encode=function(n,L){if(L=L||a.create(),n.name!=null&&Object.hasOwnProperty.call(n,"name")&&L.uint32(10).string(n.name),n.method!=null&&n.method.length)for(var U=0;U<n.method.length;++U)h.google.protobuf.MethodDescriptorProto.encode(n.method[U],L.uint32(18).fork()).ldelim();return n.options!=null&&Object.hasOwnProperty.call(n,"options")&&h.google.protobuf.ServiceOptions.encode(n.options,L.uint32(26).fork()).ldelim(),L},Ee.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},Ee.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.ServiceDescriptorProto;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.name=n.string();break;case 2:X.method&&X.method.length||(X.method=[]),X.method.push(h.google.protobuf.MethodDescriptorProto.decode(n,n.uint32()));break;case 3:X.options=h.google.protobuf.ServiceOptions.decode(n,n.uint32());break;default:n.skipType(7&me)}}return X},Ee.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},Ee.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.name!=null&&n.hasOwnProperty("name")&&!o.isString(n.name))return"name: string expected";if(n.method!=null&&n.hasOwnProperty("method")){if(!Array.isArray(n.method))return"method: array expected";for(var L=0;L<n.method.length;++L)if(U=h.google.protobuf.MethodDescriptorProto.verify(n.method[L]))return"method."+U}var U;return n.options!=null&&n.hasOwnProperty("options")&&(U=h.google.protobuf.ServiceOptions.verify(n.options))?"options."+U:null},Ee.fromObject=function(n){if(n instanceof h.google.protobuf.ServiceDescriptorProto)return n;var L=new h.google.protobuf.ServiceDescriptorProto;if(n.name!=null&&(L.name=String(n.name)),n.method){if(!Array.isArray(n.method))throw TypeError(".google.protobuf.ServiceDescriptorProto.method: array expected");L.method=[];for(var U=0;U<n.method.length;++U){if(typeof n.method[U]!="object")throw TypeError(".google.protobuf.ServiceDescriptorProto.method: object expected");L.method[U]=h.google.protobuf.MethodDescriptorProto.fromObject(n.method[U])}}if(n.options!=null){if(typeof n.options!="object")throw TypeError(".google.protobuf.ServiceDescriptorProto.options: object expected");L.options=h.google.protobuf.ServiceOptions.fromObject(n.options)}return L},Ee.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.method=[]),L.defaults&&(U.name="",U.options=null),n.name!=null&&n.hasOwnProperty("name")&&(U.name=n.name),n.method&&n.method.length){U.method=[];for(var X=0;X<n.method.length;++X)U.method[X]=h.google.protobuf.MethodDescriptorProto.toObject(n.method[X],L)}return n.options!=null&&n.hasOwnProperty("options")&&(U.options=h.google.protobuf.ServiceOptions.toObject(n.options,L)),U},Ee.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Ee),g.MethodDescriptorProto=(fe.prototype.name="",fe.prototype.inputType="",fe.prototype.outputType="",fe.prototype.options=null,fe.prototype.clientStreaming=!1,fe.prototype.serverStreaming=!1,fe.create=function(n){return new fe(n)},fe.encode=function(n,L){return L=L||a.create(),n.name!=null&&Object.hasOwnProperty.call(n,"name")&&L.uint32(10).string(n.name),n.inputType!=null&&Object.hasOwnProperty.call(n,"inputType")&&L.uint32(18).string(n.inputType),n.outputType!=null&&Object.hasOwnProperty.call(n,"outputType")&&L.uint32(26).string(n.outputType),n.options!=null&&Object.hasOwnProperty.call(n,"options")&&h.google.protobuf.MethodOptions.encode(n.options,L.uint32(34).fork()).ldelim(),n.clientStreaming!=null&&Object.hasOwnProperty.call(n,"clientStreaming")&&L.uint32(40).bool(n.clientStreaming),n.serverStreaming!=null&&Object.hasOwnProperty.call(n,"serverStreaming")&&L.uint32(48).bool(n.serverStreaming),L},fe.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},fe.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.MethodDescriptorProto;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.name=n.string();break;case 2:X.inputType=n.string();break;case 3:X.outputType=n.string();break;case 4:X.options=h.google.protobuf.MethodOptions.decode(n,n.uint32());break;case 5:X.clientStreaming=n.bool();break;case 6:X.serverStreaming=n.bool();break;default:n.skipType(7&me)}}return X},fe.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},fe.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.name!=null&&n.hasOwnProperty("name")&&!o.isString(n.name))return"name: string expected";if(n.inputType!=null&&n.hasOwnProperty("inputType")&&!o.isString(n.inputType))return"inputType: string expected";if(n.outputType!=null&&n.hasOwnProperty("outputType")&&!o.isString(n.outputType))return"outputType: string expected";if(n.options!=null&&n.hasOwnProperty("options")){var L=h.google.protobuf.MethodOptions.verify(n.options);if(L)return"options."+L}return n.clientStreaming!=null&&n.hasOwnProperty("clientStreaming")&&typeof n.clientStreaming!="boolean"?"clientStreaming: boolean expected":n.serverStreaming!=null&&n.hasOwnProperty("serverStreaming")&&typeof n.serverStreaming!="boolean"?"serverStreaming: boolean expected":null},fe.fromObject=function(n){if(n instanceof h.google.protobuf.MethodDescriptorProto)return n;var L=new h.google.protobuf.MethodDescriptorProto;if(n.name!=null&&(L.name=String(n.name)),n.inputType!=null&&(L.inputType=String(n.inputType)),n.outputType!=null&&(L.outputType=String(n.outputType)),n.options!=null){if(typeof n.options!="object")throw TypeError(".google.protobuf.MethodDescriptorProto.options: object expected");L.options=h.google.protobuf.MethodOptions.fromObject(n.options)}return n.clientStreaming!=null&&(L.clientStreaming=!!n.clientStreaming),n.serverStreaming!=null&&(L.serverStreaming=!!n.serverStreaming),L},fe.toObject=function(n,L){var U={};return(L=L||{}).defaults&&(U.name="",U.inputType="",U.outputType="",U.options=null,U.clientStreaming=!1,U.serverStreaming=!1),n.name!=null&&n.hasOwnProperty("name")&&(U.name=n.name),n.inputType!=null&&n.hasOwnProperty("inputType")&&(U.inputType=n.inputType),n.outputType!=null&&n.hasOwnProperty("outputType")&&(U.outputType=n.outputType),n.options!=null&&n.hasOwnProperty("options")&&(U.options=h.google.protobuf.MethodOptions.toObject(n.options,L)),n.clientStreaming!=null&&n.hasOwnProperty("clientStreaming")&&(U.clientStreaming=n.clientStreaming),n.serverStreaming!=null&&n.hasOwnProperty("serverStreaming")&&(U.serverStreaming=n.serverStreaming),U},fe.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},fe),g.FileOptions=(Se.prototype.javaPackage="",Se.prototype.javaOuterClassname="",Se.prototype.javaMultipleFiles=!1,Se.prototype.javaGenerateEqualsAndHash=!1,Se.prototype.javaStringCheckUtf8=!1,Se.prototype.optimizeFor=1,Se.prototype.goPackage="",Se.prototype.ccGenericServices=!1,Se.prototype.javaGenericServices=!1,Se.prototype.pyGenericServices=!1,Se.prototype.phpGenericServices=!1,Se.prototype.deprecated=!1,Se.prototype.ccEnableArenas=!0,Se.prototype.objcClassPrefix="",Se.prototype.csharpNamespace="",Se.prototype.swiftPrefix="",Se.prototype.phpClassPrefix="",Se.prototype.phpNamespace="",Se.prototype.phpMetadataNamespace="",Se.prototype.rubyPackage="",Se.prototype.uninterpretedOption=o.emptyArray,Se.prototype[".google.api.resourceDefinition"]=o.emptyArray,Se.create=function(n){return new Se(n)},Se.encode=function(n,L){if(L=L||a.create(),n.javaPackage!=null&&Object.hasOwnProperty.call(n,"javaPackage")&&L.uint32(10).string(n.javaPackage),n.javaOuterClassname!=null&&Object.hasOwnProperty.call(n,"javaOuterClassname")&&L.uint32(66).string(n.javaOuterClassname),n.optimizeFor!=null&&Object.hasOwnProperty.call(n,"optimizeFor")&&L.uint32(72).int32(n.optimizeFor),n.javaMultipleFiles!=null&&Object.hasOwnProperty.call(n,"javaMultipleFiles")&&L.uint32(80).bool(n.javaMultipleFiles),n.goPackage!=null&&Object.hasOwnProperty.call(n,"goPackage")&&L.uint32(90).string(n.goPackage),n.ccGenericServices!=null&&Object.hasOwnProperty.call(n,"ccGenericServices")&&L.uint32(128).bool(n.ccGenericServices),n.javaGenericServices!=null&&Object.hasOwnProperty.call(n,"javaGenericServices")&&L.uint32(136).bool(n.javaGenericServices),n.pyGenericServices!=null&&Object.hasOwnProperty.call(n,"pyGenericServices")&&L.uint32(144).bool(n.pyGenericServices),n.javaGenerateEqualsAndHash!=null&&Object.hasOwnProperty.call(n,"javaGenerateEqualsAndHash")&&L.uint32(160).bool(n.javaGenerateEqualsAndHash),n.deprecated!=null&&Object.hasOwnProperty.call(n,"deprecated")&&L.uint32(184).bool(n.deprecated),n.javaStringCheckUtf8!=null&&Object.hasOwnProperty.call(n,"javaStringCheckUtf8")&&L.uint32(216).bool(n.javaStringCheckUtf8),n.ccEnableArenas!=null&&Object.hasOwnProperty.call(n,"ccEnableArenas")&&L.uint32(248).bool(n.ccEnableArenas),n.objcClassPrefix!=null&&Object.hasOwnProperty.call(n,"objcClassPrefix")&&L.uint32(290).string(n.objcClassPrefix),n.csharpNamespace!=null&&Object.hasOwnProperty.call(n,"csharpNamespace")&&L.uint32(298).string(n.csharpNamespace),n.swiftPrefix!=null&&Object.hasOwnProperty.call(n,"swiftPrefix")&&L.uint32(314).string(n.swiftPrefix),n.phpClassPrefix!=null&&Object.hasOwnProperty.call(n,"phpClassPrefix")&&L.uint32(322).string(n.phpClassPrefix),n.phpNamespace!=null&&Object.hasOwnProperty.call(n,"phpNamespace")&&L.uint32(330).string(n.phpNamespace),n.phpGenericServices!=null&&Object.hasOwnProperty.call(n,"phpGenericServices")&&L.uint32(336).bool(n.phpGenericServices),n.phpMetadataNamespace!=null&&Object.hasOwnProperty.call(n,"phpMetadataNamespace")&&L.uint32(354).string(n.phpMetadataNamespace),n.rubyPackage!=null&&Object.hasOwnProperty.call(n,"rubyPackage")&&L.uint32(362).string(n.rubyPackage),n.uninterpretedOption!=null&&n.uninterpretedOption.length)for(var U=0;U<n.uninterpretedOption.length;++U)h.google.protobuf.UninterpretedOption.encode(n.uninterpretedOption[U],L.uint32(7994).fork()).ldelim();if(n[".google.api.resourceDefinition"]!=null&&n[".google.api.resourceDefinition"].length)for(U=0;U<n[".google.api.resourceDefinition"].length;++U)h.google.api.ResourceDescriptor.encode(n[".google.api.resourceDefinition"][U],L.uint32(8426).fork()).ldelim();return L},Se.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},Se.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.FileOptions;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.javaPackage=n.string();break;case 8:X.javaOuterClassname=n.string();break;case 10:X.javaMultipleFiles=n.bool();break;case 20:X.javaGenerateEqualsAndHash=n.bool();break;case 27:X.javaStringCheckUtf8=n.bool();break;case 9:X.optimizeFor=n.int32();break;case 11:X.goPackage=n.string();break;case 16:X.ccGenericServices=n.bool();break;case 17:X.javaGenericServices=n.bool();break;case 18:X.pyGenericServices=n.bool();break;case 42:X.phpGenericServices=n.bool();break;case 23:X.deprecated=n.bool();break;case 31:X.ccEnableArenas=n.bool();break;case 36:X.objcClassPrefix=n.string();break;case 37:X.csharpNamespace=n.string();break;case 39:X.swiftPrefix=n.string();break;case 40:X.phpClassPrefix=n.string();break;case 41:X.phpNamespace=n.string();break;case 44:X.phpMetadataNamespace=n.string();break;case 45:X.rubyPackage=n.string();break;case 999:X.uninterpretedOption&&X.uninterpretedOption.length||(X.uninterpretedOption=[]),X.uninterpretedOption.push(h.google.protobuf.UninterpretedOption.decode(n,n.uint32()));break;case 1053:X[".google.api.resourceDefinition"]&&X[".google.api.resourceDefinition"].length||(X[".google.api.resourceDefinition"]=[]),X[".google.api.resourceDefinition"].push(h.google.api.ResourceDescriptor.decode(n,n.uint32()));break;default:n.skipType(7&me)}}return X},Se.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},Se.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.javaPackage!=null&&n.hasOwnProperty("javaPackage")&&!o.isString(n.javaPackage))return"javaPackage: string expected";if(n.javaOuterClassname!=null&&n.hasOwnProperty("javaOuterClassname")&&!o.isString(n.javaOuterClassname))return"javaOuterClassname: string expected";if(n.javaMultipleFiles!=null&&n.hasOwnProperty("javaMultipleFiles")&&typeof n.javaMultipleFiles!="boolean")return"javaMultipleFiles: boolean expected";if(n.javaGenerateEqualsAndHash!=null&&n.hasOwnProperty("javaGenerateEqualsAndHash")&&typeof n.javaGenerateEqualsAndHash!="boolean")return"javaGenerateEqualsAndHash: boolean expected";if(n.javaStringCheckUtf8!=null&&n.hasOwnProperty("javaStringCheckUtf8")&&typeof n.javaStringCheckUtf8!="boolean")return"javaStringCheckUtf8: boolean expected";if(n.optimizeFor!=null&&n.hasOwnProperty("optimizeFor"))switch(n.optimizeFor){default:return"optimizeFor: enum value expected";case 1:case 2:case 3:}if(n.goPackage!=null&&n.hasOwnProperty("goPackage")&&!o.isString(n.goPackage))return"goPackage: string expected";if(n.ccGenericServices!=null&&n.hasOwnProperty("ccGenericServices")&&typeof n.ccGenericServices!="boolean")return"ccGenericServices: boolean expected";if(n.javaGenericServices!=null&&n.hasOwnProperty("javaGenericServices")&&typeof n.javaGenericServices!="boolean")return"javaGenericServices: boolean expected";if(n.pyGenericServices!=null&&n.hasOwnProperty("pyGenericServices")&&typeof n.pyGenericServices!="boolean")return"pyGenericServices: boolean expected";if(n.phpGenericServices!=null&&n.hasOwnProperty("phpGenericServices")&&typeof n.phpGenericServices!="boolean")return"phpGenericServices: boolean expected";if(n.deprecated!=null&&n.hasOwnProperty("deprecated")&&typeof n.deprecated!="boolean")return"deprecated: boolean expected";if(n.ccEnableArenas!=null&&n.hasOwnProperty("ccEnableArenas")&&typeof n.ccEnableArenas!="boolean")return"ccEnableArenas: boolean expected";if(n.objcClassPrefix!=null&&n.hasOwnProperty("objcClassPrefix")&&!o.isString(n.objcClassPrefix))return"objcClassPrefix: string expected";if(n.csharpNamespace!=null&&n.hasOwnProperty("csharpNamespace")&&!o.isString(n.csharpNamespace))return"csharpNamespace: string expected";if(n.swiftPrefix!=null&&n.hasOwnProperty("swiftPrefix")&&!o.isString(n.swiftPrefix))return"swiftPrefix: string expected";if(n.phpClassPrefix!=null&&n.hasOwnProperty("phpClassPrefix")&&!o.isString(n.phpClassPrefix))return"phpClassPrefix: string expected";if(n.phpNamespace!=null&&n.hasOwnProperty("phpNamespace")&&!o.isString(n.phpNamespace))return"phpNamespace: string expected";if(n.phpMetadataNamespace!=null&&n.hasOwnProperty("phpMetadataNamespace")&&!o.isString(n.phpMetadataNamespace))return"phpMetadataNamespace: string expected";if(n.rubyPackage!=null&&n.hasOwnProperty("rubyPackage")&&!o.isString(n.rubyPackage))return"rubyPackage: string expected";if(n.uninterpretedOption!=null&&n.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(n.uninterpretedOption))return"uninterpretedOption: array expected";for(var L=0;L<n.uninterpretedOption.length;++L)if(U=h.google.protobuf.UninterpretedOption.verify(n.uninterpretedOption[L]))return"uninterpretedOption."+U}if(n[".google.api.resourceDefinition"]!=null&&n.hasOwnProperty(".google.api.resourceDefinition")){if(!Array.isArray(n[".google.api.resourceDefinition"]))return".google.api.resourceDefinition: array expected";for(var U,L=0;L<n[".google.api.resourceDefinition"].length;++L)if(U=h.google.api.ResourceDescriptor.verify(n[".google.api.resourceDefinition"][L]))return".google.api.resourceDefinition."+U}return null},Se.fromObject=function(n){if(n instanceof h.google.protobuf.FileOptions)return n;var L=new h.google.protobuf.FileOptions;switch(n.javaPackage!=null&&(L.javaPackage=String(n.javaPackage)),n.javaOuterClassname!=null&&(L.javaOuterClassname=String(n.javaOuterClassname)),n.javaMultipleFiles!=null&&(L.javaMultipleFiles=!!n.javaMultipleFiles),n.javaGenerateEqualsAndHash!=null&&(L.javaGenerateEqualsAndHash=!!n.javaGenerateEqualsAndHash),n.javaStringCheckUtf8!=null&&(L.javaStringCheckUtf8=!!n.javaStringCheckUtf8),n.optimizeFor){case"SPEED":case 1:L.optimizeFor=1;break;case"CODE_SIZE":case 2:L.optimizeFor=2;break;case"LITE_RUNTIME":case 3:L.optimizeFor=3}if(n.goPackage!=null&&(L.goPackage=String(n.goPackage)),n.ccGenericServices!=null&&(L.ccGenericServices=!!n.ccGenericServices),n.javaGenericServices!=null&&(L.javaGenericServices=!!n.javaGenericServices),n.pyGenericServices!=null&&(L.pyGenericServices=!!n.pyGenericServices),n.phpGenericServices!=null&&(L.phpGenericServices=!!n.phpGenericServices),n.deprecated!=null&&(L.deprecated=!!n.deprecated),n.ccEnableArenas!=null&&(L.ccEnableArenas=!!n.ccEnableArenas),n.objcClassPrefix!=null&&(L.objcClassPrefix=String(n.objcClassPrefix)),n.csharpNamespace!=null&&(L.csharpNamespace=String(n.csharpNamespace)),n.swiftPrefix!=null&&(L.swiftPrefix=String(n.swiftPrefix)),n.phpClassPrefix!=null&&(L.phpClassPrefix=String(n.phpClassPrefix)),n.phpNamespace!=null&&(L.phpNamespace=String(n.phpNamespace)),n.phpMetadataNamespace!=null&&(L.phpMetadataNamespace=String(n.phpMetadataNamespace)),n.rubyPackage!=null&&(L.rubyPackage=String(n.rubyPackage)),n.uninterpretedOption){if(!Array.isArray(n.uninterpretedOption))throw TypeError(".google.protobuf.FileOptions.uninterpretedOption: array expected");L.uninterpretedOption=[];for(var U=0;U<n.uninterpretedOption.length;++U){if(typeof n.uninterpretedOption[U]!="object")throw TypeError(".google.protobuf.FileOptions.uninterpretedOption: object expected");L.uninterpretedOption[U]=h.google.protobuf.UninterpretedOption.fromObject(n.uninterpretedOption[U])}}if(n[".google.api.resourceDefinition"]){if(!Array.isArray(n[".google.api.resourceDefinition"]))throw TypeError(".google.protobuf.FileOptions..google.api.resourceDefinition: array expected");for(L[".google.api.resourceDefinition"]=[],U=0;U<n[".google.api.resourceDefinition"].length;++U){if(typeof n[".google.api.resourceDefinition"][U]!="object")throw TypeError(".google.protobuf.FileOptions..google.api.resourceDefinition: object expected");L[".google.api.resourceDefinition"][U]=h.google.api.ResourceDescriptor.fromObject(n[".google.api.resourceDefinition"][U])}}return L},Se.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.uninterpretedOption=[],U[".google.api.resourceDefinition"]=[]),L.defaults&&(U.javaPackage="",U.javaOuterClassname="",U.optimizeFor=L.enums===String?"SPEED":1,U.javaMultipleFiles=!1,U.goPackage="",U.ccGenericServices=!1,U.javaGenericServices=!1,U.pyGenericServices=!1,U.javaGenerateEqualsAndHash=!1,U.deprecated=!1,U.javaStringCheckUtf8=!1,U.ccEnableArenas=!0,U.objcClassPrefix="",U.csharpNamespace="",U.swiftPrefix="",U.phpClassPrefix="",U.phpNamespace="",U.phpGenericServices=!1,U.phpMetadataNamespace="",U.rubyPackage=""),n.javaPackage!=null&&n.hasOwnProperty("javaPackage")&&(U.javaPackage=n.javaPackage),n.javaOuterClassname!=null&&n.hasOwnProperty("javaOuterClassname")&&(U.javaOuterClassname=n.javaOuterClassname),n.optimizeFor!=null&&n.hasOwnProperty("optimizeFor")&&(U.optimizeFor=L.enums===String?h.google.protobuf.FileOptions.OptimizeMode[n.optimizeFor]:n.optimizeFor),n.javaMultipleFiles!=null&&n.hasOwnProperty("javaMultipleFiles")&&(U.javaMultipleFiles=n.javaMultipleFiles),n.goPackage!=null&&n.hasOwnProperty("goPackage")&&(U.goPackage=n.goPackage),n.ccGenericServices!=null&&n.hasOwnProperty("ccGenericServices")&&(U.ccGenericServices=n.ccGenericServices),n.javaGenericServices!=null&&n.hasOwnProperty("javaGenericServices")&&(U.javaGenericServices=n.javaGenericServices),n.pyGenericServices!=null&&n.hasOwnProperty("pyGenericServices")&&(U.pyGenericServices=n.pyGenericServices),n.javaGenerateEqualsAndHash!=null&&n.hasOwnProperty("javaGenerateEqualsAndHash")&&(U.javaGenerateEqualsAndHash=n.javaGenerateEqualsAndHash),n.deprecated!=null&&n.hasOwnProperty("deprecated")&&(U.deprecated=n.deprecated),n.javaStringCheckUtf8!=null&&n.hasOwnProperty("javaStringCheckUtf8")&&(U.javaStringCheckUtf8=n.javaStringCheckUtf8),n.ccEnableArenas!=null&&n.hasOwnProperty("ccEnableArenas")&&(U.ccEnableArenas=n.ccEnableArenas),n.objcClassPrefix!=null&&n.hasOwnProperty("objcClassPrefix")&&(U.objcClassPrefix=n.objcClassPrefix),n.csharpNamespace!=null&&n.hasOwnProperty("csharpNamespace")&&(U.csharpNamespace=n.csharpNamespace),n.swiftPrefix!=null&&n.hasOwnProperty("swiftPrefix")&&(U.swiftPrefix=n.swiftPrefix),n.phpClassPrefix!=null&&n.hasOwnProperty("phpClassPrefix")&&(U.phpClassPrefix=n.phpClassPrefix),n.phpNamespace!=null&&n.hasOwnProperty("phpNamespace")&&(U.phpNamespace=n.phpNamespace),n.phpGenericServices!=null&&n.hasOwnProperty("phpGenericServices")&&(U.phpGenericServices=n.phpGenericServices),n.phpMetadataNamespace!=null&&n.hasOwnProperty("phpMetadataNamespace")&&(U.phpMetadataNamespace=n.phpMetadataNamespace),n.rubyPackage!=null&&n.hasOwnProperty("rubyPackage")&&(U.rubyPackage=n.rubyPackage),n.uninterpretedOption&&n.uninterpretedOption.length){U.uninterpretedOption=[];for(var X=0;X<n.uninterpretedOption.length;++X)U.uninterpretedOption[X]=h.google.protobuf.UninterpretedOption.toObject(n.uninterpretedOption[X],L)}if(n[".google.api.resourceDefinition"]&&n[".google.api.resourceDefinition"].length)for(U[".google.api.resourceDefinition"]=[],X=0;X<n[".google.api.resourceDefinition"].length;++X)U[".google.api.resourceDefinition"][X]=h.google.api.ResourceDescriptor.toObject(n[".google.api.resourceDefinition"][X],L);return U},Se.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Se.OptimizeMode=(s={},(p=Object.create(s))[s[1]="SPEED"]=1,p[s[2]="CODE_SIZE"]=2,p[s[3]="LITE_RUNTIME"]=3,p),Se),g.MessageOptions=(be.prototype.messageSetWireFormat=!1,be.prototype.noStandardDescriptorAccessor=!1,be.prototype.deprecated=!1,be.prototype.mapEntry=!1,be.prototype.uninterpretedOption=o.emptyArray,be.prototype[".google.api.resource"]=null,be.create=function(n){return new be(n)},be.encode=function(n,L){if(L=L||a.create(),n.messageSetWireFormat!=null&&Object.hasOwnProperty.call(n,"messageSetWireFormat")&&L.uint32(8).bool(n.messageSetWireFormat),n.noStandardDescriptorAccessor!=null&&Object.hasOwnProperty.call(n,"noStandardDescriptorAccessor")&&L.uint32(16).bool(n.noStandardDescriptorAccessor),n.deprecated!=null&&Object.hasOwnProperty.call(n,"deprecated")&&L.uint32(24).bool(n.deprecated),n.mapEntry!=null&&Object.hasOwnProperty.call(n,"mapEntry")&&L.uint32(56).bool(n.mapEntry),n.uninterpretedOption!=null&&n.uninterpretedOption.length)for(var U=0;U<n.uninterpretedOption.length;++U)h.google.protobuf.UninterpretedOption.encode(n.uninterpretedOption[U],L.uint32(7994).fork()).ldelim();return n[".google.api.resource"]!=null&&Object.hasOwnProperty.call(n,".google.api.resource")&&h.google.api.ResourceDescriptor.encode(n[".google.api.resource"],L.uint32(8426).fork()).ldelim(),L},be.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},be.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.MessageOptions;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.messageSetWireFormat=n.bool();break;case 2:X.noStandardDescriptorAccessor=n.bool();break;case 3:X.deprecated=n.bool();break;case 7:X.mapEntry=n.bool();break;case 999:X.uninterpretedOption&&X.uninterpretedOption.length||(X.uninterpretedOption=[]),X.uninterpretedOption.push(h.google.protobuf.UninterpretedOption.decode(n,n.uint32()));break;case 1053:X[".google.api.resource"]=h.google.api.ResourceDescriptor.decode(n,n.uint32());break;default:n.skipType(7&me)}}return X},be.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},be.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.messageSetWireFormat!=null&&n.hasOwnProperty("messageSetWireFormat")&&typeof n.messageSetWireFormat!="boolean")return"messageSetWireFormat: boolean expected";if(n.noStandardDescriptorAccessor!=null&&n.hasOwnProperty("noStandardDescriptorAccessor")&&typeof n.noStandardDescriptorAccessor!="boolean")return"noStandardDescriptorAccessor: boolean expected";if(n.deprecated!=null&&n.hasOwnProperty("deprecated")&&typeof n.deprecated!="boolean")return"deprecated: boolean expected";if(n.mapEntry!=null&&n.hasOwnProperty("mapEntry")&&typeof n.mapEntry!="boolean")return"mapEntry: boolean expected";if(n.uninterpretedOption!=null&&n.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(n.uninterpretedOption))return"uninterpretedOption: array expected";for(var L=0;L<n.uninterpretedOption.length;++L)if(U=h.google.protobuf.UninterpretedOption.verify(n.uninterpretedOption[L]))return"uninterpretedOption."+U}var U;return n[".google.api.resource"]!=null&&n.hasOwnProperty(".google.api.resource")&&(U=h.google.api.ResourceDescriptor.verify(n[".google.api.resource"]))?".google.api.resource."+U:null},be.fromObject=function(n){if(n instanceof h.google.protobuf.MessageOptions)return n;var L=new h.google.protobuf.MessageOptions;if(n.messageSetWireFormat!=null&&(L.messageSetWireFormat=!!n.messageSetWireFormat),n.noStandardDescriptorAccessor!=null&&(L.noStandardDescriptorAccessor=!!n.noStandardDescriptorAccessor),n.deprecated!=null&&(L.deprecated=!!n.deprecated),n.mapEntry!=null&&(L.mapEntry=!!n.mapEntry),n.uninterpretedOption){if(!Array.isArray(n.uninterpretedOption))throw TypeError(".google.protobuf.MessageOptions.uninterpretedOption: array expected");L.uninterpretedOption=[];for(var U=0;U<n.uninterpretedOption.length;++U){if(typeof n.uninterpretedOption[U]!="object")throw TypeError(".google.protobuf.MessageOptions.uninterpretedOption: object expected");L.uninterpretedOption[U]=h.google.protobuf.UninterpretedOption.fromObject(n.uninterpretedOption[U])}}if(n[".google.api.resource"]!=null){if(typeof n[".google.api.resource"]!="object")throw TypeError(".google.protobuf.MessageOptions..google.api.resource: object expected");L[".google.api.resource"]=h.google.api.ResourceDescriptor.fromObject(n[".google.api.resource"])}return L},be.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.uninterpretedOption=[]),L.defaults&&(U.messageSetWireFormat=!1,U.noStandardDescriptorAccessor=!1,U.deprecated=!1,U.mapEntry=!1,U[".google.api.resource"]=null),n.messageSetWireFormat!=null&&n.hasOwnProperty("messageSetWireFormat")&&(U.messageSetWireFormat=n.messageSetWireFormat),n.noStandardDescriptorAccessor!=null&&n.hasOwnProperty("noStandardDescriptorAccessor")&&(U.noStandardDescriptorAccessor=n.noStandardDescriptorAccessor),n.deprecated!=null&&n.hasOwnProperty("deprecated")&&(U.deprecated=n.deprecated),n.mapEntry!=null&&n.hasOwnProperty("mapEntry")&&(U.mapEntry=n.mapEntry),n.uninterpretedOption&&n.uninterpretedOption.length){U.uninterpretedOption=[];for(var X=0;X<n.uninterpretedOption.length;++X)U.uninterpretedOption[X]=h.google.protobuf.UninterpretedOption.toObject(n.uninterpretedOption[X],L)}return n[".google.api.resource"]!=null&&n.hasOwnProperty(".google.api.resource")&&(U[".google.api.resource"]=h.google.api.ResourceDescriptor.toObject(n[".google.api.resource"],L)),U},be.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},be),g.FieldOptions=(Oe.prototype.ctype=0,Oe.prototype.packed=!1,Oe.prototype.jstype=0,Oe.prototype.lazy=!1,Oe.prototype.deprecated=!1,Oe.prototype.weak=!1,Oe.prototype.uninterpretedOption=o.emptyArray,Oe.prototype[".google.api.fieldBehavior"]=o.emptyArray,Oe.prototype[".google.api.resourceReference"]=null,Oe.create=function(n){return new Oe(n)},Oe.encode=function(n,L){if(L=L||a.create(),n.ctype!=null&&Object.hasOwnProperty.call(n,"ctype")&&L.uint32(8).int32(n.ctype),n.packed!=null&&Object.hasOwnProperty.call(n,"packed")&&L.uint32(16).bool(n.packed),n.deprecated!=null&&Object.hasOwnProperty.call(n,"deprecated")&&L.uint32(24).bool(n.deprecated),n.lazy!=null&&Object.hasOwnProperty.call(n,"lazy")&&L.uint32(40).bool(n.lazy),n.jstype!=null&&Object.hasOwnProperty.call(n,"jstype")&&L.uint32(48).int32(n.jstype),n.weak!=null&&Object.hasOwnProperty.call(n,"weak")&&L.uint32(80).bool(n.weak),n.uninterpretedOption!=null&&n.uninterpretedOption.length)for(var U=0;U<n.uninterpretedOption.length;++U)h.google.protobuf.UninterpretedOption.encode(n.uninterpretedOption[U],L.uint32(7994).fork()).ldelim();if(n[".google.api.fieldBehavior"]!=null&&n[".google.api.fieldBehavior"].length){for(L.uint32(8418).fork(),U=0;U<n[".google.api.fieldBehavior"].length;++U)L.int32(n[".google.api.fieldBehavior"][U]);L.ldelim()}return n[".google.api.resourceReference"]!=null&&Object.hasOwnProperty.call(n,".google.api.resourceReference")&&h.google.api.ResourceReference.encode(n[".google.api.resourceReference"],L.uint32(8442).fork()).ldelim(),L},Oe.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},Oe.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.FieldOptions;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.ctype=n.int32();break;case 2:X.packed=n.bool();break;case 6:X.jstype=n.int32();break;case 5:X.lazy=n.bool();break;case 3:X.deprecated=n.bool();break;case 10:X.weak=n.bool();break;case 999:X.uninterpretedOption&&X.uninterpretedOption.length||(X.uninterpretedOption=[]),X.uninterpretedOption.push(h.google.protobuf.UninterpretedOption.decode(n,n.uint32()));break;case 1052:if(X[".google.api.fieldBehavior"]&&X[".google.api.fieldBehavior"].length||(X[".google.api.fieldBehavior"]=[]),(7&me)==2)for(var Ie=n.uint32()+n.pos;n.pos<Ie;)X[".google.api.fieldBehavior"].push(n.int32());else X[".google.api.fieldBehavior"].push(n.int32());break;case 1055:X[".google.api.resourceReference"]=h.google.api.ResourceReference.decode(n,n.uint32());break;default:n.skipType(7&me)}}return X},Oe.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},Oe.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.ctype!=null&&n.hasOwnProperty("ctype"))switch(n.ctype){default:return"ctype: enum value expected";case 0:case 1:case 2:}if(n.packed!=null&&n.hasOwnProperty("packed")&&typeof n.packed!="boolean")return"packed: boolean expected";if(n.jstype!=null&&n.hasOwnProperty("jstype"))switch(n.jstype){default:return"jstype: enum value expected";case 0:case 1:case 2:}if(n.lazy!=null&&n.hasOwnProperty("lazy")&&typeof n.lazy!="boolean")return"lazy: boolean expected";if(n.deprecated!=null&&n.hasOwnProperty("deprecated")&&typeof n.deprecated!="boolean")return"deprecated: boolean expected";if(n.weak!=null&&n.hasOwnProperty("weak")&&typeof n.weak!="boolean")return"weak: boolean expected";if(n.uninterpretedOption!=null&&n.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(n.uninterpretedOption))return"uninterpretedOption: array expected";for(var L=0;L<n.uninterpretedOption.length;++L)if(U=h.google.protobuf.UninterpretedOption.verify(n.uninterpretedOption[L]))return"uninterpretedOption."+U}if(n[".google.api.fieldBehavior"]!=null&&n.hasOwnProperty(".google.api.fieldBehavior")){if(!Array.isArray(n[".google.api.fieldBehavior"]))return".google.api.fieldBehavior: array expected";for(L=0;L<n[".google.api.fieldBehavior"].length;++L)switch(n[".google.api.fieldBehavior"][L]){default:return".google.api.fieldBehavior: enum value[] expected";case 0:case 1:case 2:case 3:case 4:case 5:}}var U;return n[".google.api.resourceReference"]!=null&&n.hasOwnProperty(".google.api.resourceReference")&&(U=h.google.api.ResourceReference.verify(n[".google.api.resourceReference"]))?".google.api.resourceReference."+U:null},Oe.fromObject=function(n){if(n instanceof h.google.protobuf.FieldOptions)return n;var L=new h.google.protobuf.FieldOptions;switch(n.ctype){case"STRING":case 0:L.ctype=0;break;case"CORD":case 1:L.ctype=1;break;case"STRING_PIECE":case 2:L.ctype=2}switch(n.packed!=null&&(L.packed=!!n.packed),n.jstype){case"JS_NORMAL":case 0:L.jstype=0;break;case"JS_STRING":case 1:L.jstype=1;break;case"JS_NUMBER":case 2:L.jstype=2}if(n.lazy!=null&&(L.lazy=!!n.lazy),n.deprecated!=null&&(L.deprecated=!!n.deprecated),n.weak!=null&&(L.weak=!!n.weak),n.uninterpretedOption){if(!Array.isArray(n.uninterpretedOption))throw TypeError(".google.protobuf.FieldOptions.uninterpretedOption: array expected");L.uninterpretedOption=[];for(var U=0;U<n.uninterpretedOption.length;++U){if(typeof n.uninterpretedOption[U]!="object")throw TypeError(".google.protobuf.FieldOptions.uninterpretedOption: object expected");L.uninterpretedOption[U]=h.google.protobuf.UninterpretedOption.fromObject(n.uninterpretedOption[U])}}if(n[".google.api.fieldBehavior"]){if(!Array.isArray(n[".google.api.fieldBehavior"]))throw TypeError(".google.protobuf.FieldOptions..google.api.fieldBehavior: array expected");for(L[".google.api.fieldBehavior"]=[],U=0;U<n[".google.api.fieldBehavior"].length;++U)switch(n[".google.api.fieldBehavior"][U]){default:case"FIELD_BEHAVIOR_UNSPECIFIED":case 0:L[".google.api.fieldBehavior"][U]=0;break;case"OPTIONAL":case 1:L[".google.api.fieldBehavior"][U]=1;break;case"REQUIRED":case 2:L[".google.api.fieldBehavior"][U]=2;break;case"OUTPUT_ONLY":case 3:L[".google.api.fieldBehavior"][U]=3;break;case"INPUT_ONLY":case 4:L[".google.api.fieldBehavior"][U]=4;break;case"IMMUTABLE":case 5:L[".google.api.fieldBehavior"][U]=5}}if(n[".google.api.resourceReference"]!=null){if(typeof n[".google.api.resourceReference"]!="object")throw TypeError(".google.protobuf.FieldOptions..google.api.resourceReference: object expected");L[".google.api.resourceReference"]=h.google.api.ResourceReference.fromObject(n[".google.api.resourceReference"])}return L},Oe.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.uninterpretedOption=[],U[".google.api.fieldBehavior"]=[]),L.defaults&&(U.ctype=L.enums===String?"STRING":0,U.packed=!1,U.deprecated=!1,U.lazy=!1,U.jstype=L.enums===String?"JS_NORMAL":0,U.weak=!1,U[".google.api.resourceReference"]=null),n.ctype!=null&&n.hasOwnProperty("ctype")&&(U.ctype=L.enums===String?h.google.protobuf.FieldOptions.CType[n.ctype]:n.ctype),n.packed!=null&&n.hasOwnProperty("packed")&&(U.packed=n.packed),n.deprecated!=null&&n.hasOwnProperty("deprecated")&&(U.deprecated=n.deprecated),n.lazy!=null&&n.hasOwnProperty("lazy")&&(U.lazy=n.lazy),n.jstype!=null&&n.hasOwnProperty("jstype")&&(U.jstype=L.enums===String?h.google.protobuf.FieldOptions.JSType[n.jstype]:n.jstype),n.weak!=null&&n.hasOwnProperty("weak")&&(U.weak=n.weak),n.uninterpretedOption&&n.uninterpretedOption.length){U.uninterpretedOption=[];for(var X=0;X<n.uninterpretedOption.length;++X)U.uninterpretedOption[X]=h.google.protobuf.UninterpretedOption.toObject(n.uninterpretedOption[X],L)}if(n[".google.api.fieldBehavior"]&&n[".google.api.fieldBehavior"].length)for(U[".google.api.fieldBehavior"]=[],X=0;X<n[".google.api.fieldBehavior"].length;++X)U[".google.api.fieldBehavior"][X]=L.enums===String?h.google.api.FieldBehavior[n[".google.api.fieldBehavior"][X]]:n[".google.api.fieldBehavior"][X];return n[".google.api.resourceReference"]!=null&&n.hasOwnProperty(".google.api.resourceReference")&&(U[".google.api.resourceReference"]=h.google.api.ResourceReference.toObject(n[".google.api.resourceReference"],L)),U},Oe.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Oe.CType=(s={},(p=Object.create(s))[s[0]="STRING"]=0,p[s[1]="CORD"]=1,p[s[2]="STRING_PIECE"]=2,p),Oe.JSType=(s={},(p=Object.create(s))[s[0]="JS_NORMAL"]=0,p[s[1]="JS_STRING"]=1,p[s[2]="JS_NUMBER"]=2,p),Oe),g.OneofOptions=(ge.prototype.uninterpretedOption=o.emptyArray,ge.create=function(n){return new ge(n)},ge.encode=function(n,L){if(L=L||a.create(),n.uninterpretedOption!=null&&n.uninterpretedOption.length)for(var U=0;U<n.uninterpretedOption.length;++U)h.google.protobuf.UninterpretedOption.encode(n.uninterpretedOption[U],L.uint32(7994).fork()).ldelim();return L},ge.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},ge.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.OneofOptions;n.pos<U;){var me=n.uint32();me>>>3==999?(X.uninterpretedOption&&X.uninterpretedOption.length||(X.uninterpretedOption=[]),X.uninterpretedOption.push(h.google.protobuf.UninterpretedOption.decode(n,n.uint32()))):n.skipType(7&me)}return X},ge.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},ge.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.uninterpretedOption!=null&&n.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(n.uninterpretedOption))return"uninterpretedOption: array expected";for(var L=0;L<n.uninterpretedOption.length;++L){var U=h.google.protobuf.UninterpretedOption.verify(n.uninterpretedOption[L]);if(U)return"uninterpretedOption."+U}}return null},ge.fromObject=function(n){if(n instanceof h.google.protobuf.OneofOptions)return n;var L=new h.google.protobuf.OneofOptions;if(n.uninterpretedOption){if(!Array.isArray(n.uninterpretedOption))throw TypeError(".google.protobuf.OneofOptions.uninterpretedOption: array expected");L.uninterpretedOption=[];for(var U=0;U<n.uninterpretedOption.length;++U){if(typeof n.uninterpretedOption[U]!="object")throw TypeError(".google.protobuf.OneofOptions.uninterpretedOption: object expected");L.uninterpretedOption[U]=h.google.protobuf.UninterpretedOption.fromObject(n.uninterpretedOption[U])}}return L},ge.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.uninterpretedOption=[]),n.uninterpretedOption&&n.uninterpretedOption.length){U.uninterpretedOption=[];for(var X=0;X<n.uninterpretedOption.length;++X)U.uninterpretedOption[X]=h.google.protobuf.UninterpretedOption.toObject(n.uninterpretedOption[X],L)}return U},ge.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ge),g.EnumOptions=(J.prototype.allowAlias=!1,J.prototype.deprecated=!1,J.prototype.uninterpretedOption=o.emptyArray,J.create=function(n){return new J(n)},J.encode=function(n,L){if(L=L||a.create(),n.allowAlias!=null&&Object.hasOwnProperty.call(n,"allowAlias")&&L.uint32(16).bool(n.allowAlias),n.deprecated!=null&&Object.hasOwnProperty.call(n,"deprecated")&&L.uint32(24).bool(n.deprecated),n.uninterpretedOption!=null&&n.uninterpretedOption.length)for(var U=0;U<n.uninterpretedOption.length;++U)h.google.protobuf.UninterpretedOption.encode(n.uninterpretedOption[U],L.uint32(7994).fork()).ldelim();return L},J.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},J.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.EnumOptions;n.pos<U;){var me=n.uint32();switch(me>>>3){case 2:X.allowAlias=n.bool();break;case 3:X.deprecated=n.bool();break;case 999:X.uninterpretedOption&&X.uninterpretedOption.length||(X.uninterpretedOption=[]),X.uninterpretedOption.push(h.google.protobuf.UninterpretedOption.decode(n,n.uint32()));break;default:n.skipType(7&me)}}return X},J.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},J.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.allowAlias!=null&&n.hasOwnProperty("allowAlias")&&typeof n.allowAlias!="boolean")return"allowAlias: boolean expected";if(n.deprecated!=null&&n.hasOwnProperty("deprecated")&&typeof n.deprecated!="boolean")return"deprecated: boolean expected";if(n.uninterpretedOption!=null&&n.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(n.uninterpretedOption))return"uninterpretedOption: array expected";for(var L=0;L<n.uninterpretedOption.length;++L){var U=h.google.protobuf.UninterpretedOption.verify(n.uninterpretedOption[L]);if(U)return"uninterpretedOption."+U}}return null},J.fromObject=function(n){if(n instanceof h.google.protobuf.EnumOptions)return n;var L=new h.google.protobuf.EnumOptions;if(n.allowAlias!=null&&(L.allowAlias=!!n.allowAlias),n.deprecated!=null&&(L.deprecated=!!n.deprecated),n.uninterpretedOption){if(!Array.isArray(n.uninterpretedOption))throw TypeError(".google.protobuf.EnumOptions.uninterpretedOption: array expected");L.uninterpretedOption=[];for(var U=0;U<n.uninterpretedOption.length;++U){if(typeof n.uninterpretedOption[U]!="object")throw TypeError(".google.protobuf.EnumOptions.uninterpretedOption: object expected");L.uninterpretedOption[U]=h.google.protobuf.UninterpretedOption.fromObject(n.uninterpretedOption[U])}}return L},J.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.uninterpretedOption=[]),L.defaults&&(U.allowAlias=!1,U.deprecated=!1),n.allowAlias!=null&&n.hasOwnProperty("allowAlias")&&(U.allowAlias=n.allowAlias),n.deprecated!=null&&n.hasOwnProperty("deprecated")&&(U.deprecated=n.deprecated),n.uninterpretedOption&&n.uninterpretedOption.length){U.uninterpretedOption=[];for(var X=0;X<n.uninterpretedOption.length;++X)U.uninterpretedOption[X]=h.google.protobuf.UninterpretedOption.toObject(n.uninterpretedOption[X],L)}return U},J.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},J),g.EnumValueOptions=(c.prototype.deprecated=!1,c.prototype.uninterpretedOption=o.emptyArray,c.create=function(n){return new c(n)},c.encode=function(n,L){if(L=L||a.create(),n.deprecated!=null&&Object.hasOwnProperty.call(n,"deprecated")&&L.uint32(8).bool(n.deprecated),n.uninterpretedOption!=null&&n.uninterpretedOption.length)for(var U=0;U<n.uninterpretedOption.length;++U)h.google.protobuf.UninterpretedOption.encode(n.uninterpretedOption[U],L.uint32(7994).fork()).ldelim();return L},c.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},c.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.EnumValueOptions;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.deprecated=n.bool();break;case 999:X.uninterpretedOption&&X.uninterpretedOption.length||(X.uninterpretedOption=[]),X.uninterpretedOption.push(h.google.protobuf.UninterpretedOption.decode(n,n.uint32()));break;default:n.skipType(7&me)}}return X},c.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},c.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.deprecated!=null&&n.hasOwnProperty("deprecated")&&typeof n.deprecated!="boolean")return"deprecated: boolean expected";if(n.uninterpretedOption!=null&&n.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(n.uninterpretedOption))return"uninterpretedOption: array expected";for(var L=0;L<n.uninterpretedOption.length;++L){var U=h.google.protobuf.UninterpretedOption.verify(n.uninterpretedOption[L]);if(U)return"uninterpretedOption."+U}}return null},c.fromObject=function(n){if(n instanceof h.google.protobuf.EnumValueOptions)return n;var L=new h.google.protobuf.EnumValueOptions;if(n.deprecated!=null&&(L.deprecated=!!n.deprecated),n.uninterpretedOption){if(!Array.isArray(n.uninterpretedOption))throw TypeError(".google.protobuf.EnumValueOptions.uninterpretedOption: array expected");L.uninterpretedOption=[];for(var U=0;U<n.uninterpretedOption.length;++U){if(typeof n.uninterpretedOption[U]!="object")throw TypeError(".google.protobuf.EnumValueOptions.uninterpretedOption: object expected");L.uninterpretedOption[U]=h.google.protobuf.UninterpretedOption.fromObject(n.uninterpretedOption[U])}}return L},c.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.uninterpretedOption=[]),L.defaults&&(U.deprecated=!1),n.deprecated!=null&&n.hasOwnProperty("deprecated")&&(U.deprecated=n.deprecated),n.uninterpretedOption&&n.uninterpretedOption.length){U.uninterpretedOption=[];for(var X=0;X<n.uninterpretedOption.length;++X)U.uninterpretedOption[X]=h.google.protobuf.UninterpretedOption.toObject(n.uninterpretedOption[X],L)}return U},c.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},c),g.ServiceOptions=(N.prototype.deprecated=!1,N.prototype.uninterpretedOption=o.emptyArray,N.prototype[".google.api.defaultHost"]="",N.prototype[".google.api.oauthScopes"]="",N.create=function(n){return new N(n)},N.encode=function(n,L){if(L=L||a.create(),n.deprecated!=null&&Object.hasOwnProperty.call(n,"deprecated")&&L.uint32(264).bool(n.deprecated),n.uninterpretedOption!=null&&n.uninterpretedOption.length)for(var U=0;U<n.uninterpretedOption.length;++U)h.google.protobuf.UninterpretedOption.encode(n.uninterpretedOption[U],L.uint32(7994).fork()).ldelim();return n[".google.api.defaultHost"]!=null&&Object.hasOwnProperty.call(n,".google.api.defaultHost")&&L.uint32(8394).string(n[".google.api.defaultHost"]),n[".google.api.oauthScopes"]!=null&&Object.hasOwnProperty.call(n,".google.api.oauthScopes")&&L.uint32(8402).string(n[".google.api.oauthScopes"]),L},N.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},N.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.ServiceOptions;n.pos<U;){var me=n.uint32();switch(me>>>3){case 33:X.deprecated=n.bool();break;case 999:X.uninterpretedOption&&X.uninterpretedOption.length||(X.uninterpretedOption=[]),X.uninterpretedOption.push(h.google.protobuf.UninterpretedOption.decode(n,n.uint32()));break;case 1049:X[".google.api.defaultHost"]=n.string();break;case 1050:X[".google.api.oauthScopes"]=n.string();break;default:n.skipType(7&me)}}return X},N.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},N.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.deprecated!=null&&n.hasOwnProperty("deprecated")&&typeof n.deprecated!="boolean")return"deprecated: boolean expected";if(n.uninterpretedOption!=null&&n.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(n.uninterpretedOption))return"uninterpretedOption: array expected";for(var L=0;L<n.uninterpretedOption.length;++L){var U=h.google.protobuf.UninterpretedOption.verify(n.uninterpretedOption[L]);if(U)return"uninterpretedOption."+U}}return n[".google.api.defaultHost"]!=null&&n.hasOwnProperty(".google.api.defaultHost")&&!o.isString(n[".google.api.defaultHost"])?".google.api.defaultHost: string expected":n[".google.api.oauthScopes"]!=null&&n.hasOwnProperty(".google.api.oauthScopes")&&!o.isString(n[".google.api.oauthScopes"])?".google.api.oauthScopes: string expected":null},N.fromObject=function(n){if(n instanceof h.google.protobuf.ServiceOptions)return n;var L=new h.google.protobuf.ServiceOptions;if(n.deprecated!=null&&(L.deprecated=!!n.deprecated),n.uninterpretedOption){if(!Array.isArray(n.uninterpretedOption))throw TypeError(".google.protobuf.ServiceOptions.uninterpretedOption: array expected");L.uninterpretedOption=[];for(var U=0;U<n.uninterpretedOption.length;++U){if(typeof n.uninterpretedOption[U]!="object")throw TypeError(".google.protobuf.ServiceOptions.uninterpretedOption: object expected");L.uninterpretedOption[U]=h.google.protobuf.UninterpretedOption.fromObject(n.uninterpretedOption[U])}}return n[".google.api.defaultHost"]!=null&&(L[".google.api.defaultHost"]=String(n[".google.api.defaultHost"])),n[".google.api.oauthScopes"]!=null&&(L[".google.api.oauthScopes"]=String(n[".google.api.oauthScopes"])),L},N.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.uninterpretedOption=[]),L.defaults&&(U.deprecated=!1,U[".google.api.defaultHost"]="",U[".google.api.oauthScopes"]=""),n.deprecated!=null&&n.hasOwnProperty("deprecated")&&(U.deprecated=n.deprecated),n.uninterpretedOption&&n.uninterpretedOption.length){U.uninterpretedOption=[];for(var X=0;X<n.uninterpretedOption.length;++X)U.uninterpretedOption[X]=h.google.protobuf.UninterpretedOption.toObject(n.uninterpretedOption[X],L)}return n[".google.api.defaultHost"]!=null&&n.hasOwnProperty(".google.api.defaultHost")&&(U[".google.api.defaultHost"]=n[".google.api.defaultHost"]),n[".google.api.oauthScopes"]!=null&&n.hasOwnProperty(".google.api.oauthScopes")&&(U[".google.api.oauthScopes"]=n[".google.api.oauthScopes"]),U},N.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},N),g.MethodOptions=(A.prototype.deprecated=!1,A.prototype.idempotencyLevel=0,A.prototype.uninterpretedOption=o.emptyArray,A.prototype[".google.api.http"]=null,A.prototype[".google.api.methodSignature"]=o.emptyArray,A.create=function(n){return new A(n)},A.encode=function(n,L){if(L=L||a.create(),n.deprecated!=null&&Object.hasOwnProperty.call(n,"deprecated")&&L.uint32(264).bool(n.deprecated),n.idempotencyLevel!=null&&Object.hasOwnProperty.call(n,"idempotencyLevel")&&L.uint32(272).int32(n.idempotencyLevel),n.uninterpretedOption!=null&&n.uninterpretedOption.length)for(var U=0;U<n.uninterpretedOption.length;++U)h.google.protobuf.UninterpretedOption.encode(n.uninterpretedOption[U],L.uint32(7994).fork()).ldelim();if(n[".google.api.methodSignature"]!=null&&n[".google.api.methodSignature"].length)for(U=0;U<n[".google.api.methodSignature"].length;++U)L.uint32(8410).string(n[".google.api.methodSignature"][U]);return n[".google.api.http"]!=null&&Object.hasOwnProperty.call(n,".google.api.http")&&h.google.api.HttpRule.encode(n[".google.api.http"],L.uint32(578365826).fork()).ldelim(),L},A.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},A.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.MethodOptions;n.pos<U;){var me=n.uint32();switch(me>>>3){case 33:X.deprecated=n.bool();break;case 34:X.idempotencyLevel=n.int32();break;case 999:X.uninterpretedOption&&X.uninterpretedOption.length||(X.uninterpretedOption=[]),X.uninterpretedOption.push(h.google.protobuf.UninterpretedOption.decode(n,n.uint32()));break;case 72295728:X[".google.api.http"]=h.google.api.HttpRule.decode(n,n.uint32());break;case 1051:X[".google.api.methodSignature"]&&X[".google.api.methodSignature"].length||(X[".google.api.methodSignature"]=[]),X[".google.api.methodSignature"].push(n.string());break;default:n.skipType(7&me)}}return X},A.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},A.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.deprecated!=null&&n.hasOwnProperty("deprecated")&&typeof n.deprecated!="boolean")return"deprecated: boolean expected";if(n.idempotencyLevel!=null&&n.hasOwnProperty("idempotencyLevel"))switch(n.idempotencyLevel){default:return"idempotencyLevel: enum value expected";case 0:case 1:case 2:}if(n.uninterpretedOption!=null&&n.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(n.uninterpretedOption))return"uninterpretedOption: array expected";for(var L=0;L<n.uninterpretedOption.length;++L)if(U=h.google.protobuf.UninterpretedOption.verify(n.uninterpretedOption[L]))return"uninterpretedOption."+U}var U;if(n[".google.api.http"]!=null&&n.hasOwnProperty(".google.api.http")&&(U=h.google.api.HttpRule.verify(n[".google.api.http"])))return".google.api.http."+U;if(n[".google.api.methodSignature"]!=null&&n.hasOwnProperty(".google.api.methodSignature")){if(!Array.isArray(n[".google.api.methodSignature"]))return".google.api.methodSignature: array expected";for(L=0;L<n[".google.api.methodSignature"].length;++L)if(!o.isString(n[".google.api.methodSignature"][L]))return".google.api.methodSignature: string[] expected"}return null},A.fromObject=function(n){if(n instanceof h.google.protobuf.MethodOptions)return n;var L=new h.google.protobuf.MethodOptions;switch(n.deprecated!=null&&(L.deprecated=!!n.deprecated),n.idempotencyLevel){case"IDEMPOTENCY_UNKNOWN":case 0:L.idempotencyLevel=0;break;case"NO_SIDE_EFFECTS":case 1:L.idempotencyLevel=1;break;case"IDEMPOTENT":case 2:L.idempotencyLevel=2}if(n.uninterpretedOption){if(!Array.isArray(n.uninterpretedOption))throw TypeError(".google.protobuf.MethodOptions.uninterpretedOption: array expected");L.uninterpretedOption=[];for(var U=0;U<n.uninterpretedOption.length;++U){if(typeof n.uninterpretedOption[U]!="object")throw TypeError(".google.protobuf.MethodOptions.uninterpretedOption: object expected");L.uninterpretedOption[U]=h.google.protobuf.UninterpretedOption.fromObject(n.uninterpretedOption[U])}}if(n[".google.api.http"]!=null){if(typeof n[".google.api.http"]!="object")throw TypeError(".google.protobuf.MethodOptions..google.api.http: object expected");L[".google.api.http"]=h.google.api.HttpRule.fromObject(n[".google.api.http"])}if(n[".google.api.methodSignature"]){if(!Array.isArray(n[".google.api.methodSignature"]))throw TypeError(".google.protobuf.MethodOptions..google.api.methodSignature: array expected");for(L[".google.api.methodSignature"]=[],U=0;U<n[".google.api.methodSignature"].length;++U)L[".google.api.methodSignature"][U]=String(n[".google.api.methodSignature"][U])}return L},A.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.uninterpretedOption=[],U[".google.api.methodSignature"]=[]),L.defaults&&(U.deprecated=!1,U.idempotencyLevel=L.enums===String?"IDEMPOTENCY_UNKNOWN":0,U[".google.api.http"]=null),n.deprecated!=null&&n.hasOwnProperty("deprecated")&&(U.deprecated=n.deprecated),n.idempotencyLevel!=null&&n.hasOwnProperty("idempotencyLevel")&&(U.idempotencyLevel=L.enums===String?h.google.protobuf.MethodOptions.IdempotencyLevel[n.idempotencyLevel]:n.idempotencyLevel),n.uninterpretedOption&&n.uninterpretedOption.length){U.uninterpretedOption=[];for(var X=0;X<n.uninterpretedOption.length;++X)U.uninterpretedOption[X]=h.google.protobuf.UninterpretedOption.toObject(n.uninterpretedOption[X],L)}if(n[".google.api.methodSignature"]&&n[".google.api.methodSignature"].length)for(U[".google.api.methodSignature"]=[],X=0;X<n[".google.api.methodSignature"].length;++X)U[".google.api.methodSignature"][X]=n[".google.api.methodSignature"][X];return n[".google.api.http"]!=null&&n.hasOwnProperty(".google.api.http")&&(U[".google.api.http"]=h.google.api.HttpRule.toObject(n[".google.api.http"],L)),U},A.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},A.IdempotencyLevel=(s={},(p=Object.create(s))[s[0]="IDEMPOTENCY_UNKNOWN"]=0,p[s[1]="NO_SIDE_EFFECTS"]=1,p[s[2]="IDEMPOTENT"]=2,p),A),g.UninterpretedOption=(V.prototype.name=o.emptyArray,V.prototype.identifierValue="",V.prototype.positiveIntValue=o.Long?o.Long.fromBits(0,0,!0):0,V.prototype.negativeIntValue=o.Long?o.Long.fromBits(0,0,!1):0,V.prototype.doubleValue=0,V.prototype.stringValue=o.newBuffer([]),V.prototype.aggregateValue="",V.create=function(n){return new V(n)},V.encode=function(n,L){if(L=L||a.create(),n.name!=null&&n.name.length)for(var U=0;U<n.name.length;++U)h.google.protobuf.UninterpretedOption.NamePart.encode(n.name[U],L.uint32(18).fork()).ldelim();return n.identifierValue!=null&&Object.hasOwnProperty.call(n,"identifierValue")&&L.uint32(26).string(n.identifierValue),n.positiveIntValue!=null&&Object.hasOwnProperty.call(n,"positiveIntValue")&&L.uint32(32).uint64(n.positiveIntValue),n.negativeIntValue!=null&&Object.hasOwnProperty.call(n,"negativeIntValue")&&L.uint32(40).int64(n.negativeIntValue),n.doubleValue!=null&&Object.hasOwnProperty.call(n,"doubleValue")&&L.uint32(49).double(n.doubleValue),n.stringValue!=null&&Object.hasOwnProperty.call(n,"stringValue")&&L.uint32(58).bytes(n.stringValue),n.aggregateValue!=null&&Object.hasOwnProperty.call(n,"aggregateValue")&&L.uint32(66).string(n.aggregateValue),L},V.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},V.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.UninterpretedOption;n.pos<U;){var me=n.uint32();switch(me>>>3){case 2:X.name&&X.name.length||(X.name=[]),X.name.push(h.google.protobuf.UninterpretedOption.NamePart.decode(n,n.uint32()));break;case 3:X.identifierValue=n.string();break;case 4:X.positiveIntValue=n.uint64();break;case 5:X.negativeIntValue=n.int64();break;case 6:X.doubleValue=n.double();break;case 7:X.stringValue=n.bytes();break;case 8:X.aggregateValue=n.string();break;default:n.skipType(7&me)}}return X},V.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},V.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.name!=null&&n.hasOwnProperty("name")){if(!Array.isArray(n.name))return"name: array expected";for(var L=0;L<n.name.length;++L){var U=h.google.protobuf.UninterpretedOption.NamePart.verify(n.name[L]);if(U)return"name."+U}}return n.identifierValue!=null&&n.hasOwnProperty("identifierValue")&&!o.isString(n.identifierValue)?"identifierValue: string expected":n.positiveIntValue!=null&&n.hasOwnProperty("positiveIntValue")&&!(o.isInteger(n.positiveIntValue)||n.positiveIntValue&&o.isInteger(n.positiveIntValue.low)&&o.isInteger(n.positiveIntValue.high))?"positiveIntValue: integer|Long expected":n.negativeIntValue!=null&&n.hasOwnProperty("negativeIntValue")&&!(o.isInteger(n.negativeIntValue)||n.negativeIntValue&&o.isInteger(n.negativeIntValue.low)&&o.isInteger(n.negativeIntValue.high))?"negativeIntValue: integer|Long expected":n.doubleValue!=null&&n.hasOwnProperty("doubleValue")&&typeof n.doubleValue!="number"?"doubleValue: number expected":n.stringValue!=null&&n.hasOwnProperty("stringValue")&&!(n.stringValue&&typeof n.stringValue.length=="number"||o.isString(n.stringValue))?"stringValue: buffer expected":n.aggregateValue!=null&&n.hasOwnProperty("aggregateValue")&&!o.isString(n.aggregateValue)?"aggregateValue: string expected":null},V.fromObject=function(n){if(n instanceof h.google.protobuf.UninterpretedOption)return n;var L=new h.google.protobuf.UninterpretedOption;if(n.name){if(!Array.isArray(n.name))throw TypeError(".google.protobuf.UninterpretedOption.name: array expected");L.name=[];for(var U=0;U<n.name.length;++U){if(typeof n.name[U]!="object")throw TypeError(".google.protobuf.UninterpretedOption.name: object expected");L.name[U]=h.google.protobuf.UninterpretedOption.NamePart.fromObject(n.name[U])}}return n.identifierValue!=null&&(L.identifierValue=String(n.identifierValue)),n.positiveIntValue!=null&&(o.Long?(L.positiveIntValue=o.Long.fromValue(n.positiveIntValue)).unsigned=!0:typeof n.positiveIntValue=="string"?L.positiveIntValue=parseInt(n.positiveIntValue,10):typeof n.positiveIntValue=="number"?L.positiveIntValue=n.positiveIntValue:typeof n.positiveIntValue=="object"&&(L.positiveIntValue=new o.LongBits(n.positiveIntValue.low>>>0,n.positiveIntValue.high>>>0).toNumber(!0))),n.negativeIntValue!=null&&(o.Long?(L.negativeIntValue=o.Long.fromValue(n.negativeIntValue)).unsigned=!1:typeof n.negativeIntValue=="string"?L.negativeIntValue=parseInt(n.negativeIntValue,10):typeof n.negativeIntValue=="number"?L.negativeIntValue=n.negativeIntValue:typeof n.negativeIntValue=="object"&&(L.negativeIntValue=new o.LongBits(n.negativeIntValue.low>>>0,n.negativeIntValue.high>>>0).toNumber())),n.doubleValue!=null&&(L.doubleValue=Number(n.doubleValue)),n.stringValue!=null&&(typeof n.stringValue=="string"?o.base64.decode(n.stringValue,L.stringValue=o.newBuffer(o.base64.length(n.stringValue)),0):n.stringValue.length&&(L.stringValue=n.stringValue)),n.aggregateValue!=null&&(L.aggregateValue=String(n.aggregateValue)),L},V.toObject=function(n,L){var U,X={};if(((L=L||{}).arrays||L.defaults)&&(X.name=[]),L.defaults&&(X.identifierValue="",o.Long?(U=new o.Long(0,0,!0),X.positiveIntValue=L.longs===String?U.toString():L.longs===Number?U.toNumber():U):X.positiveIntValue=L.longs===String?"0":0,o.Long?(U=new o.Long(0,0,!1),X.negativeIntValue=L.longs===String?U.toString():L.longs===Number?U.toNumber():U):X.negativeIntValue=L.longs===String?"0":0,X.doubleValue=0,L.bytes===String?X.stringValue="":(X.stringValue=[],L.bytes!==Array&&(X.stringValue=o.newBuffer(X.stringValue))),X.aggregateValue=""),n.name&&n.name.length){X.name=[];for(var me=0;me<n.name.length;++me)X.name[me]=h.google.protobuf.UninterpretedOption.NamePart.toObject(n.name[me],L)}return n.identifierValue!=null&&n.hasOwnProperty("identifierValue")&&(X.identifierValue=n.identifierValue),n.positiveIntValue!=null&&n.hasOwnProperty("positiveIntValue")&&(typeof n.positiveIntValue=="number"?X.positiveIntValue=L.longs===String?String(n.positiveIntValue):n.positiveIntValue:X.positiveIntValue=L.longs===String?o.Long.prototype.toString.call(n.positiveIntValue):L.longs===Number?new o.LongBits(n.positiveIntValue.low>>>0,n.positiveIntValue.high>>>0).toNumber(!0):n.positiveIntValue),n.negativeIntValue!=null&&n.hasOwnProperty("negativeIntValue")&&(typeof n.negativeIntValue=="number"?X.negativeIntValue=L.longs===String?String(n.negativeIntValue):n.negativeIntValue:X.negativeIntValue=L.longs===String?o.Long.prototype.toString.call(n.negativeIntValue):L.longs===Number?new o.LongBits(n.negativeIntValue.low>>>0,n.negativeIntValue.high>>>0).toNumber():n.negativeIntValue),n.doubleValue!=null&&n.hasOwnProperty("doubleValue")&&(X.doubleValue=L.json&&!isFinite(n.doubleValue)?String(n.doubleValue):n.doubleValue),n.stringValue!=null&&n.hasOwnProperty("stringValue")&&(X.stringValue=L.bytes===String?o.base64.encode(n.stringValue,0,n.stringValue.length):L.bytes===Array?Array.prototype.slice.call(n.stringValue):n.stringValue),n.aggregateValue!=null&&n.hasOwnProperty("aggregateValue")&&(X.aggregateValue=n.aggregateValue),X},V.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},V.NamePart=(ne.prototype.namePart="",ne.prototype.isExtension=!1,ne.create=function(n){return new ne(n)},ne.encode=function(n,L){return(L=L||a.create()).uint32(10).string(n.namePart),L.uint32(16).bool(n.isExtension),L},ne.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},ne.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.UninterpretedOption.NamePart;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.namePart=n.string();break;case 2:X.isExtension=n.bool();break;default:n.skipType(7&me)}}if(!X.hasOwnProperty("namePart"))throw o.ProtocolError("missing required 'namePart'",{instance:X});if(X.hasOwnProperty("isExtension"))return X;throw o.ProtocolError("missing required 'isExtension'",{instance:X})},ne.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},ne.verify=function(n){return typeof n!="object"||n===null?"object expected":o.isString(n.namePart)?typeof n.isExtension!="boolean"?"isExtension: boolean expected":null:"namePart: string expected"},ne.fromObject=function(n){var L;return n instanceof h.google.protobuf.UninterpretedOption.NamePart?n:(L=new h.google.protobuf.UninterpretedOption.NamePart,n.namePart!=null&&(L.namePart=String(n.namePart)),n.isExtension!=null&&(L.isExtension=!!n.isExtension),L)},ne.toObject=function(n,L){var U={};return(L=L||{}).defaults&&(U.namePart="",U.isExtension=!1),n.namePart!=null&&n.hasOwnProperty("namePart")&&(U.namePart=n.namePart),n.isExtension!=null&&n.hasOwnProperty("isExtension")&&(U.isExtension=n.isExtension),U},ne.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ne),V),g.SourceCodeInfo=(ce.prototype.location=o.emptyArray,ce.create=function(n){return new ce(n)},ce.encode=function(n,L){if(L=L||a.create(),n.location!=null&&n.location.length)for(var U=0;U<n.location.length;++U)h.google.protobuf.SourceCodeInfo.Location.encode(n.location[U],L.uint32(10).fork()).ldelim();return L},ce.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},ce.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.SourceCodeInfo;n.pos<U;){var me=n.uint32();me>>>3==1?(X.location&&X.location.length||(X.location=[]),X.location.push(h.google.protobuf.SourceCodeInfo.Location.decode(n,n.uint32()))):n.skipType(7&me)}return X},ce.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},ce.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.location!=null&&n.hasOwnProperty("location")){if(!Array.isArray(n.location))return"location: array expected";for(var L=0;L<n.location.length;++L){var U=h.google.protobuf.SourceCodeInfo.Location.verify(n.location[L]);if(U)return"location."+U}}return null},ce.fromObject=function(n){if(n instanceof h.google.protobuf.SourceCodeInfo)return n;var L=new h.google.protobuf.SourceCodeInfo;if(n.location){if(!Array.isArray(n.location))throw TypeError(".google.protobuf.SourceCodeInfo.location: array expected");L.location=[];for(var U=0;U<n.location.length;++U){if(typeof n.location[U]!="object")throw TypeError(".google.protobuf.SourceCodeInfo.location: object expected");L.location[U]=h.google.protobuf.SourceCodeInfo.Location.fromObject(n.location[U])}}return L},ce.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.location=[]),n.location&&n.location.length){U.location=[];for(var X=0;X<n.location.length;++X)U.location[X]=h.google.protobuf.SourceCodeInfo.Location.toObject(n.location[X],L)}return U},ce.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ce.Location=(ie.prototype.path=o.emptyArray,ie.prototype.span=o.emptyArray,ie.prototype.leadingComments="",ie.prototype.trailingComments="",ie.prototype.leadingDetachedComments=o.emptyArray,ie.create=function(n){return new ie(n)},ie.encode=function(n,L){if(L=L||a.create(),n.path!=null&&n.path.length){L.uint32(10).fork();for(var U=0;U<n.path.length;++U)L.int32(n.path[U]);L.ldelim()}if(n.span!=null&&n.span.length){for(L.uint32(18).fork(),U=0;U<n.span.length;++U)L.int32(n.span[U]);L.ldelim()}if(n.leadingComments!=null&&Object.hasOwnProperty.call(n,"leadingComments")&&L.uint32(26).string(n.leadingComments),n.trailingComments!=null&&Object.hasOwnProperty.call(n,"trailingComments")&&L.uint32(34).string(n.trailingComments),n.leadingDetachedComments!=null&&n.leadingDetachedComments.length)for(U=0;U<n.leadingDetachedComments.length;++U)L.uint32(50).string(n.leadingDetachedComments[U]);return L},ie.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},ie.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.SourceCodeInfo.Location;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:if(X.path&&X.path.length||(X.path=[]),(7&me)==2)for(var Ie=n.uint32()+n.pos;n.pos<Ie;)X.path.push(n.int32());else X.path.push(n.int32());break;case 2:if(X.span&&X.span.length||(X.span=[]),(7&me)==2)for(Ie=n.uint32()+n.pos;n.pos<Ie;)X.span.push(n.int32());else X.span.push(n.int32());break;case 3:X.leadingComments=n.string();break;case 4:X.trailingComments=n.string();break;case 6:X.leadingDetachedComments&&X.leadingDetachedComments.length||(X.leadingDetachedComments=[]),X.leadingDetachedComments.push(n.string());break;default:n.skipType(7&me)}}return X},ie.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},ie.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.path!=null&&n.hasOwnProperty("path")){if(!Array.isArray(n.path))return"path: array expected";for(var L=0;L<n.path.length;++L)if(!o.isInteger(n.path[L]))return"path: integer[] expected"}if(n.span!=null&&n.hasOwnProperty("span")){if(!Array.isArray(n.span))return"span: array expected";for(L=0;L<n.span.length;++L)if(!o.isInteger(n.span[L]))return"span: integer[] expected"}if(n.leadingComments!=null&&n.hasOwnProperty("leadingComments")&&!o.isString(n.leadingComments))return"leadingComments: string expected";if(n.trailingComments!=null&&n.hasOwnProperty("trailingComments")&&!o.isString(n.trailingComments))return"trailingComments: string expected";if(n.leadingDetachedComments!=null&&n.hasOwnProperty("leadingDetachedComments")){if(!Array.isArray(n.leadingDetachedComments))return"leadingDetachedComments: array expected";for(L=0;L<n.leadingDetachedComments.length;++L)if(!o.isString(n.leadingDetachedComments[L]))return"leadingDetachedComments: string[] expected"}return null},ie.fromObject=function(n){if(n instanceof h.google.protobuf.SourceCodeInfo.Location)return n;var L=new h.google.protobuf.SourceCodeInfo.Location;if(n.path){if(!Array.isArray(n.path))throw TypeError(".google.protobuf.SourceCodeInfo.Location.path: array expected");L.path=[];for(var U=0;U<n.path.length;++U)L.path[U]=0|n.path[U]}if(n.span){if(!Array.isArray(n.span))throw TypeError(".google.protobuf.SourceCodeInfo.Location.span: array expected");for(L.span=[],U=0;U<n.span.length;++U)L.span[U]=0|n.span[U]}if(n.leadingComments!=null&&(L.leadingComments=String(n.leadingComments)),n.trailingComments!=null&&(L.trailingComments=String(n.trailingComments)),n.leadingDetachedComments){if(!Array.isArray(n.leadingDetachedComments))throw TypeError(".google.protobuf.SourceCodeInfo.Location.leadingDetachedComments: array expected");for(L.leadingDetachedComments=[],U=0;U<n.leadingDetachedComments.length;++U)L.leadingDetachedComments[U]=String(n.leadingDetachedComments[U])}return L},ie.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.path=[],U.span=[],U.leadingDetachedComments=[]),L.defaults&&(U.leadingComments="",U.trailingComments=""),n.path&&n.path.length){U.path=[];for(var X=0;X<n.path.length;++X)U.path[X]=n.path[X]}if(n.span&&n.span.length)for(U.span=[],X=0;X<n.span.length;++X)U.span[X]=n.span[X];if(n.leadingComments!=null&&n.hasOwnProperty("leadingComments")&&(U.leadingComments=n.leadingComments),n.trailingComments!=null&&n.hasOwnProperty("trailingComments")&&(U.trailingComments=n.trailingComments),n.leadingDetachedComments&&n.leadingDetachedComments.length)for(U.leadingDetachedComments=[],X=0;X<n.leadingDetachedComments.length;++X)U.leadingDetachedComments[X]=n.leadingDetachedComments[X];return U},ie.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ie),ce),g.GeneratedCodeInfo=(u.prototype.annotation=o.emptyArray,u.create=function(n){return new u(n)},u.encode=function(n,L){if(L=L||a.create(),n.annotation!=null&&n.annotation.length)for(var U=0;U<n.annotation.length;++U)h.google.protobuf.GeneratedCodeInfo.Annotation.encode(n.annotation[U],L.uint32(10).fork()).ldelim();return L},u.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},u.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.GeneratedCodeInfo;n.pos<U;){var me=n.uint32();me>>>3==1?(X.annotation&&X.annotation.length||(X.annotation=[]),X.annotation.push(h.google.protobuf.GeneratedCodeInfo.Annotation.decode(n,n.uint32()))):n.skipType(7&me)}return X},u.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},u.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.annotation!=null&&n.hasOwnProperty("annotation")){if(!Array.isArray(n.annotation))return"annotation: array expected";for(var L=0;L<n.annotation.length;++L){var U=h.google.protobuf.GeneratedCodeInfo.Annotation.verify(n.annotation[L]);if(U)return"annotation."+U}}return null},u.fromObject=function(n){if(n instanceof h.google.protobuf.GeneratedCodeInfo)return n;var L=new h.google.protobuf.GeneratedCodeInfo;if(n.annotation){if(!Array.isArray(n.annotation))throw TypeError(".google.protobuf.GeneratedCodeInfo.annotation: array expected");L.annotation=[];for(var U=0;U<n.annotation.length;++U){if(typeof n.annotation[U]!="object")throw TypeError(".google.protobuf.GeneratedCodeInfo.annotation: object expected");L.annotation[U]=h.google.protobuf.GeneratedCodeInfo.Annotation.fromObject(n.annotation[U])}}return L},u.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.annotation=[]),n.annotation&&n.annotation.length){U.annotation=[];for(var X=0;X<n.annotation.length;++X)U.annotation[X]=h.google.protobuf.GeneratedCodeInfo.Annotation.toObject(n.annotation[X],L)}return U},u.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},u.Annotation=(P.prototype.path=o.emptyArray,P.prototype.sourceFile="",P.prototype.begin=0,P.prototype.end=0,P.create=function(n){return new P(n)},P.encode=function(n,L){if(L=L||a.create(),n.path!=null&&n.path.length){L.uint32(10).fork();for(var U=0;U<n.path.length;++U)L.int32(n.path[U]);L.ldelim()}return n.sourceFile!=null&&Object.hasOwnProperty.call(n,"sourceFile")&&L.uint32(18).string(n.sourceFile),n.begin!=null&&Object.hasOwnProperty.call(n,"begin")&&L.uint32(24).int32(n.begin),n.end!=null&&Object.hasOwnProperty.call(n,"end")&&L.uint32(32).int32(n.end),L},P.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},P.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.protobuf.GeneratedCodeInfo.Annotation;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:if(X.path&&X.path.length||(X.path=[]),(7&me)==2)for(var Ie=n.uint32()+n.pos;n.pos<Ie;)X.path.push(n.int32());else X.path.push(n.int32());break;case 2:X.sourceFile=n.string();break;case 3:X.begin=n.int32();break;case 4:X.end=n.int32();break;default:n.skipType(7&me)}}return X},P.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},P.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.path!=null&&n.hasOwnProperty("path")){if(!Array.isArray(n.path))return"path: array expected";for(var L=0;L<n.path.length;++L)if(!o.isInteger(n.path[L]))return"path: integer[] expected"}return n.sourceFile!=null&&n.hasOwnProperty("sourceFile")&&!o.isString(n.sourceFile)?"sourceFile: string expected":n.begin!=null&&n.hasOwnProperty("begin")&&!o.isInteger(n.begin)?"begin: integer expected":n.end!=null&&n.hasOwnProperty("end")&&!o.isInteger(n.end)?"end: integer expected":null},P.fromObject=function(n){if(n instanceof h.google.protobuf.GeneratedCodeInfo.Annotation)return n;var L=new h.google.protobuf.GeneratedCodeInfo.Annotation;if(n.path){if(!Array.isArray(n.path))throw TypeError(".google.protobuf.GeneratedCodeInfo.Annotation.path: array expected");L.path=[];for(var U=0;U<n.path.length;++U)L.path[U]=0|n.path[U]}return n.sourceFile!=null&&(L.sourceFile=String(n.sourceFile)),n.begin!=null&&(L.begin=0|n.begin),n.end!=null&&(L.end=0|n.end),L},P.toObject=function(n,L){var U={};if(((L=L||{}).arrays||L.defaults)&&(U.path=[]),L.defaults&&(U.sourceFile="",U.begin=0,U.end=0),n.path&&n.path.length){U.path=[];for(var X=0;X<n.path.length;++X)U.path[X]=n.path[X]}return n.sourceFile!=null&&n.hasOwnProperty("sourceFile")&&(U.sourceFile=n.sourceFile),n.begin!=null&&n.hasOwnProperty("begin")&&(U.begin=n.begin),n.end!=null&&n.hasOwnProperty("end")&&(U.end=n.end),U},P.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},P),u),g),d.type=((m={}).Expr=(M.prototype.expression="",M.prototype.title="",M.prototype.description="",M.prototype.location="",M.create=function(n){return new M(n)},M.encode=function(n,L){return L=L||a.create(),n.expression!=null&&Object.hasOwnProperty.call(n,"expression")&&L.uint32(10).string(n.expression),n.title!=null&&Object.hasOwnProperty.call(n,"title")&&L.uint32(18).string(n.title),n.description!=null&&Object.hasOwnProperty.call(n,"description")&&L.uint32(26).string(n.description),n.location!=null&&Object.hasOwnProperty.call(n,"location")&&L.uint32(34).string(n.location),L},M.encodeDelimited=function(n,L){return this.encode(n,L).ldelim()},M.decode=function(n,L){n instanceof l||(n=l.create(n));for(var U=L===void 0?n.len:n.pos+L,X=new h.google.type.Expr;n.pos<U;){var me=n.uint32();switch(me>>>3){case 1:X.expression=n.string();break;case 2:X.title=n.string();break;case 3:X.description=n.string();break;case 4:X.location=n.string();break;default:n.skipType(7&me)}}return X},M.decodeDelimited=function(n){return n instanceof l||(n=new l(n)),this.decode(n,n.uint32())},M.verify=function(n){return typeof n!="object"||n===null?"object expected":n.expression!=null&&n.hasOwnProperty("expression")&&!o.isString(n.expression)?"expression: string expected":n.title!=null&&n.hasOwnProperty("title")&&!o.isString(n.title)?"title: string expected":n.description!=null&&n.hasOwnProperty("description")&&!o.isString(n.description)?"description: string expected":n.location!=null&&n.hasOwnProperty("location")&&!o.isString(n.location)?"location: string expected":null},M.fromObject=function(n){var L;return n instanceof h.google.type.Expr?n:(L=new h.google.type.Expr,n.expression!=null&&(L.expression=String(n.expression)),n.title!=null&&(L.title=String(n.title)),n.description!=null&&(L.description=String(n.description)),n.location!=null&&(L.location=String(n.location)),L)},M.toObject=function(n,L){var U={};return(L=L||{}).defaults&&(U.expression="",U.title="",U.description="",U.location=""),n.expression!=null&&n.hasOwnProperty("expression")&&(U.expression=n.expression),n.title!=null&&n.hasOwnProperty("title")&&(U.title=n.title),n.description!=null&&n.hasOwnProperty("description")&&(U.description=n.description),n.location!=null&&n.hasOwnProperty("location")&&(U.location=n.location),U},M.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},M),m),d),h})})(iam_service)),iam_service.exports}var locations={exports:{}},hasRequiredLocations;function requireLocations(){return hasRequiredLocations||(hasRequiredLocations=1,(function(e){(t=>{typeof commonjsRequire=="function"&&e&&e.exports&&(e.exports=t(requireMinimal()))})(function(t){var s,p,g,m,d=t.Reader,l=t.Writer,a=t.util,o=t.roots.locations_protos||(t.roots.locations_protos={});function h(c,N,A){t.rpc.Service.call(this,c,N,A)}function v(c){if(c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function _(c){if(this.locations=[],c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function y(c){if(c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function w(c){if(this.labels={},c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function T(c){if(this.rules=[],c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function I(c){if(this.additionalBindings=[],c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function O(c){if(c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function E(c){if(this.file=[],c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function C(c){if(this.dependency=[],this.publicDependency=[],this.weakDependency=[],this.messageType=[],this.enumType=[],this.service=[],this.extension=[],c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function x(c){if(this.field=[],this.extension=[],this.nestedType=[],this.enumType=[],this.extensionRange=[],this.oneofDecl=[],this.reservedRange=[],this.reservedName=[],c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function j(c){if(c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function D(c){if(c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function k(c){if(this.uninterpretedOption=[],c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function q(c){if(c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function G(c){if(c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function $(c){if(this.value=[],this.reservedRange=[],this.reservedName=[],c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function W(c){if(c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function K(c){if(c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function z(c){if(this.method=[],c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function Q(c){if(c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function Y(c){if(this.uninterpretedOption=[],c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function te(c){if(this.uninterpretedOption=[],c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function ae(c){if(this.uninterpretedOption=[],c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function ue(c){if(this.uninterpretedOption=[],c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function ee(c){if(this.uninterpretedOption=[],c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function oe(c){if(this.uninterpretedOption=[],c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function de(c){if(this.uninterpretedOption=[],c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function he(c){if(this.uninterpretedOption=[],this[".google.api.methodSignature"]=[],c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function Ee(c){if(this.name=[],c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function fe(c){if(c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function Se(c){if(this.location=[],c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function be(c){if(this.path=[],this.span=[],this.leadingDetachedComments=[],c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function Oe(c){if(this.annotation=[],c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function ge(c){if(this.path=[],c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}function J(c){if(c)for(var N=Object.keys(c),A=0;A<N.length;++A)c[N[A]]!=null&&(this[N[A]]=c[N[A]])}return o.google=((m={}).cloud=((g={}).location=((s={}).Locations=(((h.prototype=Object.create(t.rpc.Service.prototype)).constructor=h).create=function(c,N,A){return new this(c,N,A)},Object.defineProperty(h.prototype.listLocations=function c(N,A){return this.rpcCall(c,o.google.cloud.location.ListLocationsRequest,o.google.cloud.location.ListLocationsResponse,N,A)},"name",{value:"ListLocations"}),Object.defineProperty(h.prototype.getLocation=function c(N,A){return this.rpcCall(c,o.google.cloud.location.GetLocationRequest,o.google.cloud.location.Location,N,A)},"name",{value:"GetLocation"}),h),s.ListLocationsRequest=(v.prototype.name="",v.prototype.filter="",v.prototype.pageSize=0,v.prototype.pageToken="",v.create=function(c){return new v(c)},v.encode=function(c,N){return N=N||l.create(),c.name!=null&&Object.hasOwnProperty.call(c,"name")&&N.uint32(10).string(c.name),c.filter!=null&&Object.hasOwnProperty.call(c,"filter")&&N.uint32(18).string(c.filter),c.pageSize!=null&&Object.hasOwnProperty.call(c,"pageSize")&&N.uint32(24).int32(c.pageSize),c.pageToken!=null&&Object.hasOwnProperty.call(c,"pageToken")&&N.uint32(34).string(c.pageToken),N},v.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},v.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.cloud.location.ListLocationsRequest;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:V.name=c.string();break;case 2:V.filter=c.string();break;case 3:V.pageSize=c.int32();break;case 4:V.pageToken=c.string();break;default:c.skipType(7&ne)}}return V},v.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},v.verify=function(c){return typeof c!="object"||c===null?"object expected":c.name!=null&&c.hasOwnProperty("name")&&!a.isString(c.name)?"name: string expected":c.filter!=null&&c.hasOwnProperty("filter")&&!a.isString(c.filter)?"filter: string expected":c.pageSize!=null&&c.hasOwnProperty("pageSize")&&!a.isInteger(c.pageSize)?"pageSize: integer expected":c.pageToken!=null&&c.hasOwnProperty("pageToken")&&!a.isString(c.pageToken)?"pageToken: string expected":null},v.fromObject=function(c){var N;return c instanceof o.google.cloud.location.ListLocationsRequest?c:(N=new o.google.cloud.location.ListLocationsRequest,c.name!=null&&(N.name=String(c.name)),c.filter!=null&&(N.filter=String(c.filter)),c.pageSize!=null&&(N.pageSize=0|c.pageSize),c.pageToken!=null&&(N.pageToken=String(c.pageToken)),N)},v.toObject=function(c,N){var A={};return(N=N||{}).defaults&&(A.name="",A.filter="",A.pageSize=0,A.pageToken=""),c.name!=null&&c.hasOwnProperty("name")&&(A.name=c.name),c.filter!=null&&c.hasOwnProperty("filter")&&(A.filter=c.filter),c.pageSize!=null&&c.hasOwnProperty("pageSize")&&(A.pageSize=c.pageSize),c.pageToken!=null&&c.hasOwnProperty("pageToken")&&(A.pageToken=c.pageToken),A},v.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},v),s.ListLocationsResponse=(_.prototype.locations=a.emptyArray,_.prototype.nextPageToken="",_.create=function(c){return new _(c)},_.encode=function(c,N){if(N=N||l.create(),c.locations!=null&&c.locations.length)for(var A=0;A<c.locations.length;++A)o.google.cloud.location.Location.encode(c.locations[A],N.uint32(10).fork()).ldelim();return c.nextPageToken!=null&&Object.hasOwnProperty.call(c,"nextPageToken")&&N.uint32(18).string(c.nextPageToken),N},_.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},_.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.cloud.location.ListLocationsResponse;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:V.locations&&V.locations.length||(V.locations=[]),V.locations.push(o.google.cloud.location.Location.decode(c,c.uint32()));break;case 2:V.nextPageToken=c.string();break;default:c.skipType(7&ne)}}return V},_.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},_.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.locations!=null&&c.hasOwnProperty("locations")){if(!Array.isArray(c.locations))return"locations: array expected";for(var N=0;N<c.locations.length;++N){var A=o.google.cloud.location.Location.verify(c.locations[N]);if(A)return"locations."+A}}return c.nextPageToken!=null&&c.hasOwnProperty("nextPageToken")&&!a.isString(c.nextPageToken)?"nextPageToken: string expected":null},_.fromObject=function(c){if(c instanceof o.google.cloud.location.ListLocationsResponse)return c;var N=new o.google.cloud.location.ListLocationsResponse;if(c.locations){if(!Array.isArray(c.locations))throw TypeError(".google.cloud.location.ListLocationsResponse.locations: array expected");N.locations=[];for(var A=0;A<c.locations.length;++A){if(typeof c.locations[A]!="object")throw TypeError(".google.cloud.location.ListLocationsResponse.locations: object expected");N.locations[A]=o.google.cloud.location.Location.fromObject(c.locations[A])}}return c.nextPageToken!=null&&(N.nextPageToken=String(c.nextPageToken)),N},_.toObject=function(c,N){var A={};if(((N=N||{}).arrays||N.defaults)&&(A.locations=[]),N.defaults&&(A.nextPageToken=""),c.locations&&c.locations.length){A.locations=[];for(var V=0;V<c.locations.length;++V)A.locations[V]=o.google.cloud.location.Location.toObject(c.locations[V],N)}return c.nextPageToken!=null&&c.hasOwnProperty("nextPageToken")&&(A.nextPageToken=c.nextPageToken),A},_.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},_),s.GetLocationRequest=(y.prototype.name="",y.create=function(c){return new y(c)},y.encode=function(c,N){return N=N||l.create(),c.name!=null&&Object.hasOwnProperty.call(c,"name")&&N.uint32(10).string(c.name),N},y.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},y.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.cloud.location.GetLocationRequest;c.pos<A;){var ne=c.uint32();ne>>>3==1?V.name=c.string():c.skipType(7&ne)}return V},y.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},y.verify=function(c){return typeof c!="object"||c===null?"object expected":c.name!=null&&c.hasOwnProperty("name")&&!a.isString(c.name)?"name: string expected":null},y.fromObject=function(c){var N;return c instanceof o.google.cloud.location.GetLocationRequest?c:(N=new o.google.cloud.location.GetLocationRequest,c.name!=null&&(N.name=String(c.name)),N)},y.toObject=function(c,N){var A={};return(N=N||{}).defaults&&(A.name=""),c.name!=null&&c.hasOwnProperty("name")&&(A.name=c.name),A},y.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},y),s.Location=(w.prototype.name="",w.prototype.locationId="",w.prototype.displayName="",w.prototype.labels=a.emptyObject,w.prototype.metadata=null,w.create=function(c){return new w(c)},w.encode=function(c,N){if(N=N||l.create(),c.name!=null&&Object.hasOwnProperty.call(c,"name")&&N.uint32(10).string(c.name),c.labels!=null&&Object.hasOwnProperty.call(c,"labels"))for(var A=Object.keys(c.labels),V=0;V<A.length;++V)N.uint32(18).fork().uint32(10).string(A[V]).uint32(18).string(c.labels[A[V]]).ldelim();return c.metadata!=null&&Object.hasOwnProperty.call(c,"metadata")&&o.google.protobuf.Any.encode(c.metadata,N.uint32(26).fork()).ldelim(),c.locationId!=null&&Object.hasOwnProperty.call(c,"locationId")&&N.uint32(34).string(c.locationId),c.displayName!=null&&Object.hasOwnProperty.call(c,"displayName")&&N.uint32(42).string(c.displayName),N},w.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},w.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.cloud.location.Location;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:V.name=c.string();break;case 4:V.locationId=c.string();break;case 5:V.displayName=c.string();break;case 2:V.labels===a.emptyObject&&(V.labels={});for(var ce=c.uint32()+c.pos,ie="",u="";c.pos<ce;){var P=c.uint32();switch(P>>>3){case 1:ie=c.string();break;case 2:u=c.string();break;default:c.skipType(7&P)}}V.labels[ie]=u;break;case 3:V.metadata=o.google.protobuf.Any.decode(c,c.uint32());break;default:c.skipType(7&ne)}}return V},w.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},w.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.name!=null&&c.hasOwnProperty("name")&&!a.isString(c.name))return"name: string expected";if(c.locationId!=null&&c.hasOwnProperty("locationId")&&!a.isString(c.locationId))return"locationId: string expected";if(c.displayName!=null&&c.hasOwnProperty("displayName")&&!a.isString(c.displayName))return"displayName: string expected";if(c.labels!=null&&c.hasOwnProperty("labels")){if(!a.isObject(c.labels))return"labels: object expected";for(var N=Object.keys(c.labels),A=0;A<N.length;++A)if(!a.isString(c.labels[N[A]]))return"labels: string{k:string} expected"}if(c.metadata!=null&&c.hasOwnProperty("metadata")){var V=o.google.protobuf.Any.verify(c.metadata);if(V)return"metadata."+V}return null},w.fromObject=function(c){if(c instanceof o.google.cloud.location.Location)return c;var N=new o.google.cloud.location.Location;if(c.name!=null&&(N.name=String(c.name)),c.locationId!=null&&(N.locationId=String(c.locationId)),c.displayName!=null&&(N.displayName=String(c.displayName)),c.labels){if(typeof c.labels!="object")throw TypeError(".google.cloud.location.Location.labels: object expected");N.labels={};for(var A=Object.keys(c.labels),V=0;V<A.length;++V)N.labels[A[V]]=String(c.labels[A[V]])}if(c.metadata!=null){if(typeof c.metadata!="object")throw TypeError(".google.cloud.location.Location.metadata: object expected");N.metadata=o.google.protobuf.Any.fromObject(c.metadata)}return N},w.toObject=function(c,N){var A,V={};if(((N=N||{}).objects||N.defaults)&&(V.labels={}),N.defaults&&(V.name="",V.metadata=null,V.locationId="",V.displayName=""),c.name!=null&&c.hasOwnProperty("name")&&(V.name=c.name),c.labels&&(A=Object.keys(c.labels)).length){V.labels={};for(var ne=0;ne<A.length;++ne)V.labels[A[ne]]=c.labels[A[ne]]}return c.metadata!=null&&c.hasOwnProperty("metadata")&&(V.metadata=o.google.protobuf.Any.toObject(c.metadata,N)),c.locationId!=null&&c.hasOwnProperty("locationId")&&(V.locationId=c.locationId),c.displayName!=null&&c.hasOwnProperty("displayName")&&(V.displayName=c.displayName),V},w.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},w),s),g),m.api=((s={}).Http=(T.prototype.rules=a.emptyArray,T.prototype.fullyDecodeReservedExpansion=!1,T.create=function(c){return new T(c)},T.encode=function(c,N){if(N=N||l.create(),c.rules!=null&&c.rules.length)for(var A=0;A<c.rules.length;++A)o.google.api.HttpRule.encode(c.rules[A],N.uint32(10).fork()).ldelim();return c.fullyDecodeReservedExpansion!=null&&Object.hasOwnProperty.call(c,"fullyDecodeReservedExpansion")&&N.uint32(16).bool(c.fullyDecodeReservedExpansion),N},T.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},T.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.api.Http;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:V.rules&&V.rules.length||(V.rules=[]),V.rules.push(o.google.api.HttpRule.decode(c,c.uint32()));break;case 2:V.fullyDecodeReservedExpansion=c.bool();break;default:c.skipType(7&ne)}}return V},T.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},T.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.rules!=null&&c.hasOwnProperty("rules")){if(!Array.isArray(c.rules))return"rules: array expected";for(var N=0;N<c.rules.length;++N){var A=o.google.api.HttpRule.verify(c.rules[N]);if(A)return"rules."+A}}return c.fullyDecodeReservedExpansion!=null&&c.hasOwnProperty("fullyDecodeReservedExpansion")&&typeof c.fullyDecodeReservedExpansion!="boolean"?"fullyDecodeReservedExpansion: boolean expected":null},T.fromObject=function(c){if(c instanceof o.google.api.Http)return c;var N=new o.google.api.Http;if(c.rules){if(!Array.isArray(c.rules))throw TypeError(".google.api.Http.rules: array expected");N.rules=[];for(var A=0;A<c.rules.length;++A){if(typeof c.rules[A]!="object")throw TypeError(".google.api.Http.rules: object expected");N.rules[A]=o.google.api.HttpRule.fromObject(c.rules[A])}}return c.fullyDecodeReservedExpansion!=null&&(N.fullyDecodeReservedExpansion=!!c.fullyDecodeReservedExpansion),N},T.toObject=function(c,N){var A={};if(((N=N||{}).arrays||N.defaults)&&(A.rules=[]),N.defaults&&(A.fullyDecodeReservedExpansion=!1),c.rules&&c.rules.length){A.rules=[];for(var V=0;V<c.rules.length;++V)A.rules[V]=o.google.api.HttpRule.toObject(c.rules[V],N)}return c.fullyDecodeReservedExpansion!=null&&c.hasOwnProperty("fullyDecodeReservedExpansion")&&(A.fullyDecodeReservedExpansion=c.fullyDecodeReservedExpansion),A},T.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},T),s.HttpRule=(I.prototype.selector="",I.prototype.get=null,I.prototype.put=null,I.prototype.post=null,I.prototype.delete=null,I.prototype.patch=null,I.prototype.custom=null,I.prototype.body="",I.prototype.responseBody="",I.prototype.additionalBindings=a.emptyArray,Object.defineProperty(I.prototype,"pattern",{get:a.oneOfGetter(g=["get","put","post","delete","patch","custom"]),set:a.oneOfSetter(g)}),I.create=function(c){return new I(c)},I.encode=function(c,N){if(N=N||l.create(),c.selector!=null&&Object.hasOwnProperty.call(c,"selector")&&N.uint32(10).string(c.selector),c.get!=null&&Object.hasOwnProperty.call(c,"get")&&N.uint32(18).string(c.get),c.put!=null&&Object.hasOwnProperty.call(c,"put")&&N.uint32(26).string(c.put),c.post!=null&&Object.hasOwnProperty.call(c,"post")&&N.uint32(34).string(c.post),c.delete!=null&&Object.hasOwnProperty.call(c,"delete")&&N.uint32(42).string(c.delete),c.patch!=null&&Object.hasOwnProperty.call(c,"patch")&&N.uint32(50).string(c.patch),c.body!=null&&Object.hasOwnProperty.call(c,"body")&&N.uint32(58).string(c.body),c.custom!=null&&Object.hasOwnProperty.call(c,"custom")&&o.google.api.CustomHttpPattern.encode(c.custom,N.uint32(66).fork()).ldelim(),c.additionalBindings!=null&&c.additionalBindings.length)for(var A=0;A<c.additionalBindings.length;++A)o.google.api.HttpRule.encode(c.additionalBindings[A],N.uint32(90).fork()).ldelim();return c.responseBody!=null&&Object.hasOwnProperty.call(c,"responseBody")&&N.uint32(98).string(c.responseBody),N},I.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},I.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.api.HttpRule;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:V.selector=c.string();break;case 2:V.get=c.string();break;case 3:V.put=c.string();break;case 4:V.post=c.string();break;case 5:V.delete=c.string();break;case 6:V.patch=c.string();break;case 8:V.custom=o.google.api.CustomHttpPattern.decode(c,c.uint32());break;case 7:V.body=c.string();break;case 12:V.responseBody=c.string();break;case 11:V.additionalBindings&&V.additionalBindings.length||(V.additionalBindings=[]),V.additionalBindings.push(o.google.api.HttpRule.decode(c,c.uint32()));break;default:c.skipType(7&ne)}}return V},I.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},I.verify=function(c){if(typeof c!="object"||c===null)return"object expected";var N={};if(c.selector!=null&&c.hasOwnProperty("selector")&&!a.isString(c.selector))return"selector: string expected";if(c.get!=null&&c.hasOwnProperty("get")&&(N.pattern=1,!a.isString(c.get)))return"get: string expected";if(c.put!=null&&c.hasOwnProperty("put")){if(N.pattern===1)return"pattern: multiple values";if(N.pattern=1,!a.isString(c.put))return"put: string expected"}if(c.post!=null&&c.hasOwnProperty("post")){if(N.pattern===1)return"pattern: multiple values";if(N.pattern=1,!a.isString(c.post))return"post: string expected"}if(c.delete!=null&&c.hasOwnProperty("delete")){if(N.pattern===1)return"pattern: multiple values";if(N.pattern=1,!a.isString(c.delete))return"delete: string expected"}if(c.patch!=null&&c.hasOwnProperty("patch")){if(N.pattern===1)return"pattern: multiple values";if(N.pattern=1,!a.isString(c.patch))return"patch: string expected"}if(c.custom!=null&&c.hasOwnProperty("custom")){if(N.pattern===1)return"pattern: multiple values";if(N.pattern=1,A=o.google.api.CustomHttpPattern.verify(c.custom))return"custom."+A}if(c.body!=null&&c.hasOwnProperty("body")&&!a.isString(c.body))return"body: string expected";if(c.responseBody!=null&&c.hasOwnProperty("responseBody")&&!a.isString(c.responseBody))return"responseBody: string expected";if(c.additionalBindings!=null&&c.hasOwnProperty("additionalBindings")){if(!Array.isArray(c.additionalBindings))return"additionalBindings: array expected";for(var A,V=0;V<c.additionalBindings.length;++V)if(A=o.google.api.HttpRule.verify(c.additionalBindings[V]))return"additionalBindings."+A}return null},I.fromObject=function(c){if(c instanceof o.google.api.HttpRule)return c;var N=new o.google.api.HttpRule;if(c.selector!=null&&(N.selector=String(c.selector)),c.get!=null&&(N.get=String(c.get)),c.put!=null&&(N.put=String(c.put)),c.post!=null&&(N.post=String(c.post)),c.delete!=null&&(N.delete=String(c.delete)),c.patch!=null&&(N.patch=String(c.patch)),c.custom!=null){if(typeof c.custom!="object")throw TypeError(".google.api.HttpRule.custom: object expected");N.custom=o.google.api.CustomHttpPattern.fromObject(c.custom)}if(c.body!=null&&(N.body=String(c.body)),c.responseBody!=null&&(N.responseBody=String(c.responseBody)),c.additionalBindings){if(!Array.isArray(c.additionalBindings))throw TypeError(".google.api.HttpRule.additionalBindings: array expected");N.additionalBindings=[];for(var A=0;A<c.additionalBindings.length;++A){if(typeof c.additionalBindings[A]!="object")throw TypeError(".google.api.HttpRule.additionalBindings: object expected");N.additionalBindings[A]=o.google.api.HttpRule.fromObject(c.additionalBindings[A])}}return N},I.toObject=function(c,N){var A={};if(((N=N||{}).arrays||N.defaults)&&(A.additionalBindings=[]),N.defaults&&(A.selector="",A.body="",A.responseBody=""),c.selector!=null&&c.hasOwnProperty("selector")&&(A.selector=c.selector),c.get!=null&&c.hasOwnProperty("get")&&(A.get=c.get,N.oneofs)&&(A.pattern="get"),c.put!=null&&c.hasOwnProperty("put")&&(A.put=c.put,N.oneofs)&&(A.pattern="put"),c.post!=null&&c.hasOwnProperty("post")&&(A.post=c.post,N.oneofs)&&(A.pattern="post"),c.delete!=null&&c.hasOwnProperty("delete")&&(A.delete=c.delete,N.oneofs)&&(A.pattern="delete"),c.patch!=null&&c.hasOwnProperty("patch")&&(A.patch=c.patch,N.oneofs)&&(A.pattern="patch"),c.body!=null&&c.hasOwnProperty("body")&&(A.body=c.body),c.custom!=null&&c.hasOwnProperty("custom")&&(A.custom=o.google.api.CustomHttpPattern.toObject(c.custom,N),N.oneofs)&&(A.pattern="custom"),c.additionalBindings&&c.additionalBindings.length){A.additionalBindings=[];for(var V=0;V<c.additionalBindings.length;++V)A.additionalBindings[V]=o.google.api.HttpRule.toObject(c.additionalBindings[V],N)}return c.responseBody!=null&&c.hasOwnProperty("responseBody")&&(A.responseBody=c.responseBody),A},I.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},I),s.CustomHttpPattern=(O.prototype.kind="",O.prototype.path="",O.create=function(c){return new O(c)},O.encode=function(c,N){return N=N||l.create(),c.kind!=null&&Object.hasOwnProperty.call(c,"kind")&&N.uint32(10).string(c.kind),c.path!=null&&Object.hasOwnProperty.call(c,"path")&&N.uint32(18).string(c.path),N},O.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},O.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.api.CustomHttpPattern;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:V.kind=c.string();break;case 2:V.path=c.string();break;default:c.skipType(7&ne)}}return V},O.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},O.verify=function(c){return typeof c!="object"||c===null?"object expected":c.kind!=null&&c.hasOwnProperty("kind")&&!a.isString(c.kind)?"kind: string expected":c.path!=null&&c.hasOwnProperty("path")&&!a.isString(c.path)?"path: string expected":null},O.fromObject=function(c){var N;return c instanceof o.google.api.CustomHttpPattern?c:(N=new o.google.api.CustomHttpPattern,c.kind!=null&&(N.kind=String(c.kind)),c.path!=null&&(N.path=String(c.path)),N)},O.toObject=function(c,N){var A={};return(N=N||{}).defaults&&(A.kind="",A.path=""),c.kind!=null&&c.hasOwnProperty("kind")&&(A.kind=c.kind),c.path!=null&&c.hasOwnProperty("path")&&(A.path=c.path),A},O.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},O),s),m.protobuf=((g={}).FileDescriptorSet=(E.prototype.file=a.emptyArray,E.create=function(c){return new E(c)},E.encode=function(c,N){if(N=N||l.create(),c.file!=null&&c.file.length)for(var A=0;A<c.file.length;++A)o.google.protobuf.FileDescriptorProto.encode(c.file[A],N.uint32(10).fork()).ldelim();return N},E.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},E.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.FileDescriptorSet;c.pos<A;){var ne=c.uint32();ne>>>3==1?(V.file&&V.file.length||(V.file=[]),V.file.push(o.google.protobuf.FileDescriptorProto.decode(c,c.uint32()))):c.skipType(7&ne)}return V},E.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},E.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.file!=null&&c.hasOwnProperty("file")){if(!Array.isArray(c.file))return"file: array expected";for(var N=0;N<c.file.length;++N){var A=o.google.protobuf.FileDescriptorProto.verify(c.file[N]);if(A)return"file."+A}}return null},E.fromObject=function(c){if(c instanceof o.google.protobuf.FileDescriptorSet)return c;var N=new o.google.protobuf.FileDescriptorSet;if(c.file){if(!Array.isArray(c.file))throw TypeError(".google.protobuf.FileDescriptorSet.file: array expected");N.file=[];for(var A=0;A<c.file.length;++A){if(typeof c.file[A]!="object")throw TypeError(".google.protobuf.FileDescriptorSet.file: object expected");N.file[A]=o.google.protobuf.FileDescriptorProto.fromObject(c.file[A])}}return N},E.toObject=function(c,N){var A={};if(((N=N||{}).arrays||N.defaults)&&(A.file=[]),c.file&&c.file.length){A.file=[];for(var V=0;V<c.file.length;++V)A.file[V]=o.google.protobuf.FileDescriptorProto.toObject(c.file[V],N)}return A},E.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},E),g.FileDescriptorProto=(C.prototype.name="",C.prototype.package="",C.prototype.dependency=a.emptyArray,C.prototype.publicDependency=a.emptyArray,C.prototype.weakDependency=a.emptyArray,C.prototype.messageType=a.emptyArray,C.prototype.enumType=a.emptyArray,C.prototype.service=a.emptyArray,C.prototype.extension=a.emptyArray,C.prototype.options=null,C.prototype.sourceCodeInfo=null,C.prototype.syntax="",C.create=function(c){return new C(c)},C.encode=function(c,N){if(N=N||l.create(),c.name!=null&&Object.hasOwnProperty.call(c,"name")&&N.uint32(10).string(c.name),c.package!=null&&Object.hasOwnProperty.call(c,"package")&&N.uint32(18).string(c.package),c.dependency!=null&&c.dependency.length)for(var A=0;A<c.dependency.length;++A)N.uint32(26).string(c.dependency[A]);if(c.messageType!=null&&c.messageType.length)for(A=0;A<c.messageType.length;++A)o.google.protobuf.DescriptorProto.encode(c.messageType[A],N.uint32(34).fork()).ldelim();if(c.enumType!=null&&c.enumType.length)for(A=0;A<c.enumType.length;++A)o.google.protobuf.EnumDescriptorProto.encode(c.enumType[A],N.uint32(42).fork()).ldelim();if(c.service!=null&&c.service.length)for(A=0;A<c.service.length;++A)o.google.protobuf.ServiceDescriptorProto.encode(c.service[A],N.uint32(50).fork()).ldelim();if(c.extension!=null&&c.extension.length)for(A=0;A<c.extension.length;++A)o.google.protobuf.FieldDescriptorProto.encode(c.extension[A],N.uint32(58).fork()).ldelim();if(c.options!=null&&Object.hasOwnProperty.call(c,"options")&&o.google.protobuf.FileOptions.encode(c.options,N.uint32(66).fork()).ldelim(),c.sourceCodeInfo!=null&&Object.hasOwnProperty.call(c,"sourceCodeInfo")&&o.google.protobuf.SourceCodeInfo.encode(c.sourceCodeInfo,N.uint32(74).fork()).ldelim(),c.publicDependency!=null&&c.publicDependency.length)for(A=0;A<c.publicDependency.length;++A)N.uint32(80).int32(c.publicDependency[A]);if(c.weakDependency!=null&&c.weakDependency.length)for(A=0;A<c.weakDependency.length;++A)N.uint32(88).int32(c.weakDependency[A]);return c.syntax!=null&&Object.hasOwnProperty.call(c,"syntax")&&N.uint32(98).string(c.syntax),N},C.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},C.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.FileDescriptorProto;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:V.name=c.string();break;case 2:V.package=c.string();break;case 3:V.dependency&&V.dependency.length||(V.dependency=[]),V.dependency.push(c.string());break;case 10:if(V.publicDependency&&V.publicDependency.length||(V.publicDependency=[]),(7&ne)==2)for(var ce=c.uint32()+c.pos;c.pos<ce;)V.publicDependency.push(c.int32());else V.publicDependency.push(c.int32());break;case 11:if(V.weakDependency&&V.weakDependency.length||(V.weakDependency=[]),(7&ne)==2)for(ce=c.uint32()+c.pos;c.pos<ce;)V.weakDependency.push(c.int32());else V.weakDependency.push(c.int32());break;case 4:V.messageType&&V.messageType.length||(V.messageType=[]),V.messageType.push(o.google.protobuf.DescriptorProto.decode(c,c.uint32()));break;case 5:V.enumType&&V.enumType.length||(V.enumType=[]),V.enumType.push(o.google.protobuf.EnumDescriptorProto.decode(c,c.uint32()));break;case 6:V.service&&V.service.length||(V.service=[]),V.service.push(o.google.protobuf.ServiceDescriptorProto.decode(c,c.uint32()));break;case 7:V.extension&&V.extension.length||(V.extension=[]),V.extension.push(o.google.protobuf.FieldDescriptorProto.decode(c,c.uint32()));break;case 8:V.options=o.google.protobuf.FileOptions.decode(c,c.uint32());break;case 9:V.sourceCodeInfo=o.google.protobuf.SourceCodeInfo.decode(c,c.uint32());break;case 12:V.syntax=c.string();break;default:c.skipType(7&ne)}}return V},C.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},C.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.name!=null&&c.hasOwnProperty("name")&&!a.isString(c.name))return"name: string expected";if(c.package!=null&&c.hasOwnProperty("package")&&!a.isString(c.package))return"package: string expected";if(c.dependency!=null&&c.hasOwnProperty("dependency")){if(!Array.isArray(c.dependency))return"dependency: array expected";for(var N=0;N<c.dependency.length;++N)if(!a.isString(c.dependency[N]))return"dependency: string[] expected"}if(c.publicDependency!=null&&c.hasOwnProperty("publicDependency")){if(!Array.isArray(c.publicDependency))return"publicDependency: array expected";for(N=0;N<c.publicDependency.length;++N)if(!a.isInteger(c.publicDependency[N]))return"publicDependency: integer[] expected"}if(c.weakDependency!=null&&c.hasOwnProperty("weakDependency")){if(!Array.isArray(c.weakDependency))return"weakDependency: array expected";for(N=0;N<c.weakDependency.length;++N)if(!a.isInteger(c.weakDependency[N]))return"weakDependency: integer[] expected"}if(c.messageType!=null&&c.hasOwnProperty("messageType")){if(!Array.isArray(c.messageType))return"messageType: array expected";for(N=0;N<c.messageType.length;++N)if(A=o.google.protobuf.DescriptorProto.verify(c.messageType[N]))return"messageType."+A}if(c.enumType!=null&&c.hasOwnProperty("enumType")){if(!Array.isArray(c.enumType))return"enumType: array expected";for(N=0;N<c.enumType.length;++N)if(A=o.google.protobuf.EnumDescriptorProto.verify(c.enumType[N]))return"enumType."+A}if(c.service!=null&&c.hasOwnProperty("service")){if(!Array.isArray(c.service))return"service: array expected";for(N=0;N<c.service.length;++N)if(A=o.google.protobuf.ServiceDescriptorProto.verify(c.service[N]))return"service."+A}if(c.extension!=null&&c.hasOwnProperty("extension")){if(!Array.isArray(c.extension))return"extension: array expected";for(N=0;N<c.extension.length;++N)if(A=o.google.protobuf.FieldDescriptorProto.verify(c.extension[N]))return"extension."+A}var A;return c.options!=null&&c.hasOwnProperty("options")&&(A=o.google.protobuf.FileOptions.verify(c.options))?"options."+A:c.sourceCodeInfo!=null&&c.hasOwnProperty("sourceCodeInfo")&&(A=o.google.protobuf.SourceCodeInfo.verify(c.sourceCodeInfo))?"sourceCodeInfo."+A:c.syntax!=null&&c.hasOwnProperty("syntax")&&!a.isString(c.syntax)?"syntax: string expected":null},C.fromObject=function(c){if(c instanceof o.google.protobuf.FileDescriptorProto)return c;var N=new o.google.protobuf.FileDescriptorProto;if(c.name!=null&&(N.name=String(c.name)),c.package!=null&&(N.package=String(c.package)),c.dependency){if(!Array.isArray(c.dependency))throw TypeError(".google.protobuf.FileDescriptorProto.dependency: array expected");N.dependency=[];for(var A=0;A<c.dependency.length;++A)N.dependency[A]=String(c.dependency[A])}if(c.publicDependency){if(!Array.isArray(c.publicDependency))throw TypeError(".google.protobuf.FileDescriptorProto.publicDependency: array expected");for(N.publicDependency=[],A=0;A<c.publicDependency.length;++A)N.publicDependency[A]=0|c.publicDependency[A]}if(c.weakDependency){if(!Array.isArray(c.weakDependency))throw TypeError(".google.protobuf.FileDescriptorProto.weakDependency: array expected");for(N.weakDependency=[],A=0;A<c.weakDependency.length;++A)N.weakDependency[A]=0|c.weakDependency[A]}if(c.messageType){if(!Array.isArray(c.messageType))throw TypeError(".google.protobuf.FileDescriptorProto.messageType: array expected");for(N.messageType=[],A=0;A<c.messageType.length;++A){if(typeof c.messageType[A]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.messageType: object expected");N.messageType[A]=o.google.protobuf.DescriptorProto.fromObject(c.messageType[A])}}if(c.enumType){if(!Array.isArray(c.enumType))throw TypeError(".google.protobuf.FileDescriptorProto.enumType: array expected");for(N.enumType=[],A=0;A<c.enumType.length;++A){if(typeof c.enumType[A]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.enumType: object expected");N.enumType[A]=o.google.protobuf.EnumDescriptorProto.fromObject(c.enumType[A])}}if(c.service){if(!Array.isArray(c.service))throw TypeError(".google.protobuf.FileDescriptorProto.service: array expected");for(N.service=[],A=0;A<c.service.length;++A){if(typeof c.service[A]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.service: object expected");N.service[A]=o.google.protobuf.ServiceDescriptorProto.fromObject(c.service[A])}}if(c.extension){if(!Array.isArray(c.extension))throw TypeError(".google.protobuf.FileDescriptorProto.extension: array expected");for(N.extension=[],A=0;A<c.extension.length;++A){if(typeof c.extension[A]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.extension: object expected");N.extension[A]=o.google.protobuf.FieldDescriptorProto.fromObject(c.extension[A])}}if(c.options!=null){if(typeof c.options!="object")throw TypeError(".google.protobuf.FileDescriptorProto.options: object expected");N.options=o.google.protobuf.FileOptions.fromObject(c.options)}if(c.sourceCodeInfo!=null){if(typeof c.sourceCodeInfo!="object")throw TypeError(".google.protobuf.FileDescriptorProto.sourceCodeInfo: object expected");N.sourceCodeInfo=o.google.protobuf.SourceCodeInfo.fromObject(c.sourceCodeInfo)}return c.syntax!=null&&(N.syntax=String(c.syntax)),N},C.toObject=function(c,N){var A={};if(((N=N||{}).arrays||N.defaults)&&(A.dependency=[],A.messageType=[],A.enumType=[],A.service=[],A.extension=[],A.publicDependency=[],A.weakDependency=[]),N.defaults&&(A.name="",A.package="",A.options=null,A.sourceCodeInfo=null,A.syntax=""),c.name!=null&&c.hasOwnProperty("name")&&(A.name=c.name),c.package!=null&&c.hasOwnProperty("package")&&(A.package=c.package),c.dependency&&c.dependency.length){A.dependency=[];for(var V=0;V<c.dependency.length;++V)A.dependency[V]=c.dependency[V]}if(c.messageType&&c.messageType.length)for(A.messageType=[],V=0;V<c.messageType.length;++V)A.messageType[V]=o.google.protobuf.DescriptorProto.toObject(c.messageType[V],N);if(c.enumType&&c.enumType.length)for(A.enumType=[],V=0;V<c.enumType.length;++V)A.enumType[V]=o.google.protobuf.EnumDescriptorProto.toObject(c.enumType[V],N);if(c.service&&c.service.length)for(A.service=[],V=0;V<c.service.length;++V)A.service[V]=o.google.protobuf.ServiceDescriptorProto.toObject(c.service[V],N);if(c.extension&&c.extension.length)for(A.extension=[],V=0;V<c.extension.length;++V)A.extension[V]=o.google.protobuf.FieldDescriptorProto.toObject(c.extension[V],N);if(c.options!=null&&c.hasOwnProperty("options")&&(A.options=o.google.protobuf.FileOptions.toObject(c.options,N)),c.sourceCodeInfo!=null&&c.hasOwnProperty("sourceCodeInfo")&&(A.sourceCodeInfo=o.google.protobuf.SourceCodeInfo.toObject(c.sourceCodeInfo,N)),c.publicDependency&&c.publicDependency.length)for(A.publicDependency=[],V=0;V<c.publicDependency.length;++V)A.publicDependency[V]=c.publicDependency[V];if(c.weakDependency&&c.weakDependency.length)for(A.weakDependency=[],V=0;V<c.weakDependency.length;++V)A.weakDependency[V]=c.weakDependency[V];return c.syntax!=null&&c.hasOwnProperty("syntax")&&(A.syntax=c.syntax),A},C.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},C),g.DescriptorProto=(x.prototype.name="",x.prototype.field=a.emptyArray,x.prototype.extension=a.emptyArray,x.prototype.nestedType=a.emptyArray,x.prototype.enumType=a.emptyArray,x.prototype.extensionRange=a.emptyArray,x.prototype.oneofDecl=a.emptyArray,x.prototype.options=null,x.prototype.reservedRange=a.emptyArray,x.prototype.reservedName=a.emptyArray,x.create=function(c){return new x(c)},x.encode=function(c,N){if(N=N||l.create(),c.name!=null&&Object.hasOwnProperty.call(c,"name")&&N.uint32(10).string(c.name),c.field!=null&&c.field.length)for(var A=0;A<c.field.length;++A)o.google.protobuf.FieldDescriptorProto.encode(c.field[A],N.uint32(18).fork()).ldelim();if(c.nestedType!=null&&c.nestedType.length)for(A=0;A<c.nestedType.length;++A)o.google.protobuf.DescriptorProto.encode(c.nestedType[A],N.uint32(26).fork()).ldelim();if(c.enumType!=null&&c.enumType.length)for(A=0;A<c.enumType.length;++A)o.google.protobuf.EnumDescriptorProto.encode(c.enumType[A],N.uint32(34).fork()).ldelim();if(c.extensionRange!=null&&c.extensionRange.length)for(A=0;A<c.extensionRange.length;++A)o.google.protobuf.DescriptorProto.ExtensionRange.encode(c.extensionRange[A],N.uint32(42).fork()).ldelim();if(c.extension!=null&&c.extension.length)for(A=0;A<c.extension.length;++A)o.google.protobuf.FieldDescriptorProto.encode(c.extension[A],N.uint32(50).fork()).ldelim();if(c.options!=null&&Object.hasOwnProperty.call(c,"options")&&o.google.protobuf.MessageOptions.encode(c.options,N.uint32(58).fork()).ldelim(),c.oneofDecl!=null&&c.oneofDecl.length)for(A=0;A<c.oneofDecl.length;++A)o.google.protobuf.OneofDescriptorProto.encode(c.oneofDecl[A],N.uint32(66).fork()).ldelim();if(c.reservedRange!=null&&c.reservedRange.length)for(A=0;A<c.reservedRange.length;++A)o.google.protobuf.DescriptorProto.ReservedRange.encode(c.reservedRange[A],N.uint32(74).fork()).ldelim();if(c.reservedName!=null&&c.reservedName.length)for(A=0;A<c.reservedName.length;++A)N.uint32(82).string(c.reservedName[A]);return N},x.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},x.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.DescriptorProto;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:V.name=c.string();break;case 2:V.field&&V.field.length||(V.field=[]),V.field.push(o.google.protobuf.FieldDescriptorProto.decode(c,c.uint32()));break;case 6:V.extension&&V.extension.length||(V.extension=[]),V.extension.push(o.google.protobuf.FieldDescriptorProto.decode(c,c.uint32()));break;case 3:V.nestedType&&V.nestedType.length||(V.nestedType=[]),V.nestedType.push(o.google.protobuf.DescriptorProto.decode(c,c.uint32()));break;case 4:V.enumType&&V.enumType.length||(V.enumType=[]),V.enumType.push(o.google.protobuf.EnumDescriptorProto.decode(c,c.uint32()));break;case 5:V.extensionRange&&V.extensionRange.length||(V.extensionRange=[]),V.extensionRange.push(o.google.protobuf.DescriptorProto.ExtensionRange.decode(c,c.uint32()));break;case 8:V.oneofDecl&&V.oneofDecl.length||(V.oneofDecl=[]),V.oneofDecl.push(o.google.protobuf.OneofDescriptorProto.decode(c,c.uint32()));break;case 7:V.options=o.google.protobuf.MessageOptions.decode(c,c.uint32());break;case 9:V.reservedRange&&V.reservedRange.length||(V.reservedRange=[]),V.reservedRange.push(o.google.protobuf.DescriptorProto.ReservedRange.decode(c,c.uint32()));break;case 10:V.reservedName&&V.reservedName.length||(V.reservedName=[]),V.reservedName.push(c.string());break;default:c.skipType(7&ne)}}return V},x.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},x.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.name!=null&&c.hasOwnProperty("name")&&!a.isString(c.name))return"name: string expected";if(c.field!=null&&c.hasOwnProperty("field")){if(!Array.isArray(c.field))return"field: array expected";for(var N=0;N<c.field.length;++N)if(A=o.google.protobuf.FieldDescriptorProto.verify(c.field[N]))return"field."+A}if(c.extension!=null&&c.hasOwnProperty("extension")){if(!Array.isArray(c.extension))return"extension: array expected";for(N=0;N<c.extension.length;++N)if(A=o.google.protobuf.FieldDescriptorProto.verify(c.extension[N]))return"extension."+A}if(c.nestedType!=null&&c.hasOwnProperty("nestedType")){if(!Array.isArray(c.nestedType))return"nestedType: array expected";for(N=0;N<c.nestedType.length;++N)if(A=o.google.protobuf.DescriptorProto.verify(c.nestedType[N]))return"nestedType."+A}if(c.enumType!=null&&c.hasOwnProperty("enumType")){if(!Array.isArray(c.enumType))return"enumType: array expected";for(N=0;N<c.enumType.length;++N)if(A=o.google.protobuf.EnumDescriptorProto.verify(c.enumType[N]))return"enumType."+A}if(c.extensionRange!=null&&c.hasOwnProperty("extensionRange")){if(!Array.isArray(c.extensionRange))return"extensionRange: array expected";for(N=0;N<c.extensionRange.length;++N)if(A=o.google.protobuf.DescriptorProto.ExtensionRange.verify(c.extensionRange[N]))return"extensionRange."+A}if(c.oneofDecl!=null&&c.hasOwnProperty("oneofDecl")){if(!Array.isArray(c.oneofDecl))return"oneofDecl: array expected";for(N=0;N<c.oneofDecl.length;++N)if(A=o.google.protobuf.OneofDescriptorProto.verify(c.oneofDecl[N]))return"oneofDecl."+A}if(c.options!=null&&c.hasOwnProperty("options")&&(A=o.google.protobuf.MessageOptions.verify(c.options)))return"options."+A;if(c.reservedRange!=null&&c.hasOwnProperty("reservedRange")){if(!Array.isArray(c.reservedRange))return"reservedRange: array expected";for(var A,N=0;N<c.reservedRange.length;++N)if(A=o.google.protobuf.DescriptorProto.ReservedRange.verify(c.reservedRange[N]))return"reservedRange."+A}if(c.reservedName!=null&&c.hasOwnProperty("reservedName")){if(!Array.isArray(c.reservedName))return"reservedName: array expected";for(N=0;N<c.reservedName.length;++N)if(!a.isString(c.reservedName[N]))return"reservedName: string[] expected"}return null},x.fromObject=function(c){if(c instanceof o.google.protobuf.DescriptorProto)return c;var N=new o.google.protobuf.DescriptorProto;if(c.name!=null&&(N.name=String(c.name)),c.field){if(!Array.isArray(c.field))throw TypeError(".google.protobuf.DescriptorProto.field: array expected");N.field=[];for(var A=0;A<c.field.length;++A){if(typeof c.field[A]!="object")throw TypeError(".google.protobuf.DescriptorProto.field: object expected");N.field[A]=o.google.protobuf.FieldDescriptorProto.fromObject(c.field[A])}}if(c.extension){if(!Array.isArray(c.extension))throw TypeError(".google.protobuf.DescriptorProto.extension: array expected");for(N.extension=[],A=0;A<c.extension.length;++A){if(typeof c.extension[A]!="object")throw TypeError(".google.protobuf.DescriptorProto.extension: object expected");N.extension[A]=o.google.protobuf.FieldDescriptorProto.fromObject(c.extension[A])}}if(c.nestedType){if(!Array.isArray(c.nestedType))throw TypeError(".google.protobuf.DescriptorProto.nestedType: array expected");for(N.nestedType=[],A=0;A<c.nestedType.length;++A){if(typeof c.nestedType[A]!="object")throw TypeError(".google.protobuf.DescriptorProto.nestedType: object expected");N.nestedType[A]=o.google.protobuf.DescriptorProto.fromObject(c.nestedType[A])}}if(c.enumType){if(!Array.isArray(c.enumType))throw TypeError(".google.protobuf.DescriptorProto.enumType: array expected");for(N.enumType=[],A=0;A<c.enumType.length;++A){if(typeof c.enumType[A]!="object")throw TypeError(".google.protobuf.DescriptorProto.enumType: object expected");N.enumType[A]=o.google.protobuf.EnumDescriptorProto.fromObject(c.enumType[A])}}if(c.extensionRange){if(!Array.isArray(c.extensionRange))throw TypeError(".google.protobuf.DescriptorProto.extensionRange: array expected");for(N.extensionRange=[],A=0;A<c.extensionRange.length;++A){if(typeof c.extensionRange[A]!="object")throw TypeError(".google.protobuf.DescriptorProto.extensionRange: object expected");N.extensionRange[A]=o.google.protobuf.DescriptorProto.ExtensionRange.fromObject(c.extensionRange[A])}}if(c.oneofDecl){if(!Array.isArray(c.oneofDecl))throw TypeError(".google.protobuf.DescriptorProto.oneofDecl: array expected");for(N.oneofDecl=[],A=0;A<c.oneofDecl.length;++A){if(typeof c.oneofDecl[A]!="object")throw TypeError(".google.protobuf.DescriptorProto.oneofDecl: object expected");N.oneofDecl[A]=o.google.protobuf.OneofDescriptorProto.fromObject(c.oneofDecl[A])}}if(c.options!=null){if(typeof c.options!="object")throw TypeError(".google.protobuf.DescriptorProto.options: object expected");N.options=o.google.protobuf.MessageOptions.fromObject(c.options)}if(c.reservedRange){if(!Array.isArray(c.reservedRange))throw TypeError(".google.protobuf.DescriptorProto.reservedRange: array expected");for(N.reservedRange=[],A=0;A<c.reservedRange.length;++A){if(typeof c.reservedRange[A]!="object")throw TypeError(".google.protobuf.DescriptorProto.reservedRange: object expected");N.reservedRange[A]=o.google.protobuf.DescriptorProto.ReservedRange.fromObject(c.reservedRange[A])}}if(c.reservedName){if(!Array.isArray(c.reservedName))throw TypeError(".google.protobuf.DescriptorProto.reservedName: array expected");for(N.reservedName=[],A=0;A<c.reservedName.length;++A)N.reservedName[A]=String(c.reservedName[A])}return N},x.toObject=function(c,N){var A={};if(((N=N||{}).arrays||N.defaults)&&(A.field=[],A.nestedType=[],A.enumType=[],A.extensionRange=[],A.extension=[],A.oneofDecl=[],A.reservedRange=[],A.reservedName=[]),N.defaults&&(A.name="",A.options=null),c.name!=null&&c.hasOwnProperty("name")&&(A.name=c.name),c.field&&c.field.length){A.field=[];for(var V=0;V<c.field.length;++V)A.field[V]=o.google.protobuf.FieldDescriptorProto.toObject(c.field[V],N)}if(c.nestedType&&c.nestedType.length)for(A.nestedType=[],V=0;V<c.nestedType.length;++V)A.nestedType[V]=o.google.protobuf.DescriptorProto.toObject(c.nestedType[V],N);if(c.enumType&&c.enumType.length)for(A.enumType=[],V=0;V<c.enumType.length;++V)A.enumType[V]=o.google.protobuf.EnumDescriptorProto.toObject(c.enumType[V],N);if(c.extensionRange&&c.extensionRange.length)for(A.extensionRange=[],V=0;V<c.extensionRange.length;++V)A.extensionRange[V]=o.google.protobuf.DescriptorProto.ExtensionRange.toObject(c.extensionRange[V],N);if(c.extension&&c.extension.length)for(A.extension=[],V=0;V<c.extension.length;++V)A.extension[V]=o.google.protobuf.FieldDescriptorProto.toObject(c.extension[V],N);if(c.options!=null&&c.hasOwnProperty("options")&&(A.options=o.google.protobuf.MessageOptions.toObject(c.options,N)),c.oneofDecl&&c.oneofDecl.length)for(A.oneofDecl=[],V=0;V<c.oneofDecl.length;++V)A.oneofDecl[V]=o.google.protobuf.OneofDescriptorProto.toObject(c.oneofDecl[V],N);if(c.reservedRange&&c.reservedRange.length)for(A.reservedRange=[],V=0;V<c.reservedRange.length;++V)A.reservedRange[V]=o.google.protobuf.DescriptorProto.ReservedRange.toObject(c.reservedRange[V],N);if(c.reservedName&&c.reservedName.length)for(A.reservedName=[],V=0;V<c.reservedName.length;++V)A.reservedName[V]=c.reservedName[V];return A},x.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},x.ExtensionRange=(j.prototype.start=0,j.prototype.end=0,j.prototype.options=null,j.create=function(c){return new j(c)},j.encode=function(c,N){return N=N||l.create(),c.start!=null&&Object.hasOwnProperty.call(c,"start")&&N.uint32(8).int32(c.start),c.end!=null&&Object.hasOwnProperty.call(c,"end")&&N.uint32(16).int32(c.end),c.options!=null&&Object.hasOwnProperty.call(c,"options")&&o.google.protobuf.ExtensionRangeOptions.encode(c.options,N.uint32(26).fork()).ldelim(),N},j.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},j.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.DescriptorProto.ExtensionRange;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:V.start=c.int32();break;case 2:V.end=c.int32();break;case 3:V.options=o.google.protobuf.ExtensionRangeOptions.decode(c,c.uint32());break;default:c.skipType(7&ne)}}return V},j.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},j.verify=function(c){return typeof c!="object"||c===null?"object expected":c.start!=null&&c.hasOwnProperty("start")&&!a.isInteger(c.start)?"start: integer expected":c.end!=null&&c.hasOwnProperty("end")&&!a.isInteger(c.end)?"end: integer expected":c.options!=null&&c.hasOwnProperty("options")&&(c=o.google.protobuf.ExtensionRangeOptions.verify(c.options),c)?"options."+c:null},j.fromObject=function(c){if(c instanceof o.google.protobuf.DescriptorProto.ExtensionRange)return c;var N=new o.google.protobuf.DescriptorProto.ExtensionRange;if(c.start!=null&&(N.start=0|c.start),c.end!=null&&(N.end=0|c.end),c.options!=null){if(typeof c.options!="object")throw TypeError(".google.protobuf.DescriptorProto.ExtensionRange.options: object expected");N.options=o.google.protobuf.ExtensionRangeOptions.fromObject(c.options)}return N},j.toObject=function(c,N){var A={};return(N=N||{}).defaults&&(A.start=0,A.end=0,A.options=null),c.start!=null&&c.hasOwnProperty("start")&&(A.start=c.start),c.end!=null&&c.hasOwnProperty("end")&&(A.end=c.end),c.options!=null&&c.hasOwnProperty("options")&&(A.options=o.google.protobuf.ExtensionRangeOptions.toObject(c.options,N)),A},j.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},j),x.ReservedRange=(D.prototype.start=0,D.prototype.end=0,D.create=function(c){return new D(c)},D.encode=function(c,N){return N=N||l.create(),c.start!=null&&Object.hasOwnProperty.call(c,"start")&&N.uint32(8).int32(c.start),c.end!=null&&Object.hasOwnProperty.call(c,"end")&&N.uint32(16).int32(c.end),N},D.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},D.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.DescriptorProto.ReservedRange;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:V.start=c.int32();break;case 2:V.end=c.int32();break;default:c.skipType(7&ne)}}return V},D.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},D.verify=function(c){return typeof c!="object"||c===null?"object expected":c.start!=null&&c.hasOwnProperty("start")&&!a.isInteger(c.start)?"start: integer expected":c.end!=null&&c.hasOwnProperty("end")&&!a.isInteger(c.end)?"end: integer expected":null},D.fromObject=function(c){var N;return c instanceof o.google.protobuf.DescriptorProto.ReservedRange?c:(N=new o.google.protobuf.DescriptorProto.ReservedRange,c.start!=null&&(N.start=0|c.start),c.end!=null&&(N.end=0|c.end),N)},D.toObject=function(c,N){var A={};return(N=N||{}).defaults&&(A.start=0,A.end=0),c.start!=null&&c.hasOwnProperty("start")&&(A.start=c.start),c.end!=null&&c.hasOwnProperty("end")&&(A.end=c.end),A},D.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},D),x),g.ExtensionRangeOptions=(k.prototype.uninterpretedOption=a.emptyArray,k.create=function(c){return new k(c)},k.encode=function(c,N){if(N=N||l.create(),c.uninterpretedOption!=null&&c.uninterpretedOption.length)for(var A=0;A<c.uninterpretedOption.length;++A)o.google.protobuf.UninterpretedOption.encode(c.uninterpretedOption[A],N.uint32(7994).fork()).ldelim();return N},k.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},k.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.ExtensionRangeOptions;c.pos<A;){var ne=c.uint32();ne>>>3==999?(V.uninterpretedOption&&V.uninterpretedOption.length||(V.uninterpretedOption=[]),V.uninterpretedOption.push(o.google.protobuf.UninterpretedOption.decode(c,c.uint32()))):c.skipType(7&ne)}return V},k.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},k.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.uninterpretedOption!=null&&c.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(c.uninterpretedOption))return"uninterpretedOption: array expected";for(var N=0;N<c.uninterpretedOption.length;++N){var A=o.google.protobuf.UninterpretedOption.verify(c.uninterpretedOption[N]);if(A)return"uninterpretedOption."+A}}return null},k.fromObject=function(c){if(c instanceof o.google.protobuf.ExtensionRangeOptions)return c;var N=new o.google.protobuf.ExtensionRangeOptions;if(c.uninterpretedOption){if(!Array.isArray(c.uninterpretedOption))throw TypeError(".google.protobuf.ExtensionRangeOptions.uninterpretedOption: array expected");N.uninterpretedOption=[];for(var A=0;A<c.uninterpretedOption.length;++A){if(typeof c.uninterpretedOption[A]!="object")throw TypeError(".google.protobuf.ExtensionRangeOptions.uninterpretedOption: object expected");N.uninterpretedOption[A]=o.google.protobuf.UninterpretedOption.fromObject(c.uninterpretedOption[A])}}return N},k.toObject=function(c,N){var A={};if(((N=N||{}).arrays||N.defaults)&&(A.uninterpretedOption=[]),c.uninterpretedOption&&c.uninterpretedOption.length){A.uninterpretedOption=[];for(var V=0;V<c.uninterpretedOption.length;++V)A.uninterpretedOption[V]=o.google.protobuf.UninterpretedOption.toObject(c.uninterpretedOption[V],N)}return A},k.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},k),g.FieldDescriptorProto=(q.prototype.name="",q.prototype.number=0,q.prototype.label=1,q.prototype.type=1,q.prototype.typeName="",q.prototype.extendee="",q.prototype.defaultValue="",q.prototype.oneofIndex=0,q.prototype.jsonName="",q.prototype.options=null,q.prototype.proto3Optional=!1,q.create=function(c){return new q(c)},q.encode=function(c,N){return N=N||l.create(),c.name!=null&&Object.hasOwnProperty.call(c,"name")&&N.uint32(10).string(c.name),c.extendee!=null&&Object.hasOwnProperty.call(c,"extendee")&&N.uint32(18).string(c.extendee),c.number!=null&&Object.hasOwnProperty.call(c,"number")&&N.uint32(24).int32(c.number),c.label!=null&&Object.hasOwnProperty.call(c,"label")&&N.uint32(32).int32(c.label),c.type!=null&&Object.hasOwnProperty.call(c,"type")&&N.uint32(40).int32(c.type),c.typeName!=null&&Object.hasOwnProperty.call(c,"typeName")&&N.uint32(50).string(c.typeName),c.defaultValue!=null&&Object.hasOwnProperty.call(c,"defaultValue")&&N.uint32(58).string(c.defaultValue),c.options!=null&&Object.hasOwnProperty.call(c,"options")&&o.google.protobuf.FieldOptions.encode(c.options,N.uint32(66).fork()).ldelim(),c.oneofIndex!=null&&Object.hasOwnProperty.call(c,"oneofIndex")&&N.uint32(72).int32(c.oneofIndex),c.jsonName!=null&&Object.hasOwnProperty.call(c,"jsonName")&&N.uint32(82).string(c.jsonName),c.proto3Optional!=null&&Object.hasOwnProperty.call(c,"proto3Optional")&&N.uint32(136).bool(c.proto3Optional),N},q.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},q.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.FieldDescriptorProto;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:V.name=c.string();break;case 3:V.number=c.int32();break;case 4:V.label=c.int32();break;case 5:V.type=c.int32();break;case 6:V.typeName=c.string();break;case 2:V.extendee=c.string();break;case 7:V.defaultValue=c.string();break;case 9:V.oneofIndex=c.int32();break;case 10:V.jsonName=c.string();break;case 8:V.options=o.google.protobuf.FieldOptions.decode(c,c.uint32());break;case 17:V.proto3Optional=c.bool();break;default:c.skipType(7&ne)}}return V},q.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},q.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.name!=null&&c.hasOwnProperty("name")&&!a.isString(c.name))return"name: string expected";if(c.number!=null&&c.hasOwnProperty("number")&&!a.isInteger(c.number))return"number: integer expected";if(c.label!=null&&c.hasOwnProperty("label"))switch(c.label){default:return"label: enum value expected";case 1:case 2:case 3:}if(c.type!=null&&c.hasOwnProperty("type"))switch(c.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:}if(c.typeName!=null&&c.hasOwnProperty("typeName")&&!a.isString(c.typeName))return"typeName: string expected";if(c.extendee!=null&&c.hasOwnProperty("extendee")&&!a.isString(c.extendee))return"extendee: string expected";if(c.defaultValue!=null&&c.hasOwnProperty("defaultValue")&&!a.isString(c.defaultValue))return"defaultValue: string expected";if(c.oneofIndex!=null&&c.hasOwnProperty("oneofIndex")&&!a.isInteger(c.oneofIndex))return"oneofIndex: integer expected";if(c.jsonName!=null&&c.hasOwnProperty("jsonName")&&!a.isString(c.jsonName))return"jsonName: string expected";if(c.options!=null&&c.hasOwnProperty("options")){var N=o.google.protobuf.FieldOptions.verify(c.options);if(N)return"options."+N}return c.proto3Optional!=null&&c.hasOwnProperty("proto3Optional")&&typeof c.proto3Optional!="boolean"?"proto3Optional: boolean expected":null},q.fromObject=function(c){if(c instanceof o.google.protobuf.FieldDescriptorProto)return c;var N=new o.google.protobuf.FieldDescriptorProto;switch(c.name!=null&&(N.name=String(c.name)),c.number!=null&&(N.number=0|c.number),c.label){case"LABEL_OPTIONAL":case 1:N.label=1;break;case"LABEL_REQUIRED":case 2:N.label=2;break;case"LABEL_REPEATED":case 3:N.label=3}switch(c.type){case"TYPE_DOUBLE":case 1:N.type=1;break;case"TYPE_FLOAT":case 2:N.type=2;break;case"TYPE_INT64":case 3:N.type=3;break;case"TYPE_UINT64":case 4:N.type=4;break;case"TYPE_INT32":case 5:N.type=5;break;case"TYPE_FIXED64":case 6:N.type=6;break;case"TYPE_FIXED32":case 7:N.type=7;break;case"TYPE_BOOL":case 8:N.type=8;break;case"TYPE_STRING":case 9:N.type=9;break;case"TYPE_GROUP":case 10:N.type=10;break;case"TYPE_MESSAGE":case 11:N.type=11;break;case"TYPE_BYTES":case 12:N.type=12;break;case"TYPE_UINT32":case 13:N.type=13;break;case"TYPE_ENUM":case 14:N.type=14;break;case"TYPE_SFIXED32":case 15:N.type=15;break;case"TYPE_SFIXED64":case 16:N.type=16;break;case"TYPE_SINT32":case 17:N.type=17;break;case"TYPE_SINT64":case 18:N.type=18}if(c.typeName!=null&&(N.typeName=String(c.typeName)),c.extendee!=null&&(N.extendee=String(c.extendee)),c.defaultValue!=null&&(N.defaultValue=String(c.defaultValue)),c.oneofIndex!=null&&(N.oneofIndex=0|c.oneofIndex),c.jsonName!=null&&(N.jsonName=String(c.jsonName)),c.options!=null){if(typeof c.options!="object")throw TypeError(".google.protobuf.FieldDescriptorProto.options: object expected");N.options=o.google.protobuf.FieldOptions.fromObject(c.options)}return c.proto3Optional!=null&&(N.proto3Optional=!!c.proto3Optional),N},q.toObject=function(c,N){var A={};return(N=N||{}).defaults&&(A.name="",A.extendee="",A.number=0,A.label=N.enums===String?"LABEL_OPTIONAL":1,A.type=N.enums===String?"TYPE_DOUBLE":1,A.typeName="",A.defaultValue="",A.options=null,A.oneofIndex=0,A.jsonName="",A.proto3Optional=!1),c.name!=null&&c.hasOwnProperty("name")&&(A.name=c.name),c.extendee!=null&&c.hasOwnProperty("extendee")&&(A.extendee=c.extendee),c.number!=null&&c.hasOwnProperty("number")&&(A.number=c.number),c.label!=null&&c.hasOwnProperty("label")&&(A.label=N.enums===String?o.google.protobuf.FieldDescriptorProto.Label[c.label]:c.label),c.type!=null&&c.hasOwnProperty("type")&&(A.type=N.enums===String?o.google.protobuf.FieldDescriptorProto.Type[c.type]:c.type),c.typeName!=null&&c.hasOwnProperty("typeName")&&(A.typeName=c.typeName),c.defaultValue!=null&&c.hasOwnProperty("defaultValue")&&(A.defaultValue=c.defaultValue),c.options!=null&&c.hasOwnProperty("options")&&(A.options=o.google.protobuf.FieldOptions.toObject(c.options,N)),c.oneofIndex!=null&&c.hasOwnProperty("oneofIndex")&&(A.oneofIndex=c.oneofIndex),c.jsonName!=null&&c.hasOwnProperty("jsonName")&&(A.jsonName=c.jsonName),c.proto3Optional!=null&&c.hasOwnProperty("proto3Optional")&&(A.proto3Optional=c.proto3Optional),A},q.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},q.Type=(s={},(p=Object.create(s))[s[1]="TYPE_DOUBLE"]=1,p[s[2]="TYPE_FLOAT"]=2,p[s[3]="TYPE_INT64"]=3,p[s[4]="TYPE_UINT64"]=4,p[s[5]="TYPE_INT32"]=5,p[s[6]="TYPE_FIXED64"]=6,p[s[7]="TYPE_FIXED32"]=7,p[s[8]="TYPE_BOOL"]=8,p[s[9]="TYPE_STRING"]=9,p[s[10]="TYPE_GROUP"]=10,p[s[11]="TYPE_MESSAGE"]=11,p[s[12]="TYPE_BYTES"]=12,p[s[13]="TYPE_UINT32"]=13,p[s[14]="TYPE_ENUM"]=14,p[s[15]="TYPE_SFIXED32"]=15,p[s[16]="TYPE_SFIXED64"]=16,p[s[17]="TYPE_SINT32"]=17,p[s[18]="TYPE_SINT64"]=18,p),q.Label=(s={},(p=Object.create(s))[s[1]="LABEL_OPTIONAL"]=1,p[s[2]="LABEL_REQUIRED"]=2,p[s[3]="LABEL_REPEATED"]=3,p),q),g.OneofDescriptorProto=(G.prototype.name="",G.prototype.options=null,G.create=function(c){return new G(c)},G.encode=function(c,N){return N=N||l.create(),c.name!=null&&Object.hasOwnProperty.call(c,"name")&&N.uint32(10).string(c.name),c.options!=null&&Object.hasOwnProperty.call(c,"options")&&o.google.protobuf.OneofOptions.encode(c.options,N.uint32(18).fork()).ldelim(),N},G.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},G.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.OneofDescriptorProto;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:V.name=c.string();break;case 2:V.options=o.google.protobuf.OneofOptions.decode(c,c.uint32());break;default:c.skipType(7&ne)}}return V},G.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},G.verify=function(c){return typeof c!="object"||c===null?"object expected":c.name!=null&&c.hasOwnProperty("name")&&!a.isString(c.name)?"name: string expected":c.options!=null&&c.hasOwnProperty("options")&&(c=o.google.protobuf.OneofOptions.verify(c.options),c)?"options."+c:null},G.fromObject=function(c){if(c instanceof o.google.protobuf.OneofDescriptorProto)return c;var N=new o.google.protobuf.OneofDescriptorProto;if(c.name!=null&&(N.name=String(c.name)),c.options!=null){if(typeof c.options!="object")throw TypeError(".google.protobuf.OneofDescriptorProto.options: object expected");N.options=o.google.protobuf.OneofOptions.fromObject(c.options)}return N},G.toObject=function(c,N){var A={};return(N=N||{}).defaults&&(A.name="",A.options=null),c.name!=null&&c.hasOwnProperty("name")&&(A.name=c.name),c.options!=null&&c.hasOwnProperty("options")&&(A.options=o.google.protobuf.OneofOptions.toObject(c.options,N)),A},G.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},G),g.EnumDescriptorProto=($.prototype.name="",$.prototype.value=a.emptyArray,$.prototype.options=null,$.prototype.reservedRange=a.emptyArray,$.prototype.reservedName=a.emptyArray,$.create=function(c){return new $(c)},$.encode=function(c,N){if(N=N||l.create(),c.name!=null&&Object.hasOwnProperty.call(c,"name")&&N.uint32(10).string(c.name),c.value!=null&&c.value.length)for(var A=0;A<c.value.length;++A)o.google.protobuf.EnumValueDescriptorProto.encode(c.value[A],N.uint32(18).fork()).ldelim();if(c.options!=null&&Object.hasOwnProperty.call(c,"options")&&o.google.protobuf.EnumOptions.encode(c.options,N.uint32(26).fork()).ldelim(),c.reservedRange!=null&&c.reservedRange.length)for(A=0;A<c.reservedRange.length;++A)o.google.protobuf.EnumDescriptorProto.EnumReservedRange.encode(c.reservedRange[A],N.uint32(34).fork()).ldelim();if(c.reservedName!=null&&c.reservedName.length)for(A=0;A<c.reservedName.length;++A)N.uint32(42).string(c.reservedName[A]);return N},$.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},$.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.EnumDescriptorProto;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:V.name=c.string();break;case 2:V.value&&V.value.length||(V.value=[]),V.value.push(o.google.protobuf.EnumValueDescriptorProto.decode(c,c.uint32()));break;case 3:V.options=o.google.protobuf.EnumOptions.decode(c,c.uint32());break;case 4:V.reservedRange&&V.reservedRange.length||(V.reservedRange=[]),V.reservedRange.push(o.google.protobuf.EnumDescriptorProto.EnumReservedRange.decode(c,c.uint32()));break;case 5:V.reservedName&&V.reservedName.length||(V.reservedName=[]),V.reservedName.push(c.string());break;default:c.skipType(7&ne)}}return V},$.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},$.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.name!=null&&c.hasOwnProperty("name")&&!a.isString(c.name))return"name: string expected";if(c.value!=null&&c.hasOwnProperty("value")){if(!Array.isArray(c.value))return"value: array expected";for(var N=0;N<c.value.length;++N)if(A=o.google.protobuf.EnumValueDescriptorProto.verify(c.value[N]))return"value."+A}if(c.options!=null&&c.hasOwnProperty("options")&&(A=o.google.protobuf.EnumOptions.verify(c.options)))return"options."+A;if(c.reservedRange!=null&&c.hasOwnProperty("reservedRange")){if(!Array.isArray(c.reservedRange))return"reservedRange: array expected";for(var A,N=0;N<c.reservedRange.length;++N)if(A=o.google.protobuf.EnumDescriptorProto.EnumReservedRange.verify(c.reservedRange[N]))return"reservedRange."+A}if(c.reservedName!=null&&c.hasOwnProperty("reservedName")){if(!Array.isArray(c.reservedName))return"reservedName: array expected";for(N=0;N<c.reservedName.length;++N)if(!a.isString(c.reservedName[N]))return"reservedName: string[] expected"}return null},$.fromObject=function(c){if(c instanceof o.google.protobuf.EnumDescriptorProto)return c;var N=new o.google.protobuf.EnumDescriptorProto;if(c.name!=null&&(N.name=String(c.name)),c.value){if(!Array.isArray(c.value))throw TypeError(".google.protobuf.EnumDescriptorProto.value: array expected");N.value=[];for(var A=0;A<c.value.length;++A){if(typeof c.value[A]!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.value: object expected");N.value[A]=o.google.protobuf.EnumValueDescriptorProto.fromObject(c.value[A])}}if(c.options!=null){if(typeof c.options!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.options: object expected");N.options=o.google.protobuf.EnumOptions.fromObject(c.options)}if(c.reservedRange){if(!Array.isArray(c.reservedRange))throw TypeError(".google.protobuf.EnumDescriptorProto.reservedRange: array expected");for(N.reservedRange=[],A=0;A<c.reservedRange.length;++A){if(typeof c.reservedRange[A]!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.reservedRange: object expected");N.reservedRange[A]=o.google.protobuf.EnumDescriptorProto.EnumReservedRange.fromObject(c.reservedRange[A])}}if(c.reservedName){if(!Array.isArray(c.reservedName))throw TypeError(".google.protobuf.EnumDescriptorProto.reservedName: array expected");for(N.reservedName=[],A=0;A<c.reservedName.length;++A)N.reservedName[A]=String(c.reservedName[A])}return N},$.toObject=function(c,N){var A={};if(((N=N||{}).arrays||N.defaults)&&(A.value=[],A.reservedRange=[],A.reservedName=[]),N.defaults&&(A.name="",A.options=null),c.name!=null&&c.hasOwnProperty("name")&&(A.name=c.name),c.value&&c.value.length){A.value=[];for(var V=0;V<c.value.length;++V)A.value[V]=o.google.protobuf.EnumValueDescriptorProto.toObject(c.value[V],N)}if(c.options!=null&&c.hasOwnProperty("options")&&(A.options=o.google.protobuf.EnumOptions.toObject(c.options,N)),c.reservedRange&&c.reservedRange.length)for(A.reservedRange=[],V=0;V<c.reservedRange.length;++V)A.reservedRange[V]=o.google.protobuf.EnumDescriptorProto.EnumReservedRange.toObject(c.reservedRange[V],N);if(c.reservedName&&c.reservedName.length)for(A.reservedName=[],V=0;V<c.reservedName.length;++V)A.reservedName[V]=c.reservedName[V];return A},$.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},$.EnumReservedRange=(W.prototype.start=0,W.prototype.end=0,W.create=function(c){return new W(c)},W.encode=function(c,N){return N=N||l.create(),c.start!=null&&Object.hasOwnProperty.call(c,"start")&&N.uint32(8).int32(c.start),c.end!=null&&Object.hasOwnProperty.call(c,"end")&&N.uint32(16).int32(c.end),N},W.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},W.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.EnumDescriptorProto.EnumReservedRange;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:V.start=c.int32();break;case 2:V.end=c.int32();break;default:c.skipType(7&ne)}}return V},W.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},W.verify=function(c){return typeof c!="object"||c===null?"object expected":c.start!=null&&c.hasOwnProperty("start")&&!a.isInteger(c.start)?"start: integer expected":c.end!=null&&c.hasOwnProperty("end")&&!a.isInteger(c.end)?"end: integer expected":null},W.fromObject=function(c){var N;return c instanceof o.google.protobuf.EnumDescriptorProto.EnumReservedRange?c:(N=new o.google.protobuf.EnumDescriptorProto.EnumReservedRange,c.start!=null&&(N.start=0|c.start),c.end!=null&&(N.end=0|c.end),N)},W.toObject=function(c,N){var A={};return(N=N||{}).defaults&&(A.start=0,A.end=0),c.start!=null&&c.hasOwnProperty("start")&&(A.start=c.start),c.end!=null&&c.hasOwnProperty("end")&&(A.end=c.end),A},W.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},W),$),g.EnumValueDescriptorProto=(K.prototype.name="",K.prototype.number=0,K.prototype.options=null,K.create=function(c){return new K(c)},K.encode=function(c,N){return N=N||l.create(),c.name!=null&&Object.hasOwnProperty.call(c,"name")&&N.uint32(10).string(c.name),c.number!=null&&Object.hasOwnProperty.call(c,"number")&&N.uint32(16).int32(c.number),c.options!=null&&Object.hasOwnProperty.call(c,"options")&&o.google.protobuf.EnumValueOptions.encode(c.options,N.uint32(26).fork()).ldelim(),N},K.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},K.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.EnumValueDescriptorProto;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:V.name=c.string();break;case 2:V.number=c.int32();break;case 3:V.options=o.google.protobuf.EnumValueOptions.decode(c,c.uint32());break;default:c.skipType(7&ne)}}return V},K.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},K.verify=function(c){return typeof c!="object"||c===null?"object expected":c.name!=null&&c.hasOwnProperty("name")&&!a.isString(c.name)?"name: string expected":c.number!=null&&c.hasOwnProperty("number")&&!a.isInteger(c.number)?"number: integer expected":c.options!=null&&c.hasOwnProperty("options")&&(c=o.google.protobuf.EnumValueOptions.verify(c.options),c)?"options."+c:null},K.fromObject=function(c){if(c instanceof o.google.protobuf.EnumValueDescriptorProto)return c;var N=new o.google.protobuf.EnumValueDescriptorProto;if(c.name!=null&&(N.name=String(c.name)),c.number!=null&&(N.number=0|c.number),c.options!=null){if(typeof c.options!="object")throw TypeError(".google.protobuf.EnumValueDescriptorProto.options: object expected");N.options=o.google.protobuf.EnumValueOptions.fromObject(c.options)}return N},K.toObject=function(c,N){var A={};return(N=N||{}).defaults&&(A.name="",A.number=0,A.options=null),c.name!=null&&c.hasOwnProperty("name")&&(A.name=c.name),c.number!=null&&c.hasOwnProperty("number")&&(A.number=c.number),c.options!=null&&c.hasOwnProperty("options")&&(A.options=o.google.protobuf.EnumValueOptions.toObject(c.options,N)),A},K.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},K),g.ServiceDescriptorProto=(z.prototype.name="",z.prototype.method=a.emptyArray,z.prototype.options=null,z.create=function(c){return new z(c)},z.encode=function(c,N){if(N=N||l.create(),c.name!=null&&Object.hasOwnProperty.call(c,"name")&&N.uint32(10).string(c.name),c.method!=null&&c.method.length)for(var A=0;A<c.method.length;++A)o.google.protobuf.MethodDescriptorProto.encode(c.method[A],N.uint32(18).fork()).ldelim();return c.options!=null&&Object.hasOwnProperty.call(c,"options")&&o.google.protobuf.ServiceOptions.encode(c.options,N.uint32(26).fork()).ldelim(),N},z.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},z.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.ServiceDescriptorProto;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:V.name=c.string();break;case 2:V.method&&V.method.length||(V.method=[]),V.method.push(o.google.protobuf.MethodDescriptorProto.decode(c,c.uint32()));break;case 3:V.options=o.google.protobuf.ServiceOptions.decode(c,c.uint32());break;default:c.skipType(7&ne)}}return V},z.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},z.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.name!=null&&c.hasOwnProperty("name")&&!a.isString(c.name))return"name: string expected";if(c.method!=null&&c.hasOwnProperty("method")){if(!Array.isArray(c.method))return"method: array expected";for(var N=0;N<c.method.length;++N)if(A=o.google.protobuf.MethodDescriptorProto.verify(c.method[N]))return"method."+A}var A;return c.options!=null&&c.hasOwnProperty("options")&&(A=o.google.protobuf.ServiceOptions.verify(c.options))?"options."+A:null},z.fromObject=function(c){if(c instanceof o.google.protobuf.ServiceDescriptorProto)return c;var N=new o.google.protobuf.ServiceDescriptorProto;if(c.name!=null&&(N.name=String(c.name)),c.method){if(!Array.isArray(c.method))throw TypeError(".google.protobuf.ServiceDescriptorProto.method: array expected");N.method=[];for(var A=0;A<c.method.length;++A){if(typeof c.method[A]!="object")throw TypeError(".google.protobuf.ServiceDescriptorProto.method: object expected");N.method[A]=o.google.protobuf.MethodDescriptorProto.fromObject(c.method[A])}}if(c.options!=null){if(typeof c.options!="object")throw TypeError(".google.protobuf.ServiceDescriptorProto.options: object expected");N.options=o.google.protobuf.ServiceOptions.fromObject(c.options)}return N},z.toObject=function(c,N){var A={};if(((N=N||{}).arrays||N.defaults)&&(A.method=[]),N.defaults&&(A.name="",A.options=null),c.name!=null&&c.hasOwnProperty("name")&&(A.name=c.name),c.method&&c.method.length){A.method=[];for(var V=0;V<c.method.length;++V)A.method[V]=o.google.protobuf.MethodDescriptorProto.toObject(c.method[V],N)}return c.options!=null&&c.hasOwnProperty("options")&&(A.options=o.google.protobuf.ServiceOptions.toObject(c.options,N)),A},z.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},z),g.MethodDescriptorProto=(Q.prototype.name="",Q.prototype.inputType="",Q.prototype.outputType="",Q.prototype.options=null,Q.prototype.clientStreaming=!1,Q.prototype.serverStreaming=!1,Q.create=function(c){return new Q(c)},Q.encode=function(c,N){return N=N||l.create(),c.name!=null&&Object.hasOwnProperty.call(c,"name")&&N.uint32(10).string(c.name),c.inputType!=null&&Object.hasOwnProperty.call(c,"inputType")&&N.uint32(18).string(c.inputType),c.outputType!=null&&Object.hasOwnProperty.call(c,"outputType")&&N.uint32(26).string(c.outputType),c.options!=null&&Object.hasOwnProperty.call(c,"options")&&o.google.protobuf.MethodOptions.encode(c.options,N.uint32(34).fork()).ldelim(),c.clientStreaming!=null&&Object.hasOwnProperty.call(c,"clientStreaming")&&N.uint32(40).bool(c.clientStreaming),c.serverStreaming!=null&&Object.hasOwnProperty.call(c,"serverStreaming")&&N.uint32(48).bool(c.serverStreaming),N},Q.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},Q.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.MethodDescriptorProto;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:V.name=c.string();break;case 2:V.inputType=c.string();break;case 3:V.outputType=c.string();break;case 4:V.options=o.google.protobuf.MethodOptions.decode(c,c.uint32());break;case 5:V.clientStreaming=c.bool();break;case 6:V.serverStreaming=c.bool();break;default:c.skipType(7&ne)}}return V},Q.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},Q.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.name!=null&&c.hasOwnProperty("name")&&!a.isString(c.name))return"name: string expected";if(c.inputType!=null&&c.hasOwnProperty("inputType")&&!a.isString(c.inputType))return"inputType: string expected";if(c.outputType!=null&&c.hasOwnProperty("outputType")&&!a.isString(c.outputType))return"outputType: string expected";if(c.options!=null&&c.hasOwnProperty("options")){var N=o.google.protobuf.MethodOptions.verify(c.options);if(N)return"options."+N}return c.clientStreaming!=null&&c.hasOwnProperty("clientStreaming")&&typeof c.clientStreaming!="boolean"?"clientStreaming: boolean expected":c.serverStreaming!=null&&c.hasOwnProperty("serverStreaming")&&typeof c.serverStreaming!="boolean"?"serverStreaming: boolean expected":null},Q.fromObject=function(c){if(c instanceof o.google.protobuf.MethodDescriptorProto)return c;var N=new o.google.protobuf.MethodDescriptorProto;if(c.name!=null&&(N.name=String(c.name)),c.inputType!=null&&(N.inputType=String(c.inputType)),c.outputType!=null&&(N.outputType=String(c.outputType)),c.options!=null){if(typeof c.options!="object")throw TypeError(".google.protobuf.MethodDescriptorProto.options: object expected");N.options=o.google.protobuf.MethodOptions.fromObject(c.options)}return c.clientStreaming!=null&&(N.clientStreaming=!!c.clientStreaming),c.serverStreaming!=null&&(N.serverStreaming=!!c.serverStreaming),N},Q.toObject=function(c,N){var A={};return(N=N||{}).defaults&&(A.name="",A.inputType="",A.outputType="",A.options=null,A.clientStreaming=!1,A.serverStreaming=!1),c.name!=null&&c.hasOwnProperty("name")&&(A.name=c.name),c.inputType!=null&&c.hasOwnProperty("inputType")&&(A.inputType=c.inputType),c.outputType!=null&&c.hasOwnProperty("outputType")&&(A.outputType=c.outputType),c.options!=null&&c.hasOwnProperty("options")&&(A.options=o.google.protobuf.MethodOptions.toObject(c.options,N)),c.clientStreaming!=null&&c.hasOwnProperty("clientStreaming")&&(A.clientStreaming=c.clientStreaming),c.serverStreaming!=null&&c.hasOwnProperty("serverStreaming")&&(A.serverStreaming=c.serverStreaming),A},Q.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Q),g.FileOptions=(Y.prototype.javaPackage="",Y.prototype.javaOuterClassname="",Y.prototype.javaMultipleFiles=!1,Y.prototype.javaGenerateEqualsAndHash=!1,Y.prototype.javaStringCheckUtf8=!1,Y.prototype.optimizeFor=1,Y.prototype.goPackage="",Y.prototype.ccGenericServices=!1,Y.prototype.javaGenericServices=!1,Y.prototype.pyGenericServices=!1,Y.prototype.phpGenericServices=!1,Y.prototype.deprecated=!1,Y.prototype.ccEnableArenas=!0,Y.prototype.objcClassPrefix="",Y.prototype.csharpNamespace="",Y.prototype.swiftPrefix="",Y.prototype.phpClassPrefix="",Y.prototype.phpNamespace="",Y.prototype.phpMetadataNamespace="",Y.prototype.rubyPackage="",Y.prototype.uninterpretedOption=a.emptyArray,Y.create=function(c){return new Y(c)},Y.encode=function(c,N){if(N=N||l.create(),c.javaPackage!=null&&Object.hasOwnProperty.call(c,"javaPackage")&&N.uint32(10).string(c.javaPackage),c.javaOuterClassname!=null&&Object.hasOwnProperty.call(c,"javaOuterClassname")&&N.uint32(66).string(c.javaOuterClassname),c.optimizeFor!=null&&Object.hasOwnProperty.call(c,"optimizeFor")&&N.uint32(72).int32(c.optimizeFor),c.javaMultipleFiles!=null&&Object.hasOwnProperty.call(c,"javaMultipleFiles")&&N.uint32(80).bool(c.javaMultipleFiles),c.goPackage!=null&&Object.hasOwnProperty.call(c,"goPackage")&&N.uint32(90).string(c.goPackage),c.ccGenericServices!=null&&Object.hasOwnProperty.call(c,"ccGenericServices")&&N.uint32(128).bool(c.ccGenericServices),c.javaGenericServices!=null&&Object.hasOwnProperty.call(c,"javaGenericServices")&&N.uint32(136).bool(c.javaGenericServices),c.pyGenericServices!=null&&Object.hasOwnProperty.call(c,"pyGenericServices")&&N.uint32(144).bool(c.pyGenericServices),c.javaGenerateEqualsAndHash!=null&&Object.hasOwnProperty.call(c,"javaGenerateEqualsAndHash")&&N.uint32(160).bool(c.javaGenerateEqualsAndHash),c.deprecated!=null&&Object.hasOwnProperty.call(c,"deprecated")&&N.uint32(184).bool(c.deprecated),c.javaStringCheckUtf8!=null&&Object.hasOwnProperty.call(c,"javaStringCheckUtf8")&&N.uint32(216).bool(c.javaStringCheckUtf8),c.ccEnableArenas!=null&&Object.hasOwnProperty.call(c,"ccEnableArenas")&&N.uint32(248).bool(c.ccEnableArenas),c.objcClassPrefix!=null&&Object.hasOwnProperty.call(c,"objcClassPrefix")&&N.uint32(290).string(c.objcClassPrefix),c.csharpNamespace!=null&&Object.hasOwnProperty.call(c,"csharpNamespace")&&N.uint32(298).string(c.csharpNamespace),c.swiftPrefix!=null&&Object.hasOwnProperty.call(c,"swiftPrefix")&&N.uint32(314).string(c.swiftPrefix),c.phpClassPrefix!=null&&Object.hasOwnProperty.call(c,"phpClassPrefix")&&N.uint32(322).string(c.phpClassPrefix),c.phpNamespace!=null&&Object.hasOwnProperty.call(c,"phpNamespace")&&N.uint32(330).string(c.phpNamespace),c.phpGenericServices!=null&&Object.hasOwnProperty.call(c,"phpGenericServices")&&N.uint32(336).bool(c.phpGenericServices),c.phpMetadataNamespace!=null&&Object.hasOwnProperty.call(c,"phpMetadataNamespace")&&N.uint32(354).string(c.phpMetadataNamespace),c.rubyPackage!=null&&Object.hasOwnProperty.call(c,"rubyPackage")&&N.uint32(362).string(c.rubyPackage),c.uninterpretedOption!=null&&c.uninterpretedOption.length)for(var A=0;A<c.uninterpretedOption.length;++A)o.google.protobuf.UninterpretedOption.encode(c.uninterpretedOption[A],N.uint32(7994).fork()).ldelim();return N},Y.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},Y.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.FileOptions;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:V.javaPackage=c.string();break;case 8:V.javaOuterClassname=c.string();break;case 10:V.javaMultipleFiles=c.bool();break;case 20:V.javaGenerateEqualsAndHash=c.bool();break;case 27:V.javaStringCheckUtf8=c.bool();break;case 9:V.optimizeFor=c.int32();break;case 11:V.goPackage=c.string();break;case 16:V.ccGenericServices=c.bool();break;case 17:V.javaGenericServices=c.bool();break;case 18:V.pyGenericServices=c.bool();break;case 42:V.phpGenericServices=c.bool();break;case 23:V.deprecated=c.bool();break;case 31:V.ccEnableArenas=c.bool();break;case 36:V.objcClassPrefix=c.string();break;case 37:V.csharpNamespace=c.string();break;case 39:V.swiftPrefix=c.string();break;case 40:V.phpClassPrefix=c.string();break;case 41:V.phpNamespace=c.string();break;case 44:V.phpMetadataNamespace=c.string();break;case 45:V.rubyPackage=c.string();break;case 999:V.uninterpretedOption&&V.uninterpretedOption.length||(V.uninterpretedOption=[]),V.uninterpretedOption.push(o.google.protobuf.UninterpretedOption.decode(c,c.uint32()));break;default:c.skipType(7&ne)}}return V},Y.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},Y.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.javaPackage!=null&&c.hasOwnProperty("javaPackage")&&!a.isString(c.javaPackage))return"javaPackage: string expected";if(c.javaOuterClassname!=null&&c.hasOwnProperty("javaOuterClassname")&&!a.isString(c.javaOuterClassname))return"javaOuterClassname: string expected";if(c.javaMultipleFiles!=null&&c.hasOwnProperty("javaMultipleFiles")&&typeof c.javaMultipleFiles!="boolean")return"javaMultipleFiles: boolean expected";if(c.javaGenerateEqualsAndHash!=null&&c.hasOwnProperty("javaGenerateEqualsAndHash")&&typeof c.javaGenerateEqualsAndHash!="boolean")return"javaGenerateEqualsAndHash: boolean expected";if(c.javaStringCheckUtf8!=null&&c.hasOwnProperty("javaStringCheckUtf8")&&typeof c.javaStringCheckUtf8!="boolean")return"javaStringCheckUtf8: boolean expected";if(c.optimizeFor!=null&&c.hasOwnProperty("optimizeFor"))switch(c.optimizeFor){default:return"optimizeFor: enum value expected";case 1:case 2:case 3:}if(c.goPackage!=null&&c.hasOwnProperty("goPackage")&&!a.isString(c.goPackage))return"goPackage: string expected";if(c.ccGenericServices!=null&&c.hasOwnProperty("ccGenericServices")&&typeof c.ccGenericServices!="boolean")return"ccGenericServices: boolean expected";if(c.javaGenericServices!=null&&c.hasOwnProperty("javaGenericServices")&&typeof c.javaGenericServices!="boolean")return"javaGenericServices: boolean expected";if(c.pyGenericServices!=null&&c.hasOwnProperty("pyGenericServices")&&typeof c.pyGenericServices!="boolean")return"pyGenericServices: boolean expected";if(c.phpGenericServices!=null&&c.hasOwnProperty("phpGenericServices")&&typeof c.phpGenericServices!="boolean")return"phpGenericServices: boolean expected";if(c.deprecated!=null&&c.hasOwnProperty("deprecated")&&typeof c.deprecated!="boolean")return"deprecated: boolean expected";if(c.ccEnableArenas!=null&&c.hasOwnProperty("ccEnableArenas")&&typeof c.ccEnableArenas!="boolean")return"ccEnableArenas: boolean expected";if(c.objcClassPrefix!=null&&c.hasOwnProperty("objcClassPrefix")&&!a.isString(c.objcClassPrefix))return"objcClassPrefix: string expected";if(c.csharpNamespace!=null&&c.hasOwnProperty("csharpNamespace")&&!a.isString(c.csharpNamespace))return"csharpNamespace: string expected";if(c.swiftPrefix!=null&&c.hasOwnProperty("swiftPrefix")&&!a.isString(c.swiftPrefix))return"swiftPrefix: string expected";if(c.phpClassPrefix!=null&&c.hasOwnProperty("phpClassPrefix")&&!a.isString(c.phpClassPrefix))return"phpClassPrefix: string expected";if(c.phpNamespace!=null&&c.hasOwnProperty("phpNamespace")&&!a.isString(c.phpNamespace))return"phpNamespace: string expected";if(c.phpMetadataNamespace!=null&&c.hasOwnProperty("phpMetadataNamespace")&&!a.isString(c.phpMetadataNamespace))return"phpMetadataNamespace: string expected";if(c.rubyPackage!=null&&c.hasOwnProperty("rubyPackage")&&!a.isString(c.rubyPackage))return"rubyPackage: string expected";if(c.uninterpretedOption!=null&&c.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(c.uninterpretedOption))return"uninterpretedOption: array expected";for(var N=0;N<c.uninterpretedOption.length;++N){var A=o.google.protobuf.UninterpretedOption.verify(c.uninterpretedOption[N]);if(A)return"uninterpretedOption."+A}}return null},Y.fromObject=function(c){if(c instanceof o.google.protobuf.FileOptions)return c;var N=new o.google.protobuf.FileOptions;switch(c.javaPackage!=null&&(N.javaPackage=String(c.javaPackage)),c.javaOuterClassname!=null&&(N.javaOuterClassname=String(c.javaOuterClassname)),c.javaMultipleFiles!=null&&(N.javaMultipleFiles=!!c.javaMultipleFiles),c.javaGenerateEqualsAndHash!=null&&(N.javaGenerateEqualsAndHash=!!c.javaGenerateEqualsAndHash),c.javaStringCheckUtf8!=null&&(N.javaStringCheckUtf8=!!c.javaStringCheckUtf8),c.optimizeFor){case"SPEED":case 1:N.optimizeFor=1;break;case"CODE_SIZE":case 2:N.optimizeFor=2;break;case"LITE_RUNTIME":case 3:N.optimizeFor=3}if(c.goPackage!=null&&(N.goPackage=String(c.goPackage)),c.ccGenericServices!=null&&(N.ccGenericServices=!!c.ccGenericServices),c.javaGenericServices!=null&&(N.javaGenericServices=!!c.javaGenericServices),c.pyGenericServices!=null&&(N.pyGenericServices=!!c.pyGenericServices),c.phpGenericServices!=null&&(N.phpGenericServices=!!c.phpGenericServices),c.deprecated!=null&&(N.deprecated=!!c.deprecated),c.ccEnableArenas!=null&&(N.ccEnableArenas=!!c.ccEnableArenas),c.objcClassPrefix!=null&&(N.objcClassPrefix=String(c.objcClassPrefix)),c.csharpNamespace!=null&&(N.csharpNamespace=String(c.csharpNamespace)),c.swiftPrefix!=null&&(N.swiftPrefix=String(c.swiftPrefix)),c.phpClassPrefix!=null&&(N.phpClassPrefix=String(c.phpClassPrefix)),c.phpNamespace!=null&&(N.phpNamespace=String(c.phpNamespace)),c.phpMetadataNamespace!=null&&(N.phpMetadataNamespace=String(c.phpMetadataNamespace)),c.rubyPackage!=null&&(N.rubyPackage=String(c.rubyPackage)),c.uninterpretedOption){if(!Array.isArray(c.uninterpretedOption))throw TypeError(".google.protobuf.FileOptions.uninterpretedOption: array expected");N.uninterpretedOption=[];for(var A=0;A<c.uninterpretedOption.length;++A){if(typeof c.uninterpretedOption[A]!="object")throw TypeError(".google.protobuf.FileOptions.uninterpretedOption: object expected");N.uninterpretedOption[A]=o.google.protobuf.UninterpretedOption.fromObject(c.uninterpretedOption[A])}}return N},Y.toObject=function(c,N){var A={};if(((N=N||{}).arrays||N.defaults)&&(A.uninterpretedOption=[]),N.defaults&&(A.javaPackage="",A.javaOuterClassname="",A.optimizeFor=N.enums===String?"SPEED":1,A.javaMultipleFiles=!1,A.goPackage="",A.ccGenericServices=!1,A.javaGenericServices=!1,A.pyGenericServices=!1,A.javaGenerateEqualsAndHash=!1,A.deprecated=!1,A.javaStringCheckUtf8=!1,A.ccEnableArenas=!0,A.objcClassPrefix="",A.csharpNamespace="",A.swiftPrefix="",A.phpClassPrefix="",A.phpNamespace="",A.phpGenericServices=!1,A.phpMetadataNamespace="",A.rubyPackage=""),c.javaPackage!=null&&c.hasOwnProperty("javaPackage")&&(A.javaPackage=c.javaPackage),c.javaOuterClassname!=null&&c.hasOwnProperty("javaOuterClassname")&&(A.javaOuterClassname=c.javaOuterClassname),c.optimizeFor!=null&&c.hasOwnProperty("optimizeFor")&&(A.optimizeFor=N.enums===String?o.google.protobuf.FileOptions.OptimizeMode[c.optimizeFor]:c.optimizeFor),c.javaMultipleFiles!=null&&c.hasOwnProperty("javaMultipleFiles")&&(A.javaMultipleFiles=c.javaMultipleFiles),c.goPackage!=null&&c.hasOwnProperty("goPackage")&&(A.goPackage=c.goPackage),c.ccGenericServices!=null&&c.hasOwnProperty("ccGenericServices")&&(A.ccGenericServices=c.ccGenericServices),c.javaGenericServices!=null&&c.hasOwnProperty("javaGenericServices")&&(A.javaGenericServices=c.javaGenericServices),c.pyGenericServices!=null&&c.hasOwnProperty("pyGenericServices")&&(A.pyGenericServices=c.pyGenericServices),c.javaGenerateEqualsAndHash!=null&&c.hasOwnProperty("javaGenerateEqualsAndHash")&&(A.javaGenerateEqualsAndHash=c.javaGenerateEqualsAndHash),c.deprecated!=null&&c.hasOwnProperty("deprecated")&&(A.deprecated=c.deprecated),c.javaStringCheckUtf8!=null&&c.hasOwnProperty("javaStringCheckUtf8")&&(A.javaStringCheckUtf8=c.javaStringCheckUtf8),c.ccEnableArenas!=null&&c.hasOwnProperty("ccEnableArenas")&&(A.ccEnableArenas=c.ccEnableArenas),c.objcClassPrefix!=null&&c.hasOwnProperty("objcClassPrefix")&&(A.objcClassPrefix=c.objcClassPrefix),c.csharpNamespace!=null&&c.hasOwnProperty("csharpNamespace")&&(A.csharpNamespace=c.csharpNamespace),c.swiftPrefix!=null&&c.hasOwnProperty("swiftPrefix")&&(A.swiftPrefix=c.swiftPrefix),c.phpClassPrefix!=null&&c.hasOwnProperty("phpClassPrefix")&&(A.phpClassPrefix=c.phpClassPrefix),c.phpNamespace!=null&&c.hasOwnProperty("phpNamespace")&&(A.phpNamespace=c.phpNamespace),c.phpGenericServices!=null&&c.hasOwnProperty("phpGenericServices")&&(A.phpGenericServices=c.phpGenericServices),c.phpMetadataNamespace!=null&&c.hasOwnProperty("phpMetadataNamespace")&&(A.phpMetadataNamespace=c.phpMetadataNamespace),c.rubyPackage!=null&&c.hasOwnProperty("rubyPackage")&&(A.rubyPackage=c.rubyPackage),c.uninterpretedOption&&c.uninterpretedOption.length){A.uninterpretedOption=[];for(var V=0;V<c.uninterpretedOption.length;++V)A.uninterpretedOption[V]=o.google.protobuf.UninterpretedOption.toObject(c.uninterpretedOption[V],N)}return A},Y.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Y.OptimizeMode=(s={},(p=Object.create(s))[s[1]="SPEED"]=1,p[s[2]="CODE_SIZE"]=2,p[s[3]="LITE_RUNTIME"]=3,p),Y),g.MessageOptions=(te.prototype.messageSetWireFormat=!1,te.prototype.noStandardDescriptorAccessor=!1,te.prototype.deprecated=!1,te.prototype.mapEntry=!1,te.prototype.uninterpretedOption=a.emptyArray,te.create=function(c){return new te(c)},te.encode=function(c,N){if(N=N||l.create(),c.messageSetWireFormat!=null&&Object.hasOwnProperty.call(c,"messageSetWireFormat")&&N.uint32(8).bool(c.messageSetWireFormat),c.noStandardDescriptorAccessor!=null&&Object.hasOwnProperty.call(c,"noStandardDescriptorAccessor")&&N.uint32(16).bool(c.noStandardDescriptorAccessor),c.deprecated!=null&&Object.hasOwnProperty.call(c,"deprecated")&&N.uint32(24).bool(c.deprecated),c.mapEntry!=null&&Object.hasOwnProperty.call(c,"mapEntry")&&N.uint32(56).bool(c.mapEntry),c.uninterpretedOption!=null&&c.uninterpretedOption.length)for(var A=0;A<c.uninterpretedOption.length;++A)o.google.protobuf.UninterpretedOption.encode(c.uninterpretedOption[A],N.uint32(7994).fork()).ldelim();return N},te.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},te.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.MessageOptions;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:V.messageSetWireFormat=c.bool();break;case 2:V.noStandardDescriptorAccessor=c.bool();break;case 3:V.deprecated=c.bool();break;case 7:V.mapEntry=c.bool();break;case 999:V.uninterpretedOption&&V.uninterpretedOption.length||(V.uninterpretedOption=[]),V.uninterpretedOption.push(o.google.protobuf.UninterpretedOption.decode(c,c.uint32()));break;default:c.skipType(7&ne)}}return V},te.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},te.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.messageSetWireFormat!=null&&c.hasOwnProperty("messageSetWireFormat")&&typeof c.messageSetWireFormat!="boolean")return"messageSetWireFormat: boolean expected";if(c.noStandardDescriptorAccessor!=null&&c.hasOwnProperty("noStandardDescriptorAccessor")&&typeof c.noStandardDescriptorAccessor!="boolean")return"noStandardDescriptorAccessor: boolean expected";if(c.deprecated!=null&&c.hasOwnProperty("deprecated")&&typeof c.deprecated!="boolean")return"deprecated: boolean expected";if(c.mapEntry!=null&&c.hasOwnProperty("mapEntry")&&typeof c.mapEntry!="boolean")return"mapEntry: boolean expected";if(c.uninterpretedOption!=null&&c.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(c.uninterpretedOption))return"uninterpretedOption: array expected";for(var N=0;N<c.uninterpretedOption.length;++N){var A=o.google.protobuf.UninterpretedOption.verify(c.uninterpretedOption[N]);if(A)return"uninterpretedOption."+A}}return null},te.fromObject=function(c){if(c instanceof o.google.protobuf.MessageOptions)return c;var N=new o.google.protobuf.MessageOptions;if(c.messageSetWireFormat!=null&&(N.messageSetWireFormat=!!c.messageSetWireFormat),c.noStandardDescriptorAccessor!=null&&(N.noStandardDescriptorAccessor=!!c.noStandardDescriptorAccessor),c.deprecated!=null&&(N.deprecated=!!c.deprecated),c.mapEntry!=null&&(N.mapEntry=!!c.mapEntry),c.uninterpretedOption){if(!Array.isArray(c.uninterpretedOption))throw TypeError(".google.protobuf.MessageOptions.uninterpretedOption: array expected");N.uninterpretedOption=[];for(var A=0;A<c.uninterpretedOption.length;++A){if(typeof c.uninterpretedOption[A]!="object")throw TypeError(".google.protobuf.MessageOptions.uninterpretedOption: object expected");N.uninterpretedOption[A]=o.google.protobuf.UninterpretedOption.fromObject(c.uninterpretedOption[A])}}return N},te.toObject=function(c,N){var A={};if(((N=N||{}).arrays||N.defaults)&&(A.uninterpretedOption=[]),N.defaults&&(A.messageSetWireFormat=!1,A.noStandardDescriptorAccessor=!1,A.deprecated=!1,A.mapEntry=!1),c.messageSetWireFormat!=null&&c.hasOwnProperty("messageSetWireFormat")&&(A.messageSetWireFormat=c.messageSetWireFormat),c.noStandardDescriptorAccessor!=null&&c.hasOwnProperty("noStandardDescriptorAccessor")&&(A.noStandardDescriptorAccessor=c.noStandardDescriptorAccessor),c.deprecated!=null&&c.hasOwnProperty("deprecated")&&(A.deprecated=c.deprecated),c.mapEntry!=null&&c.hasOwnProperty("mapEntry")&&(A.mapEntry=c.mapEntry),c.uninterpretedOption&&c.uninterpretedOption.length){A.uninterpretedOption=[];for(var V=0;V<c.uninterpretedOption.length;++V)A.uninterpretedOption[V]=o.google.protobuf.UninterpretedOption.toObject(c.uninterpretedOption[V],N)}return A},te.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},te),g.FieldOptions=(ae.prototype.ctype=0,ae.prototype.packed=!1,ae.prototype.jstype=0,ae.prototype.lazy=!1,ae.prototype.deprecated=!1,ae.prototype.weak=!1,ae.prototype.uninterpretedOption=a.emptyArray,ae.create=function(c){return new ae(c)},ae.encode=function(c,N){if(N=N||l.create(),c.ctype!=null&&Object.hasOwnProperty.call(c,"ctype")&&N.uint32(8).int32(c.ctype),c.packed!=null&&Object.hasOwnProperty.call(c,"packed")&&N.uint32(16).bool(c.packed),c.deprecated!=null&&Object.hasOwnProperty.call(c,"deprecated")&&N.uint32(24).bool(c.deprecated),c.lazy!=null&&Object.hasOwnProperty.call(c,"lazy")&&N.uint32(40).bool(c.lazy),c.jstype!=null&&Object.hasOwnProperty.call(c,"jstype")&&N.uint32(48).int32(c.jstype),c.weak!=null&&Object.hasOwnProperty.call(c,"weak")&&N.uint32(80).bool(c.weak),c.uninterpretedOption!=null&&c.uninterpretedOption.length)for(var A=0;A<c.uninterpretedOption.length;++A)o.google.protobuf.UninterpretedOption.encode(c.uninterpretedOption[A],N.uint32(7994).fork()).ldelim();return N},ae.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},ae.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.FieldOptions;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:V.ctype=c.int32();break;case 2:V.packed=c.bool();break;case 6:V.jstype=c.int32();break;case 5:V.lazy=c.bool();break;case 3:V.deprecated=c.bool();break;case 10:V.weak=c.bool();break;case 999:V.uninterpretedOption&&V.uninterpretedOption.length||(V.uninterpretedOption=[]),V.uninterpretedOption.push(o.google.protobuf.UninterpretedOption.decode(c,c.uint32()));break;default:c.skipType(7&ne)}}return V},ae.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},ae.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.ctype!=null&&c.hasOwnProperty("ctype"))switch(c.ctype){default:return"ctype: enum value expected";case 0:case 1:case 2:}if(c.packed!=null&&c.hasOwnProperty("packed")&&typeof c.packed!="boolean")return"packed: boolean expected";if(c.jstype!=null&&c.hasOwnProperty("jstype"))switch(c.jstype){default:return"jstype: enum value expected";case 0:case 1:case 2:}if(c.lazy!=null&&c.hasOwnProperty("lazy")&&typeof c.lazy!="boolean")return"lazy: boolean expected";if(c.deprecated!=null&&c.hasOwnProperty("deprecated")&&typeof c.deprecated!="boolean")return"deprecated: boolean expected";if(c.weak!=null&&c.hasOwnProperty("weak")&&typeof c.weak!="boolean")return"weak: boolean expected";if(c.uninterpretedOption!=null&&c.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(c.uninterpretedOption))return"uninterpretedOption: array expected";for(var N=0;N<c.uninterpretedOption.length;++N){var A=o.google.protobuf.UninterpretedOption.verify(c.uninterpretedOption[N]);if(A)return"uninterpretedOption."+A}}return null},ae.fromObject=function(c){if(c instanceof o.google.protobuf.FieldOptions)return c;var N=new o.google.protobuf.FieldOptions;switch(c.ctype){case"STRING":case 0:N.ctype=0;break;case"CORD":case 1:N.ctype=1;break;case"STRING_PIECE":case 2:N.ctype=2}switch(c.packed!=null&&(N.packed=!!c.packed),c.jstype){case"JS_NORMAL":case 0:N.jstype=0;break;case"JS_STRING":case 1:N.jstype=1;break;case"JS_NUMBER":case 2:N.jstype=2}if(c.lazy!=null&&(N.lazy=!!c.lazy),c.deprecated!=null&&(N.deprecated=!!c.deprecated),c.weak!=null&&(N.weak=!!c.weak),c.uninterpretedOption){if(!Array.isArray(c.uninterpretedOption))throw TypeError(".google.protobuf.FieldOptions.uninterpretedOption: array expected");N.uninterpretedOption=[];for(var A=0;A<c.uninterpretedOption.length;++A){if(typeof c.uninterpretedOption[A]!="object")throw TypeError(".google.protobuf.FieldOptions.uninterpretedOption: object expected");N.uninterpretedOption[A]=o.google.protobuf.UninterpretedOption.fromObject(c.uninterpretedOption[A])}}return N},ae.toObject=function(c,N){var A={};if(((N=N||{}).arrays||N.defaults)&&(A.uninterpretedOption=[]),N.defaults&&(A.ctype=N.enums===String?"STRING":0,A.packed=!1,A.deprecated=!1,A.lazy=!1,A.jstype=N.enums===String?"JS_NORMAL":0,A.weak=!1),c.ctype!=null&&c.hasOwnProperty("ctype")&&(A.ctype=N.enums===String?o.google.protobuf.FieldOptions.CType[c.ctype]:c.ctype),c.packed!=null&&c.hasOwnProperty("packed")&&(A.packed=c.packed),c.deprecated!=null&&c.hasOwnProperty("deprecated")&&(A.deprecated=c.deprecated),c.lazy!=null&&c.hasOwnProperty("lazy")&&(A.lazy=c.lazy),c.jstype!=null&&c.hasOwnProperty("jstype")&&(A.jstype=N.enums===String?o.google.protobuf.FieldOptions.JSType[c.jstype]:c.jstype),c.weak!=null&&c.hasOwnProperty("weak")&&(A.weak=c.weak),c.uninterpretedOption&&c.uninterpretedOption.length){A.uninterpretedOption=[];for(var V=0;V<c.uninterpretedOption.length;++V)A.uninterpretedOption[V]=o.google.protobuf.UninterpretedOption.toObject(c.uninterpretedOption[V],N)}return A},ae.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ae.CType=(s={},(p=Object.create(s))[s[0]="STRING"]=0,p[s[1]="CORD"]=1,p[s[2]="STRING_PIECE"]=2,p),ae.JSType=(s={},(p=Object.create(s))[s[0]="JS_NORMAL"]=0,p[s[1]="JS_STRING"]=1,p[s[2]="JS_NUMBER"]=2,p),ae),g.OneofOptions=(ue.prototype.uninterpretedOption=a.emptyArray,ue.create=function(c){return new ue(c)},ue.encode=function(c,N){if(N=N||l.create(),c.uninterpretedOption!=null&&c.uninterpretedOption.length)for(var A=0;A<c.uninterpretedOption.length;++A)o.google.protobuf.UninterpretedOption.encode(c.uninterpretedOption[A],N.uint32(7994).fork()).ldelim();return N},ue.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},ue.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.OneofOptions;c.pos<A;){var ne=c.uint32();ne>>>3==999?(V.uninterpretedOption&&V.uninterpretedOption.length||(V.uninterpretedOption=[]),V.uninterpretedOption.push(o.google.protobuf.UninterpretedOption.decode(c,c.uint32()))):c.skipType(7&ne)}return V},ue.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},ue.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.uninterpretedOption!=null&&c.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(c.uninterpretedOption))return"uninterpretedOption: array expected";for(var N=0;N<c.uninterpretedOption.length;++N){var A=o.google.protobuf.UninterpretedOption.verify(c.uninterpretedOption[N]);if(A)return"uninterpretedOption."+A}}return null},ue.fromObject=function(c){if(c instanceof o.google.protobuf.OneofOptions)return c;var N=new o.google.protobuf.OneofOptions;if(c.uninterpretedOption){if(!Array.isArray(c.uninterpretedOption))throw TypeError(".google.protobuf.OneofOptions.uninterpretedOption: array expected");N.uninterpretedOption=[];for(var A=0;A<c.uninterpretedOption.length;++A){if(typeof c.uninterpretedOption[A]!="object")throw TypeError(".google.protobuf.OneofOptions.uninterpretedOption: object expected");N.uninterpretedOption[A]=o.google.protobuf.UninterpretedOption.fromObject(c.uninterpretedOption[A])}}return N},ue.toObject=function(c,N){var A={};if(((N=N||{}).arrays||N.defaults)&&(A.uninterpretedOption=[]),c.uninterpretedOption&&c.uninterpretedOption.length){A.uninterpretedOption=[];for(var V=0;V<c.uninterpretedOption.length;++V)A.uninterpretedOption[V]=o.google.protobuf.UninterpretedOption.toObject(c.uninterpretedOption[V],N)}return A},ue.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ue),g.EnumOptions=(ee.prototype.allowAlias=!1,ee.prototype.deprecated=!1,ee.prototype.uninterpretedOption=a.emptyArray,ee.create=function(c){return new ee(c)},ee.encode=function(c,N){if(N=N||l.create(),c.allowAlias!=null&&Object.hasOwnProperty.call(c,"allowAlias")&&N.uint32(16).bool(c.allowAlias),c.deprecated!=null&&Object.hasOwnProperty.call(c,"deprecated")&&N.uint32(24).bool(c.deprecated),c.uninterpretedOption!=null&&c.uninterpretedOption.length)for(var A=0;A<c.uninterpretedOption.length;++A)o.google.protobuf.UninterpretedOption.encode(c.uninterpretedOption[A],N.uint32(7994).fork()).ldelim();return N},ee.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},ee.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.EnumOptions;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 2:V.allowAlias=c.bool();break;case 3:V.deprecated=c.bool();break;case 999:V.uninterpretedOption&&V.uninterpretedOption.length||(V.uninterpretedOption=[]),V.uninterpretedOption.push(o.google.protobuf.UninterpretedOption.decode(c,c.uint32()));break;default:c.skipType(7&ne)}}return V},ee.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},ee.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.allowAlias!=null&&c.hasOwnProperty("allowAlias")&&typeof c.allowAlias!="boolean")return"allowAlias: boolean expected";if(c.deprecated!=null&&c.hasOwnProperty("deprecated")&&typeof c.deprecated!="boolean")return"deprecated: boolean expected";if(c.uninterpretedOption!=null&&c.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(c.uninterpretedOption))return"uninterpretedOption: array expected";for(var N=0;N<c.uninterpretedOption.length;++N){var A=o.google.protobuf.UninterpretedOption.verify(c.uninterpretedOption[N]);if(A)return"uninterpretedOption."+A}}return null},ee.fromObject=function(c){if(c instanceof o.google.protobuf.EnumOptions)return c;var N=new o.google.protobuf.EnumOptions;if(c.allowAlias!=null&&(N.allowAlias=!!c.allowAlias),c.deprecated!=null&&(N.deprecated=!!c.deprecated),c.uninterpretedOption){if(!Array.isArray(c.uninterpretedOption))throw TypeError(".google.protobuf.EnumOptions.uninterpretedOption: array expected");N.uninterpretedOption=[];for(var A=0;A<c.uninterpretedOption.length;++A){if(typeof c.uninterpretedOption[A]!="object")throw TypeError(".google.protobuf.EnumOptions.uninterpretedOption: object expected");N.uninterpretedOption[A]=o.google.protobuf.UninterpretedOption.fromObject(c.uninterpretedOption[A])}}return N},ee.toObject=function(c,N){var A={};if(((N=N||{}).arrays||N.defaults)&&(A.uninterpretedOption=[]),N.defaults&&(A.allowAlias=!1,A.deprecated=!1),c.allowAlias!=null&&c.hasOwnProperty("allowAlias")&&(A.allowAlias=c.allowAlias),c.deprecated!=null&&c.hasOwnProperty("deprecated")&&(A.deprecated=c.deprecated),c.uninterpretedOption&&c.uninterpretedOption.length){A.uninterpretedOption=[];for(var V=0;V<c.uninterpretedOption.length;++V)A.uninterpretedOption[V]=o.google.protobuf.UninterpretedOption.toObject(c.uninterpretedOption[V],N)}return A},ee.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ee),g.EnumValueOptions=(oe.prototype.deprecated=!1,oe.prototype.uninterpretedOption=a.emptyArray,oe.create=function(c){return new oe(c)},oe.encode=function(c,N){if(N=N||l.create(),c.deprecated!=null&&Object.hasOwnProperty.call(c,"deprecated")&&N.uint32(8).bool(c.deprecated),c.uninterpretedOption!=null&&c.uninterpretedOption.length)for(var A=0;A<c.uninterpretedOption.length;++A)o.google.protobuf.UninterpretedOption.encode(c.uninterpretedOption[A],N.uint32(7994).fork()).ldelim();return N},oe.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},oe.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.EnumValueOptions;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:V.deprecated=c.bool();break;case 999:V.uninterpretedOption&&V.uninterpretedOption.length||(V.uninterpretedOption=[]),V.uninterpretedOption.push(o.google.protobuf.UninterpretedOption.decode(c,c.uint32()));break;default:c.skipType(7&ne)}}return V},oe.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},oe.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.deprecated!=null&&c.hasOwnProperty("deprecated")&&typeof c.deprecated!="boolean")return"deprecated: boolean expected";if(c.uninterpretedOption!=null&&c.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(c.uninterpretedOption))return"uninterpretedOption: array expected";for(var N=0;N<c.uninterpretedOption.length;++N){var A=o.google.protobuf.UninterpretedOption.verify(c.uninterpretedOption[N]);if(A)return"uninterpretedOption."+A}}return null},oe.fromObject=function(c){if(c instanceof o.google.protobuf.EnumValueOptions)return c;var N=new o.google.protobuf.EnumValueOptions;if(c.deprecated!=null&&(N.deprecated=!!c.deprecated),c.uninterpretedOption){if(!Array.isArray(c.uninterpretedOption))throw TypeError(".google.protobuf.EnumValueOptions.uninterpretedOption: array expected");N.uninterpretedOption=[];for(var A=0;A<c.uninterpretedOption.length;++A){if(typeof c.uninterpretedOption[A]!="object")throw TypeError(".google.protobuf.EnumValueOptions.uninterpretedOption: object expected");N.uninterpretedOption[A]=o.google.protobuf.UninterpretedOption.fromObject(c.uninterpretedOption[A])}}return N},oe.toObject=function(c,N){var A={};if(((N=N||{}).arrays||N.defaults)&&(A.uninterpretedOption=[]),N.defaults&&(A.deprecated=!1),c.deprecated!=null&&c.hasOwnProperty("deprecated")&&(A.deprecated=c.deprecated),c.uninterpretedOption&&c.uninterpretedOption.length){A.uninterpretedOption=[];for(var V=0;V<c.uninterpretedOption.length;++V)A.uninterpretedOption[V]=o.google.protobuf.UninterpretedOption.toObject(c.uninterpretedOption[V],N)}return A},oe.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},oe),g.ServiceOptions=(de.prototype.deprecated=!1,de.prototype.uninterpretedOption=a.emptyArray,de.prototype[".google.api.defaultHost"]="",de.prototype[".google.api.oauthScopes"]="",de.create=function(c){return new de(c)},de.encode=function(c,N){if(N=N||l.create(),c.deprecated!=null&&Object.hasOwnProperty.call(c,"deprecated")&&N.uint32(264).bool(c.deprecated),c.uninterpretedOption!=null&&c.uninterpretedOption.length)for(var A=0;A<c.uninterpretedOption.length;++A)o.google.protobuf.UninterpretedOption.encode(c.uninterpretedOption[A],N.uint32(7994).fork()).ldelim();return c[".google.api.defaultHost"]!=null&&Object.hasOwnProperty.call(c,".google.api.defaultHost")&&N.uint32(8394).string(c[".google.api.defaultHost"]),c[".google.api.oauthScopes"]!=null&&Object.hasOwnProperty.call(c,".google.api.oauthScopes")&&N.uint32(8402).string(c[".google.api.oauthScopes"]),N},de.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},de.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.ServiceOptions;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 33:V.deprecated=c.bool();break;case 999:V.uninterpretedOption&&V.uninterpretedOption.length||(V.uninterpretedOption=[]),V.uninterpretedOption.push(o.google.protobuf.UninterpretedOption.decode(c,c.uint32()));break;case 1049:V[".google.api.defaultHost"]=c.string();break;case 1050:V[".google.api.oauthScopes"]=c.string();break;default:c.skipType(7&ne)}}return V},de.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},de.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.deprecated!=null&&c.hasOwnProperty("deprecated")&&typeof c.deprecated!="boolean")return"deprecated: boolean expected";if(c.uninterpretedOption!=null&&c.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(c.uninterpretedOption))return"uninterpretedOption: array expected";for(var N=0;N<c.uninterpretedOption.length;++N){var A=o.google.protobuf.UninterpretedOption.verify(c.uninterpretedOption[N]);if(A)return"uninterpretedOption."+A}}return c[".google.api.defaultHost"]!=null&&c.hasOwnProperty(".google.api.defaultHost")&&!a.isString(c[".google.api.defaultHost"])?".google.api.defaultHost: string expected":c[".google.api.oauthScopes"]!=null&&c.hasOwnProperty(".google.api.oauthScopes")&&!a.isString(c[".google.api.oauthScopes"])?".google.api.oauthScopes: string expected":null},de.fromObject=function(c){if(c instanceof o.google.protobuf.ServiceOptions)return c;var N=new o.google.protobuf.ServiceOptions;if(c.deprecated!=null&&(N.deprecated=!!c.deprecated),c.uninterpretedOption){if(!Array.isArray(c.uninterpretedOption))throw TypeError(".google.protobuf.ServiceOptions.uninterpretedOption: array expected");N.uninterpretedOption=[];for(var A=0;A<c.uninterpretedOption.length;++A){if(typeof c.uninterpretedOption[A]!="object")throw TypeError(".google.protobuf.ServiceOptions.uninterpretedOption: object expected");N.uninterpretedOption[A]=o.google.protobuf.UninterpretedOption.fromObject(c.uninterpretedOption[A])}}return c[".google.api.defaultHost"]!=null&&(N[".google.api.defaultHost"]=String(c[".google.api.defaultHost"])),c[".google.api.oauthScopes"]!=null&&(N[".google.api.oauthScopes"]=String(c[".google.api.oauthScopes"])),N},de.toObject=function(c,N){var A={};if(((N=N||{}).arrays||N.defaults)&&(A.uninterpretedOption=[]),N.defaults&&(A.deprecated=!1,A[".google.api.defaultHost"]="",A[".google.api.oauthScopes"]=""),c.deprecated!=null&&c.hasOwnProperty("deprecated")&&(A.deprecated=c.deprecated),c.uninterpretedOption&&c.uninterpretedOption.length){A.uninterpretedOption=[];for(var V=0;V<c.uninterpretedOption.length;++V)A.uninterpretedOption[V]=o.google.protobuf.UninterpretedOption.toObject(c.uninterpretedOption[V],N)}return c[".google.api.defaultHost"]!=null&&c.hasOwnProperty(".google.api.defaultHost")&&(A[".google.api.defaultHost"]=c[".google.api.defaultHost"]),c[".google.api.oauthScopes"]!=null&&c.hasOwnProperty(".google.api.oauthScopes")&&(A[".google.api.oauthScopes"]=c[".google.api.oauthScopes"]),A},de.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},de),g.MethodOptions=(he.prototype.deprecated=!1,he.prototype.idempotencyLevel=0,he.prototype.uninterpretedOption=a.emptyArray,he.prototype[".google.api.http"]=null,he.prototype[".google.api.methodSignature"]=a.emptyArray,he.create=function(c){return new he(c)},he.encode=function(c,N){if(N=N||l.create(),c.deprecated!=null&&Object.hasOwnProperty.call(c,"deprecated")&&N.uint32(264).bool(c.deprecated),c.idempotencyLevel!=null&&Object.hasOwnProperty.call(c,"idempotencyLevel")&&N.uint32(272).int32(c.idempotencyLevel),c.uninterpretedOption!=null&&c.uninterpretedOption.length)for(var A=0;A<c.uninterpretedOption.length;++A)o.google.protobuf.UninterpretedOption.encode(c.uninterpretedOption[A],N.uint32(7994).fork()).ldelim();if(c[".google.api.methodSignature"]!=null&&c[".google.api.methodSignature"].length)for(A=0;A<c[".google.api.methodSignature"].length;++A)N.uint32(8410).string(c[".google.api.methodSignature"][A]);return c[".google.api.http"]!=null&&Object.hasOwnProperty.call(c,".google.api.http")&&o.google.api.HttpRule.encode(c[".google.api.http"],N.uint32(578365826).fork()).ldelim(),N},he.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},he.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.MethodOptions;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 33:V.deprecated=c.bool();break;case 34:V.idempotencyLevel=c.int32();break;case 999:V.uninterpretedOption&&V.uninterpretedOption.length||(V.uninterpretedOption=[]),V.uninterpretedOption.push(o.google.protobuf.UninterpretedOption.decode(c,c.uint32()));break;case 72295728:V[".google.api.http"]=o.google.api.HttpRule.decode(c,c.uint32());break;case 1051:V[".google.api.methodSignature"]&&V[".google.api.methodSignature"].length||(V[".google.api.methodSignature"]=[]),V[".google.api.methodSignature"].push(c.string());break;default:c.skipType(7&ne)}}return V},he.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},he.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.deprecated!=null&&c.hasOwnProperty("deprecated")&&typeof c.deprecated!="boolean")return"deprecated: boolean expected";if(c.idempotencyLevel!=null&&c.hasOwnProperty("idempotencyLevel"))switch(c.idempotencyLevel){default:return"idempotencyLevel: enum value expected";case 0:case 1:case 2:}if(c.uninterpretedOption!=null&&c.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(c.uninterpretedOption))return"uninterpretedOption: array expected";for(var N=0;N<c.uninterpretedOption.length;++N)if(A=o.google.protobuf.UninterpretedOption.verify(c.uninterpretedOption[N]))return"uninterpretedOption."+A}var A;if(c[".google.api.http"]!=null&&c.hasOwnProperty(".google.api.http")&&(A=o.google.api.HttpRule.verify(c[".google.api.http"])))return".google.api.http."+A;if(c[".google.api.methodSignature"]!=null&&c.hasOwnProperty(".google.api.methodSignature")){if(!Array.isArray(c[".google.api.methodSignature"]))return".google.api.methodSignature: array expected";for(N=0;N<c[".google.api.methodSignature"].length;++N)if(!a.isString(c[".google.api.methodSignature"][N]))return".google.api.methodSignature: string[] expected"}return null},he.fromObject=function(c){if(c instanceof o.google.protobuf.MethodOptions)return c;var N=new o.google.protobuf.MethodOptions;switch(c.deprecated!=null&&(N.deprecated=!!c.deprecated),c.idempotencyLevel){case"IDEMPOTENCY_UNKNOWN":case 0:N.idempotencyLevel=0;break;case"NO_SIDE_EFFECTS":case 1:N.idempotencyLevel=1;break;case"IDEMPOTENT":case 2:N.idempotencyLevel=2}if(c.uninterpretedOption){if(!Array.isArray(c.uninterpretedOption))throw TypeError(".google.protobuf.MethodOptions.uninterpretedOption: array expected");N.uninterpretedOption=[];for(var A=0;A<c.uninterpretedOption.length;++A){if(typeof c.uninterpretedOption[A]!="object")throw TypeError(".google.protobuf.MethodOptions.uninterpretedOption: object expected");N.uninterpretedOption[A]=o.google.protobuf.UninterpretedOption.fromObject(c.uninterpretedOption[A])}}if(c[".google.api.http"]!=null){if(typeof c[".google.api.http"]!="object")throw TypeError(".google.protobuf.MethodOptions..google.api.http: object expected");N[".google.api.http"]=o.google.api.HttpRule.fromObject(c[".google.api.http"])}if(c[".google.api.methodSignature"]){if(!Array.isArray(c[".google.api.methodSignature"]))throw TypeError(".google.protobuf.MethodOptions..google.api.methodSignature: array expected");for(N[".google.api.methodSignature"]=[],A=0;A<c[".google.api.methodSignature"].length;++A)N[".google.api.methodSignature"][A]=String(c[".google.api.methodSignature"][A])}return N},he.toObject=function(c,N){var A={};if(((N=N||{}).arrays||N.defaults)&&(A.uninterpretedOption=[],A[".google.api.methodSignature"]=[]),N.defaults&&(A.deprecated=!1,A.idempotencyLevel=N.enums===String?"IDEMPOTENCY_UNKNOWN":0,A[".google.api.http"]=null),c.deprecated!=null&&c.hasOwnProperty("deprecated")&&(A.deprecated=c.deprecated),c.idempotencyLevel!=null&&c.hasOwnProperty("idempotencyLevel")&&(A.idempotencyLevel=N.enums===String?o.google.protobuf.MethodOptions.IdempotencyLevel[c.idempotencyLevel]:c.idempotencyLevel),c.uninterpretedOption&&c.uninterpretedOption.length){A.uninterpretedOption=[];for(var V=0;V<c.uninterpretedOption.length;++V)A.uninterpretedOption[V]=o.google.protobuf.UninterpretedOption.toObject(c.uninterpretedOption[V],N)}if(c[".google.api.methodSignature"]&&c[".google.api.methodSignature"].length)for(A[".google.api.methodSignature"]=[],V=0;V<c[".google.api.methodSignature"].length;++V)A[".google.api.methodSignature"][V]=c[".google.api.methodSignature"][V];return c[".google.api.http"]!=null&&c.hasOwnProperty(".google.api.http")&&(A[".google.api.http"]=o.google.api.HttpRule.toObject(c[".google.api.http"],N)),A},he.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},he.IdempotencyLevel=(s={},(p=Object.create(s))[s[0]="IDEMPOTENCY_UNKNOWN"]=0,p[s[1]="NO_SIDE_EFFECTS"]=1,p[s[2]="IDEMPOTENT"]=2,p),he),g.UninterpretedOption=(Ee.prototype.name=a.emptyArray,Ee.prototype.identifierValue="",Ee.prototype.positiveIntValue=a.Long?a.Long.fromBits(0,0,!0):0,Ee.prototype.negativeIntValue=a.Long?a.Long.fromBits(0,0,!1):0,Ee.prototype.doubleValue=0,Ee.prototype.stringValue=a.newBuffer([]),Ee.prototype.aggregateValue="",Ee.create=function(c){return new Ee(c)},Ee.encode=function(c,N){if(N=N||l.create(),c.name!=null&&c.name.length)for(var A=0;A<c.name.length;++A)o.google.protobuf.UninterpretedOption.NamePart.encode(c.name[A],N.uint32(18).fork()).ldelim();return c.identifierValue!=null&&Object.hasOwnProperty.call(c,"identifierValue")&&N.uint32(26).string(c.identifierValue),c.positiveIntValue!=null&&Object.hasOwnProperty.call(c,"positiveIntValue")&&N.uint32(32).uint64(c.positiveIntValue),c.negativeIntValue!=null&&Object.hasOwnProperty.call(c,"negativeIntValue")&&N.uint32(40).int64(c.negativeIntValue),c.doubleValue!=null&&Object.hasOwnProperty.call(c,"doubleValue")&&N.uint32(49).double(c.doubleValue),c.stringValue!=null&&Object.hasOwnProperty.call(c,"stringValue")&&N.uint32(58).bytes(c.stringValue),c.aggregateValue!=null&&Object.hasOwnProperty.call(c,"aggregateValue")&&N.uint32(66).string(c.aggregateValue),N},Ee.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},Ee.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.UninterpretedOption;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 2:V.name&&V.name.length||(V.name=[]),V.name.push(o.google.protobuf.UninterpretedOption.NamePart.decode(c,c.uint32()));break;case 3:V.identifierValue=c.string();break;case 4:V.positiveIntValue=c.uint64();break;case 5:V.negativeIntValue=c.int64();break;case 6:V.doubleValue=c.double();break;case 7:V.stringValue=c.bytes();break;case 8:V.aggregateValue=c.string();break;default:c.skipType(7&ne)}}return V},Ee.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},Ee.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.name!=null&&c.hasOwnProperty("name")){if(!Array.isArray(c.name))return"name: array expected";for(var N=0;N<c.name.length;++N){var A=o.google.protobuf.UninterpretedOption.NamePart.verify(c.name[N]);if(A)return"name."+A}}return c.identifierValue!=null&&c.hasOwnProperty("identifierValue")&&!a.isString(c.identifierValue)?"identifierValue: string expected":c.positiveIntValue!=null&&c.hasOwnProperty("positiveIntValue")&&!(a.isInteger(c.positiveIntValue)||c.positiveIntValue&&a.isInteger(c.positiveIntValue.low)&&a.isInteger(c.positiveIntValue.high))?"positiveIntValue: integer|Long expected":c.negativeIntValue!=null&&c.hasOwnProperty("negativeIntValue")&&!(a.isInteger(c.negativeIntValue)||c.negativeIntValue&&a.isInteger(c.negativeIntValue.low)&&a.isInteger(c.negativeIntValue.high))?"negativeIntValue: integer|Long expected":c.doubleValue!=null&&c.hasOwnProperty("doubleValue")&&typeof c.doubleValue!="number"?"doubleValue: number expected":c.stringValue!=null&&c.hasOwnProperty("stringValue")&&!(c.stringValue&&typeof c.stringValue.length=="number"||a.isString(c.stringValue))?"stringValue: buffer expected":c.aggregateValue!=null&&c.hasOwnProperty("aggregateValue")&&!a.isString(c.aggregateValue)?"aggregateValue: string expected":null},Ee.fromObject=function(c){if(c instanceof o.google.protobuf.UninterpretedOption)return c;var N=new o.google.protobuf.UninterpretedOption;if(c.name){if(!Array.isArray(c.name))throw TypeError(".google.protobuf.UninterpretedOption.name: array expected");N.name=[];for(var A=0;A<c.name.length;++A){if(typeof c.name[A]!="object")throw TypeError(".google.protobuf.UninterpretedOption.name: object expected");N.name[A]=o.google.protobuf.UninterpretedOption.NamePart.fromObject(c.name[A])}}return c.identifierValue!=null&&(N.identifierValue=String(c.identifierValue)),c.positiveIntValue!=null&&(a.Long?(N.positiveIntValue=a.Long.fromValue(c.positiveIntValue)).unsigned=!0:typeof c.positiveIntValue=="string"?N.positiveIntValue=parseInt(c.positiveIntValue,10):typeof c.positiveIntValue=="number"?N.positiveIntValue=c.positiveIntValue:typeof c.positiveIntValue=="object"&&(N.positiveIntValue=new a.LongBits(c.positiveIntValue.low>>>0,c.positiveIntValue.high>>>0).toNumber(!0))),c.negativeIntValue!=null&&(a.Long?(N.negativeIntValue=a.Long.fromValue(c.negativeIntValue)).unsigned=!1:typeof c.negativeIntValue=="string"?N.negativeIntValue=parseInt(c.negativeIntValue,10):typeof c.negativeIntValue=="number"?N.negativeIntValue=c.negativeIntValue:typeof c.negativeIntValue=="object"&&(N.negativeIntValue=new a.LongBits(c.negativeIntValue.low>>>0,c.negativeIntValue.high>>>0).toNumber())),c.doubleValue!=null&&(N.doubleValue=Number(c.doubleValue)),c.stringValue!=null&&(typeof c.stringValue=="string"?a.base64.decode(c.stringValue,N.stringValue=a.newBuffer(a.base64.length(c.stringValue)),0):c.stringValue.length&&(N.stringValue=c.stringValue)),c.aggregateValue!=null&&(N.aggregateValue=String(c.aggregateValue)),N},Ee.toObject=function(c,N){var A,V={};if(((N=N||{}).arrays||N.defaults)&&(V.name=[]),N.defaults&&(V.identifierValue="",a.Long?(A=new a.Long(0,0,!0),V.positiveIntValue=N.longs===String?A.toString():N.longs===Number?A.toNumber():A):V.positiveIntValue=N.longs===String?"0":0,a.Long?(A=new a.Long(0,0,!1),V.negativeIntValue=N.longs===String?A.toString():N.longs===Number?A.toNumber():A):V.negativeIntValue=N.longs===String?"0":0,V.doubleValue=0,N.bytes===String?V.stringValue="":(V.stringValue=[],N.bytes!==Array&&(V.stringValue=a.newBuffer(V.stringValue))),V.aggregateValue=""),c.name&&c.name.length){V.name=[];for(var ne=0;ne<c.name.length;++ne)V.name[ne]=o.google.protobuf.UninterpretedOption.NamePart.toObject(c.name[ne],N)}return c.identifierValue!=null&&c.hasOwnProperty("identifierValue")&&(V.identifierValue=c.identifierValue),c.positiveIntValue!=null&&c.hasOwnProperty("positiveIntValue")&&(typeof c.positiveIntValue=="number"?V.positiveIntValue=N.longs===String?String(c.positiveIntValue):c.positiveIntValue:V.positiveIntValue=N.longs===String?a.Long.prototype.toString.call(c.positiveIntValue):N.longs===Number?new a.LongBits(c.positiveIntValue.low>>>0,c.positiveIntValue.high>>>0).toNumber(!0):c.positiveIntValue),c.negativeIntValue!=null&&c.hasOwnProperty("negativeIntValue")&&(typeof c.negativeIntValue=="number"?V.negativeIntValue=N.longs===String?String(c.negativeIntValue):c.negativeIntValue:V.negativeIntValue=N.longs===String?a.Long.prototype.toString.call(c.negativeIntValue):N.longs===Number?new a.LongBits(c.negativeIntValue.low>>>0,c.negativeIntValue.high>>>0).toNumber():c.negativeIntValue),c.doubleValue!=null&&c.hasOwnProperty("doubleValue")&&(V.doubleValue=N.json&&!isFinite(c.doubleValue)?String(c.doubleValue):c.doubleValue),c.stringValue!=null&&c.hasOwnProperty("stringValue")&&(V.stringValue=N.bytes===String?a.base64.encode(c.stringValue,0,c.stringValue.length):N.bytes===Array?Array.prototype.slice.call(c.stringValue):c.stringValue),c.aggregateValue!=null&&c.hasOwnProperty("aggregateValue")&&(V.aggregateValue=c.aggregateValue),V},Ee.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Ee.NamePart=(fe.prototype.namePart="",fe.prototype.isExtension=!1,fe.create=function(c){return new fe(c)},fe.encode=function(c,N){return(N=N||l.create()).uint32(10).string(c.namePart),N.uint32(16).bool(c.isExtension),N},fe.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},fe.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.UninterpretedOption.NamePart;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:V.namePart=c.string();break;case 2:V.isExtension=c.bool();break;default:c.skipType(7&ne)}}if(!V.hasOwnProperty("namePart"))throw a.ProtocolError("missing required 'namePart'",{instance:V});if(V.hasOwnProperty("isExtension"))return V;throw a.ProtocolError("missing required 'isExtension'",{instance:V})},fe.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},fe.verify=function(c){return typeof c!="object"||c===null?"object expected":a.isString(c.namePart)?typeof c.isExtension!="boolean"?"isExtension: boolean expected":null:"namePart: string expected"},fe.fromObject=function(c){var N;return c instanceof o.google.protobuf.UninterpretedOption.NamePart?c:(N=new o.google.protobuf.UninterpretedOption.NamePart,c.namePart!=null&&(N.namePart=String(c.namePart)),c.isExtension!=null&&(N.isExtension=!!c.isExtension),N)},fe.toObject=function(c,N){var A={};return(N=N||{}).defaults&&(A.namePart="",A.isExtension=!1),c.namePart!=null&&c.hasOwnProperty("namePart")&&(A.namePart=c.namePart),c.isExtension!=null&&c.hasOwnProperty("isExtension")&&(A.isExtension=c.isExtension),A},fe.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},fe),Ee),g.SourceCodeInfo=(Se.prototype.location=a.emptyArray,Se.create=function(c){return new Se(c)},Se.encode=function(c,N){if(N=N||l.create(),c.location!=null&&c.location.length)for(var A=0;A<c.location.length;++A)o.google.protobuf.SourceCodeInfo.Location.encode(c.location[A],N.uint32(10).fork()).ldelim();return N},Se.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},Se.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.SourceCodeInfo;c.pos<A;){var ne=c.uint32();ne>>>3==1?(V.location&&V.location.length||(V.location=[]),V.location.push(o.google.protobuf.SourceCodeInfo.Location.decode(c,c.uint32()))):c.skipType(7&ne)}return V},Se.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},Se.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.location!=null&&c.hasOwnProperty("location")){if(!Array.isArray(c.location))return"location: array expected";for(var N=0;N<c.location.length;++N){var A=o.google.protobuf.SourceCodeInfo.Location.verify(c.location[N]);if(A)return"location."+A}}return null},Se.fromObject=function(c){if(c instanceof o.google.protobuf.SourceCodeInfo)return c;var N=new o.google.protobuf.SourceCodeInfo;if(c.location){if(!Array.isArray(c.location))throw TypeError(".google.protobuf.SourceCodeInfo.location: array expected");N.location=[];for(var A=0;A<c.location.length;++A){if(typeof c.location[A]!="object")throw TypeError(".google.protobuf.SourceCodeInfo.location: object expected");N.location[A]=o.google.protobuf.SourceCodeInfo.Location.fromObject(c.location[A])}}return N},Se.toObject=function(c,N){var A={};if(((N=N||{}).arrays||N.defaults)&&(A.location=[]),c.location&&c.location.length){A.location=[];for(var V=0;V<c.location.length;++V)A.location[V]=o.google.protobuf.SourceCodeInfo.Location.toObject(c.location[V],N)}return A},Se.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Se.Location=(be.prototype.path=a.emptyArray,be.prototype.span=a.emptyArray,be.prototype.leadingComments="",be.prototype.trailingComments="",be.prototype.leadingDetachedComments=a.emptyArray,be.create=function(c){return new be(c)},be.encode=function(c,N){if(N=N||l.create(),c.path!=null&&c.path.length){N.uint32(10).fork();for(var A=0;A<c.path.length;++A)N.int32(c.path[A]);N.ldelim()}if(c.span!=null&&c.span.length){for(N.uint32(18).fork(),A=0;A<c.span.length;++A)N.int32(c.span[A]);N.ldelim()}if(c.leadingComments!=null&&Object.hasOwnProperty.call(c,"leadingComments")&&N.uint32(26).string(c.leadingComments),c.trailingComments!=null&&Object.hasOwnProperty.call(c,"trailingComments")&&N.uint32(34).string(c.trailingComments),c.leadingDetachedComments!=null&&c.leadingDetachedComments.length)for(A=0;A<c.leadingDetachedComments.length;++A)N.uint32(50).string(c.leadingDetachedComments[A]);return N},be.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},be.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.SourceCodeInfo.Location;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:if(V.path&&V.path.length||(V.path=[]),(7&ne)==2)for(var ce=c.uint32()+c.pos;c.pos<ce;)V.path.push(c.int32());else V.path.push(c.int32());break;case 2:if(V.span&&V.span.length||(V.span=[]),(7&ne)==2)for(ce=c.uint32()+c.pos;c.pos<ce;)V.span.push(c.int32());else V.span.push(c.int32());break;case 3:V.leadingComments=c.string();break;case 4:V.trailingComments=c.string();break;case 6:V.leadingDetachedComments&&V.leadingDetachedComments.length||(V.leadingDetachedComments=[]),V.leadingDetachedComments.push(c.string());break;default:c.skipType(7&ne)}}return V},be.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},be.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.path!=null&&c.hasOwnProperty("path")){if(!Array.isArray(c.path))return"path: array expected";for(var N=0;N<c.path.length;++N)if(!a.isInteger(c.path[N]))return"path: integer[] expected"}if(c.span!=null&&c.hasOwnProperty("span")){if(!Array.isArray(c.span))return"span: array expected";for(N=0;N<c.span.length;++N)if(!a.isInteger(c.span[N]))return"span: integer[] expected"}if(c.leadingComments!=null&&c.hasOwnProperty("leadingComments")&&!a.isString(c.leadingComments))return"leadingComments: string expected";if(c.trailingComments!=null&&c.hasOwnProperty("trailingComments")&&!a.isString(c.trailingComments))return"trailingComments: string expected";if(c.leadingDetachedComments!=null&&c.hasOwnProperty("leadingDetachedComments")){if(!Array.isArray(c.leadingDetachedComments))return"leadingDetachedComments: array expected";for(N=0;N<c.leadingDetachedComments.length;++N)if(!a.isString(c.leadingDetachedComments[N]))return"leadingDetachedComments: string[] expected"}return null},be.fromObject=function(c){if(c instanceof o.google.protobuf.SourceCodeInfo.Location)return c;var N=new o.google.protobuf.SourceCodeInfo.Location;if(c.path){if(!Array.isArray(c.path))throw TypeError(".google.protobuf.SourceCodeInfo.Location.path: array expected");N.path=[];for(var A=0;A<c.path.length;++A)N.path[A]=0|c.path[A]}if(c.span){if(!Array.isArray(c.span))throw TypeError(".google.protobuf.SourceCodeInfo.Location.span: array expected");for(N.span=[],A=0;A<c.span.length;++A)N.span[A]=0|c.span[A]}if(c.leadingComments!=null&&(N.leadingComments=String(c.leadingComments)),c.trailingComments!=null&&(N.trailingComments=String(c.trailingComments)),c.leadingDetachedComments){if(!Array.isArray(c.leadingDetachedComments))throw TypeError(".google.protobuf.SourceCodeInfo.Location.leadingDetachedComments: array expected");for(N.leadingDetachedComments=[],A=0;A<c.leadingDetachedComments.length;++A)N.leadingDetachedComments[A]=String(c.leadingDetachedComments[A])}return N},be.toObject=function(c,N){var A={};if(((N=N||{}).arrays||N.defaults)&&(A.path=[],A.span=[],A.leadingDetachedComments=[]),N.defaults&&(A.leadingComments="",A.trailingComments=""),c.path&&c.path.length){A.path=[];for(var V=0;V<c.path.length;++V)A.path[V]=c.path[V]}if(c.span&&c.span.length)for(A.span=[],V=0;V<c.span.length;++V)A.span[V]=c.span[V];if(c.leadingComments!=null&&c.hasOwnProperty("leadingComments")&&(A.leadingComments=c.leadingComments),c.trailingComments!=null&&c.hasOwnProperty("trailingComments")&&(A.trailingComments=c.trailingComments),c.leadingDetachedComments&&c.leadingDetachedComments.length)for(A.leadingDetachedComments=[],V=0;V<c.leadingDetachedComments.length;++V)A.leadingDetachedComments[V]=c.leadingDetachedComments[V];return A},be.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},be),Se),g.GeneratedCodeInfo=(Oe.prototype.annotation=a.emptyArray,Oe.create=function(c){return new Oe(c)},Oe.encode=function(c,N){if(N=N||l.create(),c.annotation!=null&&c.annotation.length)for(var A=0;A<c.annotation.length;++A)o.google.protobuf.GeneratedCodeInfo.Annotation.encode(c.annotation[A],N.uint32(10).fork()).ldelim();return N},Oe.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},Oe.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.GeneratedCodeInfo;c.pos<A;){var ne=c.uint32();ne>>>3==1?(V.annotation&&V.annotation.length||(V.annotation=[]),V.annotation.push(o.google.protobuf.GeneratedCodeInfo.Annotation.decode(c,c.uint32()))):c.skipType(7&ne)}return V},Oe.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},Oe.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.annotation!=null&&c.hasOwnProperty("annotation")){if(!Array.isArray(c.annotation))return"annotation: array expected";for(var N=0;N<c.annotation.length;++N){var A=o.google.protobuf.GeneratedCodeInfo.Annotation.verify(c.annotation[N]);if(A)return"annotation."+A}}return null},Oe.fromObject=function(c){if(c instanceof o.google.protobuf.GeneratedCodeInfo)return c;var N=new o.google.protobuf.GeneratedCodeInfo;if(c.annotation){if(!Array.isArray(c.annotation))throw TypeError(".google.protobuf.GeneratedCodeInfo.annotation: array expected");N.annotation=[];for(var A=0;A<c.annotation.length;++A){if(typeof c.annotation[A]!="object")throw TypeError(".google.protobuf.GeneratedCodeInfo.annotation: object expected");N.annotation[A]=o.google.protobuf.GeneratedCodeInfo.Annotation.fromObject(c.annotation[A])}}return N},Oe.toObject=function(c,N){var A={};if(((N=N||{}).arrays||N.defaults)&&(A.annotation=[]),c.annotation&&c.annotation.length){A.annotation=[];for(var V=0;V<c.annotation.length;++V)A.annotation[V]=o.google.protobuf.GeneratedCodeInfo.Annotation.toObject(c.annotation[V],N)}return A},Oe.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Oe.Annotation=(ge.prototype.path=a.emptyArray,ge.prototype.sourceFile="",ge.prototype.begin=0,ge.prototype.end=0,ge.create=function(c){return new ge(c)},ge.encode=function(c,N){if(N=N||l.create(),c.path!=null&&c.path.length){N.uint32(10).fork();for(var A=0;A<c.path.length;++A)N.int32(c.path[A]);N.ldelim()}return c.sourceFile!=null&&Object.hasOwnProperty.call(c,"sourceFile")&&N.uint32(18).string(c.sourceFile),c.begin!=null&&Object.hasOwnProperty.call(c,"begin")&&N.uint32(24).int32(c.begin),c.end!=null&&Object.hasOwnProperty.call(c,"end")&&N.uint32(32).int32(c.end),N},ge.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},ge.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.GeneratedCodeInfo.Annotation;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:if(V.path&&V.path.length||(V.path=[]),(7&ne)==2)for(var ce=c.uint32()+c.pos;c.pos<ce;)V.path.push(c.int32());else V.path.push(c.int32());break;case 2:V.sourceFile=c.string();break;case 3:V.begin=c.int32();break;case 4:V.end=c.int32();break;default:c.skipType(7&ne)}}return V},ge.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},ge.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.path!=null&&c.hasOwnProperty("path")){if(!Array.isArray(c.path))return"path: array expected";for(var N=0;N<c.path.length;++N)if(!a.isInteger(c.path[N]))return"path: integer[] expected"}return c.sourceFile!=null&&c.hasOwnProperty("sourceFile")&&!a.isString(c.sourceFile)?"sourceFile: string expected":c.begin!=null&&c.hasOwnProperty("begin")&&!a.isInteger(c.begin)?"begin: integer expected":c.end!=null&&c.hasOwnProperty("end")&&!a.isInteger(c.end)?"end: integer expected":null},ge.fromObject=function(c){if(c instanceof o.google.protobuf.GeneratedCodeInfo.Annotation)return c;var N=new o.google.protobuf.GeneratedCodeInfo.Annotation;if(c.path){if(!Array.isArray(c.path))throw TypeError(".google.protobuf.GeneratedCodeInfo.Annotation.path: array expected");N.path=[];for(var A=0;A<c.path.length;++A)N.path[A]=0|c.path[A]}return c.sourceFile!=null&&(N.sourceFile=String(c.sourceFile)),c.begin!=null&&(N.begin=0|c.begin),c.end!=null&&(N.end=0|c.end),N},ge.toObject=function(c,N){var A={};if(((N=N||{}).arrays||N.defaults)&&(A.path=[]),N.defaults&&(A.sourceFile="",A.begin=0,A.end=0),c.path&&c.path.length){A.path=[];for(var V=0;V<c.path.length;++V)A.path[V]=c.path[V]}return c.sourceFile!=null&&c.hasOwnProperty("sourceFile")&&(A.sourceFile=c.sourceFile),c.begin!=null&&c.hasOwnProperty("begin")&&(A.begin=c.begin),c.end!=null&&c.hasOwnProperty("end")&&(A.end=c.end),A},ge.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ge),Oe),g.Any=(J.prototype.type_url="",J.prototype.value=a.newBuffer([]),J.create=function(c){return new J(c)},J.encode=function(c,N){return N=N||l.create(),c.type_url!=null&&Object.hasOwnProperty.call(c,"type_url")&&N.uint32(10).string(c.type_url),c.value!=null&&Object.hasOwnProperty.call(c,"value")&&N.uint32(18).bytes(c.value),N},J.encodeDelimited=function(c,N){return this.encode(c,N).ldelim()},J.decode=function(c,N){c instanceof d||(c=d.create(c));for(var A=N===void 0?c.len:c.pos+N,V=new o.google.protobuf.Any;c.pos<A;){var ne=c.uint32();switch(ne>>>3){case 1:V.type_url=c.string();break;case 2:V.value=c.bytes();break;default:c.skipType(7&ne)}}return V},J.decodeDelimited=function(c){return c instanceof d||(c=new d(c)),this.decode(c,c.uint32())},J.verify=function(c){return typeof c!="object"||c===null?"object expected":c.type_url!=null&&c.hasOwnProperty("type_url")&&!a.isString(c.type_url)?"type_url: string expected":c.value!=null&&c.hasOwnProperty("value")&&!(c.value&&typeof c.value.length=="number"||a.isString(c.value))?"value: buffer expected":null},J.fromObject=function(c){var N;return c instanceof o.google.protobuf.Any?c:(N=new o.google.protobuf.Any,c.type_url!=null&&(N.type_url=String(c.type_url)),c.value!=null&&(typeof c.value=="string"?a.base64.decode(c.value,N.value=a.newBuffer(a.base64.length(c.value)),0):c.value.length&&(N.value=c.value)),N)},J.toObject=function(c,N){var A={};return(N=N||{}).defaults&&(A.type_url="",N.bytes===String?A.value="":(A.value=[],N.bytes!==Array&&(A.value=a.newBuffer(A.value)))),c.type_url!=null&&c.hasOwnProperty("type_url")&&(A.type_url=c.type_url),c.value!=null&&c.hasOwnProperty("value")&&(A.value=N.bytes===String?a.base64.encode(c.value,0,c.value.length):N.bytes===Array?Array.prototype.slice.call(c.value):c.value),A},J.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},J),g),m),o})})(locations)),locations.exports}var pathTemplate={},hasRequiredPathTemplate;function requirePathTemplate(){if(hasRequiredPathTemplate)return pathTemplate;hasRequiredPathTemplate=1,Object.defineProperty(pathTemplate,"__esModule",{value:!0}),pathTemplate.PathTemplate=void 0;class e{constructor(p){this.bindings={},this.data=p,this.segments=this.parsePathTemplate(p),this.size=this.segments.length}match(p){let g=p.split("/");const m={};if(g.length!==this.segments.length)if(this.data.includes("**")){if(g.length!==this.segments.length+1)throw new TypeError(`This path ${p} does not match path template ${this.data}, the number of parameters is not same with one wildcard.`)}else throw new TypeError(`This path ${p} does not match path template ${this.data}, the number of parameters is not same.`);for(let d=0;d<this.segments.length&&g.length>0;d++)if(this.segments[d]!==g[0])if(this.segments[d].includes("*")){let l=this.segments[d];const a=l.match(/\{[$0-9a-zA-Z_]+=.*?\}/g);if(!a)throw new Error(`Error processing path template segment ${l}`);const o=a.map(h=>h.replace(/^\{/,"").replace(/=.*/,""));if(l.includes("**"))m[o[0]]=g[0]+"/"+g[1],g=g.slice(2);else{if(o.length===1)m[o[0]]=g[0];else{const h=g[0].split(/[-_.~]/);if(h.length!==o.length)throw new Error(`segment ${l} does not match ${g[0]}`);for(const v of o)m[v]=h[0],l=l.replace(`{${v}=*}`,`${h[0]}`),h.shift();if(l!==g[0])throw new TypeError(`non slash resource pattern ${this.segments[d]} and ${g[0]} should have same separator`)}g.shift()}}else throw new TypeError(`segment does not match, ${this.segments[d]} and  ${g[d]}.`);else g.shift();return m}render(p){if(Object.keys(p).length!==Object.keys(this.bindings).length)throw new TypeError(`The number of variables ${Object.keys(p).length} does not match the number of needed variables ${Object.keys(this.bindings).length}`);let g=this.inspect();for(const m of Object.keys(p)){const d=p[m].toString();if(!this.bindings[m])throw new TypeError(`render fails for not matching ${p[m]}`);const l=this.bindings[m];if(l==="*"){if(!d.match(/[^/{}]+/))throw new TypeError(`render fails for not matching ${d}`);g=g.replace(`{${m}=*}`,`${d}`)}else if(l==="**"){if(!d.match(/[^{}]+/))throw new TypeError(`render fails for not matching ${d}`);g=g.replace(`{${m}=**}`,`${d}`)}}return g}inspect(){return this.segments.join("/")}parsePathTemplate(p){const g=t(p);let m=0,d=0;const l=[];let a;if(g.forEach(o=>{if(o==="*"||o==="**")this.bindings[`$${m}`]=o,l.push(`{$${m}=${o}}`),m=m+1,o==="**"&&++d;else if(a=o.match(/\{[0-9a-zA-Z-.~_]+(?:=.*?)?\}/g)){for(const h of a){const v=h.match(/^\{([0-9a-zA-Z-.~_]+)(?:=(.*?))?\}$/);if(!v)throw new Error(`Cannot process path template segment ${h}`);const _=v[1];let y=v[2];y?y==="*"?this.bindings[_]=y:y==="**"&&(++d,this.bindings[_]=y):(y="*",o=o.replace(_,_+"=*"),this.bindings[_]=y)}l.push(o)}else o.match(/[0-9a-zA-Z-.~_]+/)&&l.push(o)}),d>1)throw new TypeError("Can not have more than one wildcard.");return l}}pathTemplate.PathTemplate=e;function t(s){let p=0,g=0,m=0;const d=[];for(;g>=p&&g<s.length;){if(s.charAt(g)==="{")m=m+1;else if(s.charAt(g)==="}")m=m-1;else if(s.charAt(g)==="/"){if(g===s.length-1)throw new TypeError("Invalid path, it can not be ended by /");m===0&&(d.push(s.substring(p,g)),p=g+1)}if(g===s.length-1){if(m!==0)throw new TypeError("Brackets are invalid.");d.push(s.substring(p))}g=g+1}return d}return pathTemplate}var iamService={};const interfaces$3={"google.iam.v1.IAMPolicy":{retry_codes:{non_idempotent:[],idempotent:["DEADLINE_EXCEEDED","UNAVAILABLE"]},retry_params:{default:{initial_retry_delay_millis:100,retry_delay_multiplier:1.3,max_retry_delay_millis:6e4,initial_rpc_timeout_millis:2e4,rpc_timeout_multiplier:1,max_rpc_timeout_millis:2e4,total_timeout_millis:6e5}},methods:{GetIamPolicy:{retry_codes_name:"non_idempotent",retry_params_name:"default"},SetIamPolicy:{retry_codes_name:"non_idempotent",retry_params_name:"default"},TestIamPermissions:{retry_codes_name:"non_idempotent",retry_params_name:"default"}}}},require$$2$1={interfaces:interfaces$3},nested$4=JSON.parse('{"google":{"nested":{"iam":{"nested":{"v1":{"options":{"cc_enable_arenas":true,"csharp_namespace":"Google.Cloud.Iam.V1","go_package":"google.golang.org/genproto/googleapis/iam/v1;iam","java_multiple_files":true,"java_outer_classname":"PolicyProto","java_package":"com.google.iam.v1","php_namespace":"Google\\\\Cloud\\\\Iam\\\\V1"},"nested":{"IAMPolicy":{"options":{"(google.api.default_host)":"iam-meta-api.googleapis.com"},"methods":{"SetIamPolicy":{"requestType":"SetIamPolicyRequest","responseType":"Policy","options":{"(google.api.http).post":"/v1/{resource=**}:setIamPolicy","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{resource=**}:setIamPolicy","body":"*"}}]},"GetIamPolicy":{"requestType":"GetIamPolicyRequest","responseType":"Policy","options":{"(google.api.http).post":"/v1/{resource=**}:getIamPolicy","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{resource=**}:getIamPolicy","body":"*"}}]},"TestIamPermissions":{"requestType":"TestIamPermissionsRequest","responseType":"TestIamPermissionsResponse","options":{"(google.api.http).post":"/v1/{resource=**}:testIamPermissions","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{resource=**}:testIamPermissions","body":"*"}}]}}},"SetIamPolicyRequest":{"fields":{"resource":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"*"}},"policy":{"type":"Policy","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}}}},"GetIamPolicyRequest":{"fields":{"resource":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"*"}},"options":{"type":"GetPolicyOptions","id":2}}},"TestIamPermissionsRequest":{"fields":{"resource":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"*"}},"permissions":{"rule":"repeated","type":"string","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}}}},"TestIamPermissionsResponse":{"fields":{"permissions":{"rule":"repeated","type":"string","id":1}}},"GetPolicyOptions":{"fields":{"requestedPolicyVersion":{"type":"int32","id":1}}},"Policy":{"fields":{"version":{"type":"int32","id":1},"bindings":{"rule":"repeated","type":"Binding","id":4},"etag":{"type":"bytes","id":3}}},"Binding":{"fields":{"role":{"type":"string","id":1},"members":{"rule":"repeated","type":"string","id":2},"condition":{"type":"google.type.Expr","id":3}}},"PolicyDelta":{"fields":{"bindingDeltas":{"rule":"repeated","type":"BindingDelta","id":1},"auditConfigDeltas":{"rule":"repeated","type":"AuditConfigDelta","id":2}}},"BindingDelta":{"fields":{"action":{"type":"Action","id":1},"role":{"type":"string","id":2},"member":{"type":"string","id":3},"condition":{"type":"google.type.Expr","id":4}},"nested":{"Action":{"values":{"ACTION_UNSPECIFIED":0,"ADD":1,"REMOVE":2}}}},"AuditConfigDelta":{"fields":{"action":{"type":"Action","id":1},"service":{"type":"string","id":2},"exemptedMember":{"type":"string","id":3},"logType":{"type":"string","id":4}},"nested":{"Action":{"values":{"ACTION_UNSPECIFIED":0,"ADD":1,"REMOVE":2}}}},"logging":{"options":{"csharp_namespace":"Google.Cloud.Iam.V1.Logging","go_package":"google.golang.org/genproto/googleapis/iam/v1/logging;logging","java_multiple_files":true,"java_outer_classname":"AuditDataProto","java_package":"com.google.iam.v1.logging"},"nested":{"AuditData":{"fields":{"policyDelta":{"type":"google.iam.v1.PolicyDelta","id":2}}}}}}}}},"api":{"options":{"go_package":"google.golang.org/genproto/googleapis/api/annotations;annotations","java_multiple_files":true,"java_outer_classname":"ResourceProto","java_package":"com.google.api","objc_class_prefix":"GAPI","cc_enable_arenas":true},"nested":{"http":{"type":"HttpRule","id":72295728,"extend":"google.protobuf.MethodOptions"},"Http":{"fields":{"rules":{"rule":"repeated","type":"HttpRule","id":1},"fullyDecodeReservedExpansion":{"type":"bool","id":2}}},"HttpRule":{"oneofs":{"pattern":{"oneof":["get","put","post","delete","patch","custom"]}},"fields":{"selector":{"type":"string","id":1},"get":{"type":"string","id":2},"put":{"type":"string","id":3},"post":{"type":"string","id":4},"delete":{"type":"string","id":5},"patch":{"type":"string","id":6},"custom":{"type":"CustomHttpPattern","id":8},"body":{"type":"string","id":7},"responseBody":{"type":"string","id":12},"additionalBindings":{"rule":"repeated","type":"HttpRule","id":11}}},"CustomHttpPattern":{"fields":{"kind":{"type":"string","id":1},"path":{"type":"string","id":2}}},"methodSignature":{"rule":"repeated","type":"string","id":1051,"extend":"google.protobuf.MethodOptions"},"defaultHost":{"type":"string","id":1049,"extend":"google.protobuf.ServiceOptions"},"oauthScopes":{"type":"string","id":1050,"extend":"google.protobuf.ServiceOptions"},"fieldBehavior":{"rule":"repeated","type":"google.api.FieldBehavior","id":1052,"extend":"google.protobuf.FieldOptions"},"FieldBehavior":{"values":{"FIELD_BEHAVIOR_UNSPECIFIED":0,"OPTIONAL":1,"REQUIRED":2,"OUTPUT_ONLY":3,"INPUT_ONLY":4,"IMMUTABLE":5}},"resourceReference":{"type":"google.api.ResourceReference","id":1055,"extend":"google.protobuf.FieldOptions"},"resourceDefinition":{"rule":"repeated","type":"google.api.ResourceDescriptor","id":1053,"extend":"google.protobuf.FileOptions"},"resource":{"type":"google.api.ResourceDescriptor","id":1053,"extend":"google.protobuf.MessageOptions"},"ResourceDescriptor":{"fields":{"type":{"type":"string","id":1},"pattern":{"rule":"repeated","type":"string","id":2},"nameField":{"type":"string","id":3},"history":{"type":"History","id":4},"plural":{"type":"string","id":5},"singular":{"type":"string","id":6}},"nested":{"History":{"values":{"HISTORY_UNSPECIFIED":0,"ORIGINALLY_SINGLE_PATTERN":1,"FUTURE_MULTI_PATTERN":2}}}},"ResourceReference":{"fields":{"type":{"type":"string","id":1},"childType":{"type":"string","id":2}}}}},"protobuf":{"options":{"go_package":"github.com/golang/protobuf/protoc-gen-go/descriptor;descriptor","java_package":"com.google.protobuf","java_outer_classname":"DescriptorProtos","csharp_namespace":"Google.Protobuf.Reflection","objc_class_prefix":"GPB","cc_enable_arenas":true,"optimize_for":"SPEED"},"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2},"options":{"type":"ExtensionRangeOptions","id":3}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"ExtensionRangeOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8},"proto3Optional":{"type":"bool","id":17}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REQUIRED":2,"LABEL_REPEATED":3}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3},"reservedRange":{"rule":"repeated","type":"EnumReservedRange","id":4},"reservedName":{"rule":"repeated","type":"string","id":5}},"nested":{"EnumReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5,"options":{"default":false}},"serverStreaming":{"type":"bool","id":6,"options":{"default":false}}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10,"options":{"default":false}},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27,"options":{"default":false}},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16,"options":{"default":false}},"javaGenericServices":{"type":"bool","id":17,"options":{"default":false}},"pyGenericServices":{"type":"bool","id":18,"options":{"default":false}},"phpGenericServices":{"type":"bool","id":42,"options":{"default":false}},"deprecated":{"type":"bool","id":23,"options":{"default":false}},"ccEnableArenas":{"type":"bool","id":31,"options":{"default":true}},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"swiftPrefix":{"type":"string","id":39},"phpClassPrefix":{"type":"string","id":40},"phpNamespace":{"type":"string","id":41},"phpMetadataNamespace":{"type":"string","id":44},"rubyPackage":{"type":"string","id":45},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1,"options":{"default":false}},"noStandardDescriptorAccessor":{"type":"bool","id":2,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"mapEntry":{"type":"bool","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[8,8],[9,9]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"weak":{"type":"bool","id":10,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}}}},"OneofOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[5,5]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"deprecated":{"type":"bool","id":33,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33,"options":{"default":false}},"idempotencyLevel":{"type":"IdempotencyLevel","id":34,"options":{"default":"IDEMPOTENCY_UNKNOWN"}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"nested":{"IdempotencyLevel":{"values":{"IDEMPOTENCY_UNKNOWN":0,"NO_SIDE_EFFECTS":1,"IDEMPOTENT":2}}}},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4}}}}}}},"type":{"options":{"go_package":"google.golang.org/genproto/googleapis/type/expr;expr","java_multiple_files":true,"java_outer_classname":"ExprProto","java_package":"com.google.type","objc_class_prefix":"GTP"},"nested":{"Expr":{"fields":{"expression":{"type":"string","id":1},"title":{"type":"string","id":2},"description":{"type":"string","id":3},"location":{"type":"string","id":4}}}}}}}}'),require$$5$1={nested:nested$4};var hasRequiredIamService;function requireIamService(){if(hasRequiredIamService)return iamService;hasRequiredIamService=1;var e={};Object.defineProperty(iamService,"__esModule",{value:!0}),iamService.IamClient=void 0;const t=requireCreateApiCall(),s=requireRoutingHeader(),p=require$$2$1,g=requireFallback();let m=require$$17.version;const d=require$$5$1;class l{constructor(o,h){this._terminated=!1,this.descriptors={page:{},stream:{},longrunning:{}},this.innerApiCalls={},this.gaxGrpc=o;const v=Object.assign({servicePath:h.servicePath,port:h.port,clientConfig:h.clientConfig,apiEndpoint:h.apiEndpoint,fallback:h.fallback},h);m=v.fallback?g.version:m,v.scopes=this.constructor.scopes,this._opts=v,this.auth=o.auth;const _=[`gax/${m}`,`gapic/${m}`];typeof e<"u"&&"versions"in e?_.push(`gl-node/${e.versions.node}`):_.push(`gl-web/${m}`),v.fallback||_.push(`grpc/${o.grpcVersion}`),v.libName&&v.libVersion&&_.push(`${v.libName}/${v.libVersion}`),this._protos=this.gaxGrpc.loadProtoJSON(d),this._defaults=o.constructSettings("google.iam.v1.IAMPolicy",p,v.clientConfig||{},{"x-goog-api-client":_.join(" ")}),this.innerApiCalls={}}initialize(){if(this.iamPolicyStub)return this.iamPolicyStub;this.iamPolicyStub=this.gaxGrpc.createStub(this._opts.fallback?this._protos.lookupService("google.iam.v1.IAMPolicy"):this._protos.google.iam.v1.IAMPolicy,this._opts);const o=["getIamPolicy","setIamPolicy","testIamPermissions"];for(const h of o){const v=this.iamPolicyStub.then(_=>(...y)=>this._terminated?Promise.reject("The client has already been closed."):_[h].apply(_,y),_=>()=>{throw _});this.innerApiCalls[h]=(0,t.createApiCall)(v,this._defaults[h],this.descriptors.page[h])}return this.iamPolicyStub}static get servicePath(){return"cloudkms.googleapis.com"}static get apiEndpoint(){return"cloudkms.googleapis.com"}static get port(){return 443}static get scopes(){return["https://www.googleapis.com/auth/cloud-platform","https://www.googleapis.com/auth/cloudkms"]}getProjectId(o){if(this.auth&&"getProjectId"in this.auth)return this.auth.getProjectId(o);if(o)o(new Error("Cannot determine project ID."));else return Promise.reject("Cannot determine project ID.")}getIamPolicy(o,h,v){let _;return h instanceof Function&&v===void 0?(v=h,_={}):_=h,o=o||{},_=_||{},_.otherArgs=_.otherArgs||{},_.otherArgs.headers=_.otherArgs.headers||{},_.otherArgs.headers["x-goog-request-params"]=s.fromParams({resource:o.resource}),this.initialize(),this.innerApiCalls.getIamPolicy(o,_,v)}setIamPolicy(o,h,v){let _;return h instanceof Function&&v===void 0?(v=h,_={}):_=h,o=o||{},_=_||{},_.otherArgs=_.otherArgs||{},_.otherArgs.headers=_.otherArgs.headers||{},_.otherArgs.headers["x-goog-request-params"]=s.fromParams({resource:o.resource}),this.initialize(),this.innerApiCalls.setIamPolicy(o,_,v)}testIamPermissions(o,h,v){let _;return h instanceof Function&&v===void 0?(v=h,_={}):_=h,o=o||{},_=_||{},_.otherArgs=_.otherArgs||{},_.otherArgs.headers=_.otherArgs.headers||{},_.otherArgs.headers["x-goog-request-params"]=s.fromParams({resource:o.resource}),this.initialize(),this.innerApiCalls.testIamPermissions(o,_,v)}close(){return this.initialize(),this._terminated?Promise.resolve():this.iamPolicyStub.then(o=>{this._terminated=!0,o.close()})}}return iamService.IamClient=l,iamService}var locationService={};const nested$3=JSON.parse('{"google":{"nested":{"cloud":{"nested":{"location":{"options":{"cc_enable_arenas":true,"go_package":"google.golang.org/genproto/googleapis/cloud/location;location","java_multiple_files":true,"java_outer_classname":"LocationsProto","java_package":"com.google.cloud.location"},"nested":{"Locations":{"options":{"(google.api.default_host)":"cloud.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform"},"methods":{"ListLocations":{"requestType":"ListLocationsRequest","responseType":"ListLocationsResponse","options":{"(google.api.http).get":"/v1/{name=locations}","(google.api.http).additional_bindings.get":"/v1/{name=projects/*}/locations"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=locations}","additional_bindings":{"get":"/v1/{name=projects/*}/locations"}}}]},"GetLocation":{"requestType":"GetLocationRequest","responseType":"Location","options":{"(google.api.http).get":"/v1/{name=locations/*}","(google.api.http).additional_bindings.get":"/v1/{name=projects/*/locations/*}"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=locations/*}","additional_bindings":{"get":"/v1/{name=projects/*/locations/*}"}}}]}}},"ListLocationsRequest":{"fields":{"name":{"type":"string","id":1},"filter":{"type":"string","id":2},"pageSize":{"type":"int32","id":3},"pageToken":{"type":"string","id":4}}},"ListLocationsResponse":{"fields":{"locations":{"rule":"repeated","type":"Location","id":1},"nextPageToken":{"type":"string","id":2}}},"GetLocationRequest":{"fields":{"name":{"type":"string","id":1}}},"Location":{"fields":{"name":{"type":"string","id":1},"locationId":{"type":"string","id":4},"displayName":{"type":"string","id":5},"labels":{"keyType":"string","type":"string","id":2},"metadata":{"type":"google.protobuf.Any","id":3}}}}}}},"api":{"options":{"go_package":"google.golang.org/genproto/googleapis/api/annotations;annotations","java_multiple_files":true,"java_outer_classname":"ClientProto","java_package":"com.google.api","objc_class_prefix":"GAPI","cc_enable_arenas":true},"nested":{"http":{"type":"HttpRule","id":72295728,"extend":"google.protobuf.MethodOptions"},"Http":{"fields":{"rules":{"rule":"repeated","type":"HttpRule","id":1},"fullyDecodeReservedExpansion":{"type":"bool","id":2}}},"HttpRule":{"oneofs":{"pattern":{"oneof":["get","put","post","delete","patch","custom"]}},"fields":{"selector":{"type":"string","id":1},"get":{"type":"string","id":2},"put":{"type":"string","id":3},"post":{"type":"string","id":4},"delete":{"type":"string","id":5},"patch":{"type":"string","id":6},"custom":{"type":"CustomHttpPattern","id":8},"body":{"type":"string","id":7},"responseBody":{"type":"string","id":12},"additionalBindings":{"rule":"repeated","type":"HttpRule","id":11}}},"CustomHttpPattern":{"fields":{"kind":{"type":"string","id":1},"path":{"type":"string","id":2}}},"methodSignature":{"rule":"repeated","type":"string","id":1051,"extend":"google.protobuf.MethodOptions"},"defaultHost":{"type":"string","id":1049,"extend":"google.protobuf.ServiceOptions"},"oauthScopes":{"type":"string","id":1050,"extend":"google.protobuf.ServiceOptions"}}},"protobuf":{"options":{"go_package":"google.golang.org/protobuf/types/descriptorpb","java_package":"com.google.protobuf","java_outer_classname":"DescriptorProtos","csharp_namespace":"Google.Protobuf.Reflection","objc_class_prefix":"GPB","cc_enable_arenas":true,"optimize_for":"SPEED"},"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2},"options":{"type":"ExtensionRangeOptions","id":3}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"ExtensionRangeOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8},"proto3Optional":{"type":"bool","id":17}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REQUIRED":2,"LABEL_REPEATED":3}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3},"reservedRange":{"rule":"repeated","type":"EnumReservedRange","id":4},"reservedName":{"rule":"repeated","type":"string","id":5}},"nested":{"EnumReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5,"options":{"default":false}},"serverStreaming":{"type":"bool","id":6,"options":{"default":false}}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10,"options":{"default":false}},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27,"options":{"default":false}},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16,"options":{"default":false}},"javaGenericServices":{"type":"bool","id":17,"options":{"default":false}},"pyGenericServices":{"type":"bool","id":18,"options":{"default":false}},"phpGenericServices":{"type":"bool","id":42,"options":{"default":false}},"deprecated":{"type":"bool","id":23,"options":{"default":false}},"ccEnableArenas":{"type":"bool","id":31,"options":{"default":true}},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"swiftPrefix":{"type":"string","id":39},"phpClassPrefix":{"type":"string","id":40},"phpNamespace":{"type":"string","id":41},"phpMetadataNamespace":{"type":"string","id":44},"rubyPackage":{"type":"string","id":45},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1,"options":{"default":false}},"noStandardDescriptorAccessor":{"type":"bool","id":2,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"mapEntry":{"type":"bool","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[8,8],[9,9]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"weak":{"type":"bool","id":10,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}}}},"OneofOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[5,5]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"deprecated":{"type":"bool","id":33,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33,"options":{"default":false}},"idempotencyLevel":{"type":"IdempotencyLevel","id":34,"options":{"default":"IDEMPOTENCY_UNKNOWN"}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"nested":{"IdempotencyLevel":{"values":{"IDEMPOTENCY_UNKNOWN":0,"NO_SIDE_EFFECTS":1,"IDEMPOTENT":2}}}},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4}}}}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}}}}}}}'),require$$5={nested:nested$3},interfaces$2={"google.cloud.location.Locations":{retry_codes:{non_idempotent:[],idempotent:["DEADLINE_EXCEEDED","UNAVAILABLE"]},retry_params:{default:{initial_retry_delay_millis:100,retry_delay_multiplier:1.3,max_retry_delay_millis:6e4,initial_rpc_timeout_millis:6e4,rpc_timeout_multiplier:1,max_rpc_timeout_millis:6e4,total_timeout_millis:6e5}},methods:{ListLocations:{retry_codes_name:"non_idempotent",retry_params_name:"default"},GetLocation:{retry_codes_name:"non_idempotent",retry_params_name:"default"}}}},require$$6={interfaces:interfaces$2};var hasRequiredLocationService;function requireLocationService(){if(hasRequiredLocationService)return locationService;hasRequiredLocationService=1;var e={};Object.defineProperty(locationService,"__esModule",{value:!0}),locationService.LocationsClient=void 0;const t=requireGax(),s=requireWarnings(),p=requireCreateApiCall(),g=requireRoutingHeader(),m=requirePageDescriptor(),d=require$$5,l=require$$6,a=require$$17.version;class o{constructor(v,_){var y,w;this._terminated=!1,this.descriptors={page:{},stream:{},longrunning:{},batching:{}},this.gaxGrpc=v;const T=this.constructor,I=_?.servicePath||_?.apiEndpoint||T.servicePath;this._providedCustomServicePath=!!(_?.servicePath||_?.apiEndpoint);const O=_?.port||T.port,E=(y=_?.clientConfig)!==null&&y!==void 0?y:{},C=(w=_?.fallback)!==null&&w!==void 0?w:typeof window<"u"&&typeof window?.fetch=="function";_=Object.assign({servicePath:I,port:O,clientConfig:E,fallback:C},_),I!==T.servicePath&&!("scopes"in _)&&(_.scopes=T.scopes),this._opts=_,this.auth=v.auth,I===T.servicePath&&(this.auth.defaultScopes=T.scopes);const x=[`gax/${a}`,`gapic/${a}`];typeof e<"u"&&"versions"in e?x.push(`gl-node/${e.versions.node}`):x.push(`gl-web/${a}`),_.fallback?_.fallback==="rest"&&x.push(`rest/${v.grpcVersion}`):x.push(`grpc/${v.grpcVersion}`),_.libName&&_.libVersion&&x.push(`${_.libName}/${_.libVersion}`),this._protos=v.loadProtoJSON(d),this.descriptors.page={listLocations:new m.PageDescriptor("pageToken","nextPageToken","locations")},this._defaults=v.constructSettings("google.cloud.location.Locations",l,_.clientConfig||{},{"x-goog-api-client":x.join(" ")}),this.innerApiCalls={},this.warn=s.warn}initialize(){if(this.locationsStub)return this.locationsStub;this.locationsStub=this.gaxGrpc.createStub(this._opts.fallback?this._protos.lookupService("google.cloud.location.Locations"):this._protos.google.cloud.location.Locations,this._opts,this._providedCustomServicePath);const v=["listLocations","getLocation"];for(const _ of v){const y=this.locationsStub.then(I=>(...O)=>this._terminated?Promise.reject("The client has already been closed."):I[_].apply(I,O),I=>()=>{throw I}),w=this.descriptors.page[_]||void 0,T=(0,p.createApiCall)(y,this._defaults[_],w);this.innerApiCalls[_]=T}return this.locationsStub}static get servicePath(){return"cloud.googleapis.com"}static get apiEndpoint(){return"cloud.googleapis.com"}static get port(){return 443}static get scopes(){return["https://www.googleapis.com/auth/cloud-platform"]}getProjectId(v){if(v){this.auth.getProjectId(v);return}return this.auth.getProjectId()}getLocation(v,_,y){v=v||{};let w;return typeof _=="function"&&y===void 0?(y=_,w={}):w=_,w=w||{},w.otherArgs=w.otherArgs||{},w.otherArgs.headers=w.otherArgs.headers||{},w.otherArgs.headers["x-goog-request-params"]=g.fromParams({name:v.name||""}),this.initialize(),this.innerApiCalls.getLocation(v,w,y)}listLocations(v,_,y){v=v||{};let w;return typeof _=="function"&&y===void 0?(y=_,w={}):w=_,w=w||{},w.otherArgs=w.otherArgs||{},w.otherArgs.headers=w.otherArgs.headers||{},w.otherArgs.headers["x-goog-request-params"]=g.fromParams({name:v.name||""}),this.initialize(),this.innerApiCalls.listLocations(v,w,y)}listLocationsAsync(v,_){v=v||{},_=_||{},_.otherArgs=_.otherArgs||{},_.otherArgs.headers=_.otherArgs.headers||{},_.otherArgs.headers["x-goog-request-params"]=g.fromParams({name:v.name||""}),_=_||{};const y=new t.CallSettings(_);return this.initialize(),this.descriptors.page.listLocations.asyncIterate(this.innerApiCalls.listLocations,v,y)}close(){return this.initialize(),this._terminated?Promise.resolve():this.locationsStub.then(v=>{this._terminated=!0,v.close()})}}return locationService.LocationsClient=o,locationService}var hasRequiredFallback;function requireFallback(){return hasRequiredFallback||(hasRequiredFallback=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.fallback=t.GoogleError=t.operation=t.Operation=t.warn=t.protobufMinimal=t.protobuf=t.LocationProtos=t.IamProtos=t.operationsProtos=t.GrpcClient=t.defaultToObjectOptions=t.makeUUID=t.LocationsClient=t.IamClient=t.OperationsClient=t.StreamType=t.StreamDescriptor=t.PageDescriptor=t.LongrunningDescriptor=t.BundleDescriptor=t.version=t.createDefaultBackoffSettings=t.RetryOptions=t.constructSettings=t.CallSettings=t.routingHeader=t.PathTemplate=void 0,t.lro=K,t.createApiCall=z;const s=requireObject_hash(),p=requireProtobufjs();t.protobuf=p;const g=requireGax(),m=requireRoutingHeader();t.routingHeader=m;const d=requireStatus(),l=requireSrc$b(),a=requireOperationsClient(),o=requireCreateApiCall(),h=requireFallbackRest(),v=requireFeatureDetection(),_=requireFallbackServiceStub(),y=requireStreaming(),w=requireUtil$2(),T=requireIam_service();t.IamProtos=T;const I=requireLocations();t.LocationProtos=I;const O=requireOperations();t.operationsProtos=O;var E=requirePathTemplate();Object.defineProperty(t,"PathTemplate",{enumerable:!0,get:function(){return E.PathTemplate}});var C=requireGax();Object.defineProperty(t,"CallSettings",{enumerable:!0,get:function(){return C.CallSettings}}),Object.defineProperty(t,"constructSettings",{enumerable:!0,get:function(){return C.constructSettings}}),Object.defineProperty(t,"RetryOptions",{enumerable:!0,get:function(){return C.RetryOptions}}),Object.defineProperty(t,"createDefaultBackoffSettings",{enumerable:!0,get:function(){return C.createDefaultBackoffSettings}}),t.version=require$$17.version+"-fallback";var x=requireDescriptor();Object.defineProperty(t,"BundleDescriptor",{enumerable:!0,get:function(){return x.BundleDescriptor}}),Object.defineProperty(t,"LongrunningDescriptor",{enumerable:!0,get:function(){return x.LongrunningDescriptor}}),Object.defineProperty(t,"PageDescriptor",{enumerable:!0,get:function(){return x.PageDescriptor}}),Object.defineProperty(t,"StreamDescriptor",{enumerable:!0,get:function(){return x.StreamDescriptor}});var j=requireStreaming();Object.defineProperty(t,"StreamType",{enumerable:!0,get:function(){return j.StreamType}});var D=requireOperationsClient();Object.defineProperty(t,"OperationsClient",{enumerable:!0,get:function(){return D.OperationsClient}});var k=requireIamService();Object.defineProperty(t,"IamClient",{enumerable:!0,get:function(){return k.IamClient}});var q=requireLocationService();Object.defineProperty(t,"LocationsClient",{enumerable:!0,get:function(){return q.LocationsClient}});var G=requireUtil$2();Object.defineProperty(t,"makeUUID",{enumerable:!0,get:function(){return G.makeUUID}}),t.defaultToObjectOptions={keepCase:!1,longs:String,enums:String,defaults:!0,oneofs:!0};const $="x-goog-api-client";class W{static clearProtoCache(){W.protoCache.clear()}constructor(ee={}){var oe;if((0,v.isNodeJS)())this.auth=ee.auth||new l.GoogleAuth(ee);else{if(!ee.auth)throw new Error(JSON.stringify(ee)+"You need to pass auth instance to use gRPC-fallback client in browser or other non-Node.js environments. Use OAuth2Client from google-auth-library.");this.auth=ee.auth}this.fallback=!!ee.fallback,this.grpcVersion=require$$17.version,this.httpRules=ee.httpRules,this.numericEnums=(oe=ee.numericEnums)!==null&&oe!==void 0?oe:!1}loadProto(ee){return p.Root.fromJSON(ee)}loadProtoJSON(ee,oe=!1){const de=s(JSON.stringify(ee)).toString(),he=W.protoCache.get(de);if(he&&!oe)return he;const Ee=p.Root.fromJSON(ee);return W.protoCache.set(de,Ee),Ee}static getServiceMethods(ee){const oe={};for(const[de,he]of Object.entries(ee.methods)){const Ee=(0,w.toLowerCamelCase)(de);oe[Ee]=he}return oe}constructSettings(ee,oe,de,he){function Ee(fe,Se){const be={};he||(he={});for(const ge in he)be[ge]=Array.isArray(he[ge])?he[ge]:[he[ge]];const Oe=[];if(be[$]&&be[$][0]&&Oe.push(...be[$][0].split(" ")),Oe.push(`grpc-web/${t.version}`),be[$]=[Oe.join(" ")],!Se)return be;for(const ge in Se)if(ge.toLowerCase()!==$){const J=Se[ge];if(Array.isArray(J))if(be[ge]===void 0)be[ge]=J;else if(Array.isArray(be[ge]))be[ge].push(...J);else throw new Error(`Can not add value ${J} to the call metadata.`);else be[ge]=[J]}return be}return g.constructSettings(ee,oe,de,d.Status,{metadataBuilder:Ee})}async createStub(ee,oe,de){if(this.authClient||(this.auth&&"getClient"in this.auth?this.authClient=await this.auth.getClient():this.auth&&"getRequestHeaders"in this.auth&&(this.authClient=this.auth)),!this.authClient)throw new Error("No authentication was provided");if(oe.universeDomain||(oe.universeDomain="googleapis.com"),oe.universeDomain){const c=this.authClient.universeDomain;if(c&&oe.universeDomain!==c)throw new Error(`The configured universe domain (${oe.universeDomain}) does not match the universe domain found in the credentials (${c}). If you haven't configured the universe domain explicitly, googleapis.com is the default.`)}ee.resolveAll();const he=W.getServiceMethods(ee),Ee=oe.protocol||"https";let fe=oe.servicePath;if(!fe&&ee.options&&ee.options["(google.api.default_host)"]&&(fe=ee.options["(google.api.default_host)"]),!fe)throw new Error(`Cannot determine service API path for service ${ee.name}.`);let Se;const be=fe.match(/^(.*):(\d+)$/);be&&(fe=be[1],Se=parseInt(be[2])),oe.port?Se=oe.port:Se||(Se=443);const Oe=h.encodeRequest,ge=h.decodeResponse;return(0,_.generateServiceStub)(he,Ee,fe,Se,this.authClient,Oe,ge,this.numericEnums)}static createByteLengthFunction(ee){return g.createByteLengthFunction(ee)}}t.GrpcClient=W,W.protoCache=new Map;function K(ue){ue=Object.assign({scopes:[]},ue),ue.protoJson&&(ue=Object.assign(ue,{fallback:!0}));const ee=new W(ue);return new a.OperationsClientBuilder(ee,ue.protoJson)}function z(ue,ee,oe,de){return oe&&"streaming"in oe&&oe.type!==y.StreamType.SERVER_STREAMING?()=>{throw new Error("The REST transport currently does not support client-streaming or bidi-stream calls.")}:oe&&"streaming"in oe&&!(0,v.isNodeJS)()?()=>{throw new Error("Server streaming over the REST transport is only supported in Node.js.")}:(0,o.createApiCall)(ue,ee,oe)}t.protobufMinimal=requireMinimal();var Q=requireWarnings();Object.defineProperty(t,"warn",{enumerable:!0,get:function(){return Q.warn}});var Y=requireLongrunning();Object.defineProperty(t,"Operation",{enumerable:!0,get:function(){return Y.Operation}}),Object.defineProperty(t,"operation",{enumerable:!0,get:function(){return Y.operation}});var te=requireGoogleError();Object.defineProperty(t,"GoogleError",{enumerable:!0,get:function(){return te.GoogleError}});const ae=e.exports;t.fallback=ae})(fallback,fallback.exports)),fallback.exports}var hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util$3;hasRequiredUtil=1;var e={};Object.defineProperty(util$3,"__esModule",{value:!0}),util$3.Deferred=void 0,util$3.autoId=g,util$3.requestTag=m,util$3.isObject=d,util$3.isPlainObject=l,util$3.isEmpty=a,util$3.isFunction=o,util$3.isPermanentRpcError=h,util$3.getRetryCodes=y,util$3.getTotalTimeout=w,util$3.getRetryParams=T,util$3.silencePromise=I,util$3.wrapError=O,util$3.tryGetPreferRestEnvironmentVariable=E,util$3.mapToArray=C,util$3.isArrayEqual=x,util$3.isPrimitiveArrayEqual=j;const t=require$$1$3,s=require$$19;class p{constructor(){this.resolve=()=>{},this.reject=()=>{},this.promise=new Promise((k,q)=>{this.resolve=k,this.reject=q})}}util$3.Deferred=p;function g(){const D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let k="";for(;k.length<20;)(0,t.randomBytes)(40).forEach(G=>{k.length<20&&G<=247&&(k+=D.charAt(G%62))});return k}function m(){return g().substr(0,5)}function d(D){return Object.prototype.toString.call(D)==="[object Object]"}function l(D){return d(D)&&(Object.getPrototypeOf(D)===Object.prototype||Object.getPrototypeOf(D)===null||D.constructor.name==="Object")}function a(D){return Object.keys(D).length===0}function o(D){return typeof D=="function"}function h(D,k){return D.code!==void 0?y(k).indexOf(D.code)===-1:!1}let v;function _(D){return v||(v=requireFallback().constructSettings("google.firestore.v1.Firestore",s,{},requireStatus().Status)),v[D]}function y(D){var k,q,G;return(G=(q=(k=_(D))===null||k===void 0?void 0:k.retry)===null||q===void 0?void 0:q.retryCodes)!==null&&G!==void 0?G:[]}function w(D){var k,q,G,$;return($=(G=(q=(k=_(D))===null||k===void 0?void 0:k.retry)===null||q===void 0?void 0:q.backoffSettings)===null||G===void 0?void 0:G.totalTimeoutMillis)!==null&&$!==void 0?$:0}function T(D){var k,q,G;return(G=(q=(k=_(D))===null||k===void 0?void 0:k.retry)===null||q===void 0?void 0:q.backoffSettings)!==null&&G!==void 0?G:requireFallback().createDefaultBackoffSettings()}function I(D){return D.then(()=>{},()=>{})}function O(D,k){return D.stack+=`
Caused by: `+k,D}function E(){var D;const k=(D=e.FIRESTORE_PREFER_REST)===null||D===void 0?void 0:D.trim().toLowerCase();if(k!==void 0){if(k==="1"||k==="true")return!0;if(k==="0"||k==="false")return!1;console.warn(`An unsupported value was specified for the environment variable FIRESTORE_PREFER_REST. Value ${k} is unsupported.`);return}}function C(D,k){const q=[];for(const G in D)Object.prototype.hasOwnProperty.call(D,G)&&q.push(k(D[G],G,D));return q}function x(D,k){if(D.length!==k.length)return!1;for(let q=0;q<D.length;++q)if(!D[q].isEqual(k[q]))return!1;return!0}function j(D,k){if(D.length!==k.length)return!1;for(let q=0;q<D.length;++q)if(D[q]!==k[q])return!1;return!0}return util$3}var timestamp={},hasRequiredTimestamp;function requireTimestamp(){if(hasRequiredTimestamp)return timestamp;hasRequiredTimestamp=1;Object.defineProperty(timestamp,"__esModule",{value:!0}),timestamp.Timestamp=void 0;const e=requireValidate();const t=1e6;const s=-62135596800;const p=253402300799;class g{static now(){return g.fromMillis(Date.now())}static fromDate(d){return g.fromMillis(d.getTime())}static fromMillis(d){const l=Math.floor(d/1e3),a=Math.floor((d-l*1e3)*t);return new g(l,a)}static fromProto(d){return new g(Number(d.seconds||0),d.nanos||0)}constructor(d,l){(0,e.validateInteger)("seconds",d,{minValue:s,maxValue:p}),(0,e.validateInteger)("nanoseconds",l,{minValue:0,maxValue:999999999}),this._seconds=d,this._nanoseconds=l}get seconds(){return this._seconds}get nanoseconds(){return this._nanoseconds}toDate(){return new Date(this._seconds*1e3+Math.round(this._nanoseconds/t))}toMillis(){return this._seconds*1e3+Math.floor(this._nanoseconds/t)}isEqual(d){return this===d||d instanceof g&&this._seconds===d.seconds&&this._nanoseconds===d.nanoseconds}toProto(){const d={};return this.seconds&&(d.seconds=this.seconds.toString()),this.nanoseconds&&(d.nanos=this.nanoseconds),{timestampValue:d}}valueOf(){const d=this.seconds-s,l=String(d).padStart(12,"0"),a=String(this.nanoseconds).padStart(9,"0");return l+"."+a}}return timestamp.Timestamp=g,timestamp}var hasRequiredValidate;function requireValidate(){if(hasRequiredValidate)return validate$1;hasRequiredValidate=1;Object.defineProperty(validate$1,"__esModule",{value:!0}),validate$1.customObjectMessage=p,validate$1.validateFunction=g,validate$1.validateObject=m,validate$1.validateString=d,validate$1.validateHost=l,validate$1.validateBoolean=a,validate$1.validateNumber=o,validate$1.validateInteger=h,validate$1.validateTimestamp=v,validate$1.invalidArgumentMessage=_,validate$1.validateOptional=y,validate$1.validateMinNumberOfArguments=I,validate$1.validateMaxNumberOfArguments=O,validate$1.validateEnumValue=E;const e=require$$1$3,t=requireUtil(),s=requireTimestamp();function p(C,x,j){const D=j?` (found in field "${j}")`:"";if((0,t.isObject)(x)){const k=x.constructor.name;switch(k){case"DocumentReference":case"FieldPath":case"FieldValue":case"GeoPoint":case"Timestamp":return`${_(C,"Firestore document")} Detected an object of type "${k}" that doesn't match the expected instance${D}. Please ensure that the Firestore types you are using are from the same NPM package.)`;case"Object":return`${_(C,"Firestore document")} Invalid use of type "${typeof x}" as a Firestore argument${D}.`;default:return`${_(C,"Firestore document")} Couldn't serialize object of type "${k}"${D}. Firestore doesn't support JavaScript objects with custom prototypes (i.e. objects that were created via the "new" operator).`}}else return`${_(C,"Firestore document")} Input is not a plain JavaScript object${D}.`}function g(C,x,j){if(!y(x,j)&&!(0,t.isFunction)(x))throw new Error(_(C,"function"))}function m(C,x,j){if(!y(x,j)&&!(0,t.isObject)(x))throw new Error(_(C,"object"))}function d(C,x,j){if(!y(x,j)&&typeof x!="string")throw new Error(_(C,"string"))}function l(C,x,j){if(!y(x,j)){d(C,x);const D=`http://${x}/`;let k;try{k=new e.URL(D)}catch{throw new Error(_(C,"host"))}if(k.search!==""||k.pathname!=="/"||k.username!=="")throw new Error(_(C,"host"))}}function a(C,x,j){if(!y(x,j)&&typeof x!="boolean")throw new Error(_(C,"boolean"))}function o(C,x,j){const D=j!==void 0&&j.minValue!==void 0?j.minValue:-1/0,k=j!==void 0&&j.maxValue!==void 0?j.maxValue:1/0;if(!y(x,j)){if(typeof x!="number"||isNaN(x))throw new Error(_(C,"number"));if(x<D||x>k)throw new Error(`${T(C)} must be within [${D}, ${k}] inclusive, but was: ${x}`)}}function h(C,x,j){const D=j!==void 0&&j.minValue!==void 0?j.minValue:-1/0,k=j!==void 0&&j.maxValue!==void 0?j.maxValue:1/0;if(!y(x,j)){if(typeof x!="number"||isNaN(x)||x%1!==0)throw new Error(_(C,"integer"));if(x<D||x>k)throw new Error(`${T(C)} must be within [${D}, ${k}] inclusive, but was: ${x}`)}}function v(C,x,j){if(!y(x,j)&&!(x instanceof s.Timestamp))throw new Error(_(C,"Timestamp"))}function _(C,x){return`${T(C)} is not a valid ${x}.`}function y(C,x){return C===void 0&&x!==void 0&&x.optional===!0}function w(C,x){return`${C} ${x}`+(C===1?"":"s")}function T(C){return typeof C=="string"?`Value for argument "${C}"`:`Element at index ${C}`}function I(C,x,j){if(x.length<j)throw new Error(`Function "${C}()" requires at least ${w(j,"argument")}.`)}function O(C,x,j){if(x.length>j)throw new Error(`Function "${C}()" accepts at most ${w(j,"argument")}.`)}function E(C,x,j,D){if(!y(x,D)){const k=[];for(const q of j){if(q===x)return;k.push(q)}throw new Error(`${T(C)} is invalid. Acceptable values are: ${k.join(", ")}`)}}return validate$1}var hasRequiredLogger;function requireLogger(){if(hasRequiredLogger)return logger;hasRequiredLogger=1;Object.defineProperty(logger,"__esModule",{value:!0}),logger.logger=g,logger.setLogFunction=m,logger.setLibVersion=d;const e=require$$1$3,t=requireValidate();let s;let p=null;function g(l,a,o,...h){if(a=a||"#####",p){const v=e.format(o,...h),_=new Date().toISOString();p(`Firestore (${s}) ${_} ${a} [${l}]: `+v)}}function m(l){l!==null&&(0,t.validateFunction)("logger",l),p=l}function d(l){s=l}return logger}var hasRequiredBackoff;function requireBackoff(){return hasRequiredBackoff||(hasRequiredBackoff=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ExponentialBackoff=e.delayExecution=e.MAX_RETRY_ATTEMPTS=e.DEFAULT_BACKOFF_FACTOR=e.DEFAULT_BACKOFF_MAX_DELAY_MS=e.DEFAULT_BACKOFF_INITIAL_DELAY_MS=void 0,e.setTimeoutHandler=p;const t=requireLogger();e.DEFAULT_BACKOFF_INITIAL_DELAY_MS=1e3;e.DEFAULT_BACKOFF_MAX_DELAY_MS=6e4;e.DEFAULT_BACKOFF_FACTOR=1.5;const s=1;e.MAX_RETRY_ATTEMPTS=10;e.delayExecution=setTimeout;function p(m){e.delayExecution=(d,l)=>(m(d,l),{hasRef:()=>{throw new Error("For tests only. Not Implemented")},ref:()=>{throw new Error("For tests only. Not Implemented")},refresh:()=>{throw new Error("For tests only. Not Implemented")},unref:()=>{throw new Error("For tests only. Not Implemented")},[Symbol.toPrimitive]:()=>{throw new Error("For tests only. Not Implemented")}})}class g{constructor(d={}){this._retryCount=0,this.currentBaseMs=0,this.awaitingBackoffCompletion=!1,this.initialDelayMs=d.initialDelayMs!==void 0?d.initialDelayMs:e.DEFAULT_BACKOFF_INITIAL_DELAY_MS,this.backoffFactor=d.backoffFactor!==void 0?d.backoffFactor:e.DEFAULT_BACKOFF_FACTOR,this.maxDelayMs=d.maxDelayMs!==void 0?d.maxDelayMs:e.DEFAULT_BACKOFF_MAX_DELAY_MS,this.jitterFactor=d.jitterFactor!==void 0?d.jitterFactor:s}reset(){this._retryCount=0,this.currentBaseMs=0}resetToMax(){this.currentBaseMs=this.maxDelayMs}backoffAndWait(){if(this.awaitingBackoffCompletion)return Promise.reject(new Error("A backoff operation is already in progress."));if(this.retryCount>e.MAX_RETRY_ATTEMPTS)return Promise.reject(new Error("Exceeded maximum number of retries allowed."));const d=this.currentBaseMs+this.jitterDelayMs();return this.currentBaseMs>0&&(0,t.logger)("ExponentialBackoff.backoffAndWait",null,`Backing off for ${d} ms (base delay: ${this.currentBaseMs} ms)`),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs=Math.max(this.currentBaseMs,this.initialDelayMs),this.currentBaseMs=Math.min(this.currentBaseMs,this.maxDelayMs),this._retryCount+=1,new Promise(l=>{this.awaitingBackoffCompletion=!0,(0,e.delayExecution)(()=>{this.awaitingBackoffCompletion=!1,l()},d)})}get retryCount(){return this._retryCount}jitterDelayMs(){return(Math.random()-.5)*this.jitterFactor*this.currentBaseMs}}e.ExponentialBackoff=g})(backoff)),backoff}var bulkWriter={},rateLimiter={},hasRequiredRateLimiter;function requireRateLimiter(){if(hasRequiredRateLimiter)return rateLimiter;hasRequiredRateLimiter=1,Object.defineProperty(rateLimiter,"__esModule",{value:!0}),rateLimiter.RateLimiter=void 0;const e=require$$1$3,t=requireLogger();class s{constructor(g,m,d,l,a=Date.now()){this.initialCapacity=g,this.multiplier=m,this.multiplierMillis=d,this.maximumCapacity=l,this.startTimeMillis=a,this.availableTokens=g,this.lastRefillTimeMillis=a,this.previousCapacity=g}tryMakeRequest(g,m=Date.now()){return this.refillTokens(m),g<=this.availableTokens?(this.availableTokens-=g,!0):!1}getNextRequestDelayMs(g,m=Date.now()){if(this.refillTokens(m),g<this.availableTokens)return 0;const d=this.calculateCapacity(m);if(d<g)return-1;const l=g-this.availableTokens;return Math.ceil(l*1e3/d)}refillTokens(g){if(g>=this.lastRefillTimeMillis){const m=g-this.lastRefillTimeMillis,d=this.calculateCapacity(g),l=Math.floor(m*d/1e3);l>0&&(this.availableTokens=Math.min(d,this.availableTokens+l),this.lastRefillTimeMillis=g)}else throw new Error("Request time should not be before the last token refill time.")}calculateCapacity(g){e(g>=this.startTimeMillis,"startTime cannot be after currentTime");const m=g-this.startTimeMillis,d=Math.min(Math.floor(Math.pow(this.multiplier,Math.floor(m/this.multiplierMillis))*this.initialCapacity),this.maximumCapacity);return d!==this.previousCapacity&&(0,t.logger)("RateLimiter.calculateCapacity",null,`New request capacity: ${d} operations per second.`),this.previousCapacity=d,d}}return rateLimiter.RateLimiter=s,rateLimiter}var writeBatch={},document$1={},fastDeepEqual,hasRequiredFastDeepEqual;function requireFastDeepEqual(){return hasRequiredFastDeepEqual||(hasRequiredFastDeepEqual=1,fastDeepEqual=function e(t,s){if(t===s)return!0;if(t&&s&&typeof t=="object"&&typeof s=="object"){if(t.constructor!==s.constructor)return!1;var p,g,m;if(Array.isArray(t)){if(p=t.length,p!=s.length)return!1;for(g=p;g--!==0;)if(!e(t[g],s[g]))return!1;return!0}if(t.constructor===RegExp)return t.source===s.source&&t.flags===s.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===s.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===s.toString();if(m=Object.keys(t),p=m.length,p!==Object.keys(s).length)return!1;for(g=p;g--!==0;)if(!Object.prototype.hasOwnProperty.call(s,m[g]))return!1;for(g=p;g--!==0;){var d=m[g];if(!e(t[d],s[d]))return!1}return!0}return t!==t&&s!==s}),fastDeepEqual}var fieldValue={},serializer={},convert={},mapType={},hasRequiredMapType;function requireMapType(){if(hasRequiredMapType)return mapType;hasRequiredMapType=1;return Object.defineProperty(mapType,"__esModule",{value:!0}),mapType.VECTOR_MAP_VECTORS_KEY=mapType.RESERVED_MAP_KEY_VECTOR_VALUE=mapType.RESERVED_MAP_KEY=void 0,mapType.RESERVED_MAP_KEY="__type__",mapType.RESERVED_MAP_KEY_VECTOR_VALUE="__vector__",mapType.VECTOR_MAP_VECTORS_KEY="value",mapType}var hasRequiredConvert;function requireConvert(){if(hasRequiredConvert)return convert;hasRequiredConvert=1;Object.defineProperty(convert,"__esModule",{value:!0}),convert.timestampFromJson=s,convert.detectValueType=g,convert.detectGoogleProtobufValueType=m,convert.valueFromJson=d,convert.fieldsFromJson=l;const e=requireValidate(),t=requireMapType();function s(a,o){let h={};if(typeof a=="string"){const v=new Date(a),_=Math.floor(v.getTime()/1e3);let y=0;if(a.length>20){const w=a.substring(20,a.length-1),T=9-w.length;y=Number(w)*Math.pow(10,T)}if(isNaN(_)||isNaN(y))throw o=o||"timestampValue",new Error(`Specify a valid ISO 8601 timestamp for "${o}".`);h={seconds:_||void 0,nanos:y||void 0}}else a!==void 0&&((0,e.validateObject)("timestampValue",a),h={seconds:a.seconds||void 0,nanos:a.nanos||void 0});return h}function p(a){return typeof a=="string"?Buffer.from(a,"base64"):a}function g(a){var o;let h;if(a.valueType)h=a.valueType;else{const v=[];if(a.stringValue!==void 0&&v.push("stringValue"),a.booleanValue!==void 0&&v.push("booleanValue"),a.integerValue!==void 0&&v.push("integerValue"),a.doubleValue!==void 0&&v.push("doubleValue"),a.timestampValue!==void 0&&v.push("timestampValue"),a.referenceValue!==void 0&&v.push("referenceValue"),a.arrayValue!==void 0&&v.push("arrayValue"),a.nullValue!==void 0&&v.push("nullValue"),a.mapValue!==void 0&&v.push("mapValue"),a.geoPointValue!==void 0&&v.push("geoPointValue"),a.bytesValue!==void 0&&v.push("bytesValue"),v.length!==1)throw new Error(`Unable to infer type value from '${JSON.stringify(a)}'.`);h=v[0]}if(h==="mapValue"){const v=(o=a.mapValue)===null||o===void 0?void 0:o.fields;v&&Object.keys(v).indexOf(t.RESERVED_MAP_KEY)!==-1&&g(v[t.RESERVED_MAP_KEY])==="stringValue"&&v[t.RESERVED_MAP_KEY].stringValue===t.RESERVED_MAP_KEY_VECTOR_VALUE&&(h="vectorValue")}return h}function m(a){const o=[];if(a.nullValue!==void 0&&o.push("nullValue"),a.numberValue!==void 0&&o.push("numberValue"),a.stringValue!==void 0&&o.push("stringValue"),a.boolValue!==void 0&&o.push("boolValue"),a.structValue!==void 0&&o.push("structValue"),a.listValue!==void 0&&o.push("listValue"),o.length!==1)throw new Error(`Unable to infer type value from '${JSON.stringify(a)}'.`);return o[0]}function d(a){switch(g(a)){case"timestampValue":return{timestampValue:s(a.timestampValue)};case"bytesValue":return{bytesValue:p(a.bytesValue)};case"doubleValue":return{doubleValue:Number(a.doubleValue)};case"arrayValue":{const h=[];if(Array.isArray(a.arrayValue.values))for(const v of a.arrayValue.values)h.push(d(v));return{arrayValue:{values:h}}}case"mapValue":case"vectorValue":{const h={},v=a.mapValue.fields;if(v)for(const _ of Object.keys(v))h[_]=d(a.mapValue.fields[_]);return{mapValue:{fields:h}}}default:return a}}function l(a){const o={};for(const h of Object.keys(a))o[h]=d(a[h]);return o}return convert}var geoPoint={},hasRequiredGeoPoint;function requireGeoPoint(){if(hasRequiredGeoPoint)return geoPoint;hasRequiredGeoPoint=1;Object.defineProperty(geoPoint,"__esModule",{value:!0}),geoPoint.GeoPoint=void 0;const e=requireValidate();class t{constructor(p,g){(0,e.validateNumber)("latitude",p,{minValue:-90,maxValue:90}),(0,e.validateNumber)("longitude",g,{minValue:-180,maxValue:180}),this._latitude=p,this._longitude=g}get latitude(){return this._latitude}get longitude(){return this._longitude}isEqual(p){return this===p||p instanceof t&&this.latitude===p.latitude&&this.longitude===p.longitude}toProto(){return{geoPointValue:{latitude:this.latitude,longitude:this.longitude}}}static fromProto(p){return new t(p.latitude||0,p.longitude||0)}}return geoPoint.GeoPoint=t,geoPoint}var path={},order={},hasRequiredOrder;function requireOrder(){if(hasRequiredOrder)return order;hasRequiredOrder=1;Object.defineProperty(order,"__esModule",{value:!0}),order.primitiveComparator=g,order.compareArrays=v,order.compareUtf8Strings=w,order.compare=E;const e=requireConvert(),t=requirePath();var s;(function(C){C[C.NULL=0]="NULL",C[C.BOOLEAN=1]="BOOLEAN",C[C.NUMBER=2]="NUMBER",C[C.TIMESTAMP=3]="TIMESTAMP",C[C.STRING=4]="STRING",C[C.BLOB=5]="BLOB",C[C.REF=6]="REF",C[C.GEO_POINT=7]="GEO_POINT",C[C.ARRAY=8]="ARRAY",C[C.VECTOR=9]="VECTOR",C[C.OBJECT=10]="OBJECT"})(s||(s={}));function p(C){const x=(0,e.detectValueType)(C);switch(x){case"nullValue":return s.NULL;case"integerValue":return s.NUMBER;case"doubleValue":return s.NUMBER;case"stringValue":return s.STRING;case"booleanValue":return s.BOOLEAN;case"arrayValue":return s.ARRAY;case"timestampValue":return s.TIMESTAMP;case"geoPointValue":return s.GEO_POINT;case"bytesValue":return s.BLOB;case"referenceValue":return s.REF;case"mapValue":return s.OBJECT;case"vectorValue":return s.VECTOR;default:throw new Error("Unexpected value type: "+x)}}function g(C,x){return C<x?-1:C>x?1:0}function m(C,x){return C<x?-1:C>x?1:C===x?0:isNaN(C)?isNaN(x)?0:-1:1}function d(C,x){let j,D;return C.integerValue!==void 0?j=Number(C.integerValue):j=Number(C.doubleValue),x.integerValue!==void 0?D=Number(x.integerValue):D=Number(x.doubleValue),m(j,D)}function l(C,x){const j=g(C.seconds||0,x.seconds||0);return j!==0?j:g(C.nanos||0,x.nanos||0)}function a(C,x){if(!(C instanceof Buffer)||!(x instanceof Buffer))throw new Error("Blobs can only be compared if they are Buffers.");return Buffer.compare(C,x)}function o(C,x){const j=t.QualifiedResourcePath.fromSlashSeparatedString(C.referenceValue),D=t.QualifiedResourcePath.fromSlashSeparatedString(x.referenceValue);return j.compareTo(D)}function h(C,x){return g(C.latitude||0,x.latitude||0)||g(C.longitude||0,x.longitude||0)}function v(C,x){for(let j=0;j<C.length&&j<x.length;j++){const D=E(C[j],x[j]);if(D!==0)return D}return g(C.length,x.length)}function _(C,x){const j=Object.keys(C),D=Object.keys(x);j.sort(),D.sort();for(let k=0;k<j.length&&k<D.length;k++){const q=w(j[k],D[k]);if(q!==0)return q;const G=j[k],$=E(C[G],x[G]);if($!==0)return $}return g(j.length,D.length)}function y(C,x){var j,D,k,q,G,$;const W=(k=(D=(j=C?.value)===null||j===void 0?void 0:j.arrayValue)===null||D===void 0?void 0:D.values)!==null&&k!==void 0?k:[],K=($=(G=(q=x?.value)===null||q===void 0?void 0:q.arrayValue)===null||G===void 0?void 0:G.values)!==null&&$!==void 0?$:[],z=g(W.length,K.length);return z!==0?z:v(W,K)}function w(C,x){const j=Math.min(C.length,x.length);for(let D=0;D<j;D++){const k=C.charAt(D),q=x.charAt(D);if(k!==q)return O(k)===O(q)?g(k,q):O(k)?1:-1}return g(C.length,x.length)}const T=55296,I=57343;function O(C){const x=C.charCodeAt(0);return x>=T&&x<=I}function E(C,x){const j=p(C),D=p(x),k=g(j,D);if(k!==0)return k;switch(j){case s.NULL:return 0;case s.BOOLEAN:return g(C.booleanValue,x.booleanValue);case s.STRING:return w(C.stringValue,x.stringValue);case s.NUMBER:return d(C,x);case s.TIMESTAMP:return l(C.timestampValue,x.timestampValue);case s.BLOB:return a(C.bytesValue,x.bytesValue);case s.REF:return o(C,x);case s.GEO_POINT:return h(C.geoPointValue,x.geoPointValue);case s.ARRAY:return v(C.arrayValue.values||[],x.arrayValue.values||[]);case s.OBJECT:return _(C.mapValue.fields||{},x.mapValue.fields||{});case s.VECTOR:return y(C.mapValue.fields||{},x.mapValue.fields||{});default:throw new Error(`Encountered unknown type order: ${j}`)}}return order}var hasRequiredPath;function requirePath(){if(hasRequiredPath)return path;hasRequiredPath=1;Object.defineProperty(path,"__esModule",{value:!0}),path.FieldPath=path.QualifiedResourcePath=path.ResourcePath=path.DEFAULT_DATABASE_ID=void 0,path.validateResourcePath=o,path.validateFieldPath=v;const e=requireOrder(),t=requireUtil(),s=requireValidate();path.DEFAULT_DATABASE_ID="(default)";const p=/^projects\/([^/]*)\/databases\/([^/]*)(?:\/documents\/)?([\s\S]*)$/;const g=/^[_a-zA-Z][_a-zA-Z0-9]*$/;const m=/^[^*~/[\]]+$/;class d{constructor(y){this.segments=y}get size(){return this.segments.length}append(y){return y instanceof d?this.construct(this.segments.concat(y.segments)):this.construct(this.segments.concat(this.split(y)))}parent(){return this.segments.length===0?null:this.construct(this.segments.slice(0,this.segments.length-1))}isPrefixOf(y){if(y.segments.length<this.segments.length)return!1;for(let w=0;w<this.segments.length;w++)if(this.segments[w]!==y.segments[w])return!1;return!0}compareTo(y){const w=Math.min(this.segments.length,y.segments.length);for(let T=0;T<w;T++){const I=this.compareSegments(this.segments[T],y.segments[T]);if(I!==0)return I}return(0,e.primitiveComparator)(this.segments.length,y.segments.length)}compareSegments(y,w){const T=this.isNumericId(y),I=this.isNumericId(w);return T&&!I?-1:!T&&I?1:T&&I?this.compareNumbers(this.extractNumericId(y),this.extractNumericId(w)):(0,e.compareUtf8Strings)(y,w)}isNumericId(y){return y.startsWith("__id")&&y.endsWith("__")}extractNumericId(y){return BigInt(y.substring(4,y.length-2))}compareNumbers(y,w){return y<w?-1:y>w?1:0}toArray(){return this.segments.slice()}popLast(){return this.segments.pop(),this.construct(this.segments)}isEqual(y){return this===y||this.compareTo(y)===0}}class l extends d{constructor(...y){super(y)}get isDocument(){return this.segments.length>0&&this.segments.length%2===0}get isCollection(){return this.segments.length%2===1}get id(){return this.segments.length>0?this.segments[this.segments.length-1]:null}get relativeName(){return this.segments.join("/")}construct(y){return new l(...y)}split(y){return y.split("/").filter(w=>w.length>0)}toQualifiedResourcePath(y,w){return new a(y,w,...this.segments)}}path.ResourcePath=l,l.EMPTY=new l;class a extends l{constructor(y,w,...T){super(...T),this.projectId=y,this.databaseId=w}get relativeName(){return this.segments.join("/")}static fromSlashSeparatedString(y){const w=p.exec(y);if(w){const T=w[1],I=w[2],O=w[3];return new a(T,I).append(O)}throw new Error(`Resource name '${y}' is not valid.`)}append(y){return super.append(y)}parent(){return super.parent()}get formattedName(){return["projects",this.projectId,"databases",this.databaseId,"documents",...this.segments].join("/")}construct(y){return new a(this.projectId,this.databaseId,...y)}toQualifiedResourcePath(){return this}compareTo(y){if(y instanceof a){if(this.projectId<y.projectId)return-1;if(this.projectId>y.projectId)return 1;if(this.databaseId<y.databaseId)return-1;if(this.databaseId>y.databaseId)return 1}return super.compareTo(y)}toProto(){return{referenceValue:this.formattedName}}}path.QualifiedResourcePath=a;function o(_,y){if(typeof y!="string"||y==="")throw new Error(`${(0,s.invalidArgumentMessage)(_,"resource path")} Path must be a non-empty string.`);if(y.indexOf("//")>=0)throw new Error(`${(0,s.invalidArgumentMessage)(_,"resource path")} Paths must not contain //.`)}class h extends d{constructor(...y){if(Array.isArray(y[0]))throw new Error("The FieldPath constructor no longer supports an array as its first argument. Please unpack your array and call FieldPath() with individual arguments.");(0,s.validateMinNumberOfArguments)("FieldPath",y,1);for(let w=0;w<y.length;++w)if((0,s.validateString)(w,y[w]),y[w].length===0)throw new Error(`Element at index ${w} should not be an empty string.`);super(y)}static documentId(){return h._DOCUMENT_ID}static fromArgument(y){return y instanceof h?y:new h(...y.split("."))}get formattedName(){return this.segments.map(y=>g.test(y)?y:"`"+y.replace(/\\/g,"\\\\").replace(/`/g,"\\`")+"`").join(".")}toString(){return this.formattedName}split(y){return y.split(".")}construct(y){return new h(...y)}isEqual(y){return super.isEqual(y)}}path.FieldPath=h,h._DOCUMENT_ID=new h("__name__");function v(_,y){if(!(y instanceof h)){if(y===void 0)throw new Error((0,s.invalidArgumentMessage)(_,"field path")+" The path cannot be omitted.");if((0,t.isObject)(y)&&y.constructor.name==="FieldPath")throw new Error((0,s.customObjectMessage)(_,y));if(typeof y!="string")throw new Error(`${(0,s.invalidArgumentMessage)(_,"field path")} Paths can only be specified as strings or via a FieldPath object.`);if(y.indexOf("..")>=0)throw new Error(`${(0,s.invalidArgumentMessage)(_,"field path")} Paths must not contain ".." in them.`);if(y.startsWith(".")||y.endsWith("."))throw new Error(`${(0,s.invalidArgumentMessage)(_,"field path")} Paths must not start or end with ".".`);if(!m.test(y))throw new Error(`${(0,s.invalidArgumentMessage)(_,"field path")} Paths can't be empty and must not contain
    "*~/[]".`)}}return path}var hasRequiredSerializer;function requireSerializer(){if(hasRequiredSerializer)return serializer;hasRequiredSerializer=1;Object.defineProperty(serializer,"__esModule",{value:!0}),serializer.Serializer=void 0,serializer.validateUserInput=v;const e=requireFieldValue(),t=requireConvert(),s=requireGeoPoint(),p=requireSrc(),g=requirePath(),m=requireTimestamp(),d=requireUtil(),l=requireValidate(),a=requireMapType(),o=20;class h{constructor(w){this.createReference=T=>w.doc(T),this.createInteger=T=>w._settings.useBigInt?BigInt(T):Number(T),this.allowUndefined=!!w._settings.ignoreUndefinedProperties}encodeFields(w){const T={};for(const I of Object.keys(w)){const O=this.encodeValue(w[I]);O&&(T[I]=O)}return T}encodeValue(w){if(w instanceof e.FieldTransform)return null;if(typeof w=="string")return{stringValue:w};if(typeof w=="boolean")return{booleanValue:w};if(typeof w=="number"){const T=w===0&&1/w===-1/0;return Number.isSafeInteger(w)&&!T?{integerValue:w}:{doubleValue:w}}if(typeof w=="bigint")return{integerValue:w.toString()};if(w instanceof Date){const T=m.Timestamp.fromDate(w);return{timestampValue:{seconds:T.seconds,nanos:T.nanoseconds}}}if(_(w)){const T=m.Timestamp.fromDate(w.toDate());return{timestampValue:{seconds:T.seconds,nanos:T.nanoseconds}}}if(w===null)return{nullValue:"NULL_VALUE"};if(w instanceof Buffer||w instanceof Uint8Array)return{bytesValue:w};if(w instanceof e.VectorValue)return w._toProto(this);if((0,d.isObject)(w)){const T=w.toProto;if(typeof T=="function")return T.bind(w)()}if(Array.isArray(w)){const T={arrayValue:{}};if(w.length>0){T.arrayValue.values=[];for(let I=0;I<w.length;++I){const O=this.encodeValue(w[I]);O&&T.arrayValue.values.push(O)}}return T}if(typeof w=="object"&&(0,d.isPlainObject)(w)){const T={mapValue:{}};return!(0,d.isEmpty)(w)&&(T.mapValue.fields=this.encodeFields(w),(0,d.isEmpty)(T.mapValue.fields))?null:T}if(w===void 0&&this.allowUndefined)return null;throw new Error(`Cannot encode value: ${w}`)}encodeVector(w){return{mapValue:{fields:{[a.RESERVED_MAP_KEY]:{stringValue:a.RESERVED_MAP_KEY_VECTOR_VALUE},[a.VECTOR_MAP_VECTORS_KEY]:{arrayValue:{values:w.map(T=>({doubleValue:T}))}}}}}}decodeValue(w){switch((0,t.detectValueType)(w)){case"stringValue":return w.stringValue;case"booleanValue":return w.booleanValue;case"integerValue":return this.createInteger(w.integerValue);case"doubleValue":return w.doubleValue;case"timestampValue":return m.Timestamp.fromProto(w.timestampValue);case"referenceValue":{const I=g.QualifiedResourcePath.fromSlashSeparatedString(w.referenceValue);return this.createReference(I.relativeName)}case"arrayValue":{const I=[];if(Array.isArray(w.arrayValue.values))for(const O of w.arrayValue.values)I.push(this.decodeValue(O));return I}case"nullValue":return null;case"mapValue":{const I=w.mapValue.fields;if(I){const O={};for(const E of Object.keys(I))O[E]=this.decodeValue(I[E]);return O}else return{}}case"vectorValue":{const I=w.mapValue.fields;return e.VectorValue._fromProto(I[a.VECTOR_MAP_VECTORS_KEY])}case"geoPointValue":return s.GeoPoint.fromProto(w.geoPointValue);case"bytesValue":return w.bytesValue;default:throw new Error("Cannot decode type from Firestore Value: "+JSON.stringify(w))}}decodeGoogleProtobufValue(w){switch((0,t.detectGoogleProtobufValueType)(w)){case"nullValue":return null;case"numberValue":return w.numberValue;case"stringValue":return w.stringValue;case"boolValue":return w.boolValue;case"listValue":return this.decodeGoogleProtobufList(w.listValue);case"structValue":return this.decodeGoogleProtobufStruct(w.structValue);default:throw new Error("Cannot decode type from google.protobuf.Value: "+JSON.stringify(w))}}decodeGoogleProtobufList(w){const T=[];if(w&&w.values&&Array.isArray(w.values))for(const I of w.values)T.push(this.decodeGoogleProtobufValue(I));return T}decodeGoogleProtobufStruct(w){const T={};if(w&&w.fields)for(const I of Object.keys(w.fields))T[I]=this.decodeGoogleProtobufValue(w.fields[I]);return T}}serializer.Serializer=h;function v(y,w,T,I,O,E,C){if(O&&O.size-1>o)throw new Error(`${(0,l.invalidArgumentMessage)(y,T)} Input object is deeper than ${o} levels or contains a cycle.`);E=E||0,C=C||!1;const x=O?` (found in field "${O}")`:"";if(Array.isArray(w))for(let j=0;j<w.length;++j)v(y,w[j],T,I,O?O.append(String(j)):new g.FieldPath(String(j)),E+1,!0);else if((0,d.isPlainObject)(w))for(const j of Object.keys(w))v(y,w[j],T,I,O?O.append(new g.FieldPath(j)):new g.FieldPath(j),E+1,C);else if(w===void 0){if(I.allowUndefined&&E===0)throw new Error(`${(0,l.invalidArgumentMessage)(y,T)} "undefined" values are only ignored inside of objects.`);if(!I.allowUndefined)throw new Error(`${(0,l.invalidArgumentMessage)(y,T)} Cannot use "undefined" as a Firestore value${x}. If you want to ignore undefined values, enable \`ignoreUndefinedProperties\`.`)}else if(!(w instanceof e.VectorValue))if(w instanceof e.DeleteTransform){if(C)throw new Error(`${(0,l.invalidArgumentMessage)(y,T)} ${w.methodName}() cannot be used inside of an array${x}.`);if(I.allowDeletes==="none")throw new Error(`${(0,l.invalidArgumentMessage)(y,T)} ${w.methodName}() must appear at the top-level and can only be used in update() or set() with {merge:true}${x}.`);if(I.allowDeletes==="root"&&E!==0){if(!(E===1&&O?.size===1))throw new Error(`${(0,l.invalidArgumentMessage)(y,T)} ${w.methodName}() must appear at the top-level and can only be used in update() or set() with {merge:true}${x}.`)}}else if(w instanceof e.FieldTransform){if(C)throw new Error(`${(0,l.invalidArgumentMessage)(y,T)} ${w.methodName}() cannot be used inside of an array${x}.`);if(!I.allowTransforms)throw new Error(`${(0,l.invalidArgumentMessage)(y,T)} ${w.methodName}() can only be used in set(), create() or update()${x}.`)}else{if(w instanceof g.FieldPath)throw new Error(`${(0,l.invalidArgumentMessage)(y,T)} Cannot use object of type "FieldPath" as a Firestore value${x}.`);if(!(w instanceof p.DocumentReference)){if(!(w instanceof s.GeoPoint)){if(!(w instanceof m.Timestamp||w instanceof Date)){if(!_(w)){if(!(w instanceof Buffer||w instanceof Uint8Array)){if(w!==null){if(typeof w=="object")throw new Error((0,l.customObjectMessage)(y,w,O))}}}}}}}}function _(y){return typeof y=="object"&&y!==null&&y.constructor&&y.constructor.name==="Moment"&&typeof y.toDate=="function"}return serializer}var hasRequiredFieldValue;function requireFieldValue(){if(hasRequiredFieldValue)return fieldValue;hasRequiredFieldValue=1;Object.defineProperty(fieldValue,"__esModule",{value:!0}),fieldValue.DeleteTransform=fieldValue.FieldTransform=fieldValue.FieldValue=fieldValue.VectorValue=void 0;const e=requireFastDeepEqual(),t=requireSerializer(),s=requireUtil(),p=requireValidate();class g{constructor(w){this._values=(w||[]).map(T=>T)}toArray(){return this._values.map(w=>w)}_toProto(w){return w.encodeVector(this._values)}static _fromProto(w){var T,I;const O=(I=(T=w.arrayValue)===null||T===void 0?void 0:T.values)===null||I===void 0?void 0:I.map(E=>E.doubleValue);return new g(O)}isEqual(w){return(0,s.isPrimitiveArrayEqual)(this._values,w._values)}}fieldValue.VectorValue=g;class m{constructor(){}static vector(w){return new g(w)}static delete(){return l.DELETE_SENTINEL}static serverTimestamp(){return a.SERVER_TIMESTAMP_SENTINEL}static increment(w){return(0,p.validateMinNumberOfArguments)("FieldValue.increment",arguments,1),new o(w)}static arrayUnion(...w){return(0,p.validateMinNumberOfArguments)("FieldValue.arrayUnion",w,1),new h(w)}static arrayRemove(...w){return(0,p.validateMinNumberOfArguments)("FieldValue.arrayRemove",w,1),new v(w)}isEqual(w){return this===w}}fieldValue.FieldValue=m;class d extends m{}fieldValue.FieldTransform=d;class l extends d{constructor(){super()}get includeInDocumentMask(){return!0}get includeInDocumentTransform(){return!1}get methodName(){return"FieldValue.delete"}validate(){}toProto(){throw new Error("FieldValue.delete() should not be included in a FieldTransform")}}fieldValue.DeleteTransform=l,l.DELETE_SENTINEL=new l;class a extends d{constructor(){super()}get includeInDocumentMask(){return!1}get includeInDocumentTransform(){return!0}get methodName(){return"FieldValue.serverTimestamp"}validate(){}toProto(w,T){return{fieldPath:T.formattedName,setToServerValue:"REQUEST_TIME"}}}a.SERVER_TIMESTAMP_SENTINEL=new a;class o extends d{constructor(w){super(),this.operand=w}get includeInDocumentMask(){return!1}get includeInDocumentTransform(){return!0}get methodName(){return"FieldValue.increment"}validate(){(0,p.validateNumber)("FieldValue.increment()",this.operand)}toProto(w,T){const I=w.encodeValue(this.operand);return{fieldPath:T.formattedName,increment:I}}isEqual(w){return this===w||w instanceof o&&this.operand===w.operand}}class h extends d{constructor(w){super(),this.elements=w}get includeInDocumentMask(){return!1}get includeInDocumentTransform(){return!0}get methodName(){return"FieldValue.arrayUnion"}validate(w){for(let T=0;T<this.elements.length;++T)_(T,this.elements[T],w)}toProto(w,T){const I=w.encodeValue(this.elements).arrayValue;return{fieldPath:T.formattedName,appendMissingElements:I}}isEqual(w){return this===w||w instanceof h&&e(this.elements,w.elements)}}class v extends d{constructor(w){super(),this.elements=w}get includeInDocumentMask(){return!1}get includeInDocumentTransform(){return!0}get methodName(){return"FieldValue.arrayRemove"}validate(w){for(let T=0;T<this.elements.length;++T)_(T,this.elements[T],w)}toProto(w,T){const I=w.encodeValue(this.elements).arrayValue;return{fieldPath:T.formattedName,removeAllFromArray:I}}isEqual(w){return this===w||w instanceof v&&e(this.elements,w.elements)}}function _(y,w,T){if(Array.isArray(w))throw new Error(`${(0,p.invalidArgumentMessage)(y,"array element")} Nested arrays are not supported.`);(0,t.validateUserInput)(y,w,"array element",{allowDeletes:"none",allowTransforms:!1,allowUndefined:T},void 0,0,!0)}return fieldValue}var documentReference={},types$1={},hasRequiredTypes$1;function requireTypes$1(){if(hasRequiredTypes$1)return types$1;hasRequiredTypes$1=1;Object.defineProperty(types$1,"__esModule",{value:!0}),types$1.defaultConverter=t;const e={toFirestore(s){return s},fromFirestore(s){return s.data()}};function t(){return e}return types$1}var collectionReference={},query={},queryUtil={},documentChange={},hasRequiredDocumentChange;function requireDocumentChange(){if(hasRequiredDocumentChange)return documentChange;hasRequiredDocumentChange=1;Object.defineProperty(documentChange,"__esModule",{value:!0}),documentChange.DocumentChange=void 0;class e{constructor(s,p,g,m){this._type=s,this._document=p,this._oldIndex=g,this._newIndex=m}get type(){return this._type}get doc(){return this._document}get oldIndex(){return this._oldIndex}get newIndex(){return this._newIndex}isEqual(s){return this===s?!0:s instanceof e&&this._type===s._type&&this._oldIndex===s._oldIndex&&this._newIndex===s._newIndex&&this._document.isEqual(s._document)}}return documentChange.DocumentChange=e,documentChange}var queryProfile={},hasRequiredQueryProfile;function requireQueryProfile(){if(hasRequiredQueryProfile)return queryProfile;hasRequiredQueryProfile=1;Object.defineProperty(queryProfile,"__esModule",{value:!0}),queryProfile.ExplainResults=queryProfile.ExplainMetrics=queryProfile.ExecutionStats=queryProfile.PlanSummary=void 0;class e{constructor(m){this.indexesUsed=m}static _fromProto(m,d){const l=[];if(m&&m.indexesUsed)for(const a of m.indexesUsed)l.push(d.decodeGoogleProtobufStruct(a));return new e(l)}}queryProfile.PlanSummary=e;class t{constructor(m,d,l,a){this.resultsReturned=m,this.executionDuration=d,this.readOperations=l,this.debugStats=a}static _fromProto(m,d){var l,a;return m?new t(Number(m.resultsReturned),{seconds:Number((l=m.executionDuration)===null||l===void 0?void 0:l.seconds),nanoseconds:Number((a=m.executionDuration)===null||a===void 0?void 0:a.nanos)},Number(m.readOperations),d.decodeGoogleProtobufStruct(m.debugStats)):null}}queryProfile.ExecutionStats=t;class s{constructor(m,d){this.planSummary=m,this.executionStats=d}static _fromProto(m,d){return new s(e._fromProto(m.planSummary,d),t._fromProto(m.executionStats,d))}}queryProfile.ExplainMetrics=s;class p{constructor(m,d){this.metrics=m,this.snapshot=d}}return queryProfile.ExplainResults=p,queryProfile}var vectorQuery={},vectorQuerySnapshot={},hasRequiredVectorQuerySnapshot;function requireVectorQuerySnapshot(){if(hasRequiredVectorQuerySnapshot)return vectorQuerySnapshot;hasRequiredVectorQuerySnapshot=1,Object.defineProperty(vectorQuerySnapshot,"__esModule",{value:!0}),vectorQuerySnapshot.VectorQuerySnapshot=void 0;const e=requireValidate(),t=requireUtil();class s{constructor(g,m,d,l,a){this._query=g,this._readTime=m,this._size=d,this._materializedDocs=null,this._materializedChanges=null,this._docs=null,this._changes=null,this._docs=l,this._changes=a}get query(){return this._query}get docs(){return this._materializedDocs?this._materializedDocs:(this._materializedDocs=this._docs(),this._docs=null,this._materializedDocs)}get empty(){return this._size===0}get size(){return this._size}get readTime(){return this._readTime}docChanges(){return this._materializedChanges?this._materializedChanges:(this._materializedChanges=this._changes(),this._changes=null,this._materializedChanges)}forEach(g,m){(0,e.validateFunction)("callback",g);for(const d of this.docs)g.call(m,d)}isEqual(g){return this===g?!0:!(g instanceof s)||this._size!==g._size||!this._query.isEqual(g._query)?!1:this._materializedDocs&&!this._materializedChanges?(0,t.isArrayEqual)(this.docs,g.docs)&&(0,t.isArrayEqual)(this.docChanges(),g.docChanges()):(0,t.isArrayEqual)(this.docChanges(),g.docChanges())&&(0,t.isArrayEqual)(this.docs,g.docs)}}return vectorQuerySnapshot.VectorQuerySnapshot=s,vectorQuerySnapshot}var hasRequiredVectorQuery;function requireVectorQuery(){if(hasRequiredVectorQuery)return vectorQuery;hasRequiredVectorQuery=1,Object.defineProperty(vectorQuery,"__esModule",{value:!0}),vectorQuery.VectorQuery=void 0;const e=requireFieldValue(),t=requirePath(),s=requireUtil(),p=requireQueryUtil(),g=requireVectorQuerySnapshot(),m=requireQueryProfile();class d{constructor(a,o){this._query=a,this._options=o,this._queryUtil=new p.QueryUtil(a._firestore,a._queryOptions,a._serializer)}get query(){return this._query}get _rawVectorField(){return typeof this._options.vectorField=="string"?this._options.vectorField:this._options.vectorField.toString()}get _rawDistanceResultField(){if(!(typeof this._options.distanceResultField>"u"))return typeof this._options.distanceResultField=="string"?this._options.distanceResultField:this._options.distanceResultField.toString()}get _rawQueryVector(){return Array.isArray(this._options.queryVector)?this._options.queryVector:this._options.queryVector.toArray()}async explain(a){a===void 0&&(a={});const{result:o,explainMetrics:h}=await this._getResponse(a);if(!h)throw new Error("No explain results");return new m.ExplainResults(h,o||null)}async get(){const{result:a}=await this._getResponse();if(!a)throw new Error("No VectorQuerySnapshot result");return a}_getResponse(a){return this._queryUtil._getResponse(this,void 0,!1,a)}_stream(a){return this._queryUtil._stream(this,a,!1)}toProto(a,o){var h,v,_;const y=this._query.toProto(a),w=Array.isArray(this._options.queryVector)?new e.VectorValue(this._options.queryVector):this._options.queryVector;return y.structuredQuery.findNearest={limit:{value:this._options.limit},distanceMeasure:this._options.distanceMeasure,vectorField:{fieldPath:t.FieldPath.fromArgument(this._options.vectorField).formattedName},queryVector:w._toProto(this._query._serializer),distanceResultField:!((h=this._options)===null||h===void 0)&&h.distanceResultField?t.FieldPath.fromArgument(this._options.distanceResultField).formattedName:void 0,distanceThreshold:!((v=this._options)===null||v===void 0)&&v.distanceThreshold?{value:(_=this._options)===null||_===void 0?void 0:_.distanceThreshold}:void 0},o&&(y.explainOptions=o),y}_createSnapshot(a,o,h,v){return new g.VectorQuerySnapshot(this,a,o,h,v)}startAfter(...a){throw new Error("Unimplemented: Vector query does not support cursors yet.")}isEqual(a){return this===a?!0:!(a instanceof d)||!this.query.isEqual(a.query)?!1:this._rawVectorField===a._rawVectorField&&(0,s.isPrimitiveArrayEqual)(this._rawQueryVector,a._rawQueryVector)&&this._options.limit===a._options.limit&&this._options.distanceMeasure===a._options.distanceMeasure&&this._options.distanceThreshold===a._options.distanceThreshold&&this._rawDistanceResultField===a._rawDistanceResultField}}return vectorQuery.VectorQuery=d,vectorQuery}var types={},hasRequiredTypes;function requireTypes(){if(hasRequiredTypes)return types;hasRequiredTypes=1,Object.defineProperty(types,"__esModule",{value:!0}),types.LimitType=void 0;var e;return(function(t){t[t.First=0]="First",t[t.Last=1]="Last"})(e||(types.LimitType=e={})),types}var constants={},hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,Object.defineProperty(constants,"__esModule",{value:!0}),constants.NOOP_MESSAGE=constants.comparisonOperators=constants.directionOperators=void 0,constants.directionOperators={asc:"ASCENDING",desc:"DESCENDING"},constants.comparisonOperators={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},constants.NOOP_MESSAGE=Symbol("a noop message")),constants}var traceUtil={},hasRequiredTraceUtil;function requireTraceUtil(){return hasRequiredTraceUtil||(hasRequiredTraceUtil=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ATTRIBUTE_KEY_ATTEMPTS_REMAINING=e.ATTRIBUTE_KEY_ATTEMPTS_ALLOWED=e.ATTRIBUTE_KEY_TRANSACTION_TYPE=e.ATTRIBUTE_KEY_IS_RETRY_WITH_CURSOR=e.ATTRIBUTE_KEY_NUM_RESPONSES=e.ATTRIBUTE_KEY_IS_TRANSACTIONAL=e.ATTRIBUTE_KEY_DOC_COUNT=e.ATTRIBUTE_SETTINGS_PREFIX=e.ATTRIBUTE_SERVICE_PREFIX=e.SPAN_NAME_BULK_WRITER_COMMIT=e.SPAN_NAME_PARTITION_QUERY=e.SPAN_NAME_BATCH_COMMIT=e.SPAN_NAME_TRANSACTION_COMMIT=e.SPAN_NAME_TRANSACTION_ROLLBACK=e.SPAN_NAME_TRANSACTION_GET_DOCUMENTS=e.SPAN_NAME_TRANSACTION_GET_DOCUMENT=e.SPAN_NAME_TRANSACTION_GET_AGGREGATION_QUERY=e.SPAN_NAME_TRANSACTION_GET_QUERY=e.SPAN_NAME_TRANSACTION_RUN=e.SPAN_NAME_AGGREGATION_QUERY_GET=e.SPAN_NAME_QUERY_GET=e.SPAN_NAME_COL_REF_LIST_DOCUMENTS=e.SPAN_NAME_COL_REF_ADD=e.SPAN_NAME_DOC_REF_LIST_COLLECTIONS=e.SPAN_NAME_DOC_REF_GET=e.SPAN_NAME_DOC_REF_DELETE=e.SPAN_NAME_DOC_REF_UPDATE=e.SPAN_NAME_DOC_REF_SET=e.SPAN_NAME_DOC_REF_CREATE=e.SPAN_NAME_RUN_AGGREGATION_QUERY=e.SPAN_NAME_RUN_QUERY=e.SPAN_NAME_BATCH_GET_DOCUMENTS=e.SERVICE=void 0,e.SERVICE="google.firestore.v1.Firestore/",e.SPAN_NAME_BATCH_GET_DOCUMENTS="BatchGetDocuments",e.SPAN_NAME_RUN_QUERY="RunQuery",e.SPAN_NAME_RUN_AGGREGATION_QUERY="RunAggregationQuery",e.SPAN_NAME_DOC_REF_CREATE="DocumentReference.Create",e.SPAN_NAME_DOC_REF_SET="DocumentReference.Set",e.SPAN_NAME_DOC_REF_UPDATE="DocumentReference.Update",e.SPAN_NAME_DOC_REF_DELETE="DocumentReference.Delete",e.SPAN_NAME_DOC_REF_GET="DocumentReference.Get",e.SPAN_NAME_DOC_REF_LIST_COLLECTIONS="DocumentReference.ListCollections",e.SPAN_NAME_COL_REF_ADD="CollectionReference.Add",e.SPAN_NAME_COL_REF_LIST_DOCUMENTS="CollectionReference.ListDocuments",e.SPAN_NAME_QUERY_GET="Query.Get",e.SPAN_NAME_AGGREGATION_QUERY_GET="AggregationQuery.Get",e.SPAN_NAME_TRANSACTION_RUN="Transaction.Run",e.SPAN_NAME_TRANSACTION_GET_QUERY="Transaction.Get.Query",e.SPAN_NAME_TRANSACTION_GET_AGGREGATION_QUERY="Transaction.Get.AggregationQuery",e.SPAN_NAME_TRANSACTION_GET_DOCUMENT="Transaction.Get.Document",e.SPAN_NAME_TRANSACTION_GET_DOCUMENTS="Transaction.Get.Documents",e.SPAN_NAME_TRANSACTION_ROLLBACK="Transaction.Rollback",e.SPAN_NAME_TRANSACTION_COMMIT="Transaction.Commit",e.SPAN_NAME_BATCH_COMMIT="Batch.Commit",e.SPAN_NAME_PARTITION_QUERY="PartitionQuery",e.SPAN_NAME_BULK_WRITER_COMMIT="BulkWriter.Commit",e.ATTRIBUTE_SERVICE_PREFIX="gcp.firestore",e.ATTRIBUTE_SETTINGS_PREFIX=`${e.ATTRIBUTE_SERVICE_PREFIX}.settings`,e.ATTRIBUTE_KEY_DOC_COUNT="doc_count",e.ATTRIBUTE_KEY_IS_TRANSACTIONAL="transactional",e.ATTRIBUTE_KEY_NUM_RESPONSES="response_count",e.ATTRIBUTE_KEY_IS_RETRY_WITH_CURSOR="retry_query_with_cursor",e.ATTRIBUTE_KEY_TRANSACTION_TYPE="transaction_type",e.ATTRIBUTE_KEY_ATTEMPTS_ALLOWED="attempts_allowed",e.ATTRIBUTE_KEY_ATTEMPTS_REMAINING="attempts_remaining"})(traceUtil)),traceUtil}var hasRequiredQueryUtil;function requireQueryUtil(){if(hasRequiredQueryUtil)return queryUtil;hasRequiredQueryUtil=1,Object.defineProperty(queryUtil,"__esModule",{value:!0}),queryUtil.QueryUtil=void 0;const e=require$$1$3,t=requireTimestamp(),s=requireDocument(),p=requireUtil(),g=requireDocumentChange(),m=requireQueryProfile(),d=requireLogger(),l=requireVectorQuery(),a=requireTypes(),o=requireConstants(),h=requireTraceUtil();class v{constructor(y,w,T){this._firestore=y,this._queryOptions=w,this._serializer=T}_getResponse(y,w,T=!0,I){const O=Error().stack;return new Promise((E,C)=>{const x=[],j={};this._stream(y,w,T,I).on("error",D=>{C((0,p.wrapError)(D,O))}).on("data",D=>{D.transaction&&(j.transaction=D.transaction),D.readTime&&(j.readTime=D.readTime),D.explainMetrics&&(j.explainMetrics=D.explainMetrics),D.document&&x.push(D.document)}).on("end",()=>{this._queryOptions.limitType===a.LimitType.Last&&x.reverse();const D=j.readTime?y._createSnapshot(j.readTime,x.length,()=>x,()=>{const k=[];for(let q=0;q<x.length;++q)k.push(new g.DocumentChange("added",x[q],-1,q));return k}):void 0;E({transaction:j.transaction,explainMetrics:j.explainMetrics,result:D})})})}_isPermanentRpcError(y,w){return(0,p.isPermanentRpcError)(y,w)}_hasRetryTimedOut(y,w){const T=(0,p.getTotalTimeout)(y);return T===0?!1:Date.now()-w>=T}stream(y){if(this._queryOptions.limitType===a.LimitType.Last)throw new Error("Query results for queries that include limitToLast() constraints cannot be streamed. Use Query.get() instead.");const w=this._stream(y),T=new e.Transform({objectMode:!0,transform(I,O,E){E(void 0,I.document)}});return w.pipe(T),w.on("error",I=>T.destroy(I)),T}_stream(y,w,T=!0,I){const O=(0,p.requestTag)(),E=Date.now(),C=I!==void 0,x="runQuery";let j=0,D=null,k;const q=new e.Transform({objectMode:!0,transform:(G,$,W)=>{var K;if(G===o.NOOP_MESSAGE){W(void 0);return}const z={};if(!((K=G.transaction)===null||K===void 0)&&K.length&&(z.transaction=G.transaction),G.readTime&&(z.readTime=t.Timestamp.fromProto(G.readTime)),G.document){const Q=this._firestore.snapshot_(G.document,G.readTime),Y=new s.DocumentSnapshotBuilder(Q.ref.withConverter(this._queryOptions.converter));Y.fieldsProto=Q._fieldsProto,Y.readTime=Q.readTime,Y.createTime=Q.createTime,Y.updateTime=Q.updateTime,D=Y.build(),z.document=D}G.explainMetrics&&(z.explainMetrics=m.ExplainMetrics._fromProto(G.explainMetrics,this._serializer)),++j,W(void 0,z),G.done&&((0,d.logger)("QueryUtil._stream",O,"Trigger Logical Termination."),this._firestore._traceUtil.currentSpan().addEvent(`Firestore.${x}: Received RunQueryResponse.Done.`),k.unpipe(q),k.resume(),k.end(),q.end())}});return this._firestore.initializeIfNeeded(O).then(async()=>{let G=y.toProto(w,I),$=!1,W;do W=new p.Deferred,this._firestore._traceUtil.currentSpan().addEvent(h.SPAN_NAME_RUN_QUERY,{[h.ATTRIBUTE_KEY_IS_TRANSACTIONAL]:!!G.transaction,[h.ATTRIBUTE_KEY_IS_RETRY_WITH_CURSOR]:$}),k=await this._firestore.requestStream(x,!1,G,O),k.on("error",K=>{k.unpipe(q),!C&&!w&&!this._isPermanentRpcError(K,x)?((0,d.logger)("QueryUtil._stream",O,"Query failed with retryable stream error:",K),this._firestore._traceUtil.currentSpan().addEvent(`${h.SPAN_NAME_RUN_QUERY}: Retryable Error.`,{"error.message":K.message}),q.write(o.NOOP_MESSAGE,()=>{if(this._hasRetryTimedOut(x,E))(0,d.logger)("QueryUtil._stream",O,"Query failed with retryable stream error but the total retry timeout has exceeded."),q.destroy(K),W.resolve(!1);else if(D&&T){if(y instanceof l.VectorQuery)throw new Error("Unimplemented: Vector query does not support cursors yet.");(0,d.logger)("Query._stream",O,"Query failed with retryable stream error and progress was made receiving documents, so the stream is being retried."),$=!0;let z;if(!this._queryOptions.limit)z=y;else{const Q=this._queryOptions.limit-j;this._queryOptions.limitType===void 0||this._queryOptions.limitType===a.LimitType.First?z=y.limit(Q):z=y.limitToLast(Q)}this._queryOptions.requireConsistency?G=z.startAfter(D).toProto(D.readTime):G=z.startAfter(D).toProto(),D=null,W.resolve(!0)}else(0,d.logger)("QueryUtil._stream",O,`Query failed with retryable stream error however either retryWithCursor="${T}", or no progress was made receiving documents, so the stream is being closed.`),q.destroy(K),W.resolve(!1)})):((0,d.logger)("QueryUtil._stream",O,"Query failed with stream error:",K),this._firestore._traceUtil.currentSpan().addEvent(`${h.SPAN_NAME_RUN_QUERY}: Error.`,{"error.message":K.message}),q.destroy(K),W.resolve(!1))}),k.on("end",()=>{W.resolve(!1)}),k.resume(),k.pipe(q);while(await W.promise)}).catch(G=>q.destroy(G)),q}}return queryUtil.QueryUtil=v,queryUtil}var fieldOrder={},hasRequiredFieldOrder;function requireFieldOrder(){if(hasRequiredFieldOrder)return fieldOrder;hasRequiredFieldOrder=1,Object.defineProperty(fieldOrder,"__esModule",{value:!0}),fieldOrder.FieldOrder=void 0;class e{constructor(s,p="ASCENDING"){this.field=s,this.direction=p}toProto(){return{field:{fieldPath:this.field.formattedName},direction:this.direction}}}return fieldOrder.FieldOrder=e,fieldOrder}var fieldFilterInternal={},filterInternal={},hasRequiredFilterInternal;function requireFilterInternal(){if(hasRequiredFilterInternal)return filterInternal;hasRequiredFilterInternal=1,Object.defineProperty(filterInternal,"__esModule",{value:!0}),filterInternal.FilterInternal=void 0;class e{}return filterInternal.FilterInternal=e,filterInternal}var hasRequiredFieldFilterInternal;function requireFieldFilterInternal(){if(hasRequiredFieldFilterInternal)return fieldFilterInternal;hasRequiredFieldFilterInternal=1,Object.defineProperty(fieldFilterInternal,"__esModule",{value:!0}),fieldFilterInternal.FieldFilterInternal=void 0;const e=requireFastDeepEqual(),t=requireFilterInternal();class s extends t.FilterInternal{getFlattenedFilters(){return[this]}getFilters(){return[this]}constructor(g,m,d,l){super(),this.serializer=g,this.field=m,this.op=d,this.value=l}isInequalityFilter(){switch(this.op){case"GREATER_THAN":case"GREATER_THAN_OR_EQUAL":case"LESS_THAN":case"LESS_THAN_OR_EQUAL":case"NOT_EQUAL":case"NOT_IN":return!0;default:return!1}}toProto(){return typeof this.value=="number"&&isNaN(this.value)?{unaryFilter:{field:{fieldPath:this.field.formattedName},op:this.op==="EQUAL"?"IS_NAN":"IS_NOT_NAN"}}:this.value===null?{unaryFilter:{field:{fieldPath:this.field.formattedName},op:this.op==="EQUAL"?"IS_NULL":"IS_NOT_NULL"}}:{fieldFilter:{field:{fieldPath:this.field.formattedName},op:this.op,value:this.serializer.encodeValue(this.value)}}}isEqual(g){return g instanceof s&&this.field.isEqual(g.field)&&this.op===g.op&&e(this.value,g.value)}}return fieldFilterInternal.FieldFilterInternal=s,fieldFilterInternal}var compositeFilterInternal={},hasRequiredCompositeFilterInternal;function requireCompositeFilterInternal(){if(hasRequiredCompositeFilterInternal)return compositeFilterInternal;hasRequiredCompositeFilterInternal=1,Object.defineProperty(compositeFilterInternal,"__esModule",{value:!0}),compositeFilterInternal.CompositeFilterInternal=void 0;const e=requireFilterInternal();class t extends e.FilterInternal{constructor(p,g){super(),this.filters=p,this.operator=g,this.memoizedFlattenedFilters=null}getFilters(){return this.filters}isConjunction(){return this.operator==="AND"}getFlattenedFilters(){return this.memoizedFlattenedFilters!==null?this.memoizedFlattenedFilters:(this.memoizedFlattenedFilters=this.filters.reduce((p,g)=>p.concat(g.getFlattenedFilters()),[]),this.memoizedFlattenedFilters)}toProto(){return this.filters.length===1?this.filters[0].toProto():{compositeFilter:{op:this.operator,filters:this.filters.map(g=>g.toProto())}}}isEqual(p){if(p instanceof t){const g=p.getFilters();return this.operator===p.operator&&this.getFilters().length===p.getFilters().length&&this.getFilters().every((m,d)=>m.isEqual(g[d]))}else return!1}}return compositeFilterInternal.CompositeFilterInternal=t,compositeFilterInternal}var querySnapshot={},hasRequiredQuerySnapshot;function requireQuerySnapshot(){if(hasRequiredQuerySnapshot)return querySnapshot;hasRequiredQuerySnapshot=1,Object.defineProperty(querySnapshot,"__esModule",{value:!0}),querySnapshot.QuerySnapshot=void 0;const e=requireValidate(),t=requireUtil();class s{constructor(g,m,d,l,a){this._query=g,this._readTime=m,this._size=d,this._materializedDocs=null,this._materializedChanges=null,this._docs=null,this._changes=null,this._docs=l,this._changes=a}get query(){return this._query}get docs(){return this._materializedDocs?this._materializedDocs:(this._materializedDocs=this._docs(),this._docs=null,this._materializedDocs)}get empty(){return this._size===0}get size(){return this._size}get readTime(){return this._readTime}docChanges(){return this._materializedChanges?this._materializedChanges:(this._materializedChanges=this._changes(),this._changes=null,this._materializedChanges)}forEach(g,m){(0,e.validateFunction)("callback",g);for(const d of this.docs)g.call(m,d)}isEqual(g){return this===g?!0:!(g instanceof s)||this._size!==g._size||!this._query.isEqual(g._query)?!1:this._materializedDocs&&!this._materializedChanges?(0,t.isArrayEqual)(this.docs,g.docs)&&(0,t.isArrayEqual)(this.docChanges(),g.docChanges()):(0,t.isArrayEqual)(this.docChanges(),g.docChanges())&&(0,t.isArrayEqual)(this.docs,g.docs)}}return querySnapshot.QuerySnapshot=s,querySnapshot}var filter={},hasRequiredFilter;function requireFilter(){if(hasRequiredFilter)return filter;hasRequiredFilter=1;Object.defineProperty(filter,"__esModule",{value:!0}),filter.CompositeFilter=filter.UnaryFilter=filter.Filter=void 0;class e{static where(g,m,d){return new t(g,m,d)}static or(...g){return new s(g,"OR")}static and(...g){return new s(g,"AND")}}filter.Filter=e;class t extends e{constructor(g,m,d){super(),this.field=g,this.operator=m,this.value=d}_getField(){return this.field}_getOperator(){return this.operator}_getValue(){return this.value}}filter.UnaryFilter=t;class s extends e{constructor(g,m){super(),this.filters=g,this.operator=m}_getFilters(){return this.filters}_getOperator(){return this.operator}}return filter.CompositeFilter=s,filter}var helpers={},hasRequiredHelpers;function requireHelpers(){if(hasRequiredHelpers)return helpers;hasRequiredHelpers=1,Object.defineProperty(helpers,"__esModule",{value:!0}),helpers.validateQueryOrder=g,helpers.validateQueryOperator=m,helpers.validateDocumentReference=d,helpers.validateQueryValue=l,helpers.coalesce=a;const e=requireValidate(),t=requireSerializer(),s=requireDocumentReference(),p=requireConstants();function g(o,h){return h=typeof h=="string"?h.toLowerCase():h,(0,e.validateEnumValue)(o,h,Object.keys(p.directionOperators),{optional:!0}),h}function m(o,h,v){if(h==="="&&(h="=="),(0,e.validateEnumValue)(o,h,Object.keys(p.comparisonOperators)),typeof v=="number"&&isNaN(v)&&h!=="=="&&h!=="!=")throw new Error("Invalid query. You can only perform '==' and '!=' comparisons on NaN.");if(v===null&&h!=="=="&&h!=="!=")throw new Error("Invalid query. You can only perform '==' and '!=' comparisons on Null.");return h}function d(o,h){if(!(h instanceof s.DocumentReference))throw new Error((0,e.invalidArgumentMessage)(o,"DocumentReference"));return h}function l(o,h,v){(0,t.validateUserInput)(o,h,"query constraint",{allowDeletes:"none",allowTransforms:!1,allowUndefined:v})}function a(...o){return o.find(h=>h!==void 0)}return helpers}var aggregateQuery={},aggregate={},hasRequiredAggregate;function requireAggregate(){if(hasRequiredAggregate)return aggregate;hasRequiredAggregate=1,Object.defineProperty(aggregate,"__esModule",{value:!0}),aggregate.AggregateField=aggregate.Aggregate=void 0;const e=requirePath(),t=require$$1$3;class s{constructor(m,d,l){this.alias=m,this.aggregateType=d,this.fieldPath=l}toProto(){const m={};if(this.aggregateType==="count")m.count={};else if(this.aggregateType==="sum")t(this.fieldPath!==void 0,"Missing field path for sum aggregation."),m.sum={field:{fieldPath:e.FieldPath.fromArgument(this.fieldPath).formattedName}};else if(this.aggregateType==="avg")t(this.fieldPath!==void 0,"Missing field path for average aggregation."),m.avg={field:{fieldPath:e.FieldPath.fromArgument(this.fieldPath).formattedName}};else throw new Error(`Aggregate type ${this.aggregateType} unimplemented.`);return m.alias=this.alias,m}}aggregate.Aggregate=s;class p{constructor(m,d){this.aggregateType=m,this.type="AggregateField",this._field=d}isEqual(m){return m instanceof p&&this.aggregateType===m.aggregateType&&(this._field===void 0&&m._field===void 0||this._field!==void 0&&m._field!==void 0&&e.FieldPath.fromArgument(this._field).isEqual(e.FieldPath.fromArgument(m._field)))}static count(){return new p("count")}static average(m){return new p("avg",m)}static sum(m){return new p("sum",m)}}return aggregate.AggregateField=p,aggregate}var aggregateQuerySnapshot={},hasRequiredAggregateQuerySnapshot;function requireAggregateQuerySnapshot(){if(hasRequiredAggregateQuerySnapshot)return aggregateQuerySnapshot;hasRequiredAggregateQuerySnapshot=1,Object.defineProperty(aggregateQuerySnapshot,"__esModule",{value:!0}),aggregateQuerySnapshot.AggregateQuerySnapshot=void 0;const e=requireFastDeepEqual();class t{constructor(p,g,m){this._query=p,this._readTime=g,this._data=m}get query(){return this._query}get readTime(){return this._readTime}data(){return this._data}isEqual(p){return this===p?!0:!(p instanceof t)||!this.query.isEqual(p.query)?!1:e(this._data,p._data)}}return aggregateQuerySnapshot.AggregateQuerySnapshot=t,aggregateQuerySnapshot}var hasRequiredAggregateQuery;function requireAggregateQuery(){if(hasRequiredAggregateQuery)return aggregateQuery;hasRequiredAggregateQuery=1,Object.defineProperty(aggregateQuery,"__esModule",{value:!0}),aggregateQuery.AggregateQuery=void 0;const e=require$$1$3,t=requireFastDeepEqual(),s=requireAggregate(),p=requireTimestamp(),g=requireUtil(),m=requireQueryProfile(),d=requireLogger(),l=requireAggregateQuerySnapshot(),a=require$$1$3,o=requireTraceUtil();class h{constructor(_,y){this._query=_,this._aggregates=y,this.clientAliasToServerAliasMap={},this.serverAliasToClientAliasMap={};let w=0;for(const T in this._aggregates)if(Object.prototype.hasOwnProperty.call(this._aggregates,T)){const I=`aggregate_${w++}`;this.clientAliasToServerAliasMap[T]=I,this.serverAliasToClientAliasMap[I]=T}}get query(){return this._query}async get(){return this._query._firestore._traceUtil.startActiveSpan(o.SPAN_NAME_AGGREGATION_QUERY_GET,async()=>{const{result:_}=await this._get();return _})}async _get(_){const y=await this._getResponse(_);if(!y.result)throw new Error("No AggregateQuery results");return y}_getResponse(_,y){const w=Error().stack;return new Promise((T,I)=>{const O={},E=this._stream(_,y);E.on("error",C=>{I((0,g.wrapError)(C,w))}),E.on("data",C=>{C.transaction&&(O.transaction=C.transaction),C.explainMetrics&&(O.explainMetrics=C.explainMetrics),C.result&&(O.result=C.result)}),E.on("end",()=>{E.destroy(),T(O)})})}_stream(_,y){const w=(0,g.requestTag)(),T=this._query.firestore,I=new a.Transform({objectMode:!0,transform:(O,E,C)=>{var x;const j={};if(!((x=O.transaction)===null||x===void 0)&&x.length&&(j.transaction=O.transaction),O.explainMetrics&&(j.explainMetrics=m.ExplainMetrics._fromProto(O.explainMetrics,T._serializer)),O.result){const D=p.Timestamp.fromProto(O.readTime),k=this.decodeResult(O.result);j.result=new l.AggregateQuerySnapshot(this,D,k)}C(void 0,j)}});return T.initializeIfNeeded(w).then(async()=>{const O=this.toProto(_,y),E=await T.requestStream("runAggregationQuery",!1,O,w);I.on("close",()=>{E.resume(),E.end()}),E.on("error",C=>{E.unpipe(I),(0,d.logger)("AggregateQuery._stream",w,"AggregateQuery failed with stream error:",C),this._query._firestore._traceUtil.currentSpan().addEvent(`${o.SPAN_NAME_RUN_AGGREGATION_QUERY}: Error.`,{"error.message":C.message}),I.destroy(C)}),E.resume(),E.pipe(I)}).catch(O=>I.destroy(O)),I}decodeResult(_){const y={},w=_.aggregateFields;if(w){const T=this._query.firestore._serializer;for(const I of Object.keys(w)){const O=this.serverAliasToClientAliasMap[I];if(e(O!=null,`'${I}' not present in server-client alias mapping.`),this._aggregates[O]===void 0)throw new Error(`Unexpected alias [${I}] in result aggregate result`);y[O]=T.decodeValue(w[I])}}return y}toProto(_,y){const w=this._query.toProto(),T={parent:w.parent,structuredAggregationQuery:{structuredQuery:w.structuredQuery,aggregations:(0,g.mapToArray)(this._aggregates,(I,O)=>{const E=this.clientAliasToServerAliasMap[O];return e(E!=null,`'${O}' not present in client-server alias mapping.`),new s.Aggregate(E,I.aggregateType,I._field).toProto()})}};return _ instanceof Uint8Array?T.transaction=_:_ instanceof p.Timestamp?T.readTime=_.toProto().timestampValue:_&&(T.newTransaction=_),y&&(T.explainOptions=y),T}isEqual(_){return this===_?!0:!(_ instanceof h)||!this.query.isEqual(_.query)?!1:t(this._aggregates,_._aggregates)}async explain(_){const{result:y,explainMetrics:w}=await this._getResponse(void 0,_||{});if(!w)throw new Error("No explain results");return new m.ExplainResults(w,y||null)}}return aggregateQuery.AggregateQuery=h,aggregateQuery}var watch={},rbtree,hasRequiredRbtree;function requireRbtree(){if(hasRequiredRbtree)return rbtree;hasRequiredRbtree=1,rbtree=I;var e=0,t=1;function s(O,E,C,x,j,D){this._color=O,this.key=E,this.value=C,this.left=x,this.right=j,this._count=D}function p(O){return new s(O._color,O.key,O.value,O.left,O.right,O._count)}function g(O,E){return new s(O,E.key,E.value,E.left,E.right,E._count)}function m(O){O._count=1+(O.left?O.left._count:0)+(O.right?O.right._count:0)}function d(O,E){this._compare=O,this.root=E}var l=d.prototype;Object.defineProperty(l,"keys",{get:function(){var O=[];return this.forEach(function(E,C){O.push(E)}),O}}),Object.defineProperty(l,"values",{get:function(){var O=[];return this.forEach(function(E,C){O.push(C)}),O}}),Object.defineProperty(l,"length",{get:function(){return this.root?this.root._count:0}}),l.insert=function(O,E){for(var C=this._compare,x=this.root,j=[],D=[];x;){var k=C(O,x.key);j.push(x),D.push(k),k<=0?x=x.left:x=x.right}j.push(new s(e,O,E,null,null,1));for(var q=j.length-2;q>=0;--q){var x=j[q];D[q]<=0?j[q]=new s(x._color,x.key,x.value,j[q+1],x.right,x._count+1):j[q]=new s(x._color,x.key,x.value,x.left,j[q+1],x._count+1)}for(var q=j.length-1;q>1;--q){var G=j[q-1],x=j[q];if(G._color===t||x._color===t)break;var $=j[q-2];if($.left===G)if(G.left===x){var W=$.right;if(W&&W._color===e)G._color=t,$.right=g(t,W),$._color=e,q-=1;else{if($._color=e,$.left=G.right,G._color=t,G.right=$,j[q-2]=G,j[q-1]=x,m($),m(G),q>=3){var K=j[q-3];K.left===$?K.left=G:K.right=G}break}}else{var W=$.right;if(W&&W._color===e)G._color=t,$.right=g(t,W),$._color=e,q-=1;else{if(G.right=x.left,$._color=e,$.left=x.right,x._color=t,x.left=G,x.right=$,j[q-2]=x,j[q-1]=G,m($),m(G),m(x),q>=3){var K=j[q-3];K.left===$?K.left=x:K.right=x}break}}else if(G.right===x){var W=$.left;if(W&&W._color===e)G._color=t,$.left=g(t,W),$._color=e,q-=1;else{if($._color=e,$.right=G.left,G._color=t,G.left=$,j[q-2]=G,j[q-1]=x,m($),m(G),q>=3){var K=j[q-3];K.right===$?K.right=G:K.left=G}break}}else{var W=$.left;if(W&&W._color===e)G._color=t,$.left=g(t,W),$._color=e,q-=1;else{if(G.left=x.right,$._color=e,$.right=x.left,x._color=t,x.right=G,x.left=$,j[q-2]=x,j[q-1]=G,m($),m(G),m(x),q>=3){var K=j[q-3];K.right===$?K.right=x:K.left=x}break}}}return j[0]._color=t,new d(C,j[0])};function a(O,E){if(E.left){var C=a(O,E.left);if(C)return C}var C=O(E.key,E.value);if(C)return C;if(E.right)return a(O,E.right)}function o(O,E,C,x){var j=E(O,x.key);if(j<=0){if(x.left){var D=o(O,E,C,x.left);if(D)return D}var D=C(x.key,x.value);if(D)return D}if(x.right)return o(O,E,C,x.right)}function h(O,E,C,x,j){var D=C(O,j.key),k=C(E,j.key),q;if(D<=0&&(j.left&&(q=h(O,E,C,x,j.left),q)||k>0&&(q=x(j.key,j.value),q)))return q;if(k>0&&j.right)return h(O,E,C,x,j.right)}l.forEach=function(E,C,x){if(this.root)switch(arguments.length){case 1:return a(E,this.root);case 2:return o(C,this._compare,E,this.root);case 3:return this._compare(C,x)>=0?void 0:h(C,x,this._compare,E,this.root)}},Object.defineProperty(l,"begin",{get:function(){for(var O=[],E=this.root;E;)O.push(E),E=E.left;return new v(this,O)}}),Object.defineProperty(l,"end",{get:function(){for(var O=[],E=this.root;E;)O.push(E),E=E.right;return new v(this,O)}}),l.at=function(O){if(O<0)return new v(this,[]);for(var E=this.root,C=[];;){if(C.push(E),E.left){if(O<E.left._count){E=E.left;continue}O-=E.left._count}if(!O)return new v(this,C);if(O-=1,E.right){if(O>=E.right._count)break;E=E.right}else break}return new v(this,[])},l.ge=function(O){for(var E=this._compare,C=this.root,x=[],j=0;C;){var D=E(O,C.key);x.push(C),D<=0&&(j=x.length),D<=0?C=C.left:C=C.right}return x.length=j,new v(this,x)},l.gt=function(O){for(var E=this._compare,C=this.root,x=[],j=0;C;){var D=E(O,C.key);x.push(C),D<0&&(j=x.length),D<0?C=C.left:C=C.right}return x.length=j,new v(this,x)},l.lt=function(O){for(var E=this._compare,C=this.root,x=[],j=0;C;){var D=E(O,C.key);x.push(C),D>0&&(j=x.length),D<=0?C=C.left:C=C.right}return x.length=j,new v(this,x)},l.le=function(O){for(var E=this._compare,C=this.root,x=[],j=0;C;){var D=E(O,C.key);x.push(C),D>=0&&(j=x.length),D<0?C=C.left:C=C.right}return x.length=j,new v(this,x)},l.find=function(O){for(var E=this._compare,C=this.root,x=[];C;){var j=E(O,C.key);if(x.push(C),j===0)return new v(this,x);j<=0?C=C.left:C=C.right}return new v(this,[])},l.remove=function(O){var E=this.find(O);return E?E.remove():this},l.get=function(O){for(var E=this._compare,C=this.root;C;){var x=E(O,C.key);if(x===0)return C.value;x<=0?C=C.left:C=C.right}};function v(O,E){this.tree=O,this._stack=E}var _=v.prototype;Object.defineProperty(_,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(_,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),_.clone=function(){return new v(this.tree,this._stack.slice())};function y(O,E){O.key=E.key,O.value=E.value,O.left=E.left,O.right=E.right,O._color=E._color,O._count=E._count}function w(O){for(var E,C,x,j,D=O.length-1;D>=0;--D){if(E=O[D],D===0){E._color=t;return}if(C=O[D-1],C.left===E){if(x=C.right,x.right&&x.right._color===e){if(x=C.right=p(x),j=x.right=p(x.right),C.right=x.left,x.left=C,x.right=j,x._color=C._color,E._color=t,C._color=t,j._color=t,m(C),m(x),D>1){var k=O[D-2];k.left===C?k.left=x:k.right=x}O[D-1]=x;return}else if(x.left&&x.left._color===e){if(x=C.right=p(x),j=x.left=p(x.left),C.right=j.left,x.left=j.right,j.left=C,j.right=x,j._color=C._color,C._color=t,x._color=t,E._color=t,m(C),m(x),m(j),D>1){var k=O[D-2];k.left===C?k.left=j:k.right=j}O[D-1]=j;return}if(x._color===t)if(C._color===e){C._color=t,C.right=g(e,x);return}else{C.right=g(e,x);continue}else{if(x=p(x),C.right=x.left,x.left=C,x._color=C._color,C._color=e,m(C),m(x),D>1){var k=O[D-2];k.left===C?k.left=x:k.right=x}O[D-1]=x,O[D]=C,D+1<O.length?O[D+1]=E:O.push(E),D=D+2}}else{if(x=C.left,x.left&&x.left._color===e){if(x=C.left=p(x),j=x.left=p(x.left),C.left=x.right,x.right=C,x.left=j,x._color=C._color,E._color=t,C._color=t,j._color=t,m(C),m(x),D>1){var k=O[D-2];k.right===C?k.right=x:k.left=x}O[D-1]=x;return}else if(x.right&&x.right._color===e){if(x=C.left=p(x),j=x.right=p(x.right),C.left=j.right,x.right=j.left,j.right=C,j.left=x,j._color=C._color,C._color=t,x._color=t,E._color=t,m(C),m(x),m(j),D>1){var k=O[D-2];k.right===C?k.right=j:k.left=j}O[D-1]=j;return}if(x._color===t)if(C._color===e){C._color=t,C.left=g(e,x);return}else{C.left=g(e,x);continue}else{if(x=p(x),C.left=x.right,x.right=C,x._color=C._color,C._color=e,m(C),m(x),D>1){var k=O[D-2];k.right===C?k.right=x:k.left=x}O[D-1]=x,O[D]=C,D+1<O.length?O[D+1]=E:O.push(E),D=D+2}}}}_.remove=function(){var O=this._stack;if(O.length===0)return this.tree;var E=new Array(O.length),C=O[O.length-1];E[E.length-1]=new s(C._color,C.key,C.value,C.left,C.right,C._count);for(var x=O.length-2;x>=0;--x){var C=O[x];C.left===O[x+1]?E[x]=new s(C._color,C.key,C.value,E[x+1],C.right,C._count):E[x]=new s(C._color,C.key,C.value,C.left,E[x+1],C._count)}if(C=E[E.length-1],C.left&&C.right){var j=E.length;for(C=C.left;C.right;)E.push(C),C=C.right;var D=E[j-1];E.push(new s(C._color,D.key,D.value,C.left,C.right,C._count)),E[j-1].key=C.key,E[j-1].value=C.value;for(var x=E.length-2;x>=j;--x)C=E[x],E[x]=new s(C._color,C.key,C.value,C.left,E[x+1],C._count);E[j-1].left=E[j]}if(C=E[E.length-1],C._color===e){var k=E[E.length-2];k.left===C?k.left=null:k.right===C&&(k.right=null),E.pop();for(var x=0;x<E.length;++x)E[x]._count--;return new d(this.tree._compare,E[0])}else if(C.left||C.right){C.left?y(C,C.left):C.right&&y(C,C.right),C._color=t;for(var x=0;x<E.length-1;++x)E[x]._count--;return new d(this.tree._compare,E[0])}else{if(E.length===1)return new d(this.tree._compare,null);for(var x=0;x<E.length;++x)E[x]._count--;var q=E[E.length-2];w(E),q.left===C?q.left=null:q.right=null}return new d(this.tree._compare,E[0])},Object.defineProperty(_,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(_,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(_,"index",{get:function(){var O=0,E=this._stack;if(E.length===0){var C=this.tree.root;return C?C._count:0}else E[E.length-1].left&&(O=E[E.length-1].left._count);for(var x=E.length-2;x>=0;--x)E[x+1]===E[x].right&&(++O,E[x].left&&(O+=E[x].left._count));return O},enumerable:!0}),_.next=function(){var O=this._stack;if(O.length!==0){var E=O[O.length-1];if(E.right)for(E=E.right;E;)O.push(E),E=E.left;else for(O.pop();O.length>0&&O[O.length-1].right===E;)E=O[O.length-1],O.pop()}},Object.defineProperty(_,"hasNext",{get:function(){var O=this._stack;if(O.length===0)return!1;if(O[O.length-1].right)return!0;for(var E=O.length-1;E>0;--E)if(O[E-1].left===O[E])return!0;return!1}}),_.update=function(O){var E=this._stack;if(E.length===0)throw new Error("Can't update empty node!");var C=new Array(E.length),x=E[E.length-1];C[C.length-1]=new s(x._color,x.key,O,x.left,x.right,x._count);for(var j=E.length-2;j>=0;--j)x=E[j],x.left===E[j+1]?C[j]=new s(x._color,x.key,x.value,C[j+1],x.right,x._count):C[j]=new s(x._color,x.key,x.value,x.left,C[j+1],x._count);return new d(this.tree._compare,C[0])},_.prev=function(){var O=this._stack;if(O.length!==0){var E=O[O.length-1];if(E.left)for(E=E.left;E;)O.push(E),E=E.right;else for(O.pop();O.length>0&&O[O.length-1].left===E;)E=O[O.length-1],O.pop()}},Object.defineProperty(_,"hasPrev",{get:function(){var O=this._stack;if(O.length===0)return!1;if(O[O.length-1].left)return!0;for(var E=O.length-1;E>0;--E)if(O[E-1].right===O[E])return!0;return!1}});function T(O,E){return O<E?-1:O>E?1:0}function I(O){return new d(O||T,null)}return rbtree}var hasRequiredWatch;function requireWatch(){return hasRequiredWatch||(hasRequiredWatch=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.QueryWatch=e.DocumentWatch=e.WATCH_IDLE_TIMEOUT_MS=void 0;const t=require$$1$3,s=requireRbtree(),p=requireFallback(),g=requireBackoff(),m=requireDocument(),d=requireDocumentChange(),l=requireLogger(),a=requirePath(),o=requireTimestamp(),h=requireTypes$1(),v=requireUtil();const _=1;e.WATCH_IDLE_TIMEOUT_MS=12e4;const y={};const w={added:"added",modified:"modified",removed:"removed"};const T=(x,j)=>(t(x===j,"Document watches only support one document."),0),I=()=>{};class O{constructor(j,D=(0,h.defaultConverter)()){this._converter=D,this.isActive=!0,this.currentStream=null,this.resumeToken=void 0,this.docMap=new Map,this.changeMap=new Map,this.current=!1,this.hasPushed=!1,this.firestore=j,this.backoff=new g.ExponentialBackoff,this.requestTag=(0,v.requestTag)(),this.onNext=I,this.onError=I}onSnapshot(j,D){t(this.onNext===I,"onNext should not already be defined."),t(this.onError===I,"onError should not already be defined."),t(this.docTree===void 0,"docTree should not already be defined."),this.onNext=j,this.onError=D,this.docTree=s(this.getComparator()),this.initStream();const k=()=>{(0,l.logger)("Watch.onSnapshot",this.requestTag,"Unsubscribe called"),this.onNext=()=>{},this.onError=()=>{},this.shutdown()};return this.firestore.registerListener(),k}currentSize(){const j=this.extractCurrentChanges(o.Timestamp.now());return this.docMap.size+j.adds.length-j.deletes.length}extractCurrentChanges(j){const D=[],k=[],q=[];return this.changeMap.forEach((G,$)=>{G===y?this.docMap.has($)&&D.push($):this.docMap.has($)?(G.readTime=j,q.push(G.build())):(G.readTime=j,k.push(G.build()))}),{deletes:D,adds:k,updates:q}}resetDocs(){(0,l.logger)("Watch.resetDocs",this.requestTag,"Resetting documents"),this.changeMap.clear(),this.resumeToken=void 0,this.docTree.forEach(j=>{this.changeMap.set(j.ref.path,y)}),this.current=!1}closeStream(j){this.isActive&&((0,l.logger)("Watch.closeStream",this.requestTag,"Invoking onError: ",j),this.onError(j)),this.shutdown()}maybeReopenStream(j){this.isActive&&!this.isPermanentWatchError(j)?((0,l.logger)("Watch.maybeReopenStream",this.requestTag,"Stream ended, re-opening after retryable error:",j),this.changeMap.clear(),this.isResourceExhaustedError(j)&&this.backoff.resetToMax(),this.initStream()):this.closeStream(j)}resetIdleTimeout(){this.idleTimeoutHandle&&clearTimeout(this.idleTimeoutHandle),this.idleTimeoutHandle=(0,g.delayExecution)(()=>{var j;(0,l.logger)("Watch.resetIdleTimeout",this.requestTag,"Resetting stream after idle timeout"),(j=this.currentStream)===null||j===void 0||j.end(),this.currentStream=null;const D=new p.GoogleError("Watch stream idle timeout");D.code=p.Status.UNKNOWN,this.maybeReopenStream(D)},e.WATCH_IDLE_TIMEOUT_MS)}resetStream(){(0,l.logger)("Watch.resetStream",this.requestTag,"Restarting stream"),this.currentStream&&(this.currentStream.end(),this.currentStream=null),this.initStream()}initStream(){this.backoff.backoffAndWait().then(async()=>{if(!this.isActive){(0,l.logger)("Watch.initStream",this.requestTag,"Not initializing inactive stream");return}await this.firestore.initializeIfNeeded(this.requestTag);const j={};return j.database=this.firestore.formattedName,j.addTarget=this.getTarget(this.resumeToken),this.firestore.requestStream("listen",!0,j,this.requestTag).then(D=>{if(!this.isActive){(0,l.logger)("Watch.initStream",this.requestTag,"Closing inactive stream"),D.emit("end"),D.on("error",()=>{});return}(0,l.logger)("Watch.initStream",this.requestTag,"Opened new stream"),this.currentStream=D,this.resetIdleTimeout(),this.currentStream.on("data",k=>{this.resetIdleTimeout(),this.onData(k)}).on("error",k=>{this.currentStream===D&&(this.currentStream=null,this.maybeReopenStream(k))}).on("end",()=>{if(this.currentStream===D){this.currentStream=null;const k=new p.GoogleError("Stream ended unexpectedly");k.code=p.Status.UNKNOWN,this.maybeReopenStream(k)}}),this.currentStream.resume()})}).catch(j=>{this.closeStream(j)})}onData(j){if(j.targetChange){(0,l.logger)("Watch.onData",this.requestTag,"Processing target change");const D=j.targetChange,k=!D.targetIds||D.targetIds.length===0;if(D.targetChangeType==="NO_CHANGE")k&&D.readTime&&this.current&&this.pushSnapshot(o.Timestamp.fromProto(D.readTime),D.resumeToken);else if(D.targetChangeType==="ADD")_!==D.targetIds[0]&&this.closeStream(Error("Unexpected target ID sent by server"));else if(D.targetChangeType==="REMOVE"){let q=p.Status.INTERNAL,G="internal error";D.cause&&(q=D.cause.code,G=D.cause.message),this.closeStream(new Error("Error "+q+": "+G))}else D.targetChangeType==="RESET"?this.resetDocs():D.targetChangeType==="CURRENT"?this.current=!0:this.closeStream(new Error("Unknown target change type: "+JSON.stringify(D)));D.resumeToken&&this.affectsTarget(D.targetIds,_)&&this.backoff.reset()}else if(j.documentChange){(0,l.logger)("Watch.onData",this.requestTag,"Processing change event");const D=j.documentChange.targetIds||[],k=j.documentChange.removedTargetIds||[];let q=!1,G=!1;for(let z=0;z<D.length;z++)D[z]===_&&(q=!0);for(let z=0;z<k.length;z++)k[z]===_&&(G=!0);const $=j.documentChange.document,W=$.name,K=a.QualifiedResourcePath.fromSlashSeparatedString(W).relativeName;if(q){(0,l.logger)("Watch.onData",this.requestTag,"Received document change");const z=this.firestore.doc(K),Q=new m.DocumentSnapshotBuilder(z.withConverter(this._converter));Q.fieldsProto=$.fields||{},Q.createTime=o.Timestamp.fromProto($.createTime),Q.updateTime=o.Timestamp.fromProto($.updateTime),this.changeMap.set(K,Q)}else G&&((0,l.logger)("Watch.onData",this.requestTag,"Received document remove"),this.changeMap.set(K,y))}else if(j.documentDelete||j.documentRemove){(0,l.logger)("Watch.onData",this.requestTag,"Processing remove event");const D=(j.documentDelete||j.documentRemove).document,k=a.QualifiedResourcePath.fromSlashSeparatedString(D).relativeName;this.changeMap.set(k,y)}else j.filter?((0,l.logger)("Watch.onData",this.requestTag,"Processing filter update"),j.filter.count!==this.currentSize()&&(this.resetDocs(),this.resetStream())):this.closeStream(new Error("Unknown listen response type: "+JSON.stringify(j)))}affectsTarget(j,D){if(j===void 0||j.length===0)return!0;for(const k of j)if(k===D)return!0;return!1}pushSnapshot(j,D){const k=this.computeSnapshot(j);if(!this.hasPushed||k.length>0){(0,l.logger)("Watch.pushSnapshot",this.requestTag,"Sending snapshot with %d changes and %d documents",String(k.length),this.docTree.length);const q=this.docTree;this.onNext(j,q.length,()=>q.keys,()=>k),this.hasPushed=!0}this.changeMap.clear(),this.resumeToken=D}deleteDoc(j){t(this.docMap.has(j),"Document to delete does not exist");const D=this.docMap.get(j),k=this.docTree.find(D),q=k.index;return this.docTree=k.remove(),this.docMap.delete(j),new d.DocumentChange(w.removed,D,q,-1)}addDoc(j){const D=j.ref.path;t(!this.docMap.has(D),"Document to add already exists"),this.docTree=this.docTree.insert(j,null);const k=this.docTree.find(j).index;return this.docMap.set(D,j),new d.DocumentChange(w.added,j,-1,k)}modifyDoc(j){const D=j.ref.path;if(t(this.docMap.has(D),"Document to modify does not exist"),!this.docMap.get(D).updateTime.isEqual(j.updateTime)){const q=this.deleteDoc(D),G=this.addDoc(j);return new d.DocumentChange(w.modified,j,q.oldIndex,G.newIndex)}return null}computeSnapshot(j){const D=this.extractCurrentChanges(j),k=[];return D.deletes.sort((q,G)=>this.getComparator()(this.docMap.get(q),this.docMap.get(G))),D.deletes.forEach(q=>{const G=this.deleteDoc(q);k.push(G)}),D.adds.sort(this.getComparator()),D.adds.forEach(q=>{const G=this.addDoc(q);k.push(G)}),D.updates.sort(this.getComparator()),D.updates.forEach(q=>{const G=this.modifyDoc(q);G&&k.push(G)}),t(this.docTree.length===this.docMap.size,"The update document tree and document map should have the same number of entries."),k}isPermanentWatchError(j){if(j.code===void 0)return(0,l.logger)("Watch.isPermanentError",this.requestTag,"Unable to determine error code: ",j),!1;switch(j.code){case p.Status.ABORTED:case p.Status.CANCELLED:case p.Status.UNKNOWN:case p.Status.DEADLINE_EXCEEDED:case p.Status.RESOURCE_EXHAUSTED:case p.Status.INTERNAL:case p.Status.UNAVAILABLE:case p.Status.UNAUTHENTICATED:return!1;default:return!0}}isResourceExhaustedError(j){return j.code===p.Status.RESOURCE_EXHAUSTED}shutdown(){var j;this.isActive&&(this.isActive=!1,this.idleTimeoutHandle&&(clearTimeout(this.idleTimeoutHandle),this.idleTimeoutHandle=void 0),this.firestore.unregisterListener()),(j=this.currentStream)===null||j===void 0||j.end(),this.currentStream=null}}class E extends O{constructor(j,D){super(j,D._converter),this.ref=D}getComparator(){return T}getTarget(j){return{documents:{documents:[this.ref.formattedName]},targetId:_,resumeToken:j}}}e.DocumentWatch=E;class C extends O{constructor(j,D,k){super(j,k),this.query=D,this.comparator=D.comparator()}getComparator(){return this.query.comparator()}getTarget(j){return{query:this.query.toProto(),targetId:_,resumeToken:j}}}e.QueryWatch=C})(watch)),watch}var hasRequiredQuery;function requireQuery(){if(hasRequiredQuery)return query;hasRequiredQuery=1,Object.defineProperty(query,"__esModule",{value:!0}),query.Query=void 0;const e=require$$1$3,t=requireQueryUtil(),s=requireSrc(),p=requireFieldOrder(),g=requireFieldFilterInternal(),m=requireCompositeFilterInternal(),d=requireConstants(),l=requireDocumentReference(),a=requireQuerySnapshot(),o=requireSerializer(),h=requireQueryProfile(),v=requireFilter(),_=requirePath(),y=requireHelpers(),w=requireValidate(),T=requireTypes(),I=requireAggregateQuery(),O=requireVectorQuery(),E=requireOrder(),C=requireTypes$1(),x=requireTraceUtil();class j{constructor(k,q){this._firestore=k,this._queryOptions=q,this._serializer=new o.Serializer(k),this._allowUndefined=!!this._firestore._settings.ignoreUndefinedProperties,this._queryUtil=new t.QueryUtil(k,q,this._serializer)}static _extractFieldValues(k,q){const G=[];for(const $ of q)if(s.FieldPath.documentId().isEqual($.field))G.push(k.ref);else{const W=k.get($.field);if(W===void 0)throw new Error(`Field "${$.field}" is missing in the provided DocumentSnapshot. Please provide a document that contains values for all specified orderBy() and where() constraints.`);G.push(W)}return G}get firestore(){return this._firestore}where(k,q,G){let $;if(k instanceof s.Filter?$=k:$=s.Filter.where(k,q,G),this._queryOptions.startAt||this._queryOptions.endAt)throw new Error("Cannot specify a where() filter after calling startAt(), startAfter(), endBefore() or endAt().");const W=this._parseFilter($);if(W.getFilters().length===0)return this;const K=this._queryOptions.with({filters:this._queryOptions.filters.concat(W)});return new j(this._firestore,K)}_parseFilter(k){return k instanceof v.UnaryFilter?this._parseFieldFilter(k):this._parseCompositeFilter(k)}_parseFieldFilter(k){let q=k._getValue(),G=k._getOperator();const $=k._getField();(0,_.validateFieldPath)("fieldPath",$),G=(0,y.validateQueryOperator)("opStr",G,q),(0,y.validateQueryValue)("value",q,this._allowUndefined);const W=s.FieldPath.fromArgument($);if(s.FieldPath.documentId().isEqual(W)){if(G==="array-contains"||G==="array-contains-any")throw new Error(`Invalid Query. You can't perform '${G}' queries on FieldPath.documentId().`);if(G==="in"||G==="not-in"){if(!Array.isArray(q)||q.length===0)throw new Error(`Invalid Query. A non-empty array is required for '${G}' filters.`);q=q.map(K=>this.validateReference(K))}else q=this.validateReference(q)}return new g.FieldFilterInternal(this._serializer,W,d.comparisonOperators[G],q)}_parseCompositeFilter(k){const q=k._getFilters().map(G=>this._parseFilter(G)).filter(G=>G.getFilters().length>0);return q.length===1?q[0]:new m.CompositeFilterInternal(q,k._getOperator()==="AND"?"AND":"OR")}select(...k){const q=[];if(k.length===0)q.push({fieldPath:s.FieldPath.documentId().formattedName});else for(let $=0;$<k.length;++$)(0,_.validateFieldPath)($,k[$]),q.push({fieldPath:s.FieldPath.fromArgument(k[$]).formattedName});const G=this._queryOptions.with({projection:{fields:q}});return new j(this._firestore,G)}orderBy(k,q){if((0,_.validateFieldPath)("fieldPath",k),q=(0,y.validateQueryOrder)("directionStr",q),this._queryOptions.startAt||this._queryOptions.endAt)throw new Error("Cannot specify an orderBy() constraint after calling startAt(), startAfter(), endBefore() or endAt().");const G=new p.FieldOrder(s.FieldPath.fromArgument(k),d.directionOperators[q||"asc"]),$=this._queryOptions.with({fieldOrders:this._queryOptions.fieldOrders.concat(G)});return new j(this._firestore,$)}limit(k){(0,w.validateInteger)("limit",k);const q=this._queryOptions.with({limit:k,limitType:T.LimitType.First});return new j(this._firestore,q)}limitToLast(k){(0,w.validateInteger)("limitToLast",k);const q=this._queryOptions.with({limit:k,limitType:T.LimitType.Last});return new j(this._firestore,q)}offset(k){(0,w.validateInteger)("offset",k);const q=this._queryOptions.with({offset:k});return new j(this._firestore,q)}count(){return this.aggregate({count:s.AggregateField.count()})}aggregate(k){return new I.AggregateQuery(this,k)}findNearest(k,q,G){if(typeof k=="string"||k instanceof s.FieldPath){const $={distanceMeasure:G.distanceMeasure,limit:G.limit,queryVector:q,vectorField:k};return this._findNearest($)}else return this._findNearest(k)}_findNearest(k){if((0,_.validateFieldPath)("vectorField",k.vectorField),k.limit<=0)throw(0,w.invalidArgumentMessage)("limit","positive limit number");if((Array.isArray(k.queryVector)?k.queryVector.length:k.queryVector.toArray().length)===0)throw(0,w.invalidArgumentMessage)("queryVector","vector size must be larger than 0");return new O.VectorQuery(this,k)}isEqual(k){return this===k?!0:k instanceof j&&this._queryOptions.isEqual(k._queryOptions)}getInequalityFilterFields(){const k=[];for(const q of this._queryOptions.filters)for(const G of q.getFlattenedFilters())G.isInequalityFilter()&&k.push(G.field);return k.sort((q,G)=>q.compareTo(G))}createImplicitOrderBy(k){if(k.length!==1||!(k[0]instanceof s.DocumentSnapshot))return this._queryOptions.fieldOrders;const q=this._queryOptions.fieldOrders.slice(),G=new Set([...q.map(K=>K.field.toString())]),$=q.length===0?d.directionOperators.ASC:q[q.length-1].direction,W=this.getInequalityFilterFields();for(const K of W)!G.has(K.toString())&&!K.isEqual(s.FieldPath.documentId())&&(q.push(new p.FieldOrder(K,$)),G.add(K.toString()));return G.has(s.FieldPath.documentId().toString())||q.push(new p.FieldOrder(s.FieldPath.documentId(),$)),q}createCursor(k,q,G){let $;if(q.length===1&&q[0]instanceof s.DocumentSnapshot?$=j._extractFieldValues(q[0],k):$=q,$.length>k.length)throw new Error("Too many cursor values specified. The specified values must match the orderBy() constraints of the query.");const W={values:[],before:G};for(let K=0;K<$.length;++K){let z=$[K];s.FieldPath.documentId().isEqual(k[K].field)&&(z=this.validateReference(z)),(0,y.validateQueryValue)(K,z,this._allowUndefined),W.values.push(this._serializer.encodeValue(z))}return W}validateReference(k){const q=this._queryOptions.allDescendants?this._queryOptions.parentPath:this._queryOptions.parentPath.append(this._queryOptions.collectionId);let G;if(typeof k=="string"){const $=q.append(k);if(this._queryOptions.allDescendants){if(!$.isDocument)throw new Error(`When querying a collection group and ordering by FieldPath.documentId(), the corresponding value must result in a valid document path, but '${k}' is not because it contains an odd number of segments.`)}else if(k.indexOf("/")!==-1)throw new Error(`When querying a collection and ordering by FieldPath.documentId(), the corresponding value must be a plain document ID, but '${k}' contains a slash.`);G=new l.DocumentReference(this._firestore,q.append(k),this._queryOptions.converter)}else if(k instanceof l.DocumentReference){if(G=k,!q.isPrefixOf(G._path))throw new Error(`"${G.path}" is not part of the query result set and cannot be used as a query boundary.`)}else throw new Error(`The corresponding value for FieldPath.documentId() must be a string or a DocumentReference, but was "${k}".`);if(!this._queryOptions.allDescendants&&G._path.parent().compareTo(q)!==0)throw new Error(`Only a direct child can be used as a query boundary. Found: "${G.path}".`);return G}startAt(...k){(0,w.validateMinNumberOfArguments)("Query.startAt",k,1);const q=this.createImplicitOrderBy(k),G=this.createCursor(q,k,!0),$=this._queryOptions.with({fieldOrders:q,startAt:G});return new j(this._firestore,$)}startAfter(...k){(0,w.validateMinNumberOfArguments)("Query.startAfter",k,1);const q=this.createImplicitOrderBy(k),G=this.createCursor(q,k,!1),$=this._queryOptions.with({fieldOrders:q,startAt:G});return new j(this._firestore,$)}endBefore(...k){(0,w.validateMinNumberOfArguments)("Query.endBefore",k,1);const q=this.createImplicitOrderBy(k),G=this.createCursor(q,k,!0),$=this._queryOptions.with({fieldOrders:q,endAt:G});return new j(this._firestore,$)}endAt(...k){(0,w.validateMinNumberOfArguments)("Query.endAt",k,1);const q=this.createImplicitOrderBy(k),G=this.createCursor(q,k,!1),$=this._queryOptions.with({fieldOrders:q,endAt:G});return new j(this._firestore,$)}async get(){return this._firestore._traceUtil.startActiveSpan(x.SPAN_NAME_QUERY_GET,async()=>{const{result:k}=await this._get();return k})}async explain(k){k===void 0&&(k={});const{result:q,explainMetrics:G}=await this._getResponse(void 0,k);if(!G)throw new Error("No explain results");return new h.ExplainResults(G,q||null)}async _get(k){const q=await this._getResponse(k);if(!q.result)throw new Error("No QuerySnapshot result");return q}_getResponse(k,q){return this._queryUtil._getResponse(this,k,!0,q)}stream(){return this._queryUtil.stream(this)}explainStream(k){if(k===void 0&&(k={}),this._queryOptions.limitType===T.LimitType.Last)throw new Error("Query results for queries that include limitToLast() constraints cannot be streamed. Use Query.explain() instead.");const q=this._stream(void 0,k),G=new e.Transform({objectMode:!0,transform($,W,K){($.document||$.explainMetrics)&&K(void 0,{document:$.document,metrics:$.explainMetrics})}});return q.pipe(G),q.on("error",$=>G.destroy($)),G}toCursor(k){if(k)return k.before?{before:!0,values:k.values}:{values:k.values}}toProto(k,q){const G=this.firestore.projectId,$=this.firestore.databaseId,W=this._queryOptions.parentPath.toQualifiedResourcePath(G,$),K=this.toStructuredQuery();if(this._queryOptions.limitType===T.LimitType.Last){if(!this._queryOptions.hasFieldOrders())throw new Error("limitToLast() queries require specifying at least one orderBy() clause.");K.orderBy=this._queryOptions.fieldOrders.map(Q=>{const Y=Q.direction==="DESCENDING"?"ASCENDING":"DESCENDING";return new p.FieldOrder(Q.field,Y).toProto()}),K.startAt=this._queryOptions.endAt?this.toCursor({values:this._queryOptions.endAt.values,before:!this._queryOptions.endAt.before}):void 0,K.endAt=this._queryOptions.startAt?this.toCursor({values:this._queryOptions.startAt.values,before:!this._queryOptions.startAt.before}):void 0}const z={parent:W.formattedName,structuredQuery:K};return k instanceof Uint8Array?z.transaction=k:k instanceof s.Timestamp?z.readTime=k.toProto().timestampValue:k&&(z.newTransaction=k),q&&(z.explainOptions=q),z}_toBundledQuery(){const k=this.firestore.projectId,q=this.firestore.databaseId,G=this._queryOptions.parentPath.toQualifiedResourcePath(k,q),$=this.toStructuredQuery(),W={parent:G.formattedName,structuredQuery:$};return this._queryOptions.limitType===T.LimitType.First?W.limitType="FIRST":this._queryOptions.limitType===T.LimitType.Last&&(W.limitType="LAST"),W}toStructuredQuery(){const k={from:[{}]};return this._queryOptions.allDescendants&&(k.from[0].allDescendants=!0),this._queryOptions.kindless||(k.from[0].collectionId=this._queryOptions.collectionId),this._queryOptions.filters.length>=1&&(k.where=new m.CompositeFilterInternal(this._queryOptions.filters,"AND").toProto()),this._queryOptions.hasFieldOrders()&&(k.orderBy=this._queryOptions.fieldOrders.map(q=>q.toProto())),k.startAt=this.toCursor(this._queryOptions.startAt),k.endAt=this.toCursor(this._queryOptions.endAt),this._queryOptions.limit&&(k.limit={value:this._queryOptions.limit}),k.offset=this._queryOptions.offset,k.select=this._queryOptions.projection,k}_isPermanentRpcError(k,q){return this._queryUtil._isPermanentRpcError(k,q)}_hasRetryTimedOut(k,q){return this._queryUtil._hasRetryTimedOut(k,q)}_stream(k,q){return this._queryUtil._stream(this,k,!0,q)}onSnapshot(k,q){return(0,w.validateFunction)("onNext",k),(0,w.validateFunction)("onError",q,{optional:!0}),new(requireWatch()).QueryWatch(this.firestore,this,this._queryOptions.converter).onSnapshot(($,W,K,z)=>{k(new a.QuerySnapshot(this,$,W,K,z))},q||console.error)}comparator(){return(k,q)=>{const G=this._queryOptions.hasFieldOrders()?this._queryOptions.fieldOrders[this._queryOptions.fieldOrders.length-1].direction:"ASCENDING",$=this._queryOptions.fieldOrders.concat(new p.FieldOrder(s.FieldPath.documentId(),G));for(const W of $){let K;if(s.FieldPath.documentId().isEqual(W.field))K=k.ref._path.compareTo(q.ref._path);else{const z=k.protoField(W.field),Q=q.protoField(W.field);if(z===void 0||Q===void 0)throw new Error("Trying to compare documents on fields that don't exist. Please include the fields you are ordering on in your select() call.");K=(0,E.compare)(z,Q)}if(K!==0)return(W.direction==="ASCENDING"?1:-1)*K}return 0}}withConverter(k){return new j(this.firestore,this._queryOptions.withConverter(k??(0,C.defaultConverter)()))}_createSnapshot(k,q,G,$){return new a.QuerySnapshot(this,k,q,G,$)}}return query.Query=j,query}var queryOptions={},hasRequiredQueryOptions;function requireQueryOptions(){if(hasRequiredQueryOptions)return queryOptions;hasRequiredQueryOptions=1,Object.defineProperty(queryOptions,"__esModule",{value:!0}),queryOptions.QueryOptions=void 0;const e=requireFastDeepEqual(),t=requirePath(),s=requireTypes$1(),p=requireHelpers();class g{constructor(d,l,a,o,h,v,_,y,w,T,I,O,E=!1,C=!0){this.parentPath=d,this.collectionId=l,this.converter=a,this.allDescendants=o,this.filters=h,this.fieldOrders=v,this.startAt=_,this.endAt=y,this.limit=w,this.limitType=T,this.offset=I,this.projection=O,this.kindless=E,this.requireConsistency=C}static forCollectionGroupQuery(d,l=(0,s.defaultConverter)()){return new g(t.ResourcePath.EMPTY,d,l,!0,[],[])}static forCollectionQuery(d,l=(0,s.defaultConverter)()){return new g(d.parent(),d.id,l,!1,[],[])}static forKindlessAllDescendants(d,l,a=!0){let o=new g(d,l,(0,s.defaultConverter)(),!0,[],[]);return o=o.with({kindless:!0,requireConsistency:a}),o}with(d){return new g((0,p.coalesce)(d.parentPath,this.parentPath),(0,p.coalesce)(d.collectionId,this.collectionId),this.converter,(0,p.coalesce)(d.allDescendants,this.allDescendants),(0,p.coalesce)(d.filters,this.filters),(0,p.coalesce)(d.fieldOrders,this.fieldOrders),(0,p.coalesce)(d.startAt,this.startAt),(0,p.coalesce)(d.endAt,this.endAt),(0,p.coalesce)(d.limit,this.limit),(0,p.coalesce)(d.limitType,this.limitType),(0,p.coalesce)(d.offset,this.offset),(0,p.coalesce)(d.projection,this.projection),(0,p.coalesce)(d.kindless,this.kindless),(0,p.coalesce)(d.requireConsistency,this.requireConsistency))}withConverter(d){return new g(this.parentPath,this.collectionId,d,this.allDescendants,this.filters,this.fieldOrders,this.startAt,this.endAt,this.limit,this.limitType,this.offset,this.projection)}hasFieldOrders(){return this.fieldOrders.length>0}isEqual(d){return this===d?!0:d instanceof g&&this.parentPath.isEqual(d.parentPath)&&this.filtersEqual(d.filters)&&this.collectionId===d.collectionId&&this.converter===d.converter&&this.allDescendants===d.allDescendants&&this.limit===d.limit&&this.offset===d.offset&&e(this.fieldOrders,d.fieldOrders)&&e(this.startAt,d.startAt)&&e(this.endAt,d.endAt)&&e(this.projection,d.projection)&&this.kindless===d.kindless&&this.requireConsistency===d.requireConsistency}filtersEqual(d){if(this.filters.length!==d.length)return!1;for(let l=0;l<d.length;l++)if(!this.filters[l].isEqual(d[l]))return!1;return!0}}return queryOptions.QueryOptions=g,queryOptions}var hasRequiredCollectionReference;function requireCollectionReference(){if(hasRequiredCollectionReference)return collectionReference;hasRequiredCollectionReference=1,Object.defineProperty(collectionReference,"__esModule",{value:!0}),collectionReference.CollectionReference=void 0;const e=requirePath(),t=requireUtil(),s=requireWriteBatch(),p=requireTypes$1(),g=requireQuery(),m=requireDocumentReference(),d=requireQueryOptions(),l=requireTraceUtil();class a extends g.Query{constructor(h,v,_){super(h,d.QueryOptions.forCollectionQuery(v,_))}get _resourcePath(){return this._queryOptions.parentPath.append(this._queryOptions.collectionId)}get id(){return this._queryOptions.collectionId}get parent(){return this._queryOptions.parentPath.isDocument?new m.DocumentReference(this.firestore,this._queryOptions.parentPath):null}get path(){return this._resourcePath.relativeName}listDocuments(){return this._firestore._traceUtil.startActiveSpan(l.SPAN_NAME_COL_REF_LIST_DOCUMENTS,()=>{const h=(0,t.requestTag)();return this.firestore.initializeIfNeeded(h).then(()=>{const _={parent:this._queryOptions.parentPath.toQualifiedResourcePath(this.firestore.projectId,this.firestore.databaseId).formattedName,collectionId:this.id,showMissing:!0,mask:{fieldPaths:[]}};return this.firestore.request("listDocuments",_,h).then(y=>y.map(w=>{const T=e.QualifiedResourcePath.fromSlashSeparatedString(w.name);return this.doc(T.id)}))})})}doc(h){arguments.length===0?h=(0,t.autoId)():(0,e.validateResourcePath)("documentPath",h);const v=this._resourcePath.append(h);if(!v.isDocument)throw new Error(`Value for argument "documentPath" must point to a document, but was "${h}". Your path does not contain an even number of components.`);return new m.DocumentReference(this.firestore,v,this._queryOptions.converter)}add(h){return this._firestore._traceUtil.startActiveSpan(l.SPAN_NAME_COL_REF_ADD,()=>{const v=this._queryOptions.converter.toFirestore(h);(0,s.validateDocumentData)("data",v,!1,this._allowUndefined);const _=this.doc();return _.create(h).then(()=>_)})}isEqual(h){return this===h||h instanceof a&&super.isEqual(h)}withConverter(h){return new a(this.firestore,this._resourcePath,h??(0,p.defaultConverter)())}}return collectionReference.CollectionReference=a,collectionReference}var hasRequiredDocumentReference;function requireDocumentReference(){if(hasRequiredDocumentReference)return documentReference;hasRequiredDocumentReference=1,Object.defineProperty(documentReference,"__esModule",{value:!0}),documentReference.DocumentReference=void 0;const e=requireSrc(),t=requirePath(),s=requireTypes$1(),p=requireCollectionReference(),g=requireUtil(),m=requireValidate(),d=requireDocument(),l=requireTraceUtil();class a{constructor(h,v,_=(0,s.defaultConverter)()){this._firestore=h,this._path=v,this._converter=_}get formattedName(){const h=this.firestore.projectId,v=this.firestore.databaseId;return this._path.toQualifiedResourcePath(h,v).formattedName}get firestore(){return this._firestore}get path(){return this._path.relativeName}get id(){return this._path.id}get _resourcePath(){return this._path}get parent(){return new p.CollectionReference(this._firestore,this._path.parent(),this._converter)}get(){return this._firestore._traceUtil.startActiveSpan(l.SPAN_NAME_DOC_REF_GET,()=>this._firestore.getAll(this).then(([h])=>h))}collection(h){(0,t.validateResourcePath)("collectionPath",h);const v=this._path.append(h);if(!v.isCollection)throw new Error(`Value for argument "collectionPath" must point to a collection, but was "${h}". Your path does not contain an odd number of components.`);return new p.CollectionReference(this._firestore,v)}listCollections(){return this._firestore._traceUtil.startActiveSpan(l.SPAN_NAME_DOC_REF_LIST_COLLECTIONS,()=>{const h=(0,g.requestTag)();return this.firestore.initializeIfNeeded(h).then(()=>{const v={parent:this.formattedName};return this._firestore.request("listCollectionIds",v,h).then(_=>{const y=[];_.sort();for(const w of _)y.push(this.collection(w));return y})})})}create(h){return this._firestore._traceUtil.startActiveSpan(l.SPAN_NAME_DOC_REF_CREATE,()=>new e.WriteBatch(this._firestore).create(this,h).commit().then(([_])=>_))}delete(h){return this._firestore._traceUtil.startActiveSpan(l.SPAN_NAME_DOC_REF_DELETE,()=>new e.WriteBatch(this._firestore).delete(this,h).commit().then(([_])=>_))}set(h,v){return this._firestore._traceUtil.startActiveSpan(l.SPAN_NAME_DOC_REF_SET,()=>{let _=new e.WriteBatch(this._firestore);return v?_=_.set(this,h,v):_=_.set(this,h),_.commit().then(([y])=>y)})}update(h,...v){return this._firestore._traceUtil.startActiveSpan(l.SPAN_NAME_DOC_REF_UPDATE,()=>((0,m.validateMinNumberOfArguments)("DocumentReference.update",arguments,1),new e.WriteBatch(this._firestore).update(this,h,...v).commit().then(([y])=>y)))}onSnapshot(h,v){return(0,m.validateFunction)("onNext",h),(0,m.validateFunction)("onError",v,{optional:!0}),new(requireWatch()).DocumentWatch(this.firestore,this).onSnapshot((y,w,T)=>{for(const E of T())if(E.ref.path===this.path){h(E);return}const I=new a(this._firestore,this._path,this._converter),O=new d.DocumentSnapshotBuilder(I);O.readTime=y,h(O.build())},v||console.error)}isEqual(h){return this===h||h instanceof a&&this._firestore===h._firestore&&this._path.isEqual(h._path)&&this._converter===h._converter}toProto(){return{referenceValue:this.formattedName}}withConverter(h){return new a(this.firestore,this._path,h??(0,s.defaultConverter)())}}return documentReference.DocumentReference=a,documentReference}var hasRequiredDocument;function requireDocument(){if(hasRequiredDocument)return document$1;hasRequiredDocument=1;Object.defineProperty(document$1,"__esModule",{value:!0}),document$1.Precondition=document$1.DocumentTransform=document$1.DocumentMask=document$1.QueryDocumentSnapshot=document$1.DocumentSnapshot=document$1.DocumentSnapshotBuilder=void 0;const e=requireFastDeepEqual(),t=require$$1$3,s=requireFieldValue(),p=requirePath(),g=requireDocumentReference(),m=requireTypes$1(),d=requireUtil();class l{constructor(w){this.ref=w}build(){return t(this.fieldsProto!==void 0==(this.createTime!==void 0),"Create time should be set iff document exists."),t(this.fieldsProto!==void 0==(this.updateTime!==void 0),"Update time should be set iff document exists."),this.fieldsProto?new o(this.ref,this.fieldsProto,this.readTime,this.createTime,this.updateTime):new a(this.ref,void 0,this.readTime)}}document$1.DocumentSnapshotBuilder=l;class a{constructor(w,T,I,O,E){this._fieldsProto=T,this._ref=w,this._serializer=w.firestore._serializer,this._readTime=I,this._createTime=O,this._updateTime=E}static fromObject(w,T){const I=w.firestore._serializer;return new a(w,I.encodeFields(T))}static fromUpdateMap(w,T){const I=w.firestore._serializer;function O(C,x,j,D){const k=j[D],q=D===j.length-1;if(C[k]===void 0)if(q){if(x instanceof s.FieldTransform)return(0,d.isEmpty)(C)?null:C;const G=I.encodeValue(x);return G&&(C[k]=G),C}else{const G={mapValue:{fields:{}}},$=O(G.mapValue.fields,x,j,D+1);return $?(G.mapValue.fields=$,C[k]=G,C):(0,d.isEmpty)(C)?null:C}else return t(!q,"Can't merge current value into a nested object"),C[k].mapValue.fields=O(C[k].mapValue.fields,x,j,D+1),C}const E={};for(const[C,x]of T){const j=C.toArray();O(E,x,j,0)}return new a(w,E)}get exists(){return this._fieldsProto!==void 0}get ref(){return this._ref}get id(){return this._ref.id}get createTime(){return this._createTime}get updateTime(){return this._updateTime}get readTime(){if(this._readTime===void 0)throw new Error("Called 'readTime' on a local document");return this._readTime}data(){const w=this._fieldsProto;if(w!==void 0)if(this.ref._converter!==(0,m.defaultConverter)()){const T=new g.DocumentReference(this.ref.firestore,this.ref._path);return this.ref._converter.fromFirestore(new o(T,this._fieldsProto,this.readTime,this.createTime,this.updateTime))}else{const T={};for(const I of Object.keys(w))T[I]=this._serializer.decodeValue(w[I]);return T}}get(w){(0,p.validateFieldPath)("field",w);const T=this.protoField(w);if(T!==void 0)return this._serializer.decodeValue(T)}protoField(w){let T=this._fieldsProto;if(T===void 0)return;const I=p.FieldPath.fromArgument(w).toArray();for(;I.length>1;){if(T=T[I.shift()],!T||!T.mapValue)return;T=T.mapValue.fields}return T[I[0]]}toWriteProto(){return{update:{name:this._ref.formattedName,fields:this._fieldsProto}}}toDocumentProto(){var w,T;return{name:this._ref.formattedName,createTime:(w=this.createTime)===null||w===void 0?void 0:w.toProto().timestampValue,updateTime:(T=this.updateTime)===null||T===void 0?void 0:T.toProto().timestampValue,fields:this._fieldsProto}}isEqual(w){return this===w||w instanceof a&&this._ref.isEqual(w._ref)&&e(this._fieldsProto,w._fieldsProto)}}document$1.DocumentSnapshot=a;class o extends a{get createTime(){return super.createTime}get updateTime(){return super.updateTime}data(){const w=super.data();if(!w)throw new Error("The data in a QueryDocumentSnapshot should always exist.");return w}}document$1.QueryDocumentSnapshot=o;class h{constructor(w){this._sortedPaths=w,this._sortedPaths.sort((T,I)=>T.compareTo(I))}static fromUpdateMap(w){const T=[];return w.forEach((I,O)=>{(!(I instanceof s.FieldTransform)||I.includeInDocumentMask)&&T.push(p.FieldPath.fromArgument(O))}),new h(T)}static fromFieldMask(w){const T=[];for(const I of w)T.push(p.FieldPath.fromArgument(I));return new h(T)}static fromObject(w){const T=[];function I(O,E){let C=!0;for(const x of Object.keys(O)){C=!1;const j=new p.FieldPath(x),D=E?E.append(j):j,k=O[x];k instanceof s.FieldTransform?k.includeInDocumentMask&&T.push(D):(0,d.isPlainObject)(k)?I(k,D):k!==void 0&&T.push(D)}E&&C&&T.push(E)}return I(w),new h(T)}get isEmpty(){return this._sortedPaths.length===0}static removeFromSortedArray(w,T){for(let I=0;I<w.length;){let O=!1;for(const E of T)if(w[I].isEqual(E)){w.splice(I,1),O=!0;break}O||++I}}removeFields(w){h.removeFromSortedArray(this._sortedPaths,w)}contains(w){for(const T of this._sortedPaths){const I=T.compareTo(w);if(I===0)return!0;if(I>0)return!1}return!1}applyTo(w){const I=(O=>{const E=this._sortedPaths.slice(0),C=(j,D)=>{let k=null;return Object.keys(j).forEach(q=>{const G=D?D.append(q):new p.FieldPath(q);if(this.contains(G))h.removeFromSortedArray(E,[G]),k=k||{},k[q]=j[q];else if((0,d.isObject)(j[q])){const $=C(j[q],G);$&&(k=k||{},k[q]=$)}}),k};return{filteredData:C(O)||{},remainingPaths:E}})(w);if(I.remainingPaths.length!==0)throw new Error(`Input data is missing for field "${I.remainingPaths[0]}".`);return I.filteredData}toProto(){if(this.isEmpty)return{};const w=[];for(const T of this._sortedPaths)w.push(T.formattedName);return{fieldPaths:w}}}document$1.DocumentMask=h;class v{constructor(w,T){this.ref=w,this.transforms=T}static fromObject(w,T){const I=new Map;for(const O of Object.keys(T))I.set(new p.FieldPath(O),T[O]);return v.fromUpdateMap(w,I)}static fromUpdateMap(w,T){const I=new Map;function O(E,C,x){if(E instanceof s.FieldTransform&&E.includeInDocumentTransform)if(x)I.set(C,E);else throw new Error(`${E.methodName}() is not supported inside of array values.`);else if(Array.isArray(E))for(let j=0;j<E.length;++j)O(E[j],C.append(String(j)),!1);else if((0,d.isPlainObject)(E))for(const j of Object.keys(E))O(E[j],C.append(new p.FieldPath(j)),x)}return T.forEach((E,C)=>{O(E,p.FieldPath.fromArgument(C),!0)}),new v(w,I)}get isEmpty(){return this.transforms.size===0}get fields(){return Array.from(this.transforms.keys())}validate(){const w=!!this.ref.firestore._settings.ignoreUndefinedProperties;this.transforms.forEach(T=>T.validate(w))}toProto(w){return Array.from(this.transforms,([T,I])=>I.toProto(w,T))}}document$1.DocumentTransform=v;class _{constructor(w){w!==void 0&&(this._exists=w.exists,this._lastUpdateTime=w.lastUpdateTime)}toProto(){if(this.isEmpty)return null;const w={};return this._lastUpdateTime!==void 0?w.updateTime=this._lastUpdateTime.toProto().timestampValue:w.exists=this._exists,w}get isEmpty(){return this._exists===void 0&&!this._lastUpdateTime}}return document$1.Precondition=_,document$1}var hasRequiredWriteBatch;function requireWriteBatch(){if(hasRequiredWriteBatch)return writeBatch;hasRequiredWriteBatch=1;Object.defineProperty(writeBatch,"__esModule",{value:!0}),writeBatch.WriteBatch=writeBatch.WriteResult=void 0,writeBatch.validateSetOptions=w,writeBatch.validateDocumentData=T,writeBatch.validateFieldValue=I;const e=requireDocument(),t=requireLogger(),s=requirePath(),p=requireHelpers(),g=requireSerializer(),m=requireTimestamp(),d=requireUtil(),l=requireValidate(),a=requireTraceUtil();class o{constructor(x){this._writeTime=x}get writeTime(){return this._writeTime}isEqual(x){return this===x||x instanceof o&&this._writeTime.isEqual(x._writeTime)}}writeBatch.WriteResult=o;class h{get _opCount(){return this._ops.length}constructor(x){this._ops=[],this._committed=!1,this._firestore=x,this._serializer=new g.Serializer(x),this._allowUndefined=!!x._settings.ignoreUndefinedProperties}get isEmpty(){return this._ops.length===0}verifyNotCommitted(){if(this._committed)throw new Error("Cannot modify a WriteBatch that has been committed.")}create(x,j){const D=(0,p.validateDocumentReference)("documentRef",x),k=D._converter.toFirestore(j);T("data",k,!1,this._allowUndefined),this.verifyNotCommitted();const q=e.DocumentTransform.fromObject(D,k);q.validate();const G=new e.Precondition({exists:!1}),$=()=>{const K=e.DocumentSnapshot.fromObject(D,k).toWriteProto();return q.isEmpty||(K.updateTransforms=q.toProto(this._serializer)),K.currentDocument=G.toProto(),K};return this._ops.push({docPath:x.path,op:$}),this}delete(x,j){const D=(0,p.validateDocumentReference)("documentRef",x);y("precondition",j,{optional:!0}),this.verifyNotCommitted();const k=new e.Precondition(j),q=()=>{const G={delete:D.formattedName};return k.isEmpty||(G.currentDocument=k.toProto()),G};return this._ops.push({docPath:x.path,op:q}),this}set(x,j,D){w("options",D,{optional:!0});const k=D&&"merge"in D&&D.merge,q=D&&"mergeFields"in D,G=(0,p.validateDocumentReference)("documentRef",x);let $;k||q?$=G._converter.toFirestore(j,D):$=G._converter.toFirestore(j),T("data",$,!!(q||k),this._allowUndefined),this.verifyNotCommitted();let W;q&&(W=e.DocumentMask.fromFieldMask(D.mergeFields),$=W.applyTo($));const K=e.DocumentTransform.fromObject(G,$);K.validate();const z=()=>{const Q=e.DocumentSnapshot.fromObject(G,$);q?W.removeFields(K.fields):k&&(W=e.DocumentMask.fromObject($));const Y=Q.toWriteProto();return K.isEmpty||(Y.updateTransforms=K.toProto(this._serializer)),(q||k)&&(Y.updateMask=W.toProto()),Y};return this._ops.push({docPath:x.path,op:z}),this}update(x,j,...D){(0,l.validateMinNumberOfArguments)("WriteBatch.update",arguments,2),(0,p.validateDocumentReference)("documentRef",x),this.verifyNotCommitted();const k=new Map;let q=new e.Precondition({exists:!0});const G="Update() requires either a single JavaScript object or an alternating list of field/value pairs that can be followed by an optional precondition.";if(typeof j=="string"||j instanceof s.FieldPath){const Y=[j,...D];try{for(let te=0;te<Y.length;te+=2)if(te===Y.length-1){const ae=Y[te];_(te+1,ae),q=new e.Precondition(ae)}else{const ae=Y[te];(0,s.validateFieldPath)(te+1,ae),(0,l.validateMinNumberOfArguments)("update",Y,te+1);const ue=s.FieldPath.fromArgument(ae);I(te+1,Y[te+1],this._allowUndefined,ue),k.set(ue,Y[te+1])}}catch(te){throw(0,t.logger)("WriteBatch.update",null,"Varargs validation failed:",te),new Error(`${G} ${te.message}`)}}else try{E("dataOrField",j,this._allowUndefined),(0,l.validateMaxNumberOfArguments)("update",arguments,3),Object.entries(j).forEach(([Q,Y])=>{Y!==void 0&&((0,s.validateFieldPath)(Q,Q),k.set(s.FieldPath.fromArgument(Q),Y))}),D.length>0&&(_("preconditionOrValues",D[0]),q=new e.Precondition(D[0]))}catch(Q){throw(0,t.logger)("WriteBatch.update",null,"Non-varargs validation failed:",Q),new Error(`${G} ${Q.message}`)}O("dataOrField",k);const W=e.DocumentTransform.fromUpdateMap(x,k);W.validate();const K=e.DocumentMask.fromUpdateMap(k),z=()=>{const Y=e.DocumentSnapshot.fromUpdateMap(x,k).toWriteProto();return Y.updateMask=K.toProto(),W.isEmpty||(Y.updateTransforms=W.toProto(this._serializer)),Y.currentDocument=q.toProto(),Y};return this._ops.push({docPath:x.path,op:z}),this}commit(){return this._firestore._traceUtil.startActiveSpan(a.SPAN_NAME_BATCH_COMMIT,async()=>{const x=Error().stack,j=[10,...(0,d.getRetryCodes)("commit")];return this._commit({retryCodes:j}).then(D=>(D.writeResults||[]).map(k=>new o(m.Timestamp.fromProto(k.updateTime||D.commitTime)))).catch(D=>{throw(0,d.wrapError)(D,x)})},{[a.ATTRIBUTE_KEY_IS_TRANSACTIONAL]:!1,[a.ATTRIBUTE_KEY_DOC_COUNT]:this._opCount})}async _commit(x){var j;this._committed=!0;const D=(j=x?.requestTag)!==null&&j!==void 0?j:(0,d.requestTag)();await this._firestore.initializeIfNeeded(D);const k={database:this._firestore.formattedName,writes:this._ops.map(q=>q.op())};return x?.transactionId&&(k.transaction=x.transactionId),(0,t.logger)("WriteBatch.commit",D,"Sending %d writes",k.writes.length),this._firestore.request(x?.methodName||"commit",k,D,x?.retryCodes)}_reset(){this._ops.splice(0),this._committed=!1}}writeBatch.WriteBatch=h;function v(C,x,j){if(typeof x!="object"||x===null)throw new Error("Input is not an object.");const D=x;let k=0;if(D.exists!==void 0){if(++k,typeof D.exists!="boolean")throw new Error(`${(0,l.invalidArgumentMessage)(C,"precondition")} "exists" is not a boolean.'`);if(j?.allowedExistsValues&&j.allowedExistsValues.indexOf(D.exists)<0)throw new Error(`${(0,l.invalidArgumentMessage)(C,"precondition")} "exists" is not allowed to have the value ${D.exists} (allowed values: ${j.allowedExistsValues.join(", ")})`)}if(D.lastUpdateTime!==void 0&&(++k,!(D.lastUpdateTime instanceof m.Timestamp)))throw new Error(`${(0,l.invalidArgumentMessage)(C,"precondition")} "lastUpdateTime" is not a Firestore Timestamp.`);if(k>1)throw new Error(`${(0,l.invalidArgumentMessage)(C,"precondition")} Input specifies more than one precondition.`)}function _(C,x,j){(0,l.validateOptional)(x,j)||v(C,x,{allowedExistsValues:[!0]})}function y(C,x,j){(0,l.validateOptional)(x,j)||v(C,x)}function w(C,x,j){if(!(0,l.validateOptional)(x,j)){if(!(0,d.isObject)(x))throw new Error(`${(0,l.invalidArgumentMessage)(C,"set() options argument")} Input is not an object.`);const D=x;if("mergeFields"in D)for(let k=0;k<D.mergeFields.length;++k)try{(0,s.validateFieldPath)(k,D.mergeFields[k])}catch(q){throw new Error(`${(0,l.invalidArgumentMessage)(C,"set() options argument")} "mergeFields" is not valid: ${q.message}`)}if("merge"in D&&"mergeFields"in D)throw new Error(`${(0,l.invalidArgumentMessage)(C,"set() options argument")} You cannot specify both "merge" and "mergeFields".`)}}function T(C,x,j,D){if(!(0,d.isPlainObject)(x))throw new Error((0,l.customObjectMessage)(C,x));(0,g.validateUserInput)(C,x,"Firestore document",{allowDeletes:j?"all":"none",allowTransforms:!0,allowUndefined:D})}function I(C,x,j,D){(0,g.validateUserInput)(C,x,"Firestore value",{allowDeletes:"root",allowTransforms:!0,allowUndefined:j},D)}function O(C,x){const j=[];x.forEach((D,k)=>{j.push(k)}),j.sort((D,k)=>D.compareTo(k));for(let D=1;D<j.length;++D)if(j[D-1].isPrefixOf(j[D]))throw new Error(`${(0,l.invalidArgumentMessage)(C,"update map")} Field "${j[D-1]}" was specified multiple times.`)}function E(C,x,j){if(!(0,d.isPlainObject)(x))throw new Error((0,l.customObjectMessage)(C,x));if(Object.keys(x).length===0)throw new Error("At least one field must be updated.");I(C,x,j)}return writeBatch}var hasRequiredBulkWriter;function requireBulkWriter(){return hasRequiredBulkWriter||(hasRequiredBulkWriter=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.BulkWriter=e.BulkWriterError=e.DEFAULT_JITTER_FACTOR=e.DEFAULT_MAXIMUM_OPS_PER_SECOND_LIMIT=e.DEFAULT_INITIAL_OPS_PER_SECOND_LIMIT=e.RETRY_MAX_BATCH_SIZE=void 0;const t=require$$1$3,s=requireBackoff(),p=requireRateLimiter(),g=requireTimestamp(),m=requireUtil(),d=requireWriteBatch(),l=requireValidate(),a=requireLogger(),o=requireTraceUtil();const h=20;e.RETRY_MAX_BATCH_SIZE=10;e.DEFAULT_INITIAL_OPS_PER_SECOND_LIMIT=500;e.DEFAULT_MAXIMUM_OPS_PER_SECOND_LIMIT=1e4;e.DEFAULT_JITTER_FACTOR=.3;const v=1.5;const _=300*1e3;const y=500;class w{constructor(j,D,k,q,G){this.ref=j,this.type=D,this.sendFn=k,this.errorFn=q,this.successFn=G,this.deferred=new m.Deferred,this.failedAttempts=0,this._backoffDuration=0,this._flushed=!1}get promise(){return this.deferred.promise}get backoffDuration(){return this._backoffDuration}markFlushed(){this._flushed=!0}get flushed(){return this._flushed}onError(j){++this.failedAttempts;try{const D=new O(j.code,j.message,this.ref,this.type,this.failedAttempts),k=this.errorFn(D);(0,a.logger)("BulkWriter.errorFn",null,"Ran error callback on error code:",j.code,", shouldRetry:",k," for document:",this.ref.path),k?(this.lastStatus=j.code,this.updateBackoffDuration(),this.sendFn(this)):this.deferred.reject(D)}catch(D){this.deferred.reject(D)}}updateBackoffDuration(){this.lastStatus===8?this._backoffDuration=s.DEFAULT_BACKOFF_MAX_DELAY_MS:this._backoffDuration===0?this._backoffDuration=s.DEFAULT_BACKOFF_INITIAL_DELAY_MS:this._backoffDuration*=s.DEFAULT_BACKOFF_FACTOR}onSuccess(j){try{this.successFn(this.ref,j),this.deferred.resolve(j)}catch(D){this.deferred.reject(D)}}}class T extends d.WriteBatch{constructor(j,D){super(j),this.docPaths=new Set,this.pendingOps=[],this._maxBatchSize=D}get maxBatchSize(){return this._maxBatchSize}setMaxBatchSize(j){t(this.pendingOps.length<=j,"New batch size cannot be less than the number of enqueued writes"),this._maxBatchSize=j}has(j){return this.docPaths.has(j.path)}async bulkCommit(j={}){return this._firestore._traceUtil.startActiveSpan(o.SPAN_NAME_BULK_WRITER_COMMIT,async()=>{var D;const k=(D=j?.requestTag)!==null&&D!==void 0?D:(0,m.requestTag)(),q=Error().stack;let G;try{(0,a.logger)("BulkCommitBatch.bulkCommit",k,`Sending next batch with ${this._opCount} writes`);const $=(0,m.getRetryCodes)("batchWrite");G=await this._commit({retryCodes:$,methodName:"batchWrite",requestTag:k})}catch($){const W=Array.from({length:this.pendingOps.length});G={writeResults:W.map(()=>({})),status:W.map(()=>$)}}for(let $=0;$<(G.writeResults||[]).length;++$){const W=g.Timestamp.fromMillis(0),K=(G.status||[])[$];if(K.code===0){const z=g.Timestamp.fromProto(G.writeResults[$].updateTime||W);this.pendingOps[$].onSuccess(new d.WriteResult(z))}else{const z=new(requireFallback()).GoogleError(K.message||void 0);z.code=K.code,this.pendingOps[$].onError((0,m.wrapError)(z,q))}}},{[o.ATTRIBUTE_KEY_DOC_COUNT]:this._opCount})}processLastOperation(j){t(!this.docPaths.has(j.ref.path),"Batch should not contain writes to the same document"),this.docPaths.add(j.ref.path),this.pendingOps.push(j)}}class I{constructor(j,D){this.operation=j,this.sendFn=D}}class O extends Error{constructor(j,D,k,q,G){super(D),this.code=j,this.message=D,this.documentRef=k,this.operationType=q,this.failedAttempts=G}}e.BulkWriterError=O;class E{_getBufferedOperationsCount(){return this._bufferedOperations.length}_setMaxBatchSize(j){t(this._bulkCommitBatch.pendingOps.length===0,"BulkCommitBatch should be empty"),this._maxBatchSize=j,this._bulkCommitBatch=new T(this.firestore,j)}_setMaxPendingOpCount(j){this._maxPendingOpCount=j}constructor(j,D){var k,q;if(this.firestore=j,this._maxBatchSize=h,this._bulkCommitBatch=new T(this.firestore,this._maxBatchSize),this._lastOp=Promise.resolve(),this._pendingOpsCount=0,this._bufferedOperations=[],this._errorHandlerSet=!1,this._maxPendingOpCount=y,this._successFn=()=>{},this._errorFn=G=>{const $=G.operationType==="delete"&&G.code===13;return((0,m.getRetryCodes)("batchWrite").includes(G.code)||$)&&G.failedAttempts<s.MAX_RETRY_ATTEMPTS},this.firestore._incrementBulkWritersCount(),C(D),D?.throttling===!1)this._rateLimiter=new p.RateLimiter(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);else{let G=e.DEFAULT_INITIAL_OPS_PER_SECOND_LIMIT,$=e.DEFAULT_MAXIMUM_OPS_PER_SECOND_LIMIT;typeof D?.throttling!="boolean"&&(((k=D?.throttling)===null||k===void 0?void 0:k.maxOpsPerSecond)!==void 0&&($=D.throttling.maxOpsPerSecond),((q=D?.throttling)===null||q===void 0?void 0:q.initialOpsPerSecond)!==void 0&&(G=D.throttling.initialOpsPerSecond),$<G&&(G=$),G<this._maxBatchSize&&(this._maxBatchSize=G)),this._rateLimiter=new p.RateLimiter(G,v,_,$)}}create(j,D){return this._verifyNotClosed(),this._enqueue(j,"create",k=>k.create(j,D))}delete(j,D){return this._verifyNotClosed(),this._enqueue(j,"delete",k=>k.delete(j,D))}set(j,D,k){return this._verifyNotClosed(),this._enqueue(j,"set",q=>k?q.set(j,D,k):q.set(j,D))}update(j,D,...k){return this._verifyNotClosed(),this._enqueue(j,"update",q=>q.update(j,D,...k))}onWriteResult(j){this._successFn=j}onWriteError(j){this._errorHandlerSet=!0,this._errorFn=j}flush(){return this._verifyNotClosed(),this._scheduleCurrentBatch(!0),this._bufferedOperations.length>0&&this._bufferedOperations[this._bufferedOperations.length-1].operation.markFlushed(),this._lastOp}close(){return this._closePromise||(this._closePromise=this.flush(),this.firestore._decrementBulkWritersCount()),this._closePromise}_verifyNotClosed(){if(this._closePromise)throw new Error("BulkWriter has already been closed.")}_scheduleCurrentBatch(j=!1){if(this._bulkCommitBatch._opCount===0)return;const D=this._bulkCommitBatch;this._bulkCommitBatch=new T(this.firestore,this._maxBatchSize);const k=D.pendingOps.reduce(($,W)=>$.backoffDuration>W.backoffDuration?$:W).backoffDuration,q=E._applyJitter(k),G=new m.Deferred;q>0?(0,s.delayExecution)(()=>G.resolve(),q):G.resolve(),G.promise.then(()=>this._sendBatch(D,j))}async _sendBatch(j,D=!1){const k=(0,m.requestTag)();if(this._rateLimiter.tryMakeRequest(j._opCount))await j.bulkCommit({requestTag:k}),D&&this._scheduleCurrentBatch(D);else{const G=this._rateLimiter.getNextRequestDelayMs(j._opCount);(0,a.logger)("BulkWriter._sendBatch",k,`Backing off for ${G} seconds`),(0,s.delayExecution)(()=>this._sendBatch(j,D),G)}}static _applyJitter(j){if(j===0)return 0;const D=e.DEFAULT_JITTER_FACTOR*(Math.random()*2-1);return Math.min(s.DEFAULT_BACKOFF_MAX_DELAY_MS,j+D*j)}_enqueue(j,D,k){const q=new w(j,D,this._sendFn.bind(this,k),this._errorFn.bind(this),this._successFn.bind(this)),G=q.promise.catch($=>{if(this._errorHandlerSet)return q.promise;throw $});return this._lastOp=this._lastOp.then(()=>(0,m.silencePromise)(G)),this._pendingOpsCount<this._maxPendingOpCount?(this._pendingOpsCount++,this._sendFn(k,q)):this._bufferedOperations.push(new I(q,()=>{this._pendingOpsCount++,this._sendFn(k,q)})),G.then($=>(this._pendingOpsCount--,this._processBufferedOps(),$)).catch($=>{throw this._pendingOpsCount--,this._processBufferedOps(),$})}_processBufferedOps(){this._pendingOpsCount<this._maxPendingOpCount&&this._bufferedOperations.length>0&&this._bufferedOperations.shift().sendFn()}_sendFn(j,D){D.backoffDuration>0&&(this._bulkCommitBatch.pendingOps.length>=e.RETRY_MAX_BATCH_SIZE&&this._scheduleCurrentBatch(!1),this._bulkCommitBatch.setMaxBatchSize(e.RETRY_MAX_BATCH_SIZE)),this._bulkCommitBatch.has(D.ref)&&this._scheduleCurrentBatch(),j(this._bulkCommitBatch),this._bulkCommitBatch.processLastOperation(D),this._bulkCommitBatch._opCount===this._bulkCommitBatch.maxBatchSize?this._scheduleCurrentBatch():D.flushed&&this._scheduleCurrentBatch(!0)}}e.BulkWriter=E;function C(x){if((0,l.validateOptional)(x,{optional:!0}))return;const j="options";if(!(0,m.isObject)(x))throw new Error(`${(0,l.invalidArgumentMessage)(j,"bulkWriter() options argument")} Input is not an object.`);const D=x;if(!(D.throttling===void 0||typeof D.throttling=="boolean")&&(D.throttling.initialOpsPerSecond!==void 0&&(0,l.validateInteger)("initialOpsPerSecond",D.throttling.initialOpsPerSecond,{minValue:1}),D.throttling.maxOpsPerSecond!==void 0&&((0,l.validateInteger)("maxOpsPerSecond",D.throttling.maxOpsPerSecond,{minValue:1}),D.throttling.initialOpsPerSecond!==void 0&&D.throttling.initialOpsPerSecond>D.throttling.maxOpsPerSecond)))throw new Error(`${(0,l.invalidArgumentMessage)(j,"bulkWriter() options argument")} "maxOpsPerSecond" cannot be less than "initialOpsPerSecond".`)}})(bulkWriter)),bulkWriter}var bundle={},firestore_v1_proto_api={exports:{}},hasRequiredFirestore_v1_proto_api;function requireFirestore_v1_proto_api(){return hasRequiredFirestore_v1_proto_api||(hasRequiredFirestore_v1_proto_api=1,(function(e){(t=>{typeof commonjsRequire=="function"&&e&&e.exports&&(e.exports=t(requireMinimal()))})(function(t){var s,p,g,m,d,l=t.util,a=t.roots.firestore_v1||(t.roots.firestore_v1={});function o(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function h(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function v(r){if(this.queries=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function _(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function y(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function w(r){if(this.aggregateFields={},r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function T(r){if(this.fields={},r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function I(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function O(r){if(this.values=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function E(r){if(this.fields={},r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function C(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function x(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function j(r){if(this.fieldPaths=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function D(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function k(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function q(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function G(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function $(r,b,S){t.rpc.Service.call(this,r,b,S)}function W(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function K(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function z(r){if(this.documents=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Q(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Y(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function te(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function ae(r){if(this.documents=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function ue(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function ee(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function oe(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function de(r){if(this.writes=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function he(r){if(this.writeResults=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Ee(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function fe(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Se(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function be(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Oe(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function ge(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function J(r){if(this.partitions=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function c(r){if(this.writes=[],this.labels={},r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function N(r){if(this.writeResults=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function A(r){if(this.labels={},r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function V(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function ne(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function ce(r){if(this.documents=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function ie(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function u(r){if(this.targetIds=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function P(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function M(r){if(this.collectionIds=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function n(r){if(this.writes=[],this.labels={},r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function L(r){if(this.writeResults=[],this.status=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function U(r){if(this.from=[],this.orderBy=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function X(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function me(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Ie(r){if(this.filters=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Le(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function ke(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function ze(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function nt(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function bt(r){if(this.fields=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function dt(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Et(r){if(this.aggregations=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function lt(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Be(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Me(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Ve(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Je(r){if(this.values=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Qe(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function st(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function gt(r){if(this.indexesUsed=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function St(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function mt(r){if(this.updateTransforms=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function zt(r){if(this.fieldTransforms=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Yt(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Tt(r){if(this.transformResults=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function qt(r){if(this.targetIds=[],this.removedTargetIds=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Ut(r){if(this.removedTargetIds=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Rt(r){if(this.removedTargetIds=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Ft(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Nt(r){if(this.rules=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function yt(r){if(this.additionalBindings=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Mt(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function jt(r){if(this.destinations=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Ot(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function vt(r){if(this.methodSettings=[],this.codeownerGithubTeams=[],this.librarySettings=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function wt(r){if(this.serviceClassNames={},r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Lt(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Pe(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Ce(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Ne(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function He(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function je(r){if(this.renamedServices={},this.renamedResources={},this.ignoredResources=[],this.forcedNamespaceAliases=[],this.handwrittenSignatures=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function ot(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function ct(r){if(this.renamedServices={},r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Ct(r){if(this.autoPopulatedFields=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Qt(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Ht(r){if(this.methods=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Dt(r){if(this.pattern=[],this.style=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function _t(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function pt(r){if(this.file=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function kt(r){if(this.dependency=[],this.publicDependency=[],this.weakDependency=[],this.messageType=[],this.enumType=[],this.service=[],this.extension=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Gt(r){if(this.field=[],this.extension=[],this.nestedType=[],this.enumType=[],this.extensionRange=[],this.oneofDecl=[],this.reservedRange=[],this.reservedName=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function wr(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function rr(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function yr(r){if(this.uninterpretedOption=[],this.declaration=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Zt(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Xt(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Nr(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function ye(r){if(this.value=[],this.reservedRange=[],this.reservedName=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function _e(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Te(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function De(r){if(this.method=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function $e(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Ge(r){if(this.uninterpretedOption=[],this[".google.api.resourceDefinition"]=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Ze(r){if(this.uninterpretedOption=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Ye(r){if(this.targets=[],this.editionDefaults=[],this.uninterpretedOption=[],this[".google.api.fieldBehavior"]=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function At(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Kt(r){if(this.uninterpretedOption=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function er(r){if(this.uninterpretedOption=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function nr(r){if(this.uninterpretedOption=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function ur(r){if(this.uninterpretedOption=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function mr(r){if(this.uninterpretedOption=[],this[".google.api.methodSignature"]=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Wt(r){if(this.name=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function hr(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function tr(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function ar(r){if(this.defaults=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function vr(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Jr(r){if(this.location=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function _r(r){if(this.path=[],this.span=[],this.leadingDetachedComments=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function an(r){if(this.annotation=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function jr(r){if(this.path=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function fn(r){if(this.fields={},r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function xr(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function hn(r){if(this.values=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Dr(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function zr(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function br(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function sn(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Yr(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function gn(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Lr(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Ur(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function mn(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Qr(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Xr(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function yn(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function qr(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Br(r){if(this.paths=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Hr(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Fr(r){if(this.details=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Zr(r,b,S){t.rpc.Service.call(this,r,b,S)}function Ae(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Fe(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function We(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function at(r){if(this.operations=[],r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function ir(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function cr(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function Er(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}function pr(r){if(r)for(var b=Object.keys(r),S=0;S<b.length;++S)r[b[S]]!=null&&(this[b[S]]=r[b[S]])}return a.firestore=((g={}).BundledQuery=(o.prototype.parent="",o.prototype.structuredQuery=null,o.prototype.limitType=0,Object.defineProperty(o.prototype,"queryType",{get:l.oneOfGetter(p=["structuredQuery"]),set:l.oneOfSetter(p)}),o.fromObject=function(r){if(r instanceof a.firestore.BundledQuery)return r;var b=new a.firestore.BundledQuery;if(r.parent!=null&&(b.parent=String(r.parent)),r.structuredQuery!=null){if(typeof r.structuredQuery!="object")throw TypeError(".firestore.BundledQuery.structuredQuery: object expected");b.structuredQuery=a.google.firestore.v1.StructuredQuery.fromObject(r.structuredQuery)}switch(r.limitType){default:typeof r.limitType=="number"&&(b.limitType=r.limitType);break;case"FIRST":case 0:b.limitType=0;break;case"LAST":case 1:b.limitType=1}return b},o.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.parent="",S.limitType=b.enums===String?"FIRST":0),r.parent!=null&&r.hasOwnProperty("parent")&&(S.parent=r.parent),r.structuredQuery!=null&&r.hasOwnProperty("structuredQuery")&&(S.structuredQuery=a.google.firestore.v1.StructuredQuery.toObject(r.structuredQuery,b),b.oneofs)&&(S.queryType="structuredQuery"),r.limitType!=null&&r.hasOwnProperty("limitType")&&(S.limitType=b.enums!==String||a.firestore.BundledQuery.LimitType[r.limitType]===void 0?r.limitType:a.firestore.BundledQuery.LimitType[r.limitType]),S},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/firestore.BundledQuery"},o.LimitType=(p={},(d=Object.create(p))[p[0]="FIRST"]="FIRST",d[p[1]="LAST"]="LAST",d),o),g.NamedQuery=(h.prototype.name="",h.prototype.bundledQuery=null,h.prototype.readTime=null,h.fromObject=function(r){if(r instanceof a.firestore.NamedQuery)return r;var b=new a.firestore.NamedQuery;if(r.name!=null&&(b.name=String(r.name)),r.bundledQuery!=null){if(typeof r.bundledQuery!="object")throw TypeError(".firestore.NamedQuery.bundledQuery: object expected");b.bundledQuery=a.firestore.BundledQuery.fromObject(r.bundledQuery)}if(r.readTime!=null){if(typeof r.readTime!="object")throw TypeError(".firestore.NamedQuery.readTime: object expected");b.readTime=a.google.protobuf.Timestamp.fromObject(r.readTime)}return b},h.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.name="",S.bundledQuery=null,S.readTime=null),r.name!=null&&r.hasOwnProperty("name")&&(S.name=r.name),r.bundledQuery!=null&&r.hasOwnProperty("bundledQuery")&&(S.bundledQuery=a.firestore.BundledQuery.toObject(r.bundledQuery,b)),r.readTime!=null&&r.hasOwnProperty("readTime")&&(S.readTime=a.google.protobuf.Timestamp.toObject(r.readTime,b)),S},h.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},h.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/firestore.NamedQuery"},h),g.BundledDocumentMetadata=(v.prototype.name="",v.prototype.readTime=null,v.prototype.exists=!1,v.prototype.queries=l.emptyArray,v.fromObject=function(r){if(r instanceof a.firestore.BundledDocumentMetadata)return r;var b=new a.firestore.BundledDocumentMetadata;if(r.name!=null&&(b.name=String(r.name)),r.readTime!=null){if(typeof r.readTime!="object")throw TypeError(".firestore.BundledDocumentMetadata.readTime: object expected");b.readTime=a.google.protobuf.Timestamp.fromObject(r.readTime)}if(r.exists!=null&&(b.exists=!!r.exists),r.queries){if(!Array.isArray(r.queries))throw TypeError(".firestore.BundledDocumentMetadata.queries: array expected");b.queries=[];for(var S=0;S<r.queries.length;++S)b.queries[S]=String(r.queries[S])}return b},v.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.queries=[]),b.defaults&&(S.name="",S.readTime=null,S.exists=!1),r.name!=null&&r.hasOwnProperty("name")&&(S.name=r.name),r.readTime!=null&&r.hasOwnProperty("readTime")&&(S.readTime=a.google.protobuf.Timestamp.toObject(r.readTime,b)),r.exists!=null&&r.hasOwnProperty("exists")&&(S.exists=r.exists),r.queries&&r.queries.length){S.queries=[];for(var le=0;le<r.queries.length;++le)S.queries[le]=r.queries[le]}return S},v.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},v.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/firestore.BundledDocumentMetadata"},v),g.BundleMetadata=(_.prototype.id="",_.prototype.createTime=null,_.prototype.version=0,_.prototype.totalDocuments=0,_.prototype.totalBytes=l.Long?l.Long.fromBits(0,0,!0):0,_.fromObject=function(r){if(r instanceof a.firestore.BundleMetadata)return r;var b=new a.firestore.BundleMetadata;if(r.id!=null&&(b.id=String(r.id)),r.createTime!=null){if(typeof r.createTime!="object")throw TypeError(".firestore.BundleMetadata.createTime: object expected");b.createTime=a.google.protobuf.Timestamp.fromObject(r.createTime)}return r.version!=null&&(b.version=r.version>>>0),r.totalDocuments!=null&&(b.totalDocuments=r.totalDocuments>>>0),r.totalBytes!=null&&(l.Long?(b.totalBytes=l.Long.fromValue(r.totalBytes)).unsigned=!0:typeof r.totalBytes=="string"?b.totalBytes=parseInt(r.totalBytes,10):typeof r.totalBytes=="number"?b.totalBytes=r.totalBytes:typeof r.totalBytes=="object"&&(b.totalBytes=new l.LongBits(r.totalBytes.low>>>0,r.totalBytes.high>>>0).toNumber(!0))),b},_.toObject=function(r,b){var S,le={};return(b=b||{}).defaults&&(le.id="",le.createTime=null,le.version=0,le.totalDocuments=0,l.Long?(S=new l.Long(0,0,!0),le.totalBytes=b.longs===String?S.toString():b.longs===Number?S.toNumber():S):le.totalBytes=b.longs===String?"0":0),r.id!=null&&r.hasOwnProperty("id")&&(le.id=r.id),r.createTime!=null&&r.hasOwnProperty("createTime")&&(le.createTime=a.google.protobuf.Timestamp.toObject(r.createTime,b)),r.version!=null&&r.hasOwnProperty("version")&&(le.version=r.version),r.totalDocuments!=null&&r.hasOwnProperty("totalDocuments")&&(le.totalDocuments=r.totalDocuments),r.totalBytes!=null&&r.hasOwnProperty("totalBytes")&&(typeof r.totalBytes=="number"?le.totalBytes=b.longs===String?String(r.totalBytes):r.totalBytes:le.totalBytes=b.longs===String?l.Long.prototype.toString.call(r.totalBytes):b.longs===Number?new l.LongBits(r.totalBytes.low>>>0,r.totalBytes.high>>>0).toNumber(!0):r.totalBytes),le},_.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},_.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/firestore.BundleMetadata"},_),g.BundleElement=(y.prototype.metadata=null,y.prototype.namedQuery=null,y.prototype.documentMetadata=null,y.prototype.document=null,Object.defineProperty(y.prototype,"elementType",{get:l.oneOfGetter(p=["metadata","namedQuery","documentMetadata","document"]),set:l.oneOfSetter(p)}),y.fromObject=function(r){if(r instanceof a.firestore.BundleElement)return r;var b=new a.firestore.BundleElement;if(r.metadata!=null){if(typeof r.metadata!="object")throw TypeError(".firestore.BundleElement.metadata: object expected");b.metadata=a.firestore.BundleMetadata.fromObject(r.metadata)}if(r.namedQuery!=null){if(typeof r.namedQuery!="object")throw TypeError(".firestore.BundleElement.namedQuery: object expected");b.namedQuery=a.firestore.NamedQuery.fromObject(r.namedQuery)}if(r.documentMetadata!=null){if(typeof r.documentMetadata!="object")throw TypeError(".firestore.BundleElement.documentMetadata: object expected");b.documentMetadata=a.firestore.BundledDocumentMetadata.fromObject(r.documentMetadata)}if(r.document!=null){if(typeof r.document!="object")throw TypeError(".firestore.BundleElement.document: object expected");b.document=a.google.firestore.v1.Document.fromObject(r.document)}return b},y.toObject=function(r,b){b=b||{};var S={};return r.metadata!=null&&r.hasOwnProperty("metadata")&&(S.metadata=a.firestore.BundleMetadata.toObject(r.metadata,b),b.oneofs)&&(S.elementType="metadata"),r.namedQuery!=null&&r.hasOwnProperty("namedQuery")&&(S.namedQuery=a.firestore.NamedQuery.toObject(r.namedQuery,b),b.oneofs)&&(S.elementType="namedQuery"),r.documentMetadata!=null&&r.hasOwnProperty("documentMetadata")&&(S.documentMetadata=a.firestore.BundledDocumentMetadata.toObject(r.documentMetadata,b),b.oneofs)&&(S.elementType="documentMetadata"),r.document!=null&&r.hasOwnProperty("document")&&(S.document=a.google.firestore.v1.Document.toObject(r.document,b),b.oneofs)&&(S.elementType="document"),S},y.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},y.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/firestore.BundleElement"},y),g),a.google=((d={}).firestore=((p={}).v1=((g={}).AggregationResult=(w.prototype.aggregateFields=l.emptyObject,w.fromObject=function(r){if(r instanceof a.google.firestore.v1.AggregationResult)return r;var b=new a.google.firestore.v1.AggregationResult;if(r.aggregateFields){if(typeof r.aggregateFields!="object")throw TypeError(".google.firestore.v1.AggregationResult.aggregateFields: object expected");b.aggregateFields={};for(var S=Object.keys(r.aggregateFields),le=0;le<S.length;++le){if(typeof r.aggregateFields[S[le]]!="object")throw TypeError(".google.firestore.v1.AggregationResult.aggregateFields: object expected");b.aggregateFields[S[le]]=a.google.firestore.v1.Value.fromObject(r.aggregateFields[S[le]])}}return b},w.toObject=function(r,b){var S,le={};if(((b=b||{}).objects||b.defaults)&&(le.aggregateFields={}),r.aggregateFields&&(S=Object.keys(r.aggregateFields)).length){le.aggregateFields={};for(var et=0;et<S.length;++et)le.aggregateFields[S[et]]=a.google.firestore.v1.Value.toObject(r.aggregateFields[S[et]],b)}return le},w.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},w.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.AggregationResult"},w),g.Document=(T.prototype.name="",T.prototype.fields=l.emptyObject,T.prototype.createTime=null,T.prototype.updateTime=null,T.fromObject=function(r){if(r instanceof a.google.firestore.v1.Document)return r;var b=new a.google.firestore.v1.Document;if(r.name!=null&&(b.name=String(r.name)),r.fields){if(typeof r.fields!="object")throw TypeError(".google.firestore.v1.Document.fields: object expected");b.fields={};for(var S=Object.keys(r.fields),le=0;le<S.length;++le){if(typeof r.fields[S[le]]!="object")throw TypeError(".google.firestore.v1.Document.fields: object expected");b.fields[S[le]]=a.google.firestore.v1.Value.fromObject(r.fields[S[le]])}}if(r.createTime!=null){if(typeof r.createTime!="object")throw TypeError(".google.firestore.v1.Document.createTime: object expected");b.createTime=a.google.protobuf.Timestamp.fromObject(r.createTime)}if(r.updateTime!=null){if(typeof r.updateTime!="object")throw TypeError(".google.firestore.v1.Document.updateTime: object expected");b.updateTime=a.google.protobuf.Timestamp.fromObject(r.updateTime)}return b},T.toObject=function(r,b){var S,le={};if(((b=b||{}).objects||b.defaults)&&(le.fields={}),b.defaults&&(le.name="",le.createTime=null,le.updateTime=null),r.name!=null&&r.hasOwnProperty("name")&&(le.name=r.name),r.fields&&(S=Object.keys(r.fields)).length){le.fields={};for(var et=0;et<S.length;++et)le.fields[S[et]]=a.google.firestore.v1.Value.toObject(r.fields[S[et]],b)}return r.createTime!=null&&r.hasOwnProperty("createTime")&&(le.createTime=a.google.protobuf.Timestamp.toObject(r.createTime,b)),r.updateTime!=null&&r.hasOwnProperty("updateTime")&&(le.updateTime=a.google.protobuf.Timestamp.toObject(r.updateTime,b)),le},T.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},T.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.Document"},T),g.Value=(I.prototype.nullValue=null,I.prototype.booleanValue=null,I.prototype.integerValue=null,I.prototype.doubleValue=null,I.prototype.timestampValue=null,I.prototype.stringValue=null,I.prototype.bytesValue=null,I.prototype.referenceValue=null,I.prototype.geoPointValue=null,I.prototype.arrayValue=null,I.prototype.mapValue=null,Object.defineProperty(I.prototype,"valueType",{get:l.oneOfGetter(m=["nullValue","booleanValue","integerValue","doubleValue","timestampValue","stringValue","bytesValue","referenceValue","geoPointValue","arrayValue","mapValue"]),set:l.oneOfSetter(m)}),I.fromObject=function(r){if(r instanceof a.google.firestore.v1.Value)return r;var b=new a.google.firestore.v1.Value;switch(r.nullValue){default:typeof r.nullValue=="number"&&(b.nullValue=r.nullValue);break;case"NULL_VALUE":case 0:b.nullValue=0}if(r.booleanValue!=null&&(b.booleanValue=!!r.booleanValue),r.integerValue!=null&&(l.Long?(b.integerValue=l.Long.fromValue(r.integerValue)).unsigned=!1:typeof r.integerValue=="string"?b.integerValue=parseInt(r.integerValue,10):typeof r.integerValue=="number"?b.integerValue=r.integerValue:typeof r.integerValue=="object"&&(b.integerValue=new l.LongBits(r.integerValue.low>>>0,r.integerValue.high>>>0).toNumber())),r.doubleValue!=null&&(b.doubleValue=Number(r.doubleValue)),r.timestampValue!=null){if(typeof r.timestampValue!="object")throw TypeError(".google.firestore.v1.Value.timestampValue: object expected");b.timestampValue=a.google.protobuf.Timestamp.fromObject(r.timestampValue)}if(r.stringValue!=null&&(b.stringValue=String(r.stringValue)),r.bytesValue!=null&&(typeof r.bytesValue=="string"?l.base64.decode(r.bytesValue,b.bytesValue=l.newBuffer(l.base64.length(r.bytesValue)),0):0<=r.bytesValue.length&&(b.bytesValue=r.bytesValue)),r.referenceValue!=null&&(b.referenceValue=String(r.referenceValue)),r.geoPointValue!=null){if(typeof r.geoPointValue!="object")throw TypeError(".google.firestore.v1.Value.geoPointValue: object expected");b.geoPointValue=a.google.type.LatLng.fromObject(r.geoPointValue)}if(r.arrayValue!=null){if(typeof r.arrayValue!="object")throw TypeError(".google.firestore.v1.Value.arrayValue: object expected");b.arrayValue=a.google.firestore.v1.ArrayValue.fromObject(r.arrayValue)}if(r.mapValue!=null){if(typeof r.mapValue!="object")throw TypeError(".google.firestore.v1.Value.mapValue: object expected");b.mapValue=a.google.firestore.v1.MapValue.fromObject(r.mapValue)}return b},I.toObject=function(r,b){b=b||{};var S={};return r.booleanValue!=null&&r.hasOwnProperty("booleanValue")&&(S.booleanValue=r.booleanValue,b.oneofs)&&(S.valueType="booleanValue"),r.integerValue!=null&&r.hasOwnProperty("integerValue")&&(typeof r.integerValue=="number"?S.integerValue=b.longs===String?String(r.integerValue):r.integerValue:S.integerValue=b.longs===String?l.Long.prototype.toString.call(r.integerValue):b.longs===Number?new l.LongBits(r.integerValue.low>>>0,r.integerValue.high>>>0).toNumber():r.integerValue,b.oneofs)&&(S.valueType="integerValue"),r.doubleValue!=null&&r.hasOwnProperty("doubleValue")&&(S.doubleValue=b.json&&!isFinite(r.doubleValue)?String(r.doubleValue):r.doubleValue,b.oneofs)&&(S.valueType="doubleValue"),r.referenceValue!=null&&r.hasOwnProperty("referenceValue")&&(S.referenceValue=r.referenceValue,b.oneofs)&&(S.valueType="referenceValue"),r.mapValue!=null&&r.hasOwnProperty("mapValue")&&(S.mapValue=a.google.firestore.v1.MapValue.toObject(r.mapValue,b),b.oneofs)&&(S.valueType="mapValue"),r.geoPointValue!=null&&r.hasOwnProperty("geoPointValue")&&(S.geoPointValue=a.google.type.LatLng.toObject(r.geoPointValue,b),b.oneofs)&&(S.valueType="geoPointValue"),r.arrayValue!=null&&r.hasOwnProperty("arrayValue")&&(S.arrayValue=a.google.firestore.v1.ArrayValue.toObject(r.arrayValue,b),b.oneofs)&&(S.valueType="arrayValue"),r.timestampValue!=null&&r.hasOwnProperty("timestampValue")&&(S.timestampValue=a.google.protobuf.Timestamp.toObject(r.timestampValue,b),b.oneofs)&&(S.valueType="timestampValue"),r.nullValue!=null&&r.hasOwnProperty("nullValue")&&(S.nullValue=b.enums!==String||a.google.protobuf.NullValue[r.nullValue]===void 0?r.nullValue:a.google.protobuf.NullValue[r.nullValue],b.oneofs)&&(S.valueType="nullValue"),r.stringValue!=null&&r.hasOwnProperty("stringValue")&&(S.stringValue=r.stringValue,b.oneofs)&&(S.valueType="stringValue"),r.bytesValue!=null&&r.hasOwnProperty("bytesValue")&&(S.bytesValue=b.bytes===String?l.base64.encode(r.bytesValue,0,r.bytesValue.length):b.bytes===Array?Array.prototype.slice.call(r.bytesValue):r.bytesValue,b.oneofs)&&(S.valueType="bytesValue"),S},I.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},I.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.Value"},I),g.ArrayValue=(O.prototype.values=l.emptyArray,O.fromObject=function(r){if(r instanceof a.google.firestore.v1.ArrayValue)return r;var b=new a.google.firestore.v1.ArrayValue;if(r.values){if(!Array.isArray(r.values))throw TypeError(".google.firestore.v1.ArrayValue.values: array expected");b.values=[];for(var S=0;S<r.values.length;++S){if(typeof r.values[S]!="object")throw TypeError(".google.firestore.v1.ArrayValue.values: object expected");b.values[S]=a.google.firestore.v1.Value.fromObject(r.values[S])}}return b},O.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.values=[]),r.values&&r.values.length){S.values=[];for(var le=0;le<r.values.length;++le)S.values[le]=a.google.firestore.v1.Value.toObject(r.values[le],b)}return S},O.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},O.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.ArrayValue"},O),g.MapValue=(E.prototype.fields=l.emptyObject,E.fromObject=function(r){if(r instanceof a.google.firestore.v1.MapValue)return r;var b=new a.google.firestore.v1.MapValue;if(r.fields){if(typeof r.fields!="object")throw TypeError(".google.firestore.v1.MapValue.fields: object expected");b.fields={};for(var S=Object.keys(r.fields),le=0;le<S.length;++le){if(typeof r.fields[S[le]]!="object")throw TypeError(".google.firestore.v1.MapValue.fields: object expected");b.fields[S[le]]=a.google.firestore.v1.Value.fromObject(r.fields[S[le]])}}return b},E.toObject=function(r,b){var S,le={};if(((b=b||{}).objects||b.defaults)&&(le.fields={}),r.fields&&(S=Object.keys(r.fields)).length){le.fields={};for(var et=0;et<S.length;++et)le.fields[S[et]]=a.google.firestore.v1.Value.toObject(r.fields[S[et]],b)}return le},E.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},E.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.MapValue"},E),g.BitSequence=(C.prototype.bitmap=l.newBuffer([]),C.prototype.padding=0,C.fromObject=function(r){var b;return r instanceof a.google.firestore.v1.BitSequence?r:(b=new a.google.firestore.v1.BitSequence,r.bitmap!=null&&(typeof r.bitmap=="string"?l.base64.decode(r.bitmap,b.bitmap=l.newBuffer(l.base64.length(r.bitmap)),0):0<=r.bitmap.length&&(b.bitmap=r.bitmap)),r.padding!=null&&(b.padding=0|r.padding),b)},C.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(b.bytes===String?S.bitmap="":(S.bitmap=[],b.bytes!==Array&&(S.bitmap=l.newBuffer(S.bitmap))),S.padding=0),r.bitmap!=null&&r.hasOwnProperty("bitmap")&&(S.bitmap=b.bytes===String?l.base64.encode(r.bitmap,0,r.bitmap.length):b.bytes===Array?Array.prototype.slice.call(r.bitmap):r.bitmap),r.padding!=null&&r.hasOwnProperty("padding")&&(S.padding=r.padding),S},C.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},C.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.BitSequence"},C),g.BloomFilter=(x.prototype.bits=null,x.prototype.hashCount=0,x.fromObject=function(r){if(r instanceof a.google.firestore.v1.BloomFilter)return r;var b=new a.google.firestore.v1.BloomFilter;if(r.bits!=null){if(typeof r.bits!="object")throw TypeError(".google.firestore.v1.BloomFilter.bits: object expected");b.bits=a.google.firestore.v1.BitSequence.fromObject(r.bits)}return r.hashCount!=null&&(b.hashCount=0|r.hashCount),b},x.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.bits=null,S.hashCount=0),r.bits!=null&&r.hasOwnProperty("bits")&&(S.bits=a.google.firestore.v1.BitSequence.toObject(r.bits,b)),r.hashCount!=null&&r.hasOwnProperty("hashCount")&&(S.hashCount=r.hashCount),S},x.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},x.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.BloomFilter"},x),g.DocumentMask=(j.prototype.fieldPaths=l.emptyArray,j.fromObject=function(r){if(r instanceof a.google.firestore.v1.DocumentMask)return r;var b=new a.google.firestore.v1.DocumentMask;if(r.fieldPaths){if(!Array.isArray(r.fieldPaths))throw TypeError(".google.firestore.v1.DocumentMask.fieldPaths: array expected");b.fieldPaths=[];for(var S=0;S<r.fieldPaths.length;++S)b.fieldPaths[S]=String(r.fieldPaths[S])}return b},j.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.fieldPaths=[]),r.fieldPaths&&r.fieldPaths.length){S.fieldPaths=[];for(var le=0;le<r.fieldPaths.length;++le)S.fieldPaths[le]=r.fieldPaths[le]}return S},j.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},j.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.DocumentMask"},j),g.Precondition=(D.prototype.exists=null,D.prototype.updateTime=null,Object.defineProperty(D.prototype,"conditionType",{get:l.oneOfGetter(m=["exists","updateTime"]),set:l.oneOfSetter(m)}),D.fromObject=function(r){if(r instanceof a.google.firestore.v1.Precondition)return r;var b=new a.google.firestore.v1.Precondition;if(r.exists!=null&&(b.exists=!!r.exists),r.updateTime!=null){if(typeof r.updateTime!="object")throw TypeError(".google.firestore.v1.Precondition.updateTime: object expected");b.updateTime=a.google.protobuf.Timestamp.fromObject(r.updateTime)}return b},D.toObject=function(r,b){b=b||{};var S={};return r.exists!=null&&r.hasOwnProperty("exists")&&(S.exists=r.exists,b.oneofs)&&(S.conditionType="exists"),r.updateTime!=null&&r.hasOwnProperty("updateTime")&&(S.updateTime=a.google.protobuf.Timestamp.toObject(r.updateTime,b),b.oneofs)&&(S.conditionType="updateTime"),S},D.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},D.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.Precondition"},D),g.TransactionOptions=(k.prototype.readOnly=null,k.prototype.readWrite=null,Object.defineProperty(k.prototype,"mode",{get:l.oneOfGetter(m=["readOnly","readWrite"]),set:l.oneOfSetter(m)}),k.fromObject=function(r){if(r instanceof a.google.firestore.v1.TransactionOptions)return r;var b=new a.google.firestore.v1.TransactionOptions;if(r.readOnly!=null){if(typeof r.readOnly!="object")throw TypeError(".google.firestore.v1.TransactionOptions.readOnly: object expected");b.readOnly=a.google.firestore.v1.TransactionOptions.ReadOnly.fromObject(r.readOnly)}if(r.readWrite!=null){if(typeof r.readWrite!="object")throw TypeError(".google.firestore.v1.TransactionOptions.readWrite: object expected");b.readWrite=a.google.firestore.v1.TransactionOptions.ReadWrite.fromObject(r.readWrite)}return b},k.toObject=function(r,b){b=b||{};var S={};return r.readOnly!=null&&r.hasOwnProperty("readOnly")&&(S.readOnly=a.google.firestore.v1.TransactionOptions.ReadOnly.toObject(r.readOnly,b),b.oneofs)&&(S.mode="readOnly"),r.readWrite!=null&&r.hasOwnProperty("readWrite")&&(S.readWrite=a.google.firestore.v1.TransactionOptions.ReadWrite.toObject(r.readWrite,b),b.oneofs)&&(S.mode="readWrite"),S},k.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},k.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.TransactionOptions"},k.ReadWrite=(q.prototype.retryTransaction=l.newBuffer([]),q.fromObject=function(r){var b;return r instanceof a.google.firestore.v1.TransactionOptions.ReadWrite?r:(b=new a.google.firestore.v1.TransactionOptions.ReadWrite,r.retryTransaction!=null&&(typeof r.retryTransaction=="string"?l.base64.decode(r.retryTransaction,b.retryTransaction=l.newBuffer(l.base64.length(r.retryTransaction)),0):0<=r.retryTransaction.length&&(b.retryTransaction=r.retryTransaction)),b)},q.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(b.bytes===String?S.retryTransaction="":(S.retryTransaction=[],b.bytes!==Array&&(S.retryTransaction=l.newBuffer(S.retryTransaction)))),r.retryTransaction!=null&&r.hasOwnProperty("retryTransaction")&&(S.retryTransaction=b.bytes===String?l.base64.encode(r.retryTransaction,0,r.retryTransaction.length):b.bytes===Array?Array.prototype.slice.call(r.retryTransaction):r.retryTransaction),S},q.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},q.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.TransactionOptions.ReadWrite"},q),k.ReadOnly=(G.prototype.readTime=null,Object.defineProperty(G.prototype,"consistencySelector",{get:l.oneOfGetter(m=["readTime"]),set:l.oneOfSetter(m)}),G.fromObject=function(r){if(r instanceof a.google.firestore.v1.TransactionOptions.ReadOnly)return r;var b=new a.google.firestore.v1.TransactionOptions.ReadOnly;if(r.readTime!=null){if(typeof r.readTime!="object")throw TypeError(".google.firestore.v1.TransactionOptions.ReadOnly.readTime: object expected");b.readTime=a.google.protobuf.Timestamp.fromObject(r.readTime)}return b},G.toObject=function(r,b){b=b||{};var S={};return r.readTime!=null&&r.hasOwnProperty("readTime")&&(S.readTime=a.google.protobuf.Timestamp.toObject(r.readTime,b),b.oneofs)&&(S.consistencySelector="readTime"),S},G.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},G.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.TransactionOptions.ReadOnly"},G),k),g.Firestore=(($.prototype=Object.create(t.rpc.Service.prototype)).constructor=$,Object.defineProperty($.prototype.getDocument=function r(b,S){return this.rpcCall(r,a.google.firestore.v1.GetDocumentRequest,a.google.firestore.v1.Document,b,S)},"name",{value:"GetDocument"}),Object.defineProperty($.prototype.listDocuments=function r(b,S){return this.rpcCall(r,a.google.firestore.v1.ListDocumentsRequest,a.google.firestore.v1.ListDocumentsResponse,b,S)},"name",{value:"ListDocuments"}),Object.defineProperty($.prototype.updateDocument=function r(b,S){return this.rpcCall(r,a.google.firestore.v1.UpdateDocumentRequest,a.google.firestore.v1.Document,b,S)},"name",{value:"UpdateDocument"}),Object.defineProperty($.prototype.deleteDocument=function r(b,S){return this.rpcCall(r,a.google.firestore.v1.DeleteDocumentRequest,a.google.protobuf.Empty,b,S)},"name",{value:"DeleteDocument"}),Object.defineProperty($.prototype.batchGetDocuments=function r(b,S){return this.rpcCall(r,a.google.firestore.v1.BatchGetDocumentsRequest,a.google.firestore.v1.BatchGetDocumentsResponse,b,S)},"name",{value:"BatchGetDocuments"}),Object.defineProperty($.prototype.beginTransaction=function r(b,S){return this.rpcCall(r,a.google.firestore.v1.BeginTransactionRequest,a.google.firestore.v1.BeginTransactionResponse,b,S)},"name",{value:"BeginTransaction"}),Object.defineProperty($.prototype.commit=function r(b,S){return this.rpcCall(r,a.google.firestore.v1.CommitRequest,a.google.firestore.v1.CommitResponse,b,S)},"name",{value:"Commit"}),Object.defineProperty($.prototype.rollback=function r(b,S){return this.rpcCall(r,a.google.firestore.v1.RollbackRequest,a.google.protobuf.Empty,b,S)},"name",{value:"Rollback"}),Object.defineProperty($.prototype.runQuery=function r(b,S){return this.rpcCall(r,a.google.firestore.v1.RunQueryRequest,a.google.firestore.v1.RunQueryResponse,b,S)},"name",{value:"RunQuery"}),Object.defineProperty($.prototype.runAggregationQuery=function r(b,S){return this.rpcCall(r,a.google.firestore.v1.RunAggregationQueryRequest,a.google.firestore.v1.RunAggregationQueryResponse,b,S)},"name",{value:"RunAggregationQuery"}),Object.defineProperty($.prototype.partitionQuery=function r(b,S){return this.rpcCall(r,a.google.firestore.v1.PartitionQueryRequest,a.google.firestore.v1.PartitionQueryResponse,b,S)},"name",{value:"PartitionQuery"}),Object.defineProperty($.prototype.write=function r(b,S){return this.rpcCall(r,a.google.firestore.v1.WriteRequest,a.google.firestore.v1.WriteResponse,b,S)},"name",{value:"Write"}),Object.defineProperty($.prototype.listen=function r(b,S){return this.rpcCall(r,a.google.firestore.v1.ListenRequest,a.google.firestore.v1.ListenResponse,b,S)},"name",{value:"Listen"}),Object.defineProperty($.prototype.listCollectionIds=function r(b,S){return this.rpcCall(r,a.google.firestore.v1.ListCollectionIdsRequest,a.google.firestore.v1.ListCollectionIdsResponse,b,S)},"name",{value:"ListCollectionIds"}),Object.defineProperty($.prototype.batchWrite=function r(b,S){return this.rpcCall(r,a.google.firestore.v1.BatchWriteRequest,a.google.firestore.v1.BatchWriteResponse,b,S)},"name",{value:"BatchWrite"}),Object.defineProperty($.prototype.createDocument=function r(b,S){return this.rpcCall(r,a.google.firestore.v1.CreateDocumentRequest,a.google.firestore.v1.Document,b,S)},"name",{value:"CreateDocument"}),$),g.GetDocumentRequest=(W.prototype.name="",W.prototype.mask=null,W.prototype.transaction=null,W.prototype.readTime=null,Object.defineProperty(W.prototype,"consistencySelector",{get:l.oneOfGetter(m=["transaction","readTime"]),set:l.oneOfSetter(m)}),W.fromObject=function(r){if(r instanceof a.google.firestore.v1.GetDocumentRequest)return r;var b=new a.google.firestore.v1.GetDocumentRequest;if(r.name!=null&&(b.name=String(r.name)),r.mask!=null){if(typeof r.mask!="object")throw TypeError(".google.firestore.v1.GetDocumentRequest.mask: object expected");b.mask=a.google.firestore.v1.DocumentMask.fromObject(r.mask)}if(r.transaction!=null&&(typeof r.transaction=="string"?l.base64.decode(r.transaction,b.transaction=l.newBuffer(l.base64.length(r.transaction)),0):0<=r.transaction.length&&(b.transaction=r.transaction)),r.readTime!=null){if(typeof r.readTime!="object")throw TypeError(".google.firestore.v1.GetDocumentRequest.readTime: object expected");b.readTime=a.google.protobuf.Timestamp.fromObject(r.readTime)}return b},W.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.name="",S.mask=null),r.name!=null&&r.hasOwnProperty("name")&&(S.name=r.name),r.mask!=null&&r.hasOwnProperty("mask")&&(S.mask=a.google.firestore.v1.DocumentMask.toObject(r.mask,b)),r.transaction!=null&&r.hasOwnProperty("transaction")&&(S.transaction=b.bytes===String?l.base64.encode(r.transaction,0,r.transaction.length):b.bytes===Array?Array.prototype.slice.call(r.transaction):r.transaction,b.oneofs)&&(S.consistencySelector="transaction"),r.readTime!=null&&r.hasOwnProperty("readTime")&&(S.readTime=a.google.protobuf.Timestamp.toObject(r.readTime,b),b.oneofs)&&(S.consistencySelector="readTime"),S},W.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},W.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.GetDocumentRequest"},W),g.ListDocumentsRequest=(K.prototype.parent="",K.prototype.collectionId="",K.prototype.pageSize=0,K.prototype.pageToken="",K.prototype.orderBy="",K.prototype.mask=null,K.prototype.transaction=null,K.prototype.readTime=null,K.prototype.showMissing=!1,Object.defineProperty(K.prototype,"consistencySelector",{get:l.oneOfGetter(m=["transaction","readTime"]),set:l.oneOfSetter(m)}),K.fromObject=function(r){if(r instanceof a.google.firestore.v1.ListDocumentsRequest)return r;var b=new a.google.firestore.v1.ListDocumentsRequest;if(r.parent!=null&&(b.parent=String(r.parent)),r.collectionId!=null&&(b.collectionId=String(r.collectionId)),r.pageSize!=null&&(b.pageSize=0|r.pageSize),r.pageToken!=null&&(b.pageToken=String(r.pageToken)),r.orderBy!=null&&(b.orderBy=String(r.orderBy)),r.mask!=null){if(typeof r.mask!="object")throw TypeError(".google.firestore.v1.ListDocumentsRequest.mask: object expected");b.mask=a.google.firestore.v1.DocumentMask.fromObject(r.mask)}if(r.transaction!=null&&(typeof r.transaction=="string"?l.base64.decode(r.transaction,b.transaction=l.newBuffer(l.base64.length(r.transaction)),0):0<=r.transaction.length&&(b.transaction=r.transaction)),r.readTime!=null){if(typeof r.readTime!="object")throw TypeError(".google.firestore.v1.ListDocumentsRequest.readTime: object expected");b.readTime=a.google.protobuf.Timestamp.fromObject(r.readTime)}return r.showMissing!=null&&(b.showMissing=!!r.showMissing),b},K.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.parent="",S.collectionId="",S.pageSize=0,S.pageToken="",S.orderBy="",S.mask=null,S.showMissing=!1),r.parent!=null&&r.hasOwnProperty("parent")&&(S.parent=r.parent),r.collectionId!=null&&r.hasOwnProperty("collectionId")&&(S.collectionId=r.collectionId),r.pageSize!=null&&r.hasOwnProperty("pageSize")&&(S.pageSize=r.pageSize),r.pageToken!=null&&r.hasOwnProperty("pageToken")&&(S.pageToken=r.pageToken),r.orderBy!=null&&r.hasOwnProperty("orderBy")&&(S.orderBy=r.orderBy),r.mask!=null&&r.hasOwnProperty("mask")&&(S.mask=a.google.firestore.v1.DocumentMask.toObject(r.mask,b)),r.transaction!=null&&r.hasOwnProperty("transaction")&&(S.transaction=b.bytes===String?l.base64.encode(r.transaction,0,r.transaction.length):b.bytes===Array?Array.prototype.slice.call(r.transaction):r.transaction,b.oneofs)&&(S.consistencySelector="transaction"),r.readTime!=null&&r.hasOwnProperty("readTime")&&(S.readTime=a.google.protobuf.Timestamp.toObject(r.readTime,b),b.oneofs)&&(S.consistencySelector="readTime"),r.showMissing!=null&&r.hasOwnProperty("showMissing")&&(S.showMissing=r.showMissing),S},K.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},K.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.ListDocumentsRequest"},K),g.ListDocumentsResponse=(z.prototype.documents=l.emptyArray,z.prototype.nextPageToken="",z.fromObject=function(r){if(r instanceof a.google.firestore.v1.ListDocumentsResponse)return r;var b=new a.google.firestore.v1.ListDocumentsResponse;if(r.documents){if(!Array.isArray(r.documents))throw TypeError(".google.firestore.v1.ListDocumentsResponse.documents: array expected");b.documents=[];for(var S=0;S<r.documents.length;++S){if(typeof r.documents[S]!="object")throw TypeError(".google.firestore.v1.ListDocumentsResponse.documents: object expected");b.documents[S]=a.google.firestore.v1.Document.fromObject(r.documents[S])}}return r.nextPageToken!=null&&(b.nextPageToken=String(r.nextPageToken)),b},z.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.documents=[]),b.defaults&&(S.nextPageToken=""),r.documents&&r.documents.length){S.documents=[];for(var le=0;le<r.documents.length;++le)S.documents[le]=a.google.firestore.v1.Document.toObject(r.documents[le],b)}return r.nextPageToken!=null&&r.hasOwnProperty("nextPageToken")&&(S.nextPageToken=r.nextPageToken),S},z.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},z.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.ListDocumentsResponse"},z),g.CreateDocumentRequest=(Q.prototype.parent="",Q.prototype.collectionId="",Q.prototype.documentId="",Q.prototype.document=null,Q.prototype.mask=null,Q.fromObject=function(r){if(r instanceof a.google.firestore.v1.CreateDocumentRequest)return r;var b=new a.google.firestore.v1.CreateDocumentRequest;if(r.parent!=null&&(b.parent=String(r.parent)),r.collectionId!=null&&(b.collectionId=String(r.collectionId)),r.documentId!=null&&(b.documentId=String(r.documentId)),r.document!=null){if(typeof r.document!="object")throw TypeError(".google.firestore.v1.CreateDocumentRequest.document: object expected");b.document=a.google.firestore.v1.Document.fromObject(r.document)}if(r.mask!=null){if(typeof r.mask!="object")throw TypeError(".google.firestore.v1.CreateDocumentRequest.mask: object expected");b.mask=a.google.firestore.v1.DocumentMask.fromObject(r.mask)}return b},Q.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.parent="",S.collectionId="",S.documentId="",S.document=null,S.mask=null),r.parent!=null&&r.hasOwnProperty("parent")&&(S.parent=r.parent),r.collectionId!=null&&r.hasOwnProperty("collectionId")&&(S.collectionId=r.collectionId),r.documentId!=null&&r.hasOwnProperty("documentId")&&(S.documentId=r.documentId),r.document!=null&&r.hasOwnProperty("document")&&(S.document=a.google.firestore.v1.Document.toObject(r.document,b)),r.mask!=null&&r.hasOwnProperty("mask")&&(S.mask=a.google.firestore.v1.DocumentMask.toObject(r.mask,b)),S},Q.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Q.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.CreateDocumentRequest"},Q),g.UpdateDocumentRequest=(Y.prototype.document=null,Y.prototype.updateMask=null,Y.prototype.mask=null,Y.prototype.currentDocument=null,Y.fromObject=function(r){if(r instanceof a.google.firestore.v1.UpdateDocumentRequest)return r;var b=new a.google.firestore.v1.UpdateDocumentRequest;if(r.document!=null){if(typeof r.document!="object")throw TypeError(".google.firestore.v1.UpdateDocumentRequest.document: object expected");b.document=a.google.firestore.v1.Document.fromObject(r.document)}if(r.updateMask!=null){if(typeof r.updateMask!="object")throw TypeError(".google.firestore.v1.UpdateDocumentRequest.updateMask: object expected");b.updateMask=a.google.firestore.v1.DocumentMask.fromObject(r.updateMask)}if(r.mask!=null){if(typeof r.mask!="object")throw TypeError(".google.firestore.v1.UpdateDocumentRequest.mask: object expected");b.mask=a.google.firestore.v1.DocumentMask.fromObject(r.mask)}if(r.currentDocument!=null){if(typeof r.currentDocument!="object")throw TypeError(".google.firestore.v1.UpdateDocumentRequest.currentDocument: object expected");b.currentDocument=a.google.firestore.v1.Precondition.fromObject(r.currentDocument)}return b},Y.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.document=null,S.updateMask=null,S.mask=null,S.currentDocument=null),r.document!=null&&r.hasOwnProperty("document")&&(S.document=a.google.firestore.v1.Document.toObject(r.document,b)),r.updateMask!=null&&r.hasOwnProperty("updateMask")&&(S.updateMask=a.google.firestore.v1.DocumentMask.toObject(r.updateMask,b)),r.mask!=null&&r.hasOwnProperty("mask")&&(S.mask=a.google.firestore.v1.DocumentMask.toObject(r.mask,b)),r.currentDocument!=null&&r.hasOwnProperty("currentDocument")&&(S.currentDocument=a.google.firestore.v1.Precondition.toObject(r.currentDocument,b)),S},Y.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Y.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.UpdateDocumentRequest"},Y),g.DeleteDocumentRequest=(te.prototype.name="",te.prototype.currentDocument=null,te.fromObject=function(r){if(r instanceof a.google.firestore.v1.DeleteDocumentRequest)return r;var b=new a.google.firestore.v1.DeleteDocumentRequest;if(r.name!=null&&(b.name=String(r.name)),r.currentDocument!=null){if(typeof r.currentDocument!="object")throw TypeError(".google.firestore.v1.DeleteDocumentRequest.currentDocument: object expected");b.currentDocument=a.google.firestore.v1.Precondition.fromObject(r.currentDocument)}return b},te.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.name="",S.currentDocument=null),r.name!=null&&r.hasOwnProperty("name")&&(S.name=r.name),r.currentDocument!=null&&r.hasOwnProperty("currentDocument")&&(S.currentDocument=a.google.firestore.v1.Precondition.toObject(r.currentDocument,b)),S},te.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},te.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.DeleteDocumentRequest"},te),g.BatchGetDocumentsRequest=(ae.prototype.database="",ae.prototype.documents=l.emptyArray,ae.prototype.mask=null,ae.prototype.transaction=null,ae.prototype.newTransaction=null,ae.prototype.readTime=null,Object.defineProperty(ae.prototype,"consistencySelector",{get:l.oneOfGetter(m=["transaction","newTransaction","readTime"]),set:l.oneOfSetter(m)}),ae.fromObject=function(r){if(r instanceof a.google.firestore.v1.BatchGetDocumentsRequest)return r;var b=new a.google.firestore.v1.BatchGetDocumentsRequest;if(r.database!=null&&(b.database=String(r.database)),r.documents){if(!Array.isArray(r.documents))throw TypeError(".google.firestore.v1.BatchGetDocumentsRequest.documents: array expected");b.documents=[];for(var S=0;S<r.documents.length;++S)b.documents[S]=String(r.documents[S])}if(r.mask!=null){if(typeof r.mask!="object")throw TypeError(".google.firestore.v1.BatchGetDocumentsRequest.mask: object expected");b.mask=a.google.firestore.v1.DocumentMask.fromObject(r.mask)}if(r.transaction!=null&&(typeof r.transaction=="string"?l.base64.decode(r.transaction,b.transaction=l.newBuffer(l.base64.length(r.transaction)),0):0<=r.transaction.length&&(b.transaction=r.transaction)),r.newTransaction!=null){if(typeof r.newTransaction!="object")throw TypeError(".google.firestore.v1.BatchGetDocumentsRequest.newTransaction: object expected");b.newTransaction=a.google.firestore.v1.TransactionOptions.fromObject(r.newTransaction)}if(r.readTime!=null){if(typeof r.readTime!="object")throw TypeError(".google.firestore.v1.BatchGetDocumentsRequest.readTime: object expected");b.readTime=a.google.protobuf.Timestamp.fromObject(r.readTime)}return b},ae.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.documents=[]),b.defaults&&(S.database="",S.mask=null),r.database!=null&&r.hasOwnProperty("database")&&(S.database=r.database),r.documents&&r.documents.length){S.documents=[];for(var le=0;le<r.documents.length;++le)S.documents[le]=r.documents[le]}return r.mask!=null&&r.hasOwnProperty("mask")&&(S.mask=a.google.firestore.v1.DocumentMask.toObject(r.mask,b)),r.transaction!=null&&r.hasOwnProperty("transaction")&&(S.transaction=b.bytes===String?l.base64.encode(r.transaction,0,r.transaction.length):b.bytes===Array?Array.prototype.slice.call(r.transaction):r.transaction,b.oneofs)&&(S.consistencySelector="transaction"),r.newTransaction!=null&&r.hasOwnProperty("newTransaction")&&(S.newTransaction=a.google.firestore.v1.TransactionOptions.toObject(r.newTransaction,b),b.oneofs)&&(S.consistencySelector="newTransaction"),r.readTime!=null&&r.hasOwnProperty("readTime")&&(S.readTime=a.google.protobuf.Timestamp.toObject(r.readTime,b),b.oneofs)&&(S.consistencySelector="readTime"),S},ae.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ae.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.BatchGetDocumentsRequest"},ae),g.BatchGetDocumentsResponse=(ue.prototype.found=null,ue.prototype.missing=null,ue.prototype.transaction=l.newBuffer([]),ue.prototype.readTime=null,Object.defineProperty(ue.prototype,"result",{get:l.oneOfGetter(m=["found","missing"]),set:l.oneOfSetter(m)}),ue.fromObject=function(r){if(r instanceof a.google.firestore.v1.BatchGetDocumentsResponse)return r;var b=new a.google.firestore.v1.BatchGetDocumentsResponse;if(r.found!=null){if(typeof r.found!="object")throw TypeError(".google.firestore.v1.BatchGetDocumentsResponse.found: object expected");b.found=a.google.firestore.v1.Document.fromObject(r.found)}if(r.missing!=null&&(b.missing=String(r.missing)),r.transaction!=null&&(typeof r.transaction=="string"?l.base64.decode(r.transaction,b.transaction=l.newBuffer(l.base64.length(r.transaction)),0):0<=r.transaction.length&&(b.transaction=r.transaction)),r.readTime!=null){if(typeof r.readTime!="object")throw TypeError(".google.firestore.v1.BatchGetDocumentsResponse.readTime: object expected");b.readTime=a.google.protobuf.Timestamp.fromObject(r.readTime)}return b},ue.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(b.bytes===String?S.transaction="":(S.transaction=[],b.bytes!==Array&&(S.transaction=l.newBuffer(S.transaction))),S.readTime=null),r.found!=null&&r.hasOwnProperty("found")&&(S.found=a.google.firestore.v1.Document.toObject(r.found,b),b.oneofs)&&(S.result="found"),r.missing!=null&&r.hasOwnProperty("missing")&&(S.missing=r.missing,b.oneofs)&&(S.result="missing"),r.transaction!=null&&r.hasOwnProperty("transaction")&&(S.transaction=b.bytes===String?l.base64.encode(r.transaction,0,r.transaction.length):b.bytes===Array?Array.prototype.slice.call(r.transaction):r.transaction),r.readTime!=null&&r.hasOwnProperty("readTime")&&(S.readTime=a.google.protobuf.Timestamp.toObject(r.readTime,b)),S},ue.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ue.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.BatchGetDocumentsResponse"},ue),g.BeginTransactionRequest=(ee.prototype.database="",ee.prototype.options=null,ee.fromObject=function(r){if(r instanceof a.google.firestore.v1.BeginTransactionRequest)return r;var b=new a.google.firestore.v1.BeginTransactionRequest;if(r.database!=null&&(b.database=String(r.database)),r.options!=null){if(typeof r.options!="object")throw TypeError(".google.firestore.v1.BeginTransactionRequest.options: object expected");b.options=a.google.firestore.v1.TransactionOptions.fromObject(r.options)}return b},ee.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.database="",S.options=null),r.database!=null&&r.hasOwnProperty("database")&&(S.database=r.database),r.options!=null&&r.hasOwnProperty("options")&&(S.options=a.google.firestore.v1.TransactionOptions.toObject(r.options,b)),S},ee.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ee.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.BeginTransactionRequest"},ee),g.BeginTransactionResponse=(oe.prototype.transaction=l.newBuffer([]),oe.fromObject=function(r){var b;return r instanceof a.google.firestore.v1.BeginTransactionResponse?r:(b=new a.google.firestore.v1.BeginTransactionResponse,r.transaction!=null&&(typeof r.transaction=="string"?l.base64.decode(r.transaction,b.transaction=l.newBuffer(l.base64.length(r.transaction)),0):0<=r.transaction.length&&(b.transaction=r.transaction)),b)},oe.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(b.bytes===String?S.transaction="":(S.transaction=[],b.bytes!==Array&&(S.transaction=l.newBuffer(S.transaction)))),r.transaction!=null&&r.hasOwnProperty("transaction")&&(S.transaction=b.bytes===String?l.base64.encode(r.transaction,0,r.transaction.length):b.bytes===Array?Array.prototype.slice.call(r.transaction):r.transaction),S},oe.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},oe.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.BeginTransactionResponse"},oe),g.CommitRequest=(de.prototype.database="",de.prototype.writes=l.emptyArray,de.prototype.transaction=l.newBuffer([]),de.fromObject=function(r){if(r instanceof a.google.firestore.v1.CommitRequest)return r;var b=new a.google.firestore.v1.CommitRequest;if(r.database!=null&&(b.database=String(r.database)),r.writes){if(!Array.isArray(r.writes))throw TypeError(".google.firestore.v1.CommitRequest.writes: array expected");b.writes=[];for(var S=0;S<r.writes.length;++S){if(typeof r.writes[S]!="object")throw TypeError(".google.firestore.v1.CommitRequest.writes: object expected");b.writes[S]=a.google.firestore.v1.Write.fromObject(r.writes[S])}}return r.transaction!=null&&(typeof r.transaction=="string"?l.base64.decode(r.transaction,b.transaction=l.newBuffer(l.base64.length(r.transaction)),0):0<=r.transaction.length&&(b.transaction=r.transaction)),b},de.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.writes=[]),b.defaults&&(S.database="",b.bytes===String?S.transaction="":(S.transaction=[],b.bytes!==Array&&(S.transaction=l.newBuffer(S.transaction)))),r.database!=null&&r.hasOwnProperty("database")&&(S.database=r.database),r.writes&&r.writes.length){S.writes=[];for(var le=0;le<r.writes.length;++le)S.writes[le]=a.google.firestore.v1.Write.toObject(r.writes[le],b)}return r.transaction!=null&&r.hasOwnProperty("transaction")&&(S.transaction=b.bytes===String?l.base64.encode(r.transaction,0,r.transaction.length):b.bytes===Array?Array.prototype.slice.call(r.transaction):r.transaction),S},de.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},de.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.CommitRequest"},de),g.CommitResponse=(he.prototype.writeResults=l.emptyArray,he.prototype.commitTime=null,he.fromObject=function(r){if(r instanceof a.google.firestore.v1.CommitResponse)return r;var b=new a.google.firestore.v1.CommitResponse;if(r.writeResults){if(!Array.isArray(r.writeResults))throw TypeError(".google.firestore.v1.CommitResponse.writeResults: array expected");b.writeResults=[];for(var S=0;S<r.writeResults.length;++S){if(typeof r.writeResults[S]!="object")throw TypeError(".google.firestore.v1.CommitResponse.writeResults: object expected");b.writeResults[S]=a.google.firestore.v1.WriteResult.fromObject(r.writeResults[S])}}if(r.commitTime!=null){if(typeof r.commitTime!="object")throw TypeError(".google.firestore.v1.CommitResponse.commitTime: object expected");b.commitTime=a.google.protobuf.Timestamp.fromObject(r.commitTime)}return b},he.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.writeResults=[]),b.defaults&&(S.commitTime=null),r.writeResults&&r.writeResults.length){S.writeResults=[];for(var le=0;le<r.writeResults.length;++le)S.writeResults[le]=a.google.firestore.v1.WriteResult.toObject(r.writeResults[le],b)}return r.commitTime!=null&&r.hasOwnProperty("commitTime")&&(S.commitTime=a.google.protobuf.Timestamp.toObject(r.commitTime,b)),S},he.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},he.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.CommitResponse"},he),g.RollbackRequest=(Ee.prototype.database="",Ee.prototype.transaction=l.newBuffer([]),Ee.fromObject=function(r){var b;return r instanceof a.google.firestore.v1.RollbackRequest?r:(b=new a.google.firestore.v1.RollbackRequest,r.database!=null&&(b.database=String(r.database)),r.transaction!=null&&(typeof r.transaction=="string"?l.base64.decode(r.transaction,b.transaction=l.newBuffer(l.base64.length(r.transaction)),0):0<=r.transaction.length&&(b.transaction=r.transaction)),b)},Ee.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.database="",b.bytes===String?S.transaction="":(S.transaction=[],b.bytes!==Array&&(S.transaction=l.newBuffer(S.transaction)))),r.database!=null&&r.hasOwnProperty("database")&&(S.database=r.database),r.transaction!=null&&r.hasOwnProperty("transaction")&&(S.transaction=b.bytes===String?l.base64.encode(r.transaction,0,r.transaction.length):b.bytes===Array?Array.prototype.slice.call(r.transaction):r.transaction),S},Ee.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Ee.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.RollbackRequest"},Ee),g.RunQueryRequest=(fe.prototype.parent="",fe.prototype.structuredQuery=null,fe.prototype.transaction=null,fe.prototype.newTransaction=null,fe.prototype.readTime=null,fe.prototype.explainOptions=null,Object.defineProperty(fe.prototype,"queryType",{get:l.oneOfGetter(m=["structuredQuery"]),set:l.oneOfSetter(m)}),Object.defineProperty(fe.prototype,"consistencySelector",{get:l.oneOfGetter(m=["transaction","newTransaction","readTime"]),set:l.oneOfSetter(m)}),fe.fromObject=function(r){if(r instanceof a.google.firestore.v1.RunQueryRequest)return r;var b=new a.google.firestore.v1.RunQueryRequest;if(r.parent!=null&&(b.parent=String(r.parent)),r.structuredQuery!=null){if(typeof r.structuredQuery!="object")throw TypeError(".google.firestore.v1.RunQueryRequest.structuredQuery: object expected");b.structuredQuery=a.google.firestore.v1.StructuredQuery.fromObject(r.structuredQuery)}if(r.transaction!=null&&(typeof r.transaction=="string"?l.base64.decode(r.transaction,b.transaction=l.newBuffer(l.base64.length(r.transaction)),0):0<=r.transaction.length&&(b.transaction=r.transaction)),r.newTransaction!=null){if(typeof r.newTransaction!="object")throw TypeError(".google.firestore.v1.RunQueryRequest.newTransaction: object expected");b.newTransaction=a.google.firestore.v1.TransactionOptions.fromObject(r.newTransaction)}if(r.readTime!=null){if(typeof r.readTime!="object")throw TypeError(".google.firestore.v1.RunQueryRequest.readTime: object expected");b.readTime=a.google.protobuf.Timestamp.fromObject(r.readTime)}if(r.explainOptions!=null){if(typeof r.explainOptions!="object")throw TypeError(".google.firestore.v1.RunQueryRequest.explainOptions: object expected");b.explainOptions=a.google.firestore.v1.ExplainOptions.fromObject(r.explainOptions)}return b},fe.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.parent="",S.explainOptions=null),r.parent!=null&&r.hasOwnProperty("parent")&&(S.parent=r.parent),r.structuredQuery!=null&&r.hasOwnProperty("structuredQuery")&&(S.structuredQuery=a.google.firestore.v1.StructuredQuery.toObject(r.structuredQuery,b),b.oneofs)&&(S.queryType="structuredQuery"),r.transaction!=null&&r.hasOwnProperty("transaction")&&(S.transaction=b.bytes===String?l.base64.encode(r.transaction,0,r.transaction.length):b.bytes===Array?Array.prototype.slice.call(r.transaction):r.transaction,b.oneofs)&&(S.consistencySelector="transaction"),r.newTransaction!=null&&r.hasOwnProperty("newTransaction")&&(S.newTransaction=a.google.firestore.v1.TransactionOptions.toObject(r.newTransaction,b),b.oneofs)&&(S.consistencySelector="newTransaction"),r.readTime!=null&&r.hasOwnProperty("readTime")&&(S.readTime=a.google.protobuf.Timestamp.toObject(r.readTime,b),b.oneofs)&&(S.consistencySelector="readTime"),r.explainOptions!=null&&r.hasOwnProperty("explainOptions")&&(S.explainOptions=a.google.firestore.v1.ExplainOptions.toObject(r.explainOptions,b)),S},fe.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},fe.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.RunQueryRequest"},fe),g.RunQueryResponse=(Se.prototype.transaction=l.newBuffer([]),Se.prototype.document=null,Se.prototype.readTime=null,Se.prototype.skippedResults=0,Se.prototype.done=null,Se.prototype.explainMetrics=null,Object.defineProperty(Se.prototype,"continuationSelector",{get:l.oneOfGetter(m=["done"]),set:l.oneOfSetter(m)}),Se.fromObject=function(r){if(r instanceof a.google.firestore.v1.RunQueryResponse)return r;var b=new a.google.firestore.v1.RunQueryResponse;if(r.transaction!=null&&(typeof r.transaction=="string"?l.base64.decode(r.transaction,b.transaction=l.newBuffer(l.base64.length(r.transaction)),0):0<=r.transaction.length&&(b.transaction=r.transaction)),r.document!=null){if(typeof r.document!="object")throw TypeError(".google.firestore.v1.RunQueryResponse.document: object expected");b.document=a.google.firestore.v1.Document.fromObject(r.document)}if(r.readTime!=null){if(typeof r.readTime!="object")throw TypeError(".google.firestore.v1.RunQueryResponse.readTime: object expected");b.readTime=a.google.protobuf.Timestamp.fromObject(r.readTime)}if(r.skippedResults!=null&&(b.skippedResults=0|r.skippedResults),r.done!=null&&(b.done=!!r.done),r.explainMetrics!=null){if(typeof r.explainMetrics!="object")throw TypeError(".google.firestore.v1.RunQueryResponse.explainMetrics: object expected");b.explainMetrics=a.google.firestore.v1.ExplainMetrics.fromObject(r.explainMetrics)}return b},Se.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.document=null,b.bytes===String?S.transaction="":(S.transaction=[],b.bytes!==Array&&(S.transaction=l.newBuffer(S.transaction))),S.readTime=null,S.skippedResults=0,S.explainMetrics=null),r.document!=null&&r.hasOwnProperty("document")&&(S.document=a.google.firestore.v1.Document.toObject(r.document,b)),r.transaction!=null&&r.hasOwnProperty("transaction")&&(S.transaction=b.bytes===String?l.base64.encode(r.transaction,0,r.transaction.length):b.bytes===Array?Array.prototype.slice.call(r.transaction):r.transaction),r.readTime!=null&&r.hasOwnProperty("readTime")&&(S.readTime=a.google.protobuf.Timestamp.toObject(r.readTime,b)),r.skippedResults!=null&&r.hasOwnProperty("skippedResults")&&(S.skippedResults=r.skippedResults),r.done!=null&&r.hasOwnProperty("done")&&(S.done=r.done,b.oneofs)&&(S.continuationSelector="done"),r.explainMetrics!=null&&r.hasOwnProperty("explainMetrics")&&(S.explainMetrics=a.google.firestore.v1.ExplainMetrics.toObject(r.explainMetrics,b)),S},Se.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Se.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.RunQueryResponse"},Se),g.RunAggregationQueryRequest=(be.prototype.parent="",be.prototype.structuredAggregationQuery=null,be.prototype.transaction=null,be.prototype.newTransaction=null,be.prototype.readTime=null,be.prototype.explainOptions=null,Object.defineProperty(be.prototype,"queryType",{get:l.oneOfGetter(m=["structuredAggregationQuery"]),set:l.oneOfSetter(m)}),Object.defineProperty(be.prototype,"consistencySelector",{get:l.oneOfGetter(m=["transaction","newTransaction","readTime"]),set:l.oneOfSetter(m)}),be.fromObject=function(r){if(r instanceof a.google.firestore.v1.RunAggregationQueryRequest)return r;var b=new a.google.firestore.v1.RunAggregationQueryRequest;if(r.parent!=null&&(b.parent=String(r.parent)),r.structuredAggregationQuery!=null){if(typeof r.structuredAggregationQuery!="object")throw TypeError(".google.firestore.v1.RunAggregationQueryRequest.structuredAggregationQuery: object expected");b.structuredAggregationQuery=a.google.firestore.v1.StructuredAggregationQuery.fromObject(r.structuredAggregationQuery)}if(r.transaction!=null&&(typeof r.transaction=="string"?l.base64.decode(r.transaction,b.transaction=l.newBuffer(l.base64.length(r.transaction)),0):0<=r.transaction.length&&(b.transaction=r.transaction)),r.newTransaction!=null){if(typeof r.newTransaction!="object")throw TypeError(".google.firestore.v1.RunAggregationQueryRequest.newTransaction: object expected");b.newTransaction=a.google.firestore.v1.TransactionOptions.fromObject(r.newTransaction)}if(r.readTime!=null){if(typeof r.readTime!="object")throw TypeError(".google.firestore.v1.RunAggregationQueryRequest.readTime: object expected");b.readTime=a.google.protobuf.Timestamp.fromObject(r.readTime)}if(r.explainOptions!=null){if(typeof r.explainOptions!="object")throw TypeError(".google.firestore.v1.RunAggregationQueryRequest.explainOptions: object expected");b.explainOptions=a.google.firestore.v1.ExplainOptions.fromObject(r.explainOptions)}return b},be.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.parent="",S.explainOptions=null),r.parent!=null&&r.hasOwnProperty("parent")&&(S.parent=r.parent),r.structuredAggregationQuery!=null&&r.hasOwnProperty("structuredAggregationQuery")&&(S.structuredAggregationQuery=a.google.firestore.v1.StructuredAggregationQuery.toObject(r.structuredAggregationQuery,b),b.oneofs)&&(S.queryType="structuredAggregationQuery"),r.transaction!=null&&r.hasOwnProperty("transaction")&&(S.transaction=b.bytes===String?l.base64.encode(r.transaction,0,r.transaction.length):b.bytes===Array?Array.prototype.slice.call(r.transaction):r.transaction,b.oneofs)&&(S.consistencySelector="transaction"),r.newTransaction!=null&&r.hasOwnProperty("newTransaction")&&(S.newTransaction=a.google.firestore.v1.TransactionOptions.toObject(r.newTransaction,b),b.oneofs)&&(S.consistencySelector="newTransaction"),r.readTime!=null&&r.hasOwnProperty("readTime")&&(S.readTime=a.google.protobuf.Timestamp.toObject(r.readTime,b),b.oneofs)&&(S.consistencySelector="readTime"),r.explainOptions!=null&&r.hasOwnProperty("explainOptions")&&(S.explainOptions=a.google.firestore.v1.ExplainOptions.toObject(r.explainOptions,b)),S},be.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},be.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.RunAggregationQueryRequest"},be),g.RunAggregationQueryResponse=(Oe.prototype.result=null,Oe.prototype.transaction=l.newBuffer([]),Oe.prototype.readTime=null,Oe.prototype.explainMetrics=null,Oe.fromObject=function(r){if(r instanceof a.google.firestore.v1.RunAggregationQueryResponse)return r;var b=new a.google.firestore.v1.RunAggregationQueryResponse;if(r.result!=null){if(typeof r.result!="object")throw TypeError(".google.firestore.v1.RunAggregationQueryResponse.result: object expected");b.result=a.google.firestore.v1.AggregationResult.fromObject(r.result)}if(r.transaction!=null&&(typeof r.transaction=="string"?l.base64.decode(r.transaction,b.transaction=l.newBuffer(l.base64.length(r.transaction)),0):0<=r.transaction.length&&(b.transaction=r.transaction)),r.readTime!=null){if(typeof r.readTime!="object")throw TypeError(".google.firestore.v1.RunAggregationQueryResponse.readTime: object expected");b.readTime=a.google.protobuf.Timestamp.fromObject(r.readTime)}if(r.explainMetrics!=null){if(typeof r.explainMetrics!="object")throw TypeError(".google.firestore.v1.RunAggregationQueryResponse.explainMetrics: object expected");b.explainMetrics=a.google.firestore.v1.ExplainMetrics.fromObject(r.explainMetrics)}return b},Oe.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.result=null,b.bytes===String?S.transaction="":(S.transaction=[],b.bytes!==Array&&(S.transaction=l.newBuffer(S.transaction))),S.readTime=null,S.explainMetrics=null),r.result!=null&&r.hasOwnProperty("result")&&(S.result=a.google.firestore.v1.AggregationResult.toObject(r.result,b)),r.transaction!=null&&r.hasOwnProperty("transaction")&&(S.transaction=b.bytes===String?l.base64.encode(r.transaction,0,r.transaction.length):b.bytes===Array?Array.prototype.slice.call(r.transaction):r.transaction),r.readTime!=null&&r.hasOwnProperty("readTime")&&(S.readTime=a.google.protobuf.Timestamp.toObject(r.readTime,b)),r.explainMetrics!=null&&r.hasOwnProperty("explainMetrics")&&(S.explainMetrics=a.google.firestore.v1.ExplainMetrics.toObject(r.explainMetrics,b)),S},Oe.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Oe.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.RunAggregationQueryResponse"},Oe),g.PartitionQueryRequest=(ge.prototype.parent="",ge.prototype.structuredQuery=null,ge.prototype.partitionCount=l.Long?l.Long.fromBits(0,0,!1):0,ge.prototype.pageToken="",ge.prototype.pageSize=0,ge.prototype.readTime=null,Object.defineProperty(ge.prototype,"queryType",{get:l.oneOfGetter(m=["structuredQuery"]),set:l.oneOfSetter(m)}),Object.defineProperty(ge.prototype,"consistencySelector",{get:l.oneOfGetter(m=["readTime"]),set:l.oneOfSetter(m)}),ge.fromObject=function(r){if(r instanceof a.google.firestore.v1.PartitionQueryRequest)return r;var b=new a.google.firestore.v1.PartitionQueryRequest;if(r.parent!=null&&(b.parent=String(r.parent)),r.structuredQuery!=null){if(typeof r.structuredQuery!="object")throw TypeError(".google.firestore.v1.PartitionQueryRequest.structuredQuery: object expected");b.structuredQuery=a.google.firestore.v1.StructuredQuery.fromObject(r.structuredQuery)}if(r.partitionCount!=null&&(l.Long?(b.partitionCount=l.Long.fromValue(r.partitionCount)).unsigned=!1:typeof r.partitionCount=="string"?b.partitionCount=parseInt(r.partitionCount,10):typeof r.partitionCount=="number"?b.partitionCount=r.partitionCount:typeof r.partitionCount=="object"&&(b.partitionCount=new l.LongBits(r.partitionCount.low>>>0,r.partitionCount.high>>>0).toNumber())),r.pageToken!=null&&(b.pageToken=String(r.pageToken)),r.pageSize!=null&&(b.pageSize=0|r.pageSize),r.readTime!=null){if(typeof r.readTime!="object")throw TypeError(".google.firestore.v1.PartitionQueryRequest.readTime: object expected");b.readTime=a.google.protobuf.Timestamp.fromObject(r.readTime)}return b},ge.toObject=function(r,b){var S,le={};return(b=b||{}).defaults&&(le.parent="",l.Long?(S=new l.Long(0,0,!1),le.partitionCount=b.longs===String?S.toString():b.longs===Number?S.toNumber():S):le.partitionCount=b.longs===String?"0":0,le.pageToken="",le.pageSize=0),r.parent!=null&&r.hasOwnProperty("parent")&&(le.parent=r.parent),r.structuredQuery!=null&&r.hasOwnProperty("structuredQuery")&&(le.structuredQuery=a.google.firestore.v1.StructuredQuery.toObject(r.structuredQuery,b),b.oneofs)&&(le.queryType="structuredQuery"),r.partitionCount!=null&&r.hasOwnProperty("partitionCount")&&(typeof r.partitionCount=="number"?le.partitionCount=b.longs===String?String(r.partitionCount):r.partitionCount:le.partitionCount=b.longs===String?l.Long.prototype.toString.call(r.partitionCount):b.longs===Number?new l.LongBits(r.partitionCount.low>>>0,r.partitionCount.high>>>0).toNumber():r.partitionCount),r.pageToken!=null&&r.hasOwnProperty("pageToken")&&(le.pageToken=r.pageToken),r.pageSize!=null&&r.hasOwnProperty("pageSize")&&(le.pageSize=r.pageSize),r.readTime!=null&&r.hasOwnProperty("readTime")&&(le.readTime=a.google.protobuf.Timestamp.toObject(r.readTime,b),b.oneofs)&&(le.consistencySelector="readTime"),le},ge.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ge.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.PartitionQueryRequest"},ge),g.PartitionQueryResponse=(J.prototype.partitions=l.emptyArray,J.prototype.nextPageToken="",J.fromObject=function(r){if(r instanceof a.google.firestore.v1.PartitionQueryResponse)return r;var b=new a.google.firestore.v1.PartitionQueryResponse;if(r.partitions){if(!Array.isArray(r.partitions))throw TypeError(".google.firestore.v1.PartitionQueryResponse.partitions: array expected");b.partitions=[];for(var S=0;S<r.partitions.length;++S){if(typeof r.partitions[S]!="object")throw TypeError(".google.firestore.v1.PartitionQueryResponse.partitions: object expected");b.partitions[S]=a.google.firestore.v1.Cursor.fromObject(r.partitions[S])}}return r.nextPageToken!=null&&(b.nextPageToken=String(r.nextPageToken)),b},J.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.partitions=[]),b.defaults&&(S.nextPageToken=""),r.partitions&&r.partitions.length){S.partitions=[];for(var le=0;le<r.partitions.length;++le)S.partitions[le]=a.google.firestore.v1.Cursor.toObject(r.partitions[le],b)}return r.nextPageToken!=null&&r.hasOwnProperty("nextPageToken")&&(S.nextPageToken=r.nextPageToken),S},J.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},J.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.PartitionQueryResponse"},J),g.WriteRequest=(c.prototype.database="",c.prototype.streamId="",c.prototype.writes=l.emptyArray,c.prototype.streamToken=l.newBuffer([]),c.prototype.labels=l.emptyObject,c.fromObject=function(r){if(r instanceof a.google.firestore.v1.WriteRequest)return r;var b=new a.google.firestore.v1.WriteRequest;if(r.database!=null&&(b.database=String(r.database)),r.streamId!=null&&(b.streamId=String(r.streamId)),r.writes){if(!Array.isArray(r.writes))throw TypeError(".google.firestore.v1.WriteRequest.writes: array expected");b.writes=[];for(var S=0;S<r.writes.length;++S){if(typeof r.writes[S]!="object")throw TypeError(".google.firestore.v1.WriteRequest.writes: object expected");b.writes[S]=a.google.firestore.v1.Write.fromObject(r.writes[S])}}if(r.streamToken!=null&&(typeof r.streamToken=="string"?l.base64.decode(r.streamToken,b.streamToken=l.newBuffer(l.base64.length(r.streamToken)),0):0<=r.streamToken.length&&(b.streamToken=r.streamToken)),r.labels){if(typeof r.labels!="object")throw TypeError(".google.firestore.v1.WriteRequest.labels: object expected");b.labels={};for(var le=Object.keys(r.labels),S=0;S<le.length;++S)b.labels[le[S]]=String(r.labels[le[S]])}return b},c.toObject=function(r,b){var S,le={};if(((b=b||{}).arrays||b.defaults)&&(le.writes=[]),(b.objects||b.defaults)&&(le.labels={}),b.defaults&&(le.database="",le.streamId="",b.bytes===String?le.streamToken="":(le.streamToken=[],b.bytes!==Array&&(le.streamToken=l.newBuffer(le.streamToken)))),r.database!=null&&r.hasOwnProperty("database")&&(le.database=r.database),r.streamId!=null&&r.hasOwnProperty("streamId")&&(le.streamId=r.streamId),r.writes&&r.writes.length){le.writes=[];for(var et=0;et<r.writes.length;++et)le.writes[et]=a.google.firestore.v1.Write.toObject(r.writes[et],b)}if(r.streamToken!=null&&r.hasOwnProperty("streamToken")&&(le.streamToken=b.bytes===String?l.base64.encode(r.streamToken,0,r.streamToken.length):b.bytes===Array?Array.prototype.slice.call(r.streamToken):r.streamToken),r.labels&&(S=Object.keys(r.labels)).length)for(le.labels={},et=0;et<S.length;++et)le.labels[S[et]]=r.labels[S[et]];return le},c.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},c.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.WriteRequest"},c),g.WriteResponse=(N.prototype.streamId="",N.prototype.streamToken=l.newBuffer([]),N.prototype.writeResults=l.emptyArray,N.prototype.commitTime=null,N.fromObject=function(r){if(r instanceof a.google.firestore.v1.WriteResponse)return r;var b=new a.google.firestore.v1.WriteResponse;if(r.streamId!=null&&(b.streamId=String(r.streamId)),r.streamToken!=null&&(typeof r.streamToken=="string"?l.base64.decode(r.streamToken,b.streamToken=l.newBuffer(l.base64.length(r.streamToken)),0):0<=r.streamToken.length&&(b.streamToken=r.streamToken)),r.writeResults){if(!Array.isArray(r.writeResults))throw TypeError(".google.firestore.v1.WriteResponse.writeResults: array expected");b.writeResults=[];for(var S=0;S<r.writeResults.length;++S){if(typeof r.writeResults[S]!="object")throw TypeError(".google.firestore.v1.WriteResponse.writeResults: object expected");b.writeResults[S]=a.google.firestore.v1.WriteResult.fromObject(r.writeResults[S])}}if(r.commitTime!=null){if(typeof r.commitTime!="object")throw TypeError(".google.firestore.v1.WriteResponse.commitTime: object expected");b.commitTime=a.google.protobuf.Timestamp.fromObject(r.commitTime)}return b},N.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.writeResults=[]),b.defaults&&(S.streamId="",b.bytes===String?S.streamToken="":(S.streamToken=[],b.bytes!==Array&&(S.streamToken=l.newBuffer(S.streamToken))),S.commitTime=null),r.streamId!=null&&r.hasOwnProperty("streamId")&&(S.streamId=r.streamId),r.streamToken!=null&&r.hasOwnProperty("streamToken")&&(S.streamToken=b.bytes===String?l.base64.encode(r.streamToken,0,r.streamToken.length):b.bytes===Array?Array.prototype.slice.call(r.streamToken):r.streamToken),r.writeResults&&r.writeResults.length){S.writeResults=[];for(var le=0;le<r.writeResults.length;++le)S.writeResults[le]=a.google.firestore.v1.WriteResult.toObject(r.writeResults[le],b)}return r.commitTime!=null&&r.hasOwnProperty("commitTime")&&(S.commitTime=a.google.protobuf.Timestamp.toObject(r.commitTime,b)),S},N.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},N.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.WriteResponse"},N),g.ListenRequest=(A.prototype.database="",A.prototype.addTarget=null,A.prototype.removeTarget=null,A.prototype.labels=l.emptyObject,Object.defineProperty(A.prototype,"targetChange",{get:l.oneOfGetter(m=["addTarget","removeTarget"]),set:l.oneOfSetter(m)}),A.fromObject=function(r){if(r instanceof a.google.firestore.v1.ListenRequest)return r;var b=new a.google.firestore.v1.ListenRequest;if(r.database!=null&&(b.database=String(r.database)),r.addTarget!=null){if(typeof r.addTarget!="object")throw TypeError(".google.firestore.v1.ListenRequest.addTarget: object expected");b.addTarget=a.google.firestore.v1.Target.fromObject(r.addTarget)}if(r.removeTarget!=null&&(b.removeTarget=0|r.removeTarget),r.labels){if(typeof r.labels!="object")throw TypeError(".google.firestore.v1.ListenRequest.labels: object expected");b.labels={};for(var S=Object.keys(r.labels),le=0;le<S.length;++le)b.labels[S[le]]=String(r.labels[S[le]])}return b},A.toObject=function(r,b){var S,le={};if(((b=b||{}).objects||b.defaults)&&(le.labels={}),b.defaults&&(le.database=""),r.database!=null&&r.hasOwnProperty("database")&&(le.database=r.database),r.addTarget!=null&&r.hasOwnProperty("addTarget")&&(le.addTarget=a.google.firestore.v1.Target.toObject(r.addTarget,b),b.oneofs)&&(le.targetChange="addTarget"),r.removeTarget!=null&&r.hasOwnProperty("removeTarget")&&(le.removeTarget=r.removeTarget,b.oneofs)&&(le.targetChange="removeTarget"),r.labels&&(S=Object.keys(r.labels)).length){le.labels={};for(var et=0;et<S.length;++et)le.labels[S[et]]=r.labels[S[et]]}return le},A.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},A.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.ListenRequest"},A),g.ListenResponse=(V.prototype.targetChange=null,V.prototype.documentChange=null,V.prototype.documentDelete=null,V.prototype.documentRemove=null,V.prototype.filter=null,Object.defineProperty(V.prototype,"responseType",{get:l.oneOfGetter(m=["targetChange","documentChange","documentDelete","documentRemove","filter"]),set:l.oneOfSetter(m)}),V.fromObject=function(r){if(r instanceof a.google.firestore.v1.ListenResponse)return r;var b=new a.google.firestore.v1.ListenResponse;if(r.targetChange!=null){if(typeof r.targetChange!="object")throw TypeError(".google.firestore.v1.ListenResponse.targetChange: object expected");b.targetChange=a.google.firestore.v1.TargetChange.fromObject(r.targetChange)}if(r.documentChange!=null){if(typeof r.documentChange!="object")throw TypeError(".google.firestore.v1.ListenResponse.documentChange: object expected");b.documentChange=a.google.firestore.v1.DocumentChange.fromObject(r.documentChange)}if(r.documentDelete!=null){if(typeof r.documentDelete!="object")throw TypeError(".google.firestore.v1.ListenResponse.documentDelete: object expected");b.documentDelete=a.google.firestore.v1.DocumentDelete.fromObject(r.documentDelete)}if(r.documentRemove!=null){if(typeof r.documentRemove!="object")throw TypeError(".google.firestore.v1.ListenResponse.documentRemove: object expected");b.documentRemove=a.google.firestore.v1.DocumentRemove.fromObject(r.documentRemove)}if(r.filter!=null){if(typeof r.filter!="object")throw TypeError(".google.firestore.v1.ListenResponse.filter: object expected");b.filter=a.google.firestore.v1.ExistenceFilter.fromObject(r.filter)}return b},V.toObject=function(r,b){b=b||{};var S={};return r.targetChange!=null&&r.hasOwnProperty("targetChange")&&(S.targetChange=a.google.firestore.v1.TargetChange.toObject(r.targetChange,b),b.oneofs)&&(S.responseType="targetChange"),r.documentChange!=null&&r.hasOwnProperty("documentChange")&&(S.documentChange=a.google.firestore.v1.DocumentChange.toObject(r.documentChange,b),b.oneofs)&&(S.responseType="documentChange"),r.documentDelete!=null&&r.hasOwnProperty("documentDelete")&&(S.documentDelete=a.google.firestore.v1.DocumentDelete.toObject(r.documentDelete,b),b.oneofs)&&(S.responseType="documentDelete"),r.filter!=null&&r.hasOwnProperty("filter")&&(S.filter=a.google.firestore.v1.ExistenceFilter.toObject(r.filter,b),b.oneofs)&&(S.responseType="filter"),r.documentRemove!=null&&r.hasOwnProperty("documentRemove")&&(S.documentRemove=a.google.firestore.v1.DocumentRemove.toObject(r.documentRemove,b),b.oneofs)&&(S.responseType="documentRemove"),S},V.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},V.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.ListenResponse"},V),g.Target=(ne.prototype.query=null,ne.prototype.documents=null,ne.prototype.resumeToken=null,ne.prototype.readTime=null,ne.prototype.targetId=0,ne.prototype.once=!1,ne.prototype.expectedCount=null,Object.defineProperty(ne.prototype,"targetType",{get:l.oneOfGetter(m=["query","documents"]),set:l.oneOfSetter(m)}),Object.defineProperty(ne.prototype,"resumeType",{get:l.oneOfGetter(m=["resumeToken","readTime"]),set:l.oneOfSetter(m)}),ne.fromObject=function(r){if(r instanceof a.google.firestore.v1.Target)return r;var b=new a.google.firestore.v1.Target;if(r.query!=null){if(typeof r.query!="object")throw TypeError(".google.firestore.v1.Target.query: object expected");b.query=a.google.firestore.v1.Target.QueryTarget.fromObject(r.query)}if(r.documents!=null){if(typeof r.documents!="object")throw TypeError(".google.firestore.v1.Target.documents: object expected");b.documents=a.google.firestore.v1.Target.DocumentsTarget.fromObject(r.documents)}if(r.resumeToken!=null&&(typeof r.resumeToken=="string"?l.base64.decode(r.resumeToken,b.resumeToken=l.newBuffer(l.base64.length(r.resumeToken)),0):0<=r.resumeToken.length&&(b.resumeToken=r.resumeToken)),r.readTime!=null){if(typeof r.readTime!="object")throw TypeError(".google.firestore.v1.Target.readTime: object expected");b.readTime=a.google.protobuf.Timestamp.fromObject(r.readTime)}if(r.targetId!=null&&(b.targetId=0|r.targetId),r.once!=null&&(b.once=!!r.once),r.expectedCount!=null){if(typeof r.expectedCount!="object")throw TypeError(".google.firestore.v1.Target.expectedCount: object expected");b.expectedCount=a.google.protobuf.Int32Value.fromObject(r.expectedCount)}return b},ne.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.targetId=0,S.once=!1,S.expectedCount=null),r.query!=null&&r.hasOwnProperty("query")&&(S.query=a.google.firestore.v1.Target.QueryTarget.toObject(r.query,b),b.oneofs)&&(S.targetType="query"),r.documents!=null&&r.hasOwnProperty("documents")&&(S.documents=a.google.firestore.v1.Target.DocumentsTarget.toObject(r.documents,b),b.oneofs)&&(S.targetType="documents"),r.resumeToken!=null&&r.hasOwnProperty("resumeToken")&&(S.resumeToken=b.bytes===String?l.base64.encode(r.resumeToken,0,r.resumeToken.length):b.bytes===Array?Array.prototype.slice.call(r.resumeToken):r.resumeToken,b.oneofs)&&(S.resumeType="resumeToken"),r.targetId!=null&&r.hasOwnProperty("targetId")&&(S.targetId=r.targetId),r.once!=null&&r.hasOwnProperty("once")&&(S.once=r.once),r.readTime!=null&&r.hasOwnProperty("readTime")&&(S.readTime=a.google.protobuf.Timestamp.toObject(r.readTime,b),b.oneofs)&&(S.resumeType="readTime"),r.expectedCount!=null&&r.hasOwnProperty("expectedCount")&&(S.expectedCount=a.google.protobuf.Int32Value.toObject(r.expectedCount,b)),S},ne.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ne.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.Target"},ne.DocumentsTarget=(ce.prototype.documents=l.emptyArray,ce.fromObject=function(r){if(r instanceof a.google.firestore.v1.Target.DocumentsTarget)return r;var b=new a.google.firestore.v1.Target.DocumentsTarget;if(r.documents){if(!Array.isArray(r.documents))throw TypeError(".google.firestore.v1.Target.DocumentsTarget.documents: array expected");b.documents=[];for(var S=0;S<r.documents.length;++S)b.documents[S]=String(r.documents[S])}return b},ce.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.documents=[]),r.documents&&r.documents.length){S.documents=[];for(var le=0;le<r.documents.length;++le)S.documents[le]=r.documents[le]}return S},ce.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ce.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.Target.DocumentsTarget"},ce),ne.QueryTarget=(ie.prototype.parent="",ie.prototype.structuredQuery=null,Object.defineProperty(ie.prototype,"queryType",{get:l.oneOfGetter(m=["structuredQuery"]),set:l.oneOfSetter(m)}),ie.fromObject=function(r){if(r instanceof a.google.firestore.v1.Target.QueryTarget)return r;var b=new a.google.firestore.v1.Target.QueryTarget;if(r.parent!=null&&(b.parent=String(r.parent)),r.structuredQuery!=null){if(typeof r.structuredQuery!="object")throw TypeError(".google.firestore.v1.Target.QueryTarget.structuredQuery: object expected");b.structuredQuery=a.google.firestore.v1.StructuredQuery.fromObject(r.structuredQuery)}return b},ie.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.parent=""),r.parent!=null&&r.hasOwnProperty("parent")&&(S.parent=r.parent),r.structuredQuery!=null&&r.hasOwnProperty("structuredQuery")&&(S.structuredQuery=a.google.firestore.v1.StructuredQuery.toObject(r.structuredQuery,b),b.oneofs)&&(S.queryType="structuredQuery"),S},ie.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ie.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.Target.QueryTarget"},ie),ne),g.TargetChange=(u.prototype.targetChangeType=0,u.prototype.targetIds=l.emptyArray,u.prototype.cause=null,u.prototype.resumeToken=l.newBuffer([]),u.prototype.readTime=null,u.fromObject=function(r){if(r instanceof a.google.firestore.v1.TargetChange)return r;var b=new a.google.firestore.v1.TargetChange;switch(r.targetChangeType){default:typeof r.targetChangeType=="number"&&(b.targetChangeType=r.targetChangeType);break;case"NO_CHANGE":case 0:b.targetChangeType=0;break;case"ADD":case 1:b.targetChangeType=1;break;case"REMOVE":case 2:b.targetChangeType=2;break;case"CURRENT":case 3:b.targetChangeType=3;break;case"RESET":case 4:b.targetChangeType=4}if(r.targetIds){if(!Array.isArray(r.targetIds))throw TypeError(".google.firestore.v1.TargetChange.targetIds: array expected");b.targetIds=[];for(var S=0;S<r.targetIds.length;++S)b.targetIds[S]=0|r.targetIds[S]}if(r.cause!=null){if(typeof r.cause!="object")throw TypeError(".google.firestore.v1.TargetChange.cause: object expected");b.cause=a.google.rpc.Status.fromObject(r.cause)}if(r.resumeToken!=null&&(typeof r.resumeToken=="string"?l.base64.decode(r.resumeToken,b.resumeToken=l.newBuffer(l.base64.length(r.resumeToken)),0):0<=r.resumeToken.length&&(b.resumeToken=r.resumeToken)),r.readTime!=null){if(typeof r.readTime!="object")throw TypeError(".google.firestore.v1.TargetChange.readTime: object expected");b.readTime=a.google.protobuf.Timestamp.fromObject(r.readTime)}return b},u.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.targetIds=[]),b.defaults&&(S.targetChangeType=b.enums===String?"NO_CHANGE":0,S.cause=null,b.bytes===String?S.resumeToken="":(S.resumeToken=[],b.bytes!==Array&&(S.resumeToken=l.newBuffer(S.resumeToken))),S.readTime=null),r.targetChangeType!=null&&r.hasOwnProperty("targetChangeType")&&(S.targetChangeType=b.enums!==String||a.google.firestore.v1.TargetChange.TargetChangeType[r.targetChangeType]===void 0?r.targetChangeType:a.google.firestore.v1.TargetChange.TargetChangeType[r.targetChangeType]),r.targetIds&&r.targetIds.length){S.targetIds=[];for(var le=0;le<r.targetIds.length;++le)S.targetIds[le]=r.targetIds[le]}return r.cause!=null&&r.hasOwnProperty("cause")&&(S.cause=a.google.rpc.Status.toObject(r.cause,b)),r.resumeToken!=null&&r.hasOwnProperty("resumeToken")&&(S.resumeToken=b.bytes===String?l.base64.encode(r.resumeToken,0,r.resumeToken.length):b.bytes===Array?Array.prototype.slice.call(r.resumeToken):r.resumeToken),r.readTime!=null&&r.hasOwnProperty("readTime")&&(S.readTime=a.google.protobuf.Timestamp.toObject(r.readTime,b)),S},u.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},u.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.TargetChange"},u.TargetChangeType=(m={},(s=Object.create(m))[m[0]="NO_CHANGE"]="NO_CHANGE",s[m[1]="ADD"]="ADD",s[m[2]="REMOVE"]="REMOVE",s[m[3]="CURRENT"]="CURRENT",s[m[4]="RESET"]="RESET",s),u),g.ListCollectionIdsRequest=(P.prototype.parent="",P.prototype.pageSize=0,P.prototype.pageToken="",P.prototype.readTime=null,Object.defineProperty(P.prototype,"consistencySelector",{get:l.oneOfGetter(m=["readTime"]),set:l.oneOfSetter(m)}),P.fromObject=function(r){if(r instanceof a.google.firestore.v1.ListCollectionIdsRequest)return r;var b=new a.google.firestore.v1.ListCollectionIdsRequest;if(r.parent!=null&&(b.parent=String(r.parent)),r.pageSize!=null&&(b.pageSize=0|r.pageSize),r.pageToken!=null&&(b.pageToken=String(r.pageToken)),r.readTime!=null){if(typeof r.readTime!="object")throw TypeError(".google.firestore.v1.ListCollectionIdsRequest.readTime: object expected");b.readTime=a.google.protobuf.Timestamp.fromObject(r.readTime)}return b},P.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.parent="",S.pageSize=0,S.pageToken=""),r.parent!=null&&r.hasOwnProperty("parent")&&(S.parent=r.parent),r.pageSize!=null&&r.hasOwnProperty("pageSize")&&(S.pageSize=r.pageSize),r.pageToken!=null&&r.hasOwnProperty("pageToken")&&(S.pageToken=r.pageToken),r.readTime!=null&&r.hasOwnProperty("readTime")&&(S.readTime=a.google.protobuf.Timestamp.toObject(r.readTime,b),b.oneofs)&&(S.consistencySelector="readTime"),S},P.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},P.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.ListCollectionIdsRequest"},P),g.ListCollectionIdsResponse=(M.prototype.collectionIds=l.emptyArray,M.prototype.nextPageToken="",M.fromObject=function(r){if(r instanceof a.google.firestore.v1.ListCollectionIdsResponse)return r;var b=new a.google.firestore.v1.ListCollectionIdsResponse;if(r.collectionIds){if(!Array.isArray(r.collectionIds))throw TypeError(".google.firestore.v1.ListCollectionIdsResponse.collectionIds: array expected");b.collectionIds=[];for(var S=0;S<r.collectionIds.length;++S)b.collectionIds[S]=String(r.collectionIds[S])}return r.nextPageToken!=null&&(b.nextPageToken=String(r.nextPageToken)),b},M.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.collectionIds=[]),b.defaults&&(S.nextPageToken=""),r.collectionIds&&r.collectionIds.length){S.collectionIds=[];for(var le=0;le<r.collectionIds.length;++le)S.collectionIds[le]=r.collectionIds[le]}return r.nextPageToken!=null&&r.hasOwnProperty("nextPageToken")&&(S.nextPageToken=r.nextPageToken),S},M.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},M.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.ListCollectionIdsResponse"},M),g.BatchWriteRequest=(n.prototype.database="",n.prototype.writes=l.emptyArray,n.prototype.labels=l.emptyObject,n.fromObject=function(r){if(r instanceof a.google.firestore.v1.BatchWriteRequest)return r;var b=new a.google.firestore.v1.BatchWriteRequest;if(r.database!=null&&(b.database=String(r.database)),r.writes){if(!Array.isArray(r.writes))throw TypeError(".google.firestore.v1.BatchWriteRequest.writes: array expected");b.writes=[];for(var S=0;S<r.writes.length;++S){if(typeof r.writes[S]!="object")throw TypeError(".google.firestore.v1.BatchWriteRequest.writes: object expected");b.writes[S]=a.google.firestore.v1.Write.fromObject(r.writes[S])}}if(r.labels){if(typeof r.labels!="object")throw TypeError(".google.firestore.v1.BatchWriteRequest.labels: object expected");b.labels={};for(var le=Object.keys(r.labels),S=0;S<le.length;++S)b.labels[le[S]]=String(r.labels[le[S]])}return b},n.toObject=function(r,b){var S,le={};if(((b=b||{}).arrays||b.defaults)&&(le.writes=[]),(b.objects||b.defaults)&&(le.labels={}),b.defaults&&(le.database=""),r.database!=null&&r.hasOwnProperty("database")&&(le.database=r.database),r.writes&&r.writes.length){le.writes=[];for(var et=0;et<r.writes.length;++et)le.writes[et]=a.google.firestore.v1.Write.toObject(r.writes[et],b)}if(r.labels&&(S=Object.keys(r.labels)).length)for(le.labels={},et=0;et<S.length;++et)le.labels[S[et]]=r.labels[S[et]];return le},n.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},n.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.BatchWriteRequest"},n),g.BatchWriteResponse=(L.prototype.writeResults=l.emptyArray,L.prototype.status=l.emptyArray,L.fromObject=function(r){if(r instanceof a.google.firestore.v1.BatchWriteResponse)return r;var b=new a.google.firestore.v1.BatchWriteResponse;if(r.writeResults){if(!Array.isArray(r.writeResults))throw TypeError(".google.firestore.v1.BatchWriteResponse.writeResults: array expected");b.writeResults=[];for(var S=0;S<r.writeResults.length;++S){if(typeof r.writeResults[S]!="object")throw TypeError(".google.firestore.v1.BatchWriteResponse.writeResults: object expected");b.writeResults[S]=a.google.firestore.v1.WriteResult.fromObject(r.writeResults[S])}}if(r.status){if(!Array.isArray(r.status))throw TypeError(".google.firestore.v1.BatchWriteResponse.status: array expected");for(b.status=[],S=0;S<r.status.length;++S){if(typeof r.status[S]!="object")throw TypeError(".google.firestore.v1.BatchWriteResponse.status: object expected");b.status[S]=a.google.rpc.Status.fromObject(r.status[S])}}return b},L.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.writeResults=[],S.status=[]),r.writeResults&&r.writeResults.length){S.writeResults=[];for(var le=0;le<r.writeResults.length;++le)S.writeResults[le]=a.google.firestore.v1.WriteResult.toObject(r.writeResults[le],b)}if(r.status&&r.status.length)for(S.status=[],le=0;le<r.status.length;++le)S.status[le]=a.google.rpc.Status.toObject(r.status[le],b);return S},L.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},L.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.BatchWriteResponse"},L),g.StructuredQuery=(U.prototype.select=null,U.prototype.from=l.emptyArray,U.prototype.where=null,U.prototype.orderBy=l.emptyArray,U.prototype.startAt=null,U.prototype.endAt=null,U.prototype.offset=0,U.prototype.limit=null,U.prototype.findNearest=null,U.fromObject=function(r){if(r instanceof a.google.firestore.v1.StructuredQuery)return r;var b=new a.google.firestore.v1.StructuredQuery;if(r.select!=null){if(typeof r.select!="object")throw TypeError(".google.firestore.v1.StructuredQuery.select: object expected");b.select=a.google.firestore.v1.StructuredQuery.Projection.fromObject(r.select)}if(r.from){if(!Array.isArray(r.from))throw TypeError(".google.firestore.v1.StructuredQuery.from: array expected");b.from=[];for(var S=0;S<r.from.length;++S){if(typeof r.from[S]!="object")throw TypeError(".google.firestore.v1.StructuredQuery.from: object expected");b.from[S]=a.google.firestore.v1.StructuredQuery.CollectionSelector.fromObject(r.from[S])}}if(r.where!=null){if(typeof r.where!="object")throw TypeError(".google.firestore.v1.StructuredQuery.where: object expected");b.where=a.google.firestore.v1.StructuredQuery.Filter.fromObject(r.where)}if(r.orderBy){if(!Array.isArray(r.orderBy))throw TypeError(".google.firestore.v1.StructuredQuery.orderBy: array expected");for(b.orderBy=[],S=0;S<r.orderBy.length;++S){if(typeof r.orderBy[S]!="object")throw TypeError(".google.firestore.v1.StructuredQuery.orderBy: object expected");b.orderBy[S]=a.google.firestore.v1.StructuredQuery.Order.fromObject(r.orderBy[S])}}if(r.startAt!=null){if(typeof r.startAt!="object")throw TypeError(".google.firestore.v1.StructuredQuery.startAt: object expected");b.startAt=a.google.firestore.v1.Cursor.fromObject(r.startAt)}if(r.endAt!=null){if(typeof r.endAt!="object")throw TypeError(".google.firestore.v1.StructuredQuery.endAt: object expected");b.endAt=a.google.firestore.v1.Cursor.fromObject(r.endAt)}if(r.offset!=null&&(b.offset=0|r.offset),r.limit!=null){if(typeof r.limit!="object")throw TypeError(".google.firestore.v1.StructuredQuery.limit: object expected");b.limit=a.google.protobuf.Int32Value.fromObject(r.limit)}if(r.findNearest!=null){if(typeof r.findNearest!="object")throw TypeError(".google.firestore.v1.StructuredQuery.findNearest: object expected");b.findNearest=a.google.firestore.v1.StructuredQuery.FindNearest.fromObject(r.findNearest)}return b},U.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.from=[],S.orderBy=[]),b.defaults&&(S.select=null,S.where=null,S.limit=null,S.offset=0,S.startAt=null,S.endAt=null,S.findNearest=null),r.select!=null&&r.hasOwnProperty("select")&&(S.select=a.google.firestore.v1.StructuredQuery.Projection.toObject(r.select,b)),r.from&&r.from.length){S.from=[];for(var le=0;le<r.from.length;++le)S.from[le]=a.google.firestore.v1.StructuredQuery.CollectionSelector.toObject(r.from[le],b)}if(r.where!=null&&r.hasOwnProperty("where")&&(S.where=a.google.firestore.v1.StructuredQuery.Filter.toObject(r.where,b)),r.orderBy&&r.orderBy.length)for(S.orderBy=[],le=0;le<r.orderBy.length;++le)S.orderBy[le]=a.google.firestore.v1.StructuredQuery.Order.toObject(r.orderBy[le],b);return r.limit!=null&&r.hasOwnProperty("limit")&&(S.limit=a.google.protobuf.Int32Value.toObject(r.limit,b)),r.offset!=null&&r.hasOwnProperty("offset")&&(S.offset=r.offset),r.startAt!=null&&r.hasOwnProperty("startAt")&&(S.startAt=a.google.firestore.v1.Cursor.toObject(r.startAt,b)),r.endAt!=null&&r.hasOwnProperty("endAt")&&(S.endAt=a.google.firestore.v1.Cursor.toObject(r.endAt,b)),r.findNearest!=null&&r.hasOwnProperty("findNearest")&&(S.findNearest=a.google.firestore.v1.StructuredQuery.FindNearest.toObject(r.findNearest,b)),S},U.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},U.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.StructuredQuery"},U.CollectionSelector=(X.prototype.collectionId="",X.prototype.allDescendants=!1,X.fromObject=function(r){var b;return r instanceof a.google.firestore.v1.StructuredQuery.CollectionSelector?r:(b=new a.google.firestore.v1.StructuredQuery.CollectionSelector,r.collectionId!=null&&(b.collectionId=String(r.collectionId)),r.allDescendants!=null&&(b.allDescendants=!!r.allDescendants),b)},X.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.collectionId="",S.allDescendants=!1),r.collectionId!=null&&r.hasOwnProperty("collectionId")&&(S.collectionId=r.collectionId),r.allDescendants!=null&&r.hasOwnProperty("allDescendants")&&(S.allDescendants=r.allDescendants),S},X.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},X.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.StructuredQuery.CollectionSelector"},X),U.Filter=(me.prototype.compositeFilter=null,me.prototype.fieldFilter=null,me.prototype.unaryFilter=null,Object.defineProperty(me.prototype,"filterType",{get:l.oneOfGetter(s=["compositeFilter","fieldFilter","unaryFilter"]),set:l.oneOfSetter(s)}),me.fromObject=function(r){if(r instanceof a.google.firestore.v1.StructuredQuery.Filter)return r;var b=new a.google.firestore.v1.StructuredQuery.Filter;if(r.compositeFilter!=null){if(typeof r.compositeFilter!="object")throw TypeError(".google.firestore.v1.StructuredQuery.Filter.compositeFilter: object expected");b.compositeFilter=a.google.firestore.v1.StructuredQuery.CompositeFilter.fromObject(r.compositeFilter)}if(r.fieldFilter!=null){if(typeof r.fieldFilter!="object")throw TypeError(".google.firestore.v1.StructuredQuery.Filter.fieldFilter: object expected");b.fieldFilter=a.google.firestore.v1.StructuredQuery.FieldFilter.fromObject(r.fieldFilter)}if(r.unaryFilter!=null){if(typeof r.unaryFilter!="object")throw TypeError(".google.firestore.v1.StructuredQuery.Filter.unaryFilter: object expected");b.unaryFilter=a.google.firestore.v1.StructuredQuery.UnaryFilter.fromObject(r.unaryFilter)}return b},me.toObject=function(r,b){b=b||{};var S={};return r.compositeFilter!=null&&r.hasOwnProperty("compositeFilter")&&(S.compositeFilter=a.google.firestore.v1.StructuredQuery.CompositeFilter.toObject(r.compositeFilter,b),b.oneofs)&&(S.filterType="compositeFilter"),r.fieldFilter!=null&&r.hasOwnProperty("fieldFilter")&&(S.fieldFilter=a.google.firestore.v1.StructuredQuery.FieldFilter.toObject(r.fieldFilter,b),b.oneofs)&&(S.filterType="fieldFilter"),r.unaryFilter!=null&&r.hasOwnProperty("unaryFilter")&&(S.unaryFilter=a.google.firestore.v1.StructuredQuery.UnaryFilter.toObject(r.unaryFilter,b),b.oneofs)&&(S.filterType="unaryFilter"),S},me.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},me.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.StructuredQuery.Filter"},me),U.CompositeFilter=(Ie.prototype.op=0,Ie.prototype.filters=l.emptyArray,Ie.fromObject=function(r){if(r instanceof a.google.firestore.v1.StructuredQuery.CompositeFilter)return r;var b=new a.google.firestore.v1.StructuredQuery.CompositeFilter;switch(r.op){default:typeof r.op=="number"&&(b.op=r.op);break;case"OPERATOR_UNSPECIFIED":case 0:b.op=0;break;case"AND":case 1:b.op=1;break;case"OR":case 2:b.op=2}if(r.filters){if(!Array.isArray(r.filters))throw TypeError(".google.firestore.v1.StructuredQuery.CompositeFilter.filters: array expected");b.filters=[];for(var S=0;S<r.filters.length;++S){if(typeof r.filters[S]!="object")throw TypeError(".google.firestore.v1.StructuredQuery.CompositeFilter.filters: object expected");b.filters[S]=a.google.firestore.v1.StructuredQuery.Filter.fromObject(r.filters[S])}}return b},Ie.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.filters=[]),b.defaults&&(S.op=b.enums===String?"OPERATOR_UNSPECIFIED":0),r.op!=null&&r.hasOwnProperty("op")&&(S.op=b.enums!==String||a.google.firestore.v1.StructuredQuery.CompositeFilter.Operator[r.op]===void 0?r.op:a.google.firestore.v1.StructuredQuery.CompositeFilter.Operator[r.op]),r.filters&&r.filters.length){S.filters=[];for(var le=0;le<r.filters.length;++le)S.filters[le]=a.google.firestore.v1.StructuredQuery.Filter.toObject(r.filters[le],b)}return S},Ie.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Ie.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.StructuredQuery.CompositeFilter"},Ie.Operator=(s={},(m=Object.create(s))[s[0]="OPERATOR_UNSPECIFIED"]="OPERATOR_UNSPECIFIED",m[s[1]="AND"]="AND",m[s[2]="OR"]="OR",m),Ie),U.FieldFilter=(Le.prototype.field=null,Le.prototype.op=0,Le.prototype.value=null,Le.fromObject=function(r){if(r instanceof a.google.firestore.v1.StructuredQuery.FieldFilter)return r;var b=new a.google.firestore.v1.StructuredQuery.FieldFilter;if(r.field!=null){if(typeof r.field!="object")throw TypeError(".google.firestore.v1.StructuredQuery.FieldFilter.field: object expected");b.field=a.google.firestore.v1.StructuredQuery.FieldReference.fromObject(r.field)}switch(r.op){default:typeof r.op=="number"&&(b.op=r.op);break;case"OPERATOR_UNSPECIFIED":case 0:b.op=0;break;case"LESS_THAN":case 1:b.op=1;break;case"LESS_THAN_OR_EQUAL":case 2:b.op=2;break;case"GREATER_THAN":case 3:b.op=3;break;case"GREATER_THAN_OR_EQUAL":case 4:b.op=4;break;case"EQUAL":case 5:b.op=5;break;case"NOT_EQUAL":case 6:b.op=6;break;case"ARRAY_CONTAINS":case 7:b.op=7;break;case"IN":case 8:b.op=8;break;case"ARRAY_CONTAINS_ANY":case 9:b.op=9;break;case"NOT_IN":case 10:b.op=10}if(r.value!=null){if(typeof r.value!="object")throw TypeError(".google.firestore.v1.StructuredQuery.FieldFilter.value: object expected");b.value=a.google.firestore.v1.Value.fromObject(r.value)}return b},Le.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.field=null,S.op=b.enums===String?"OPERATOR_UNSPECIFIED":0,S.value=null),r.field!=null&&r.hasOwnProperty("field")&&(S.field=a.google.firestore.v1.StructuredQuery.FieldReference.toObject(r.field,b)),r.op!=null&&r.hasOwnProperty("op")&&(S.op=b.enums!==String||a.google.firestore.v1.StructuredQuery.FieldFilter.Operator[r.op]===void 0?r.op:a.google.firestore.v1.StructuredQuery.FieldFilter.Operator[r.op]),r.value!=null&&r.hasOwnProperty("value")&&(S.value=a.google.firestore.v1.Value.toObject(r.value,b)),S},Le.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Le.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.StructuredQuery.FieldFilter"},Le.Operator=(s={},(m=Object.create(s))[s[0]="OPERATOR_UNSPECIFIED"]="OPERATOR_UNSPECIFIED",m[s[1]="LESS_THAN"]="LESS_THAN",m[s[2]="LESS_THAN_OR_EQUAL"]="LESS_THAN_OR_EQUAL",m[s[3]="GREATER_THAN"]="GREATER_THAN",m[s[4]="GREATER_THAN_OR_EQUAL"]="GREATER_THAN_OR_EQUAL",m[s[5]="EQUAL"]="EQUAL",m[s[6]="NOT_EQUAL"]="NOT_EQUAL",m[s[7]="ARRAY_CONTAINS"]="ARRAY_CONTAINS",m[s[8]="IN"]="IN",m[s[9]="ARRAY_CONTAINS_ANY"]="ARRAY_CONTAINS_ANY",m[s[10]="NOT_IN"]="NOT_IN",m),Le),U.UnaryFilter=(ke.prototype.op=0,ke.prototype.field=null,Object.defineProperty(ke.prototype,"operandType",{get:l.oneOfGetter(s=["field"]),set:l.oneOfSetter(s)}),ke.fromObject=function(r){if(r instanceof a.google.firestore.v1.StructuredQuery.UnaryFilter)return r;var b=new a.google.firestore.v1.StructuredQuery.UnaryFilter;switch(r.op){default:typeof r.op=="number"&&(b.op=r.op);break;case"OPERATOR_UNSPECIFIED":case 0:b.op=0;break;case"IS_NAN":case 2:b.op=2;break;case"IS_NULL":case 3:b.op=3;break;case"IS_NOT_NAN":case 4:b.op=4;break;case"IS_NOT_NULL":case 5:b.op=5}if(r.field!=null){if(typeof r.field!="object")throw TypeError(".google.firestore.v1.StructuredQuery.UnaryFilter.field: object expected");b.field=a.google.firestore.v1.StructuredQuery.FieldReference.fromObject(r.field)}return b},ke.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.op=b.enums===String?"OPERATOR_UNSPECIFIED":0),r.op!=null&&r.hasOwnProperty("op")&&(S.op=b.enums!==String||a.google.firestore.v1.StructuredQuery.UnaryFilter.Operator[r.op]===void 0?r.op:a.google.firestore.v1.StructuredQuery.UnaryFilter.Operator[r.op]),r.field!=null&&r.hasOwnProperty("field")&&(S.field=a.google.firestore.v1.StructuredQuery.FieldReference.toObject(r.field,b),b.oneofs)&&(S.operandType="field"),S},ke.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ke.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.StructuredQuery.UnaryFilter"},ke.Operator=(s={},(m=Object.create(s))[s[0]="OPERATOR_UNSPECIFIED"]="OPERATOR_UNSPECIFIED",m[s[2]="IS_NAN"]="IS_NAN",m[s[3]="IS_NULL"]="IS_NULL",m[s[4]="IS_NOT_NAN"]="IS_NOT_NAN",m[s[5]="IS_NOT_NULL"]="IS_NOT_NULL",m),ke),U.Order=(ze.prototype.field=null,ze.prototype.direction=0,ze.fromObject=function(r){if(r instanceof a.google.firestore.v1.StructuredQuery.Order)return r;var b=new a.google.firestore.v1.StructuredQuery.Order;if(r.field!=null){if(typeof r.field!="object")throw TypeError(".google.firestore.v1.StructuredQuery.Order.field: object expected");b.field=a.google.firestore.v1.StructuredQuery.FieldReference.fromObject(r.field)}switch(r.direction){default:typeof r.direction=="number"&&(b.direction=r.direction);break;case"DIRECTION_UNSPECIFIED":case 0:b.direction=0;break;case"ASCENDING":case 1:b.direction=1;break;case"DESCENDING":case 2:b.direction=2}return b},ze.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.field=null,S.direction=b.enums===String?"DIRECTION_UNSPECIFIED":0),r.field!=null&&r.hasOwnProperty("field")&&(S.field=a.google.firestore.v1.StructuredQuery.FieldReference.toObject(r.field,b)),r.direction!=null&&r.hasOwnProperty("direction")&&(S.direction=b.enums!==String||a.google.firestore.v1.StructuredQuery.Direction[r.direction]===void 0?r.direction:a.google.firestore.v1.StructuredQuery.Direction[r.direction]),S},ze.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ze.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.StructuredQuery.Order"},ze),U.Direction=(s={},(m=Object.create(s))[s[0]="DIRECTION_UNSPECIFIED"]="DIRECTION_UNSPECIFIED",m[s[1]="ASCENDING"]="ASCENDING",m[s[2]="DESCENDING"]="DESCENDING",m),U.FieldReference=(nt.prototype.fieldPath="",nt.fromObject=function(r){var b;return r instanceof a.google.firestore.v1.StructuredQuery.FieldReference?r:(b=new a.google.firestore.v1.StructuredQuery.FieldReference,r.fieldPath!=null&&(b.fieldPath=String(r.fieldPath)),b)},nt.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.fieldPath=""),r.fieldPath!=null&&r.hasOwnProperty("fieldPath")&&(S.fieldPath=r.fieldPath),S},nt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},nt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.StructuredQuery.FieldReference"},nt),U.Projection=(bt.prototype.fields=l.emptyArray,bt.fromObject=function(r){if(r instanceof a.google.firestore.v1.StructuredQuery.Projection)return r;var b=new a.google.firestore.v1.StructuredQuery.Projection;if(r.fields){if(!Array.isArray(r.fields))throw TypeError(".google.firestore.v1.StructuredQuery.Projection.fields: array expected");b.fields=[];for(var S=0;S<r.fields.length;++S){if(typeof r.fields[S]!="object")throw TypeError(".google.firestore.v1.StructuredQuery.Projection.fields: object expected");b.fields[S]=a.google.firestore.v1.StructuredQuery.FieldReference.fromObject(r.fields[S])}}return b},bt.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.fields=[]),r.fields&&r.fields.length){S.fields=[];for(var le=0;le<r.fields.length;++le)S.fields[le]=a.google.firestore.v1.StructuredQuery.FieldReference.toObject(r.fields[le],b)}return S},bt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},bt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.StructuredQuery.Projection"},bt),U.FindNearest=(dt.prototype.vectorField=null,dt.prototype.queryVector=null,dt.prototype.distanceMeasure=0,dt.prototype.limit=null,dt.prototype.distanceResultField="",dt.prototype.distanceThreshold=null,dt.fromObject=function(r){if(r instanceof a.google.firestore.v1.StructuredQuery.FindNearest)return r;var b=new a.google.firestore.v1.StructuredQuery.FindNearest;if(r.vectorField!=null){if(typeof r.vectorField!="object")throw TypeError(".google.firestore.v1.StructuredQuery.FindNearest.vectorField: object expected");b.vectorField=a.google.firestore.v1.StructuredQuery.FieldReference.fromObject(r.vectorField)}if(r.queryVector!=null){if(typeof r.queryVector!="object")throw TypeError(".google.firestore.v1.StructuredQuery.FindNearest.queryVector: object expected");b.queryVector=a.google.firestore.v1.Value.fromObject(r.queryVector)}switch(r.distanceMeasure){default:typeof r.distanceMeasure=="number"&&(b.distanceMeasure=r.distanceMeasure);break;case"DISTANCE_MEASURE_UNSPECIFIED":case 0:b.distanceMeasure=0;break;case"EUCLIDEAN":case 1:b.distanceMeasure=1;break;case"COSINE":case 2:b.distanceMeasure=2;break;case"DOT_PRODUCT":case 3:b.distanceMeasure=3}if(r.limit!=null){if(typeof r.limit!="object")throw TypeError(".google.firestore.v1.StructuredQuery.FindNearest.limit: object expected");b.limit=a.google.protobuf.Int32Value.fromObject(r.limit)}if(r.distanceResultField!=null&&(b.distanceResultField=String(r.distanceResultField)),r.distanceThreshold!=null){if(typeof r.distanceThreshold!="object")throw TypeError(".google.firestore.v1.StructuredQuery.FindNearest.distanceThreshold: object expected");b.distanceThreshold=a.google.protobuf.DoubleValue.fromObject(r.distanceThreshold)}return b},dt.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.vectorField=null,S.queryVector=null,S.distanceMeasure=b.enums===String?"DISTANCE_MEASURE_UNSPECIFIED":0,S.limit=null,S.distanceResultField="",S.distanceThreshold=null),r.vectorField!=null&&r.hasOwnProperty("vectorField")&&(S.vectorField=a.google.firestore.v1.StructuredQuery.FieldReference.toObject(r.vectorField,b)),r.queryVector!=null&&r.hasOwnProperty("queryVector")&&(S.queryVector=a.google.firestore.v1.Value.toObject(r.queryVector,b)),r.distanceMeasure!=null&&r.hasOwnProperty("distanceMeasure")&&(S.distanceMeasure=b.enums!==String||a.google.firestore.v1.StructuredQuery.FindNearest.DistanceMeasure[r.distanceMeasure]===void 0?r.distanceMeasure:a.google.firestore.v1.StructuredQuery.FindNearest.DistanceMeasure[r.distanceMeasure]),r.limit!=null&&r.hasOwnProperty("limit")&&(S.limit=a.google.protobuf.Int32Value.toObject(r.limit,b)),r.distanceResultField!=null&&r.hasOwnProperty("distanceResultField")&&(S.distanceResultField=r.distanceResultField),r.distanceThreshold!=null&&r.hasOwnProperty("distanceThreshold")&&(S.distanceThreshold=a.google.protobuf.DoubleValue.toObject(r.distanceThreshold,b)),S},dt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},dt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.StructuredQuery.FindNearest"},dt.DistanceMeasure=(s={},(m=Object.create(s))[s[0]="DISTANCE_MEASURE_UNSPECIFIED"]="DISTANCE_MEASURE_UNSPECIFIED",m[s[1]="EUCLIDEAN"]="EUCLIDEAN",m[s[2]="COSINE"]="COSINE",m[s[3]="DOT_PRODUCT"]="DOT_PRODUCT",m),dt),U),g.StructuredAggregationQuery=(Et.prototype.structuredQuery=null,Et.prototype.aggregations=l.emptyArray,Object.defineProperty(Et.prototype,"queryType",{get:l.oneOfGetter(s=["structuredQuery"]),set:l.oneOfSetter(s)}),Et.fromObject=function(r){if(r instanceof a.google.firestore.v1.StructuredAggregationQuery)return r;var b=new a.google.firestore.v1.StructuredAggregationQuery;if(r.structuredQuery!=null){if(typeof r.structuredQuery!="object")throw TypeError(".google.firestore.v1.StructuredAggregationQuery.structuredQuery: object expected");b.structuredQuery=a.google.firestore.v1.StructuredQuery.fromObject(r.structuredQuery)}if(r.aggregations){if(!Array.isArray(r.aggregations))throw TypeError(".google.firestore.v1.StructuredAggregationQuery.aggregations: array expected");b.aggregations=[];for(var S=0;S<r.aggregations.length;++S){if(typeof r.aggregations[S]!="object")throw TypeError(".google.firestore.v1.StructuredAggregationQuery.aggregations: object expected");b.aggregations[S]=a.google.firestore.v1.StructuredAggregationQuery.Aggregation.fromObject(r.aggregations[S])}}return b},Et.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.aggregations=[]),r.structuredQuery!=null&&r.hasOwnProperty("structuredQuery")&&(S.structuredQuery=a.google.firestore.v1.StructuredQuery.toObject(r.structuredQuery,b),b.oneofs)&&(S.queryType="structuredQuery"),r.aggregations&&r.aggregations.length){S.aggregations=[];for(var le=0;le<r.aggregations.length;++le)S.aggregations[le]=a.google.firestore.v1.StructuredAggregationQuery.Aggregation.toObject(r.aggregations[le],b)}return S},Et.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Et.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.StructuredAggregationQuery"},Et.Aggregation=(lt.prototype.count=null,lt.prototype.sum=null,lt.prototype.avg=null,lt.prototype.alias="",Object.defineProperty(lt.prototype,"operator",{get:l.oneOfGetter(s=["count","sum","avg"]),set:l.oneOfSetter(s)}),lt.fromObject=function(r){if(r instanceof a.google.firestore.v1.StructuredAggregationQuery.Aggregation)return r;var b=new a.google.firestore.v1.StructuredAggregationQuery.Aggregation;if(r.count!=null){if(typeof r.count!="object")throw TypeError(".google.firestore.v1.StructuredAggregationQuery.Aggregation.count: object expected");b.count=a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Count.fromObject(r.count)}if(r.sum!=null){if(typeof r.sum!="object")throw TypeError(".google.firestore.v1.StructuredAggregationQuery.Aggregation.sum: object expected");b.sum=a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Sum.fromObject(r.sum)}if(r.avg!=null){if(typeof r.avg!="object")throw TypeError(".google.firestore.v1.StructuredAggregationQuery.Aggregation.avg: object expected");b.avg=a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Avg.fromObject(r.avg)}return r.alias!=null&&(b.alias=String(r.alias)),b},lt.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.alias=""),r.count!=null&&r.hasOwnProperty("count")&&(S.count=a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Count.toObject(r.count,b),b.oneofs)&&(S.operator="count"),r.sum!=null&&r.hasOwnProperty("sum")&&(S.sum=a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Sum.toObject(r.sum,b),b.oneofs)&&(S.operator="sum"),r.avg!=null&&r.hasOwnProperty("avg")&&(S.avg=a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Avg.toObject(r.avg,b),b.oneofs)&&(S.operator="avg"),r.alias!=null&&r.hasOwnProperty("alias")&&(S.alias=r.alias),S},lt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},lt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.StructuredAggregationQuery.Aggregation"},lt.Count=(Be.prototype.upTo=null,Be.fromObject=function(r){if(r instanceof a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Count)return r;var b=new a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Count;if(r.upTo!=null){if(typeof r.upTo!="object")throw TypeError(".google.firestore.v1.StructuredAggregationQuery.Aggregation.Count.upTo: object expected");b.upTo=a.google.protobuf.Int64Value.fromObject(r.upTo)}return b},Be.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.upTo=null),r.upTo!=null&&r.hasOwnProperty("upTo")&&(S.upTo=a.google.protobuf.Int64Value.toObject(r.upTo,b)),S},Be.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Be.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.StructuredAggregationQuery.Aggregation.Count"},Be),lt.Sum=(Me.prototype.field=null,Me.fromObject=function(r){if(r instanceof a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Sum)return r;var b=new a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Sum;if(r.field!=null){if(typeof r.field!="object")throw TypeError(".google.firestore.v1.StructuredAggregationQuery.Aggregation.Sum.field: object expected");b.field=a.google.firestore.v1.StructuredQuery.FieldReference.fromObject(r.field)}return b},Me.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.field=null),r.field!=null&&r.hasOwnProperty("field")&&(S.field=a.google.firestore.v1.StructuredQuery.FieldReference.toObject(r.field,b)),S},Me.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Me.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.StructuredAggregationQuery.Aggregation.Sum"},Me),lt.Avg=(Ve.prototype.field=null,Ve.fromObject=function(r){if(r instanceof a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Avg)return r;var b=new a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Avg;if(r.field!=null){if(typeof r.field!="object")throw TypeError(".google.firestore.v1.StructuredAggregationQuery.Aggregation.Avg.field: object expected");b.field=a.google.firestore.v1.StructuredQuery.FieldReference.fromObject(r.field)}return b},Ve.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.field=null),r.field!=null&&r.hasOwnProperty("field")&&(S.field=a.google.firestore.v1.StructuredQuery.FieldReference.toObject(r.field,b)),S},Ve.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Ve.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.StructuredAggregationQuery.Aggregation.Avg"},Ve),lt),Et),g.Cursor=(Je.prototype.values=l.emptyArray,Je.prototype.before=!1,Je.fromObject=function(r){if(r instanceof a.google.firestore.v1.Cursor)return r;var b=new a.google.firestore.v1.Cursor;if(r.values){if(!Array.isArray(r.values))throw TypeError(".google.firestore.v1.Cursor.values: array expected");b.values=[];for(var S=0;S<r.values.length;++S){if(typeof r.values[S]!="object")throw TypeError(".google.firestore.v1.Cursor.values: object expected");b.values[S]=a.google.firestore.v1.Value.fromObject(r.values[S])}}return r.before!=null&&(b.before=!!r.before),b},Je.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.values=[]),b.defaults&&(S.before=!1),r.values&&r.values.length){S.values=[];for(var le=0;le<r.values.length;++le)S.values[le]=a.google.firestore.v1.Value.toObject(r.values[le],b)}return r.before!=null&&r.hasOwnProperty("before")&&(S.before=r.before),S},Je.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Je.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.Cursor"},Je),g.ExplainOptions=(Qe.prototype.analyze=!1,Qe.fromObject=function(r){var b;return r instanceof a.google.firestore.v1.ExplainOptions?r:(b=new a.google.firestore.v1.ExplainOptions,r.analyze!=null&&(b.analyze=!!r.analyze),b)},Qe.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.analyze=!1),r.analyze!=null&&r.hasOwnProperty("analyze")&&(S.analyze=r.analyze),S},Qe.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Qe.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.ExplainOptions"},Qe),g.ExplainMetrics=(st.prototype.planSummary=null,st.prototype.executionStats=null,st.fromObject=function(r){if(r instanceof a.google.firestore.v1.ExplainMetrics)return r;var b=new a.google.firestore.v1.ExplainMetrics;if(r.planSummary!=null){if(typeof r.planSummary!="object")throw TypeError(".google.firestore.v1.ExplainMetrics.planSummary: object expected");b.planSummary=a.google.firestore.v1.PlanSummary.fromObject(r.planSummary)}if(r.executionStats!=null){if(typeof r.executionStats!="object")throw TypeError(".google.firestore.v1.ExplainMetrics.executionStats: object expected");b.executionStats=a.google.firestore.v1.ExecutionStats.fromObject(r.executionStats)}return b},st.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.planSummary=null,S.executionStats=null),r.planSummary!=null&&r.hasOwnProperty("planSummary")&&(S.planSummary=a.google.firestore.v1.PlanSummary.toObject(r.planSummary,b)),r.executionStats!=null&&r.hasOwnProperty("executionStats")&&(S.executionStats=a.google.firestore.v1.ExecutionStats.toObject(r.executionStats,b)),S},st.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},st.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.ExplainMetrics"},st),g.PlanSummary=(gt.prototype.indexesUsed=l.emptyArray,gt.fromObject=function(r){if(r instanceof a.google.firestore.v1.PlanSummary)return r;var b=new a.google.firestore.v1.PlanSummary;if(r.indexesUsed){if(!Array.isArray(r.indexesUsed))throw TypeError(".google.firestore.v1.PlanSummary.indexesUsed: array expected");b.indexesUsed=[];for(var S=0;S<r.indexesUsed.length;++S){if(typeof r.indexesUsed[S]!="object")throw TypeError(".google.firestore.v1.PlanSummary.indexesUsed: object expected");b.indexesUsed[S]=a.google.protobuf.Struct.fromObject(r.indexesUsed[S])}}return b},gt.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.indexesUsed=[]),r.indexesUsed&&r.indexesUsed.length){S.indexesUsed=[];for(var le=0;le<r.indexesUsed.length;++le)S.indexesUsed[le]=a.google.protobuf.Struct.toObject(r.indexesUsed[le],b)}return S},gt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},gt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.PlanSummary"},gt),g.ExecutionStats=(St.prototype.resultsReturned=l.Long?l.Long.fromBits(0,0,!1):0,St.prototype.executionDuration=null,St.prototype.readOperations=l.Long?l.Long.fromBits(0,0,!1):0,St.prototype.debugStats=null,St.fromObject=function(r){if(r instanceof a.google.firestore.v1.ExecutionStats)return r;var b=new a.google.firestore.v1.ExecutionStats;if(r.resultsReturned!=null&&(l.Long?(b.resultsReturned=l.Long.fromValue(r.resultsReturned)).unsigned=!1:typeof r.resultsReturned=="string"?b.resultsReturned=parseInt(r.resultsReturned,10):typeof r.resultsReturned=="number"?b.resultsReturned=r.resultsReturned:typeof r.resultsReturned=="object"&&(b.resultsReturned=new l.LongBits(r.resultsReturned.low>>>0,r.resultsReturned.high>>>0).toNumber())),r.executionDuration!=null){if(typeof r.executionDuration!="object")throw TypeError(".google.firestore.v1.ExecutionStats.executionDuration: object expected");b.executionDuration=a.google.protobuf.Duration.fromObject(r.executionDuration)}if(r.readOperations!=null&&(l.Long?(b.readOperations=l.Long.fromValue(r.readOperations)).unsigned=!1:typeof r.readOperations=="string"?b.readOperations=parseInt(r.readOperations,10):typeof r.readOperations=="number"?b.readOperations=r.readOperations:typeof r.readOperations=="object"&&(b.readOperations=new l.LongBits(r.readOperations.low>>>0,r.readOperations.high>>>0).toNumber())),r.debugStats!=null){if(typeof r.debugStats!="object")throw TypeError(".google.firestore.v1.ExecutionStats.debugStats: object expected");b.debugStats=a.google.protobuf.Struct.fromObject(r.debugStats)}return b},St.toObject=function(r,b){var S,le={};return(b=b||{}).defaults&&(l.Long?(S=new l.Long(0,0,!1),le.resultsReturned=b.longs===String?S.toString():b.longs===Number?S.toNumber():S):le.resultsReturned=b.longs===String?"0":0,le.executionDuration=null,l.Long?(S=new l.Long(0,0,!1),le.readOperations=b.longs===String?S.toString():b.longs===Number?S.toNumber():S):le.readOperations=b.longs===String?"0":0,le.debugStats=null),r.resultsReturned!=null&&r.hasOwnProperty("resultsReturned")&&(typeof r.resultsReturned=="number"?le.resultsReturned=b.longs===String?String(r.resultsReturned):r.resultsReturned:le.resultsReturned=b.longs===String?l.Long.prototype.toString.call(r.resultsReturned):b.longs===Number?new l.LongBits(r.resultsReturned.low>>>0,r.resultsReturned.high>>>0).toNumber():r.resultsReturned),r.executionDuration!=null&&r.hasOwnProperty("executionDuration")&&(le.executionDuration=a.google.protobuf.Duration.toObject(r.executionDuration,b)),r.readOperations!=null&&r.hasOwnProperty("readOperations")&&(typeof r.readOperations=="number"?le.readOperations=b.longs===String?String(r.readOperations):r.readOperations:le.readOperations=b.longs===String?l.Long.prototype.toString.call(r.readOperations):b.longs===Number?new l.LongBits(r.readOperations.low>>>0,r.readOperations.high>>>0).toNumber():r.readOperations),r.debugStats!=null&&r.hasOwnProperty("debugStats")&&(le.debugStats=a.google.protobuf.Struct.toObject(r.debugStats,b)),le},St.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},St.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.ExecutionStats"},St),g.Write=(mt.prototype.update=null,mt.prototype.delete=null,mt.prototype.transform=null,mt.prototype.updateMask=null,mt.prototype.updateTransforms=l.emptyArray,mt.prototype.currentDocument=null,Object.defineProperty(mt.prototype,"operation",{get:l.oneOfGetter(m=["update","delete","transform"]),set:l.oneOfSetter(m)}),mt.fromObject=function(r){if(r instanceof a.google.firestore.v1.Write)return r;var b=new a.google.firestore.v1.Write;if(r.update!=null){if(typeof r.update!="object")throw TypeError(".google.firestore.v1.Write.update: object expected");b.update=a.google.firestore.v1.Document.fromObject(r.update)}if(r.delete!=null&&(b.delete=String(r.delete)),r.transform!=null){if(typeof r.transform!="object")throw TypeError(".google.firestore.v1.Write.transform: object expected");b.transform=a.google.firestore.v1.DocumentTransform.fromObject(r.transform)}if(r.updateMask!=null){if(typeof r.updateMask!="object")throw TypeError(".google.firestore.v1.Write.updateMask: object expected");b.updateMask=a.google.firestore.v1.DocumentMask.fromObject(r.updateMask)}if(r.updateTransforms){if(!Array.isArray(r.updateTransforms))throw TypeError(".google.firestore.v1.Write.updateTransforms: array expected");b.updateTransforms=[];for(var S=0;S<r.updateTransforms.length;++S){if(typeof r.updateTransforms[S]!="object")throw TypeError(".google.firestore.v1.Write.updateTransforms: object expected");b.updateTransforms[S]=a.google.firestore.v1.DocumentTransform.FieldTransform.fromObject(r.updateTransforms[S])}}if(r.currentDocument!=null){if(typeof r.currentDocument!="object")throw TypeError(".google.firestore.v1.Write.currentDocument: object expected");b.currentDocument=a.google.firestore.v1.Precondition.fromObject(r.currentDocument)}return b},mt.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.updateTransforms=[]),b.defaults&&(S.updateMask=null,S.currentDocument=null),r.update!=null&&r.hasOwnProperty("update")&&(S.update=a.google.firestore.v1.Document.toObject(r.update,b),b.oneofs)&&(S.operation="update"),r.delete!=null&&r.hasOwnProperty("delete")&&(S.delete=r.delete,b.oneofs)&&(S.operation="delete"),r.updateMask!=null&&r.hasOwnProperty("updateMask")&&(S.updateMask=a.google.firestore.v1.DocumentMask.toObject(r.updateMask,b)),r.currentDocument!=null&&r.hasOwnProperty("currentDocument")&&(S.currentDocument=a.google.firestore.v1.Precondition.toObject(r.currentDocument,b)),r.transform!=null&&r.hasOwnProperty("transform")&&(S.transform=a.google.firestore.v1.DocumentTransform.toObject(r.transform,b),b.oneofs)&&(S.operation="transform"),r.updateTransforms&&r.updateTransforms.length){S.updateTransforms=[];for(var le=0;le<r.updateTransforms.length;++le)S.updateTransforms[le]=a.google.firestore.v1.DocumentTransform.FieldTransform.toObject(r.updateTransforms[le],b)}return S},mt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},mt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.Write"},mt),g.DocumentTransform=(zt.prototype.document="",zt.prototype.fieldTransforms=l.emptyArray,zt.fromObject=function(r){if(r instanceof a.google.firestore.v1.DocumentTransform)return r;var b=new a.google.firestore.v1.DocumentTransform;if(r.document!=null&&(b.document=String(r.document)),r.fieldTransforms){if(!Array.isArray(r.fieldTransforms))throw TypeError(".google.firestore.v1.DocumentTransform.fieldTransforms: array expected");b.fieldTransforms=[];for(var S=0;S<r.fieldTransforms.length;++S){if(typeof r.fieldTransforms[S]!="object")throw TypeError(".google.firestore.v1.DocumentTransform.fieldTransforms: object expected");b.fieldTransforms[S]=a.google.firestore.v1.DocumentTransform.FieldTransform.fromObject(r.fieldTransforms[S])}}return b},zt.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.fieldTransforms=[]),b.defaults&&(S.document=""),r.document!=null&&r.hasOwnProperty("document")&&(S.document=r.document),r.fieldTransforms&&r.fieldTransforms.length){S.fieldTransforms=[];for(var le=0;le<r.fieldTransforms.length;++le)S.fieldTransforms[le]=a.google.firestore.v1.DocumentTransform.FieldTransform.toObject(r.fieldTransforms[le],b)}return S},zt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},zt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.DocumentTransform"},zt.FieldTransform=(Yt.prototype.fieldPath="",Yt.prototype.setToServerValue=null,Yt.prototype.increment=null,Yt.prototype.maximum=null,Yt.prototype.minimum=null,Yt.prototype.appendMissingElements=null,Yt.prototype.removeAllFromArray=null,Object.defineProperty(Yt.prototype,"transformType",{get:l.oneOfGetter(s=["setToServerValue","increment","maximum","minimum","appendMissingElements","removeAllFromArray"]),set:l.oneOfSetter(s)}),Yt.fromObject=function(r){if(r instanceof a.google.firestore.v1.DocumentTransform.FieldTransform)return r;var b=new a.google.firestore.v1.DocumentTransform.FieldTransform;switch(r.fieldPath!=null&&(b.fieldPath=String(r.fieldPath)),r.setToServerValue){default:typeof r.setToServerValue=="number"&&(b.setToServerValue=r.setToServerValue);break;case"SERVER_VALUE_UNSPECIFIED":case 0:b.setToServerValue=0;break;case"REQUEST_TIME":case 1:b.setToServerValue=1}if(r.increment!=null){if(typeof r.increment!="object")throw TypeError(".google.firestore.v1.DocumentTransform.FieldTransform.increment: object expected");b.increment=a.google.firestore.v1.Value.fromObject(r.increment)}if(r.maximum!=null){if(typeof r.maximum!="object")throw TypeError(".google.firestore.v1.DocumentTransform.FieldTransform.maximum: object expected");b.maximum=a.google.firestore.v1.Value.fromObject(r.maximum)}if(r.minimum!=null){if(typeof r.minimum!="object")throw TypeError(".google.firestore.v1.DocumentTransform.FieldTransform.minimum: object expected");b.minimum=a.google.firestore.v1.Value.fromObject(r.minimum)}if(r.appendMissingElements!=null){if(typeof r.appendMissingElements!="object")throw TypeError(".google.firestore.v1.DocumentTransform.FieldTransform.appendMissingElements: object expected");b.appendMissingElements=a.google.firestore.v1.ArrayValue.fromObject(r.appendMissingElements)}if(r.removeAllFromArray!=null){if(typeof r.removeAllFromArray!="object")throw TypeError(".google.firestore.v1.DocumentTransform.FieldTransform.removeAllFromArray: object expected");b.removeAllFromArray=a.google.firestore.v1.ArrayValue.fromObject(r.removeAllFromArray)}return b},Yt.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.fieldPath=""),r.fieldPath!=null&&r.hasOwnProperty("fieldPath")&&(S.fieldPath=r.fieldPath),r.setToServerValue!=null&&r.hasOwnProperty("setToServerValue")&&(S.setToServerValue=b.enums!==String||a.google.firestore.v1.DocumentTransform.FieldTransform.ServerValue[r.setToServerValue]===void 0?r.setToServerValue:a.google.firestore.v1.DocumentTransform.FieldTransform.ServerValue[r.setToServerValue],b.oneofs)&&(S.transformType="setToServerValue"),r.increment!=null&&r.hasOwnProperty("increment")&&(S.increment=a.google.firestore.v1.Value.toObject(r.increment,b),b.oneofs)&&(S.transformType="increment"),r.maximum!=null&&r.hasOwnProperty("maximum")&&(S.maximum=a.google.firestore.v1.Value.toObject(r.maximum,b),b.oneofs)&&(S.transformType="maximum"),r.minimum!=null&&r.hasOwnProperty("minimum")&&(S.minimum=a.google.firestore.v1.Value.toObject(r.minimum,b),b.oneofs)&&(S.transformType="minimum"),r.appendMissingElements!=null&&r.hasOwnProperty("appendMissingElements")&&(S.appendMissingElements=a.google.firestore.v1.ArrayValue.toObject(r.appendMissingElements,b),b.oneofs)&&(S.transformType="appendMissingElements"),r.removeAllFromArray!=null&&r.hasOwnProperty("removeAllFromArray")&&(S.removeAllFromArray=a.google.firestore.v1.ArrayValue.toObject(r.removeAllFromArray,b),b.oneofs)&&(S.transformType="removeAllFromArray"),S},Yt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Yt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.DocumentTransform.FieldTransform"},Yt.ServerValue=(s={},(m=Object.create(s))[s[0]="SERVER_VALUE_UNSPECIFIED"]="SERVER_VALUE_UNSPECIFIED",m[s[1]="REQUEST_TIME"]="REQUEST_TIME",m),Yt),zt),g.WriteResult=(Tt.prototype.updateTime=null,Tt.prototype.transformResults=l.emptyArray,Tt.fromObject=function(r){if(r instanceof a.google.firestore.v1.WriteResult)return r;var b=new a.google.firestore.v1.WriteResult;if(r.updateTime!=null){if(typeof r.updateTime!="object")throw TypeError(".google.firestore.v1.WriteResult.updateTime: object expected");b.updateTime=a.google.protobuf.Timestamp.fromObject(r.updateTime)}if(r.transformResults){if(!Array.isArray(r.transformResults))throw TypeError(".google.firestore.v1.WriteResult.transformResults: array expected");b.transformResults=[];for(var S=0;S<r.transformResults.length;++S){if(typeof r.transformResults[S]!="object")throw TypeError(".google.firestore.v1.WriteResult.transformResults: object expected");b.transformResults[S]=a.google.firestore.v1.Value.fromObject(r.transformResults[S])}}return b},Tt.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.transformResults=[]),b.defaults&&(S.updateTime=null),r.updateTime!=null&&r.hasOwnProperty("updateTime")&&(S.updateTime=a.google.protobuf.Timestamp.toObject(r.updateTime,b)),r.transformResults&&r.transformResults.length){S.transformResults=[];for(var le=0;le<r.transformResults.length;++le)S.transformResults[le]=a.google.firestore.v1.Value.toObject(r.transformResults[le],b)}return S},Tt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Tt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.WriteResult"},Tt),g.DocumentChange=(qt.prototype.document=null,qt.prototype.targetIds=l.emptyArray,qt.prototype.removedTargetIds=l.emptyArray,qt.fromObject=function(r){if(r instanceof a.google.firestore.v1.DocumentChange)return r;var b=new a.google.firestore.v1.DocumentChange;if(r.document!=null){if(typeof r.document!="object")throw TypeError(".google.firestore.v1.DocumentChange.document: object expected");b.document=a.google.firestore.v1.Document.fromObject(r.document)}if(r.targetIds){if(!Array.isArray(r.targetIds))throw TypeError(".google.firestore.v1.DocumentChange.targetIds: array expected");b.targetIds=[];for(var S=0;S<r.targetIds.length;++S)b.targetIds[S]=0|r.targetIds[S]}if(r.removedTargetIds){if(!Array.isArray(r.removedTargetIds))throw TypeError(".google.firestore.v1.DocumentChange.removedTargetIds: array expected");for(b.removedTargetIds=[],S=0;S<r.removedTargetIds.length;++S)b.removedTargetIds[S]=0|r.removedTargetIds[S]}return b},qt.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.targetIds=[],S.removedTargetIds=[]),b.defaults&&(S.document=null),r.document!=null&&r.hasOwnProperty("document")&&(S.document=a.google.firestore.v1.Document.toObject(r.document,b)),r.targetIds&&r.targetIds.length){S.targetIds=[];for(var le=0;le<r.targetIds.length;++le)S.targetIds[le]=r.targetIds[le]}if(r.removedTargetIds&&r.removedTargetIds.length)for(S.removedTargetIds=[],le=0;le<r.removedTargetIds.length;++le)S.removedTargetIds[le]=r.removedTargetIds[le];return S},qt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},qt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.DocumentChange"},qt),g.DocumentDelete=(Ut.prototype.document="",Ut.prototype.removedTargetIds=l.emptyArray,Ut.prototype.readTime=null,Ut.fromObject=function(r){if(r instanceof a.google.firestore.v1.DocumentDelete)return r;var b=new a.google.firestore.v1.DocumentDelete;if(r.document!=null&&(b.document=String(r.document)),r.removedTargetIds){if(!Array.isArray(r.removedTargetIds))throw TypeError(".google.firestore.v1.DocumentDelete.removedTargetIds: array expected");b.removedTargetIds=[];for(var S=0;S<r.removedTargetIds.length;++S)b.removedTargetIds[S]=0|r.removedTargetIds[S]}if(r.readTime!=null){if(typeof r.readTime!="object")throw TypeError(".google.firestore.v1.DocumentDelete.readTime: object expected");b.readTime=a.google.protobuf.Timestamp.fromObject(r.readTime)}return b},Ut.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.removedTargetIds=[]),b.defaults&&(S.document="",S.readTime=null),r.document!=null&&r.hasOwnProperty("document")&&(S.document=r.document),r.readTime!=null&&r.hasOwnProperty("readTime")&&(S.readTime=a.google.protobuf.Timestamp.toObject(r.readTime,b)),r.removedTargetIds&&r.removedTargetIds.length){S.removedTargetIds=[];for(var le=0;le<r.removedTargetIds.length;++le)S.removedTargetIds[le]=r.removedTargetIds[le]}return S},Ut.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Ut.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.DocumentDelete"},Ut),g.DocumentRemove=(Rt.prototype.document="",Rt.prototype.removedTargetIds=l.emptyArray,Rt.prototype.readTime=null,Rt.fromObject=function(r){if(r instanceof a.google.firestore.v1.DocumentRemove)return r;var b=new a.google.firestore.v1.DocumentRemove;if(r.document!=null&&(b.document=String(r.document)),r.removedTargetIds){if(!Array.isArray(r.removedTargetIds))throw TypeError(".google.firestore.v1.DocumentRemove.removedTargetIds: array expected");b.removedTargetIds=[];for(var S=0;S<r.removedTargetIds.length;++S)b.removedTargetIds[S]=0|r.removedTargetIds[S]}if(r.readTime!=null){if(typeof r.readTime!="object")throw TypeError(".google.firestore.v1.DocumentRemove.readTime: object expected");b.readTime=a.google.protobuf.Timestamp.fromObject(r.readTime)}return b},Rt.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.removedTargetIds=[]),b.defaults&&(S.document="",S.readTime=null),r.document!=null&&r.hasOwnProperty("document")&&(S.document=r.document),r.removedTargetIds&&r.removedTargetIds.length){S.removedTargetIds=[];for(var le=0;le<r.removedTargetIds.length;++le)S.removedTargetIds[le]=r.removedTargetIds[le]}return r.readTime!=null&&r.hasOwnProperty("readTime")&&(S.readTime=a.google.protobuf.Timestamp.toObject(r.readTime,b)),S},Rt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Rt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.DocumentRemove"},Rt),g.ExistenceFilter=(Ft.prototype.targetId=0,Ft.prototype.count=0,Ft.prototype.unchangedNames=null,Ft.fromObject=function(r){if(r instanceof a.google.firestore.v1.ExistenceFilter)return r;var b=new a.google.firestore.v1.ExistenceFilter;if(r.targetId!=null&&(b.targetId=0|r.targetId),r.count!=null&&(b.count=0|r.count),r.unchangedNames!=null){if(typeof r.unchangedNames!="object")throw TypeError(".google.firestore.v1.ExistenceFilter.unchangedNames: object expected");b.unchangedNames=a.google.firestore.v1.BloomFilter.fromObject(r.unchangedNames)}return b},Ft.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.targetId=0,S.count=0,S.unchangedNames=null),r.targetId!=null&&r.hasOwnProperty("targetId")&&(S.targetId=r.targetId),r.count!=null&&r.hasOwnProperty("count")&&(S.count=r.count),r.unchangedNames!=null&&r.hasOwnProperty("unchangedNames")&&(S.unchangedNames=a.google.firestore.v1.BloomFilter.toObject(r.unchangedNames,b)),S},Ft.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Ft.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.firestore.v1.ExistenceFilter"},Ft),g),p),d.api=((s={}).FieldBehavior=(m={},(g=Object.create(m))[m[0]="FIELD_BEHAVIOR_UNSPECIFIED"]="FIELD_BEHAVIOR_UNSPECIFIED",g[m[1]="OPTIONAL"]="OPTIONAL",g[m[2]="REQUIRED"]="REQUIRED",g[m[3]="OUTPUT_ONLY"]="OUTPUT_ONLY",g[m[4]="INPUT_ONLY"]="INPUT_ONLY",g[m[5]="IMMUTABLE"]="IMMUTABLE",g[m[6]="UNORDERED_LIST"]="UNORDERED_LIST",g[m[7]="NON_EMPTY_DEFAULT"]="NON_EMPTY_DEFAULT",g[m[8]="IDENTIFIER"]="IDENTIFIER",g),s.Http=(Nt.prototype.rules=l.emptyArray,Nt.prototype.fullyDecodeReservedExpansion=!1,Nt.fromObject=function(r){if(r instanceof a.google.api.Http)return r;var b=new a.google.api.Http;if(r.rules){if(!Array.isArray(r.rules))throw TypeError(".google.api.Http.rules: array expected");b.rules=[];for(var S=0;S<r.rules.length;++S){if(typeof r.rules[S]!="object")throw TypeError(".google.api.Http.rules: object expected");b.rules[S]=a.google.api.HttpRule.fromObject(r.rules[S])}}return r.fullyDecodeReservedExpansion!=null&&(b.fullyDecodeReservedExpansion=!!r.fullyDecodeReservedExpansion),b},Nt.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.rules=[]),b.defaults&&(S.fullyDecodeReservedExpansion=!1),r.rules&&r.rules.length){S.rules=[];for(var le=0;le<r.rules.length;++le)S.rules[le]=a.google.api.HttpRule.toObject(r.rules[le],b)}return r.fullyDecodeReservedExpansion!=null&&r.hasOwnProperty("fullyDecodeReservedExpansion")&&(S.fullyDecodeReservedExpansion=r.fullyDecodeReservedExpansion),S},Nt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Nt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.api.Http"},Nt),s.HttpRule=(yt.prototype.selector="",yt.prototype.get=null,yt.prototype.put=null,yt.prototype.post=null,yt.prototype.delete=null,yt.prototype.patch=null,yt.prototype.custom=null,yt.prototype.body="",yt.prototype.responseBody="",yt.prototype.additionalBindings=l.emptyArray,Object.defineProperty(yt.prototype,"pattern",{get:l.oneOfGetter(m=["get","put","post","delete","patch","custom"]),set:l.oneOfSetter(m)}),yt.fromObject=function(r){if(r instanceof a.google.api.HttpRule)return r;var b=new a.google.api.HttpRule;if(r.selector!=null&&(b.selector=String(r.selector)),r.get!=null&&(b.get=String(r.get)),r.put!=null&&(b.put=String(r.put)),r.post!=null&&(b.post=String(r.post)),r.delete!=null&&(b.delete=String(r.delete)),r.patch!=null&&(b.patch=String(r.patch)),r.custom!=null){if(typeof r.custom!="object")throw TypeError(".google.api.HttpRule.custom: object expected");b.custom=a.google.api.CustomHttpPattern.fromObject(r.custom)}if(r.body!=null&&(b.body=String(r.body)),r.responseBody!=null&&(b.responseBody=String(r.responseBody)),r.additionalBindings){if(!Array.isArray(r.additionalBindings))throw TypeError(".google.api.HttpRule.additionalBindings: array expected");b.additionalBindings=[];for(var S=0;S<r.additionalBindings.length;++S){if(typeof r.additionalBindings[S]!="object")throw TypeError(".google.api.HttpRule.additionalBindings: object expected");b.additionalBindings[S]=a.google.api.HttpRule.fromObject(r.additionalBindings[S])}}return b},yt.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.additionalBindings=[]),b.defaults&&(S.selector="",S.body="",S.responseBody=""),r.selector!=null&&r.hasOwnProperty("selector")&&(S.selector=r.selector),r.get!=null&&r.hasOwnProperty("get")&&(S.get=r.get,b.oneofs)&&(S.pattern="get"),r.put!=null&&r.hasOwnProperty("put")&&(S.put=r.put,b.oneofs)&&(S.pattern="put"),r.post!=null&&r.hasOwnProperty("post")&&(S.post=r.post,b.oneofs)&&(S.pattern="post"),r.delete!=null&&r.hasOwnProperty("delete")&&(S.delete=r.delete,b.oneofs)&&(S.pattern="delete"),r.patch!=null&&r.hasOwnProperty("patch")&&(S.patch=r.patch,b.oneofs)&&(S.pattern="patch"),r.body!=null&&r.hasOwnProperty("body")&&(S.body=r.body),r.custom!=null&&r.hasOwnProperty("custom")&&(S.custom=a.google.api.CustomHttpPattern.toObject(r.custom,b),b.oneofs)&&(S.pattern="custom"),r.additionalBindings&&r.additionalBindings.length){S.additionalBindings=[];for(var le=0;le<r.additionalBindings.length;++le)S.additionalBindings[le]=a.google.api.HttpRule.toObject(r.additionalBindings[le],b)}return r.responseBody!=null&&r.hasOwnProperty("responseBody")&&(S.responseBody=r.responseBody),S},yt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},yt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.api.HttpRule"},yt),s.CustomHttpPattern=(Mt.prototype.kind="",Mt.prototype.path="",Mt.fromObject=function(r){var b;return r instanceof a.google.api.CustomHttpPattern?r:(b=new a.google.api.CustomHttpPattern,r.kind!=null&&(b.kind=String(r.kind)),r.path!=null&&(b.path=String(r.path)),b)},Mt.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.kind="",S.path=""),r.kind!=null&&r.hasOwnProperty("kind")&&(S.kind=r.kind),r.path!=null&&r.hasOwnProperty("path")&&(S.path=r.path),S},Mt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Mt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.api.CustomHttpPattern"},Mt),s.CommonLanguageSettings=(jt.prototype.referenceDocsUri="",jt.prototype.destinations=l.emptyArray,jt.prototype.selectiveGapicGeneration=null,jt.fromObject=function(r){if(r instanceof a.google.api.CommonLanguageSettings)return r;var b=new a.google.api.CommonLanguageSettings;if(r.referenceDocsUri!=null&&(b.referenceDocsUri=String(r.referenceDocsUri)),r.destinations){if(!Array.isArray(r.destinations))throw TypeError(".google.api.CommonLanguageSettings.destinations: array expected");b.destinations=[];for(var S=0;S<r.destinations.length;++S)switch(r.destinations[S]){default:if(typeof r.destinations[S]=="number"){b.destinations[S]=r.destinations[S];break}case"CLIENT_LIBRARY_DESTINATION_UNSPECIFIED":case 0:b.destinations[S]=0;break;case"GITHUB":case 10:b.destinations[S]=10;break;case"PACKAGE_MANAGER":case 20:b.destinations[S]=20}}if(r.selectiveGapicGeneration!=null){if(typeof r.selectiveGapicGeneration!="object")throw TypeError(".google.api.CommonLanguageSettings.selectiveGapicGeneration: object expected");b.selectiveGapicGeneration=a.google.api.SelectiveGapicGeneration.fromObject(r.selectiveGapicGeneration)}return b},jt.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.destinations=[]),b.defaults&&(S.referenceDocsUri="",S.selectiveGapicGeneration=null),r.referenceDocsUri!=null&&r.hasOwnProperty("referenceDocsUri")&&(S.referenceDocsUri=r.referenceDocsUri),r.destinations&&r.destinations.length){S.destinations=[];for(var le=0;le<r.destinations.length;++le)S.destinations[le]=b.enums!==String||a.google.api.ClientLibraryDestination[r.destinations[le]]===void 0?r.destinations[le]:a.google.api.ClientLibraryDestination[r.destinations[le]]}return r.selectiveGapicGeneration!=null&&r.hasOwnProperty("selectiveGapicGeneration")&&(S.selectiveGapicGeneration=a.google.api.SelectiveGapicGeneration.toObject(r.selectiveGapicGeneration,b)),S},jt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},jt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.api.CommonLanguageSettings"},jt),s.ClientLibrarySettings=(Ot.prototype.version="",Ot.prototype.launchStage=0,Ot.prototype.restNumericEnums=!1,Ot.prototype.javaSettings=null,Ot.prototype.cppSettings=null,Ot.prototype.phpSettings=null,Ot.prototype.pythonSettings=null,Ot.prototype.nodeSettings=null,Ot.prototype.dotnetSettings=null,Ot.prototype.rubySettings=null,Ot.prototype.goSettings=null,Ot.fromObject=function(r){if(r instanceof a.google.api.ClientLibrarySettings)return r;var b=new a.google.api.ClientLibrarySettings;switch(r.version!=null&&(b.version=String(r.version)),r.launchStage){default:typeof r.launchStage=="number"&&(b.launchStage=r.launchStage);break;case"LAUNCH_STAGE_UNSPECIFIED":case 0:b.launchStage=0;break;case"UNIMPLEMENTED":case 6:b.launchStage=6;break;case"PRELAUNCH":case 7:b.launchStage=7;break;case"EARLY_ACCESS":case 1:b.launchStage=1;break;case"ALPHA":case 2:b.launchStage=2;break;case"BETA":case 3:b.launchStage=3;break;case"GA":case 4:b.launchStage=4;break;case"DEPRECATED":case 5:b.launchStage=5}if(r.restNumericEnums!=null&&(b.restNumericEnums=!!r.restNumericEnums),r.javaSettings!=null){if(typeof r.javaSettings!="object")throw TypeError(".google.api.ClientLibrarySettings.javaSettings: object expected");b.javaSettings=a.google.api.JavaSettings.fromObject(r.javaSettings)}if(r.cppSettings!=null){if(typeof r.cppSettings!="object")throw TypeError(".google.api.ClientLibrarySettings.cppSettings: object expected");b.cppSettings=a.google.api.CppSettings.fromObject(r.cppSettings)}if(r.phpSettings!=null){if(typeof r.phpSettings!="object")throw TypeError(".google.api.ClientLibrarySettings.phpSettings: object expected");b.phpSettings=a.google.api.PhpSettings.fromObject(r.phpSettings)}if(r.pythonSettings!=null){if(typeof r.pythonSettings!="object")throw TypeError(".google.api.ClientLibrarySettings.pythonSettings: object expected");b.pythonSettings=a.google.api.PythonSettings.fromObject(r.pythonSettings)}if(r.nodeSettings!=null){if(typeof r.nodeSettings!="object")throw TypeError(".google.api.ClientLibrarySettings.nodeSettings: object expected");b.nodeSettings=a.google.api.NodeSettings.fromObject(r.nodeSettings)}if(r.dotnetSettings!=null){if(typeof r.dotnetSettings!="object")throw TypeError(".google.api.ClientLibrarySettings.dotnetSettings: object expected");b.dotnetSettings=a.google.api.DotnetSettings.fromObject(r.dotnetSettings)}if(r.rubySettings!=null){if(typeof r.rubySettings!="object")throw TypeError(".google.api.ClientLibrarySettings.rubySettings: object expected");b.rubySettings=a.google.api.RubySettings.fromObject(r.rubySettings)}if(r.goSettings!=null){if(typeof r.goSettings!="object")throw TypeError(".google.api.ClientLibrarySettings.goSettings: object expected");b.goSettings=a.google.api.GoSettings.fromObject(r.goSettings)}return b},Ot.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.version="",S.launchStage=b.enums===String?"LAUNCH_STAGE_UNSPECIFIED":0,S.restNumericEnums=!1,S.javaSettings=null,S.cppSettings=null,S.phpSettings=null,S.pythonSettings=null,S.nodeSettings=null,S.dotnetSettings=null,S.rubySettings=null,S.goSettings=null),r.version!=null&&r.hasOwnProperty("version")&&(S.version=r.version),r.launchStage!=null&&r.hasOwnProperty("launchStage")&&(S.launchStage=b.enums!==String||a.google.api.LaunchStage[r.launchStage]===void 0?r.launchStage:a.google.api.LaunchStage[r.launchStage]),r.restNumericEnums!=null&&r.hasOwnProperty("restNumericEnums")&&(S.restNumericEnums=r.restNumericEnums),r.javaSettings!=null&&r.hasOwnProperty("javaSettings")&&(S.javaSettings=a.google.api.JavaSettings.toObject(r.javaSettings,b)),r.cppSettings!=null&&r.hasOwnProperty("cppSettings")&&(S.cppSettings=a.google.api.CppSettings.toObject(r.cppSettings,b)),r.phpSettings!=null&&r.hasOwnProperty("phpSettings")&&(S.phpSettings=a.google.api.PhpSettings.toObject(r.phpSettings,b)),r.pythonSettings!=null&&r.hasOwnProperty("pythonSettings")&&(S.pythonSettings=a.google.api.PythonSettings.toObject(r.pythonSettings,b)),r.nodeSettings!=null&&r.hasOwnProperty("nodeSettings")&&(S.nodeSettings=a.google.api.NodeSettings.toObject(r.nodeSettings,b)),r.dotnetSettings!=null&&r.hasOwnProperty("dotnetSettings")&&(S.dotnetSettings=a.google.api.DotnetSettings.toObject(r.dotnetSettings,b)),r.rubySettings!=null&&r.hasOwnProperty("rubySettings")&&(S.rubySettings=a.google.api.RubySettings.toObject(r.rubySettings,b)),r.goSettings!=null&&r.hasOwnProperty("goSettings")&&(S.goSettings=a.google.api.GoSettings.toObject(r.goSettings,b)),S},Ot.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Ot.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.api.ClientLibrarySettings"},Ot),s.Publishing=(vt.prototype.methodSettings=l.emptyArray,vt.prototype.newIssueUri="",vt.prototype.documentationUri="",vt.prototype.apiShortName="",vt.prototype.githubLabel="",vt.prototype.codeownerGithubTeams=l.emptyArray,vt.prototype.docTagPrefix="",vt.prototype.organization=0,vt.prototype.librarySettings=l.emptyArray,vt.prototype.protoReferenceDocumentationUri="",vt.prototype.restReferenceDocumentationUri="",vt.fromObject=function(r){if(r instanceof a.google.api.Publishing)return r;var b=new a.google.api.Publishing;if(r.methodSettings){if(!Array.isArray(r.methodSettings))throw TypeError(".google.api.Publishing.methodSettings: array expected");b.methodSettings=[];for(var S=0;S<r.methodSettings.length;++S){if(typeof r.methodSettings[S]!="object")throw TypeError(".google.api.Publishing.methodSettings: object expected");b.methodSettings[S]=a.google.api.MethodSettings.fromObject(r.methodSettings[S])}}if(r.newIssueUri!=null&&(b.newIssueUri=String(r.newIssueUri)),r.documentationUri!=null&&(b.documentationUri=String(r.documentationUri)),r.apiShortName!=null&&(b.apiShortName=String(r.apiShortName)),r.githubLabel!=null&&(b.githubLabel=String(r.githubLabel)),r.codeownerGithubTeams){if(!Array.isArray(r.codeownerGithubTeams))throw TypeError(".google.api.Publishing.codeownerGithubTeams: array expected");for(b.codeownerGithubTeams=[],S=0;S<r.codeownerGithubTeams.length;++S)b.codeownerGithubTeams[S]=String(r.codeownerGithubTeams[S])}switch(r.docTagPrefix!=null&&(b.docTagPrefix=String(r.docTagPrefix)),r.organization){default:typeof r.organization=="number"&&(b.organization=r.organization);break;case"CLIENT_LIBRARY_ORGANIZATION_UNSPECIFIED":case 0:b.organization=0;break;case"CLOUD":case 1:b.organization=1;break;case"ADS":case 2:b.organization=2;break;case"PHOTOS":case 3:b.organization=3;break;case"STREET_VIEW":case 4:b.organization=4;break;case"SHOPPING":case 5:b.organization=5;break;case"GEO":case 6:b.organization=6;break;case"GENERATIVE_AI":case 7:b.organization=7}if(r.librarySettings){if(!Array.isArray(r.librarySettings))throw TypeError(".google.api.Publishing.librarySettings: array expected");for(b.librarySettings=[],S=0;S<r.librarySettings.length;++S){if(typeof r.librarySettings[S]!="object")throw TypeError(".google.api.Publishing.librarySettings: object expected");b.librarySettings[S]=a.google.api.ClientLibrarySettings.fromObject(r.librarySettings[S])}}return r.protoReferenceDocumentationUri!=null&&(b.protoReferenceDocumentationUri=String(r.protoReferenceDocumentationUri)),r.restReferenceDocumentationUri!=null&&(b.restReferenceDocumentationUri=String(r.restReferenceDocumentationUri)),b},vt.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.methodSettings=[],S.codeownerGithubTeams=[],S.librarySettings=[]),b.defaults&&(S.newIssueUri="",S.documentationUri="",S.apiShortName="",S.githubLabel="",S.docTagPrefix="",S.organization=b.enums===String?"CLIENT_LIBRARY_ORGANIZATION_UNSPECIFIED":0,S.protoReferenceDocumentationUri="",S.restReferenceDocumentationUri=""),r.methodSettings&&r.methodSettings.length){S.methodSettings=[];for(var le=0;le<r.methodSettings.length;++le)S.methodSettings[le]=a.google.api.MethodSettings.toObject(r.methodSettings[le],b)}if(r.newIssueUri!=null&&r.hasOwnProperty("newIssueUri")&&(S.newIssueUri=r.newIssueUri),r.documentationUri!=null&&r.hasOwnProperty("documentationUri")&&(S.documentationUri=r.documentationUri),r.apiShortName!=null&&r.hasOwnProperty("apiShortName")&&(S.apiShortName=r.apiShortName),r.githubLabel!=null&&r.hasOwnProperty("githubLabel")&&(S.githubLabel=r.githubLabel),r.codeownerGithubTeams&&r.codeownerGithubTeams.length)for(S.codeownerGithubTeams=[],le=0;le<r.codeownerGithubTeams.length;++le)S.codeownerGithubTeams[le]=r.codeownerGithubTeams[le];if(r.docTagPrefix!=null&&r.hasOwnProperty("docTagPrefix")&&(S.docTagPrefix=r.docTagPrefix),r.organization!=null&&r.hasOwnProperty("organization")&&(S.organization=b.enums!==String||a.google.api.ClientLibraryOrganization[r.organization]===void 0?r.organization:a.google.api.ClientLibraryOrganization[r.organization]),r.librarySettings&&r.librarySettings.length)for(S.librarySettings=[],le=0;le<r.librarySettings.length;++le)S.librarySettings[le]=a.google.api.ClientLibrarySettings.toObject(r.librarySettings[le],b);return r.protoReferenceDocumentationUri!=null&&r.hasOwnProperty("protoReferenceDocumentationUri")&&(S.protoReferenceDocumentationUri=r.protoReferenceDocumentationUri),r.restReferenceDocumentationUri!=null&&r.hasOwnProperty("restReferenceDocumentationUri")&&(S.restReferenceDocumentationUri=r.restReferenceDocumentationUri),S},vt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},vt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.api.Publishing"},vt),s.JavaSettings=(wt.prototype.libraryPackage="",wt.prototype.serviceClassNames=l.emptyObject,wt.prototype.common=null,wt.fromObject=function(r){if(r instanceof a.google.api.JavaSettings)return r;var b=new a.google.api.JavaSettings;if(r.libraryPackage!=null&&(b.libraryPackage=String(r.libraryPackage)),r.serviceClassNames){if(typeof r.serviceClassNames!="object")throw TypeError(".google.api.JavaSettings.serviceClassNames: object expected");b.serviceClassNames={};for(var S=Object.keys(r.serviceClassNames),le=0;le<S.length;++le)b.serviceClassNames[S[le]]=String(r.serviceClassNames[S[le]])}if(r.common!=null){if(typeof r.common!="object")throw TypeError(".google.api.JavaSettings.common: object expected");b.common=a.google.api.CommonLanguageSettings.fromObject(r.common)}return b},wt.toObject=function(r,b){var S,le={};if(((b=b||{}).objects||b.defaults)&&(le.serviceClassNames={}),b.defaults&&(le.libraryPackage="",le.common=null),r.libraryPackage!=null&&r.hasOwnProperty("libraryPackage")&&(le.libraryPackage=r.libraryPackage),r.serviceClassNames&&(S=Object.keys(r.serviceClassNames)).length){le.serviceClassNames={};for(var et=0;et<S.length;++et)le.serviceClassNames[S[et]]=r.serviceClassNames[S[et]]}return r.common!=null&&r.hasOwnProperty("common")&&(le.common=a.google.api.CommonLanguageSettings.toObject(r.common,b)),le},wt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},wt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.api.JavaSettings"},wt),s.CppSettings=(Lt.prototype.common=null,Lt.fromObject=function(r){if(r instanceof a.google.api.CppSettings)return r;var b=new a.google.api.CppSettings;if(r.common!=null){if(typeof r.common!="object")throw TypeError(".google.api.CppSettings.common: object expected");b.common=a.google.api.CommonLanguageSettings.fromObject(r.common)}return b},Lt.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.common=null),r.common!=null&&r.hasOwnProperty("common")&&(S.common=a.google.api.CommonLanguageSettings.toObject(r.common,b)),S},Lt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Lt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.api.CppSettings"},Lt),s.PhpSettings=(Pe.prototype.common=null,Pe.fromObject=function(r){if(r instanceof a.google.api.PhpSettings)return r;var b=new a.google.api.PhpSettings;if(r.common!=null){if(typeof r.common!="object")throw TypeError(".google.api.PhpSettings.common: object expected");b.common=a.google.api.CommonLanguageSettings.fromObject(r.common)}return b},Pe.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.common=null),r.common!=null&&r.hasOwnProperty("common")&&(S.common=a.google.api.CommonLanguageSettings.toObject(r.common,b)),S},Pe.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Pe.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.api.PhpSettings"},Pe),s.PythonSettings=(Ce.prototype.common=null,Ce.prototype.experimentalFeatures=null,Ce.fromObject=function(r){if(r instanceof a.google.api.PythonSettings)return r;var b=new a.google.api.PythonSettings;if(r.common!=null){if(typeof r.common!="object")throw TypeError(".google.api.PythonSettings.common: object expected");b.common=a.google.api.CommonLanguageSettings.fromObject(r.common)}if(r.experimentalFeatures!=null){if(typeof r.experimentalFeatures!="object")throw TypeError(".google.api.PythonSettings.experimentalFeatures: object expected");b.experimentalFeatures=a.google.api.PythonSettings.ExperimentalFeatures.fromObject(r.experimentalFeatures)}return b},Ce.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.common=null,S.experimentalFeatures=null),r.common!=null&&r.hasOwnProperty("common")&&(S.common=a.google.api.CommonLanguageSettings.toObject(r.common,b)),r.experimentalFeatures!=null&&r.hasOwnProperty("experimentalFeatures")&&(S.experimentalFeatures=a.google.api.PythonSettings.ExperimentalFeatures.toObject(r.experimentalFeatures,b)),S},Ce.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Ce.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.api.PythonSettings"},Ce.ExperimentalFeatures=(Ne.prototype.restAsyncIoEnabled=!1,Ne.prototype.protobufPythonicTypesEnabled=!1,Ne.fromObject=function(r){var b;return r instanceof a.google.api.PythonSettings.ExperimentalFeatures?r:(b=new a.google.api.PythonSettings.ExperimentalFeatures,r.restAsyncIoEnabled!=null&&(b.restAsyncIoEnabled=!!r.restAsyncIoEnabled),r.protobufPythonicTypesEnabled!=null&&(b.protobufPythonicTypesEnabled=!!r.protobufPythonicTypesEnabled),b)},Ne.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.restAsyncIoEnabled=!1,S.protobufPythonicTypesEnabled=!1),r.restAsyncIoEnabled!=null&&r.hasOwnProperty("restAsyncIoEnabled")&&(S.restAsyncIoEnabled=r.restAsyncIoEnabled),r.protobufPythonicTypesEnabled!=null&&r.hasOwnProperty("protobufPythonicTypesEnabled")&&(S.protobufPythonicTypesEnabled=r.protobufPythonicTypesEnabled),S},Ne.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Ne.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.api.PythonSettings.ExperimentalFeatures"},Ne),Ce),s.NodeSettings=(He.prototype.common=null,He.fromObject=function(r){if(r instanceof a.google.api.NodeSettings)return r;var b=new a.google.api.NodeSettings;if(r.common!=null){if(typeof r.common!="object")throw TypeError(".google.api.NodeSettings.common: object expected");b.common=a.google.api.CommonLanguageSettings.fromObject(r.common)}return b},He.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.common=null),r.common!=null&&r.hasOwnProperty("common")&&(S.common=a.google.api.CommonLanguageSettings.toObject(r.common,b)),S},He.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},He.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.api.NodeSettings"},He),s.DotnetSettings=(je.prototype.common=null,je.prototype.renamedServices=l.emptyObject,je.prototype.renamedResources=l.emptyObject,je.prototype.ignoredResources=l.emptyArray,je.prototype.forcedNamespaceAliases=l.emptyArray,je.prototype.handwrittenSignatures=l.emptyArray,je.fromObject=function(r){if(r instanceof a.google.api.DotnetSettings)return r;var b=new a.google.api.DotnetSettings;if(r.common!=null){if(typeof r.common!="object")throw TypeError(".google.api.DotnetSettings.common: object expected");b.common=a.google.api.CommonLanguageSettings.fromObject(r.common)}if(r.renamedServices){if(typeof r.renamedServices!="object")throw TypeError(".google.api.DotnetSettings.renamedServices: object expected");b.renamedServices={};for(var S=Object.keys(r.renamedServices),le=0;le<S.length;++le)b.renamedServices[S[le]]=String(r.renamedServices[S[le]])}if(r.renamedResources){if(typeof r.renamedResources!="object")throw TypeError(".google.api.DotnetSettings.renamedResources: object expected");for(b.renamedResources={},S=Object.keys(r.renamedResources),le=0;le<S.length;++le)b.renamedResources[S[le]]=String(r.renamedResources[S[le]])}if(r.ignoredResources){if(!Array.isArray(r.ignoredResources))throw TypeError(".google.api.DotnetSettings.ignoredResources: array expected");for(b.ignoredResources=[],le=0;le<r.ignoredResources.length;++le)b.ignoredResources[le]=String(r.ignoredResources[le])}if(r.forcedNamespaceAliases){if(!Array.isArray(r.forcedNamespaceAliases))throw TypeError(".google.api.DotnetSettings.forcedNamespaceAliases: array expected");for(b.forcedNamespaceAliases=[],le=0;le<r.forcedNamespaceAliases.length;++le)b.forcedNamespaceAliases[le]=String(r.forcedNamespaceAliases[le])}if(r.handwrittenSignatures){if(!Array.isArray(r.handwrittenSignatures))throw TypeError(".google.api.DotnetSettings.handwrittenSignatures: array expected");for(b.handwrittenSignatures=[],le=0;le<r.handwrittenSignatures.length;++le)b.handwrittenSignatures[le]=String(r.handwrittenSignatures[le])}return b},je.toObject=function(r,b){var S,le={};if(((b=b||{}).arrays||b.defaults)&&(le.ignoredResources=[],le.forcedNamespaceAliases=[],le.handwrittenSignatures=[]),(b.objects||b.defaults)&&(le.renamedServices={},le.renamedResources={}),b.defaults&&(le.common=null),r.common!=null&&r.hasOwnProperty("common")&&(le.common=a.google.api.CommonLanguageSettings.toObject(r.common,b)),r.renamedServices&&(S=Object.keys(r.renamedServices)).length){le.renamedServices={};for(var et=0;et<S.length;++et)le.renamedServices[S[et]]=r.renamedServices[S[et]]}if(r.renamedResources&&(S=Object.keys(r.renamedResources)).length)for(le.renamedResources={},et=0;et<S.length;++et)le.renamedResources[S[et]]=r.renamedResources[S[et]];if(r.ignoredResources&&r.ignoredResources.length)for(le.ignoredResources=[],et=0;et<r.ignoredResources.length;++et)le.ignoredResources[et]=r.ignoredResources[et];if(r.forcedNamespaceAliases&&r.forcedNamespaceAliases.length)for(le.forcedNamespaceAliases=[],et=0;et<r.forcedNamespaceAliases.length;++et)le.forcedNamespaceAliases[et]=r.forcedNamespaceAliases[et];if(r.handwrittenSignatures&&r.handwrittenSignatures.length)for(le.handwrittenSignatures=[],et=0;et<r.handwrittenSignatures.length;++et)le.handwrittenSignatures[et]=r.handwrittenSignatures[et];return le},je.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},je.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.api.DotnetSettings"},je),s.RubySettings=(ot.prototype.common=null,ot.fromObject=function(r){if(r instanceof a.google.api.RubySettings)return r;var b=new a.google.api.RubySettings;if(r.common!=null){if(typeof r.common!="object")throw TypeError(".google.api.RubySettings.common: object expected");b.common=a.google.api.CommonLanguageSettings.fromObject(r.common)}return b},ot.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.common=null),r.common!=null&&r.hasOwnProperty("common")&&(S.common=a.google.api.CommonLanguageSettings.toObject(r.common,b)),S},ot.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ot.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.api.RubySettings"},ot),s.GoSettings=(ct.prototype.common=null,ct.prototype.renamedServices=l.emptyObject,ct.fromObject=function(r){if(r instanceof a.google.api.GoSettings)return r;var b=new a.google.api.GoSettings;if(r.common!=null){if(typeof r.common!="object")throw TypeError(".google.api.GoSettings.common: object expected");b.common=a.google.api.CommonLanguageSettings.fromObject(r.common)}if(r.renamedServices){if(typeof r.renamedServices!="object")throw TypeError(".google.api.GoSettings.renamedServices: object expected");b.renamedServices={};for(var S=Object.keys(r.renamedServices),le=0;le<S.length;++le)b.renamedServices[S[le]]=String(r.renamedServices[S[le]])}return b},ct.toObject=function(r,b){var S,le={};if(((b=b||{}).objects||b.defaults)&&(le.renamedServices={}),b.defaults&&(le.common=null),r.common!=null&&r.hasOwnProperty("common")&&(le.common=a.google.api.CommonLanguageSettings.toObject(r.common,b)),r.renamedServices&&(S=Object.keys(r.renamedServices)).length){le.renamedServices={};for(var et=0;et<S.length;++et)le.renamedServices[S[et]]=r.renamedServices[S[et]]}return le},ct.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ct.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.api.GoSettings"},ct),s.MethodSettings=(Ct.prototype.selector="",Ct.prototype.longRunning=null,Ct.prototype.autoPopulatedFields=l.emptyArray,Ct.fromObject=function(r){if(r instanceof a.google.api.MethodSettings)return r;var b=new a.google.api.MethodSettings;if(r.selector!=null&&(b.selector=String(r.selector)),r.longRunning!=null){if(typeof r.longRunning!="object")throw TypeError(".google.api.MethodSettings.longRunning: object expected");b.longRunning=a.google.api.MethodSettings.LongRunning.fromObject(r.longRunning)}if(r.autoPopulatedFields){if(!Array.isArray(r.autoPopulatedFields))throw TypeError(".google.api.MethodSettings.autoPopulatedFields: array expected");b.autoPopulatedFields=[];for(var S=0;S<r.autoPopulatedFields.length;++S)b.autoPopulatedFields[S]=String(r.autoPopulatedFields[S])}return b},Ct.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.autoPopulatedFields=[]),b.defaults&&(S.selector="",S.longRunning=null),r.selector!=null&&r.hasOwnProperty("selector")&&(S.selector=r.selector),r.longRunning!=null&&r.hasOwnProperty("longRunning")&&(S.longRunning=a.google.api.MethodSettings.LongRunning.toObject(r.longRunning,b)),r.autoPopulatedFields&&r.autoPopulatedFields.length){S.autoPopulatedFields=[];for(var le=0;le<r.autoPopulatedFields.length;++le)S.autoPopulatedFields[le]=r.autoPopulatedFields[le]}return S},Ct.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Ct.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.api.MethodSettings"},Ct.LongRunning=(Qt.prototype.initialPollDelay=null,Qt.prototype.pollDelayMultiplier=0,Qt.prototype.maxPollDelay=null,Qt.prototype.totalPollTimeout=null,Qt.fromObject=function(r){if(r instanceof a.google.api.MethodSettings.LongRunning)return r;var b=new a.google.api.MethodSettings.LongRunning;if(r.initialPollDelay!=null){if(typeof r.initialPollDelay!="object")throw TypeError(".google.api.MethodSettings.LongRunning.initialPollDelay: object expected");b.initialPollDelay=a.google.protobuf.Duration.fromObject(r.initialPollDelay)}if(r.pollDelayMultiplier!=null&&(b.pollDelayMultiplier=Number(r.pollDelayMultiplier)),r.maxPollDelay!=null){if(typeof r.maxPollDelay!="object")throw TypeError(".google.api.MethodSettings.LongRunning.maxPollDelay: object expected");b.maxPollDelay=a.google.protobuf.Duration.fromObject(r.maxPollDelay)}if(r.totalPollTimeout!=null){if(typeof r.totalPollTimeout!="object")throw TypeError(".google.api.MethodSettings.LongRunning.totalPollTimeout: object expected");b.totalPollTimeout=a.google.protobuf.Duration.fromObject(r.totalPollTimeout)}return b},Qt.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.initialPollDelay=null,S.pollDelayMultiplier=0,S.maxPollDelay=null,S.totalPollTimeout=null),r.initialPollDelay!=null&&r.hasOwnProperty("initialPollDelay")&&(S.initialPollDelay=a.google.protobuf.Duration.toObject(r.initialPollDelay,b)),r.pollDelayMultiplier!=null&&r.hasOwnProperty("pollDelayMultiplier")&&(S.pollDelayMultiplier=b.json&&!isFinite(r.pollDelayMultiplier)?String(r.pollDelayMultiplier):r.pollDelayMultiplier),r.maxPollDelay!=null&&r.hasOwnProperty("maxPollDelay")&&(S.maxPollDelay=a.google.protobuf.Duration.toObject(r.maxPollDelay,b)),r.totalPollTimeout!=null&&r.hasOwnProperty("totalPollTimeout")&&(S.totalPollTimeout=a.google.protobuf.Duration.toObject(r.totalPollTimeout,b)),S},Qt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Qt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.api.MethodSettings.LongRunning"},Qt),Ct),s.ClientLibraryOrganization=(g={},(m=Object.create(g))[g[0]="CLIENT_LIBRARY_ORGANIZATION_UNSPECIFIED"]="CLIENT_LIBRARY_ORGANIZATION_UNSPECIFIED",m[g[1]="CLOUD"]="CLOUD",m[g[2]="ADS"]="ADS",m[g[3]="PHOTOS"]="PHOTOS",m[g[4]="STREET_VIEW"]="STREET_VIEW",m[g[5]="SHOPPING"]="SHOPPING",m[g[6]="GEO"]="GEO",m[g[7]="GENERATIVE_AI"]="GENERATIVE_AI",m),s.ClientLibraryDestination=(g={},(m=Object.create(g))[g[0]="CLIENT_LIBRARY_DESTINATION_UNSPECIFIED"]="CLIENT_LIBRARY_DESTINATION_UNSPECIFIED",m[g[10]="GITHUB"]="GITHUB",m[g[20]="PACKAGE_MANAGER"]="PACKAGE_MANAGER",m),s.SelectiveGapicGeneration=(Ht.prototype.methods=l.emptyArray,Ht.prototype.generateOmittedAsInternal=!1,Ht.fromObject=function(r){if(r instanceof a.google.api.SelectiveGapicGeneration)return r;var b=new a.google.api.SelectiveGapicGeneration;if(r.methods){if(!Array.isArray(r.methods))throw TypeError(".google.api.SelectiveGapicGeneration.methods: array expected");b.methods=[];for(var S=0;S<r.methods.length;++S)b.methods[S]=String(r.methods[S])}return r.generateOmittedAsInternal!=null&&(b.generateOmittedAsInternal=!!r.generateOmittedAsInternal),b},Ht.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.methods=[]),b.defaults&&(S.generateOmittedAsInternal=!1),r.methods&&r.methods.length){S.methods=[];for(var le=0;le<r.methods.length;++le)S.methods[le]=r.methods[le]}return r.generateOmittedAsInternal!=null&&r.hasOwnProperty("generateOmittedAsInternal")&&(S.generateOmittedAsInternal=r.generateOmittedAsInternal),S},Ht.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Ht.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.api.SelectiveGapicGeneration"},Ht),s.LaunchStage=(g={},(m=Object.create(g))[g[0]="LAUNCH_STAGE_UNSPECIFIED"]="LAUNCH_STAGE_UNSPECIFIED",m[g[6]="UNIMPLEMENTED"]="UNIMPLEMENTED",m[g[7]="PRELAUNCH"]="PRELAUNCH",m[g[1]="EARLY_ACCESS"]="EARLY_ACCESS",m[g[2]="ALPHA"]="ALPHA",m[g[3]="BETA"]="BETA",m[g[4]="GA"]="GA",m[g[5]="DEPRECATED"]="DEPRECATED",m),s.ResourceDescriptor=(Dt.prototype.type="",Dt.prototype.pattern=l.emptyArray,Dt.prototype.nameField="",Dt.prototype.history=0,Dt.prototype.plural="",Dt.prototype.singular="",Dt.prototype.style=l.emptyArray,Dt.fromObject=function(r){if(r instanceof a.google.api.ResourceDescriptor)return r;var b=new a.google.api.ResourceDescriptor;if(r.type!=null&&(b.type=String(r.type)),r.pattern){if(!Array.isArray(r.pattern))throw TypeError(".google.api.ResourceDescriptor.pattern: array expected");b.pattern=[];for(var S=0;S<r.pattern.length;++S)b.pattern[S]=String(r.pattern[S])}switch(r.nameField!=null&&(b.nameField=String(r.nameField)),r.history){default:typeof r.history=="number"&&(b.history=r.history);break;case"HISTORY_UNSPECIFIED":case 0:b.history=0;break;case"ORIGINALLY_SINGLE_PATTERN":case 1:b.history=1;break;case"FUTURE_MULTI_PATTERN":case 2:b.history=2}if(r.plural!=null&&(b.plural=String(r.plural)),r.singular!=null&&(b.singular=String(r.singular)),r.style){if(!Array.isArray(r.style))throw TypeError(".google.api.ResourceDescriptor.style: array expected");for(b.style=[],S=0;S<r.style.length;++S)switch(r.style[S]){default:if(typeof r.style[S]=="number"){b.style[S]=r.style[S];break}case"STYLE_UNSPECIFIED":case 0:b.style[S]=0;break;case"DECLARATIVE_FRIENDLY":case 1:b.style[S]=1}}return b},Dt.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.pattern=[],S.style=[]),b.defaults&&(S.type="",S.nameField="",S.history=b.enums===String?"HISTORY_UNSPECIFIED":0,S.plural="",S.singular=""),r.type!=null&&r.hasOwnProperty("type")&&(S.type=r.type),r.pattern&&r.pattern.length){S.pattern=[];for(var le=0;le<r.pattern.length;++le)S.pattern[le]=r.pattern[le]}if(r.nameField!=null&&r.hasOwnProperty("nameField")&&(S.nameField=r.nameField),r.history!=null&&r.hasOwnProperty("history")&&(S.history=b.enums!==String||a.google.api.ResourceDescriptor.History[r.history]===void 0?r.history:a.google.api.ResourceDescriptor.History[r.history]),r.plural!=null&&r.hasOwnProperty("plural")&&(S.plural=r.plural),r.singular!=null&&r.hasOwnProperty("singular")&&(S.singular=r.singular),r.style&&r.style.length)for(S.style=[],le=0;le<r.style.length;++le)S.style[le]=b.enums!==String||a.google.api.ResourceDescriptor.Style[r.style[le]]===void 0?r.style[le]:a.google.api.ResourceDescriptor.Style[r.style[le]];return S},Dt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Dt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.api.ResourceDescriptor"},Dt.History=(g={},(m=Object.create(g))[g[0]="HISTORY_UNSPECIFIED"]="HISTORY_UNSPECIFIED",m[g[1]="ORIGINALLY_SINGLE_PATTERN"]="ORIGINALLY_SINGLE_PATTERN",m[g[2]="FUTURE_MULTI_PATTERN"]="FUTURE_MULTI_PATTERN",m),Dt.Style=(g={},(m=Object.create(g))[g[0]="STYLE_UNSPECIFIED"]="STYLE_UNSPECIFIED",m[g[1]="DECLARATIVE_FRIENDLY"]="DECLARATIVE_FRIENDLY",m),Dt),s.ResourceReference=(_t.prototype.type="",_t.prototype.childType="",_t.fromObject=function(r){var b;return r instanceof a.google.api.ResourceReference?r:(b=new a.google.api.ResourceReference,r.type!=null&&(b.type=String(r.type)),r.childType!=null&&(b.childType=String(r.childType)),b)},_t.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.type="",S.childType=""),r.type!=null&&r.hasOwnProperty("type")&&(S.type=r.type),r.childType!=null&&r.hasOwnProperty("childType")&&(S.childType=r.childType),S},_t.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},_t.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.api.ResourceReference"},_t),s),d.protobuf=((p={}).FileDescriptorSet=(pt.prototype.file=l.emptyArray,pt.fromObject=function(r){if(r instanceof a.google.protobuf.FileDescriptorSet)return r;var b=new a.google.protobuf.FileDescriptorSet;if(r.file){if(!Array.isArray(r.file))throw TypeError(".google.protobuf.FileDescriptorSet.file: array expected");b.file=[];for(var S=0;S<r.file.length;++S){if(typeof r.file[S]!="object")throw TypeError(".google.protobuf.FileDescriptorSet.file: object expected");b.file[S]=a.google.protobuf.FileDescriptorProto.fromObject(r.file[S])}}return b},pt.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.file=[]),r.file&&r.file.length){S.file=[];for(var le=0;le<r.file.length;++le)S.file[le]=a.google.protobuf.FileDescriptorProto.toObject(r.file[le],b)}return S},pt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},pt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.FileDescriptorSet"},pt),p.Edition=(g={},(m=Object.create(g))[g[0]="EDITION_UNKNOWN"]="EDITION_UNKNOWN",m[g[998]="EDITION_PROTO2"]="EDITION_PROTO2",m[g[999]="EDITION_PROTO3"]="EDITION_PROTO3",m[g[1e3]="EDITION_2023"]="EDITION_2023",m[g[1001]="EDITION_2024"]="EDITION_2024",m[g[1]="EDITION_1_TEST_ONLY"]="EDITION_1_TEST_ONLY",m[g[2]="EDITION_2_TEST_ONLY"]="EDITION_2_TEST_ONLY",m[g[99997]="EDITION_99997_TEST_ONLY"]="EDITION_99997_TEST_ONLY",m[g[99998]="EDITION_99998_TEST_ONLY"]="EDITION_99998_TEST_ONLY",m[g[99999]="EDITION_99999_TEST_ONLY"]="EDITION_99999_TEST_ONLY",m[g[2147483647]="EDITION_MAX"]="EDITION_MAX",m),p.FileDescriptorProto=(kt.prototype.name="",kt.prototype.package="",kt.prototype.dependency=l.emptyArray,kt.prototype.publicDependency=l.emptyArray,kt.prototype.weakDependency=l.emptyArray,kt.prototype.messageType=l.emptyArray,kt.prototype.enumType=l.emptyArray,kt.prototype.service=l.emptyArray,kt.prototype.extension=l.emptyArray,kt.prototype.options=null,kt.prototype.sourceCodeInfo=null,kt.prototype.syntax="",kt.prototype.edition=0,kt.fromObject=function(r){if(r instanceof a.google.protobuf.FileDescriptorProto)return r;var b=new a.google.protobuf.FileDescriptorProto;if(r.name!=null&&(b.name=String(r.name)),r.package!=null&&(b.package=String(r.package)),r.dependency){if(!Array.isArray(r.dependency))throw TypeError(".google.protobuf.FileDescriptorProto.dependency: array expected");b.dependency=[];for(var S=0;S<r.dependency.length;++S)b.dependency[S]=String(r.dependency[S])}if(r.publicDependency){if(!Array.isArray(r.publicDependency))throw TypeError(".google.protobuf.FileDescriptorProto.publicDependency: array expected");for(b.publicDependency=[],S=0;S<r.publicDependency.length;++S)b.publicDependency[S]=0|r.publicDependency[S]}if(r.weakDependency){if(!Array.isArray(r.weakDependency))throw TypeError(".google.protobuf.FileDescriptorProto.weakDependency: array expected");for(b.weakDependency=[],S=0;S<r.weakDependency.length;++S)b.weakDependency[S]=0|r.weakDependency[S]}if(r.messageType){if(!Array.isArray(r.messageType))throw TypeError(".google.protobuf.FileDescriptorProto.messageType: array expected");for(b.messageType=[],S=0;S<r.messageType.length;++S){if(typeof r.messageType[S]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.messageType: object expected");b.messageType[S]=a.google.protobuf.DescriptorProto.fromObject(r.messageType[S])}}if(r.enumType){if(!Array.isArray(r.enumType))throw TypeError(".google.protobuf.FileDescriptorProto.enumType: array expected");for(b.enumType=[],S=0;S<r.enumType.length;++S){if(typeof r.enumType[S]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.enumType: object expected");b.enumType[S]=a.google.protobuf.EnumDescriptorProto.fromObject(r.enumType[S])}}if(r.service){if(!Array.isArray(r.service))throw TypeError(".google.protobuf.FileDescriptorProto.service: array expected");for(b.service=[],S=0;S<r.service.length;++S){if(typeof r.service[S]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.service: object expected");b.service[S]=a.google.protobuf.ServiceDescriptorProto.fromObject(r.service[S])}}if(r.extension){if(!Array.isArray(r.extension))throw TypeError(".google.protobuf.FileDescriptorProto.extension: array expected");for(b.extension=[],S=0;S<r.extension.length;++S){if(typeof r.extension[S]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.extension: object expected");b.extension[S]=a.google.protobuf.FieldDescriptorProto.fromObject(r.extension[S])}}if(r.options!=null){if(typeof r.options!="object")throw TypeError(".google.protobuf.FileDescriptorProto.options: object expected");b.options=a.google.protobuf.FileOptions.fromObject(r.options)}if(r.sourceCodeInfo!=null){if(typeof r.sourceCodeInfo!="object")throw TypeError(".google.protobuf.FileDescriptorProto.sourceCodeInfo: object expected");b.sourceCodeInfo=a.google.protobuf.SourceCodeInfo.fromObject(r.sourceCodeInfo)}switch(r.syntax!=null&&(b.syntax=String(r.syntax)),r.edition){default:typeof r.edition=="number"&&(b.edition=r.edition);break;case"EDITION_UNKNOWN":case 0:b.edition=0;break;case"EDITION_PROTO2":case 998:b.edition=998;break;case"EDITION_PROTO3":case 999:b.edition=999;break;case"EDITION_2023":case 1e3:b.edition=1e3;break;case"EDITION_2024":case 1001:b.edition=1001;break;case"EDITION_1_TEST_ONLY":case 1:b.edition=1;break;case"EDITION_2_TEST_ONLY":case 2:b.edition=2;break;case"EDITION_99997_TEST_ONLY":case 99997:b.edition=99997;break;case"EDITION_99998_TEST_ONLY":case 99998:b.edition=99998;break;case"EDITION_99999_TEST_ONLY":case 99999:b.edition=99999;break;case"EDITION_MAX":case 2147483647:b.edition=2147483647}return b},kt.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.dependency=[],S.messageType=[],S.enumType=[],S.service=[],S.extension=[],S.publicDependency=[],S.weakDependency=[]),b.defaults&&(S.name="",S.package="",S.options=null,S.sourceCodeInfo=null,S.syntax="",S.edition=b.enums===String?"EDITION_UNKNOWN":0),r.name!=null&&r.hasOwnProperty("name")&&(S.name=r.name),r.package!=null&&r.hasOwnProperty("package")&&(S.package=r.package),r.dependency&&r.dependency.length){S.dependency=[];for(var le=0;le<r.dependency.length;++le)S.dependency[le]=r.dependency[le]}if(r.messageType&&r.messageType.length)for(S.messageType=[],le=0;le<r.messageType.length;++le)S.messageType[le]=a.google.protobuf.DescriptorProto.toObject(r.messageType[le],b);if(r.enumType&&r.enumType.length)for(S.enumType=[],le=0;le<r.enumType.length;++le)S.enumType[le]=a.google.protobuf.EnumDescriptorProto.toObject(r.enumType[le],b);if(r.service&&r.service.length)for(S.service=[],le=0;le<r.service.length;++le)S.service[le]=a.google.protobuf.ServiceDescriptorProto.toObject(r.service[le],b);if(r.extension&&r.extension.length)for(S.extension=[],le=0;le<r.extension.length;++le)S.extension[le]=a.google.protobuf.FieldDescriptorProto.toObject(r.extension[le],b);if(r.options!=null&&r.hasOwnProperty("options")&&(S.options=a.google.protobuf.FileOptions.toObject(r.options,b)),r.sourceCodeInfo!=null&&r.hasOwnProperty("sourceCodeInfo")&&(S.sourceCodeInfo=a.google.protobuf.SourceCodeInfo.toObject(r.sourceCodeInfo,b)),r.publicDependency&&r.publicDependency.length)for(S.publicDependency=[],le=0;le<r.publicDependency.length;++le)S.publicDependency[le]=r.publicDependency[le];if(r.weakDependency&&r.weakDependency.length)for(S.weakDependency=[],le=0;le<r.weakDependency.length;++le)S.weakDependency[le]=r.weakDependency[le];return r.syntax!=null&&r.hasOwnProperty("syntax")&&(S.syntax=r.syntax),r.edition!=null&&r.hasOwnProperty("edition")&&(S.edition=b.enums!==String||a.google.protobuf.Edition[r.edition]===void 0?r.edition:a.google.protobuf.Edition[r.edition]),S},kt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},kt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.FileDescriptorProto"},kt),p.DescriptorProto=(Gt.prototype.name="",Gt.prototype.field=l.emptyArray,Gt.prototype.extension=l.emptyArray,Gt.prototype.nestedType=l.emptyArray,Gt.prototype.enumType=l.emptyArray,Gt.prototype.extensionRange=l.emptyArray,Gt.prototype.oneofDecl=l.emptyArray,Gt.prototype.options=null,Gt.prototype.reservedRange=l.emptyArray,Gt.prototype.reservedName=l.emptyArray,Gt.fromObject=function(r){if(r instanceof a.google.protobuf.DescriptorProto)return r;var b=new a.google.protobuf.DescriptorProto;if(r.name!=null&&(b.name=String(r.name)),r.field){if(!Array.isArray(r.field))throw TypeError(".google.protobuf.DescriptorProto.field: array expected");b.field=[];for(var S=0;S<r.field.length;++S){if(typeof r.field[S]!="object")throw TypeError(".google.protobuf.DescriptorProto.field: object expected");b.field[S]=a.google.protobuf.FieldDescriptorProto.fromObject(r.field[S])}}if(r.extension){if(!Array.isArray(r.extension))throw TypeError(".google.protobuf.DescriptorProto.extension: array expected");for(b.extension=[],S=0;S<r.extension.length;++S){if(typeof r.extension[S]!="object")throw TypeError(".google.protobuf.DescriptorProto.extension: object expected");b.extension[S]=a.google.protobuf.FieldDescriptorProto.fromObject(r.extension[S])}}if(r.nestedType){if(!Array.isArray(r.nestedType))throw TypeError(".google.protobuf.DescriptorProto.nestedType: array expected");for(b.nestedType=[],S=0;S<r.nestedType.length;++S){if(typeof r.nestedType[S]!="object")throw TypeError(".google.protobuf.DescriptorProto.nestedType: object expected");b.nestedType[S]=a.google.protobuf.DescriptorProto.fromObject(r.nestedType[S])}}if(r.enumType){if(!Array.isArray(r.enumType))throw TypeError(".google.protobuf.DescriptorProto.enumType: array expected");for(b.enumType=[],S=0;S<r.enumType.length;++S){if(typeof r.enumType[S]!="object")throw TypeError(".google.protobuf.DescriptorProto.enumType: object expected");b.enumType[S]=a.google.protobuf.EnumDescriptorProto.fromObject(r.enumType[S])}}if(r.extensionRange){if(!Array.isArray(r.extensionRange))throw TypeError(".google.protobuf.DescriptorProto.extensionRange: array expected");for(b.extensionRange=[],S=0;S<r.extensionRange.length;++S){if(typeof r.extensionRange[S]!="object")throw TypeError(".google.protobuf.DescriptorProto.extensionRange: object expected");b.extensionRange[S]=a.google.protobuf.DescriptorProto.ExtensionRange.fromObject(r.extensionRange[S])}}if(r.oneofDecl){if(!Array.isArray(r.oneofDecl))throw TypeError(".google.protobuf.DescriptorProto.oneofDecl: array expected");for(b.oneofDecl=[],S=0;S<r.oneofDecl.length;++S){if(typeof r.oneofDecl[S]!="object")throw TypeError(".google.protobuf.DescriptorProto.oneofDecl: object expected");b.oneofDecl[S]=a.google.protobuf.OneofDescriptorProto.fromObject(r.oneofDecl[S])}}if(r.options!=null){if(typeof r.options!="object")throw TypeError(".google.protobuf.DescriptorProto.options: object expected");b.options=a.google.protobuf.MessageOptions.fromObject(r.options)}if(r.reservedRange){if(!Array.isArray(r.reservedRange))throw TypeError(".google.protobuf.DescriptorProto.reservedRange: array expected");for(b.reservedRange=[],S=0;S<r.reservedRange.length;++S){if(typeof r.reservedRange[S]!="object")throw TypeError(".google.protobuf.DescriptorProto.reservedRange: object expected");b.reservedRange[S]=a.google.protobuf.DescriptorProto.ReservedRange.fromObject(r.reservedRange[S])}}if(r.reservedName){if(!Array.isArray(r.reservedName))throw TypeError(".google.protobuf.DescriptorProto.reservedName: array expected");for(b.reservedName=[],S=0;S<r.reservedName.length;++S)b.reservedName[S]=String(r.reservedName[S])}return b},Gt.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.field=[],S.nestedType=[],S.enumType=[],S.extensionRange=[],S.extension=[],S.oneofDecl=[],S.reservedRange=[],S.reservedName=[]),b.defaults&&(S.name="",S.options=null),r.name!=null&&r.hasOwnProperty("name")&&(S.name=r.name),r.field&&r.field.length){S.field=[];for(var le=0;le<r.field.length;++le)S.field[le]=a.google.protobuf.FieldDescriptorProto.toObject(r.field[le],b)}if(r.nestedType&&r.nestedType.length)for(S.nestedType=[],le=0;le<r.nestedType.length;++le)S.nestedType[le]=a.google.protobuf.DescriptorProto.toObject(r.nestedType[le],b);if(r.enumType&&r.enumType.length)for(S.enumType=[],le=0;le<r.enumType.length;++le)S.enumType[le]=a.google.protobuf.EnumDescriptorProto.toObject(r.enumType[le],b);if(r.extensionRange&&r.extensionRange.length)for(S.extensionRange=[],le=0;le<r.extensionRange.length;++le)S.extensionRange[le]=a.google.protobuf.DescriptorProto.ExtensionRange.toObject(r.extensionRange[le],b);if(r.extension&&r.extension.length)for(S.extension=[],le=0;le<r.extension.length;++le)S.extension[le]=a.google.protobuf.FieldDescriptorProto.toObject(r.extension[le],b);if(r.options!=null&&r.hasOwnProperty("options")&&(S.options=a.google.protobuf.MessageOptions.toObject(r.options,b)),r.oneofDecl&&r.oneofDecl.length)for(S.oneofDecl=[],le=0;le<r.oneofDecl.length;++le)S.oneofDecl[le]=a.google.protobuf.OneofDescriptorProto.toObject(r.oneofDecl[le],b);if(r.reservedRange&&r.reservedRange.length)for(S.reservedRange=[],le=0;le<r.reservedRange.length;++le)S.reservedRange[le]=a.google.protobuf.DescriptorProto.ReservedRange.toObject(r.reservedRange[le],b);if(r.reservedName&&r.reservedName.length)for(S.reservedName=[],le=0;le<r.reservedName.length;++le)S.reservedName[le]=r.reservedName[le];return S},Gt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Gt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.DescriptorProto"},Gt.ExtensionRange=(wr.prototype.start=0,wr.prototype.end=0,wr.prototype.options=null,wr.fromObject=function(r){if(r instanceof a.google.protobuf.DescriptorProto.ExtensionRange)return r;var b=new a.google.protobuf.DescriptorProto.ExtensionRange;if(r.start!=null&&(b.start=0|r.start),r.end!=null&&(b.end=0|r.end),r.options!=null){if(typeof r.options!="object")throw TypeError(".google.protobuf.DescriptorProto.ExtensionRange.options: object expected");b.options=a.google.protobuf.ExtensionRangeOptions.fromObject(r.options)}return b},wr.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.start=0,S.end=0,S.options=null),r.start!=null&&r.hasOwnProperty("start")&&(S.start=r.start),r.end!=null&&r.hasOwnProperty("end")&&(S.end=r.end),r.options!=null&&r.hasOwnProperty("options")&&(S.options=a.google.protobuf.ExtensionRangeOptions.toObject(r.options,b)),S},wr.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},wr.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.DescriptorProto.ExtensionRange"},wr),Gt.ReservedRange=(rr.prototype.start=0,rr.prototype.end=0,rr.fromObject=function(r){var b;return r instanceof a.google.protobuf.DescriptorProto.ReservedRange?r:(b=new a.google.protobuf.DescriptorProto.ReservedRange,r.start!=null&&(b.start=0|r.start),r.end!=null&&(b.end=0|r.end),b)},rr.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.start=0,S.end=0),r.start!=null&&r.hasOwnProperty("start")&&(S.start=r.start),r.end!=null&&r.hasOwnProperty("end")&&(S.end=r.end),S},rr.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},rr.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.DescriptorProto.ReservedRange"},rr),Gt),p.ExtensionRangeOptions=(yr.prototype.uninterpretedOption=l.emptyArray,yr.prototype.declaration=l.emptyArray,yr.prototype.features=null,yr.prototype.verification=1,yr.fromObject=function(r){if(r instanceof a.google.protobuf.ExtensionRangeOptions)return r;var b=new a.google.protobuf.ExtensionRangeOptions;if(r.uninterpretedOption){if(!Array.isArray(r.uninterpretedOption))throw TypeError(".google.protobuf.ExtensionRangeOptions.uninterpretedOption: array expected");b.uninterpretedOption=[];for(var S=0;S<r.uninterpretedOption.length;++S){if(typeof r.uninterpretedOption[S]!="object")throw TypeError(".google.protobuf.ExtensionRangeOptions.uninterpretedOption: object expected");b.uninterpretedOption[S]=a.google.protobuf.UninterpretedOption.fromObject(r.uninterpretedOption[S])}}if(r.declaration){if(!Array.isArray(r.declaration))throw TypeError(".google.protobuf.ExtensionRangeOptions.declaration: array expected");for(b.declaration=[],S=0;S<r.declaration.length;++S){if(typeof r.declaration[S]!="object")throw TypeError(".google.protobuf.ExtensionRangeOptions.declaration: object expected");b.declaration[S]=a.google.protobuf.ExtensionRangeOptions.Declaration.fromObject(r.declaration[S])}}if(r.features!=null){if(typeof r.features!="object")throw TypeError(".google.protobuf.ExtensionRangeOptions.features: object expected");b.features=a.google.protobuf.FeatureSet.fromObject(r.features)}switch(r.verification){case"DECLARATION":case 0:b.verification=0;break;default:typeof r.verification=="number"&&(b.verification=r.verification);break;case"UNVERIFIED":case 1:b.verification=1}return b},yr.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.declaration=[],S.uninterpretedOption=[]),b.defaults&&(S.verification=b.enums===String?"UNVERIFIED":1,S.features=null),r.declaration&&r.declaration.length){S.declaration=[];for(var le=0;le<r.declaration.length;++le)S.declaration[le]=a.google.protobuf.ExtensionRangeOptions.Declaration.toObject(r.declaration[le],b)}if(r.verification!=null&&r.hasOwnProperty("verification")&&(S.verification=b.enums!==String||a.google.protobuf.ExtensionRangeOptions.VerificationState[r.verification]===void 0?r.verification:a.google.protobuf.ExtensionRangeOptions.VerificationState[r.verification]),r.features!=null&&r.hasOwnProperty("features")&&(S.features=a.google.protobuf.FeatureSet.toObject(r.features,b)),r.uninterpretedOption&&r.uninterpretedOption.length)for(S.uninterpretedOption=[],le=0;le<r.uninterpretedOption.length;++le)S.uninterpretedOption[le]=a.google.protobuf.UninterpretedOption.toObject(r.uninterpretedOption[le],b);return S},yr.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},yr.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.ExtensionRangeOptions"},yr.Declaration=(Zt.prototype.number=0,Zt.prototype.fullName="",Zt.prototype.type="",Zt.prototype.reserved=!1,Zt.prototype.repeated=!1,Zt.fromObject=function(r){var b;return r instanceof a.google.protobuf.ExtensionRangeOptions.Declaration?r:(b=new a.google.protobuf.ExtensionRangeOptions.Declaration,r.number!=null&&(b.number=0|r.number),r.fullName!=null&&(b.fullName=String(r.fullName)),r.type!=null&&(b.type=String(r.type)),r.reserved!=null&&(b.reserved=!!r.reserved),r.repeated!=null&&(b.repeated=!!r.repeated),b)},Zt.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.number=0,S.fullName="",S.type="",S.reserved=!1,S.repeated=!1),r.number!=null&&r.hasOwnProperty("number")&&(S.number=r.number),r.fullName!=null&&r.hasOwnProperty("fullName")&&(S.fullName=r.fullName),r.type!=null&&r.hasOwnProperty("type")&&(S.type=r.type),r.reserved!=null&&r.hasOwnProperty("reserved")&&(S.reserved=r.reserved),r.repeated!=null&&r.hasOwnProperty("repeated")&&(S.repeated=r.repeated),S},Zt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Zt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.ExtensionRangeOptions.Declaration"},Zt),yr.VerificationState=(g={},(m=Object.create(g))[g[0]="DECLARATION"]="DECLARATION",m[g[1]="UNVERIFIED"]="UNVERIFIED",m),yr),p.FieldDescriptorProto=(Xt.prototype.name="",Xt.prototype.number=0,Xt.prototype.label=1,Xt.prototype.type=1,Xt.prototype.typeName="",Xt.prototype.extendee="",Xt.prototype.defaultValue="",Xt.prototype.oneofIndex=0,Xt.prototype.jsonName="",Xt.prototype.options=null,Xt.prototype.proto3Optional=!1,Xt.fromObject=function(r){if(r instanceof a.google.protobuf.FieldDescriptorProto)return r;var b=new a.google.protobuf.FieldDescriptorProto;switch(r.name!=null&&(b.name=String(r.name)),r.number!=null&&(b.number=0|r.number),r.label){default:typeof r.label=="number"&&(b.label=r.label);break;case"LABEL_OPTIONAL":case 1:b.label=1;break;case"LABEL_REPEATED":case 3:b.label=3;break;case"LABEL_REQUIRED":case 2:b.label=2}switch(r.type){default:typeof r.type=="number"&&(b.type=r.type);break;case"TYPE_DOUBLE":case 1:b.type=1;break;case"TYPE_FLOAT":case 2:b.type=2;break;case"TYPE_INT64":case 3:b.type=3;break;case"TYPE_UINT64":case 4:b.type=4;break;case"TYPE_INT32":case 5:b.type=5;break;case"TYPE_FIXED64":case 6:b.type=6;break;case"TYPE_FIXED32":case 7:b.type=7;break;case"TYPE_BOOL":case 8:b.type=8;break;case"TYPE_STRING":case 9:b.type=9;break;case"TYPE_GROUP":case 10:b.type=10;break;case"TYPE_MESSAGE":case 11:b.type=11;break;case"TYPE_BYTES":case 12:b.type=12;break;case"TYPE_UINT32":case 13:b.type=13;break;case"TYPE_ENUM":case 14:b.type=14;break;case"TYPE_SFIXED32":case 15:b.type=15;break;case"TYPE_SFIXED64":case 16:b.type=16;break;case"TYPE_SINT32":case 17:b.type=17;break;case"TYPE_SINT64":case 18:b.type=18}if(r.typeName!=null&&(b.typeName=String(r.typeName)),r.extendee!=null&&(b.extendee=String(r.extendee)),r.defaultValue!=null&&(b.defaultValue=String(r.defaultValue)),r.oneofIndex!=null&&(b.oneofIndex=0|r.oneofIndex),r.jsonName!=null&&(b.jsonName=String(r.jsonName)),r.options!=null){if(typeof r.options!="object")throw TypeError(".google.protobuf.FieldDescriptorProto.options: object expected");b.options=a.google.protobuf.FieldOptions.fromObject(r.options)}return r.proto3Optional!=null&&(b.proto3Optional=!!r.proto3Optional),b},Xt.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.name="",S.extendee="",S.number=0,S.label=b.enums===String?"LABEL_OPTIONAL":1,S.type=b.enums===String?"TYPE_DOUBLE":1,S.typeName="",S.defaultValue="",S.options=null,S.oneofIndex=0,S.jsonName="",S.proto3Optional=!1),r.name!=null&&r.hasOwnProperty("name")&&(S.name=r.name),r.extendee!=null&&r.hasOwnProperty("extendee")&&(S.extendee=r.extendee),r.number!=null&&r.hasOwnProperty("number")&&(S.number=r.number),r.label!=null&&r.hasOwnProperty("label")&&(S.label=b.enums!==String||a.google.protobuf.FieldDescriptorProto.Label[r.label]===void 0?r.label:a.google.protobuf.FieldDescriptorProto.Label[r.label]),r.type!=null&&r.hasOwnProperty("type")&&(S.type=b.enums!==String||a.google.protobuf.FieldDescriptorProto.Type[r.type]===void 0?r.type:a.google.protobuf.FieldDescriptorProto.Type[r.type]),r.typeName!=null&&r.hasOwnProperty("typeName")&&(S.typeName=r.typeName),r.defaultValue!=null&&r.hasOwnProperty("defaultValue")&&(S.defaultValue=r.defaultValue),r.options!=null&&r.hasOwnProperty("options")&&(S.options=a.google.protobuf.FieldOptions.toObject(r.options,b)),r.oneofIndex!=null&&r.hasOwnProperty("oneofIndex")&&(S.oneofIndex=r.oneofIndex),r.jsonName!=null&&r.hasOwnProperty("jsonName")&&(S.jsonName=r.jsonName),r.proto3Optional!=null&&r.hasOwnProperty("proto3Optional")&&(S.proto3Optional=r.proto3Optional),S},Xt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Xt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.FieldDescriptorProto"},Xt.Type=(g={},(m=Object.create(g))[g[1]="TYPE_DOUBLE"]="TYPE_DOUBLE",m[g[2]="TYPE_FLOAT"]="TYPE_FLOAT",m[g[3]="TYPE_INT64"]="TYPE_INT64",m[g[4]="TYPE_UINT64"]="TYPE_UINT64",m[g[5]="TYPE_INT32"]="TYPE_INT32",m[g[6]="TYPE_FIXED64"]="TYPE_FIXED64",m[g[7]="TYPE_FIXED32"]="TYPE_FIXED32",m[g[8]="TYPE_BOOL"]="TYPE_BOOL",m[g[9]="TYPE_STRING"]="TYPE_STRING",m[g[10]="TYPE_GROUP"]="TYPE_GROUP",m[g[11]="TYPE_MESSAGE"]="TYPE_MESSAGE",m[g[12]="TYPE_BYTES"]="TYPE_BYTES",m[g[13]="TYPE_UINT32"]="TYPE_UINT32",m[g[14]="TYPE_ENUM"]="TYPE_ENUM",m[g[15]="TYPE_SFIXED32"]="TYPE_SFIXED32",m[g[16]="TYPE_SFIXED64"]="TYPE_SFIXED64",m[g[17]="TYPE_SINT32"]="TYPE_SINT32",m[g[18]="TYPE_SINT64"]="TYPE_SINT64",m),Xt.Label=(g={},(m=Object.create(g))[g[1]="LABEL_OPTIONAL"]="LABEL_OPTIONAL",m[g[3]="LABEL_REPEATED"]="LABEL_REPEATED",m[g[2]="LABEL_REQUIRED"]="LABEL_REQUIRED",m),Xt),p.OneofDescriptorProto=(Nr.prototype.name="",Nr.prototype.options=null,Nr.fromObject=function(r){if(r instanceof a.google.protobuf.OneofDescriptorProto)return r;var b=new a.google.protobuf.OneofDescriptorProto;if(r.name!=null&&(b.name=String(r.name)),r.options!=null){if(typeof r.options!="object")throw TypeError(".google.protobuf.OneofDescriptorProto.options: object expected");b.options=a.google.protobuf.OneofOptions.fromObject(r.options)}return b},Nr.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.name="",S.options=null),r.name!=null&&r.hasOwnProperty("name")&&(S.name=r.name),r.options!=null&&r.hasOwnProperty("options")&&(S.options=a.google.protobuf.OneofOptions.toObject(r.options,b)),S},Nr.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Nr.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.OneofDescriptorProto"},Nr),p.EnumDescriptorProto=(ye.prototype.name="",ye.prototype.value=l.emptyArray,ye.prototype.options=null,ye.prototype.reservedRange=l.emptyArray,ye.prototype.reservedName=l.emptyArray,ye.fromObject=function(r){if(r instanceof a.google.protobuf.EnumDescriptorProto)return r;var b=new a.google.protobuf.EnumDescriptorProto;if(r.name!=null&&(b.name=String(r.name)),r.value){if(!Array.isArray(r.value))throw TypeError(".google.protobuf.EnumDescriptorProto.value: array expected");b.value=[];for(var S=0;S<r.value.length;++S){if(typeof r.value[S]!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.value: object expected");b.value[S]=a.google.protobuf.EnumValueDescriptorProto.fromObject(r.value[S])}}if(r.options!=null){if(typeof r.options!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.options: object expected");b.options=a.google.protobuf.EnumOptions.fromObject(r.options)}if(r.reservedRange){if(!Array.isArray(r.reservedRange))throw TypeError(".google.protobuf.EnumDescriptorProto.reservedRange: array expected");for(b.reservedRange=[],S=0;S<r.reservedRange.length;++S){if(typeof r.reservedRange[S]!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.reservedRange: object expected");b.reservedRange[S]=a.google.protobuf.EnumDescriptorProto.EnumReservedRange.fromObject(r.reservedRange[S])}}if(r.reservedName){if(!Array.isArray(r.reservedName))throw TypeError(".google.protobuf.EnumDescriptorProto.reservedName: array expected");for(b.reservedName=[],S=0;S<r.reservedName.length;++S)b.reservedName[S]=String(r.reservedName[S])}return b},ye.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.value=[],S.reservedRange=[],S.reservedName=[]),b.defaults&&(S.name="",S.options=null),r.name!=null&&r.hasOwnProperty("name")&&(S.name=r.name),r.value&&r.value.length){S.value=[];for(var le=0;le<r.value.length;++le)S.value[le]=a.google.protobuf.EnumValueDescriptorProto.toObject(r.value[le],b)}if(r.options!=null&&r.hasOwnProperty("options")&&(S.options=a.google.protobuf.EnumOptions.toObject(r.options,b)),r.reservedRange&&r.reservedRange.length)for(S.reservedRange=[],le=0;le<r.reservedRange.length;++le)S.reservedRange[le]=a.google.protobuf.EnumDescriptorProto.EnumReservedRange.toObject(r.reservedRange[le],b);if(r.reservedName&&r.reservedName.length)for(S.reservedName=[],le=0;le<r.reservedName.length;++le)S.reservedName[le]=r.reservedName[le];return S},ye.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ye.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.EnumDescriptorProto"},ye.EnumReservedRange=(_e.prototype.start=0,_e.prototype.end=0,_e.fromObject=function(r){var b;return r instanceof a.google.protobuf.EnumDescriptorProto.EnumReservedRange?r:(b=new a.google.protobuf.EnumDescriptorProto.EnumReservedRange,r.start!=null&&(b.start=0|r.start),r.end!=null&&(b.end=0|r.end),b)},_e.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.start=0,S.end=0),r.start!=null&&r.hasOwnProperty("start")&&(S.start=r.start),r.end!=null&&r.hasOwnProperty("end")&&(S.end=r.end),S},_e.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},_e.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.EnumDescriptorProto.EnumReservedRange"},_e),ye),p.EnumValueDescriptorProto=(Te.prototype.name="",Te.prototype.number=0,Te.prototype.options=null,Te.fromObject=function(r){if(r instanceof a.google.protobuf.EnumValueDescriptorProto)return r;var b=new a.google.protobuf.EnumValueDescriptorProto;if(r.name!=null&&(b.name=String(r.name)),r.number!=null&&(b.number=0|r.number),r.options!=null){if(typeof r.options!="object")throw TypeError(".google.protobuf.EnumValueDescriptorProto.options: object expected");b.options=a.google.protobuf.EnumValueOptions.fromObject(r.options)}return b},Te.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.name="",S.number=0,S.options=null),r.name!=null&&r.hasOwnProperty("name")&&(S.name=r.name),r.number!=null&&r.hasOwnProperty("number")&&(S.number=r.number),r.options!=null&&r.hasOwnProperty("options")&&(S.options=a.google.protobuf.EnumValueOptions.toObject(r.options,b)),S},Te.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Te.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.EnumValueDescriptorProto"},Te),p.ServiceDescriptorProto=(De.prototype.name="",De.prototype.method=l.emptyArray,De.prototype.options=null,De.fromObject=function(r){if(r instanceof a.google.protobuf.ServiceDescriptorProto)return r;var b=new a.google.protobuf.ServiceDescriptorProto;if(r.name!=null&&(b.name=String(r.name)),r.method){if(!Array.isArray(r.method))throw TypeError(".google.protobuf.ServiceDescriptorProto.method: array expected");b.method=[];for(var S=0;S<r.method.length;++S){if(typeof r.method[S]!="object")throw TypeError(".google.protobuf.ServiceDescriptorProto.method: object expected");b.method[S]=a.google.protobuf.MethodDescriptorProto.fromObject(r.method[S])}}if(r.options!=null){if(typeof r.options!="object")throw TypeError(".google.protobuf.ServiceDescriptorProto.options: object expected");b.options=a.google.protobuf.ServiceOptions.fromObject(r.options)}return b},De.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.method=[]),b.defaults&&(S.name="",S.options=null),r.name!=null&&r.hasOwnProperty("name")&&(S.name=r.name),r.method&&r.method.length){S.method=[];for(var le=0;le<r.method.length;++le)S.method[le]=a.google.protobuf.MethodDescriptorProto.toObject(r.method[le],b)}return r.options!=null&&r.hasOwnProperty("options")&&(S.options=a.google.protobuf.ServiceOptions.toObject(r.options,b)),S},De.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},De.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.ServiceDescriptorProto"},De),p.MethodDescriptorProto=($e.prototype.name="",$e.prototype.inputType="",$e.prototype.outputType="",$e.prototype.options=null,$e.prototype.clientStreaming=!1,$e.prototype.serverStreaming=!1,$e.fromObject=function(r){if(r instanceof a.google.protobuf.MethodDescriptorProto)return r;var b=new a.google.protobuf.MethodDescriptorProto;if(r.name!=null&&(b.name=String(r.name)),r.inputType!=null&&(b.inputType=String(r.inputType)),r.outputType!=null&&(b.outputType=String(r.outputType)),r.options!=null){if(typeof r.options!="object")throw TypeError(".google.protobuf.MethodDescriptorProto.options: object expected");b.options=a.google.protobuf.MethodOptions.fromObject(r.options)}return r.clientStreaming!=null&&(b.clientStreaming=!!r.clientStreaming),r.serverStreaming!=null&&(b.serverStreaming=!!r.serverStreaming),b},$e.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.name="",S.inputType="",S.outputType="",S.options=null,S.clientStreaming=!1,S.serverStreaming=!1),r.name!=null&&r.hasOwnProperty("name")&&(S.name=r.name),r.inputType!=null&&r.hasOwnProperty("inputType")&&(S.inputType=r.inputType),r.outputType!=null&&r.hasOwnProperty("outputType")&&(S.outputType=r.outputType),r.options!=null&&r.hasOwnProperty("options")&&(S.options=a.google.protobuf.MethodOptions.toObject(r.options,b)),r.clientStreaming!=null&&r.hasOwnProperty("clientStreaming")&&(S.clientStreaming=r.clientStreaming),r.serverStreaming!=null&&r.hasOwnProperty("serverStreaming")&&(S.serverStreaming=r.serverStreaming),S},$e.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},$e.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.MethodDescriptorProto"},$e),p.FileOptions=(Ge.prototype.javaPackage="",Ge.prototype.javaOuterClassname="",Ge.prototype.javaMultipleFiles=!1,Ge.prototype.javaGenerateEqualsAndHash=!1,Ge.prototype.javaStringCheckUtf8=!1,Ge.prototype.optimizeFor=1,Ge.prototype.goPackage="",Ge.prototype.ccGenericServices=!1,Ge.prototype.javaGenericServices=!1,Ge.prototype.pyGenericServices=!1,Ge.prototype.deprecated=!1,Ge.prototype.ccEnableArenas=!0,Ge.prototype.objcClassPrefix="",Ge.prototype.csharpNamespace="",Ge.prototype.swiftPrefix="",Ge.prototype.phpClassPrefix="",Ge.prototype.phpNamespace="",Ge.prototype.phpMetadataNamespace="",Ge.prototype.rubyPackage="",Ge.prototype.features=null,Ge.prototype.uninterpretedOption=l.emptyArray,Ge.prototype[".google.api.resourceDefinition"]=l.emptyArray,Ge.fromObject=function(r){if(r instanceof a.google.protobuf.FileOptions)return r;var b=new a.google.protobuf.FileOptions;switch(r.javaPackage!=null&&(b.javaPackage=String(r.javaPackage)),r.javaOuterClassname!=null&&(b.javaOuterClassname=String(r.javaOuterClassname)),r.javaMultipleFiles!=null&&(b.javaMultipleFiles=!!r.javaMultipleFiles),r.javaGenerateEqualsAndHash!=null&&(b.javaGenerateEqualsAndHash=!!r.javaGenerateEqualsAndHash),r.javaStringCheckUtf8!=null&&(b.javaStringCheckUtf8=!!r.javaStringCheckUtf8),r.optimizeFor){default:typeof r.optimizeFor=="number"&&(b.optimizeFor=r.optimizeFor);break;case"SPEED":case 1:b.optimizeFor=1;break;case"CODE_SIZE":case 2:b.optimizeFor=2;break;case"LITE_RUNTIME":case 3:b.optimizeFor=3}if(r.goPackage!=null&&(b.goPackage=String(r.goPackage)),r.ccGenericServices!=null&&(b.ccGenericServices=!!r.ccGenericServices),r.javaGenericServices!=null&&(b.javaGenericServices=!!r.javaGenericServices),r.pyGenericServices!=null&&(b.pyGenericServices=!!r.pyGenericServices),r.deprecated!=null&&(b.deprecated=!!r.deprecated),r.ccEnableArenas!=null&&(b.ccEnableArenas=!!r.ccEnableArenas),r.objcClassPrefix!=null&&(b.objcClassPrefix=String(r.objcClassPrefix)),r.csharpNamespace!=null&&(b.csharpNamespace=String(r.csharpNamespace)),r.swiftPrefix!=null&&(b.swiftPrefix=String(r.swiftPrefix)),r.phpClassPrefix!=null&&(b.phpClassPrefix=String(r.phpClassPrefix)),r.phpNamespace!=null&&(b.phpNamespace=String(r.phpNamespace)),r.phpMetadataNamespace!=null&&(b.phpMetadataNamespace=String(r.phpMetadataNamespace)),r.rubyPackage!=null&&(b.rubyPackage=String(r.rubyPackage)),r.features!=null){if(typeof r.features!="object")throw TypeError(".google.protobuf.FileOptions.features: object expected");b.features=a.google.protobuf.FeatureSet.fromObject(r.features)}if(r.uninterpretedOption){if(!Array.isArray(r.uninterpretedOption))throw TypeError(".google.protobuf.FileOptions.uninterpretedOption: array expected");b.uninterpretedOption=[];for(var S=0;S<r.uninterpretedOption.length;++S){if(typeof r.uninterpretedOption[S]!="object")throw TypeError(".google.protobuf.FileOptions.uninterpretedOption: object expected");b.uninterpretedOption[S]=a.google.protobuf.UninterpretedOption.fromObject(r.uninterpretedOption[S])}}if(r[".google.api.resourceDefinition"]){if(!Array.isArray(r[".google.api.resourceDefinition"]))throw TypeError(".google.protobuf.FileOptions..google.api.resourceDefinition: array expected");for(b[".google.api.resourceDefinition"]=[],S=0;S<r[".google.api.resourceDefinition"].length;++S){if(typeof r[".google.api.resourceDefinition"][S]!="object")throw TypeError(".google.protobuf.FileOptions..google.api.resourceDefinition: object expected");b[".google.api.resourceDefinition"][S]=a.google.api.ResourceDescriptor.fromObject(r[".google.api.resourceDefinition"][S])}}return b},Ge.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.uninterpretedOption=[],S[".google.api.resourceDefinition"]=[]),b.defaults&&(S.javaPackage="",S.javaOuterClassname="",S.optimizeFor=b.enums===String?"SPEED":1,S.javaMultipleFiles=!1,S.goPackage="",S.ccGenericServices=!1,S.javaGenericServices=!1,S.pyGenericServices=!1,S.javaGenerateEqualsAndHash=!1,S.deprecated=!1,S.javaStringCheckUtf8=!1,S.ccEnableArenas=!0,S.objcClassPrefix="",S.csharpNamespace="",S.swiftPrefix="",S.phpClassPrefix="",S.phpNamespace="",S.phpMetadataNamespace="",S.rubyPackage="",S.features=null),r.javaPackage!=null&&r.hasOwnProperty("javaPackage")&&(S.javaPackage=r.javaPackage),r.javaOuterClassname!=null&&r.hasOwnProperty("javaOuterClassname")&&(S.javaOuterClassname=r.javaOuterClassname),r.optimizeFor!=null&&r.hasOwnProperty("optimizeFor")&&(S.optimizeFor=b.enums!==String||a.google.protobuf.FileOptions.OptimizeMode[r.optimizeFor]===void 0?r.optimizeFor:a.google.protobuf.FileOptions.OptimizeMode[r.optimizeFor]),r.javaMultipleFiles!=null&&r.hasOwnProperty("javaMultipleFiles")&&(S.javaMultipleFiles=r.javaMultipleFiles),r.goPackage!=null&&r.hasOwnProperty("goPackage")&&(S.goPackage=r.goPackage),r.ccGenericServices!=null&&r.hasOwnProperty("ccGenericServices")&&(S.ccGenericServices=r.ccGenericServices),r.javaGenericServices!=null&&r.hasOwnProperty("javaGenericServices")&&(S.javaGenericServices=r.javaGenericServices),r.pyGenericServices!=null&&r.hasOwnProperty("pyGenericServices")&&(S.pyGenericServices=r.pyGenericServices),r.javaGenerateEqualsAndHash!=null&&r.hasOwnProperty("javaGenerateEqualsAndHash")&&(S.javaGenerateEqualsAndHash=r.javaGenerateEqualsAndHash),r.deprecated!=null&&r.hasOwnProperty("deprecated")&&(S.deprecated=r.deprecated),r.javaStringCheckUtf8!=null&&r.hasOwnProperty("javaStringCheckUtf8")&&(S.javaStringCheckUtf8=r.javaStringCheckUtf8),r.ccEnableArenas!=null&&r.hasOwnProperty("ccEnableArenas")&&(S.ccEnableArenas=r.ccEnableArenas),r.objcClassPrefix!=null&&r.hasOwnProperty("objcClassPrefix")&&(S.objcClassPrefix=r.objcClassPrefix),r.csharpNamespace!=null&&r.hasOwnProperty("csharpNamespace")&&(S.csharpNamespace=r.csharpNamespace),r.swiftPrefix!=null&&r.hasOwnProperty("swiftPrefix")&&(S.swiftPrefix=r.swiftPrefix),r.phpClassPrefix!=null&&r.hasOwnProperty("phpClassPrefix")&&(S.phpClassPrefix=r.phpClassPrefix),r.phpNamespace!=null&&r.hasOwnProperty("phpNamespace")&&(S.phpNamespace=r.phpNamespace),r.phpMetadataNamespace!=null&&r.hasOwnProperty("phpMetadataNamespace")&&(S.phpMetadataNamespace=r.phpMetadataNamespace),r.rubyPackage!=null&&r.hasOwnProperty("rubyPackage")&&(S.rubyPackage=r.rubyPackage),r.features!=null&&r.hasOwnProperty("features")&&(S.features=a.google.protobuf.FeatureSet.toObject(r.features,b)),r.uninterpretedOption&&r.uninterpretedOption.length){S.uninterpretedOption=[];for(var le=0;le<r.uninterpretedOption.length;++le)S.uninterpretedOption[le]=a.google.protobuf.UninterpretedOption.toObject(r.uninterpretedOption[le],b)}if(r[".google.api.resourceDefinition"]&&r[".google.api.resourceDefinition"].length)for(S[".google.api.resourceDefinition"]=[],le=0;le<r[".google.api.resourceDefinition"].length;++le)S[".google.api.resourceDefinition"][le]=a.google.api.ResourceDescriptor.toObject(r[".google.api.resourceDefinition"][le],b);return S},Ge.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Ge.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.FileOptions"},Ge.OptimizeMode=(g={},(m=Object.create(g))[g[1]="SPEED"]="SPEED",m[g[2]="CODE_SIZE"]="CODE_SIZE",m[g[3]="LITE_RUNTIME"]="LITE_RUNTIME",m),Ge),p.MessageOptions=(Ze.prototype.messageSetWireFormat=!1,Ze.prototype.noStandardDescriptorAccessor=!1,Ze.prototype.deprecated=!1,Ze.prototype.mapEntry=!1,Ze.prototype.deprecatedLegacyJsonFieldConflicts=!1,Ze.prototype.features=null,Ze.prototype.uninterpretedOption=l.emptyArray,Ze.prototype[".google.api.resource"]=null,Ze.fromObject=function(r){if(r instanceof a.google.protobuf.MessageOptions)return r;var b=new a.google.protobuf.MessageOptions;if(r.messageSetWireFormat!=null&&(b.messageSetWireFormat=!!r.messageSetWireFormat),r.noStandardDescriptorAccessor!=null&&(b.noStandardDescriptorAccessor=!!r.noStandardDescriptorAccessor),r.deprecated!=null&&(b.deprecated=!!r.deprecated),r.mapEntry!=null&&(b.mapEntry=!!r.mapEntry),r.deprecatedLegacyJsonFieldConflicts!=null&&(b.deprecatedLegacyJsonFieldConflicts=!!r.deprecatedLegacyJsonFieldConflicts),r.features!=null){if(typeof r.features!="object")throw TypeError(".google.protobuf.MessageOptions.features: object expected");b.features=a.google.protobuf.FeatureSet.fromObject(r.features)}if(r.uninterpretedOption){if(!Array.isArray(r.uninterpretedOption))throw TypeError(".google.protobuf.MessageOptions.uninterpretedOption: array expected");b.uninterpretedOption=[];for(var S=0;S<r.uninterpretedOption.length;++S){if(typeof r.uninterpretedOption[S]!="object")throw TypeError(".google.protobuf.MessageOptions.uninterpretedOption: object expected");b.uninterpretedOption[S]=a.google.protobuf.UninterpretedOption.fromObject(r.uninterpretedOption[S])}}if(r[".google.api.resource"]!=null){if(typeof r[".google.api.resource"]!="object")throw TypeError(".google.protobuf.MessageOptions..google.api.resource: object expected");b[".google.api.resource"]=a.google.api.ResourceDescriptor.fromObject(r[".google.api.resource"])}return b},Ze.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.uninterpretedOption=[]),b.defaults&&(S.messageSetWireFormat=!1,S.noStandardDescriptorAccessor=!1,S.deprecated=!1,S.mapEntry=!1,S.deprecatedLegacyJsonFieldConflicts=!1,S.features=null,S[".google.api.resource"]=null),r.messageSetWireFormat!=null&&r.hasOwnProperty("messageSetWireFormat")&&(S.messageSetWireFormat=r.messageSetWireFormat),r.noStandardDescriptorAccessor!=null&&r.hasOwnProperty("noStandardDescriptorAccessor")&&(S.noStandardDescriptorAccessor=r.noStandardDescriptorAccessor),r.deprecated!=null&&r.hasOwnProperty("deprecated")&&(S.deprecated=r.deprecated),r.mapEntry!=null&&r.hasOwnProperty("mapEntry")&&(S.mapEntry=r.mapEntry),r.deprecatedLegacyJsonFieldConflicts!=null&&r.hasOwnProperty("deprecatedLegacyJsonFieldConflicts")&&(S.deprecatedLegacyJsonFieldConflicts=r.deprecatedLegacyJsonFieldConflicts),r.features!=null&&r.hasOwnProperty("features")&&(S.features=a.google.protobuf.FeatureSet.toObject(r.features,b)),r.uninterpretedOption&&r.uninterpretedOption.length){S.uninterpretedOption=[];for(var le=0;le<r.uninterpretedOption.length;++le)S.uninterpretedOption[le]=a.google.protobuf.UninterpretedOption.toObject(r.uninterpretedOption[le],b)}return r[".google.api.resource"]!=null&&r.hasOwnProperty(".google.api.resource")&&(S[".google.api.resource"]=a.google.api.ResourceDescriptor.toObject(r[".google.api.resource"],b)),S},Ze.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Ze.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.MessageOptions"},Ze),p.FieldOptions=(Ye.prototype.ctype=0,Ye.prototype.packed=!1,Ye.prototype.jstype=0,Ye.prototype.lazy=!1,Ye.prototype.unverifiedLazy=!1,Ye.prototype.deprecated=!1,Ye.prototype.weak=!1,Ye.prototype.debugRedact=!1,Ye.prototype.retention=0,Ye.prototype.targets=l.emptyArray,Ye.prototype.editionDefaults=l.emptyArray,Ye.prototype.features=null,Ye.prototype.uninterpretedOption=l.emptyArray,Ye.prototype[".google.api.fieldBehavior"]=l.emptyArray,Ye.prototype[".google.api.resourceReference"]=null,Ye.fromObject=function(r){if(r instanceof a.google.protobuf.FieldOptions)return r;var b=new a.google.protobuf.FieldOptions;switch(r.ctype){default:typeof r.ctype=="number"&&(b.ctype=r.ctype);break;case"STRING":case 0:b.ctype=0;break;case"CORD":case 1:b.ctype=1;break;case"STRING_PIECE":case 2:b.ctype=2}switch(r.packed!=null&&(b.packed=!!r.packed),r.jstype){default:typeof r.jstype=="number"&&(b.jstype=r.jstype);break;case"JS_NORMAL":case 0:b.jstype=0;break;case"JS_STRING":case 1:b.jstype=1;break;case"JS_NUMBER":case 2:b.jstype=2}switch(r.lazy!=null&&(b.lazy=!!r.lazy),r.unverifiedLazy!=null&&(b.unverifiedLazy=!!r.unverifiedLazy),r.deprecated!=null&&(b.deprecated=!!r.deprecated),r.weak!=null&&(b.weak=!!r.weak),r.debugRedact!=null&&(b.debugRedact=!!r.debugRedact),r.retention){default:typeof r.retention=="number"&&(b.retention=r.retention);break;case"RETENTION_UNKNOWN":case 0:b.retention=0;break;case"RETENTION_RUNTIME":case 1:b.retention=1;break;case"RETENTION_SOURCE":case 2:b.retention=2}if(r.targets){if(!Array.isArray(r.targets))throw TypeError(".google.protobuf.FieldOptions.targets: array expected");b.targets=[];for(var S=0;S<r.targets.length;++S)switch(r.targets[S]){default:if(typeof r.targets[S]=="number"){b.targets[S]=r.targets[S];break}case"TARGET_TYPE_UNKNOWN":case 0:b.targets[S]=0;break;case"TARGET_TYPE_FILE":case 1:b.targets[S]=1;break;case"TARGET_TYPE_EXTENSION_RANGE":case 2:b.targets[S]=2;break;case"TARGET_TYPE_MESSAGE":case 3:b.targets[S]=3;break;case"TARGET_TYPE_FIELD":case 4:b.targets[S]=4;break;case"TARGET_TYPE_ONEOF":case 5:b.targets[S]=5;break;case"TARGET_TYPE_ENUM":case 6:b.targets[S]=6;break;case"TARGET_TYPE_ENUM_ENTRY":case 7:b.targets[S]=7;break;case"TARGET_TYPE_SERVICE":case 8:b.targets[S]=8;break;case"TARGET_TYPE_METHOD":case 9:b.targets[S]=9}}if(r.editionDefaults){if(!Array.isArray(r.editionDefaults))throw TypeError(".google.protobuf.FieldOptions.editionDefaults: array expected");for(b.editionDefaults=[],S=0;S<r.editionDefaults.length;++S){if(typeof r.editionDefaults[S]!="object")throw TypeError(".google.protobuf.FieldOptions.editionDefaults: object expected");b.editionDefaults[S]=a.google.protobuf.FieldOptions.EditionDefault.fromObject(r.editionDefaults[S])}}if(r.features!=null){if(typeof r.features!="object")throw TypeError(".google.protobuf.FieldOptions.features: object expected");b.features=a.google.protobuf.FeatureSet.fromObject(r.features)}if(r.uninterpretedOption){if(!Array.isArray(r.uninterpretedOption))throw TypeError(".google.protobuf.FieldOptions.uninterpretedOption: array expected");for(b.uninterpretedOption=[],S=0;S<r.uninterpretedOption.length;++S){if(typeof r.uninterpretedOption[S]!="object")throw TypeError(".google.protobuf.FieldOptions.uninterpretedOption: object expected");b.uninterpretedOption[S]=a.google.protobuf.UninterpretedOption.fromObject(r.uninterpretedOption[S])}}if(r[".google.api.fieldBehavior"]){if(!Array.isArray(r[".google.api.fieldBehavior"]))throw TypeError(".google.protobuf.FieldOptions..google.api.fieldBehavior: array expected");for(b[".google.api.fieldBehavior"]=[],S=0;S<r[".google.api.fieldBehavior"].length;++S)switch(r[".google.api.fieldBehavior"][S]){default:if(typeof r[".google.api.fieldBehavior"][S]=="number"){b[".google.api.fieldBehavior"][S]=r[".google.api.fieldBehavior"][S];break}case"FIELD_BEHAVIOR_UNSPECIFIED":case 0:b[".google.api.fieldBehavior"][S]=0;break;case"OPTIONAL":case 1:b[".google.api.fieldBehavior"][S]=1;break;case"REQUIRED":case 2:b[".google.api.fieldBehavior"][S]=2;break;case"OUTPUT_ONLY":case 3:b[".google.api.fieldBehavior"][S]=3;break;case"INPUT_ONLY":case 4:b[".google.api.fieldBehavior"][S]=4;break;case"IMMUTABLE":case 5:b[".google.api.fieldBehavior"][S]=5;break;case"UNORDERED_LIST":case 6:b[".google.api.fieldBehavior"][S]=6;break;case"NON_EMPTY_DEFAULT":case 7:b[".google.api.fieldBehavior"][S]=7;break;case"IDENTIFIER":case 8:b[".google.api.fieldBehavior"][S]=8}}if(r[".google.api.resourceReference"]!=null){if(typeof r[".google.api.resourceReference"]!="object")throw TypeError(".google.protobuf.FieldOptions..google.api.resourceReference: object expected");b[".google.api.resourceReference"]=a.google.api.ResourceReference.fromObject(r[".google.api.resourceReference"])}return b},Ye.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.targets=[],S.editionDefaults=[],S.uninterpretedOption=[],S[".google.api.fieldBehavior"]=[]),b.defaults&&(S.ctype=b.enums===String?"STRING":0,S.packed=!1,S.deprecated=!1,S.lazy=!1,S.jstype=b.enums===String?"JS_NORMAL":0,S.weak=!1,S.unverifiedLazy=!1,S.debugRedact=!1,S.retention=b.enums===String?"RETENTION_UNKNOWN":0,S.features=null,S[".google.api.resourceReference"]=null),r.ctype!=null&&r.hasOwnProperty("ctype")&&(S.ctype=b.enums!==String||a.google.protobuf.FieldOptions.CType[r.ctype]===void 0?r.ctype:a.google.protobuf.FieldOptions.CType[r.ctype]),r.packed!=null&&r.hasOwnProperty("packed")&&(S.packed=r.packed),r.deprecated!=null&&r.hasOwnProperty("deprecated")&&(S.deprecated=r.deprecated),r.lazy!=null&&r.hasOwnProperty("lazy")&&(S.lazy=r.lazy),r.jstype!=null&&r.hasOwnProperty("jstype")&&(S.jstype=b.enums!==String||a.google.protobuf.FieldOptions.JSType[r.jstype]===void 0?r.jstype:a.google.protobuf.FieldOptions.JSType[r.jstype]),r.weak!=null&&r.hasOwnProperty("weak")&&(S.weak=r.weak),r.unverifiedLazy!=null&&r.hasOwnProperty("unverifiedLazy")&&(S.unverifiedLazy=r.unverifiedLazy),r.debugRedact!=null&&r.hasOwnProperty("debugRedact")&&(S.debugRedact=r.debugRedact),r.retention!=null&&r.hasOwnProperty("retention")&&(S.retention=b.enums!==String||a.google.protobuf.FieldOptions.OptionRetention[r.retention]===void 0?r.retention:a.google.protobuf.FieldOptions.OptionRetention[r.retention]),r.targets&&r.targets.length){S.targets=[];for(var le=0;le<r.targets.length;++le)S.targets[le]=b.enums!==String||a.google.protobuf.FieldOptions.OptionTargetType[r.targets[le]]===void 0?r.targets[le]:a.google.protobuf.FieldOptions.OptionTargetType[r.targets[le]]}if(r.editionDefaults&&r.editionDefaults.length)for(S.editionDefaults=[],le=0;le<r.editionDefaults.length;++le)S.editionDefaults[le]=a.google.protobuf.FieldOptions.EditionDefault.toObject(r.editionDefaults[le],b);if(r.features!=null&&r.hasOwnProperty("features")&&(S.features=a.google.protobuf.FeatureSet.toObject(r.features,b)),r.uninterpretedOption&&r.uninterpretedOption.length)for(S.uninterpretedOption=[],le=0;le<r.uninterpretedOption.length;++le)S.uninterpretedOption[le]=a.google.protobuf.UninterpretedOption.toObject(r.uninterpretedOption[le],b);if(r[".google.api.fieldBehavior"]&&r[".google.api.fieldBehavior"].length)for(S[".google.api.fieldBehavior"]=[],le=0;le<r[".google.api.fieldBehavior"].length;++le)S[".google.api.fieldBehavior"][le]=b.enums!==String||a.google.api.FieldBehavior[r[".google.api.fieldBehavior"][le]]===void 0?r[".google.api.fieldBehavior"][le]:a.google.api.FieldBehavior[r[".google.api.fieldBehavior"][le]];return r[".google.api.resourceReference"]!=null&&r.hasOwnProperty(".google.api.resourceReference")&&(S[".google.api.resourceReference"]=a.google.api.ResourceReference.toObject(r[".google.api.resourceReference"],b)),S},Ye.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Ye.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.FieldOptions"},Ye.CType=(g={},(m=Object.create(g))[g[0]="STRING"]="STRING",m[g[1]="CORD"]="CORD",m[g[2]="STRING_PIECE"]="STRING_PIECE",m),Ye.JSType=(g={},(m=Object.create(g))[g[0]="JS_NORMAL"]="JS_NORMAL",m[g[1]="JS_STRING"]="JS_STRING",m[g[2]="JS_NUMBER"]="JS_NUMBER",m),Ye.OptionRetention=(g={},(m=Object.create(g))[g[0]="RETENTION_UNKNOWN"]="RETENTION_UNKNOWN",m[g[1]="RETENTION_RUNTIME"]="RETENTION_RUNTIME",m[g[2]="RETENTION_SOURCE"]="RETENTION_SOURCE",m),Ye.OptionTargetType=(g={},(m=Object.create(g))[g[0]="TARGET_TYPE_UNKNOWN"]="TARGET_TYPE_UNKNOWN",m[g[1]="TARGET_TYPE_FILE"]="TARGET_TYPE_FILE",m[g[2]="TARGET_TYPE_EXTENSION_RANGE"]="TARGET_TYPE_EXTENSION_RANGE",m[g[3]="TARGET_TYPE_MESSAGE"]="TARGET_TYPE_MESSAGE",m[g[4]="TARGET_TYPE_FIELD"]="TARGET_TYPE_FIELD",m[g[5]="TARGET_TYPE_ONEOF"]="TARGET_TYPE_ONEOF",m[g[6]="TARGET_TYPE_ENUM"]="TARGET_TYPE_ENUM",m[g[7]="TARGET_TYPE_ENUM_ENTRY"]="TARGET_TYPE_ENUM_ENTRY",m[g[8]="TARGET_TYPE_SERVICE"]="TARGET_TYPE_SERVICE",m[g[9]="TARGET_TYPE_METHOD"]="TARGET_TYPE_METHOD",m),Ye.EditionDefault=(At.prototype.edition=0,At.prototype.value="",At.fromObject=function(r){if(r instanceof a.google.protobuf.FieldOptions.EditionDefault)return r;var b=new a.google.protobuf.FieldOptions.EditionDefault;switch(r.edition){default:typeof r.edition=="number"&&(b.edition=r.edition);break;case"EDITION_UNKNOWN":case 0:b.edition=0;break;case"EDITION_PROTO2":case 998:b.edition=998;break;case"EDITION_PROTO3":case 999:b.edition=999;break;case"EDITION_2023":case 1e3:b.edition=1e3;break;case"EDITION_2024":case 1001:b.edition=1001;break;case"EDITION_1_TEST_ONLY":case 1:b.edition=1;break;case"EDITION_2_TEST_ONLY":case 2:b.edition=2;break;case"EDITION_99997_TEST_ONLY":case 99997:b.edition=99997;break;case"EDITION_99998_TEST_ONLY":case 99998:b.edition=99998;break;case"EDITION_99999_TEST_ONLY":case 99999:b.edition=99999;break;case"EDITION_MAX":case 2147483647:b.edition=2147483647}return r.value!=null&&(b.value=String(r.value)),b},At.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.value="",S.edition=b.enums===String?"EDITION_UNKNOWN":0),r.value!=null&&r.hasOwnProperty("value")&&(S.value=r.value),r.edition!=null&&r.hasOwnProperty("edition")&&(S.edition=b.enums!==String||a.google.protobuf.Edition[r.edition]===void 0?r.edition:a.google.protobuf.Edition[r.edition]),S},At.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},At.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.FieldOptions.EditionDefault"},At),Ye),p.OneofOptions=(Kt.prototype.features=null,Kt.prototype.uninterpretedOption=l.emptyArray,Kt.fromObject=function(r){if(r instanceof a.google.protobuf.OneofOptions)return r;var b=new a.google.protobuf.OneofOptions;if(r.features!=null){if(typeof r.features!="object")throw TypeError(".google.protobuf.OneofOptions.features: object expected");b.features=a.google.protobuf.FeatureSet.fromObject(r.features)}if(r.uninterpretedOption){if(!Array.isArray(r.uninterpretedOption))throw TypeError(".google.protobuf.OneofOptions.uninterpretedOption: array expected");b.uninterpretedOption=[];for(var S=0;S<r.uninterpretedOption.length;++S){if(typeof r.uninterpretedOption[S]!="object")throw TypeError(".google.protobuf.OneofOptions.uninterpretedOption: object expected");b.uninterpretedOption[S]=a.google.protobuf.UninterpretedOption.fromObject(r.uninterpretedOption[S])}}return b},Kt.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.uninterpretedOption=[]),b.defaults&&(S.features=null),r.features!=null&&r.hasOwnProperty("features")&&(S.features=a.google.protobuf.FeatureSet.toObject(r.features,b)),r.uninterpretedOption&&r.uninterpretedOption.length){S.uninterpretedOption=[];for(var le=0;le<r.uninterpretedOption.length;++le)S.uninterpretedOption[le]=a.google.protobuf.UninterpretedOption.toObject(r.uninterpretedOption[le],b)}return S},Kt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Kt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.OneofOptions"},Kt),p.EnumOptions=(er.prototype.allowAlias=!1,er.prototype.deprecated=!1,er.prototype.deprecatedLegacyJsonFieldConflicts=!1,er.prototype.features=null,er.prototype.uninterpretedOption=l.emptyArray,er.fromObject=function(r){if(r instanceof a.google.protobuf.EnumOptions)return r;var b=new a.google.protobuf.EnumOptions;if(r.allowAlias!=null&&(b.allowAlias=!!r.allowAlias),r.deprecated!=null&&(b.deprecated=!!r.deprecated),r.deprecatedLegacyJsonFieldConflicts!=null&&(b.deprecatedLegacyJsonFieldConflicts=!!r.deprecatedLegacyJsonFieldConflicts),r.features!=null){if(typeof r.features!="object")throw TypeError(".google.protobuf.EnumOptions.features: object expected");b.features=a.google.protobuf.FeatureSet.fromObject(r.features)}if(r.uninterpretedOption){if(!Array.isArray(r.uninterpretedOption))throw TypeError(".google.protobuf.EnumOptions.uninterpretedOption: array expected");b.uninterpretedOption=[];for(var S=0;S<r.uninterpretedOption.length;++S){if(typeof r.uninterpretedOption[S]!="object")throw TypeError(".google.protobuf.EnumOptions.uninterpretedOption: object expected");b.uninterpretedOption[S]=a.google.protobuf.UninterpretedOption.fromObject(r.uninterpretedOption[S])}}return b},er.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.uninterpretedOption=[]),b.defaults&&(S.allowAlias=!1,S.deprecated=!1,S.deprecatedLegacyJsonFieldConflicts=!1,S.features=null),r.allowAlias!=null&&r.hasOwnProperty("allowAlias")&&(S.allowAlias=r.allowAlias),r.deprecated!=null&&r.hasOwnProperty("deprecated")&&(S.deprecated=r.deprecated),r.deprecatedLegacyJsonFieldConflicts!=null&&r.hasOwnProperty("deprecatedLegacyJsonFieldConflicts")&&(S.deprecatedLegacyJsonFieldConflicts=r.deprecatedLegacyJsonFieldConflicts),r.features!=null&&r.hasOwnProperty("features")&&(S.features=a.google.protobuf.FeatureSet.toObject(r.features,b)),r.uninterpretedOption&&r.uninterpretedOption.length){S.uninterpretedOption=[];for(var le=0;le<r.uninterpretedOption.length;++le)S.uninterpretedOption[le]=a.google.protobuf.UninterpretedOption.toObject(r.uninterpretedOption[le],b)}return S},er.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},er.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.EnumOptions"},er),p.EnumValueOptions=(nr.prototype.deprecated=!1,nr.prototype.features=null,nr.prototype.debugRedact=!1,nr.prototype.uninterpretedOption=l.emptyArray,nr.fromObject=function(r){if(r instanceof a.google.protobuf.EnumValueOptions)return r;var b=new a.google.protobuf.EnumValueOptions;if(r.deprecated!=null&&(b.deprecated=!!r.deprecated),r.features!=null){if(typeof r.features!="object")throw TypeError(".google.protobuf.EnumValueOptions.features: object expected");b.features=a.google.protobuf.FeatureSet.fromObject(r.features)}if(r.debugRedact!=null&&(b.debugRedact=!!r.debugRedact),r.uninterpretedOption){if(!Array.isArray(r.uninterpretedOption))throw TypeError(".google.protobuf.EnumValueOptions.uninterpretedOption: array expected");b.uninterpretedOption=[];for(var S=0;S<r.uninterpretedOption.length;++S){if(typeof r.uninterpretedOption[S]!="object")throw TypeError(".google.protobuf.EnumValueOptions.uninterpretedOption: object expected");b.uninterpretedOption[S]=a.google.protobuf.UninterpretedOption.fromObject(r.uninterpretedOption[S])}}return b},nr.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.uninterpretedOption=[]),b.defaults&&(S.deprecated=!1,S.features=null,S.debugRedact=!1),r.deprecated!=null&&r.hasOwnProperty("deprecated")&&(S.deprecated=r.deprecated),r.features!=null&&r.hasOwnProperty("features")&&(S.features=a.google.protobuf.FeatureSet.toObject(r.features,b)),r.debugRedact!=null&&r.hasOwnProperty("debugRedact")&&(S.debugRedact=r.debugRedact),r.uninterpretedOption&&r.uninterpretedOption.length){S.uninterpretedOption=[];for(var le=0;le<r.uninterpretedOption.length;++le)S.uninterpretedOption[le]=a.google.protobuf.UninterpretedOption.toObject(r.uninterpretedOption[le],b)}return S},nr.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},nr.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.EnumValueOptions"},nr),p.ServiceOptions=(ur.prototype.features=null,ur.prototype.deprecated=!1,ur.prototype.uninterpretedOption=l.emptyArray,ur.prototype[".google.api.defaultHost"]="",ur.prototype[".google.api.oauthScopes"]="",ur.prototype[".google.api.apiVersion"]="",ur.fromObject=function(r){if(r instanceof a.google.protobuf.ServiceOptions)return r;var b=new a.google.protobuf.ServiceOptions;if(r.features!=null){if(typeof r.features!="object")throw TypeError(".google.protobuf.ServiceOptions.features: object expected");b.features=a.google.protobuf.FeatureSet.fromObject(r.features)}if(r.deprecated!=null&&(b.deprecated=!!r.deprecated),r.uninterpretedOption){if(!Array.isArray(r.uninterpretedOption))throw TypeError(".google.protobuf.ServiceOptions.uninterpretedOption: array expected");b.uninterpretedOption=[];for(var S=0;S<r.uninterpretedOption.length;++S){if(typeof r.uninterpretedOption[S]!="object")throw TypeError(".google.protobuf.ServiceOptions.uninterpretedOption: object expected");b.uninterpretedOption[S]=a.google.protobuf.UninterpretedOption.fromObject(r.uninterpretedOption[S])}}return r[".google.api.defaultHost"]!=null&&(b[".google.api.defaultHost"]=String(r[".google.api.defaultHost"])),r[".google.api.oauthScopes"]!=null&&(b[".google.api.oauthScopes"]=String(r[".google.api.oauthScopes"])),r[".google.api.apiVersion"]!=null&&(b[".google.api.apiVersion"]=String(r[".google.api.apiVersion"])),b},ur.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.uninterpretedOption=[]),b.defaults&&(S.deprecated=!1,S.features=null,S[".google.api.defaultHost"]="",S[".google.api.oauthScopes"]="",S[".google.api.apiVersion"]=""),r.deprecated!=null&&r.hasOwnProperty("deprecated")&&(S.deprecated=r.deprecated),r.features!=null&&r.hasOwnProperty("features")&&(S.features=a.google.protobuf.FeatureSet.toObject(r.features,b)),r.uninterpretedOption&&r.uninterpretedOption.length){S.uninterpretedOption=[];for(var le=0;le<r.uninterpretedOption.length;++le)S.uninterpretedOption[le]=a.google.protobuf.UninterpretedOption.toObject(r.uninterpretedOption[le],b)}return r[".google.api.defaultHost"]!=null&&r.hasOwnProperty(".google.api.defaultHost")&&(S[".google.api.defaultHost"]=r[".google.api.defaultHost"]),r[".google.api.oauthScopes"]!=null&&r.hasOwnProperty(".google.api.oauthScopes")&&(S[".google.api.oauthScopes"]=r[".google.api.oauthScopes"]),r[".google.api.apiVersion"]!=null&&r.hasOwnProperty(".google.api.apiVersion")&&(S[".google.api.apiVersion"]=r[".google.api.apiVersion"]),S},ur.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ur.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.ServiceOptions"},ur),p.MethodOptions=(mr.prototype.deprecated=!1,mr.prototype.idempotencyLevel=0,mr.prototype.features=null,mr.prototype.uninterpretedOption=l.emptyArray,mr.prototype[".google.api.http"]=null,mr.prototype[".google.api.methodSignature"]=l.emptyArray,mr.prototype[".google.longrunning.operationInfo"]=null,mr.fromObject=function(r){if(r instanceof a.google.protobuf.MethodOptions)return r;var b=new a.google.protobuf.MethodOptions;switch(r.deprecated!=null&&(b.deprecated=!!r.deprecated),r.idempotencyLevel){default:typeof r.idempotencyLevel=="number"&&(b.idempotencyLevel=r.idempotencyLevel);break;case"IDEMPOTENCY_UNKNOWN":case 0:b.idempotencyLevel=0;break;case"NO_SIDE_EFFECTS":case 1:b.idempotencyLevel=1;break;case"IDEMPOTENT":case 2:b.idempotencyLevel=2}if(r.features!=null){if(typeof r.features!="object")throw TypeError(".google.protobuf.MethodOptions.features: object expected");b.features=a.google.protobuf.FeatureSet.fromObject(r.features)}if(r.uninterpretedOption){if(!Array.isArray(r.uninterpretedOption))throw TypeError(".google.protobuf.MethodOptions.uninterpretedOption: array expected");b.uninterpretedOption=[];for(var S=0;S<r.uninterpretedOption.length;++S){if(typeof r.uninterpretedOption[S]!="object")throw TypeError(".google.protobuf.MethodOptions.uninterpretedOption: object expected");b.uninterpretedOption[S]=a.google.protobuf.UninterpretedOption.fromObject(r.uninterpretedOption[S])}}if(r[".google.api.http"]!=null){if(typeof r[".google.api.http"]!="object")throw TypeError(".google.protobuf.MethodOptions..google.api.http: object expected");b[".google.api.http"]=a.google.api.HttpRule.fromObject(r[".google.api.http"])}if(r[".google.api.methodSignature"]){if(!Array.isArray(r[".google.api.methodSignature"]))throw TypeError(".google.protobuf.MethodOptions..google.api.methodSignature: array expected");for(b[".google.api.methodSignature"]=[],S=0;S<r[".google.api.methodSignature"].length;++S)b[".google.api.methodSignature"][S]=String(r[".google.api.methodSignature"][S])}if(r[".google.longrunning.operationInfo"]!=null){if(typeof r[".google.longrunning.operationInfo"]!="object")throw TypeError(".google.protobuf.MethodOptions..google.longrunning.operationInfo: object expected");b[".google.longrunning.operationInfo"]=a.google.longrunning.OperationInfo.fromObject(r[".google.longrunning.operationInfo"])}return b},mr.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.uninterpretedOption=[],S[".google.api.methodSignature"]=[]),b.defaults&&(S.deprecated=!1,S.idempotencyLevel=b.enums===String?"IDEMPOTENCY_UNKNOWN":0,S.features=null,S[".google.longrunning.operationInfo"]=null,S[".google.api.http"]=null),r.deprecated!=null&&r.hasOwnProperty("deprecated")&&(S.deprecated=r.deprecated),r.idempotencyLevel!=null&&r.hasOwnProperty("idempotencyLevel")&&(S.idempotencyLevel=b.enums!==String||a.google.protobuf.MethodOptions.IdempotencyLevel[r.idempotencyLevel]===void 0?r.idempotencyLevel:a.google.protobuf.MethodOptions.IdempotencyLevel[r.idempotencyLevel]),r.features!=null&&r.hasOwnProperty("features")&&(S.features=a.google.protobuf.FeatureSet.toObject(r.features,b)),r.uninterpretedOption&&r.uninterpretedOption.length){S.uninterpretedOption=[];for(var le=0;le<r.uninterpretedOption.length;++le)S.uninterpretedOption[le]=a.google.protobuf.UninterpretedOption.toObject(r.uninterpretedOption[le],b)}if(r[".google.longrunning.operationInfo"]!=null&&r.hasOwnProperty(".google.longrunning.operationInfo")&&(S[".google.longrunning.operationInfo"]=a.google.longrunning.OperationInfo.toObject(r[".google.longrunning.operationInfo"],b)),r[".google.api.methodSignature"]&&r[".google.api.methodSignature"].length)for(S[".google.api.methodSignature"]=[],le=0;le<r[".google.api.methodSignature"].length;++le)S[".google.api.methodSignature"][le]=r[".google.api.methodSignature"][le];return r[".google.api.http"]!=null&&r.hasOwnProperty(".google.api.http")&&(S[".google.api.http"]=a.google.api.HttpRule.toObject(r[".google.api.http"],b)),S},mr.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},mr.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.MethodOptions"},mr.IdempotencyLevel=(g={},(m=Object.create(g))[g[0]="IDEMPOTENCY_UNKNOWN"]="IDEMPOTENCY_UNKNOWN",m[g[1]="NO_SIDE_EFFECTS"]="NO_SIDE_EFFECTS",m[g[2]="IDEMPOTENT"]="IDEMPOTENT",m),mr),p.UninterpretedOption=(Wt.prototype.name=l.emptyArray,Wt.prototype.identifierValue="",Wt.prototype.positiveIntValue=l.Long?l.Long.fromBits(0,0,!0):0,Wt.prototype.negativeIntValue=l.Long?l.Long.fromBits(0,0,!1):0,Wt.prototype.doubleValue=0,Wt.prototype.stringValue=l.newBuffer([]),Wt.prototype.aggregateValue="",Wt.fromObject=function(r){if(r instanceof a.google.protobuf.UninterpretedOption)return r;var b=new a.google.protobuf.UninterpretedOption;if(r.name){if(!Array.isArray(r.name))throw TypeError(".google.protobuf.UninterpretedOption.name: array expected");b.name=[];for(var S=0;S<r.name.length;++S){if(typeof r.name[S]!="object")throw TypeError(".google.protobuf.UninterpretedOption.name: object expected");b.name[S]=a.google.protobuf.UninterpretedOption.NamePart.fromObject(r.name[S])}}return r.identifierValue!=null&&(b.identifierValue=String(r.identifierValue)),r.positiveIntValue!=null&&(l.Long?(b.positiveIntValue=l.Long.fromValue(r.positiveIntValue)).unsigned=!0:typeof r.positiveIntValue=="string"?b.positiveIntValue=parseInt(r.positiveIntValue,10):typeof r.positiveIntValue=="number"?b.positiveIntValue=r.positiveIntValue:typeof r.positiveIntValue=="object"&&(b.positiveIntValue=new l.LongBits(r.positiveIntValue.low>>>0,r.positiveIntValue.high>>>0).toNumber(!0))),r.negativeIntValue!=null&&(l.Long?(b.negativeIntValue=l.Long.fromValue(r.negativeIntValue)).unsigned=!1:typeof r.negativeIntValue=="string"?b.negativeIntValue=parseInt(r.negativeIntValue,10):typeof r.negativeIntValue=="number"?b.negativeIntValue=r.negativeIntValue:typeof r.negativeIntValue=="object"&&(b.negativeIntValue=new l.LongBits(r.negativeIntValue.low>>>0,r.negativeIntValue.high>>>0).toNumber())),r.doubleValue!=null&&(b.doubleValue=Number(r.doubleValue)),r.stringValue!=null&&(typeof r.stringValue=="string"?l.base64.decode(r.stringValue,b.stringValue=l.newBuffer(l.base64.length(r.stringValue)),0):0<=r.stringValue.length&&(b.stringValue=r.stringValue)),r.aggregateValue!=null&&(b.aggregateValue=String(r.aggregateValue)),b},Wt.toObject=function(r,b){var S,le={};if(((b=b||{}).arrays||b.defaults)&&(le.name=[]),b.defaults&&(le.identifierValue="",l.Long?(S=new l.Long(0,0,!0),le.positiveIntValue=b.longs===String?S.toString():b.longs===Number?S.toNumber():S):le.positiveIntValue=b.longs===String?"0":0,l.Long?(S=new l.Long(0,0,!1),le.negativeIntValue=b.longs===String?S.toString():b.longs===Number?S.toNumber():S):le.negativeIntValue=b.longs===String?"0":0,le.doubleValue=0,b.bytes===String?le.stringValue="":(le.stringValue=[],b.bytes!==Array&&(le.stringValue=l.newBuffer(le.stringValue))),le.aggregateValue=""),r.name&&r.name.length){le.name=[];for(var et=0;et<r.name.length;++et)le.name[et]=a.google.protobuf.UninterpretedOption.NamePart.toObject(r.name[et],b)}return r.identifierValue!=null&&r.hasOwnProperty("identifierValue")&&(le.identifierValue=r.identifierValue),r.positiveIntValue!=null&&r.hasOwnProperty("positiveIntValue")&&(typeof r.positiveIntValue=="number"?le.positiveIntValue=b.longs===String?String(r.positiveIntValue):r.positiveIntValue:le.positiveIntValue=b.longs===String?l.Long.prototype.toString.call(r.positiveIntValue):b.longs===Number?new l.LongBits(r.positiveIntValue.low>>>0,r.positiveIntValue.high>>>0).toNumber(!0):r.positiveIntValue),r.negativeIntValue!=null&&r.hasOwnProperty("negativeIntValue")&&(typeof r.negativeIntValue=="number"?le.negativeIntValue=b.longs===String?String(r.negativeIntValue):r.negativeIntValue:le.negativeIntValue=b.longs===String?l.Long.prototype.toString.call(r.negativeIntValue):b.longs===Number?new l.LongBits(r.negativeIntValue.low>>>0,r.negativeIntValue.high>>>0).toNumber():r.negativeIntValue),r.doubleValue!=null&&r.hasOwnProperty("doubleValue")&&(le.doubleValue=b.json&&!isFinite(r.doubleValue)?String(r.doubleValue):r.doubleValue),r.stringValue!=null&&r.hasOwnProperty("stringValue")&&(le.stringValue=b.bytes===String?l.base64.encode(r.stringValue,0,r.stringValue.length):b.bytes===Array?Array.prototype.slice.call(r.stringValue):r.stringValue),r.aggregateValue!=null&&r.hasOwnProperty("aggregateValue")&&(le.aggregateValue=r.aggregateValue),le},Wt.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Wt.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.UninterpretedOption"},Wt.NamePart=(hr.prototype.namePart="",hr.prototype.isExtension=!1,hr.fromObject=function(r){var b;return r instanceof a.google.protobuf.UninterpretedOption.NamePart?r:(b=new a.google.protobuf.UninterpretedOption.NamePart,r.namePart!=null&&(b.namePart=String(r.namePart)),r.isExtension!=null&&(b.isExtension=!!r.isExtension),b)},hr.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.namePart="",S.isExtension=!1),r.namePart!=null&&r.hasOwnProperty("namePart")&&(S.namePart=r.namePart),r.isExtension!=null&&r.hasOwnProperty("isExtension")&&(S.isExtension=r.isExtension),S},hr.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},hr.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.UninterpretedOption.NamePart"},hr),Wt),p.FeatureSet=(tr.prototype.fieldPresence=0,tr.prototype.enumType=0,tr.prototype.repeatedFieldEncoding=0,tr.prototype.utf8Validation=0,tr.prototype.messageEncoding=0,tr.prototype.jsonFormat=0,tr.fromObject=function(r){if(r instanceof a.google.protobuf.FeatureSet)return r;var b=new a.google.protobuf.FeatureSet;switch(r.fieldPresence){default:typeof r.fieldPresence=="number"&&(b.fieldPresence=r.fieldPresence);break;case"FIELD_PRESENCE_UNKNOWN":case 0:b.fieldPresence=0;break;case"EXPLICIT":case 1:b.fieldPresence=1;break;case"IMPLICIT":case 2:b.fieldPresence=2;break;case"LEGACY_REQUIRED":case 3:b.fieldPresence=3}switch(r.enumType){default:typeof r.enumType=="number"&&(b.enumType=r.enumType);break;case"ENUM_TYPE_UNKNOWN":case 0:b.enumType=0;break;case"OPEN":case 1:b.enumType=1;break;case"CLOSED":case 2:b.enumType=2}switch(r.repeatedFieldEncoding){default:typeof r.repeatedFieldEncoding=="number"&&(b.repeatedFieldEncoding=r.repeatedFieldEncoding);break;case"REPEATED_FIELD_ENCODING_UNKNOWN":case 0:b.repeatedFieldEncoding=0;break;case"PACKED":case 1:b.repeatedFieldEncoding=1;break;case"EXPANDED":case 2:b.repeatedFieldEncoding=2}switch(r.utf8Validation){default:typeof r.utf8Validation=="number"&&(b.utf8Validation=r.utf8Validation);break;case"UTF8_VALIDATION_UNKNOWN":case 0:b.utf8Validation=0;break;case"VERIFY":case 2:b.utf8Validation=2;break;case"NONE":case 3:b.utf8Validation=3}switch(r.messageEncoding){default:typeof r.messageEncoding=="number"&&(b.messageEncoding=r.messageEncoding);break;case"MESSAGE_ENCODING_UNKNOWN":case 0:b.messageEncoding=0;break;case"LENGTH_PREFIXED":case 1:b.messageEncoding=1;break;case"DELIMITED":case 2:b.messageEncoding=2}switch(r.jsonFormat){default:typeof r.jsonFormat=="number"&&(b.jsonFormat=r.jsonFormat);break;case"JSON_FORMAT_UNKNOWN":case 0:b.jsonFormat=0;break;case"ALLOW":case 1:b.jsonFormat=1;break;case"LEGACY_BEST_EFFORT":case 2:b.jsonFormat=2}return b},tr.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.fieldPresence=b.enums===String?"FIELD_PRESENCE_UNKNOWN":0,S.enumType=b.enums===String?"ENUM_TYPE_UNKNOWN":0,S.repeatedFieldEncoding=b.enums===String?"REPEATED_FIELD_ENCODING_UNKNOWN":0,S.utf8Validation=b.enums===String?"UTF8_VALIDATION_UNKNOWN":0,S.messageEncoding=b.enums===String?"MESSAGE_ENCODING_UNKNOWN":0,S.jsonFormat=b.enums===String?"JSON_FORMAT_UNKNOWN":0),r.fieldPresence!=null&&r.hasOwnProperty("fieldPresence")&&(S.fieldPresence=b.enums!==String||a.google.protobuf.FeatureSet.FieldPresence[r.fieldPresence]===void 0?r.fieldPresence:a.google.protobuf.FeatureSet.FieldPresence[r.fieldPresence]),r.enumType!=null&&r.hasOwnProperty("enumType")&&(S.enumType=b.enums!==String||a.google.protobuf.FeatureSet.EnumType[r.enumType]===void 0?r.enumType:a.google.protobuf.FeatureSet.EnumType[r.enumType]),r.repeatedFieldEncoding!=null&&r.hasOwnProperty("repeatedFieldEncoding")&&(S.repeatedFieldEncoding=b.enums!==String||a.google.protobuf.FeatureSet.RepeatedFieldEncoding[r.repeatedFieldEncoding]===void 0?r.repeatedFieldEncoding:a.google.protobuf.FeatureSet.RepeatedFieldEncoding[r.repeatedFieldEncoding]),r.utf8Validation!=null&&r.hasOwnProperty("utf8Validation")&&(S.utf8Validation=b.enums!==String||a.google.protobuf.FeatureSet.Utf8Validation[r.utf8Validation]===void 0?r.utf8Validation:a.google.protobuf.FeatureSet.Utf8Validation[r.utf8Validation]),r.messageEncoding!=null&&r.hasOwnProperty("messageEncoding")&&(S.messageEncoding=b.enums!==String||a.google.protobuf.FeatureSet.MessageEncoding[r.messageEncoding]===void 0?r.messageEncoding:a.google.protobuf.FeatureSet.MessageEncoding[r.messageEncoding]),r.jsonFormat!=null&&r.hasOwnProperty("jsonFormat")&&(S.jsonFormat=b.enums!==String||a.google.protobuf.FeatureSet.JsonFormat[r.jsonFormat]===void 0?r.jsonFormat:a.google.protobuf.FeatureSet.JsonFormat[r.jsonFormat]),S},tr.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},tr.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.FeatureSet"},tr.FieldPresence=(g={},(m=Object.create(g))[g[0]="FIELD_PRESENCE_UNKNOWN"]="FIELD_PRESENCE_UNKNOWN",m[g[1]="EXPLICIT"]="EXPLICIT",m[g[2]="IMPLICIT"]="IMPLICIT",m[g[3]="LEGACY_REQUIRED"]="LEGACY_REQUIRED",m),tr.EnumType=(g={},(m=Object.create(g))[g[0]="ENUM_TYPE_UNKNOWN"]="ENUM_TYPE_UNKNOWN",m[g[1]="OPEN"]="OPEN",m[g[2]="CLOSED"]="CLOSED",m),tr.RepeatedFieldEncoding=(g={},(m=Object.create(g))[g[0]="REPEATED_FIELD_ENCODING_UNKNOWN"]="REPEATED_FIELD_ENCODING_UNKNOWN",m[g[1]="PACKED"]="PACKED",m[g[2]="EXPANDED"]="EXPANDED",m),tr.Utf8Validation=(g={},(m=Object.create(g))[g[0]="UTF8_VALIDATION_UNKNOWN"]="UTF8_VALIDATION_UNKNOWN",m[g[2]="VERIFY"]="VERIFY",m[g[3]="NONE"]="NONE",m),tr.MessageEncoding=(g={},(m=Object.create(g))[g[0]="MESSAGE_ENCODING_UNKNOWN"]="MESSAGE_ENCODING_UNKNOWN",m[g[1]="LENGTH_PREFIXED"]="LENGTH_PREFIXED",m[g[2]="DELIMITED"]="DELIMITED",m),tr.JsonFormat=(g={},(m=Object.create(g))[g[0]="JSON_FORMAT_UNKNOWN"]="JSON_FORMAT_UNKNOWN",m[g[1]="ALLOW"]="ALLOW",m[g[2]="LEGACY_BEST_EFFORT"]="LEGACY_BEST_EFFORT",m),tr),p.FeatureSetDefaults=(ar.prototype.defaults=l.emptyArray,ar.prototype.minimumEdition=0,ar.prototype.maximumEdition=0,ar.fromObject=function(r){if(r instanceof a.google.protobuf.FeatureSetDefaults)return r;var b=new a.google.protobuf.FeatureSetDefaults;if(r.defaults){if(!Array.isArray(r.defaults))throw TypeError(".google.protobuf.FeatureSetDefaults.defaults: array expected");b.defaults=[];for(var S=0;S<r.defaults.length;++S){if(typeof r.defaults[S]!="object")throw TypeError(".google.protobuf.FeatureSetDefaults.defaults: object expected");b.defaults[S]=a.google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault.fromObject(r.defaults[S])}}switch(r.minimumEdition){default:typeof r.minimumEdition=="number"&&(b.minimumEdition=r.minimumEdition);break;case"EDITION_UNKNOWN":case 0:b.minimumEdition=0;break;case"EDITION_PROTO2":case 998:b.minimumEdition=998;break;case"EDITION_PROTO3":case 999:b.minimumEdition=999;break;case"EDITION_2023":case 1e3:b.minimumEdition=1e3;break;case"EDITION_2024":case 1001:b.minimumEdition=1001;break;case"EDITION_1_TEST_ONLY":case 1:b.minimumEdition=1;break;case"EDITION_2_TEST_ONLY":case 2:b.minimumEdition=2;break;case"EDITION_99997_TEST_ONLY":case 99997:b.minimumEdition=99997;break;case"EDITION_99998_TEST_ONLY":case 99998:b.minimumEdition=99998;break;case"EDITION_99999_TEST_ONLY":case 99999:b.minimumEdition=99999;break;case"EDITION_MAX":case 2147483647:b.minimumEdition=2147483647}switch(r.maximumEdition){default:typeof r.maximumEdition=="number"&&(b.maximumEdition=r.maximumEdition);break;case"EDITION_UNKNOWN":case 0:b.maximumEdition=0;break;case"EDITION_PROTO2":case 998:b.maximumEdition=998;break;case"EDITION_PROTO3":case 999:b.maximumEdition=999;break;case"EDITION_2023":case 1e3:b.maximumEdition=1e3;break;case"EDITION_2024":case 1001:b.maximumEdition=1001;break;case"EDITION_1_TEST_ONLY":case 1:b.maximumEdition=1;break;case"EDITION_2_TEST_ONLY":case 2:b.maximumEdition=2;break;case"EDITION_99997_TEST_ONLY":case 99997:b.maximumEdition=99997;break;case"EDITION_99998_TEST_ONLY":case 99998:b.maximumEdition=99998;break;case"EDITION_99999_TEST_ONLY":case 99999:b.maximumEdition=99999;break;case"EDITION_MAX":case 2147483647:b.maximumEdition=2147483647}return b},ar.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.defaults=[]),b.defaults&&(S.minimumEdition=b.enums===String?"EDITION_UNKNOWN":0,S.maximumEdition=b.enums===String?"EDITION_UNKNOWN":0),r.defaults&&r.defaults.length){S.defaults=[];for(var le=0;le<r.defaults.length;++le)S.defaults[le]=a.google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault.toObject(r.defaults[le],b)}return r.minimumEdition!=null&&r.hasOwnProperty("minimumEdition")&&(S.minimumEdition=b.enums!==String||a.google.protobuf.Edition[r.minimumEdition]===void 0?r.minimumEdition:a.google.protobuf.Edition[r.minimumEdition]),r.maximumEdition!=null&&r.hasOwnProperty("maximumEdition")&&(S.maximumEdition=b.enums!==String||a.google.protobuf.Edition[r.maximumEdition]===void 0?r.maximumEdition:a.google.protobuf.Edition[r.maximumEdition]),S},ar.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ar.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.FeatureSetDefaults"},ar.FeatureSetEditionDefault=(vr.prototype.edition=0,vr.prototype.features=null,vr.fromObject=function(r){if(r instanceof a.google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault)return r;var b=new a.google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault;switch(r.edition){default:typeof r.edition=="number"&&(b.edition=r.edition);break;case"EDITION_UNKNOWN":case 0:b.edition=0;break;case"EDITION_PROTO2":case 998:b.edition=998;break;case"EDITION_PROTO3":case 999:b.edition=999;break;case"EDITION_2023":case 1e3:b.edition=1e3;break;case"EDITION_2024":case 1001:b.edition=1001;break;case"EDITION_1_TEST_ONLY":case 1:b.edition=1;break;case"EDITION_2_TEST_ONLY":case 2:b.edition=2;break;case"EDITION_99997_TEST_ONLY":case 99997:b.edition=99997;break;case"EDITION_99998_TEST_ONLY":case 99998:b.edition=99998;break;case"EDITION_99999_TEST_ONLY":case 99999:b.edition=99999;break;case"EDITION_MAX":case 2147483647:b.edition=2147483647}if(r.features!=null){if(typeof r.features!="object")throw TypeError(".google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault.features: object expected");b.features=a.google.protobuf.FeatureSet.fromObject(r.features)}return b},vr.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.features=null,S.edition=b.enums===String?"EDITION_UNKNOWN":0),r.features!=null&&r.hasOwnProperty("features")&&(S.features=a.google.protobuf.FeatureSet.toObject(r.features,b)),r.edition!=null&&r.hasOwnProperty("edition")&&(S.edition=b.enums!==String||a.google.protobuf.Edition[r.edition]===void 0?r.edition:a.google.protobuf.Edition[r.edition]),S},vr.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},vr.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault"},vr),ar),p.SourceCodeInfo=(Jr.prototype.location=l.emptyArray,Jr.fromObject=function(r){if(r instanceof a.google.protobuf.SourceCodeInfo)return r;var b=new a.google.protobuf.SourceCodeInfo;if(r.location){if(!Array.isArray(r.location))throw TypeError(".google.protobuf.SourceCodeInfo.location: array expected");b.location=[];for(var S=0;S<r.location.length;++S){if(typeof r.location[S]!="object")throw TypeError(".google.protobuf.SourceCodeInfo.location: object expected");b.location[S]=a.google.protobuf.SourceCodeInfo.Location.fromObject(r.location[S])}}return b},Jr.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.location=[]),r.location&&r.location.length){S.location=[];for(var le=0;le<r.location.length;++le)S.location[le]=a.google.protobuf.SourceCodeInfo.Location.toObject(r.location[le],b)}return S},Jr.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Jr.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.SourceCodeInfo"},Jr.Location=(_r.prototype.path=l.emptyArray,_r.prototype.span=l.emptyArray,_r.prototype.leadingComments="",_r.prototype.trailingComments="",_r.prototype.leadingDetachedComments=l.emptyArray,_r.fromObject=function(r){if(r instanceof a.google.protobuf.SourceCodeInfo.Location)return r;var b=new a.google.protobuf.SourceCodeInfo.Location;if(r.path){if(!Array.isArray(r.path))throw TypeError(".google.protobuf.SourceCodeInfo.Location.path: array expected");b.path=[];for(var S=0;S<r.path.length;++S)b.path[S]=0|r.path[S]}if(r.span){if(!Array.isArray(r.span))throw TypeError(".google.protobuf.SourceCodeInfo.Location.span: array expected");for(b.span=[],S=0;S<r.span.length;++S)b.span[S]=0|r.span[S]}if(r.leadingComments!=null&&(b.leadingComments=String(r.leadingComments)),r.trailingComments!=null&&(b.trailingComments=String(r.trailingComments)),r.leadingDetachedComments){if(!Array.isArray(r.leadingDetachedComments))throw TypeError(".google.protobuf.SourceCodeInfo.Location.leadingDetachedComments: array expected");for(b.leadingDetachedComments=[],S=0;S<r.leadingDetachedComments.length;++S)b.leadingDetachedComments[S]=String(r.leadingDetachedComments[S])}return b},_r.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.path=[],S.span=[],S.leadingDetachedComments=[]),b.defaults&&(S.leadingComments="",S.trailingComments=""),r.path&&r.path.length){S.path=[];for(var le=0;le<r.path.length;++le)S.path[le]=r.path[le]}if(r.span&&r.span.length)for(S.span=[],le=0;le<r.span.length;++le)S.span[le]=r.span[le];if(r.leadingComments!=null&&r.hasOwnProperty("leadingComments")&&(S.leadingComments=r.leadingComments),r.trailingComments!=null&&r.hasOwnProperty("trailingComments")&&(S.trailingComments=r.trailingComments),r.leadingDetachedComments&&r.leadingDetachedComments.length)for(S.leadingDetachedComments=[],le=0;le<r.leadingDetachedComments.length;++le)S.leadingDetachedComments[le]=r.leadingDetachedComments[le];return S},_r.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},_r.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.SourceCodeInfo.Location"},_r),Jr),p.GeneratedCodeInfo=(an.prototype.annotation=l.emptyArray,an.fromObject=function(r){if(r instanceof a.google.protobuf.GeneratedCodeInfo)return r;var b=new a.google.protobuf.GeneratedCodeInfo;if(r.annotation){if(!Array.isArray(r.annotation))throw TypeError(".google.protobuf.GeneratedCodeInfo.annotation: array expected");b.annotation=[];for(var S=0;S<r.annotation.length;++S){if(typeof r.annotation[S]!="object")throw TypeError(".google.protobuf.GeneratedCodeInfo.annotation: object expected");b.annotation[S]=a.google.protobuf.GeneratedCodeInfo.Annotation.fromObject(r.annotation[S])}}return b},an.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.annotation=[]),r.annotation&&r.annotation.length){S.annotation=[];for(var le=0;le<r.annotation.length;++le)S.annotation[le]=a.google.protobuf.GeneratedCodeInfo.Annotation.toObject(r.annotation[le],b)}return S},an.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},an.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.GeneratedCodeInfo"},an.Annotation=(jr.prototype.path=l.emptyArray,jr.prototype.sourceFile="",jr.prototype.begin=0,jr.prototype.end=0,jr.prototype.semantic=0,jr.fromObject=function(r){if(r instanceof a.google.protobuf.GeneratedCodeInfo.Annotation)return r;var b=new a.google.protobuf.GeneratedCodeInfo.Annotation;if(r.path){if(!Array.isArray(r.path))throw TypeError(".google.protobuf.GeneratedCodeInfo.Annotation.path: array expected");b.path=[];for(var S=0;S<r.path.length;++S)b.path[S]=0|r.path[S]}switch(r.sourceFile!=null&&(b.sourceFile=String(r.sourceFile)),r.begin!=null&&(b.begin=0|r.begin),r.end!=null&&(b.end=0|r.end),r.semantic){default:typeof r.semantic=="number"&&(b.semantic=r.semantic);break;case"NONE":case 0:b.semantic=0;break;case"SET":case 1:b.semantic=1;break;case"ALIAS":case 2:b.semantic=2}return b},jr.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.path=[]),b.defaults&&(S.sourceFile="",S.begin=0,S.end=0,S.semantic=b.enums===String?"NONE":0),r.path&&r.path.length){S.path=[];for(var le=0;le<r.path.length;++le)S.path[le]=r.path[le]}return r.sourceFile!=null&&r.hasOwnProperty("sourceFile")&&(S.sourceFile=r.sourceFile),r.begin!=null&&r.hasOwnProperty("begin")&&(S.begin=r.begin),r.end!=null&&r.hasOwnProperty("end")&&(S.end=r.end),r.semantic!=null&&r.hasOwnProperty("semantic")&&(S.semantic=b.enums!==String||a.google.protobuf.GeneratedCodeInfo.Annotation.Semantic[r.semantic]===void 0?r.semantic:a.google.protobuf.GeneratedCodeInfo.Annotation.Semantic[r.semantic]),S},jr.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},jr.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.GeneratedCodeInfo.Annotation"},jr.Semantic=(g={},(m=Object.create(g))[g[0]="NONE"]="NONE",m[g[1]="SET"]="SET",m[g[2]="ALIAS"]="ALIAS",m),jr),an),p.Struct=(fn.prototype.fields=l.emptyObject,fn.fromObject=function(r){if(r instanceof a.google.protobuf.Struct)return r;var b=new a.google.protobuf.Struct;if(r.fields){if(typeof r.fields!="object")throw TypeError(".google.protobuf.Struct.fields: object expected");b.fields={};for(var S=Object.keys(r.fields),le=0;le<S.length;++le){if(typeof r.fields[S[le]]!="object")throw TypeError(".google.protobuf.Struct.fields: object expected");b.fields[S[le]]=a.google.protobuf.Value.fromObject(r.fields[S[le]])}}return b},fn.toObject=function(r,b){var S,le={};if(((b=b||{}).objects||b.defaults)&&(le.fields={}),r.fields&&(S=Object.keys(r.fields)).length){le.fields={};for(var et=0;et<S.length;++et)le.fields[S[et]]=a.google.protobuf.Value.toObject(r.fields[S[et]],b)}return le},fn.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},fn.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.Struct"},fn),p.Value=(xr.prototype.nullValue=null,xr.prototype.numberValue=null,xr.prototype.stringValue=null,xr.prototype.boolValue=null,xr.prototype.structValue=null,xr.prototype.listValue=null,Object.defineProperty(xr.prototype,"kind",{get:l.oneOfGetter(g=["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]),set:l.oneOfSetter(g)}),xr.fromObject=function(r){if(r instanceof a.google.protobuf.Value)return r;var b=new a.google.protobuf.Value;switch(r.nullValue){default:typeof r.nullValue=="number"&&(b.nullValue=r.nullValue);break;case"NULL_VALUE":case 0:b.nullValue=0}if(r.numberValue!=null&&(b.numberValue=Number(r.numberValue)),r.stringValue!=null&&(b.stringValue=String(r.stringValue)),r.boolValue!=null&&(b.boolValue=!!r.boolValue),r.structValue!=null){if(typeof r.structValue!="object")throw TypeError(".google.protobuf.Value.structValue: object expected");b.structValue=a.google.protobuf.Struct.fromObject(r.structValue)}if(r.listValue!=null){if(typeof r.listValue!="object")throw TypeError(".google.protobuf.Value.listValue: object expected");b.listValue=a.google.protobuf.ListValue.fromObject(r.listValue)}return b},xr.toObject=function(r,b){b=b||{};var S={};return r.nullValue!=null&&r.hasOwnProperty("nullValue")&&(S.nullValue=b.enums!==String||a.google.protobuf.NullValue[r.nullValue]===void 0?r.nullValue:a.google.protobuf.NullValue[r.nullValue],b.oneofs)&&(S.kind="nullValue"),r.numberValue!=null&&r.hasOwnProperty("numberValue")&&(S.numberValue=b.json&&!isFinite(r.numberValue)?String(r.numberValue):r.numberValue,b.oneofs)&&(S.kind="numberValue"),r.stringValue!=null&&r.hasOwnProperty("stringValue")&&(S.stringValue=r.stringValue,b.oneofs)&&(S.kind="stringValue"),r.boolValue!=null&&r.hasOwnProperty("boolValue")&&(S.boolValue=r.boolValue,b.oneofs)&&(S.kind="boolValue"),r.structValue!=null&&r.hasOwnProperty("structValue")&&(S.structValue=a.google.protobuf.Struct.toObject(r.structValue,b),b.oneofs)&&(S.kind="structValue"),r.listValue!=null&&r.hasOwnProperty("listValue")&&(S.listValue=a.google.protobuf.ListValue.toObject(r.listValue,b),b.oneofs)&&(S.kind="listValue"),S},xr.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},xr.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.Value"},xr),p.NullValue=(m={},(g=Object.create(m))[m[0]="NULL_VALUE"]="NULL_VALUE",g),p.ListValue=(hn.prototype.values=l.emptyArray,hn.fromObject=function(r){if(r instanceof a.google.protobuf.ListValue)return r;var b=new a.google.protobuf.ListValue;if(r.values){if(!Array.isArray(r.values))throw TypeError(".google.protobuf.ListValue.values: array expected");b.values=[];for(var S=0;S<r.values.length;++S){if(typeof r.values[S]!="object")throw TypeError(".google.protobuf.ListValue.values: object expected");b.values[S]=a.google.protobuf.Value.fromObject(r.values[S])}}return b},hn.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.values=[]),r.values&&r.values.length){S.values=[];for(var le=0;le<r.values.length;++le)S.values[le]=a.google.protobuf.Value.toObject(r.values[le],b)}return S},hn.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},hn.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.ListValue"},hn),p.Timestamp=(Dr.prototype.seconds=l.Long?l.Long.fromBits(0,0,!1):0,Dr.prototype.nanos=0,Dr.fromObject=function(r){var b;return r instanceof a.google.protobuf.Timestamp?r:(b=new a.google.protobuf.Timestamp,r.seconds!=null&&(l.Long?(b.seconds=l.Long.fromValue(r.seconds)).unsigned=!1:typeof r.seconds=="string"?b.seconds=parseInt(r.seconds,10):typeof r.seconds=="number"?b.seconds=r.seconds:typeof r.seconds=="object"&&(b.seconds=new l.LongBits(r.seconds.low>>>0,r.seconds.high>>>0).toNumber())),r.nanos!=null&&(b.nanos=0|r.nanos),b)},Dr.toObject=function(r,b){var S,le={};return(b=b||{}).defaults&&(l.Long?(S=new l.Long(0,0,!1),le.seconds=b.longs===String?S.toString():b.longs===Number?S.toNumber():S):le.seconds=b.longs===String?"0":0,le.nanos=0),r.seconds!=null&&r.hasOwnProperty("seconds")&&(typeof r.seconds=="number"?le.seconds=b.longs===String?String(r.seconds):r.seconds:le.seconds=b.longs===String?l.Long.prototype.toString.call(r.seconds):b.longs===Number?new l.LongBits(r.seconds.low>>>0,r.seconds.high>>>0).toNumber():r.seconds),r.nanos!=null&&r.hasOwnProperty("nanos")&&(le.nanos=r.nanos),le},Dr.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Dr.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.Timestamp"},Dr),p.Duration=(zr.prototype.seconds=l.Long?l.Long.fromBits(0,0,!1):0,zr.prototype.nanos=0,zr.fromObject=function(r){var b;return r instanceof a.google.protobuf.Duration?r:(b=new a.google.protobuf.Duration,r.seconds!=null&&(l.Long?(b.seconds=l.Long.fromValue(r.seconds)).unsigned=!1:typeof r.seconds=="string"?b.seconds=parseInt(r.seconds,10):typeof r.seconds=="number"?b.seconds=r.seconds:typeof r.seconds=="object"&&(b.seconds=new l.LongBits(r.seconds.low>>>0,r.seconds.high>>>0).toNumber())),r.nanos!=null&&(b.nanos=0|r.nanos),b)},zr.toObject=function(r,b){var S,le={};return(b=b||{}).defaults&&(l.Long?(S=new l.Long(0,0,!1),le.seconds=b.longs===String?S.toString():b.longs===Number?S.toNumber():S):le.seconds=b.longs===String?"0":0,le.nanos=0),r.seconds!=null&&r.hasOwnProperty("seconds")&&(typeof r.seconds=="number"?le.seconds=b.longs===String?String(r.seconds):r.seconds:le.seconds=b.longs===String?l.Long.prototype.toString.call(r.seconds):b.longs===Number?new l.LongBits(r.seconds.low>>>0,r.seconds.high>>>0).toNumber():r.seconds),r.nanos!=null&&r.hasOwnProperty("nanos")&&(le.nanos=r.nanos),le},zr.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},zr.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.Duration"},zr),p.DoubleValue=(br.prototype.value=0,br.fromObject=function(r){var b;return r instanceof a.google.protobuf.DoubleValue?r:(b=new a.google.protobuf.DoubleValue,r.value!=null&&(b.value=Number(r.value)),b)},br.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.value=0),r.value!=null&&r.hasOwnProperty("value")&&(S.value=b.json&&!isFinite(r.value)?String(r.value):r.value),S},br.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},br.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.DoubleValue"},br),p.FloatValue=(sn.prototype.value=0,sn.fromObject=function(r){var b;return r instanceof a.google.protobuf.FloatValue?r:(b=new a.google.protobuf.FloatValue,r.value!=null&&(b.value=Number(r.value)),b)},sn.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.value=0),r.value!=null&&r.hasOwnProperty("value")&&(S.value=b.json&&!isFinite(r.value)?String(r.value):r.value),S},sn.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},sn.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.FloatValue"},sn),p.Int64Value=(Yr.prototype.value=l.Long?l.Long.fromBits(0,0,!1):0,Yr.fromObject=function(r){var b;return r instanceof a.google.protobuf.Int64Value?r:(b=new a.google.protobuf.Int64Value,r.value!=null&&(l.Long?(b.value=l.Long.fromValue(r.value)).unsigned=!1:typeof r.value=="string"?b.value=parseInt(r.value,10):typeof r.value=="number"?b.value=r.value:typeof r.value=="object"&&(b.value=new l.LongBits(r.value.low>>>0,r.value.high>>>0).toNumber())),b)},Yr.toObject=function(r,b){var S,le={};return(b=b||{}).defaults&&(l.Long?(S=new l.Long(0,0,!1),le.value=b.longs===String?S.toString():b.longs===Number?S.toNumber():S):le.value=b.longs===String?"0":0),r.value!=null&&r.hasOwnProperty("value")&&(typeof r.value=="number"?le.value=b.longs===String?String(r.value):r.value:le.value=b.longs===String?l.Long.prototype.toString.call(r.value):b.longs===Number?new l.LongBits(r.value.low>>>0,r.value.high>>>0).toNumber():r.value),le},Yr.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Yr.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.Int64Value"},Yr),p.UInt64Value=(gn.prototype.value=l.Long?l.Long.fromBits(0,0,!0):0,gn.fromObject=function(r){var b;return r instanceof a.google.protobuf.UInt64Value?r:(b=new a.google.protobuf.UInt64Value,r.value!=null&&(l.Long?(b.value=l.Long.fromValue(r.value)).unsigned=!0:typeof r.value=="string"?b.value=parseInt(r.value,10):typeof r.value=="number"?b.value=r.value:typeof r.value=="object"&&(b.value=new l.LongBits(r.value.low>>>0,r.value.high>>>0).toNumber(!0))),b)},gn.toObject=function(r,b){var S,le={};return(b=b||{}).defaults&&(l.Long?(S=new l.Long(0,0,!0),le.value=b.longs===String?S.toString():b.longs===Number?S.toNumber():S):le.value=b.longs===String?"0":0),r.value!=null&&r.hasOwnProperty("value")&&(typeof r.value=="number"?le.value=b.longs===String?String(r.value):r.value:le.value=b.longs===String?l.Long.prototype.toString.call(r.value):b.longs===Number?new l.LongBits(r.value.low>>>0,r.value.high>>>0).toNumber(!0):r.value),le},gn.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},gn.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.UInt64Value"},gn),p.Int32Value=(Lr.prototype.value=0,Lr.fromObject=function(r){var b;return r instanceof a.google.protobuf.Int32Value?r:(b=new a.google.protobuf.Int32Value,r.value!=null&&(b.value=0|r.value),b)},Lr.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.value=0),r.value!=null&&r.hasOwnProperty("value")&&(S.value=r.value),S},Lr.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Lr.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.Int32Value"},Lr),p.UInt32Value=(Ur.prototype.value=0,Ur.fromObject=function(r){var b;return r instanceof a.google.protobuf.UInt32Value?r:(b=new a.google.protobuf.UInt32Value,r.value!=null&&(b.value=r.value>>>0),b)},Ur.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.value=0),r.value!=null&&r.hasOwnProperty("value")&&(S.value=r.value),S},Ur.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Ur.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.UInt32Value"},Ur),p.BoolValue=(mn.prototype.value=!1,mn.fromObject=function(r){var b;return r instanceof a.google.protobuf.BoolValue?r:(b=new a.google.protobuf.BoolValue,r.value!=null&&(b.value=!!r.value),b)},mn.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.value=!1),r.value!=null&&r.hasOwnProperty("value")&&(S.value=r.value),S},mn.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},mn.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.BoolValue"},mn),p.StringValue=(Qr.prototype.value="",Qr.fromObject=function(r){var b;return r instanceof a.google.protobuf.StringValue?r:(b=new a.google.protobuf.StringValue,r.value!=null&&(b.value=String(r.value)),b)},Qr.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.value=""),r.value!=null&&r.hasOwnProperty("value")&&(S.value=r.value),S},Qr.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Qr.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.StringValue"},Qr),p.BytesValue=(Xr.prototype.value=l.newBuffer([]),Xr.fromObject=function(r){var b;return r instanceof a.google.protobuf.BytesValue?r:(b=new a.google.protobuf.BytesValue,r.value!=null&&(typeof r.value=="string"?l.base64.decode(r.value,b.value=l.newBuffer(l.base64.length(r.value)),0):0<=r.value.length&&(b.value=r.value)),b)},Xr.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(b.bytes===String?S.value="":(S.value=[],b.bytes!==Array&&(S.value=l.newBuffer(S.value)))),r.value!=null&&r.hasOwnProperty("value")&&(S.value=b.bytes===String?l.base64.encode(r.value,0,r.value.length):b.bytes===Array?Array.prototype.slice.call(r.value):r.value),S},Xr.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Xr.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.BytesValue"},Xr),p.Empty=(yn.fromObject=function(r){return r instanceof a.google.protobuf.Empty?r:new a.google.protobuf.Empty},yn.toObject=function(){return{}},yn.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},yn.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.Empty"},yn),p.Any=(qr.prototype.type_url="",qr.prototype.value=l.newBuffer([]),qr.fromObject=function(r){var b;return r instanceof a.google.protobuf.Any?r:(b=new a.google.protobuf.Any,r.type_url!=null&&(b.type_url=String(r.type_url)),r.value!=null&&(typeof r.value=="string"?l.base64.decode(r.value,b.value=l.newBuffer(l.base64.length(r.value)),0):0<=r.value.length&&(b.value=r.value)),b)},qr.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.type_url="",b.bytes===String?S.value="":(S.value=[],b.bytes!==Array&&(S.value=l.newBuffer(S.value)))),r.type_url!=null&&r.hasOwnProperty("type_url")&&(S.type_url=r.type_url),r.value!=null&&r.hasOwnProperty("value")&&(S.value=b.bytes===String?l.base64.encode(r.value,0,r.value.length):b.bytes===Array?Array.prototype.slice.call(r.value):r.value),S},qr.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},qr.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.Any"},qr),p.FieldMask=(Br.prototype.paths=l.emptyArray,Br.fromObject=function(r){if(r instanceof a.google.protobuf.FieldMask)return r;var b=new a.google.protobuf.FieldMask;if(r.paths){if(!Array.isArray(r.paths))throw TypeError(".google.protobuf.FieldMask.paths: array expected");b.paths=[];for(var S=0;S<r.paths.length;++S)b.paths[S]=String(r.paths[S])}return b},Br.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.paths=[]),r.paths&&r.paths.length){S.paths=[];for(var le=0;le<r.paths.length;++le)S.paths[le]=r.paths[le]}return S},Br.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Br.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.protobuf.FieldMask"},Br),p),d.type=((s={}).LatLng=(Hr.prototype.latitude=0,Hr.prototype.longitude=0,Hr.fromObject=function(r){var b;return r instanceof a.google.type.LatLng?r:(b=new a.google.type.LatLng,r.latitude!=null&&(b.latitude=Number(r.latitude)),r.longitude!=null&&(b.longitude=Number(r.longitude)),b)},Hr.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.latitude=0,S.longitude=0),r.latitude!=null&&r.hasOwnProperty("latitude")&&(S.latitude=b.json&&!isFinite(r.latitude)?String(r.latitude):r.latitude),r.longitude!=null&&r.hasOwnProperty("longitude")&&(S.longitude=b.json&&!isFinite(r.longitude)?String(r.longitude):r.longitude),S},Hr.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Hr.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.type.LatLng"},Hr),s.DayOfWeek=(m={},(g=Object.create(m))[m[0]="DAY_OF_WEEK_UNSPECIFIED"]="DAY_OF_WEEK_UNSPECIFIED",g[m[1]="MONDAY"]="MONDAY",g[m[2]="TUESDAY"]="TUESDAY",g[m[3]="WEDNESDAY"]="WEDNESDAY",g[m[4]="THURSDAY"]="THURSDAY",g[m[5]="FRIDAY"]="FRIDAY",g[m[6]="SATURDAY"]="SATURDAY",g[m[7]="SUNDAY"]="SUNDAY",g),s),d.rpc=((p={}).Status=(Fr.prototype.code=0,Fr.prototype.message="",Fr.prototype.details=l.emptyArray,Fr.fromObject=function(r){if(r instanceof a.google.rpc.Status)return r;var b=new a.google.rpc.Status;if(r.code!=null&&(b.code=0|r.code),r.message!=null&&(b.message=String(r.message)),r.details){if(!Array.isArray(r.details))throw TypeError(".google.rpc.Status.details: array expected");b.details=[];for(var S=0;S<r.details.length;++S){if(typeof r.details[S]!="object")throw TypeError(".google.rpc.Status.details: object expected");b.details[S]=a.google.protobuf.Any.fromObject(r.details[S])}}return b},Fr.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.details=[]),b.defaults&&(S.code=0,S.message=""),r.code!=null&&r.hasOwnProperty("code")&&(S.code=r.code),r.message!=null&&r.hasOwnProperty("message")&&(S.message=r.message),r.details&&r.details.length){S.details=[];for(var le=0;le<r.details.length;++le)S.details[le]=a.google.protobuf.Any.toObject(r.details[le],b)}return S},Fr.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Fr.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.rpc.Status"},Fr),p),d.longrunning=((m={}).Operations=((Zr.prototype=Object.create(t.rpc.Service.prototype)).constructor=Zr,Object.defineProperty(Zr.prototype.listOperations=function r(b,S){return this.rpcCall(r,a.google.longrunning.ListOperationsRequest,a.google.longrunning.ListOperationsResponse,b,S)},"name",{value:"ListOperations"}),Object.defineProperty(Zr.prototype.getOperation=function r(b,S){return this.rpcCall(r,a.google.longrunning.GetOperationRequest,a.google.longrunning.Operation,b,S)},"name",{value:"GetOperation"}),Object.defineProperty(Zr.prototype.deleteOperation=function r(b,S){return this.rpcCall(r,a.google.longrunning.DeleteOperationRequest,a.google.protobuf.Empty,b,S)},"name",{value:"DeleteOperation"}),Object.defineProperty(Zr.prototype.cancelOperation=function r(b,S){return this.rpcCall(r,a.google.longrunning.CancelOperationRequest,a.google.protobuf.Empty,b,S)},"name",{value:"CancelOperation"}),Object.defineProperty(Zr.prototype.waitOperation=function r(b,S){return this.rpcCall(r,a.google.longrunning.WaitOperationRequest,a.google.longrunning.Operation,b,S)},"name",{value:"WaitOperation"}),Zr),m.Operation=(Ae.prototype.name="",Ae.prototype.metadata=null,Ae.prototype.done=!1,Ae.prototype.error=null,Ae.prototype.response=null,Object.defineProperty(Ae.prototype,"result",{get:l.oneOfGetter(g=["error","response"]),set:l.oneOfSetter(g)}),Ae.fromObject=function(r){if(r instanceof a.google.longrunning.Operation)return r;var b=new a.google.longrunning.Operation;if(r.name!=null&&(b.name=String(r.name)),r.metadata!=null){if(typeof r.metadata!="object")throw TypeError(".google.longrunning.Operation.metadata: object expected");b.metadata=a.google.protobuf.Any.fromObject(r.metadata)}if(r.done!=null&&(b.done=!!r.done),r.error!=null){if(typeof r.error!="object")throw TypeError(".google.longrunning.Operation.error: object expected");b.error=a.google.rpc.Status.fromObject(r.error)}if(r.response!=null){if(typeof r.response!="object")throw TypeError(".google.longrunning.Operation.response: object expected");b.response=a.google.protobuf.Any.fromObject(r.response)}return b},Ae.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.name="",S.metadata=null,S.done=!1),r.name!=null&&r.hasOwnProperty("name")&&(S.name=r.name),r.metadata!=null&&r.hasOwnProperty("metadata")&&(S.metadata=a.google.protobuf.Any.toObject(r.metadata,b)),r.done!=null&&r.hasOwnProperty("done")&&(S.done=r.done),r.error!=null&&r.hasOwnProperty("error")&&(S.error=a.google.rpc.Status.toObject(r.error,b),b.oneofs)&&(S.result="error"),r.response!=null&&r.hasOwnProperty("response")&&(S.response=a.google.protobuf.Any.toObject(r.response,b),b.oneofs)&&(S.result="response"),S},Ae.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Ae.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.longrunning.Operation"},Ae),m.GetOperationRequest=(Fe.prototype.name="",Fe.fromObject=function(r){var b;return r instanceof a.google.longrunning.GetOperationRequest?r:(b=new a.google.longrunning.GetOperationRequest,r.name!=null&&(b.name=String(r.name)),b)},Fe.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.name=""),r.name!=null&&r.hasOwnProperty("name")&&(S.name=r.name),S},Fe.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Fe.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.longrunning.GetOperationRequest"},Fe),m.ListOperationsRequest=(We.prototype.name="",We.prototype.filter="",We.prototype.pageSize=0,We.prototype.pageToken="",We.fromObject=function(r){var b;return r instanceof a.google.longrunning.ListOperationsRequest?r:(b=new a.google.longrunning.ListOperationsRequest,r.name!=null&&(b.name=String(r.name)),r.filter!=null&&(b.filter=String(r.filter)),r.pageSize!=null&&(b.pageSize=0|r.pageSize),r.pageToken!=null&&(b.pageToken=String(r.pageToken)),b)},We.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.filter="",S.pageSize=0,S.pageToken="",S.name=""),r.filter!=null&&r.hasOwnProperty("filter")&&(S.filter=r.filter),r.pageSize!=null&&r.hasOwnProperty("pageSize")&&(S.pageSize=r.pageSize),r.pageToken!=null&&r.hasOwnProperty("pageToken")&&(S.pageToken=r.pageToken),r.name!=null&&r.hasOwnProperty("name")&&(S.name=r.name),S},We.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},We.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.longrunning.ListOperationsRequest"},We),m.ListOperationsResponse=(at.prototype.operations=l.emptyArray,at.prototype.nextPageToken="",at.fromObject=function(r){if(r instanceof a.google.longrunning.ListOperationsResponse)return r;var b=new a.google.longrunning.ListOperationsResponse;if(r.operations){if(!Array.isArray(r.operations))throw TypeError(".google.longrunning.ListOperationsResponse.operations: array expected");b.operations=[];for(var S=0;S<r.operations.length;++S){if(typeof r.operations[S]!="object")throw TypeError(".google.longrunning.ListOperationsResponse.operations: object expected");b.operations[S]=a.google.longrunning.Operation.fromObject(r.operations[S])}}return r.nextPageToken!=null&&(b.nextPageToken=String(r.nextPageToken)),b},at.toObject=function(r,b){var S={};if(((b=b||{}).arrays||b.defaults)&&(S.operations=[]),b.defaults&&(S.nextPageToken=""),r.operations&&r.operations.length){S.operations=[];for(var le=0;le<r.operations.length;++le)S.operations[le]=a.google.longrunning.Operation.toObject(r.operations[le],b)}return r.nextPageToken!=null&&r.hasOwnProperty("nextPageToken")&&(S.nextPageToken=r.nextPageToken),S},at.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},at.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.longrunning.ListOperationsResponse"},at),m.CancelOperationRequest=(ir.prototype.name="",ir.fromObject=function(r){var b;return r instanceof a.google.longrunning.CancelOperationRequest?r:(b=new a.google.longrunning.CancelOperationRequest,r.name!=null&&(b.name=String(r.name)),b)},ir.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.name=""),r.name!=null&&r.hasOwnProperty("name")&&(S.name=r.name),S},ir.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},ir.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.longrunning.CancelOperationRequest"},ir),m.DeleteOperationRequest=(cr.prototype.name="",cr.fromObject=function(r){var b;return r instanceof a.google.longrunning.DeleteOperationRequest?r:(b=new a.google.longrunning.DeleteOperationRequest,r.name!=null&&(b.name=String(r.name)),b)},cr.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.name=""),r.name!=null&&r.hasOwnProperty("name")&&(S.name=r.name),S},cr.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},cr.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.longrunning.DeleteOperationRequest"},cr),m.WaitOperationRequest=(Er.prototype.name="",Er.prototype.timeout=null,Er.fromObject=function(r){if(r instanceof a.google.longrunning.WaitOperationRequest)return r;var b=new a.google.longrunning.WaitOperationRequest;if(r.name!=null&&(b.name=String(r.name)),r.timeout!=null){if(typeof r.timeout!="object")throw TypeError(".google.longrunning.WaitOperationRequest.timeout: object expected");b.timeout=a.google.protobuf.Duration.fromObject(r.timeout)}return b},Er.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.name="",S.timeout=null),r.name!=null&&r.hasOwnProperty("name")&&(S.name=r.name),r.timeout!=null&&r.hasOwnProperty("timeout")&&(S.timeout=a.google.protobuf.Duration.toObject(r.timeout,b)),S},Er.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},Er.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.longrunning.WaitOperationRequest"},Er),m.OperationInfo=(pr.prototype.responseType="",pr.prototype.metadataType="",pr.fromObject=function(r){var b;return r instanceof a.google.longrunning.OperationInfo?r:(b=new a.google.longrunning.OperationInfo,r.responseType!=null&&(b.responseType=String(r.responseType)),r.metadataType!=null&&(b.metadataType=String(r.metadataType)),b)},pr.toObject=function(r,b){var S={};return(b=b||{}).defaults&&(S.responseType="",S.metadataType=""),r.responseType!=null&&r.hasOwnProperty("responseType")&&(S.responseType=r.responseType),r.metadataType!=null&&r.hasOwnProperty("metadataType")&&(S.metadataType=r.metadataType),S},pr.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},pr.getTypeUrl=function(r){return(r=r===void 0?"type.googleapis.com":r)+"/google.longrunning.OperationInfo"},pr),m),d),a})})(firestore_v1_proto_api)),firestore_v1_proto_api.exports}var hasRequiredBundle;function requireBundle(){if(hasRequiredBundle)return bundle;hasRequiredBundle=1,Object.defineProperty(bundle,"__esModule",{value:!0}),bundle.BundleBuilder=void 0;const e=requireDocument(),t=requireQuerySnapshot(),s=requireTimestamp(),p=requireValidate(),g=1;class m{constructor(o){this.bundleId=o,this.documents=new Map,this.namedQueries=new Map,this.latestReadTime=new s.Timestamp(0,0)}add(o,h){return(0,p.validateMinNumberOfArguments)("BundleBuilder.add",arguments,1),(0,p.validateMaxNumberOfArguments)("BundleBuilder.add",arguments,2),arguments.length===1?(d("documentOrName",o),this.addBundledDocument(o)):((0,p.validateString)("documentOrName",o),l("querySnapshot",h),this.addNamedQuery(o,h)),this}addBundledDocument(o,h){const v=this.documents.get(o.ref.path),_=v?.metadata.queries;if(!v||s.Timestamp.fromProto(v.metadata.readTime)<o.readTime){const w=o.toDocumentProto();this.documents.set(o.ref.path,{document:o.exists?w:void 0,metadata:{name:w.name,readTime:o.readTime.toProto().timestampValue,exists:o.exists}})}const y=this.documents.get(o.ref.path);y.metadata.queries=_||[],h&&y.metadata.queries.push(h),o.readTime>this.latestReadTime&&(this.latestReadTime=o.readTime)}addNamedQuery(o,h){if(this.namedQueries.has(o))throw new Error(`Query name conflict: ${o} has already been added.`);this.namedQueries.set(o,{name:o,bundledQuery:h.query._toBundledQuery(),readTime:h.readTime.toProto().timestampValue});for(const v of h.docs)this.addBundledDocument(v,o);h.readTime>this.latestReadTime&&(this.latestReadTime=h.readTime)}elementToLengthPrefixedBuffer(o){const h=requireFirestore_v1_proto_api().firestore.BundleElement.fromObject(o).toJSON(),v=Buffer.from(JSON.stringify(h),"utf-8"),_=Buffer.from(v.length.toString());return Buffer.concat([_,v])}build(){let o=Buffer.alloc(0);for(const v of this.namedQueries.values())o=Buffer.concat([o,this.elementToLengthPrefixedBuffer({namedQuery:v})]);for(const v of this.documents.values()){const _=v.metadata;o=Buffer.concat([o,this.elementToLengthPrefixedBuffer({documentMetadata:_})]);const y=v.document;y&&(o=Buffer.concat([o,this.elementToLengthPrefixedBuffer({document:y})]))}const h={id:this.bundleId,createTime:this.latestReadTime.toProto().timestampValue,version:g,totalDocuments:this.documents.size,totalBytes:o.length};return o=Buffer.concat([this.elementToLengthPrefixedBuffer({metadata:h}),o]),o}}bundle.BundleBuilder=m;function d(a,o){if(!(o instanceof e.DocumentSnapshot))throw new Error((0,p.invalidArgumentMessage)(a,"DocumentSnapshot"))}function l(a,o){if(!(o instanceof t.QuerySnapshot))throw new Error((0,p.invalidArgumentMessage)(a,"QuerySnapshot"))}return bundle}var documentReader={},hasRequiredDocumentReader;function requireDocumentReader(){if(hasRequiredDocumentReader)return documentReader;hasRequiredDocumentReader=1;Object.defineProperty(documentReader,"__esModule",{value:!0}),documentReader.DocumentReader=void 0;const e=requireDocument(),t=requireUtil(),s=requireLogger(),p=requireTimestamp();class g{constructor(d,l,a,o){this.firestore=d,this.allDocuments=l,this.fieldMask=a,this.transactionOrReadTime=o,this.outstandingDocuments=new Set,this.retrievedDocuments=new Map;for(const h of this.allDocuments)this.outstandingDocuments.add(h.formattedName)}async get(d){const{result:l}=await this._get(d);return l}async _get(d){await this.fetchDocuments(d);const l=[];for(const a of this.allDocuments){const o=this.retrievedDocuments.get(a.formattedName);if(o!==void 0){const h=new e.DocumentSnapshotBuilder(a);h.fieldsProto=o._fieldsProto,h.readTime=o.readTime,h.createTime=o.createTime,h.updateTime=o.updateTime,l.push(h.build())}else throw new Error(`Did not receive document for "${a.path}".`)}return{result:l,transaction:this.retrievedTransactionId}}async fetchDocuments(d){var l;if(!this.outstandingDocuments.size)return;const a={database:this.firestore.formattedName,documents:Array.from(this.outstandingDocuments)};if(this.transactionOrReadTime instanceof Uint8Array?a.transaction=this.transactionOrReadTime:this.transactionOrReadTime instanceof p.Timestamp?a.readTime=this.transactionOrReadTime.toProto().timestampValue:this.transactionOrReadTime&&(a.newTransaction=this.transactionOrReadTime),this.fieldMask){const h=this.fieldMask.map(v=>v.formattedName);a.mask={fieldPaths:h}}let o=0;try{const h=await this.firestore.requestStream("batchGetDocuments",!1,a,d);h.resume();for await(const v of h){!((l=v.transaction)===null||l===void 0)&&l.length&&(this.retrievedTransactionId=v.transaction);let _;if(v.found?((0,s.logger)("DocumentReader.fetchDocuments",d,"Received document: %s",v.found.name),_=this.firestore.snapshot_(v.found,v.readTime)):v.missing&&((0,s.logger)("DocumentReader.fetchDocuments",d,"Document missing: %s",v.missing),_=this.firestore.snapshot_(v.missing,v.readTime)),_){const y=_.ref.formattedName;this.outstandingDocuments.delete(y),this.retrievedDocuments.set(y,_),++o}}}catch(h){const v=!a.transaction&&!a.newTransaction&&o>0&&h.code!==void 0&&!(0,t.isPermanentRpcError)(h,"batchGetDocuments");if((0,s.logger)("DocumentReader.fetchDocuments",d,"BatchGetDocuments failed with error: %s. Retrying: %s",h,v),v)return this.fetchDocuments(d);throw h}finally{(0,s.logger)("DocumentReader.fetchDocuments",d,"Received %d results",o)}}}return documentReader.DocumentReader=g,documentReader}var pool={},hasRequiredPool;function requirePool(){return hasRequiredPool||(hasRequiredPool=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ClientPool=e.CLIENT_TERMINATED_ERROR_MSG=void 0;const t=require$$1$3,s=requireLogger(),p=requireUtil();e.CLIENT_TERMINATED_ERROR_MSG="The client has already been terminated";class g{constructor(d,l,a,o=()=>Promise.resolve()){this.concurrentOperationLimit=d,this.maxIdleClients=l,this.clientFactory=a,this.clientDestructor=o,this.grpcEnabled=!1,this.activeClients=new Map,this.failedClients=new Set,this.terminated=!1,this.terminateDeferred=new p.Deferred}acquire(d,l){let a=null,o=-1;this.grpcEnabled=this.grpcEnabled||l,l=l||this.grpcEnabled;for(const[h,v]of this.activeClients)!this.failedClients.has(h)&&v.activeRequestCount>o&&v.activeRequestCount<this.concurrentOperationLimit&&(v.grpcEnabled||!l)&&(a=h,o=v.activeRequestCount);return a?(0,s.logger)("ClientPool.acquire",d,"Re-using existing client with %s remaining operations",this.concurrentOperationLimit-o):((0,s.logger)("ClientPool.acquire",d,"Creating a new client (requiresGrpc: %s)",l),a=this.clientFactory(l),o=0,t(!this.activeClients.has(a),"The provided client factory returned an existing instance")),this.activeClients.set(a,{grpcEnabled:l,activeRequestCount:o+1}),a}async release(d,l){const a=this.activeClients.get(l);t(a&&a.activeRequestCount>0,"No active requests"),this.activeClients.set(l,{grpcEnabled:a.grpcEnabled,activeRequestCount:a.activeRequestCount-1}),this.terminated&&this.opCount===0&&this.terminateDeferred.resolve(),this.shouldGarbageCollectClient(l)&&(this.activeClients.delete(l),this.failedClients.delete(l),await this.clientDestructor(l),(0,s.logger)("ClientPool.release",d,"Garbage collected 1 client"))}shouldGarbageCollectClient(d){const l=this.activeClients.get(d);if(l.activeRequestCount!==0)return!1;if(this.grpcEnabled!==l.grpcEnabled||this.failedClients.has(d))return!0;let a=0;for(const[,o]of this.activeClients)a+=this.concurrentOperationLimit-o.activeRequestCount;return a>this.maxIdleClients*this.concurrentOperationLimit}get size(){return this.activeClients.size}get opCount(){let d=0;return this.activeClients.forEach(l=>d+=l.activeRequestCount),d}get _activeClients(){return this.activeClients}run(d,l,a){if(this.terminated)return Promise.reject(new Error(e.CLIENT_TERMINATED_ERROR_MSG));const o=this.acquire(d,l);return a(o).catch(async h=>{var v;return!((v=h.message)===null||v===void 0)&&v.match(/RST_STREAM/)&&this.failedClients.add(o),await this.release(d,o),Promise.reject(h)}).then(async h=>(await this.release(d,o),h))}async terminate(){this.terminated=!0,this.opCount>0&&((0,s.logger)("ClientPool.terminate",null,"Waiting for %s pending operations to complete before terminating",this.opCount),await this.terminateDeferred.promise);for(const[d]of this.activeClients)this.activeClients.delete(d),await this.clientDestructor(d)}}e.ClientPool=g})(pool)),pool}var transaction={},hasRequiredTransaction;function requireTransaction(){if(hasRequiredTransaction)return transaction;hasRequiredTransaction=1;Object.defineProperty(transaction,"__esModule",{value:!0}),transaction.Transaction=void 0,transaction.parseGetAllArguments=T;const e=requireBackoff(),t=requireSrc(),s=requireLogger(),p=requirePath(),g=requireAggregateQuery(),m=requireDocumentReference(),d=requireQuery(),l=requireHelpers(),a=requireUtil(),o=requireValidate(),h=requireDocumentReader(),v=requireTraceUtil();const _="Firestore transactions require all reads to be executed before all writes.",y="Firestore read-only transactions cannot execute writes.";class w{constructor(x,j,D){this._maxAttempts=t.DEFAULT_MAX_TRANSACTION_ATTEMPTS,this._firestore=x,this._requestTag=j,D?.readOnly?(this._maxAttempts=1,this._readOnlyReadTime=D.readTime):(this._maxAttempts=D?.maxAttempts||t.DEFAULT_MAX_TRANSACTION_ATTEMPTS,this._writeBatch=x.batch(),this._backoff=new e.ExponentialBackoff)}get(x){if(this._writeBatch&&!this._writeBatch.isEmpty)throw new Error(_);if(x instanceof m.DocumentReference)return this._firestore._traceUtil.startActiveSpan(v.SPAN_NAME_TRANSACTION_GET_DOCUMENT,()=>this.withLazyStartedTransaction(x,this.getSingleFn));if(x instanceof d.Query||x instanceof g.AggregateQuery)return this._firestore._traceUtil.startActiveSpan(x instanceof d.Query?v.SPAN_NAME_TRANSACTION_GET_QUERY:v.SPAN_NAME_TRANSACTION_GET_AGGREGATION_QUERY,()=>this.withLazyStartedTransaction(x,this.getQueryFn));throw new Error('Value for argument "refOrQuery" must be a DocumentReference, Query, or AggregateQuery.')}getAll(...x){if(this._writeBatch&&!this._writeBatch.isEmpty)throw new Error(_);return(0,o.validateMinNumberOfArguments)("Transaction.getAll",x,1),this.withLazyStartedTransaction(T(x),this.getBatchFn)}create(x,j){if(!this._writeBatch)throw new Error(y);return this._writeBatch.create(x,j),this}set(x,j,D){if(!this._writeBatch)throw new Error(y);return D?this._writeBatch.set(x,j,D):this._writeBatch.set(x,j),this}update(x,j,...D){if(!this._writeBatch)throw new Error(y);return(0,o.validateMinNumberOfArguments)("Transaction.update",arguments,2),this._writeBatch.update(x,j,...D),this}delete(x,j){if(!this._writeBatch)throw new Error(y);return this._writeBatch.delete(x,j),this}async commit(){var x;return this._firestore._traceUtil.startActiveSpan(v.SPAN_NAME_TRANSACTION_COMMIT,async()=>{if(!this._writeBatch)throw new Error(y);let j;if(this._transactionIdPromise)j=await this._transactionIdPromise;else if(this._writeBatch.isEmpty)return;await this._writeBatch._commit({transactionId:j,requestTag:this._requestTag}),this._transactionIdPromise=void 0,this._prevTransactionId=j},{[v.ATTRIBUTE_KEY_IS_TRANSACTIONAL]:!0,[v.ATTRIBUTE_KEY_DOC_COUNT]:(x=this._writeBatch)===null||x===void 0?void 0:x._opCount})}async rollback(){return this._firestore._traceUtil.startActiveSpan(v.SPAN_NAME_TRANSACTION_ROLLBACK,async()=>{if(!this._transactionIdPromise||!this._writeBatch)return;let x;try{x=await this._transactionIdPromise}catch{this._transactionIdPromise=void 0;return}const j={database:this._firestore.formattedName,transaction:x};this._transactionIdPromise=void 0,this._prevTransactionId=x,this._firestore.request("rollback",j,this._requestTag).catch(D=>{(0,s.logger)("Firestore.runTransaction",this._requestTag,"Best effort to rollback failed with error:",D)})})}async runTransaction(x){return this._firestore._traceUtil.startActiveSpan(v.SPAN_NAME_TRANSACTION_RUN,async j=>{if(!this._writeBatch)return this.runTransactionOnce(x);let D;for(let k=0;k<this._maxAttempts;++k){j.setAttributes({[v.ATTRIBUTE_KEY_TRANSACTION_TYPE]:this._writeBatch?"READ_WRITE":"READ_ONLY",[v.ATTRIBUTE_KEY_ATTEMPTS_ALLOWED]:this._maxAttempts,[v.ATTRIBUTE_KEY_ATTEMPTS_REMAINING]:this._maxAttempts-k-1});try{return D&&((0,s.logger)("Firestore.runTransaction",this._requestTag,"Retrying transaction after error:",D),j.addEvent("Initiate transaction retry")),this._writeBatch._reset(),await E(this._backoff,D),await this.runTransactionOnce(x)}catch(q){if(D=q,!O(q))break}}return(0,s.logger)("Firestore.runTransaction",this._requestTag,"Transaction not eligible for retry, returning error: %s",D),Promise.reject(D)})}async runTransactionOnce(x){try{const j=x(this);if(!(j instanceof Promise))throw new Error("You must return a Promise in your transaction()-callback.");const D=await j;return this._writeBatch&&await this.commit(),D}catch(j){return(0,s.logger)("Firestore.runTransaction",this._requestTag,"Rolling back transaction after callback error:",j),await this.rollback(),Promise.reject(j)}}withLazyStartedTransaction(x,j){if(this._transactionIdPromise)return this._transactionIdPromise.then(D=>j.call(this,x,D)).then(D=>D.result);if(this._readOnlyReadTime)return j.call(this,x,this._readOnlyReadTime).then(D=>D.result);{const D={};this._writeBatch?D.readWrite=this._prevTransactionId?{retryTransaction:this._prevTransactionId}:{}:D.readOnly={};const k=j.call(this,x,D);return this._transactionIdPromise=k.then(q=>{if(!q.transaction)throw new Error("Transaction ID was missing from server response");return q.transaction}),k.then(q=>q.result)}}async getSingleFn(x,j){const D=new h.DocumentReader(this._firestore,[x],void 0,j),{transaction:k,result:[q]}=await D._get(this._requestTag);return{transaction:k,result:q}}async getBatchFn({documents:x,fieldMask:j},D){return this._firestore._traceUtil.startActiveSpan(v.SPAN_NAME_TRANSACTION_GET_DOCUMENTS,async()=>new h.DocumentReader(this._firestore,x,j,D)._get(this._requestTag))}async getQueryFn(x,j){return x._get(j)}}transaction.Transaction=w;function T(C){let x,j;if(Array.isArray(C[0]))throw new Error("getAll() no longer accepts an array as its first argument. Please unpack your array and call getAll() with individual arguments.");C.length>0&&(0,a.isPlainObject)(C[C.length-1])&&(j=C.pop()),x=C;for(let k=0;k<x.length;++k)(0,l.validateDocumentReference)(k,x[k]);return I("options",j,{optional:!0}),{fieldMask:j&&j.fieldMask?j.fieldMask.map(k=>p.FieldPath.fromArgument(k)):void 0,documents:x}}function I(C,x,j){if(!(0,o.validateOptional)(x,j)){if(!(0,a.isObject)(x))throw new Error(`${(0,o.invalidArgumentMessage)(C,"read option")} Input is not an object.'`);const D=x;if(D.fieldMask!==void 0){if(!Array.isArray(D.fieldMask))throw new Error(`${(0,o.invalidArgumentMessage)(C,"read option")} "fieldMask" is not an array.`);for(let k=0;k<D.fieldMask.length;++k)try{(0,p.validateFieldPath)(k,D.fieldMask[k])}catch(q){throw new Error(`${(0,o.invalidArgumentMessage)(C,"read option")} "fieldMask" is not valid: ${q.message}`)}}}}function O(C){if(C.code!==void 0)switch(C.code){case 10:case 1:case 2:case 4:case 13:case 14:case 16:case 8:return!0;case 3:return!!C.message.match(/transaction has expired/);default:return!1}return!1}async function E(C,x){x?.code===8&&C.resetToMax(),await C.backoffAndWait()}return transaction}var collectionGroup={},queryPartition={},hasRequiredQueryPartition;function requireQueryPartition(){if(hasRequiredQueryPartition)return queryPartition;hasRequiredQueryPartition=1,Object.defineProperty(queryPartition,"__esModule",{value:!0}),queryPartition.QueryPartition=void 0;const e=requireFieldOrder(),t=requireQuery(),s=requireQueryOptions(),p=requirePath(),g=requireSerializer();class m{constructor(l,a,o,h,v){this._firestore=l,this._collectionId=a,this._converter=o,this._startAt=h,this._endBefore=v,this._serializer=new g.Serializer(l)}get startAt(){return this._startAt&&!this._memoizedStartAt&&(this._memoizedStartAt=this._startAt.map(l=>this._serializer.decodeValue(l))),this._memoizedStartAt}get endBefore(){return this._endBefore&&!this._memoizedEndBefore&&(this._memoizedEndBefore=this._endBefore.map(l=>this._serializer.decodeValue(l))),this._memoizedEndBefore}toQuery(){let l=s.QueryOptions.forCollectionGroupQuery(this._collectionId,this._converter);return l=l.with({fieldOrders:[new e.FieldOrder(p.FieldPath.documentId())]}),this._startAt!==void 0&&(l=l.with({startAt:{before:!0,values:this._startAt}})),this._endBefore!==void 0&&(l=l.with({endAt:{before:!0,values:this._endBefore}})),new t.Query(this._firestore,l)}}return queryPartition.QueryPartition=m,queryPartition}var hasRequiredCollectionGroup;function requireCollectionGroup(){if(hasRequiredCollectionGroup)return collectionGroup;hasRequiredCollectionGroup=1,Object.defineProperty(collectionGroup,"__esModule",{value:!0}),collectionGroup.CollectionGroup=void 0;const e=requireQueryPartition(),t=requireUtil(),s=requireLogger(),p=requireQuery(),g=requireQueryOptions(),m=requirePath(),d=requireValidate(),l=requireTypes$1(),a=requireOrder(),o=requireTraceUtil();class h extends p.Query{constructor(_,y,w){super(_,g.QueryOptions.forCollectionGroupQuery(y,w))}async*getPartitions(_){const y=[];await this._firestore._traceUtil.startActiveSpan(o.SPAN_NAME_PARTITION_QUERY,async()=>{var w;(0,d.validateInteger)("desiredPartitionCount",_,{minValue:1});const T=(0,t.requestTag)();if(await this.firestore.initializeIfNeeded(T),_>1){const O=this.orderBy(m.FieldPath.documentId()).toProto();O.partitionCount=_-1;const E=await this.firestore.requestStream("partitionQueryStream",!1,O,T);E.resume();for await(const C of E)y.push((w=C.values)!==null&&w!==void 0?w:[])}(0,s.logger)("Firestore.getPartitions",T,"Received %d partitions",y.length),y.sort((I,O)=>(0,a.compareArrays)(I,O))});for(let w=0;w<y.length;++w)yield new e.QueryPartition(this._firestore,this._queryOptions.collectionId,this._queryOptions.converter,w>0?y[w-1]:void 0,y[w]);yield new e.QueryPartition(this._firestore,this._queryOptions.collectionId,this._queryOptions.converter,y.pop(),void 0)}withConverter(_){return new h(this.firestore,this._queryOptions.collectionId,_??(0,l.defaultConverter)())}}return collectionGroup.CollectionGroup=h,collectionGroup}var recursiveDelete={},hasRequiredRecursiveDelete;function requireRecursiveDelete(){return hasRequiredRecursiveDelete||(hasRequiredRecursiveDelete=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecursiveDelete=e.RECURSIVE_DELETE_MIN_PENDING_OPS=e.RECURSIVE_DELETE_MAX_PENDING_OPS=e.REFERENCE_NAME_MIN_ID=void 0;const t=require$$1$3,s=requireSrc(),p=requireUtil(),g=requireQueryOptions();e.REFERENCE_NAME_MIN_ID="__id-9223372036854775808__";e.RECURSIVE_DELETE_MAX_PENDING_OPS=5e3;e.RECURSIVE_DELETE_MIN_PENDING_OPS=1e3;class m{constructor(l,a,o,h,v){this.firestore=l,this.writer=a,this.ref=o,this.maxLimit=h,this.minLimit=v,this.errorCount=0,this.documentsPending=!0,this.started=!1,this.completionDeferred=new p.Deferred,this.streamInProgress=!1,this.pendingOpsCount=0,this.errorStack="",this.maxPendingOps=h,this.minPendingOps=v}run(){return t(!this.started,"RecursiveDelete.run() should only be called once."),this.errorStack=Error().stack,this.writer._verifyNotClosed(),this.setupStream(),this.completionDeferred.promise}setupStream(){const l=this.getAllDescendants(this.ref instanceof s.CollectionReference?this.ref:this.ref);this.streamInProgress=!0;let a=0;l.on("error",o=>{o.code=14,o.stack="Failed to fetch children documents: "+o.stack,this.lastError=o,this.onQueryEnd()}).on("data",o=>{a++,this.lastDocumentSnap=o,this.deleteRef(o.ref)}).on("end",()=>{this.streamInProgress=!1,a<this.minPendingOps?this.onQueryEnd():this.pendingOpsCount===0&&this.setupStream()})}getAllDescendants(l){let a=l._resourcePath;l instanceof s.CollectionReference&&(a=a.popLast());const o=l instanceof s.CollectionReference?l.id:l.parent.id;let h=new s.Query(this.firestore,g.QueryOptions.forKindlessAllDescendants(a,o,!1));if(h=h.select(s.FieldPath.documentId()).limit(this.maxPendingOps),l instanceof s.CollectionReference){const _=o+"/"+e.REFERENCE_NAME_MIN_ID,y=o+"\0/"+e.REFERENCE_NAME_MIN_ID;h=h.where(s.FieldPath.documentId(),">=",_).where(s.FieldPath.documentId(),"<",y)}return this.lastDocumentSnap&&(h=h.startAfter(this.lastDocumentSnap)),h.stream()}onQueryEnd(){this.documentsPending=!1,this.ref instanceof s.DocumentReference&&this.writer.delete(this.ref).catch(l=>this.incrementErrorCount(l)),this.writer.flush().then(async()=>{var l;if(this.lastError===void 0)this.completionDeferred.resolve();else{let a=new(requireFallback()).GoogleError(`${this.errorCount} ${this.errorCount!==1?"deletes":"delete"} failed. The last delete failed with: `);this.lastError.code!==void 0&&(a.code=this.lastError.code),a=(0,p.wrapError)(a,this.errorStack),this.completionDeferred.reject(this.lastError.stack?(0,p.wrapError)(a,(l=this.lastError.stack)!==null&&l!==void 0?l:""):a)}})}deleteRef(l){this.pendingOpsCount++,this.writer.delete(l).catch(a=>{this.incrementErrorCount(a)}).then(()=>{this.pendingOpsCount--,this.documentsPending&&!this.streamInProgress&&this.pendingOpsCount<this.minPendingOps&&this.setupStream()})}incrementErrorCount(l){this.errorCount++,this.lastError=l}}e.RecursiveDelete=m})(recursiveDelete)),recursiveDelete}var disabledTraceUtil={},span={},hasRequiredSpan;function requireSpan(){if(hasRequiredSpan)return span;hasRequiredSpan=1,Object.defineProperty(span,"__esModule",{value:!0}),span.Span=void 0;class e{constructor(s){this.span=s}end(){var s;(s=this.span)===null||s===void 0||s.end()}addEvent(s,p){var g;return this.span=(g=this.span)===null||g===void 0?void 0:g.addEvent(s,p),this}setAttributes(s){var p;return this.span=(p=this.span)===null||p===void 0?void 0:p.setAttributes(s),this}}return span.Span=e,span}var hasRequiredDisabledTraceUtil;function requireDisabledTraceUtil(){if(hasRequiredDisabledTraceUtil)return disabledTraceUtil;hasRequiredDisabledTraceUtil=1,Object.defineProperty(disabledTraceUtil,"__esModule",{value:!0}),disabledTraceUtil.DisabledTraceUtil=void 0;const e=requireSpan();class t{startSpan(p){return new e.Span}startActiveSpan(p,g,m){const d=new e.Span;return g(d)}currentSpan(){return new e.Span}recordProjectId(p){}}return disabledTraceUtil.DisabledTraceUtil=t,disabledTraceUtil}var enabledTraceUtil={},_globalThis=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},VERSION="1.9.0",re=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function _makeCompatibilityCheck(e){var t=new Set([e]),s=new Set,p=e.match(re);if(!p)return function(){return!1};var g={major:+p[1],minor:+p[2],patch:+p[3],prerelease:p[4]};if(g.prerelease!=null)return function(a){return a===e};function m(l){return s.add(l),!1}function d(l){return t.add(l),!0}return function(a){if(t.has(a))return!0;if(s.has(a))return!1;var o=a.match(re);if(!o)return m(a);var h={major:+o[1],minor:+o[2],patch:+o[3],prerelease:o[4]};return h.prerelease!=null||g.major!==h.major?m(a):g.major===0?g.minor===h.minor&&g.patch<=h.patch?d(a):m(a):g.minor<=h.minor?d(a):m(a)}}var isCompatible=_makeCompatibilityCheck(VERSION),major=VERSION.split(".")[0],GLOBAL_OPENTELEMETRY_API_KEY=Symbol.for("opentelemetry.js.api."+major),_global=_globalThis;function registerGlobal(e,t,s,p){var g;p===void 0&&(p=!1);var m=_global[GLOBAL_OPENTELEMETRY_API_KEY]=(g=_global[GLOBAL_OPENTELEMETRY_API_KEY])!==null&&g!==void 0?g:{version:VERSION};if(!p&&m[e]){var d=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return s.error(d.stack||d.message),!1}if(m.version!==VERSION){var d=new Error("@opentelemetry/api: Registration of version v"+m.version+" for "+e+" does not match previously registered API v"+VERSION);return s.error(d.stack||d.message),!1}return m[e]=t,s.debug("@opentelemetry/api: Registered a global for "+e+" v"+VERSION+"."),!0}function getGlobal(e){var t,s,p=(t=_global[GLOBAL_OPENTELEMETRY_API_KEY])===null||t===void 0?void 0:t.version;if(!(!p||!isCompatible(p)))return(s=_global[GLOBAL_OPENTELEMETRY_API_KEY])===null||s===void 0?void 0:s[e]}function unregisterGlobal(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+VERSION+".");var s=_global[GLOBAL_OPENTELEMETRY_API_KEY];s&&delete s[e]}var __read$4=function(e,t){var s=typeof Symbol=="function"&&e[Symbol.iterator];if(!s)return e;var p=s.call(e),g,m=[],d;try{for(;(t===void 0||t-- >0)&&!(g=p.next()).done;)m.push(g.value)}catch(l){d={error:l}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(d)throw d.error}}return m},__spreadArray$3=function(e,t,s){if(s||arguments.length===2)for(var p=0,g=t.length,m;p<g;p++)(m||!(p in t))&&(m||(m=Array.prototype.slice.call(t,0,p)),m[p]=t[p]);return e.concat(m||Array.prototype.slice.call(t))},DiagComponentLogger=(function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];return logProxy("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];return logProxy("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];return logProxy("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];return logProxy("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];return logProxy("verbose",this._namespace,t)},e})();function logProxy(e,t,s){var p=getGlobal("diag");if(p)return s.unshift(t),p[e].apply(p,__spreadArray$3([],__read$4(s),!1))}var DiagLogLevel;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(DiagLogLevel||(DiagLogLevel={}));function createLogLevelDiagLogger(e,t){e<DiagLogLevel.NONE?e=DiagLogLevel.NONE:e>DiagLogLevel.ALL&&(e=DiagLogLevel.ALL),t=t||{};function s(p,g){var m=t[p];return typeof m=="function"&&e>=g?m.bind(t):function(){}}return{error:s("error",DiagLogLevel.ERROR),warn:s("warn",DiagLogLevel.WARN),info:s("info",DiagLogLevel.INFO),debug:s("debug",DiagLogLevel.DEBUG),verbose:s("verbose",DiagLogLevel.VERBOSE)}}var __read$3=function(e,t){var s=typeof Symbol=="function"&&e[Symbol.iterator];if(!s)return e;var p=s.call(e),g,m=[],d;try{for(;(t===void 0||t-- >0)&&!(g=p.next()).done;)m.push(g.value)}catch(l){d={error:l}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(d)throw d.error}}return m},__spreadArray$2=function(e,t,s){if(s||arguments.length===2)for(var p=0,g=t.length,m;p<g;p++)(m||!(p in t))&&(m||(m=Array.prototype.slice.call(t,0,p)),m[p]=t[p]);return e.concat(m||Array.prototype.slice.call(t))},API_NAME$4="diag",DiagAPI=(function(){function e(){function t(g){return function(){for(var m=[],d=0;d<arguments.length;d++)m[d]=arguments[d];var l=getGlobal("diag");if(l)return l[g].apply(l,__spreadArray$2([],__read$3(m),!1))}}var s=this,p=function(g,m){var d,l,a;if(m===void 0&&(m={logLevel:DiagLogLevel.INFO}),g===s){var o=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return s.error((d=o.stack)!==null&&d!==void 0?d:o.message),!1}typeof m=="number"&&(m={logLevel:m});var h=getGlobal("diag"),v=createLogLevelDiagLogger((l=m.logLevel)!==null&&l!==void 0?l:DiagLogLevel.INFO,g);if(h&&!m.suppressOverrideMessage){var _=(a=new Error().stack)!==null&&a!==void 0?a:"<failed to generate stacktrace>";h.warn("Current logger will be overwritten from "+_),v.warn("Current logger will overwrite one already registered from "+_)}return registerGlobal("diag",v,s,!0)};s.setLogger=p,s.disable=function(){unregisterGlobal(API_NAME$4,s)},s.createComponentLogger=function(g){return new DiagComponentLogger(g)},s.verbose=t("verbose"),s.debug=t("debug"),s.info=t("info"),s.warn=t("warn"),s.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e})(),__read$2=function(e,t){var s=typeof Symbol=="function"&&e[Symbol.iterator];if(!s)return e;var p=s.call(e),g,m=[],d;try{for(;(t===void 0||t-- >0)&&!(g=p.next()).done;)m.push(g.value)}catch(l){d={error:l}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(d)throw d.error}}return m},__values=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,s=t&&e[t],p=0;if(s)return s.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&p>=e.length&&(e=void 0),{value:e&&e[p++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},BaggageImpl=(function(){function e(t){this._entries=t?new Map(t):new Map}return e.prototype.getEntry=function(t){var s=this._entries.get(t);if(s)return Object.assign({},s)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var s=__read$2(t,2),p=s[0],g=s[1];return[p,g]})},e.prototype.setEntry=function(t,s){var p=new e(this._entries);return p._entries.set(t,s),p},e.prototype.removeEntry=function(t){var s=new e(this._entries);return s._entries.delete(t),s},e.prototype.removeEntries=function(){for(var t,s,p=[],g=0;g<arguments.length;g++)p[g]=arguments[g];var m=new e(this._entries);try{for(var d=__values(p),l=d.next();!l.done;l=d.next()){var a=l.value;m._entries.delete(a)}}catch(o){t={error:o}}finally{try{l&&!l.done&&(s=d.return)&&s.call(d)}finally{if(t)throw t.error}}return m},e.prototype.clear=function(){return new e},e})(),baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata"),diag$1=DiagAPI.instance();function createBaggage(e){return e===void 0&&(e={}),new BaggageImpl(new Map(Object.entries(e)))}function baggageEntryMetadataFromString(e){return typeof e!="string"&&(diag$1.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:baggageEntryMetadataSymbol,toString:function(){return e}}}function createContextKey(e){return Symbol.for(e)}var BaseContext=(function(){function e(t){var s=this;s._currentContext=t?new Map(t):new Map,s.getValue=function(p){return s._currentContext.get(p)},s.setValue=function(p,g){var m=new e(s._currentContext);return m._currentContext.set(p,g),m},s.deleteValue=function(p){var g=new e(s._currentContext);return g._currentContext.delete(p),g}}return e})(),ROOT_CONTEXT=new BaseContext,consoleMap=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],DiagConsoleLogger=(function(){function e(){function t(p){return function(){for(var g=[],m=0;m<arguments.length;m++)g[m]=arguments[m];if(console){var d=console[p];if(typeof d!="function"&&(d=console.log),typeof d=="function")return d.apply(console,g)}}}for(var s=0;s<consoleMap.length;s++)this[consoleMap[s].n]=t(consoleMap[s].c)}return e})(),__extends=(function(){var e=function(t,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(p[m]=g[m])},e(t,s)};return function(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(t,s);function p(){this.constructor=t}t.prototype=s===null?Object.create(s):(p.prototype=s.prototype,new p)}})(),NoopMeter=(function(){function e(){}return e.prototype.createGauge=function(t,s){return NOOP_GAUGE_METRIC},e.prototype.createHistogram=function(t,s){return NOOP_HISTOGRAM_METRIC},e.prototype.createCounter=function(t,s){return NOOP_COUNTER_METRIC},e.prototype.createUpDownCounter=function(t,s){return NOOP_UP_DOWN_COUNTER_METRIC},e.prototype.createObservableGauge=function(t,s){return NOOP_OBSERVABLE_GAUGE_METRIC},e.prototype.createObservableCounter=function(t,s){return NOOP_OBSERVABLE_COUNTER_METRIC},e.prototype.createObservableUpDownCounter=function(t,s){return NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC},e.prototype.addBatchObservableCallback=function(t,s){},e.prototype.removeBatchObservableCallback=function(t){},e})(),NoopMetric=(function(){function e(){}return e})(),NoopCounterMetric=(function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(s,p){},t})(NoopMetric),NoopUpDownCounterMetric=(function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(s,p){},t})(NoopMetric),NoopGaugeMetric=(function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.record=function(s,p){},t})(NoopMetric),NoopHistogramMetric=(function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.record=function(s,p){},t})(NoopMetric),NoopObservableMetric=(function(){function e(){}return e.prototype.addCallback=function(t){},e.prototype.removeCallback=function(t){},e})(),NoopObservableCounterMetric=(function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(NoopObservableMetric),NoopObservableGaugeMetric=(function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(NoopObservableMetric),NoopObservableUpDownCounterMetric=(function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(NoopObservableMetric),NOOP_METER=new NoopMeter,NOOP_COUNTER_METRIC=new NoopCounterMetric,NOOP_GAUGE_METRIC=new NoopGaugeMetric,NOOP_HISTOGRAM_METRIC=new NoopHistogramMetric,NOOP_UP_DOWN_COUNTER_METRIC=new NoopUpDownCounterMetric,NOOP_OBSERVABLE_COUNTER_METRIC=new NoopObservableCounterMetric,NOOP_OBSERVABLE_GAUGE_METRIC=new NoopObservableGaugeMetric,NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new NoopObservableUpDownCounterMetric;function createNoopMeter(){return NOOP_METER}var ValueType;(function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"})(ValueType||(ValueType={}));var defaultTextMapGetter={get:function(e,t){if(e!=null)return e[t]},keys:function(e){return e==null?[]:Object.keys(e)}},defaultTextMapSetter={set:function(e,t,s){e!=null&&(e[t]=s)}},__read$1=function(e,t){var s=typeof Symbol=="function"&&e[Symbol.iterator];if(!s)return e;var p=s.call(e),g,m=[],d;try{for(;(t===void 0||t-- >0)&&!(g=p.next()).done;)m.push(g.value)}catch(l){d={error:l}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(d)throw d.error}}return m},__spreadArray$1=function(e,t,s){if(s||arguments.length===2)for(var p=0,g=t.length,m;p<g;p++)(m||!(p in t))&&(m||(m=Array.prototype.slice.call(t,0,p)),m[p]=t[p]);return e.concat(m||Array.prototype.slice.call(t))},NoopContextManager=(function(){function e(){}return e.prototype.active=function(){return ROOT_CONTEXT},e.prototype.with=function(t,s,p){for(var g=[],m=3;m<arguments.length;m++)g[m-3]=arguments[m];return s.call.apply(s,__spreadArray$1([p],__read$1(g),!1))},e.prototype.bind=function(t,s){return s},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e})(),__read=function(e,t){var s=typeof Symbol=="function"&&e[Symbol.iterator];if(!s)return e;var p=s.call(e),g,m=[],d;try{for(;(t===void 0||t-- >0)&&!(g=p.next()).done;)m.push(g.value)}catch(l){d={error:l}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(d)throw d.error}}return m},__spreadArray=function(e,t,s){if(s||arguments.length===2)for(var p=0,g=t.length,m;p<g;p++)(m||!(p in t))&&(m||(m=Array.prototype.slice.call(t,0,p)),m[p]=t[p]);return e.concat(m||Array.prototype.slice.call(t))},API_NAME$3="context",NOOP_CONTEXT_MANAGER=new NoopContextManager,ContextAPI=(function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return registerGlobal(API_NAME$3,t,DiagAPI.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,s,p){for(var g,m=[],d=3;d<arguments.length;d++)m[d-3]=arguments[d];return(g=this._getContextManager()).with.apply(g,__spreadArray([t,s,p],__read(m),!1))},e.prototype.bind=function(t,s){return this._getContextManager().bind(t,s)},e.prototype._getContextManager=function(){return getGlobal(API_NAME$3)||NOOP_CONTEXT_MANAGER},e.prototype.disable=function(){this._getContextManager().disable(),unregisterGlobal(API_NAME$3,DiagAPI.instance())},e})(),TraceFlags;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(TraceFlags||(TraceFlags={}));var INVALID_SPANID="0000000000000000",INVALID_TRACEID="00000000000000000000000000000000",INVALID_SPAN_CONTEXT={traceId:INVALID_TRACEID,spanId:INVALID_SPANID,traceFlags:TraceFlags.NONE},NonRecordingSpan=(function(){function e(t){t===void 0&&(t=INVALID_SPAN_CONTEXT),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,s){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,s){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,s){},e})(),SPAN_KEY=createContextKey("OpenTelemetry Context Key SPAN");function getSpan(e){return e.getValue(SPAN_KEY)||void 0}function getActiveSpan(){return getSpan(ContextAPI.getInstance().active())}function setSpan(e,t){return e.setValue(SPAN_KEY,t)}function deleteSpan(e){return e.deleteValue(SPAN_KEY)}function setSpanContext(e,t){return setSpan(e,new NonRecordingSpan(t))}function getSpanContext(e){var t;return(t=getSpan(e))===null||t===void 0?void 0:t.spanContext()}var VALID_TRACEID_REGEX=/^([0-9a-f]{32})$/i,VALID_SPANID_REGEX=/^[0-9a-f]{16}$/i;function isValidTraceId(e){return VALID_TRACEID_REGEX.test(e)&&e!==INVALID_TRACEID}function isValidSpanId(e){return VALID_SPANID_REGEX.test(e)&&e!==INVALID_SPANID}function isSpanContextValid(e){return isValidTraceId(e.traceId)&&isValidSpanId(e.spanId)}function wrapSpanContext(e){return new NonRecordingSpan(e)}var contextApi=ContextAPI.getInstance(),NoopTracer=(function(){function e(){}return e.prototype.startSpan=function(t,s,p){p===void 0&&(p=contextApi.active());var g=!!s?.root;if(g)return new NonRecordingSpan;var m=p&&getSpanContext(p);return isSpanContext(m)&&isSpanContextValid(m)?new NonRecordingSpan(m):new NonRecordingSpan},e.prototype.startActiveSpan=function(t,s,p,g){var m,d,l;if(!(arguments.length<2)){arguments.length===2?l=s:arguments.length===3?(m=s,l=p):(m=s,d=p,l=g);var a=d??contextApi.active(),o=this.startSpan(t,m,a),h=setSpan(a,o);return contextApi.with(h,l,void 0,o)}},e})();function isSpanContext(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var NOOP_TRACER=new NoopTracer,ProxyTracer=(function(){function e(t,s,p,g){this._provider=t,this.name=s,this.version=p,this.options=g}return e.prototype.startSpan=function(t,s,p){return this._getTracer().startSpan(t,s,p)},e.prototype.startActiveSpan=function(t,s,p,g){var m=this._getTracer();return Reflect.apply(m.startActiveSpan,m,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):NOOP_TRACER},e})(),NoopTracerProvider=(function(){function e(){}return e.prototype.getTracer=function(t,s,p){return new NoopTracer},e})(),NOOP_TRACER_PROVIDER=new NoopTracerProvider,ProxyTracerProvider=(function(){function e(){}return e.prototype.getTracer=function(t,s,p){var g;return(g=this.getDelegateTracer(t,s,p))!==null&&g!==void 0?g:new ProxyTracer(this,t,s,p)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:NOOP_TRACER_PROVIDER},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,s,p){var g;return(g=this._delegate)===null||g===void 0?void 0:g.getTracer(t,s,p)},e})(),SamplingDecision;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(SamplingDecision||(SamplingDecision={}));var SpanKind;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(SpanKind||(SpanKind={}));var SpanStatusCode;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(SpanStatusCode||(SpanStatusCode={}));var VALID_KEY_CHAR_RANGE="[_0-9a-z-*/]",VALID_KEY="[a-z]"+VALID_KEY_CHAR_RANGE+"{0,255}",VALID_VENDOR_KEY="[a-z0-9]"+VALID_KEY_CHAR_RANGE+"{0,240}@[a-z]"+VALID_KEY_CHAR_RANGE+"{0,13}",VALID_KEY_REGEX=new RegExp("^(?:"+VALID_KEY+"|"+VALID_VENDOR_KEY+")$"),VALID_VALUE_BASE_REGEX=/^[ -~]{0,255}[!-~]$/,INVALID_VALUE_COMMA_EQUAL_REGEX=/,|=/;function validateKey(e){return VALID_KEY_REGEX.test(e)}function validateValue(e){return VALID_VALUE_BASE_REGEX.test(e)&&!INVALID_VALUE_COMMA_EQUAL_REGEX.test(e)}var MAX_TRACE_STATE_ITEMS=32,MAX_TRACE_STATE_LEN=512,LIST_MEMBERS_SEPARATOR=",",LIST_MEMBER_KEY_VALUE_SPLITTER="=",TraceStateImpl=(function(){function e(t){this._internalState=new Map,t&&this._parse(t)}return e.prototype.set=function(t,s){var p=this._clone();return p._internalState.has(t)&&p._internalState.delete(t),p._internalState.set(t,s),p},e.prototype.unset=function(t){var s=this._clone();return s._internalState.delete(t),s},e.prototype.get=function(t){return this._internalState.get(t)},e.prototype.serialize=function(){var t=this;return this._keys().reduce(function(s,p){return s.push(p+LIST_MEMBER_KEY_VALUE_SPLITTER+t.get(p)),s},[]).join(LIST_MEMBERS_SEPARATOR)},e.prototype._parse=function(t){t.length>MAX_TRACE_STATE_LEN||(this._internalState=t.split(LIST_MEMBERS_SEPARATOR).reverse().reduce(function(s,p){var g=p.trim(),m=g.indexOf(LIST_MEMBER_KEY_VALUE_SPLITTER);if(m!==-1){var d=g.slice(0,m),l=g.slice(m+1,p.length);validateKey(d)&&validateValue(l)&&s.set(d,l)}return s},new Map),this._internalState.size>MAX_TRACE_STATE_ITEMS&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,MAX_TRACE_STATE_ITEMS))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e})();function createTraceState(e){return new TraceStateImpl(e)}var context=ContextAPI.getInstance(),diag=DiagAPI.instance(),NoopMeterProvider=(function(){function e(){}return e.prototype.getMeter=function(t,s,p){return NOOP_METER},e})(),NOOP_METER_PROVIDER=new NoopMeterProvider,API_NAME$2="metrics",MetricsAPI=(function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(t){return registerGlobal(API_NAME$2,t,DiagAPI.instance())},e.prototype.getMeterProvider=function(){return getGlobal(API_NAME$2)||NOOP_METER_PROVIDER},e.prototype.getMeter=function(t,s,p){return this.getMeterProvider().getMeter(t,s,p)},e.prototype.disable=function(){unregisterGlobal(API_NAME$2,DiagAPI.instance())},e})(),metrics=MetricsAPI.getInstance(),NoopTextMapPropagator=(function(){function e(){}return e.prototype.inject=function(t,s){},e.prototype.extract=function(t,s){return t},e.prototype.fields=function(){return[]},e})(),BAGGAGE_KEY=createContextKey("OpenTelemetry Baggage Key");function getBaggage(e){return e.getValue(BAGGAGE_KEY)||void 0}function getActiveBaggage(){return getBaggage(ContextAPI.getInstance().active())}function setBaggage(e,t){return e.setValue(BAGGAGE_KEY,t)}function deleteBaggage(e){return e.deleteValue(BAGGAGE_KEY)}var API_NAME$1="propagation",NOOP_TEXT_MAP_PROPAGATOR=new NoopTextMapPropagator,PropagationAPI=(function(){function e(){this.createBaggage=createBaggage,this.getBaggage=getBaggage,this.getActiveBaggage=getActiveBaggage,this.setBaggage=setBaggage,this.deleteBaggage=deleteBaggage}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(t){return registerGlobal(API_NAME$1,t,DiagAPI.instance())},e.prototype.inject=function(t,s,p){return p===void 0&&(p=defaultTextMapSetter),this._getGlobalPropagator().inject(t,s,p)},e.prototype.extract=function(t,s,p){return p===void 0&&(p=defaultTextMapGetter),this._getGlobalPropagator().extract(t,s,p)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){unregisterGlobal(API_NAME$1,DiagAPI.instance())},e.prototype._getGlobalPropagator=function(){return getGlobal(API_NAME$1)||NOOP_TEXT_MAP_PROPAGATOR},e})(),propagation=PropagationAPI.getInstance(),API_NAME="trace",TraceAPI=(function(){function e(){this._proxyTracerProvider=new ProxyTracerProvider,this.wrapSpanContext=wrapSpanContext,this.isSpanContextValid=isSpanContextValid,this.deleteSpan=deleteSpan,this.getSpan=getSpan,this.getActiveSpan=getActiveSpan,this.getSpanContext=getSpanContext,this.setSpan=setSpan,this.setSpanContext=setSpanContext}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var s=registerGlobal(API_NAME,this._proxyTracerProvider,DiagAPI.instance());return s&&this._proxyTracerProvider.setDelegate(t),s},e.prototype.getTracerProvider=function(){return getGlobal(API_NAME)||this._proxyTracerProvider},e.prototype.getTracer=function(t,s){return this.getTracerProvider().getTracer(t,s)},e.prototype.disable=function(){unregisterGlobal(API_NAME,DiagAPI.instance()),this._proxyTracerProvider=new ProxyTracerProvider},e})(),trace=TraceAPI.getInstance();const index$2={context,diag,metrics,propagation,trace},esm=Object.freeze(Object.defineProperty({__proto__:null,DiagConsoleLogger,get DiagLogLevel(){return DiagLogLevel},INVALID_SPANID,INVALID_SPAN_CONTEXT,INVALID_TRACEID,ProxyTracer,ProxyTracerProvider,ROOT_CONTEXT,get SamplingDecision(){return SamplingDecision},get SpanKind(){return SpanKind},get SpanStatusCode(){return SpanStatusCode},get TraceFlags(){return TraceFlags},get ValueType(){return ValueType},baggageEntryMetadataFromString,context,createContextKey,createNoopMeter,createTraceState,default:index$2,defaultTextMapGetter,defaultTextMapSetter,diag,isSpanContextValid,isValidSpanId,isValidTraceId,metrics,propagation,trace},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(esm);var v1={exports:{}},firestore_admin_client={};const options$2={syntax:"proto3"},nested$2=JSON.parse('{"google":{"nested":{"firestore":{"nested":{"admin":{"nested":{"v1":{"options":{"csharp_namespace":"Google.Cloud.Firestore.Admin.V1","go_package":"cloud.google.com/go/firestore/apiv1/admin/adminpb;adminpb","java_multiple_files":true,"java_outer_classname":"LocationProto","java_package":"com.google.firestore.admin.v1","objc_class_prefix":"GCFS","php_namespace":"Google\\\\Cloud\\\\Firestore\\\\Admin\\\\V1","ruby_package":"Google::Cloud::Firestore::Admin::V1","(google.api.resource_definition).type":"firestore.googleapis.com/CollectionGroup","(google.api.resource_definition).pattern":"projects/{project}/databases/{database}/collectionGroups/{collection}"},"nested":{"Backup":{"options":{"(google.api.resource).type":"firestore.googleapis.com/Backup","(google.api.resource).pattern":"projects/{project}/locations/{location}/backups/{backup}"},"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"database":{"type":"string","id":2,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}},"databaseUid":{"type":"string","id":7,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"snapshotTime":{"type":"google.protobuf.Timestamp","id":3,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"expireTime":{"type":"google.protobuf.Timestamp","id":4,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"stats":{"type":"Stats","id":6,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"state":{"type":"State","id":8,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}}},"nested":{"Stats":{"fields":{"sizeBytes":{"type":"int64","id":1,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"documentCount":{"type":"int64","id":2,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"indexCount":{"type":"int64","id":3,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}}}},"State":{"values":{"STATE_UNSPECIFIED":0,"CREATING":1,"READY":2,"NOT_AVAILABLE":3}}}},"Database":{"options":{"(google.api.resource).type":"firestore.googleapis.com/Database","(google.api.resource).pattern":"projects/{project}/databases/{database}","(google.api.resource).style":"DECLARATIVE_FRIENDLY"},"fields":{"name":{"type":"string","id":1},"uid":{"type":"string","id":3,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"createTime":{"type":"google.protobuf.Timestamp","id":5,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"updateTime":{"type":"google.protobuf.Timestamp","id":6,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"deleteTime":{"type":"google.protobuf.Timestamp","id":7,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"locationId":{"type":"string","id":9},"type":{"type":"DatabaseType","id":10},"concurrencyMode":{"type":"ConcurrencyMode","id":15},"versionRetentionPeriod":{"type":"google.protobuf.Duration","id":17,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"earliestVersionTime":{"type":"google.protobuf.Timestamp","id":18,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"pointInTimeRecoveryEnablement":{"type":"PointInTimeRecoveryEnablement","id":21},"appEngineIntegrationMode":{"type":"AppEngineIntegrationMode","id":19},"keyPrefix":{"type":"string","id":20,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"deleteProtectionState":{"type":"DeleteProtectionState","id":22},"cmekConfig":{"type":"CmekConfig","id":23,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"previousId":{"type":"string","id":25,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"sourceInfo":{"type":"SourceInfo","id":26,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"etag":{"type":"string","id":99}},"nested":{"DatabaseType":{"values":{"DATABASE_TYPE_UNSPECIFIED":0,"FIRESTORE_NATIVE":1,"DATASTORE_MODE":2}},"ConcurrencyMode":{"values":{"CONCURRENCY_MODE_UNSPECIFIED":0,"OPTIMISTIC":1,"PESSIMISTIC":2,"OPTIMISTIC_WITH_ENTITY_GROUPS":3}},"PointInTimeRecoveryEnablement":{"values":{"POINT_IN_TIME_RECOVERY_ENABLEMENT_UNSPECIFIED":0,"POINT_IN_TIME_RECOVERY_ENABLED":1,"POINT_IN_TIME_RECOVERY_DISABLED":2}},"AppEngineIntegrationMode":{"values":{"APP_ENGINE_INTEGRATION_MODE_UNSPECIFIED":0,"ENABLED":1,"DISABLED":2}},"DeleteProtectionState":{"values":{"DELETE_PROTECTION_STATE_UNSPECIFIED":0,"DELETE_PROTECTION_DISABLED":1,"DELETE_PROTECTION_ENABLED":2}},"CmekConfig":{"fields":{"kmsKeyName":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"activeKeyVersion":{"rule":"repeated","type":"string","id":2,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}}}},"SourceInfo":{"oneofs":{"source":{"oneof":["backup"]}},"fields":{"backup":{"type":"BackupSource","id":1},"operation":{"type":"string","id":3,"options":{"(google.api.resource_reference).type":"firestore.googleapis.com/Operation"}}},"nested":{"BackupSource":{"fields":{"backup":{"type":"string","id":1,"options":{"(google.api.resource_reference).type":"firestore.googleapis.com/Backup"}}}}}},"EncryptionConfig":{"oneofs":{"encryptionType":{"oneof":["googleDefaultEncryption","useSourceEncryption","customerManagedEncryption"]}},"fields":{"googleDefaultEncryption":{"type":"GoogleDefaultEncryptionOptions","id":1},"useSourceEncryption":{"type":"SourceEncryptionOptions","id":2},"customerManagedEncryption":{"type":"CustomerManagedEncryptionOptions","id":3}},"nested":{"GoogleDefaultEncryptionOptions":{"fields":{}},"SourceEncryptionOptions":{"fields":{}},"CustomerManagedEncryptionOptions":{"fields":{"kmsKeyName":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}}}}}}}},"Field":{"options":{"(google.api.resource).type":"firestore.googleapis.com/Field","(google.api.resource).pattern":"projects/{project}/databases/{database}/collectionGroups/{collection}/fields/{field}"},"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"indexConfig":{"type":"IndexConfig","id":2},"ttlConfig":{"type":"TtlConfig","id":3}},"nested":{"IndexConfig":{"fields":{"indexes":{"rule":"repeated","type":"Index","id":1},"usesAncestorConfig":{"type":"bool","id":2},"ancestorField":{"type":"string","id":3},"reverting":{"type":"bool","id":4}}},"TtlConfig":{"fields":{"state":{"type":"State","id":1,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}}},"nested":{"State":{"values":{"STATE_UNSPECIFIED":0,"CREATING":1,"ACTIVE":2,"NEEDS_REPAIR":3}}}}}},"Index":{"options":{"(google.api.resource).type":"firestore.googleapis.com/Index","(google.api.resource).pattern":"projects/{project}/databases/{database}/collectionGroups/{collection}/indexes/{index}"},"fields":{"name":{"type":"string","id":1},"queryScope":{"type":"QueryScope","id":2},"apiScope":{"type":"ApiScope","id":5},"fields":{"rule":"repeated","type":"IndexField","id":3},"state":{"type":"State","id":4}},"nested":{"QueryScope":{"values":{"QUERY_SCOPE_UNSPECIFIED":0,"COLLECTION":1,"COLLECTION_GROUP":2,"COLLECTION_RECURSIVE":3}},"ApiScope":{"values":{"ANY_API":0,"DATASTORE_MODE_API":1}},"IndexField":{"oneofs":{"valueMode":{"oneof":["order","arrayConfig","vectorConfig"]}},"fields":{"fieldPath":{"type":"string","id":1},"order":{"type":"Order","id":2},"arrayConfig":{"type":"ArrayConfig","id":3},"vectorConfig":{"type":"VectorConfig","id":4}},"nested":{"Order":{"values":{"ORDER_UNSPECIFIED":0,"ASCENDING":1,"DESCENDING":2}},"ArrayConfig":{"values":{"ARRAY_CONFIG_UNSPECIFIED":0,"CONTAINS":1}},"VectorConfig":{"oneofs":{"type":{"oneof":["flat"]}},"fields":{"dimension":{"type":"int32","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"flat":{"type":"FlatIndex","id":2}},"nested":{"FlatIndex":{"fields":{}}}}}},"State":{"values":{"STATE_UNSPECIFIED":0,"CREATING":1,"READY":2,"NEEDS_REPAIR":3}}}},"FirestoreAdmin":{"options":{"(google.api.default_host)":"firestore.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/datastore"},"methods":{"CreateIndex":{"requestType":"CreateIndexRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/collectionGroups/*}/indexes","(google.api.http).body":"index","(google.api.method_signature)":"parent,index","(google.longrunning.operation_info).response_type":"Index","(google.longrunning.operation_info).metadata_type":"IndexOperationMetadata"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*/databases/*/collectionGroups/*}/indexes","body":"index"}},{"(google.api.method_signature)":"parent,index"},{"(google.longrunning.operation_info)":{"response_type":"Index","metadata_type":"IndexOperationMetadata"}}]},"ListIndexes":{"requestType":"ListIndexesRequest","responseType":"ListIndexesResponse","options":{"(google.api.http).get":"/v1/{parent=projects/*/databases/*/collectionGroups/*}/indexes","(google.api.method_signature)":"parent"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{parent=projects/*/databases/*/collectionGroups/*}/indexes"}},{"(google.api.method_signature)":"parent"}]},"GetIndex":{"requestType":"GetIndexRequest","responseType":"Index","options":{"(google.api.http).get":"/v1/{name=projects/*/databases/*/collectionGroups/*/indexes/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=projects/*/databases/*/collectionGroups/*/indexes/*}"}},{"(google.api.method_signature)":"name"}]},"DeleteIndex":{"requestType":"DeleteIndexRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).delete":"/v1/{name=projects/*/databases/*/collectionGroups/*/indexes/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"delete":"/v1/{name=projects/*/databases/*/collectionGroups/*/indexes/*}"}},{"(google.api.method_signature)":"name"}]},"GetField":{"requestType":"GetFieldRequest","responseType":"Field","options":{"(google.api.http).get":"/v1/{name=projects/*/databases/*/collectionGroups/*/fields/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=projects/*/databases/*/collectionGroups/*/fields/*}"}},{"(google.api.method_signature)":"name"}]},"UpdateField":{"requestType":"UpdateFieldRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).patch":"/v1/{field.name=projects/*/databases/*/collectionGroups/*/fields/*}","(google.api.http).body":"field","(google.api.method_signature)":"field","(google.longrunning.operation_info).response_type":"Field","(google.longrunning.operation_info).metadata_type":"FieldOperationMetadata"},"parsedOptions":[{"(google.api.http)":{"patch":"/v1/{field.name=projects/*/databases/*/collectionGroups/*/fields/*}","body":"field"}},{"(google.api.method_signature)":"field"},{"(google.longrunning.operation_info)":{"response_type":"Field","metadata_type":"FieldOperationMetadata"}}]},"ListFields":{"requestType":"ListFieldsRequest","responseType":"ListFieldsResponse","options":{"(google.api.http).get":"/v1/{parent=projects/*/databases/*/collectionGroups/*}/fields","(google.api.method_signature)":"parent"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{parent=projects/*/databases/*/collectionGroups/*}/fields"}},{"(google.api.method_signature)":"parent"}]},"ExportDocuments":{"requestType":"ExportDocumentsRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).post":"/v1/{name=projects/*/databases/*}:exportDocuments","(google.api.http).body":"*","(google.api.method_signature)":"name","(google.longrunning.operation_info).response_type":"ExportDocumentsResponse","(google.longrunning.operation_info).metadata_type":"ExportDocumentsMetadata"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{name=projects/*/databases/*}:exportDocuments","body":"*"}},{"(google.api.method_signature)":"name"},{"(google.longrunning.operation_info)":{"response_type":"ExportDocumentsResponse","metadata_type":"ExportDocumentsMetadata"}}]},"ImportDocuments":{"requestType":"ImportDocumentsRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).post":"/v1/{name=projects/*/databases/*}:importDocuments","(google.api.http).body":"*","(google.api.method_signature)":"name","(google.longrunning.operation_info).response_type":"google.protobuf.Empty","(google.longrunning.operation_info).metadata_type":"ImportDocumentsMetadata"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{name=projects/*/databases/*}:importDocuments","body":"*"}},{"(google.api.method_signature)":"name"},{"(google.longrunning.operation_info)":{"response_type":"google.protobuf.Empty","metadata_type":"ImportDocumentsMetadata"}}]},"BulkDeleteDocuments":{"requestType":"BulkDeleteDocumentsRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).post":"/v1/{name=projects/*/databases/*}:bulkDeleteDocuments","(google.api.http).body":"*","(google.api.method_signature)":"name","(google.longrunning.operation_info).response_type":"BulkDeleteDocumentsResponse","(google.longrunning.operation_info).metadata_type":"BulkDeleteDocumentsMetadata"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{name=projects/*/databases/*}:bulkDeleteDocuments","body":"*"}},{"(google.api.method_signature)":"name"},{"(google.longrunning.operation_info)":{"response_type":"BulkDeleteDocumentsResponse","metadata_type":"BulkDeleteDocumentsMetadata"}}]},"CreateDatabase":{"requestType":"CreateDatabaseRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).post":"/v1/{parent=projects/*}/databases","(google.api.http).body":"database","(google.api.method_signature)":"parent,database,database_id","(google.longrunning.operation_info).response_type":"Database","(google.longrunning.operation_info).metadata_type":"CreateDatabaseMetadata"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*}/databases","body":"database"}},{"(google.api.method_signature)":"parent,database,database_id"},{"(google.longrunning.operation_info)":{"response_type":"Database","metadata_type":"CreateDatabaseMetadata"}}]},"GetDatabase":{"requestType":"GetDatabaseRequest","responseType":"Database","options":{"(google.api.http).get":"/v1/{name=projects/*/databases/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=projects/*/databases/*}"}},{"(google.api.method_signature)":"name"}]},"ListDatabases":{"requestType":"ListDatabasesRequest","responseType":"ListDatabasesResponse","options":{"(google.api.http).get":"/v1/{parent=projects/*}/databases","(google.api.method_signature)":"parent"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{parent=projects/*}/databases"}},{"(google.api.method_signature)":"parent"}]},"UpdateDatabase":{"requestType":"UpdateDatabaseRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).patch":"/v1/{database.name=projects/*/databases/*}","(google.api.http).body":"database","(google.api.method_signature)":"database,update_mask","(google.longrunning.operation_info).response_type":"Database","(google.longrunning.operation_info).metadata_type":"UpdateDatabaseMetadata"},"parsedOptions":[{"(google.api.http)":{"patch":"/v1/{database.name=projects/*/databases/*}","body":"database"}},{"(google.api.method_signature)":"database,update_mask"},{"(google.longrunning.operation_info)":{"response_type":"Database","metadata_type":"UpdateDatabaseMetadata"}}]},"DeleteDatabase":{"requestType":"DeleteDatabaseRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).delete":"/v1/{name=projects/*/databases/*}","(google.api.method_signature)":"name","(google.longrunning.operation_info).response_type":"Database","(google.longrunning.operation_info).metadata_type":"DeleteDatabaseMetadata"},"parsedOptions":[{"(google.api.http)":{"delete":"/v1/{name=projects/*/databases/*}"}},{"(google.api.method_signature)":"name"},{"(google.longrunning.operation_info)":{"response_type":"Database","metadata_type":"DeleteDatabaseMetadata"}}]},"GetBackup":{"requestType":"GetBackupRequest","responseType":"Backup","options":{"(google.api.http).get":"/v1/{name=projects/*/locations/*/backups/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=projects/*/locations/*/backups/*}"}},{"(google.api.method_signature)":"name"}]},"ListBackups":{"requestType":"ListBackupsRequest","responseType":"ListBackupsResponse","options":{"(google.api.http).get":"/v1/{parent=projects/*/locations/*}/backups","(google.api.method_signature)":"parent"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{parent=projects/*/locations/*}/backups"}},{"(google.api.method_signature)":"parent"}]},"DeleteBackup":{"requestType":"DeleteBackupRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).delete":"/v1/{name=projects/*/locations/*/backups/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"delete":"/v1/{name=projects/*/locations/*/backups/*}"}},{"(google.api.method_signature)":"name"}]},"RestoreDatabase":{"requestType":"RestoreDatabaseRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).post":"/v1/{parent=projects/*}/databases:restore","(google.api.http).body":"*","(google.longrunning.operation_info).response_type":"Database","(google.longrunning.operation_info).metadata_type":"RestoreDatabaseMetadata"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*}/databases:restore","body":"*"}},{"(google.longrunning.operation_info)":{"response_type":"Database","metadata_type":"RestoreDatabaseMetadata"}}]},"CreateBackupSchedule":{"requestType":"CreateBackupScheduleRequest","responseType":"BackupSchedule","options":{"(google.api.http).post":"/v1/{parent=projects/*/databases/*}/backupSchedules","(google.api.http).body":"backup_schedule","(google.api.method_signature)":"parent,backup_schedule"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*/databases/*}/backupSchedules","body":"backup_schedule"}},{"(google.api.method_signature)":"parent,backup_schedule"}]},"GetBackupSchedule":{"requestType":"GetBackupScheduleRequest","responseType":"BackupSchedule","options":{"(google.api.http).get":"/v1/{name=projects/*/databases/*/backupSchedules/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=projects/*/databases/*/backupSchedules/*}"}},{"(google.api.method_signature)":"name"}]},"ListBackupSchedules":{"requestType":"ListBackupSchedulesRequest","responseType":"ListBackupSchedulesResponse","options":{"(google.api.http).get":"/v1/{parent=projects/*/databases/*}/backupSchedules","(google.api.method_signature)":"parent"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{parent=projects/*/databases/*}/backupSchedules"}},{"(google.api.method_signature)":"parent"}]},"UpdateBackupSchedule":{"requestType":"UpdateBackupScheduleRequest","responseType":"BackupSchedule","options":{"(google.api.http).patch":"/v1/{backup_schedule.name=projects/*/databases/*/backupSchedules/*}","(google.api.http).body":"backup_schedule","(google.api.method_signature)":"backup_schedule,update_mask"},"parsedOptions":[{"(google.api.http)":{"patch":"/v1/{backup_schedule.name=projects/*/databases/*/backupSchedules/*}","body":"backup_schedule"}},{"(google.api.method_signature)":"backup_schedule,update_mask"}]},"DeleteBackupSchedule":{"requestType":"DeleteBackupScheduleRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).delete":"/v1/{name=projects/*/databases/*/backupSchedules/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"delete":"/v1/{name=projects/*/databases/*/backupSchedules/*}"}},{"(google.api.method_signature)":"name"}]}}},"ListDatabasesRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).child_type":"firestore.googleapis.com/Database"}},"showDeleted":{"type":"bool","id":4}}},"CreateDatabaseRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).child_type":"firestore.googleapis.com/Database"}},"database":{"type":"Database","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}},"databaseId":{"type":"string","id":3,"options":{"(google.api.field_behavior)":"REQUIRED"}}}},"CreateDatabaseMetadata":{"fields":{}},"ListDatabasesResponse":{"fields":{"databases":{"rule":"repeated","type":"Database","id":1},"unreachable":{"rule":"repeated","type":"string","id":3}}},"GetDatabaseRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}}}},"UpdateDatabaseRequest":{"fields":{"database":{"type":"Database","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"updateMask":{"type":"google.protobuf.FieldMask","id":2}}},"UpdateDatabaseMetadata":{"fields":{}},"DeleteDatabaseRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}},"etag":{"type":"string","id":3}}},"DeleteDatabaseMetadata":{"fields":{}},"CreateBackupScheduleRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}},"backupSchedule":{"type":"BackupSchedule","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}}}},"GetBackupScheduleRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/BackupSchedule"}}}},"UpdateBackupScheduleRequest":{"fields":{"backupSchedule":{"type":"BackupSchedule","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"updateMask":{"type":"google.protobuf.FieldMask","id":2}}},"ListBackupSchedulesRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}}}},"ListBackupSchedulesResponse":{"fields":{"backupSchedules":{"rule":"repeated","type":"BackupSchedule","id":1}}},"DeleteBackupScheduleRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/BackupSchedule"}}}},"CreateIndexRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/CollectionGroup"}},"index":{"type":"Index","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}}}},"ListIndexesRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/CollectionGroup"}},"filter":{"type":"string","id":2},"pageSize":{"type":"int32","id":3},"pageToken":{"type":"string","id":4}}},"ListIndexesResponse":{"fields":{"indexes":{"rule":"repeated","type":"Index","id":1},"nextPageToken":{"type":"string","id":2}}},"GetIndexRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Index"}}}},"DeleteIndexRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Index"}}}},"UpdateFieldRequest":{"fields":{"field":{"type":"Field","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"updateMask":{"type":"google.protobuf.FieldMask","id":2}}},"GetFieldRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Field"}}}},"ListFieldsRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/CollectionGroup"}},"filter":{"type":"string","id":2},"pageSize":{"type":"int32","id":3},"pageToken":{"type":"string","id":4}}},"ListFieldsResponse":{"fields":{"fields":{"rule":"repeated","type":"Field","id":1},"nextPageToken":{"type":"string","id":2}}},"ExportDocumentsRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}},"collectionIds":{"rule":"repeated","type":"string","id":2},"outputUriPrefix":{"type":"string","id":3},"namespaceIds":{"rule":"repeated","type":"string","id":4},"snapshotTime":{"type":"google.protobuf.Timestamp","id":5}}},"ImportDocumentsRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}},"collectionIds":{"rule":"repeated","type":"string","id":2},"inputUriPrefix":{"type":"string","id":3},"namespaceIds":{"rule":"repeated","type":"string","id":4}}},"BulkDeleteDocumentsRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}},"collectionIds":{"rule":"repeated","type":"string","id":2,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"namespaceIds":{"rule":"repeated","type":"string","id":3,"options":{"(google.api.field_behavior)":"OPTIONAL"}}}},"BulkDeleteDocumentsResponse":{"fields":{}},"GetBackupRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Backup"}}}},"ListBackupsRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Location"}},"filter":{"type":"string","id":2}}},"ListBackupsResponse":{"fields":{"backups":{"rule":"repeated","type":"Backup","id":1},"unreachable":{"rule":"repeated","type":"string","id":3}}},"DeleteBackupRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Backup"}}}},"RestoreDatabaseRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).child_type":"firestore.googleapis.com/Database"}},"databaseId":{"type":"string","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}},"backup":{"type":"string","id":3,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Backup"}},"encryptionConfig":{"type":"Database.EncryptionConfig","id":9,"options":{"(google.api.field_behavior)":"OPTIONAL"}}}},"IndexOperationMetadata":{"fields":{"startTime":{"type":"google.protobuf.Timestamp","id":1},"endTime":{"type":"google.protobuf.Timestamp","id":2},"index":{"type":"string","id":3},"state":{"type":"OperationState","id":4},"progressDocuments":{"type":"Progress","id":5},"progressBytes":{"type":"Progress","id":6}}},"FieldOperationMetadata":{"fields":{"startTime":{"type":"google.protobuf.Timestamp","id":1},"endTime":{"type":"google.protobuf.Timestamp","id":2},"field":{"type":"string","id":3},"indexConfigDeltas":{"rule":"repeated","type":"IndexConfigDelta","id":4},"state":{"type":"OperationState","id":5},"progressDocuments":{"type":"Progress","id":6},"progressBytes":{"type":"Progress","id":7},"ttlConfigDelta":{"type":"TtlConfigDelta","id":8}},"nested":{"IndexConfigDelta":{"fields":{"changeType":{"type":"ChangeType","id":1},"index":{"type":"Index","id":2}},"nested":{"ChangeType":{"values":{"CHANGE_TYPE_UNSPECIFIED":0,"ADD":1,"REMOVE":2}}}},"TtlConfigDelta":{"fields":{"changeType":{"type":"ChangeType","id":1}},"nested":{"ChangeType":{"values":{"CHANGE_TYPE_UNSPECIFIED":0,"ADD":1,"REMOVE":2}}}}}},"ExportDocumentsMetadata":{"fields":{"startTime":{"type":"google.protobuf.Timestamp","id":1},"endTime":{"type":"google.protobuf.Timestamp","id":2},"operationState":{"type":"OperationState","id":3},"progressDocuments":{"type":"Progress","id":4},"progressBytes":{"type":"Progress","id":5},"collectionIds":{"rule":"repeated","type":"string","id":6},"outputUriPrefix":{"type":"string","id":7},"namespaceIds":{"rule":"repeated","type":"string","id":8},"snapshotTime":{"type":"google.protobuf.Timestamp","id":9}}},"ImportDocumentsMetadata":{"fields":{"startTime":{"type":"google.protobuf.Timestamp","id":1},"endTime":{"type":"google.protobuf.Timestamp","id":2},"operationState":{"type":"OperationState","id":3},"progressDocuments":{"type":"Progress","id":4},"progressBytes":{"type":"Progress","id":5},"collectionIds":{"rule":"repeated","type":"string","id":6},"inputUriPrefix":{"type":"string","id":7},"namespaceIds":{"rule":"repeated","type":"string","id":8}}},"BulkDeleteDocumentsMetadata":{"fields":{"startTime":{"type":"google.protobuf.Timestamp","id":1},"endTime":{"type":"google.protobuf.Timestamp","id":2},"operationState":{"type":"OperationState","id":3},"progressDocuments":{"type":"Progress","id":4},"progressBytes":{"type":"Progress","id":5},"collectionIds":{"rule":"repeated","type":"string","id":6},"namespaceIds":{"rule":"repeated","type":"string","id":7},"snapshotTime":{"type":"google.protobuf.Timestamp","id":8}}},"ExportDocumentsResponse":{"fields":{"outputUriPrefix":{"type":"string","id":1}}},"RestoreDatabaseMetadata":{"fields":{"startTime":{"type":"google.protobuf.Timestamp","id":1},"endTime":{"type":"google.protobuf.Timestamp","id":2},"operationState":{"type":"OperationState","id":3},"database":{"type":"string","id":4,"options":{"(google.api.resource_reference).type":"firestore.googleapis.com/Database"}},"backup":{"type":"string","id":5,"options":{"(google.api.resource_reference).type":"firestore.googleapis.com/Backup"}},"progressPercentage":{"type":"Progress","id":8}}},"Progress":{"fields":{"estimatedWork":{"type":"int64","id":1},"completedWork":{"type":"int64","id":2}}},"OperationState":{"values":{"OPERATION_STATE_UNSPECIFIED":0,"INITIALIZING":1,"PROCESSING":2,"CANCELLING":3,"FINALIZING":4,"SUCCESSFUL":5,"FAILED":6,"CANCELLED":7}},"BackupSchedule":{"options":{"(google.api.resource).type":"firestore.googleapis.com/BackupSchedule","(google.api.resource).pattern":"projects/{project}/databases/{database}/backupSchedules/{backup_schedule}"},"oneofs":{"recurrence":{"oneof":["dailyRecurrence","weeklyRecurrence"]}},"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"createTime":{"type":"google.protobuf.Timestamp","id":3,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"updateTime":{"type":"google.protobuf.Timestamp","id":10,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"retention":{"type":"google.protobuf.Duration","id":6},"dailyRecurrence":{"type":"DailyRecurrence","id":7},"weeklyRecurrence":{"type":"WeeklyRecurrence","id":8}}},"DailyRecurrence":{"fields":{}},"WeeklyRecurrence":{"fields":{"day":{"type":"google.type.DayOfWeek","id":2}}},"LocationMetadata":{"fields":{}}}}}}}},"api":{"options":{"go_package":"google.golang.org/genproto/googleapis/api;api","java_multiple_files":true,"java_outer_classname":"LaunchStageProto","java_package":"com.google.api","objc_class_prefix":"GAPI","cc_enable_arenas":true},"nested":{"fieldBehavior":{"rule":"repeated","type":"google.api.FieldBehavior","id":1052,"extend":"google.protobuf.FieldOptions","options":{"packed":false}},"FieldBehavior":{"values":{"FIELD_BEHAVIOR_UNSPECIFIED":0,"OPTIONAL":1,"REQUIRED":2,"OUTPUT_ONLY":3,"INPUT_ONLY":4,"IMMUTABLE":5,"UNORDERED_LIST":6,"NON_EMPTY_DEFAULT":7,"IDENTIFIER":8}},"resourceReference":{"type":"google.api.ResourceReference","id":1055,"extend":"google.protobuf.FieldOptions"},"resourceDefinition":{"rule":"repeated","type":"google.api.ResourceDescriptor","id":1053,"extend":"google.protobuf.FileOptions"},"resource":{"type":"google.api.ResourceDescriptor","id":1053,"extend":"google.protobuf.MessageOptions"},"ResourceDescriptor":{"fields":{"type":{"type":"string","id":1},"pattern":{"rule":"repeated","type":"string","id":2},"nameField":{"type":"string","id":3},"history":{"type":"History","id":4},"plural":{"type":"string","id":5},"singular":{"type":"string","id":6},"style":{"rule":"repeated","type":"Style","id":10}},"nested":{"History":{"values":{"HISTORY_UNSPECIFIED":0,"ORIGINALLY_SINGLE_PATTERN":1,"FUTURE_MULTI_PATTERN":2}},"Style":{"values":{"STYLE_UNSPECIFIED":0,"DECLARATIVE_FRIENDLY":1}}}},"ResourceReference":{"fields":{"type":{"type":"string","id":1},"childType":{"type":"string","id":2}}},"http":{"type":"HttpRule","id":72295728,"extend":"google.protobuf.MethodOptions"},"Http":{"fields":{"rules":{"rule":"repeated","type":"HttpRule","id":1},"fullyDecodeReservedExpansion":{"type":"bool","id":2}}},"HttpRule":{"oneofs":{"pattern":{"oneof":["get","put","post","delete","patch","custom"]}},"fields":{"selector":{"type":"string","id":1},"get":{"type":"string","id":2},"put":{"type":"string","id":3},"post":{"type":"string","id":4},"delete":{"type":"string","id":5},"patch":{"type":"string","id":6},"custom":{"type":"CustomHttpPattern","id":8},"body":{"type":"string","id":7},"responseBody":{"type":"string","id":12},"additionalBindings":{"rule":"repeated","type":"HttpRule","id":11}}},"CustomHttpPattern":{"fields":{"kind":{"type":"string","id":1},"path":{"type":"string","id":2}}},"methodSignature":{"rule":"repeated","type":"string","id":1051,"extend":"google.protobuf.MethodOptions"},"defaultHost":{"type":"string","id":1049,"extend":"google.protobuf.ServiceOptions"},"oauthScopes":{"type":"string","id":1050,"extend":"google.protobuf.ServiceOptions"},"apiVersion":{"type":"string","id":525000001,"extend":"google.protobuf.ServiceOptions"},"CommonLanguageSettings":{"fields":{"referenceDocsUri":{"type":"string","id":1,"options":{"deprecated":true}},"destinations":{"rule":"repeated","type":"ClientLibraryDestination","id":2},"selectiveGapicGeneration":{"type":"SelectiveGapicGeneration","id":3}}},"ClientLibrarySettings":{"fields":{"version":{"type":"string","id":1},"launchStage":{"type":"LaunchStage","id":2},"restNumericEnums":{"type":"bool","id":3},"javaSettings":{"type":"JavaSettings","id":21},"cppSettings":{"type":"CppSettings","id":22},"phpSettings":{"type":"PhpSettings","id":23},"pythonSettings":{"type":"PythonSettings","id":24},"nodeSettings":{"type":"NodeSettings","id":25},"dotnetSettings":{"type":"DotnetSettings","id":26},"rubySettings":{"type":"RubySettings","id":27},"goSettings":{"type":"GoSettings","id":28}}},"Publishing":{"fields":{"methodSettings":{"rule":"repeated","type":"MethodSettings","id":2},"newIssueUri":{"type":"string","id":101},"documentationUri":{"type":"string","id":102},"apiShortName":{"type":"string","id":103},"githubLabel":{"type":"string","id":104},"codeownerGithubTeams":{"rule":"repeated","type":"string","id":105},"docTagPrefix":{"type":"string","id":106},"organization":{"type":"ClientLibraryOrganization","id":107},"librarySettings":{"rule":"repeated","type":"ClientLibrarySettings","id":109},"protoReferenceDocumentationUri":{"type":"string","id":110},"restReferenceDocumentationUri":{"type":"string","id":111}}},"JavaSettings":{"fields":{"libraryPackage":{"type":"string","id":1},"serviceClassNames":{"keyType":"string","type":"string","id":2},"common":{"type":"CommonLanguageSettings","id":3}}},"CppSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"PhpSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"PythonSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"experimentalFeatures":{"type":"ExperimentalFeatures","id":2}},"nested":{"ExperimentalFeatures":{"fields":{"restAsyncIoEnabled":{"type":"bool","id":1},"protobufPythonicTypesEnabled":{"type":"bool","id":2}}}}},"NodeSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"DotnetSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"renamedServices":{"keyType":"string","type":"string","id":2},"renamedResources":{"keyType":"string","type":"string","id":3},"ignoredResources":{"rule":"repeated","type":"string","id":4},"forcedNamespaceAliases":{"rule":"repeated","type":"string","id":5},"handwrittenSignatures":{"rule":"repeated","type":"string","id":6}}},"RubySettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"GoSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"renamedServices":{"keyType":"string","type":"string","id":2}}},"MethodSettings":{"fields":{"selector":{"type":"string","id":1},"longRunning":{"type":"LongRunning","id":2},"autoPopulatedFields":{"rule":"repeated","type":"string","id":3}},"nested":{"LongRunning":{"fields":{"initialPollDelay":{"type":"google.protobuf.Duration","id":1},"pollDelayMultiplier":{"type":"float","id":2},"maxPollDelay":{"type":"google.protobuf.Duration","id":3},"totalPollTimeout":{"type":"google.protobuf.Duration","id":4}}}}},"ClientLibraryOrganization":{"values":{"CLIENT_LIBRARY_ORGANIZATION_UNSPECIFIED":0,"CLOUD":1,"ADS":2,"PHOTOS":3,"STREET_VIEW":4,"SHOPPING":5,"GEO":6,"GENERATIVE_AI":7}},"ClientLibraryDestination":{"values":{"CLIENT_LIBRARY_DESTINATION_UNSPECIFIED":0,"GITHUB":10,"PACKAGE_MANAGER":20}},"SelectiveGapicGeneration":{"fields":{"methods":{"rule":"repeated","type":"string","id":1},"generateOmittedAsInternal":{"type":"bool","id":2}}},"LaunchStage":{"values":{"LAUNCH_STAGE_UNSPECIFIED":0,"UNIMPLEMENTED":6,"PRELAUNCH":7,"EARLY_ACCESS":1,"ALPHA":2,"BETA":3,"GA":4,"DEPRECATED":5}}}},"protobuf":{"options":{"go_package":"google.golang.org/protobuf/types/descriptorpb","java_package":"com.google.protobuf","java_outer_classname":"DescriptorProtos","csharp_namespace":"Google.Protobuf.Reflection","objc_class_prefix":"GPB","cc_enable_arenas":true,"optimize_for":"SPEED"},"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"Edition":{"values":{"EDITION_UNKNOWN":0,"EDITION_PROTO2":998,"EDITION_PROTO3":999,"EDITION_2023":1000,"EDITION_2024":1001,"EDITION_1_TEST_ONLY":1,"EDITION_2_TEST_ONLY":2,"EDITION_99997_TEST_ONLY":99997,"EDITION_99998_TEST_ONLY":99998,"EDITION_99999_TEST_ONLY":99999,"EDITION_MAX":2147483647}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12},"edition":{"type":"Edition","id":14}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2},"options":{"type":"ExtensionRangeOptions","id":3}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"ExtensionRangeOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999},"declaration":{"rule":"repeated","type":"Declaration","id":2,"options":{"retention":"RETENTION_SOURCE"}},"features":{"type":"FeatureSet","id":50},"verification":{"type":"VerificationState","id":3,"options":{"default":"UNVERIFIED","retention":"RETENTION_SOURCE"}}},"extensions":[[1000,536870911]],"nested":{"Declaration":{"fields":{"number":{"type":"int32","id":1},"fullName":{"type":"string","id":2},"type":{"type":"string","id":3},"reserved":{"type":"bool","id":5},"repeated":{"type":"bool","id":6}},"reserved":[[4,4]]},"VerificationState":{"values":{"DECLARATION":0,"UNVERIFIED":1}}}},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8},"proto3Optional":{"type":"bool","id":17}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REPEATED":3,"LABEL_REQUIRED":2}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3},"reservedRange":{"rule":"repeated","type":"EnumReservedRange","id":4},"reservedName":{"rule":"repeated","type":"string","id":5}},"nested":{"EnumReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5,"options":{"default":false}},"serverStreaming":{"type":"bool","id":6,"options":{"default":false}}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10,"options":{"default":false}},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27,"options":{"default":false}},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16,"options":{"default":false}},"javaGenericServices":{"type":"bool","id":17,"options":{"default":false}},"pyGenericServices":{"type":"bool","id":18,"options":{"default":false}},"deprecated":{"type":"bool","id":23,"options":{"default":false}},"ccEnableArenas":{"type":"bool","id":31,"options":{"default":true}},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"swiftPrefix":{"type":"string","id":39},"phpClassPrefix":{"type":"string","id":40},"phpNamespace":{"type":"string","id":41},"phpMetadataNamespace":{"type":"string","id":44},"rubyPackage":{"type":"string","id":45},"features":{"type":"FeatureSet","id":50},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[42,42],[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1,"options":{"default":false}},"noStandardDescriptorAccessor":{"type":"bool","id":2,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"mapEntry":{"type":"bool","id":7},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":11,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":12},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[5,5],[6,6],[8,8],[9,9]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5,"options":{"default":false}},"unverifiedLazy":{"type":"bool","id":15,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"weak":{"type":"bool","id":10,"options":{"default":false}},"debugRedact":{"type":"bool","id":16,"options":{"default":false}},"retention":{"type":"OptionRetention","id":17},"targets":{"rule":"repeated","type":"OptionTargetType","id":19,"options":{"packed":false}},"editionDefaults":{"rule":"repeated","type":"EditionDefault","id":20},"features":{"type":"FeatureSet","id":21},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[18,18]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}},"OptionRetention":{"values":{"RETENTION_UNKNOWN":0,"RETENTION_RUNTIME":1,"RETENTION_SOURCE":2}},"OptionTargetType":{"values":{"TARGET_TYPE_UNKNOWN":0,"TARGET_TYPE_FILE":1,"TARGET_TYPE_EXTENSION_RANGE":2,"TARGET_TYPE_MESSAGE":3,"TARGET_TYPE_FIELD":4,"TARGET_TYPE_ONEOF":5,"TARGET_TYPE_ENUM":6,"TARGET_TYPE_ENUM_ENTRY":7,"TARGET_TYPE_SERVICE":8,"TARGET_TYPE_METHOD":9}},"EditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"value":{"type":"string","id":2}}}}},"OneofOptions":{"fields":{"features":{"type":"FeatureSet","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":6,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[5,5]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1,"options":{"default":false}},"features":{"type":"FeatureSet","id":2},"debugRedact":{"type":"bool","id":3,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"features":{"type":"FeatureSet","id":34},"deprecated":{"type":"bool","id":33,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33,"options":{"default":false}},"idempotencyLevel":{"type":"IdempotencyLevel","id":34,"options":{"default":"IDEMPOTENCY_UNKNOWN"}},"features":{"type":"FeatureSet","id":35},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"nested":{"IdempotencyLevel":{"values":{"IDEMPOTENCY_UNKNOWN":0,"NO_SIDE_EFFECTS":1,"IDEMPOTENT":2}}}},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"FeatureSet":{"fields":{"fieldPresence":{"type":"FieldPresence","id":1,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_2023","edition_defaults.value":"EXPLICIT"}},"enumType":{"type":"EnumType","id":2,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"OPEN"}},"repeatedFieldEncoding":{"type":"RepeatedFieldEncoding","id":3,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"PACKED"}},"utf8Validation":{"type":"Utf8Validation","id":4,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"VERIFY"}},"messageEncoding":{"type":"MessageEncoding","id":5,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO2","edition_defaults.value":"LENGTH_PREFIXED"}},"jsonFormat":{"type":"JsonFormat","id":6,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"ALLOW"}}},"extensions":[[1000,1000],[1001,1001],[1002,1002],[9995,9999],[10000,10000]],"reserved":[[999,999]],"nested":{"FieldPresence":{"values":{"FIELD_PRESENCE_UNKNOWN":0,"EXPLICIT":1,"IMPLICIT":2,"LEGACY_REQUIRED":3}},"EnumType":{"values":{"ENUM_TYPE_UNKNOWN":0,"OPEN":1,"CLOSED":2}},"RepeatedFieldEncoding":{"values":{"REPEATED_FIELD_ENCODING_UNKNOWN":0,"PACKED":1,"EXPANDED":2}},"Utf8Validation":{"values":{"UTF8_VALIDATION_UNKNOWN":0,"VERIFY":2,"NONE":3}},"MessageEncoding":{"values":{"MESSAGE_ENCODING_UNKNOWN":0,"LENGTH_PREFIXED":1,"DELIMITED":2}},"JsonFormat":{"values":{"JSON_FORMAT_UNKNOWN":0,"ALLOW":1,"LEGACY_BEST_EFFORT":2}}}},"FeatureSetDefaults":{"fields":{"defaults":{"rule":"repeated","type":"FeatureSetEditionDefault","id":1},"minimumEdition":{"type":"Edition","id":4},"maximumEdition":{"type":"Edition","id":5}},"nested":{"FeatureSetEditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"features":{"type":"FeatureSet","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4},"semantic":{"type":"Semantic","id":5}},"nested":{"Semantic":{"values":{"NONE":0,"SET":1,"ALIAS":2}}}}}},"Timestamp":{"fields":{"seconds":{"type":"int64","id":1},"nanos":{"type":"int32","id":2}}},"Duration":{"fields":{"seconds":{"type":"int64","id":1},"nanos":{"type":"int32","id":2}}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"Empty":{"fields":{}},"FieldMask":{"fields":{"paths":{"rule":"repeated","type":"string","id":1}}},"Struct":{"fields":{"fields":{"keyType":"string","type":"Value","id":1}}},"Value":{"oneofs":{"kind":{"oneof":["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},"fields":{"nullValue":{"type":"NullValue","id":1},"numberValue":{"type":"double","id":2},"stringValue":{"type":"string","id":3},"boolValue":{"type":"bool","id":4},"structValue":{"type":"Struct","id":5},"listValue":{"type":"ListValue","id":6}}},"NullValue":{"values":{"NULL_VALUE":0}},"ListValue":{"fields":{"values":{"rule":"repeated","type":"Value","id":1}}},"DoubleValue":{"fields":{"value":{"type":"double","id":1}}},"FloatValue":{"fields":{"value":{"type":"float","id":1}}},"Int64Value":{"fields":{"value":{"type":"int64","id":1}}},"UInt64Value":{"fields":{"value":{"type":"uint64","id":1}}},"Int32Value":{"fields":{"value":{"type":"int32","id":1}}},"UInt32Value":{"fields":{"value":{"type":"uint32","id":1}}},"BoolValue":{"fields":{"value":{"type":"bool","id":1}}},"StringValue":{"fields":{"value":{"type":"string","id":1}}},"BytesValue":{"fields":{"value":{"type":"bytes","id":1}}}}},"type":{"options":{"go_package":"google.golang.org/genproto/googleapis/type/latlng;latlng","java_multiple_files":true,"java_outer_classname":"LatLngProto","java_package":"com.google.type","objc_class_prefix":"GTP","cc_enable_arenas":true},"nested":{"DayOfWeek":{"values":{"DAY_OF_WEEK_UNSPECIFIED":0,"MONDAY":1,"TUESDAY":2,"WEDNESDAY":3,"THURSDAY":4,"FRIDAY":5,"SATURDAY":6,"SUNDAY":7}},"LatLng":{"fields":{"latitude":{"type":"double","id":1},"longitude":{"type":"double","id":2}}}}},"longrunning":{"options":{"cc_enable_arenas":true,"csharp_namespace":"Google.LongRunning","go_package":"cloud.google.com/go/longrunning/autogen/longrunningpb;longrunningpb","java_multiple_files":true,"java_outer_classname":"OperationsProto","java_package":"com.google.longrunning","objc_class_prefix":"GLRUN","php_namespace":"Google\\\\LongRunning"},"nested":{"operationInfo":{"type":"google.longrunning.OperationInfo","id":1049,"extend":"google.protobuf.MethodOptions"},"Operations":{"options":{"(google.api.default_host)":"longrunning.googleapis.com"},"methods":{"ListOperations":{"requestType":"ListOperationsRequest","responseType":"ListOperationsResponse","options":{"(google.api.http).get":"/v1/{name=operations}","(google.api.method_signature)":"name,filter"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=operations}"}},{"(google.api.method_signature)":"name,filter"}]},"GetOperation":{"requestType":"GetOperationRequest","responseType":"Operation","options":{"(google.api.http).get":"/v1/{name=operations/**}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=operations/**}"}},{"(google.api.method_signature)":"name"}]},"DeleteOperation":{"requestType":"DeleteOperationRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).delete":"/v1/{name=operations/**}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"delete":"/v1/{name=operations/**}"}},{"(google.api.method_signature)":"name"}]},"CancelOperation":{"requestType":"CancelOperationRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).post":"/v1/{name=operations/**}:cancel","(google.api.http).body":"*","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{name=operations/**}:cancel","body":"*"}},{"(google.api.method_signature)":"name"}]},"WaitOperation":{"requestType":"WaitOperationRequest","responseType":"Operation"}}},"Operation":{"oneofs":{"result":{"oneof":["error","response"]}},"fields":{"name":{"type":"string","id":1},"metadata":{"type":"google.protobuf.Any","id":2},"done":{"type":"bool","id":3},"error":{"type":"google.rpc.Status","id":4},"response":{"type":"google.protobuf.Any","id":5}}},"GetOperationRequest":{"fields":{"name":{"type":"string","id":1}}},"ListOperationsRequest":{"fields":{"name":{"type":"string","id":4},"filter":{"type":"string","id":1},"pageSize":{"type":"int32","id":2},"pageToken":{"type":"string","id":3}}},"ListOperationsResponse":{"fields":{"operations":{"rule":"repeated","type":"Operation","id":1},"nextPageToken":{"type":"string","id":2}}},"CancelOperationRequest":{"fields":{"name":{"type":"string","id":1}}},"DeleteOperationRequest":{"fields":{"name":{"type":"string","id":1}}},"WaitOperationRequest":{"fields":{"name":{"type":"string","id":1},"timeout":{"type":"google.protobuf.Duration","id":2}}},"OperationInfo":{"fields":{"responseType":{"type":"string","id":1},"metadataType":{"type":"string","id":2}}}}},"rpc":{"options":{"cc_enable_arenas":true,"go_package":"google.golang.org/genproto/googleapis/rpc/status;status","java_multiple_files":true,"java_outer_classname":"StatusProto","java_package":"com.google.rpc","objc_class_prefix":"RPC"},"nested":{"Status":{"fields":{"code":{"type":"int32","id":1},"message":{"type":"string","id":2},"details":{"rule":"repeated","type":"google.protobuf.Any","id":3}}}}}}}}'),require$$0={options:options$2,nested:nested$2},interfaces$1={"google.firestore.admin.v1.FirestoreAdmin":{retry_codes:{non_idempotent:[],idempotent:["DEADLINE_EXCEEDED","UNAVAILABLE"],deadline_exceeded_internal_unavailable:["DEADLINE_EXCEEDED","INTERNAL","UNAVAILABLE"]},retry_params:{default:{initial_retry_delay_millis:100,retry_delay_multiplier:1.3,max_retry_delay_millis:6e4,initial_rpc_timeout_millis:6e4,rpc_timeout_multiplier:1,max_rpc_timeout_millis:6e4,total_timeout_millis:6e5}},methods:{CreateIndex:{timeout_millis:6e4,retry_codes_name:"non_idempotent",retry_params_name:"default"},ListIndexes:{timeout_millis:6e4,retry_codes_name:"deadline_exceeded_internal_unavailable",retry_params_name:"default"},GetIndex:{timeout_millis:6e4,retry_codes_name:"deadline_exceeded_internal_unavailable",retry_params_name:"default"},DeleteIndex:{timeout_millis:6e4,retry_codes_name:"deadline_exceeded_internal_unavailable",retry_params_name:"default"},GetField:{timeout_millis:6e4,retry_codes_name:"deadline_exceeded_internal_unavailable",retry_params_name:"default"},UpdateField:{timeout_millis:6e4,retry_codes_name:"non_idempotent",retry_params_name:"default"},ListFields:{timeout_millis:6e4,retry_codes_name:"deadline_exceeded_internal_unavailable",retry_params_name:"default"},ExportDocuments:{timeout_millis:6e4,retry_codes_name:"non_idempotent",retry_params_name:"default"},ImportDocuments:{timeout_millis:6e4,retry_codes_name:"non_idempotent",retry_params_name:"default"},BulkDeleteDocuments:{timeout_millis:6e4,retry_codes_name:"non_idempotent",retry_params_name:"default"},CreateDatabase:{timeout_millis:12e4,retry_codes_name:"non_idempotent",retry_params_name:"default"},GetDatabase:{retry_codes_name:"non_idempotent",retry_params_name:"default"},ListDatabases:{retry_codes_name:"non_idempotent",retry_params_name:"default"},UpdateDatabase:{retry_codes_name:"non_idempotent",retry_params_name:"default"},DeleteDatabase:{retry_codes_name:"non_idempotent",retry_params_name:"default"},GetBackup:{retry_codes_name:"non_idempotent",retry_params_name:"default"},ListBackups:{retry_codes_name:"non_idempotent",retry_params_name:"default"},DeleteBackup:{retry_codes_name:"non_idempotent",retry_params_name:"default"},RestoreDatabase:{timeout_millis:12e4,retry_codes_name:"non_idempotent",retry_params_name:"default"},CreateBackupSchedule:{retry_codes_name:"non_idempotent",retry_params_name:"default"},GetBackupSchedule:{retry_codes_name:"non_idempotent",retry_params_name:"default"},ListBackupSchedules:{retry_codes_name:"non_idempotent",retry_params_name:"default"},UpdateBackupSchedule:{retry_codes_name:"non_idempotent",retry_params_name:"default"},DeleteBackupSchedule:{retry_codes_name:"non_idempotent",retry_params_name:"default"}}}},require$$1$2={interfaces:interfaces$1},name="@google-cloud/firestore",version="7.11.3",require$$33={name,version};var hasRequiredFirestore_admin_client;function requireFirestore_admin_client(){if(hasRequiredFirestore_admin_client)return firestore_admin_client;hasRequiredFirestore_admin_client=1;var e={},t={};Object.defineProperty(firestore_admin_client,"__esModule",{value:!0}),firestore_admin_client.FirestoreAdminClient=void 0;const s=require$$0,p=require$$1$2,g=require$$33.version;class m{constructor(l,a){var o,h,v,_,y;this._terminated=!1,this.descriptors={page:{},stream:{},longrunning:{},batching:{}};const w=this.constructor;if(l?.universe_domain&&l?.universeDomain&&l?.universe_domain!==l?.universeDomain)throw new Error("Please set either universe_domain or universeDomain, but not both.");const T=typeof e=="object"&&typeof t=="object"?t.GOOGLE_CLOUD_UNIVERSE_DOMAIN:void 0;this._universeDomain=(v=(h=(o=l?.universeDomain)!==null&&o!==void 0?o:l?.universe_domain)!==null&&h!==void 0?h:T)!==null&&v!==void 0?v:"googleapis.com",this._servicePath="firestore."+this._universeDomain;const I=l?.servicePath||l?.apiEndpoint||this._servicePath;this._providedCustomServicePath=!!(l?.servicePath||l?.apiEndpoint);const O=l?.port||w.port,E=(_=l?.clientConfig)!==null&&_!==void 0?_:{},C=(y=l?.fallback)!==null&&y!==void 0?y:typeof window<"u"&&typeof window?.fetch=="function";l=Object.assign({servicePath:I,port:O,clientConfig:E,fallback:C},l),l.numericEnums=!0,I!==this._servicePath&&!("scopes"in l)&&(l.scopes=w.scopes),a||(a=requireFallback()),this._gaxModule=l.fallback?a.fallback:a,this._gaxGrpc=new this._gaxModule.GrpcClient(l),this._opts=l,this.auth=this._gaxGrpc.auth,this.auth.useJWTAccessWithScope=!0,this.auth.defaultServicePath=this._servicePath,I===this._servicePath&&(this.auth.defaultScopes=w.scopes),this.locationsClient=new this._gaxModule.LocationsClient(this._gaxGrpc,l);const x=[`gax/${this._gaxModule.version}`,`gapic/${g}`];typeof e=="object"&&"versions"in e?x.push(`gl-node/${e.versions.node}`):x.push(`gl-web/${this._gaxModule.version}`),l.fallback?x.push(`rest/${this._gaxGrpc.grpcVersion}`):x.push(`grpc/${this._gaxGrpc.grpcVersion}`),l.libName&&l.libVersion&&x.push(`${l.libName}/${l.libVersion}`),this._protos=this._gaxGrpc.loadProtoJSON(s),this.pathTemplates={backupPathTemplate:new this._gaxModule.PathTemplate("projects/{project}/locations/{location}/backups/{backup}"),backupSchedulePathTemplate:new this._gaxModule.PathTemplate("projects/{project}/databases/{database}/backupSchedules/{backup_schedule}"),collectionGroupPathTemplate:new this._gaxModule.PathTemplate("projects/{project}/databases/{database}/collectionGroups/{collection}"),databasePathTemplate:new this._gaxModule.PathTemplate("projects/{project}/databases/{database}"),fieldPathTemplate:new this._gaxModule.PathTemplate("projects/{project}/databases/{database}/collectionGroups/{collection}/fields/{field}"),indexPathTemplate:new this._gaxModule.PathTemplate("projects/{project}/databases/{database}/collectionGroups/{collection}/indexes/{index}"),locationPathTemplate:new this._gaxModule.PathTemplate("projects/{project}/locations/{location}"),projectPathTemplate:new this._gaxModule.PathTemplate("projects/{project}")},this.descriptors.page={listIndexes:new this._gaxModule.PageDescriptor("pageToken","nextPageToken","indexes"),listFields:new this._gaxModule.PageDescriptor("pageToken","nextPageToken","fields")};const j=this._gaxModule.protobuf.Root.fromJSON(s),D={auth:this.auth,grpc:"grpc"in this._gaxGrpc?this._gaxGrpc.grpc:void 0};l.fallback&&(D.protoJson=j,D.httpRules=[{selector:"google.longrunning.Operations.CancelOperation",post:"/v1/{name=projects/*/databases/*/operations/*}:cancel",body:"*"},{selector:"google.longrunning.Operations.DeleteOperation",delete:"/v1/{name=projects/*/databases/*/operations/*}"},{selector:"google.longrunning.Operations.GetOperation",get:"/v1/{name=projects/*/databases/*/operations/*}"},{selector:"google.longrunning.Operations.ListOperations",get:"/v1/{name=projects/*/databases/*}/operations"}]),this.operationsClient=this._gaxModule.lro(D).operationsClient(l);const k=j.lookup(".google.firestore.admin.v1.Index"),q=j.lookup(".google.firestore.admin.v1.IndexOperationMetadata"),G=j.lookup(".google.firestore.admin.v1.Field"),$=j.lookup(".google.firestore.admin.v1.FieldOperationMetadata"),W=j.lookup(".google.firestore.admin.v1.ExportDocumentsResponse"),K=j.lookup(".google.firestore.admin.v1.ExportDocumentsMetadata"),z=j.lookup(".google.protobuf.Empty"),Q=j.lookup(".google.firestore.admin.v1.ImportDocumentsMetadata"),Y=j.lookup(".google.firestore.admin.v1.BulkDeleteDocumentsResponse"),te=j.lookup(".google.firestore.admin.v1.BulkDeleteDocumentsMetadata"),ae=j.lookup(".google.firestore.admin.v1.Database"),ue=j.lookup(".google.firestore.admin.v1.CreateDatabaseMetadata"),ee=j.lookup(".google.firestore.admin.v1.Database"),oe=j.lookup(".google.firestore.admin.v1.UpdateDatabaseMetadata"),de=j.lookup(".google.firestore.admin.v1.Database"),he=j.lookup(".google.firestore.admin.v1.DeleteDatabaseMetadata"),Ee=j.lookup(".google.firestore.admin.v1.Database"),fe=j.lookup(".google.firestore.admin.v1.RestoreDatabaseMetadata");this.descriptors.longrunning={createIndex:new this._gaxModule.LongrunningDescriptor(this.operationsClient,k.decode.bind(k),q.decode.bind(q)),updateField:new this._gaxModule.LongrunningDescriptor(this.operationsClient,G.decode.bind(G),$.decode.bind($)),exportDocuments:new this._gaxModule.LongrunningDescriptor(this.operationsClient,W.decode.bind(W),K.decode.bind(K)),importDocuments:new this._gaxModule.LongrunningDescriptor(this.operationsClient,z.decode.bind(z),Q.decode.bind(Q)),bulkDeleteDocuments:new this._gaxModule.LongrunningDescriptor(this.operationsClient,Y.decode.bind(Y),te.decode.bind(te)),createDatabase:new this._gaxModule.LongrunningDescriptor(this.operationsClient,ae.decode.bind(ae),ue.decode.bind(ue)),updateDatabase:new this._gaxModule.LongrunningDescriptor(this.operationsClient,ee.decode.bind(ee),oe.decode.bind(oe)),deleteDatabase:new this._gaxModule.LongrunningDescriptor(this.operationsClient,de.decode.bind(de),he.decode.bind(he)),restoreDatabase:new this._gaxModule.LongrunningDescriptor(this.operationsClient,Ee.decode.bind(Ee),fe.decode.bind(fe))},this._defaults=this._gaxGrpc.constructSettings("google.firestore.admin.v1.FirestoreAdmin",p,l.clientConfig||{},{"x-goog-api-client":x.join(" ")}),this.innerApiCalls={},this.warn=this._gaxModule.warn}initialize(){if(this.firestoreAdminStub)return this.firestoreAdminStub;this.firestoreAdminStub=this._gaxGrpc.createStub(this._opts.fallback?this._protos.lookupService("google.firestore.admin.v1.FirestoreAdmin"):this._protos.google.firestore.admin.v1.FirestoreAdmin,this._opts,this._providedCustomServicePath);const l=["createIndex","listIndexes","getIndex","deleteIndex","getField","updateField","listFields","exportDocuments","importDocuments","bulkDeleteDocuments","createDatabase","getDatabase","listDatabases","updateDatabase","deleteDatabase","getBackup","listBackups","deleteBackup","restoreDatabase","createBackupSchedule","getBackupSchedule","listBackupSchedules","updateBackupSchedule","deleteBackupSchedule"];for(const a of l){const o=this.firestoreAdminStub.then(_=>(...y)=>this._terminated?Promise.reject("The client has already been closed."):_[a].apply(_,y),_=>()=>{throw _}),h=this.descriptors.page[a]||this.descriptors.longrunning[a]||void 0,v=this._gaxModule.createApiCall(o,this._defaults[a],h,this._opts.fallback);this.innerApiCalls[a]=v}return this.firestoreAdminStub}static get servicePath(){return typeof e=="object"&&typeof e.emitWarning=="function"&&e.emitWarning("Static servicePath is deprecated, please use the instance method instead.","DeprecationWarning"),"firestore.googleapis.com"}static get apiEndpoint(){return typeof e=="object"&&typeof e.emitWarning=="function"&&e.emitWarning("Static apiEndpoint is deprecated, please use the instance method instead.","DeprecationWarning"),"firestore.googleapis.com"}get apiEndpoint(){return this._servicePath}get universeDomain(){return this._universeDomain}static get port(){return 443}static get scopes(){return["https://www.googleapis.com/auth/cloud-platform","https://www.googleapis.com/auth/datastore"]}getProjectId(l){if(l){this.auth.getProjectId(l);return}return this.auth.getProjectId()}getIndex(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(h=l.name)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.getIndex(l,v,o)}deleteIndex(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(h=l.name)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.deleteIndex(l,v,o)}getField(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(h=l.name)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.getField(l,v,o)}getDatabase(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(h=l.name)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.getDatabase(l,v,o)}listDatabases(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=l.parent)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.listDatabases(l,v,o)}getBackup(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(h=l.name)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.getBackup(l,v,o)}listBackups(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=l.parent)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.listBackups(l,v,o)}deleteBackup(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(h=l.name)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.deleteBackup(l,v,o)}createBackupSchedule(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=l.parent)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.createBackupSchedule(l,v,o)}getBackupSchedule(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(h=l.name)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.getBackupSchedule(l,v,o)}listBackupSchedules(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=l.parent)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.listBackupSchedules(l,v,o)}updateBackupSchedule(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({"backup_schedule.name":(h=l.backupSchedule.name)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.updateBackupSchedule(l,v,o)}deleteBackupSchedule(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(h=l.name)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.deleteBackupSchedule(l,v,o)}createIndex(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=l.parent)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.createIndex(l,v,o)}async checkCreateIndexProgress(l){const a=new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({name:l}),[o]=await this.operationsClient.getOperation(a);return new this._gaxModule.Operation(o,this.descriptors.longrunning.createIndex,this._gaxModule.createDefaultBackoffSettings())}updateField(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({"field.name":(h=l.field.name)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.updateField(l,v,o)}async checkUpdateFieldProgress(l){const a=new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({name:l}),[o]=await this.operationsClient.getOperation(a);return new this._gaxModule.Operation(o,this.descriptors.longrunning.updateField,this._gaxModule.createDefaultBackoffSettings())}exportDocuments(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(h=l.name)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.exportDocuments(l,v,o)}async checkExportDocumentsProgress(l){const a=new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({name:l}),[o]=await this.operationsClient.getOperation(a);return new this._gaxModule.Operation(o,this.descriptors.longrunning.exportDocuments,this._gaxModule.createDefaultBackoffSettings())}importDocuments(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(h=l.name)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.importDocuments(l,v,o)}async checkImportDocumentsProgress(l){const a=new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({name:l}),[o]=await this.operationsClient.getOperation(a);return new this._gaxModule.Operation(o,this.descriptors.longrunning.importDocuments,this._gaxModule.createDefaultBackoffSettings())}bulkDeleteDocuments(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(h=l.name)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.bulkDeleteDocuments(l,v,o)}async checkBulkDeleteDocumentsProgress(l){const a=new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({name:l}),[o]=await this.operationsClient.getOperation(a);return new this._gaxModule.Operation(o,this.descriptors.longrunning.bulkDeleteDocuments,this._gaxModule.createDefaultBackoffSettings())}createDatabase(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=l.parent)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.createDatabase(l,v,o)}async checkCreateDatabaseProgress(l){const a=new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({name:l}),[o]=await this.operationsClient.getOperation(a);return new this._gaxModule.Operation(o,this.descriptors.longrunning.createDatabase,this._gaxModule.createDefaultBackoffSettings())}updateDatabase(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({"database.name":(h=l.database.name)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.updateDatabase(l,v,o)}async checkUpdateDatabaseProgress(l){const a=new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({name:l}),[o]=await this.operationsClient.getOperation(a);return new this._gaxModule.Operation(o,this.descriptors.longrunning.updateDatabase,this._gaxModule.createDefaultBackoffSettings())}deleteDatabase(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(h=l.name)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.deleteDatabase(l,v,o)}async checkDeleteDatabaseProgress(l){const a=new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({name:l}),[o]=await this.operationsClient.getOperation(a);return new this._gaxModule.Operation(o,this.descriptors.longrunning.deleteDatabase,this._gaxModule.createDefaultBackoffSettings())}restoreDatabase(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=l.parent)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.restoreDatabase(l,v,o)}async checkRestoreDatabaseProgress(l){const a=new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({name:l}),[o]=await this.operationsClient.getOperation(a);return new this._gaxModule.Operation(o,this.descriptors.longrunning.restoreDatabase,this._gaxModule.createDefaultBackoffSettings())}listIndexes(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=l.parent)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.listIndexes(l,v,o)}listIndexesStream(l,a){var o;l=l||{},a=a||{},a.otherArgs=a.otherArgs||{},a.otherArgs.headers=a.otherArgs.headers||{},a.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(o=l.parent)!==null&&o!==void 0?o:""});const v=this._defaults.listIndexes.merge(a);return this.initialize(),this.descriptors.page.listIndexes.createStream(this.innerApiCalls.listIndexes,l,v)}listIndexesAsync(l,a){var o;l=l||{},a=a||{},a.otherArgs=a.otherArgs||{},a.otherArgs.headers=a.otherArgs.headers||{},a.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(o=l.parent)!==null&&o!==void 0?o:""});const v=this._defaults.listIndexes.merge(a);return this.initialize(),this.descriptors.page.listIndexes.asyncIterate(this.innerApiCalls.listIndexes,l,v)}listFields(l,a,o){var h;l=l||{};let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=l.parent)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.listFields(l,v,o)}listFieldsStream(l,a){var o;l=l||{},a=a||{},a.otherArgs=a.otherArgs||{},a.otherArgs.headers=a.otherArgs.headers||{},a.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(o=l.parent)!==null&&o!==void 0?o:""});const v=this._defaults.listFields.merge(a);return this.initialize(),this.descriptors.page.listFields.createStream(this.innerApiCalls.listFields,l,v)}listFieldsAsync(l,a){var o;l=l||{},a=a||{},a.otherArgs=a.otherArgs||{},a.otherArgs.headers=a.otherArgs.headers||{},a.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(o=l.parent)!==null&&o!==void 0?o:""});const v=this._defaults.listFields.merge(a);return this.initialize(),this.descriptors.page.listFields.asyncIterate(this.innerApiCalls.listFields,l,v)}getLocation(l,a,o){return this.locationsClient.getLocation(l,a,o)}listLocationsAsync(l,a){return this.locationsClient.listLocationsAsync(l,a)}getOperation(l,a,o){var h;let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(h=l.name)!==null&&h!==void 0?h:""}),this.operationsClient.getOperation(l,v,o)}listOperationsAsync(l,a){var o;return a=a||{},a.otherArgs=a.otherArgs||{},a.otherArgs.headers=a.otherArgs.headers||{},a.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(o=l.name)!==null&&o!==void 0?o:""}),this.operationsClient.listOperationsAsync(l,a)}cancelOperation(l,a,o){var h;let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(h=l.name)!==null&&h!==void 0?h:""}),this.operationsClient.cancelOperation(l,v,o)}deleteOperation(l,a,o){var h;let v;return typeof a=="function"&&o===void 0?(o=a,v={}):v=a,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(h=l.name)!==null&&h!==void 0?h:""}),this.operationsClient.deleteOperation(l,v,o)}backupPath(l,a,o){return this.pathTemplates.backupPathTemplate.render({project:l,location:a,backup:o})}matchProjectFromBackupName(l){return this.pathTemplates.backupPathTemplate.match(l).project}matchLocationFromBackupName(l){return this.pathTemplates.backupPathTemplate.match(l).location}matchBackupFromBackupName(l){return this.pathTemplates.backupPathTemplate.match(l).backup}backupSchedulePath(l,a,o){return this.pathTemplates.backupSchedulePathTemplate.render({project:l,database:a,backup_schedule:o})}matchProjectFromBackupScheduleName(l){return this.pathTemplates.backupSchedulePathTemplate.match(l).project}matchDatabaseFromBackupScheduleName(l){return this.pathTemplates.backupSchedulePathTemplate.match(l).database}matchBackupScheduleFromBackupScheduleName(l){return this.pathTemplates.backupSchedulePathTemplate.match(l).backup_schedule}collectionGroupPath(l,a,o){return this.pathTemplates.collectionGroupPathTemplate.render({project:l,database:a,collection:o})}matchProjectFromCollectionGroupName(l){return this.pathTemplates.collectionGroupPathTemplate.match(l).project}matchDatabaseFromCollectionGroupName(l){return this.pathTemplates.collectionGroupPathTemplate.match(l).database}matchCollectionFromCollectionGroupName(l){return this.pathTemplates.collectionGroupPathTemplate.match(l).collection}databasePath(l,a){return this.pathTemplates.databasePathTemplate.render({project:l,database:a})}matchProjectFromDatabaseName(l){return this.pathTemplates.databasePathTemplate.match(l).project}matchDatabaseFromDatabaseName(l){return this.pathTemplates.databasePathTemplate.match(l).database}fieldPath(l,a,o,h){return this.pathTemplates.fieldPathTemplate.render({project:l,database:a,collection:o,field:h})}matchProjectFromFieldName(l){return this.pathTemplates.fieldPathTemplate.match(l).project}matchDatabaseFromFieldName(l){return this.pathTemplates.fieldPathTemplate.match(l).database}matchCollectionFromFieldName(l){return this.pathTemplates.fieldPathTemplate.match(l).collection}matchFieldFromFieldName(l){return this.pathTemplates.fieldPathTemplate.match(l).field}indexPath(l,a,o,h){return this.pathTemplates.indexPathTemplate.render({project:l,database:a,collection:o,index:h})}matchProjectFromIndexName(l){return this.pathTemplates.indexPathTemplate.match(l).project}matchDatabaseFromIndexName(l){return this.pathTemplates.indexPathTemplate.match(l).database}matchCollectionFromIndexName(l){return this.pathTemplates.indexPathTemplate.match(l).collection}matchIndexFromIndexName(l){return this.pathTemplates.indexPathTemplate.match(l).index}locationPath(l,a){return this.pathTemplates.locationPathTemplate.render({project:l,location:a})}matchProjectFromLocationName(l){return this.pathTemplates.locationPathTemplate.match(l).project}matchLocationFromLocationName(l){return this.pathTemplates.locationPathTemplate.match(l).location}projectPath(l){return this.pathTemplates.projectPathTemplate.render({project:l})}matchProjectFromProjectName(l){return this.pathTemplates.projectPathTemplate.match(l).project}close(){return this.firestoreAdminStub&&!this._terminated?this.firestoreAdminStub.then(l=>{this._terminated=!0,l.close(),this.locationsClient.close(),this.operationsClient.close()}):Promise.resolve()}}return firestore_admin_client.FirestoreAdminClient=m,firestore_admin_client}var firestore_client$1={};const options$1={syntax:"proto3"},nested$1=JSON.parse('{"google":{"nested":{"firestore":{"nested":{"v1":{"options":{"csharp_namespace":"Google.Cloud.Firestore.V1","go_package":"cloud.google.com/go/firestore/apiv1/firestorepb;firestorepb","java_multiple_files":true,"java_outer_classname":"WriteProto","java_package":"com.google.firestore.v1","objc_class_prefix":"GCFS","php_namespace":"Google\\\\Cloud\\\\Firestore\\\\V1","ruby_package":"Google::Cloud::Firestore::V1"},"nested":{"AggregationResult":{"fields":{"aggregateFields":{"keyType":"string","type":"Value","id":2}}},"Document":{"fields":{"name":{"type":"string","id":1},"fields":{"keyType":"string","type":"Value","id":2},"createTime":{"type":"google.protobuf.Timestamp","id":3},"updateTime":{"type":"google.protobuf.Timestamp","id":4}}},"Value":{"oneofs":{"valueType":{"oneof":["nullValue","booleanValue","integerValue","doubleValue","timestampValue","stringValue","bytesValue","referenceValue","geoPointValue","arrayValue","mapValue"]}},"fields":{"nullValue":{"type":"google.protobuf.NullValue","id":11},"booleanValue":{"type":"bool","id":1},"integerValue":{"type":"int64","id":2},"doubleValue":{"type":"double","id":3},"timestampValue":{"type":"google.protobuf.Timestamp","id":10},"stringValue":{"type":"string","id":17},"bytesValue":{"type":"bytes","id":18},"referenceValue":{"type":"string","id":5},"geoPointValue":{"type":"google.type.LatLng","id":8},"arrayValue":{"type":"ArrayValue","id":9},"mapValue":{"type":"MapValue","id":6}}},"ArrayValue":{"fields":{"values":{"rule":"repeated","type":"Value","id":1}}},"MapValue":{"fields":{"fields":{"keyType":"string","type":"Value","id":1}}},"BitSequence":{"fields":{"bitmap":{"type":"bytes","id":1},"padding":{"type":"int32","id":2}}},"BloomFilter":{"fields":{"bits":{"type":"BitSequence","id":1},"hashCount":{"type":"int32","id":2}}},"DocumentMask":{"fields":{"fieldPaths":{"rule":"repeated","type":"string","id":1}}},"Precondition":{"oneofs":{"conditionType":{"oneof":["exists","updateTime"]}},"fields":{"exists":{"type":"bool","id":1},"updateTime":{"type":"google.protobuf.Timestamp","id":2}}},"TransactionOptions":{"oneofs":{"mode":{"oneof":["readOnly","readWrite"]}},"fields":{"readOnly":{"type":"ReadOnly","id":2},"readWrite":{"type":"ReadWrite","id":3}},"nested":{"ReadWrite":{"fields":{"retryTransaction":{"type":"bytes","id":1}}},"ReadOnly":{"oneofs":{"consistencySelector":{"oneof":["readTime"]}},"fields":{"readTime":{"type":"google.protobuf.Timestamp","id":2}}}}},"Firestore":{"options":{"(google.api.default_host)":"firestore.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/datastore"},"methods":{"GetDocument":{"requestType":"GetDocumentRequest","responseType":"Document","options":{"(google.api.http).get":"/v1/{name=projects/*/databases/*/documents/*/**}"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=projects/*/databases/*/documents/*/**}"}}]},"ListDocuments":{"requestType":"ListDocumentsRequest","responseType":"ListDocumentsResponse","options":{"(google.api.http).get":"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}","(google.api.http).additional_bindings.get":"/v1/{parent=projects/*/databases/*/documents}/{collection_id}"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}","additional_bindings":{"get":"/v1/{parent=projects/*/databases/*/documents}/{collection_id}"}}}]},"UpdateDocument":{"requestType":"UpdateDocumentRequest","responseType":"Document","options":{"(google.api.http).patch":"/v1/{document.name=projects/*/databases/*/documents/*/**}","(google.api.http).body":"document","(google.api.method_signature)":"document,update_mask"},"parsedOptions":[{"(google.api.http)":{"patch":"/v1/{document.name=projects/*/databases/*/documents/*/**}","body":"document"}},{"(google.api.method_signature)":"document,update_mask"}]},"DeleteDocument":{"requestType":"DeleteDocumentRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).delete":"/v1/{name=projects/*/databases/*/documents/*/**}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"delete":"/v1/{name=projects/*/databases/*/documents/*/**}"}},{"(google.api.method_signature)":"name"}]},"BatchGetDocuments":{"requestType":"BatchGetDocumentsRequest","responseType":"BatchGetDocumentsResponse","responseStream":true,"options":{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchGet","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{database=projects/*/databases/*}/documents:batchGet","body":"*"}}]},"BeginTransaction":{"requestType":"BeginTransactionRequest","responseType":"BeginTransactionResponse","options":{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:beginTransaction","(google.api.http).body":"*","(google.api.method_signature)":"database"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{database=projects/*/databases/*}/documents:beginTransaction","body":"*"}},{"(google.api.method_signature)":"database"}]},"Commit":{"requestType":"CommitRequest","responseType":"CommitResponse","options":{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:commit","(google.api.http).body":"*","(google.api.method_signature)":"database,writes"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{database=projects/*/databases/*}/documents:commit","body":"*"}},{"(google.api.method_signature)":"database,writes"}]},"Rollback":{"requestType":"RollbackRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:rollback","(google.api.http).body":"*","(google.api.method_signature)":"database,transaction"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{database=projects/*/databases/*}/documents:rollback","body":"*"}},{"(google.api.method_signature)":"database,transaction"}]},"RunQuery":{"requestType":"RunQueryRequest","responseType":"RunQueryResponse","responseStream":true,"options":{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery","(google.api.http).additional_bindings.body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*/databases/*/documents}:runQuery","body":"*","additional_bindings":{"post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery","body":"*"}}}]},"RunAggregationQuery":{"requestType":"RunAggregationQueryRequest","responseType":"RunAggregationQueryResponse","responseStream":true,"options":{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery","(google.api.http).additional_bindings.body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery","body":"*","additional_bindings":{"post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery","body":"*"}}}]},"PartitionQuery":{"requestType":"PartitionQueryRequest","responseType":"PartitionQueryResponse","options":{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:partitionQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","(google.api.http).additional_bindings.body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*/databases/*/documents}:partitionQuery","body":"*","additional_bindings":{"post":"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","body":"*"}}}]},"Write":{"requestType":"WriteRequest","requestStream":true,"responseType":"WriteResponse","responseStream":true,"options":{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:write","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{database=projects/*/databases/*}/documents:write","body":"*"}}]},"Listen":{"requestType":"ListenRequest","requestStream":true,"responseType":"ListenResponse","responseStream":true,"options":{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:listen","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{database=projects/*/databases/*}/documents:listen","body":"*"}}]},"ListCollectionIds":{"requestType":"ListCollectionIdsRequest","responseType":"ListCollectionIdsResponse","options":{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","(google.api.http).additional_bindings.body":"*","(google.api.method_signature)":"parent"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds","body":"*","additional_bindings":{"post":"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","body":"*"}}},{"(google.api.method_signature)":"parent"}]},"BatchWrite":{"requestType":"BatchWriteRequest","responseType":"BatchWriteResponse","options":{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchWrite","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{database=projects/*/databases/*}/documents:batchWrite","body":"*"}}]},"CreateDocument":{"requestType":"CreateDocumentRequest","responseType":"Document","options":{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}","(google.api.http).body":"document"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}","body":"document"}}]}}},"GetDocumentRequest":{"oneofs":{"consistencySelector":{"oneof":["transaction","readTime"]}},"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"mask":{"type":"DocumentMask","id":2},"transaction":{"type":"bytes","id":3},"readTime":{"type":"google.protobuf.Timestamp","id":5}}},"ListDocumentsRequest":{"oneofs":{"consistencySelector":{"oneof":["transaction","readTime"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"collectionId":{"type":"string","id":2,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"pageSize":{"type":"int32","id":3,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"pageToken":{"type":"string","id":4,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"orderBy":{"type":"string","id":6,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"mask":{"type":"DocumentMask","id":7,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"transaction":{"type":"bytes","id":8},"readTime":{"type":"google.protobuf.Timestamp","id":10},"showMissing":{"type":"bool","id":12}}},"ListDocumentsResponse":{"fields":{"documents":{"rule":"repeated","type":"Document","id":1},"nextPageToken":{"type":"string","id":2}}},"CreateDocumentRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"collectionId":{"type":"string","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}},"documentId":{"type":"string","id":3},"document":{"type":"Document","id":4,"options":{"(google.api.field_behavior)":"REQUIRED"}},"mask":{"type":"DocumentMask","id":5}}},"UpdateDocumentRequest":{"fields":{"document":{"type":"Document","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"updateMask":{"type":"DocumentMask","id":2},"mask":{"type":"DocumentMask","id":3},"currentDocument":{"type":"Precondition","id":4}}},"DeleteDocumentRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"currentDocument":{"type":"Precondition","id":2}}},"BatchGetDocumentsRequest":{"oneofs":{"consistencySelector":{"oneof":["transaction","newTransaction","readTime"]}},"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"documents":{"rule":"repeated","type":"string","id":2},"mask":{"type":"DocumentMask","id":3},"transaction":{"type":"bytes","id":4},"newTransaction":{"type":"TransactionOptions","id":5},"readTime":{"type":"google.protobuf.Timestamp","id":7}}},"BatchGetDocumentsResponse":{"oneofs":{"result":{"oneof":["found","missing"]}},"fields":{"found":{"type":"Document","id":1},"missing":{"type":"string","id":2},"transaction":{"type":"bytes","id":3},"readTime":{"type":"google.protobuf.Timestamp","id":4}}},"BeginTransactionRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"options":{"type":"TransactionOptions","id":2}}},"BeginTransactionResponse":{"fields":{"transaction":{"type":"bytes","id":1}}},"CommitRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"writes":{"rule":"repeated","type":"Write","id":2},"transaction":{"type":"bytes","id":3}}},"CommitResponse":{"fields":{"writeResults":{"rule":"repeated","type":"WriteResult","id":1},"commitTime":{"type":"google.protobuf.Timestamp","id":2}}},"RollbackRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"transaction":{"type":"bytes","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}}}},"RunQueryRequest":{"oneofs":{"queryType":{"oneof":["structuredQuery"]},"consistencySelector":{"oneof":["transaction","newTransaction","readTime"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"structuredQuery":{"type":"StructuredQuery","id":2},"transaction":{"type":"bytes","id":5},"newTransaction":{"type":"TransactionOptions","id":6},"readTime":{"type":"google.protobuf.Timestamp","id":7},"explainOptions":{"type":"ExplainOptions","id":10,"options":{"(google.api.field_behavior)":"OPTIONAL"}}}},"RunQueryResponse":{"oneofs":{"continuationSelector":{"oneof":["done"]}},"fields":{"transaction":{"type":"bytes","id":2},"document":{"type":"Document","id":1},"readTime":{"type":"google.protobuf.Timestamp","id":3},"skippedResults":{"type":"int32","id":4},"done":{"type":"bool","id":6},"explainMetrics":{"type":"ExplainMetrics","id":11}}},"RunAggregationQueryRequest":{"oneofs":{"queryType":{"oneof":["structuredAggregationQuery"]},"consistencySelector":{"oneof":["transaction","newTransaction","readTime"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"structuredAggregationQuery":{"type":"StructuredAggregationQuery","id":2},"transaction":{"type":"bytes","id":4},"newTransaction":{"type":"TransactionOptions","id":5},"readTime":{"type":"google.protobuf.Timestamp","id":6},"explainOptions":{"type":"ExplainOptions","id":8,"options":{"(google.api.field_behavior)":"OPTIONAL"}}}},"RunAggregationQueryResponse":{"fields":{"result":{"type":"AggregationResult","id":1},"transaction":{"type":"bytes","id":2},"readTime":{"type":"google.protobuf.Timestamp","id":3},"explainMetrics":{"type":"ExplainMetrics","id":10}}},"PartitionQueryRequest":{"oneofs":{"queryType":{"oneof":["structuredQuery"]},"consistencySelector":{"oneof":["readTime"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"structuredQuery":{"type":"StructuredQuery","id":2},"partitionCount":{"type":"int64","id":3},"pageToken":{"type":"string","id":4},"pageSize":{"type":"int32","id":5},"readTime":{"type":"google.protobuf.Timestamp","id":6}}},"PartitionQueryResponse":{"fields":{"partitions":{"rule":"repeated","type":"Cursor","id":1},"nextPageToken":{"type":"string","id":2}}},"WriteRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"streamId":{"type":"string","id":2},"writes":{"rule":"repeated","type":"Write","id":3},"streamToken":{"type":"bytes","id":4},"labels":{"keyType":"string","type":"string","id":5}}},"WriteResponse":{"fields":{"streamId":{"type":"string","id":1},"streamToken":{"type":"bytes","id":2},"writeResults":{"rule":"repeated","type":"WriteResult","id":3},"commitTime":{"type":"google.protobuf.Timestamp","id":4}}},"ListenRequest":{"oneofs":{"targetChange":{"oneof":["addTarget","removeTarget"]}},"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"addTarget":{"type":"Target","id":2},"removeTarget":{"type":"int32","id":3},"labels":{"keyType":"string","type":"string","id":4}}},"ListenResponse":{"oneofs":{"responseType":{"oneof":["targetChange","documentChange","documentDelete","documentRemove","filter"]}},"fields":{"targetChange":{"type":"TargetChange","id":2},"documentChange":{"type":"DocumentChange","id":3},"documentDelete":{"type":"DocumentDelete","id":4},"documentRemove":{"type":"DocumentRemove","id":6},"filter":{"type":"ExistenceFilter","id":5}}},"Target":{"oneofs":{"targetType":{"oneof":["query","documents"]},"resumeType":{"oneof":["resumeToken","readTime"]}},"fields":{"query":{"type":"QueryTarget","id":2},"documents":{"type":"DocumentsTarget","id":3},"resumeToken":{"type":"bytes","id":4},"readTime":{"type":"google.protobuf.Timestamp","id":11},"targetId":{"type":"int32","id":5},"once":{"type":"bool","id":6},"expectedCount":{"type":"google.protobuf.Int32Value","id":12}},"nested":{"DocumentsTarget":{"fields":{"documents":{"rule":"repeated","type":"string","id":2}}},"QueryTarget":{"oneofs":{"queryType":{"oneof":["structuredQuery"]}},"fields":{"parent":{"type":"string","id":1},"structuredQuery":{"type":"StructuredQuery","id":2}}}}},"TargetChange":{"fields":{"targetChangeType":{"type":"TargetChangeType","id":1},"targetIds":{"rule":"repeated","type":"int32","id":2},"cause":{"type":"google.rpc.Status","id":3},"resumeToken":{"type":"bytes","id":4},"readTime":{"type":"google.protobuf.Timestamp","id":6}},"nested":{"TargetChangeType":{"values":{"NO_CHANGE":0,"ADD":1,"REMOVE":2,"CURRENT":3,"RESET":4}}}},"ListCollectionIdsRequest":{"oneofs":{"consistencySelector":{"oneof":["readTime"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"pageSize":{"type":"int32","id":2},"pageToken":{"type":"string","id":3},"readTime":{"type":"google.protobuf.Timestamp","id":4}}},"ListCollectionIdsResponse":{"fields":{"collectionIds":{"rule":"repeated","type":"string","id":1},"nextPageToken":{"type":"string","id":2}}},"BatchWriteRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"writes":{"rule":"repeated","type":"Write","id":2},"labels":{"keyType":"string","type":"string","id":3}}},"BatchWriteResponse":{"fields":{"writeResults":{"rule":"repeated","type":"WriteResult","id":1},"status":{"rule":"repeated","type":"google.rpc.Status","id":2}}},"StructuredQuery":{"fields":{"select":{"type":"Projection","id":1},"from":{"rule":"repeated","type":"CollectionSelector","id":2},"where":{"type":"Filter","id":3},"orderBy":{"rule":"repeated","type":"Order","id":4},"startAt":{"type":"Cursor","id":7},"endAt":{"type":"Cursor","id":8},"offset":{"type":"int32","id":6},"limit":{"type":"google.protobuf.Int32Value","id":5},"findNearest":{"type":"FindNearest","id":9,"options":{"(google.api.field_behavior)":"OPTIONAL"}}},"nested":{"CollectionSelector":{"fields":{"collectionId":{"type":"string","id":2},"allDescendants":{"type":"bool","id":3}}},"Filter":{"oneofs":{"filterType":{"oneof":["compositeFilter","fieldFilter","unaryFilter"]}},"fields":{"compositeFilter":{"type":"CompositeFilter","id":1},"fieldFilter":{"type":"FieldFilter","id":2},"unaryFilter":{"type":"UnaryFilter","id":3}}},"CompositeFilter":{"fields":{"op":{"type":"Operator","id":1},"filters":{"rule":"repeated","type":"Filter","id":2}},"nested":{"Operator":{"values":{"OPERATOR_UNSPECIFIED":0,"AND":1,"OR":2}}}},"FieldFilter":{"fields":{"field":{"type":"FieldReference","id":1},"op":{"type":"Operator","id":2},"value":{"type":"Value","id":3}},"nested":{"Operator":{"values":{"OPERATOR_UNSPECIFIED":0,"LESS_THAN":1,"LESS_THAN_OR_EQUAL":2,"GREATER_THAN":3,"GREATER_THAN_OR_EQUAL":4,"EQUAL":5,"NOT_EQUAL":6,"ARRAY_CONTAINS":7,"IN":8,"ARRAY_CONTAINS_ANY":9,"NOT_IN":10}}}},"UnaryFilter":{"oneofs":{"operandType":{"oneof":["field"]}},"fields":{"op":{"type":"Operator","id":1},"field":{"type":"FieldReference","id":2}},"nested":{"Operator":{"values":{"OPERATOR_UNSPECIFIED":0,"IS_NAN":2,"IS_NULL":3,"IS_NOT_NAN":4,"IS_NOT_NULL":5}}}},"Order":{"fields":{"field":{"type":"FieldReference","id":1},"direction":{"type":"Direction","id":2}}},"Direction":{"values":{"DIRECTION_UNSPECIFIED":0,"ASCENDING":1,"DESCENDING":2}},"FieldReference":{"fields":{"fieldPath":{"type":"string","id":2}}},"Projection":{"fields":{"fields":{"rule":"repeated","type":"FieldReference","id":2}}},"FindNearest":{"fields":{"vectorField":{"type":"FieldReference","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"queryVector":{"type":"Value","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}},"distanceMeasure":{"type":"DistanceMeasure","id":3,"options":{"(google.api.field_behavior)":"REQUIRED"}},"limit":{"type":"google.protobuf.Int32Value","id":4,"options":{"(google.api.field_behavior)":"REQUIRED"}},"distanceResultField":{"type":"string","id":5,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"distanceThreshold":{"type":"google.protobuf.DoubleValue","id":6,"options":{"(google.api.field_behavior)":"OPTIONAL"}}},"nested":{"DistanceMeasure":{"values":{"DISTANCE_MEASURE_UNSPECIFIED":0,"EUCLIDEAN":1,"COSINE":2,"DOT_PRODUCT":3}}}}}},"StructuredAggregationQuery":{"oneofs":{"queryType":{"oneof":["structuredQuery"]}},"fields":{"structuredQuery":{"type":"StructuredQuery","id":1},"aggregations":{"rule":"repeated","type":"Aggregation","id":3,"options":{"(google.api.field_behavior)":"OPTIONAL"}}},"nested":{"Aggregation":{"oneofs":{"operator":{"oneof":["count","sum","avg"]}},"fields":{"count":{"type":"Count","id":1},"sum":{"type":"Sum","id":2},"avg":{"type":"Avg","id":3},"alias":{"type":"string","id":7,"options":{"(google.api.field_behavior)":"OPTIONAL"}}},"nested":{"Count":{"fields":{"upTo":{"type":"google.protobuf.Int64Value","id":1,"options":{"(google.api.field_behavior)":"OPTIONAL"}}}},"Sum":{"fields":{"field":{"type":"StructuredQuery.FieldReference","id":1}}},"Avg":{"fields":{"field":{"type":"StructuredQuery.FieldReference","id":1}}}}}}},"Cursor":{"fields":{"values":{"rule":"repeated","type":"Value","id":1},"before":{"type":"bool","id":2}}},"ExplainOptions":{"fields":{"analyze":{"type":"bool","id":1,"options":{"(google.api.field_behavior)":"OPTIONAL"}}}},"ExplainMetrics":{"fields":{"planSummary":{"type":"PlanSummary","id":1},"executionStats":{"type":"ExecutionStats","id":2}}},"PlanSummary":{"fields":{"indexesUsed":{"rule":"repeated","type":"google.protobuf.Struct","id":1}}},"ExecutionStats":{"fields":{"resultsReturned":{"type":"int64","id":1},"executionDuration":{"type":"google.protobuf.Duration","id":3},"readOperations":{"type":"int64","id":4},"debugStats":{"type":"google.protobuf.Struct","id":5}}},"Write":{"oneofs":{"operation":{"oneof":["update","delete","transform"]}},"fields":{"update":{"type":"Document","id":1},"delete":{"type":"string","id":2},"transform":{"type":"DocumentTransform","id":6},"updateMask":{"type":"DocumentMask","id":3},"updateTransforms":{"rule":"repeated","type":"DocumentTransform.FieldTransform","id":7},"currentDocument":{"type":"Precondition","id":4}}},"DocumentTransform":{"fields":{"document":{"type":"string","id":1},"fieldTransforms":{"rule":"repeated","type":"FieldTransform","id":2}},"nested":{"FieldTransform":{"oneofs":{"transformType":{"oneof":["setToServerValue","increment","maximum","minimum","appendMissingElements","removeAllFromArray"]}},"fields":{"fieldPath":{"type":"string","id":1},"setToServerValue":{"type":"ServerValue","id":2},"increment":{"type":"Value","id":3},"maximum":{"type":"Value","id":4},"minimum":{"type":"Value","id":5},"appendMissingElements":{"type":"ArrayValue","id":6},"removeAllFromArray":{"type":"ArrayValue","id":7}},"nested":{"ServerValue":{"values":{"SERVER_VALUE_UNSPECIFIED":0,"REQUEST_TIME":1}}}}}},"WriteResult":{"fields":{"updateTime":{"type":"google.protobuf.Timestamp","id":1},"transformResults":{"rule":"repeated","type":"Value","id":2}}},"DocumentChange":{"fields":{"document":{"type":"Document","id":1},"targetIds":{"rule":"repeated","type":"int32","id":5},"removedTargetIds":{"rule":"repeated","type":"int32","id":6}}},"DocumentDelete":{"fields":{"document":{"type":"string","id":1},"removedTargetIds":{"rule":"repeated","type":"int32","id":6},"readTime":{"type":"google.protobuf.Timestamp","id":4}}},"DocumentRemove":{"fields":{"document":{"type":"string","id":1},"removedTargetIds":{"rule":"repeated","type":"int32","id":2},"readTime":{"type":"google.protobuf.Timestamp","id":4}}},"ExistenceFilter":{"fields":{"targetId":{"type":"int32","id":1},"count":{"type":"int32","id":2},"unchangedNames":{"type":"BloomFilter","id":3}}}}}}},"api":{"options":{"go_package":"google.golang.org/genproto/googleapis/api/annotations;annotations","java_multiple_files":true,"java_outer_classname":"ResourceProto","java_package":"com.google.api","objc_class_prefix":"GAPI","cc_enable_arenas":true},"nested":{"fieldBehavior":{"rule":"repeated","type":"google.api.FieldBehavior","id":1052,"extend":"google.protobuf.FieldOptions","options":{"packed":false}},"FieldBehavior":{"values":{"FIELD_BEHAVIOR_UNSPECIFIED":0,"OPTIONAL":1,"REQUIRED":2,"OUTPUT_ONLY":3,"INPUT_ONLY":4,"IMMUTABLE":5,"UNORDERED_LIST":6,"NON_EMPTY_DEFAULT":7,"IDENTIFIER":8}},"http":{"type":"HttpRule","id":72295728,"extend":"google.protobuf.MethodOptions"},"Http":{"fields":{"rules":{"rule":"repeated","type":"HttpRule","id":1},"fullyDecodeReservedExpansion":{"type":"bool","id":2}}},"HttpRule":{"oneofs":{"pattern":{"oneof":["get","put","post","delete","patch","custom"]}},"fields":{"selector":{"type":"string","id":1},"get":{"type":"string","id":2},"put":{"type":"string","id":3},"post":{"type":"string","id":4},"delete":{"type":"string","id":5},"patch":{"type":"string","id":6},"custom":{"type":"CustomHttpPattern","id":8},"body":{"type":"string","id":7},"responseBody":{"type":"string","id":12},"additionalBindings":{"rule":"repeated","type":"HttpRule","id":11}}},"CustomHttpPattern":{"fields":{"kind":{"type":"string","id":1},"path":{"type":"string","id":2}}},"methodSignature":{"rule":"repeated","type":"string","id":1051,"extend":"google.protobuf.MethodOptions"},"defaultHost":{"type":"string","id":1049,"extend":"google.protobuf.ServiceOptions"},"oauthScopes":{"type":"string","id":1050,"extend":"google.protobuf.ServiceOptions"},"apiVersion":{"type":"string","id":525000001,"extend":"google.protobuf.ServiceOptions"},"CommonLanguageSettings":{"fields":{"referenceDocsUri":{"type":"string","id":1,"options":{"deprecated":true}},"destinations":{"rule":"repeated","type":"ClientLibraryDestination","id":2},"selectiveGapicGeneration":{"type":"SelectiveGapicGeneration","id":3}}},"ClientLibrarySettings":{"fields":{"version":{"type":"string","id":1},"launchStage":{"type":"LaunchStage","id":2},"restNumericEnums":{"type":"bool","id":3},"javaSettings":{"type":"JavaSettings","id":21},"cppSettings":{"type":"CppSettings","id":22},"phpSettings":{"type":"PhpSettings","id":23},"pythonSettings":{"type":"PythonSettings","id":24},"nodeSettings":{"type":"NodeSettings","id":25},"dotnetSettings":{"type":"DotnetSettings","id":26},"rubySettings":{"type":"RubySettings","id":27},"goSettings":{"type":"GoSettings","id":28}}},"Publishing":{"fields":{"methodSettings":{"rule":"repeated","type":"MethodSettings","id":2},"newIssueUri":{"type":"string","id":101},"documentationUri":{"type":"string","id":102},"apiShortName":{"type":"string","id":103},"githubLabel":{"type":"string","id":104},"codeownerGithubTeams":{"rule":"repeated","type":"string","id":105},"docTagPrefix":{"type":"string","id":106},"organization":{"type":"ClientLibraryOrganization","id":107},"librarySettings":{"rule":"repeated","type":"ClientLibrarySettings","id":109},"protoReferenceDocumentationUri":{"type":"string","id":110},"restReferenceDocumentationUri":{"type":"string","id":111}}},"JavaSettings":{"fields":{"libraryPackage":{"type":"string","id":1},"serviceClassNames":{"keyType":"string","type":"string","id":2},"common":{"type":"CommonLanguageSettings","id":3}}},"CppSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"PhpSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"PythonSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"experimentalFeatures":{"type":"ExperimentalFeatures","id":2}},"nested":{"ExperimentalFeatures":{"fields":{"restAsyncIoEnabled":{"type":"bool","id":1},"protobufPythonicTypesEnabled":{"type":"bool","id":2}}}}},"NodeSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"DotnetSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"renamedServices":{"keyType":"string","type":"string","id":2},"renamedResources":{"keyType":"string","type":"string","id":3},"ignoredResources":{"rule":"repeated","type":"string","id":4},"forcedNamespaceAliases":{"rule":"repeated","type":"string","id":5},"handwrittenSignatures":{"rule":"repeated","type":"string","id":6}}},"RubySettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"GoSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"renamedServices":{"keyType":"string","type":"string","id":2}}},"MethodSettings":{"fields":{"selector":{"type":"string","id":1},"longRunning":{"type":"LongRunning","id":2},"autoPopulatedFields":{"rule":"repeated","type":"string","id":3}},"nested":{"LongRunning":{"fields":{"initialPollDelay":{"type":"google.protobuf.Duration","id":1},"pollDelayMultiplier":{"type":"float","id":2},"maxPollDelay":{"type":"google.protobuf.Duration","id":3},"totalPollTimeout":{"type":"google.protobuf.Duration","id":4}}}}},"ClientLibraryOrganization":{"values":{"CLIENT_LIBRARY_ORGANIZATION_UNSPECIFIED":0,"CLOUD":1,"ADS":2,"PHOTOS":3,"STREET_VIEW":4,"SHOPPING":5,"GEO":6,"GENERATIVE_AI":7}},"ClientLibraryDestination":{"values":{"CLIENT_LIBRARY_DESTINATION_UNSPECIFIED":0,"GITHUB":10,"PACKAGE_MANAGER":20}},"SelectiveGapicGeneration":{"fields":{"methods":{"rule":"repeated","type":"string","id":1},"generateOmittedAsInternal":{"type":"bool","id":2}}},"LaunchStage":{"values":{"LAUNCH_STAGE_UNSPECIFIED":0,"UNIMPLEMENTED":6,"PRELAUNCH":7,"EARLY_ACCESS":1,"ALPHA":2,"BETA":3,"GA":4,"DEPRECATED":5}},"resourceReference":{"type":"google.api.ResourceReference","id":1055,"extend":"google.protobuf.FieldOptions"},"resourceDefinition":{"rule":"repeated","type":"google.api.ResourceDescriptor","id":1053,"extend":"google.protobuf.FileOptions"},"resource":{"type":"google.api.ResourceDescriptor","id":1053,"extend":"google.protobuf.MessageOptions"},"ResourceDescriptor":{"fields":{"type":{"type":"string","id":1},"pattern":{"rule":"repeated","type":"string","id":2},"nameField":{"type":"string","id":3},"history":{"type":"History","id":4},"plural":{"type":"string","id":5},"singular":{"type":"string","id":6},"style":{"rule":"repeated","type":"Style","id":10}},"nested":{"History":{"values":{"HISTORY_UNSPECIFIED":0,"ORIGINALLY_SINGLE_PATTERN":1,"FUTURE_MULTI_PATTERN":2}},"Style":{"values":{"STYLE_UNSPECIFIED":0,"DECLARATIVE_FRIENDLY":1}}}},"ResourceReference":{"fields":{"type":{"type":"string","id":1},"childType":{"type":"string","id":2}}}}},"protobuf":{"options":{"go_package":"google.golang.org/protobuf/types/descriptorpb","java_package":"com.google.protobuf","java_outer_classname":"DescriptorProtos","csharp_namespace":"Google.Protobuf.Reflection","objc_class_prefix":"GPB","cc_enable_arenas":true,"optimize_for":"SPEED"},"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"Edition":{"values":{"EDITION_UNKNOWN":0,"EDITION_PROTO2":998,"EDITION_PROTO3":999,"EDITION_2023":1000,"EDITION_2024":1001,"EDITION_1_TEST_ONLY":1,"EDITION_2_TEST_ONLY":2,"EDITION_99997_TEST_ONLY":99997,"EDITION_99998_TEST_ONLY":99998,"EDITION_99999_TEST_ONLY":99999,"EDITION_MAX":2147483647}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12},"edition":{"type":"Edition","id":14}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2},"options":{"type":"ExtensionRangeOptions","id":3}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"ExtensionRangeOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999},"declaration":{"rule":"repeated","type":"Declaration","id":2,"options":{"retention":"RETENTION_SOURCE"}},"features":{"type":"FeatureSet","id":50},"verification":{"type":"VerificationState","id":3,"options":{"default":"UNVERIFIED","retention":"RETENTION_SOURCE"}}},"extensions":[[1000,536870911]],"nested":{"Declaration":{"fields":{"number":{"type":"int32","id":1},"fullName":{"type":"string","id":2},"type":{"type":"string","id":3},"reserved":{"type":"bool","id":5},"repeated":{"type":"bool","id":6}},"reserved":[[4,4]]},"VerificationState":{"values":{"DECLARATION":0,"UNVERIFIED":1}}}},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8},"proto3Optional":{"type":"bool","id":17}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REPEATED":3,"LABEL_REQUIRED":2}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3},"reservedRange":{"rule":"repeated","type":"EnumReservedRange","id":4},"reservedName":{"rule":"repeated","type":"string","id":5}},"nested":{"EnumReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5,"options":{"default":false}},"serverStreaming":{"type":"bool","id":6,"options":{"default":false}}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10,"options":{"default":false}},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27,"options":{"default":false}},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16,"options":{"default":false}},"javaGenericServices":{"type":"bool","id":17,"options":{"default":false}},"pyGenericServices":{"type":"bool","id":18,"options":{"default":false}},"deprecated":{"type":"bool","id":23,"options":{"default":false}},"ccEnableArenas":{"type":"bool","id":31,"options":{"default":true}},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"swiftPrefix":{"type":"string","id":39},"phpClassPrefix":{"type":"string","id":40},"phpNamespace":{"type":"string","id":41},"phpMetadataNamespace":{"type":"string","id":44},"rubyPackage":{"type":"string","id":45},"features":{"type":"FeatureSet","id":50},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[42,42],[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1,"options":{"default":false}},"noStandardDescriptorAccessor":{"type":"bool","id":2,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"mapEntry":{"type":"bool","id":7},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":11,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":12},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[5,5],[6,6],[8,8],[9,9]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5,"options":{"default":false}},"unverifiedLazy":{"type":"bool","id":15,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"weak":{"type":"bool","id":10,"options":{"default":false}},"debugRedact":{"type":"bool","id":16,"options":{"default":false}},"retention":{"type":"OptionRetention","id":17},"targets":{"rule":"repeated","type":"OptionTargetType","id":19,"options":{"packed":false}},"editionDefaults":{"rule":"repeated","type":"EditionDefault","id":20},"features":{"type":"FeatureSet","id":21},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[18,18]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}},"OptionRetention":{"values":{"RETENTION_UNKNOWN":0,"RETENTION_RUNTIME":1,"RETENTION_SOURCE":2}},"OptionTargetType":{"values":{"TARGET_TYPE_UNKNOWN":0,"TARGET_TYPE_FILE":1,"TARGET_TYPE_EXTENSION_RANGE":2,"TARGET_TYPE_MESSAGE":3,"TARGET_TYPE_FIELD":4,"TARGET_TYPE_ONEOF":5,"TARGET_TYPE_ENUM":6,"TARGET_TYPE_ENUM_ENTRY":7,"TARGET_TYPE_SERVICE":8,"TARGET_TYPE_METHOD":9}},"EditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"value":{"type":"string","id":2}}}}},"OneofOptions":{"fields":{"features":{"type":"FeatureSet","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":6,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[5,5]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1,"options":{"default":false}},"features":{"type":"FeatureSet","id":2},"debugRedact":{"type":"bool","id":3,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"features":{"type":"FeatureSet","id":34},"deprecated":{"type":"bool","id":33,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33,"options":{"default":false}},"idempotencyLevel":{"type":"IdempotencyLevel","id":34,"options":{"default":"IDEMPOTENCY_UNKNOWN"}},"features":{"type":"FeatureSet","id":35},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"nested":{"IdempotencyLevel":{"values":{"IDEMPOTENCY_UNKNOWN":0,"NO_SIDE_EFFECTS":1,"IDEMPOTENT":2}}}},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"FeatureSet":{"fields":{"fieldPresence":{"type":"FieldPresence","id":1,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_2023","edition_defaults.value":"EXPLICIT"}},"enumType":{"type":"EnumType","id":2,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"OPEN"}},"repeatedFieldEncoding":{"type":"RepeatedFieldEncoding","id":3,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"PACKED"}},"utf8Validation":{"type":"Utf8Validation","id":4,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"VERIFY"}},"messageEncoding":{"type":"MessageEncoding","id":5,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO2","edition_defaults.value":"LENGTH_PREFIXED"}},"jsonFormat":{"type":"JsonFormat","id":6,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"ALLOW"}}},"extensions":[[1000,1000],[1001,1001],[1002,1002],[9995,9999],[10000,10000]],"reserved":[[999,999]],"nested":{"FieldPresence":{"values":{"FIELD_PRESENCE_UNKNOWN":0,"EXPLICIT":1,"IMPLICIT":2,"LEGACY_REQUIRED":3}},"EnumType":{"values":{"ENUM_TYPE_UNKNOWN":0,"OPEN":1,"CLOSED":2}},"RepeatedFieldEncoding":{"values":{"REPEATED_FIELD_ENCODING_UNKNOWN":0,"PACKED":1,"EXPANDED":2}},"Utf8Validation":{"values":{"UTF8_VALIDATION_UNKNOWN":0,"VERIFY":2,"NONE":3}},"MessageEncoding":{"values":{"MESSAGE_ENCODING_UNKNOWN":0,"LENGTH_PREFIXED":1,"DELIMITED":2}},"JsonFormat":{"values":{"JSON_FORMAT_UNKNOWN":0,"ALLOW":1,"LEGACY_BEST_EFFORT":2}}}},"FeatureSetDefaults":{"fields":{"defaults":{"rule":"repeated","type":"FeatureSetEditionDefault","id":1},"minimumEdition":{"type":"Edition","id":4},"maximumEdition":{"type":"Edition","id":5}},"nested":{"FeatureSetEditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"features":{"type":"FeatureSet","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4},"semantic":{"type":"Semantic","id":5}},"nested":{"Semantic":{"values":{"NONE":0,"SET":1,"ALIAS":2}}}}}},"Struct":{"fields":{"fields":{"keyType":"string","type":"Value","id":1}}},"Value":{"oneofs":{"kind":{"oneof":["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},"fields":{"nullValue":{"type":"NullValue","id":1},"numberValue":{"type":"double","id":2},"stringValue":{"type":"string","id":3},"boolValue":{"type":"bool","id":4},"structValue":{"type":"Struct","id":5},"listValue":{"type":"ListValue","id":6}}},"NullValue":{"values":{"NULL_VALUE":0}},"ListValue":{"fields":{"values":{"rule":"repeated","type":"Value","id":1}}},"Timestamp":{"fields":{"seconds":{"type":"int64","id":1},"nanos":{"type":"int32","id":2}}},"Duration":{"fields":{"seconds":{"type":"int64","id":1},"nanos":{"type":"int32","id":2}}},"DoubleValue":{"fields":{"value":{"type":"double","id":1}}},"FloatValue":{"fields":{"value":{"type":"float","id":1}}},"Int64Value":{"fields":{"value":{"type":"int64","id":1}}},"UInt64Value":{"fields":{"value":{"type":"uint64","id":1}}},"Int32Value":{"fields":{"value":{"type":"int32","id":1}}},"UInt32Value":{"fields":{"value":{"type":"uint32","id":1}}},"BoolValue":{"fields":{"value":{"type":"bool","id":1}}},"StringValue":{"fields":{"value":{"type":"string","id":1}}},"BytesValue":{"fields":{"value":{"type":"bytes","id":1}}},"Empty":{"fields":{}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"FieldMask":{"fields":{"paths":{"rule":"repeated","type":"string","id":1}}}}},"type":{"options":{"cc_enable_arenas":true,"go_package":"google.golang.org/genproto/googleapis/type/dayofweek;dayofweek","java_multiple_files":true,"java_outer_classname":"DayOfWeekProto","java_package":"com.google.type","objc_class_prefix":"GTP"},"nested":{"LatLng":{"fields":{"latitude":{"type":"double","id":1},"longitude":{"type":"double","id":2}}},"DayOfWeek":{"values":{"DAY_OF_WEEK_UNSPECIFIED":0,"MONDAY":1,"TUESDAY":2,"WEDNESDAY":3,"THURSDAY":4,"FRIDAY":5,"SATURDAY":6,"SUNDAY":7}}}},"rpc":{"options":{"cc_enable_arenas":true,"go_package":"google.golang.org/genproto/googleapis/rpc/status;status","java_multiple_files":true,"java_outer_classname":"StatusProto","java_package":"com.google.rpc","objc_class_prefix":"RPC"},"nested":{"Status":{"fields":{"code":{"type":"int32","id":1},"message":{"type":"string","id":2},"details":{"rule":"repeated","type":"google.protobuf.Any","id":3}}}}}}}}'),require$$1$1={options:options$1,nested:nested$1};var hasRequiredFirestore_client$1;function requireFirestore_client$1(){if(hasRequiredFirestore_client$1)return firestore_client$1;hasRequiredFirestore_client$1=1;var e={},t={};Object.defineProperty(firestore_client$1,"__esModule",{value:!0}),firestore_client$1.FirestoreClient=void 0;const s=require$$1$3,p=require$$1$1,g=requireLogger(),m=require$$19,d=require$$33.version;class l{constructor(o,h){var v,_,y,w,T;this._terminated=!1,this._stubFailed=!1,this.descriptors={page:{},stream:{},longrunning:{},batching:{}};const I=this.constructor;if(o?.universe_domain&&o?.universeDomain&&o?.universe_domain!==o?.universeDomain)throw new Error("Please set either universe_domain or universeDomain, but not both.");const O=typeof e=="object"&&typeof t=="object"?t.GOOGLE_CLOUD_UNIVERSE_DOMAIN:void 0;this._universeDomain=(y=(_=(v=o?.universeDomain)!==null&&v!==void 0?v:o?.universe_domain)!==null&&_!==void 0?_:O)!==null&&y!==void 0?y:"googleapis.com",this._servicePath="firestore."+this._universeDomain;const E=o?.servicePath||o?.apiEndpoint||this._servicePath;this._providedCustomServicePath=!!(o?.servicePath||o?.apiEndpoint);const C=o?.port||I.port,x=(w=o?.clientConfig)!==null&&w!==void 0?w:{},j=(T=o?.fallback)!==null&&T!==void 0?T:typeof window<"u"&&typeof window?.fetch=="function";o=Object.assign({servicePath:E,port:C,clientConfig:x,fallback:j},o),o.numericEnums=!0,E!==this._servicePath&&!("scopes"in o)&&(o.scopes=I.scopes),h||(h=requireFallback()),this._gaxModule=o.fallback?h.fallback:h,this._gaxGrpc=new this._gaxModule.GrpcClient(o),this._opts=o,this.auth=this._gaxGrpc.auth,this.auth.useJWTAccessWithScope=!0,this.auth.defaultServicePath=this._servicePath,E===this._servicePath&&(this.auth.defaultScopes=I.scopes),this.locationsClient=new this._gaxModule.LocationsClient(this._gaxGrpc,o);const D=[`gax/${this._gaxModule.version}`,`gapic/${d}`];typeof e=="object"&&"versions"in e?D.push(`gl-node/${e.versions.node}`):D.push(`gl-web/${this._gaxModule.version}`),o.fallback?D.push(`rest/${this._gaxGrpc.grpcVersion}`):D.push(`grpc/${this._gaxGrpc.grpcVersion}`),o.libName&&o.libVersion&&D.push(`${o.libName}/${o.libVersion}`),this._protos=this._gaxGrpc.loadProtoJSON(p),this.descriptors.page={listDocuments:new this._gaxModule.PageDescriptor("pageToken","nextPageToken","documents"),partitionQuery:new this._gaxModule.PageDescriptor("pageToken","nextPageToken","partitions"),listCollectionIds:new this._gaxModule.PageDescriptor("pageToken","nextPageToken","collectionIds")},this.descriptors.stream={batchGetDocuments:new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.SERVER_STREAMING,!!o.fallback,!!o.gaxServerStreamingRetries),runQuery:new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.SERVER_STREAMING,!!o.fallback,!!o.gaxServerStreamingRetries),runAggregationQuery:new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.SERVER_STREAMING,!!o.fallback,!!o.gaxServerStreamingRetries),write:new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.BIDI_STREAMING,!!o.fallback,!!o.gaxServerStreamingRetries),listen:new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.BIDI_STREAMING,!!o.fallback,!!o.gaxServerStreamingRetries)},this._defaults=this._gaxGrpc.constructSettings("google.firestore.v1.Firestore",m,o.clientConfig||{},{"x-goog-api-client":D.join(" ")}),this.innerApiCalls={},this.warn=this._gaxModule.warn}initialize(){if(this.firestoreStub&&!this._stubFailed)return this.firestoreStub;this._stubFailed=!1,this.firestoreStub=this._gaxGrpc.createStub(this._opts.fallback?this._protos.lookupService("google.firestore.v1.Firestore"):this._protos.google.firestore.v1.Firestore,this._opts,this._providedCustomServicePath);const o=["getDocument","listDocuments","updateDocument","deleteDocument","batchGetDocuments","beginTransaction","commit","rollback","runQuery","runAggregationQuery","partitionQuery","write","listen","listCollectionIds","batchWrite","createDocument"];for(const h of o){const v=this.firestoreStub.then(w=>(...T)=>{if(this._terminated){if(h in this.descriptors.stream){const O=new s.PassThrough({objectMode:!0});return setImmediate(()=>{O.emit("error",new this._gaxModule.GoogleError("The client has already been closed."))}),O}return Promise.reject("The client has already been closed.")}return w[h].apply(w,T)},w=>(this._stubFailed=!0,(0,g.logger)("initialize",null,"Failed to create the gax client stub.",w),()=>{throw w})),_=this.descriptors.page[h]||this.descriptors.stream[h]||void 0,y=this._gaxModule.createApiCall(v,this._defaults[h],_,this._opts.fallback);this.innerApiCalls[h]=y}return this.firestoreStub}static get servicePath(){return typeof e=="object"&&typeof e.emitWarning=="function"&&e.emitWarning("Static servicePath is deprecated, please use the instance method instead.","DeprecationWarning"),"firestore.googleapis.com"}static get apiEndpoint(){return typeof e=="object"&&typeof e.emitWarning=="function"&&e.emitWarning("Static apiEndpoint is deprecated, please use the instance method instead.","DeprecationWarning"),"firestore.googleapis.com"}get apiEndpoint(){return this._servicePath}get universeDomain(){return this._universeDomain}static get port(){return 443}static get scopes(){return["https://www.googleapis.com/auth/cloud-platform","https://www.googleapis.com/auth/datastore"]}getProjectId(o){if(o){this.auth.getProjectId(o);return}return this.auth.getProjectId()}getDocument(o,h,v){var _;o=o||{};let y;return typeof h=="function"&&v===void 0?(v=h,y={}):y=h,y=y||{},y.otherArgs=y.otherArgs||{},y.otherArgs.headers=y.otherArgs.headers||{},y.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(_=o.name)!==null&&_!==void 0?_:""}),this.initialize(),this.innerApiCalls.getDocument(o,y,v)}updateDocument(o,h,v){var _;o=o||{};let y;return typeof h=="function"&&v===void 0?(v=h,y={}):y=h,y=y||{},y.otherArgs=y.otherArgs||{},y.otherArgs.headers=y.otherArgs.headers||{},y.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({"document.name":(_=o.document.name)!==null&&_!==void 0?_:""}),this.initialize(),this.innerApiCalls.updateDocument(o,y,v)}deleteDocument(o,h,v){var _;o=o||{};let y;return typeof h=="function"&&v===void 0?(v=h,y={}):y=h,y=y||{},y.otherArgs=y.otherArgs||{},y.otherArgs.headers=y.otherArgs.headers||{},y.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(_=o.name)!==null&&_!==void 0?_:""}),this.initialize(),this.innerApiCalls.deleteDocument(o,y,v)}beginTransaction(o,h,v){var _;o=o||{};let y;return typeof h=="function"&&v===void 0?(v=h,y={}):y=h,y=y||{},y.otherArgs=y.otherArgs||{},y.otherArgs.headers=y.otherArgs.headers||{},y.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({database:(_=o.database)!==null&&_!==void 0?_:""}),this.initialize(),this.innerApiCalls.beginTransaction(o,y,v)}commit(o,h,v){var _;o=o||{};let y;return typeof h=="function"&&v===void 0?(v=h,y={}):y=h,y=y||{},y.otherArgs=y.otherArgs||{},y.otherArgs.headers=y.otherArgs.headers||{},y.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({database:(_=o.database)!==null&&_!==void 0?_:""}),this.initialize(),this.innerApiCalls.commit(o,y,v)}rollback(o,h,v){var _;o=o||{};let y;return typeof h=="function"&&v===void 0?(v=h,y={}):y=h,y=y||{},y.otherArgs=y.otherArgs||{},y.otherArgs.headers=y.otherArgs.headers||{},y.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({database:(_=o.database)!==null&&_!==void 0?_:""}),this.initialize(),this.innerApiCalls.rollback(o,y,v)}batchWrite(o,h,v){var _;o=o||{};let y;return typeof h=="function"&&v===void 0?(v=h,y={}):y=h,y=y||{},y.otherArgs=y.otherArgs||{},y.otherArgs.headers=y.otherArgs.headers||{},y.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({database:(_=o.database)!==null&&_!==void 0?_:""}),this.initialize(),this.innerApiCalls.batchWrite(o,y,v)}createDocument(o,h,v){var _,y;o=o||{};let w;return typeof h=="function"&&v===void 0?(v=h,w={}):w=h,w=w||{},w.otherArgs=w.otherArgs||{},w.otherArgs.headers=w.otherArgs.headers||{},w.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(_=o.parent)!==null&&_!==void 0?_:"",collection_id:(y=o.collectionId)!==null&&y!==void 0?y:""}),this.initialize(),this.innerApiCalls.createDocument(o,w,v)}batchGetDocuments(o,h){var v;return o=o||{},h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({database:(v=o.database)!==null&&v!==void 0?v:""}),this.initialize(),this.innerApiCalls.batchGetDocuments(o,h)}runQuery(o,h){var v;return o=o||{},h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(v=o.parent)!==null&&v!==void 0?v:""}),this.initialize(),this.innerApiCalls.runQuery(o,h)}runAggregationQuery(o,h){var v;return o=o||{},h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(v=o.parent)!==null&&v!==void 0?v:""}),this.initialize(),this.innerApiCalls.runAggregationQuery(o,h)}write(o){return this.initialize(),this.innerApiCalls.write(null,o)}listen(o){return this.initialize(),this.innerApiCalls.listen(null,o)}listDocuments(o,h,v){var _,y;o=o||{};let w;return typeof h=="function"&&v===void 0?(v=h,w={}):w=h,w=w||{},w.otherArgs=w.otherArgs||{},w.otherArgs.headers=w.otherArgs.headers||{},w.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(_=o.parent)!==null&&_!==void 0?_:"",collection_id:(y=o.collectionId)!==null&&y!==void 0?y:""}),this.initialize(),this.innerApiCalls.listDocuments(o,w,v)}listDocumentsStream(o,h){var v,_;o=o||{},h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(v=o.parent)!==null&&v!==void 0?v:"",collection_id:(_=o.collectionId)!==null&&_!==void 0?_:""});const w=this._defaults.listDocuments.merge(h);return this.initialize(),this.descriptors.page.listDocuments.createStream(this.innerApiCalls.listDocuments,o,w)}listDocumentsAsync(o,h){var v,_;o=o||{},h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(v=o.parent)!==null&&v!==void 0?v:"",collection_id:(_=o.collectionId)!==null&&_!==void 0?_:""});const w=this._defaults.listDocuments.merge(h);return this.initialize(),this.descriptors.page.listDocuments.asyncIterate(this.innerApiCalls.listDocuments,o,w)}partitionQuery(o,h,v){var _;o=o||{};let y;return typeof h=="function"&&v===void 0?(v=h,y={}):y=h,y=y||{},y.otherArgs=y.otherArgs||{},y.otherArgs.headers=y.otherArgs.headers||{},y.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(_=o.parent)!==null&&_!==void 0?_:""}),this.initialize(),this.innerApiCalls.partitionQuery(o,y,v)}partitionQueryStream(o,h){var v;o=o||{},h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(v=o.parent)!==null&&v!==void 0?v:""});const y=this._defaults.partitionQuery.merge(h);return this.initialize(),this.descriptors.page.partitionQuery.createStream(this.innerApiCalls.partitionQuery,o,y)}partitionQueryAsync(o,h){var v;o=o||{},h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(v=o.parent)!==null&&v!==void 0?v:""});const y=this._defaults.partitionQuery.merge(h);return this.initialize(),this.descriptors.page.partitionQuery.asyncIterate(this.innerApiCalls.partitionQuery,o,y)}listCollectionIds(o,h,v){var _;o=o||{};let y;return typeof h=="function"&&v===void 0?(v=h,y={}):y=h,y=y||{},y.otherArgs=y.otherArgs||{},y.otherArgs.headers=y.otherArgs.headers||{},y.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(_=o.parent)!==null&&_!==void 0?_:""}),this.initialize(),this.innerApiCalls.listCollectionIds(o,y,v)}listCollectionIdsStream(o,h){var v;o=o||{},h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(v=o.parent)!==null&&v!==void 0?v:""});const y=this._defaults.listCollectionIds.merge(h);return this.initialize(),this.descriptors.page.listCollectionIds.createStream(this.innerApiCalls.listCollectionIds,o,y)}listCollectionIdsAsync(o,h){var v;o=o||{},h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(v=o.parent)!==null&&v!==void 0?v:""});const y=this._defaults.listCollectionIds.merge(h);return this.initialize(),this.descriptors.page.listCollectionIds.asyncIterate(this.innerApiCalls.listCollectionIds,o,y)}getLocation(o,h,v){return this.locationsClient.getLocation(o,h,v)}listLocationsAsync(o,h){return this.locationsClient.listLocationsAsync(o,h)}close(){return this.firestoreStub&&!this._terminated?this.firestoreStub.then(o=>{this._terminated=!0,o.close(),this.locationsClient.close()}):Promise.resolve()}}return firestore_client$1.FirestoreClient=l,firestore_client$1}var hasRequiredV1;function requireV1(){return hasRequiredV1||(hasRequiredV1=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FirestoreAdminClient=t.FirestoreClient=void 0;const s=requireFirestore_admin_client();Object.defineProperty(t,"FirestoreAdminClient",{enumerable:!0,get:function(){return s.FirestoreAdminClient}});const p=requireFirestore_client$1();Object.defineProperty(t,"FirestoreClient",{enumerable:!0,get:function(){return p.FirestoreClient}});const g=e.exports;e.exports=p.FirestoreClient,e.exports=Object.assign(e.exports,g)})(v1,v1.exports)),v1.exports}var hasRequiredEnabledTraceUtil;function requireEnabledTraceUtil(){if(hasRequiredEnabledTraceUtil)return enabledTraceUtil;hasRequiredEnabledTraceUtil=1,Object.defineProperty(enabledTraceUtil,"__esModule",{value:!0}),enabledTraceUtil.EnabledTraceUtil=void 0;const e=require$$0$1,t=requireSpan(),s=requireTraceUtil(),p=require$$19,g=requireV1(),m=requirePath(),d=requireSrc(),l=p.interfaces["google.firestore.v1.Firestore"];class a{constructor(h){var v,_,y,w,T,I,O,E,C,x,j,D,k,q,G,$;let W=(v=h.openTelemetry)===null||v===void 0?void 0:v.tracerProvider;if(!W){const{trace:ue}=require$$0$1;W=ue.getTracerProvider()}this.tracerProvider=W;const K=require$$33.version,z=require$$33.name;try{this.tracer=this.tracerProvider.getTracer(z,K)}catch{throw new Error("The object provided for 'tracerProvider' does not conform to the TracerProvider interface.")}this.settingsAttributes={},this.settingsAttributes["otel.scope.name"]=z,this.settingsAttributes["otel.scope.version"]=K,h.projectId&&(this.settingsAttributes[`${s.ATTRIBUTE_SETTINGS_PREFIX}.project_id`]=h.projectId),this.settingsAttributes[`${s.ATTRIBUTE_SETTINGS_PREFIX}.database_id`]=h.databaseId||m.DEFAULT_DATABASE_ID;const Q=(y=(_=h.servicePath)!==null&&_!==void 0?_:h.host)!==null&&y!==void 0?y:"firestore.googleapis.com",Y=(w=h.port)!==null&&w!==void 0?w:g.FirestoreClient.port;this.settingsAttributes[`${s.ATTRIBUTE_SETTINGS_PREFIX}.host`]=`${Q}:${Y}`,h.preferRest!==void 0&&(this.settingsAttributes[`${s.ATTRIBUTE_SETTINGS_PREFIX}.prefer_REST`]=h.preferRest),this.settingsAttributes[`${s.ATTRIBUTE_SETTINGS_PREFIX}.max_idle_channels`]=(T=h.maxIdleChannels)!==null&&T!==void 0?T:d.DEFAULT_MAX_IDLE_CHANNELS;const te=l.retry_params.default,ae=(C=(E=(O=(I=h.clientConfig)===null||I===void 0?void 0:I.interfaces)===null||O===void 0?void 0:O["google.firestore.v1.Firestore"])===null||E===void 0?void 0:E.retry_params)===null||C===void 0?void 0:C.default;this.settingsAttributes[`${s.ATTRIBUTE_SETTINGS_PREFIX}.initial_retry_delay`]=this.millisToSecondString((x=ae?.initial_retry_delay_millis)!==null&&x!==void 0?x:te.initial_retry_delay_millis),this.settingsAttributes[`${s.ATTRIBUTE_SETTINGS_PREFIX}.initial_rpc_timeout`]=this.millisToSecondString((j=ae?.initial_rpc_timeout_millis)!==null&&j!==void 0?j:te.initial_rpc_timeout_millis),this.settingsAttributes[`${s.ATTRIBUTE_SETTINGS_PREFIX}.total_timeout`]=this.millisToSecondString((D=ae?.total_timeout_millis)!==null&&D!==void 0?D:te.total_timeout_millis),this.settingsAttributes[`${s.ATTRIBUTE_SETTINGS_PREFIX}.max_retry_delay`]=this.millisToSecondString((k=ae?.max_retry_delay_millis)!==null&&k!==void 0?k:te.max_retry_delay_millis),this.settingsAttributes[`${s.ATTRIBUTE_SETTINGS_PREFIX}.max_rpc_timeout`]=this.millisToSecondString((q=ae?.max_rpc_timeout_millis)!==null&&q!==void 0?q:te.max_rpc_timeout_millis),this.settingsAttributes[`${s.ATTRIBUTE_SETTINGS_PREFIX}.retry_delay_multiplier`]=(G=ae?.retry_delay_multiplier.toString())!==null&&G!==void 0?G:te.retry_delay_multiplier.toString(),this.settingsAttributes[`${s.ATTRIBUTE_SETTINGS_PREFIX}.rpc_timeout_multiplier`]=($=ae?.rpc_timeout_multiplier.toString())!==null&&$!==void 0?$:te.rpc_timeout_multiplier.toString()}recordProjectId(h){this.settingsAttributes[`${s.ATTRIBUTE_SETTINGS_PREFIX}.project_id`]=h,this.currentSpan().setAttributes(this.settingsAttributes)}millisToSecondString(h){return`${h/1e3}s`}endSpan(h,v){h.setStatus({code:e.SpanStatusCode.ERROR,message:v.message}),h.recordException(v),h.end()}startActiveSpan(h,v,_){return this.tracer.startActiveSpan(h,{attributes:_},y=>{this.addCommonAttributes(y);try{let w=v(new t.Span(y));return w instanceof Promise?w=w.then(T=>(y.end(),T)).catch(T=>(this.endSpan(y,T),Promise.reject(T))):y.end(),w}catch(w){throw this.endSpan(y,w),w}})}startSpan(h){const v=this.tracer.startSpan(h,void 0,e.context.active());return this.addCommonAttributes(v),new t.Span(v)}currentSpan(){return new t.Span(e.trace.getActiveSpan())}addCommonAttributes(h){h.setAttributes(this.settingsAttributes)}}return enabledTraceUtil.EnabledTraceUtil=a,enabledTraceUtil}var v1beta1={exports:{}},firestore_client={};const options={syntax:"proto3"},nested=JSON.parse('{"google":{"nested":{"protobuf":{"options":{"go_package":"google.golang.org/protobuf/types/descriptorpb","java_package":"com.google.protobuf","java_outer_classname":"DescriptorProtos","csharp_namespace":"Google.Protobuf.Reflection","objc_class_prefix":"GPB","cc_enable_arenas":true,"optimize_for":"SPEED"},"nested":{"Timestamp":{"fields":{"seconds":{"type":"int64","id":1},"nanos":{"type":"int32","id":2}}},"Struct":{"fields":{"fields":{"keyType":"string","type":"Value","id":1}}},"Value":{"oneofs":{"kind":{"oneof":["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},"fields":{"nullValue":{"type":"NullValue","id":1},"numberValue":{"type":"double","id":2},"stringValue":{"type":"string","id":3},"boolValue":{"type":"bool","id":4},"structValue":{"type":"Struct","id":5},"listValue":{"type":"ListValue","id":6}}},"NullValue":{"values":{"NULL_VALUE":0}},"ListValue":{"fields":{"values":{"rule":"repeated","type":"Value","id":1}}},"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"Edition":{"values":{"EDITION_UNKNOWN":0,"EDITION_PROTO2":998,"EDITION_PROTO3":999,"EDITION_2023":1000,"EDITION_2024":1001,"EDITION_1_TEST_ONLY":1,"EDITION_2_TEST_ONLY":2,"EDITION_99997_TEST_ONLY":99997,"EDITION_99998_TEST_ONLY":99998,"EDITION_99999_TEST_ONLY":99999,"EDITION_MAX":2147483647}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12},"edition":{"type":"Edition","id":14}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2},"options":{"type":"ExtensionRangeOptions","id":3}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"ExtensionRangeOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999},"declaration":{"rule":"repeated","type":"Declaration","id":2,"options":{"retention":"RETENTION_SOURCE"}},"features":{"type":"FeatureSet","id":50},"verification":{"type":"VerificationState","id":3,"options":{"default":"UNVERIFIED","retention":"RETENTION_SOURCE"}}},"extensions":[[1000,536870911]],"nested":{"Declaration":{"fields":{"number":{"type":"int32","id":1},"fullName":{"type":"string","id":2},"type":{"type":"string","id":3},"reserved":{"type":"bool","id":5},"repeated":{"type":"bool","id":6}},"reserved":[[4,4]]},"VerificationState":{"values":{"DECLARATION":0,"UNVERIFIED":1}}}},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8},"proto3Optional":{"type":"bool","id":17}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REPEATED":3,"LABEL_REQUIRED":2}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3},"reservedRange":{"rule":"repeated","type":"EnumReservedRange","id":4},"reservedName":{"rule":"repeated","type":"string","id":5}},"nested":{"EnumReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5,"options":{"default":false}},"serverStreaming":{"type":"bool","id":6,"options":{"default":false}}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10,"options":{"default":false}},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27,"options":{"default":false}},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16,"options":{"default":false}},"javaGenericServices":{"type":"bool","id":17,"options":{"default":false}},"pyGenericServices":{"type":"bool","id":18,"options":{"default":false}},"deprecated":{"type":"bool","id":23,"options":{"default":false}},"ccEnableArenas":{"type":"bool","id":31,"options":{"default":true}},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"swiftPrefix":{"type":"string","id":39},"phpClassPrefix":{"type":"string","id":40},"phpNamespace":{"type":"string","id":41},"phpMetadataNamespace":{"type":"string","id":44},"rubyPackage":{"type":"string","id":45},"features":{"type":"FeatureSet","id":50},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[42,42],[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1,"options":{"default":false}},"noStandardDescriptorAccessor":{"type":"bool","id":2,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"mapEntry":{"type":"bool","id":7},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":11,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":12},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[5,5],[6,6],[8,8],[9,9]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5,"options":{"default":false}},"unverifiedLazy":{"type":"bool","id":15,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"weak":{"type":"bool","id":10,"options":{"default":false}},"debugRedact":{"type":"bool","id":16,"options":{"default":false}},"retention":{"type":"OptionRetention","id":17},"targets":{"rule":"repeated","type":"OptionTargetType","id":19,"options":{"packed":false}},"editionDefaults":{"rule":"repeated","type":"EditionDefault","id":20},"features":{"type":"FeatureSet","id":21},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[18,18]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}},"OptionRetention":{"values":{"RETENTION_UNKNOWN":0,"RETENTION_RUNTIME":1,"RETENTION_SOURCE":2}},"OptionTargetType":{"values":{"TARGET_TYPE_UNKNOWN":0,"TARGET_TYPE_FILE":1,"TARGET_TYPE_EXTENSION_RANGE":2,"TARGET_TYPE_MESSAGE":3,"TARGET_TYPE_FIELD":4,"TARGET_TYPE_ONEOF":5,"TARGET_TYPE_ENUM":6,"TARGET_TYPE_ENUM_ENTRY":7,"TARGET_TYPE_SERVICE":8,"TARGET_TYPE_METHOD":9}},"EditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"value":{"type":"string","id":2}}}}},"OneofOptions":{"fields":{"features":{"type":"FeatureSet","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":6,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[5,5]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1,"options":{"default":false}},"features":{"type":"FeatureSet","id":2},"debugRedact":{"type":"bool","id":3,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"features":{"type":"FeatureSet","id":34},"deprecated":{"type":"bool","id":33,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33,"options":{"default":false}},"idempotencyLevel":{"type":"IdempotencyLevel","id":34,"options":{"default":"IDEMPOTENCY_UNKNOWN"}},"features":{"type":"FeatureSet","id":35},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"nested":{"IdempotencyLevel":{"values":{"IDEMPOTENCY_UNKNOWN":0,"NO_SIDE_EFFECTS":1,"IDEMPOTENT":2}}}},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"FeatureSet":{"fields":{"fieldPresence":{"type":"FieldPresence","id":1,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_2023","edition_defaults.value":"EXPLICIT"}},"enumType":{"type":"EnumType","id":2,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"OPEN"}},"repeatedFieldEncoding":{"type":"RepeatedFieldEncoding","id":3,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"PACKED"}},"utf8Validation":{"type":"Utf8Validation","id":4,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"VERIFY"}},"messageEncoding":{"type":"MessageEncoding","id":5,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO2","edition_defaults.value":"LENGTH_PREFIXED"}},"jsonFormat":{"type":"JsonFormat","id":6,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"ALLOW"}}},"extensions":[[1000,1000],[1001,1001],[1002,1002],[9995,9999],[10000,10000]],"reserved":[[999,999]],"nested":{"FieldPresence":{"values":{"FIELD_PRESENCE_UNKNOWN":0,"EXPLICIT":1,"IMPLICIT":2,"LEGACY_REQUIRED":3}},"EnumType":{"values":{"ENUM_TYPE_UNKNOWN":0,"OPEN":1,"CLOSED":2}},"RepeatedFieldEncoding":{"values":{"REPEATED_FIELD_ENCODING_UNKNOWN":0,"PACKED":1,"EXPANDED":2}},"Utf8Validation":{"values":{"UTF8_VALIDATION_UNKNOWN":0,"VERIFY":2,"NONE":3}},"MessageEncoding":{"values":{"MESSAGE_ENCODING_UNKNOWN":0,"LENGTH_PREFIXED":1,"DELIMITED":2}},"JsonFormat":{"values":{"JSON_FORMAT_UNKNOWN":0,"ALLOW":1,"LEGACY_BEST_EFFORT":2}}}},"FeatureSetDefaults":{"fields":{"defaults":{"rule":"repeated","type":"FeatureSetEditionDefault","id":1},"minimumEdition":{"type":"Edition","id":4},"maximumEdition":{"type":"Edition","id":5}},"nested":{"FeatureSetEditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"features":{"type":"FeatureSet","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4},"semantic":{"type":"Semantic","id":5}},"nested":{"Semantic":{"values":{"NONE":0,"SET":1,"ALIAS":2}}}}}},"Duration":{"fields":{"seconds":{"type":"int64","id":1},"nanos":{"type":"int32","id":2}}},"DoubleValue":{"fields":{"value":{"type":"double","id":1}}},"FloatValue":{"fields":{"value":{"type":"float","id":1}}},"Int64Value":{"fields":{"value":{"type":"int64","id":1}}},"UInt64Value":{"fields":{"value":{"type":"uint64","id":1}}},"Int32Value":{"fields":{"value":{"type":"int32","id":1}}},"UInt32Value":{"fields":{"value":{"type":"uint32","id":1}}},"BoolValue":{"fields":{"value":{"type":"bool","id":1}}},"StringValue":{"fields":{"value":{"type":"string","id":1}}},"BytesValue":{"fields":{"value":{"type":"bytes","id":1}}},"Empty":{"fields":{}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"FieldMask":{"fields":{"paths":{"rule":"repeated","type":"string","id":1}}}}},"firestore":{"nested":{"v1beta1":{"options":{"csharp_namespace":"Google.Cloud.Firestore.V1Beta1","go_package":"cloud.google.com/go/firestore/apiv1beta1/firestorepb;firestorepb","java_multiple_files":true,"java_outer_classname":"UndeliverableFirstGenEventProto","java_package":"com.google.firestore.v1beta1","objc_class_prefix":"GCFS","php_namespace":"Google\\\\Cloud\\\\Firestore\\\\V1beta1","ruby_package":"Google::Cloud::Firestore::V1beta1"},"nested":{"DocumentMask":{"fields":{"fieldPaths":{"rule":"repeated","type":"string","id":1}}},"Precondition":{"oneofs":{"conditionType":{"oneof":["exists","updateTime"]}},"fields":{"exists":{"type":"bool","id":1},"updateTime":{"type":"google.protobuf.Timestamp","id":2}}},"TransactionOptions":{"oneofs":{"mode":{"oneof":["readOnly","readWrite"]}},"fields":{"readOnly":{"type":"ReadOnly","id":2},"readWrite":{"type":"ReadWrite","id":3}},"nested":{"ReadWrite":{"fields":{"retryTransaction":{"type":"bytes","id":1}}},"ReadOnly":{"oneofs":{"consistencySelector":{"oneof":["readTime"]}},"fields":{"readTime":{"type":"google.protobuf.Timestamp","id":2}}}}},"Document":{"fields":{"name":{"type":"string","id":1},"fields":{"keyType":"string","type":"Value","id":2},"createTime":{"type":"google.protobuf.Timestamp","id":3},"updateTime":{"type":"google.protobuf.Timestamp","id":4}}},"Value":{"oneofs":{"valueType":{"oneof":["nullValue","booleanValue","integerValue","doubleValue","timestampValue","stringValue","bytesValue","referenceValue","geoPointValue","arrayValue","mapValue"]}},"fields":{"nullValue":{"type":"google.protobuf.NullValue","id":11},"booleanValue":{"type":"bool","id":1},"integerValue":{"type":"int64","id":2},"doubleValue":{"type":"double","id":3},"timestampValue":{"type":"google.protobuf.Timestamp","id":10},"stringValue":{"type":"string","id":17},"bytesValue":{"type":"bytes","id":18},"referenceValue":{"type":"string","id":5},"geoPointValue":{"type":"google.type.LatLng","id":8},"arrayValue":{"type":"ArrayValue","id":9},"mapValue":{"type":"MapValue","id":6}}},"ArrayValue":{"fields":{"values":{"rule":"repeated","type":"Value","id":1}}},"MapValue":{"fields":{"fields":{"keyType":"string","type":"Value","id":1}}},"Firestore":{"options":{"(google.api.default_host)":"firestore.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/datastore"},"methods":{"GetDocument":{"requestType":"GetDocumentRequest","responseType":"Document","options":{"(google.api.http).get":"/v1beta1/{name=projects/*/databases/*/documents/*/**}"},"parsedOptions":[{"(google.api.http)":{"get":"/v1beta1/{name=projects/*/databases/*/documents/*/**}"}}]},"ListDocuments":{"requestType":"ListDocumentsRequest","responseType":"ListDocumentsResponse","options":{"(google.api.http).get":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"},"parsedOptions":[{"(google.api.http)":{"get":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"}}]},"UpdateDocument":{"requestType":"UpdateDocumentRequest","responseType":"Document","options":{"(google.api.http).patch":"/v1beta1/{document.name=projects/*/databases/*/documents/*/**}","(google.api.http).body":"document","(google.api.method_signature)":"document,update_mask"},"parsedOptions":[{"(google.api.http)":{"patch":"/v1beta1/{document.name=projects/*/databases/*/documents/*/**}","body":"document"}},{"(google.api.method_signature)":"document,update_mask"}]},"DeleteDocument":{"requestType":"DeleteDocumentRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).delete":"/v1beta1/{name=projects/*/databases/*/documents/*/**}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"delete":"/v1beta1/{name=projects/*/databases/*/documents/*/**}"}},{"(google.api.method_signature)":"name"}]},"BatchGetDocuments":{"requestType":"BatchGetDocumentsRequest","responseType":"BatchGetDocumentsResponse","responseStream":true,"options":{"(google.api.http).post":"/v1beta1/{database=projects/*/databases/*}/documents:batchGet","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{database=projects/*/databases/*}/documents:batchGet","body":"*"}}]},"BeginTransaction":{"requestType":"BeginTransactionRequest","responseType":"BeginTransactionResponse","options":{"(google.api.http).post":"/v1beta1/{database=projects/*/databases/*}/documents:beginTransaction","(google.api.http).body":"*","(google.api.method_signature)":"database"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{database=projects/*/databases/*}/documents:beginTransaction","body":"*"}},{"(google.api.method_signature)":"database"}]},"Commit":{"requestType":"CommitRequest","responseType":"CommitResponse","options":{"(google.api.http).post":"/v1beta1/{database=projects/*/databases/*}/documents:commit","(google.api.http).body":"*","(google.api.method_signature)":"database,writes"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{database=projects/*/databases/*}/documents:commit","body":"*"}},{"(google.api.method_signature)":"database,writes"}]},"Rollback":{"requestType":"RollbackRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).post":"/v1beta1/{database=projects/*/databases/*}/documents:rollback","(google.api.http).body":"*","(google.api.method_signature)":"database,transaction"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{database=projects/*/databases/*}/documents:rollback","body":"*"}},{"(google.api.method_signature)":"database,transaction"}]},"RunQuery":{"requestType":"RunQueryRequest","responseType":"RunQueryResponse","responseStream":true,"options":{"(google.api.http).post":"/v1beta1/{parent=projects/*/databases/*/documents}:runQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}:runQuery","(google.api.http).additional_bindings.body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{parent=projects/*/databases/*/documents}:runQuery","body":"*","additional_bindings":{"post":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}:runQuery","body":"*"}}}]},"PartitionQuery":{"requestType":"PartitionQueryRequest","responseType":"PartitionQueryResponse","options":{"(google.api.http).post":"/v1beta1/{parent=projects/*/databases/*/documents}:partitionQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","(google.api.http).additional_bindings.body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{parent=projects/*/databases/*/documents}:partitionQuery","body":"*","additional_bindings":{"post":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","body":"*"}}}]},"Write":{"requestType":"WriteRequest","requestStream":true,"responseType":"WriteResponse","responseStream":true,"options":{"(google.api.http).post":"/v1beta1/{database=projects/*/databases/*}/documents:write","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{database=projects/*/databases/*}/documents:write","body":"*"}}]},"Listen":{"requestType":"ListenRequest","requestStream":true,"responseType":"ListenResponse","responseStream":true,"options":{"(google.api.http).post":"/v1beta1/{database=projects/*/databases/*}/documents:listen","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{database=projects/*/databases/*}/documents:listen","body":"*"}}]},"ListCollectionIds":{"requestType":"ListCollectionIdsRequest","responseType":"ListCollectionIdsResponse","options":{"(google.api.http).post":"/v1beta1/{parent=projects/*/databases/*/documents}:listCollectionIds","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","(google.api.http).additional_bindings.body":"*","(google.api.method_signature)":"parent"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{parent=projects/*/databases/*/documents}:listCollectionIds","body":"*","additional_bindings":{"post":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","body":"*"}}},{"(google.api.method_signature)":"parent"}]},"BatchWrite":{"requestType":"BatchWriteRequest","responseType":"BatchWriteResponse","options":{"(google.api.http).post":"/v1beta1/{database=projects/*/databases/*}/documents:batchWrite","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{database=projects/*/databases/*}/documents:batchWrite","body":"*"}}]},"CreateDocument":{"requestType":"CreateDocumentRequest","responseType":"Document","options":{"(google.api.http).post":"/v1beta1/{parent=projects/*/databases/*/documents/**}/{collection_id}","(google.api.http).body":"document"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{parent=projects/*/databases/*/documents/**}/{collection_id}","body":"document"}}]}}},"GetDocumentRequest":{"oneofs":{"consistencySelector":{"oneof":["transaction","readTime"]}},"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"mask":{"type":"DocumentMask","id":2},"transaction":{"type":"bytes","id":3},"readTime":{"type":"google.protobuf.Timestamp","id":5}}},"ListDocumentsRequest":{"oneofs":{"consistencySelector":{"oneof":["transaction","readTime"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"collectionId":{"type":"string","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}},"pageSize":{"type":"int32","id":3},"pageToken":{"type":"string","id":4},"orderBy":{"type":"string","id":6},"mask":{"type":"DocumentMask","id":7},"transaction":{"type":"bytes","id":8},"readTime":{"type":"google.protobuf.Timestamp","id":10},"showMissing":{"type":"bool","id":12}}},"ListDocumentsResponse":{"fields":{"documents":{"rule":"repeated","type":"Document","id":1},"nextPageToken":{"type":"string","id":2}}},"CreateDocumentRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"collectionId":{"type":"string","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}},"documentId":{"type":"string","id":3},"document":{"type":"Document","id":4,"options":{"(google.api.field_behavior)":"REQUIRED"}},"mask":{"type":"DocumentMask","id":5}}},"UpdateDocumentRequest":{"fields":{"document":{"type":"Document","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"updateMask":{"type":"DocumentMask","id":2},"mask":{"type":"DocumentMask","id":3},"currentDocument":{"type":"Precondition","id":4}}},"DeleteDocumentRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"currentDocument":{"type":"Precondition","id":2}}},"BatchGetDocumentsRequest":{"oneofs":{"consistencySelector":{"oneof":["transaction","newTransaction","readTime"]}},"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"documents":{"rule":"repeated","type":"string","id":2},"mask":{"type":"DocumentMask","id":3},"transaction":{"type":"bytes","id":4},"newTransaction":{"type":"TransactionOptions","id":5},"readTime":{"type":"google.protobuf.Timestamp","id":7}}},"BatchGetDocumentsResponse":{"oneofs":{"result":{"oneof":["found","missing"]}},"fields":{"found":{"type":"Document","id":1},"missing":{"type":"string","id":2},"transaction":{"type":"bytes","id":3},"readTime":{"type":"google.protobuf.Timestamp","id":4}}},"BeginTransactionRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"options":{"type":"TransactionOptions","id":2}}},"BeginTransactionResponse":{"fields":{"transaction":{"type":"bytes","id":1}}},"CommitRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"writes":{"rule":"repeated","type":"Write","id":2},"transaction":{"type":"bytes","id":3}}},"CommitResponse":{"fields":{"writeResults":{"rule":"repeated","type":"WriteResult","id":1},"commitTime":{"type":"google.protobuf.Timestamp","id":2}}},"RollbackRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"transaction":{"type":"bytes","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}}}},"RunQueryRequest":{"oneofs":{"queryType":{"oneof":["structuredQuery"]},"consistencySelector":{"oneof":["transaction","newTransaction","readTime"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"structuredQuery":{"type":"StructuredQuery","id":2},"transaction":{"type":"bytes","id":5},"newTransaction":{"type":"TransactionOptions","id":6},"readTime":{"type":"google.protobuf.Timestamp","id":7}}},"RunQueryResponse":{"fields":{"transaction":{"type":"bytes","id":2},"document":{"type":"Document","id":1},"readTime":{"type":"google.protobuf.Timestamp","id":3},"skippedResults":{"type":"int32","id":4}}},"PartitionQueryRequest":{"oneofs":{"queryType":{"oneof":["structuredQuery"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"structuredQuery":{"type":"StructuredQuery","id":2},"partitionCount":{"type":"int64","id":3},"pageToken":{"type":"string","id":4},"pageSize":{"type":"int32","id":5}}},"PartitionQueryResponse":{"fields":{"partitions":{"rule":"repeated","type":"Cursor","id":1},"nextPageToken":{"type":"string","id":2}}},"WriteRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"streamId":{"type":"string","id":2},"writes":{"rule":"repeated","type":"Write","id":3},"streamToken":{"type":"bytes","id":4},"labels":{"keyType":"string","type":"string","id":5}}},"WriteResponse":{"fields":{"streamId":{"type":"string","id":1},"streamToken":{"type":"bytes","id":2},"writeResults":{"rule":"repeated","type":"WriteResult","id":3},"commitTime":{"type":"google.protobuf.Timestamp","id":4}}},"ListenRequest":{"oneofs":{"targetChange":{"oneof":["addTarget","removeTarget"]}},"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"addTarget":{"type":"Target","id":2},"removeTarget":{"type":"int32","id":3},"labels":{"keyType":"string","type":"string","id":4}}},"ListenResponse":{"oneofs":{"responseType":{"oneof":["targetChange","documentChange","documentDelete","documentRemove","filter"]}},"fields":{"targetChange":{"type":"TargetChange","id":2},"documentChange":{"type":"DocumentChange","id":3},"documentDelete":{"type":"DocumentDelete","id":4},"documentRemove":{"type":"DocumentRemove","id":6},"filter":{"type":"ExistenceFilter","id":5}}},"Target":{"oneofs":{"targetType":{"oneof":["query","documents"]},"resumeType":{"oneof":["resumeToken","readTime"]}},"fields":{"query":{"type":"QueryTarget","id":2},"documents":{"type":"DocumentsTarget","id":3},"resumeToken":{"type":"bytes","id":4},"readTime":{"type":"google.protobuf.Timestamp","id":11},"targetId":{"type":"int32","id":5},"once":{"type":"bool","id":6}},"nested":{"DocumentsTarget":{"fields":{"documents":{"rule":"repeated","type":"string","id":2}}},"QueryTarget":{"oneofs":{"queryType":{"oneof":["structuredQuery"]}},"fields":{"parent":{"type":"string","id":1},"structuredQuery":{"type":"StructuredQuery","id":2}}}}},"TargetChange":{"fields":{"targetChangeType":{"type":"TargetChangeType","id":1},"targetIds":{"rule":"repeated","type":"int32","id":2},"cause":{"type":"google.rpc.Status","id":3},"resumeToken":{"type":"bytes","id":4},"readTime":{"type":"google.protobuf.Timestamp","id":6}},"nested":{"TargetChangeType":{"values":{"NO_CHANGE":0,"ADD":1,"REMOVE":2,"CURRENT":3,"RESET":4}}}},"ListCollectionIdsRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"pageSize":{"type":"int32","id":2},"pageToken":{"type":"string","id":3}}},"ListCollectionIdsResponse":{"fields":{"collectionIds":{"rule":"repeated","type":"string","id":1},"nextPageToken":{"type":"string","id":2}}},"BatchWriteRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"writes":{"rule":"repeated","type":"Write","id":2},"labels":{"keyType":"string","type":"string","id":3}}},"BatchWriteResponse":{"fields":{"writeResults":{"rule":"repeated","type":"WriteResult","id":1},"status":{"rule":"repeated","type":"google.rpc.Status","id":2}}},"StructuredQuery":{"fields":{"select":{"type":"Projection","id":1},"from":{"rule":"repeated","type":"CollectionSelector","id":2},"where":{"type":"Filter","id":3},"orderBy":{"rule":"repeated","type":"Order","id":4},"startAt":{"type":"Cursor","id":7},"endAt":{"type":"Cursor","id":8},"offset":{"type":"int32","id":6},"limit":{"type":"google.protobuf.Int32Value","id":5}},"nested":{"CollectionSelector":{"fields":{"collectionId":{"type":"string","id":2},"allDescendants":{"type":"bool","id":3}}},"Filter":{"oneofs":{"filterType":{"oneof":["compositeFilter","fieldFilter","unaryFilter"]}},"fields":{"compositeFilter":{"type":"CompositeFilter","id":1},"fieldFilter":{"type":"FieldFilter","id":2},"unaryFilter":{"type":"UnaryFilter","id":3}}},"CompositeFilter":{"fields":{"op":{"type":"Operator","id":1},"filters":{"rule":"repeated","type":"Filter","id":2}},"nested":{"Operator":{"values":{"OPERATOR_UNSPECIFIED":0,"AND":1}}}},"FieldFilter":{"fields":{"field":{"type":"FieldReference","id":1},"op":{"type":"Operator","id":2},"value":{"type":"Value","id":3}},"nested":{"Operator":{"values":{"OPERATOR_UNSPECIFIED":0,"LESS_THAN":1,"LESS_THAN_OR_EQUAL":2,"GREATER_THAN":3,"GREATER_THAN_OR_EQUAL":4,"EQUAL":5,"NOT_EQUAL":6,"ARRAY_CONTAINS":7,"IN":8,"ARRAY_CONTAINS_ANY":9,"NOT_IN":10}}}},"UnaryFilter":{"oneofs":{"operandType":{"oneof":["field"]}},"fields":{"op":{"type":"Operator","id":1},"field":{"type":"FieldReference","id":2}},"nested":{"Operator":{"values":{"OPERATOR_UNSPECIFIED":0,"IS_NAN":2,"IS_NULL":3,"IS_NOT_NAN":4,"IS_NOT_NULL":5}}}},"FieldReference":{"fields":{"fieldPath":{"type":"string","id":2}}},"Order":{"fields":{"field":{"type":"FieldReference","id":1},"direction":{"type":"Direction","id":2}}},"Projection":{"fields":{"fields":{"rule":"repeated","type":"FieldReference","id":2}}},"Direction":{"values":{"DIRECTION_UNSPECIFIED":0,"ASCENDING":1,"DESCENDING":2}}}},"Cursor":{"fields":{"values":{"rule":"repeated","type":"Value","id":1},"before":{"type":"bool","id":2}}},"Write":{"oneofs":{"operation":{"oneof":["update","delete","transform"]}},"fields":{"update":{"type":"Document","id":1},"delete":{"type":"string","id":2},"transform":{"type":"DocumentTransform","id":6},"updateMask":{"type":"DocumentMask","id":3},"updateTransforms":{"rule":"repeated","type":"DocumentTransform.FieldTransform","id":7},"currentDocument":{"type":"Precondition","id":4}}},"DocumentTransform":{"fields":{"document":{"type":"string","id":1},"fieldTransforms":{"rule":"repeated","type":"FieldTransform","id":2}},"nested":{"FieldTransform":{"oneofs":{"transformType":{"oneof":["setToServerValue","increment","maximum","minimum","appendMissingElements","removeAllFromArray"]}},"fields":{"fieldPath":{"type":"string","id":1},"setToServerValue":{"type":"ServerValue","id":2},"increment":{"type":"Value","id":3},"maximum":{"type":"Value","id":4},"minimum":{"type":"Value","id":5},"appendMissingElements":{"type":"ArrayValue","id":6},"removeAllFromArray":{"type":"ArrayValue","id":7}},"nested":{"ServerValue":{"values":{"SERVER_VALUE_UNSPECIFIED":0,"REQUEST_TIME":1}}}}}},"WriteResult":{"fields":{"updateTime":{"type":"google.protobuf.Timestamp","id":1},"transformResults":{"rule":"repeated","type":"Value","id":2}}},"DocumentChange":{"fields":{"document":{"type":"Document","id":1},"targetIds":{"rule":"repeated","type":"int32","id":5},"removedTargetIds":{"rule":"repeated","type":"int32","id":6}}},"DocumentDelete":{"fields":{"document":{"type":"string","id":1},"removedTargetIds":{"rule":"repeated","type":"int32","id":6},"readTime":{"type":"google.protobuf.Timestamp","id":4}}},"DocumentRemove":{"fields":{"document":{"type":"string","id":1},"removedTargetIds":{"rule":"repeated","type":"int32","id":2},"readTime":{"type":"google.protobuf.Timestamp","id":4}}},"ExistenceFilter":{"fields":{"targetId":{"type":"int32","id":1},"count":{"type":"int32","id":2}}},"UndeliverableFirstGenEvent":{"fields":{"message":{"type":"string","id":1},"reason":{"type":"Reason","id":2},"documentName":{"type":"string","id":3},"documentChangeType":{"type":"DocumentChangeType","id":4},"functionName":{"rule":"repeated","type":"string","id":5},"triggeredTime":{"type":"google.protobuf.Timestamp","id":6}},"nested":{"Reason":{"values":{"REASON_UNSPECIFIED":0,"EXCEEDING_SIZE_LIMIT":1}},"DocumentChangeType":{"values":{"DOCUMENT_CHANGE_TYPE_UNSPECIFIED":0,"CREATE":1,"DELETE":2,"UPDATE":3}}}}}}}},"type":{"options":{"cc_enable_arenas":true,"go_package":"google.golang.org/genproto/googleapis/type/dayofweek;dayofweek","java_multiple_files":true,"java_outer_classname":"DayOfWeekProto","java_package":"com.google.type","objc_class_prefix":"GTP"},"nested":{"LatLng":{"fields":{"latitude":{"type":"double","id":1},"longitude":{"type":"double","id":2}}},"DayOfWeek":{"values":{"DAY_OF_WEEK_UNSPECIFIED":0,"MONDAY":1,"TUESDAY":2,"WEDNESDAY":3,"THURSDAY":4,"FRIDAY":5,"SATURDAY":6,"SUNDAY":7}}}},"api":{"options":{"go_package":"google.golang.org/genproto/googleapis/api/annotations;annotations","java_multiple_files":true,"java_outer_classname":"ResourceProto","java_package":"com.google.api","objc_class_prefix":"GAPI","cc_enable_arenas":true},"nested":{"http":{"type":"HttpRule","id":72295728,"extend":"google.protobuf.MethodOptions"},"Http":{"fields":{"rules":{"rule":"repeated","type":"HttpRule","id":1},"fullyDecodeReservedExpansion":{"type":"bool","id":2}}},"HttpRule":{"oneofs":{"pattern":{"oneof":["get","put","post","delete","patch","custom"]}},"fields":{"selector":{"type":"string","id":1},"get":{"type":"string","id":2},"put":{"type":"string","id":3},"post":{"type":"string","id":4},"delete":{"type":"string","id":5},"patch":{"type":"string","id":6},"custom":{"type":"CustomHttpPattern","id":8},"body":{"type":"string","id":7},"responseBody":{"type":"string","id":12},"additionalBindings":{"rule":"repeated","type":"HttpRule","id":11}}},"CustomHttpPattern":{"fields":{"kind":{"type":"string","id":1},"path":{"type":"string","id":2}}},"methodSignature":{"rule":"repeated","type":"string","id":1051,"extend":"google.protobuf.MethodOptions"},"defaultHost":{"type":"string","id":1049,"extend":"google.protobuf.ServiceOptions"},"oauthScopes":{"type":"string","id":1050,"extend":"google.protobuf.ServiceOptions"},"apiVersion":{"type":"string","id":525000001,"extend":"google.protobuf.ServiceOptions"},"CommonLanguageSettings":{"fields":{"referenceDocsUri":{"type":"string","id":1,"options":{"deprecated":true}},"destinations":{"rule":"repeated","type":"ClientLibraryDestination","id":2},"selectiveGapicGeneration":{"type":"SelectiveGapicGeneration","id":3}}},"ClientLibrarySettings":{"fields":{"version":{"type":"string","id":1},"launchStage":{"type":"LaunchStage","id":2},"restNumericEnums":{"type":"bool","id":3},"javaSettings":{"type":"JavaSettings","id":21},"cppSettings":{"type":"CppSettings","id":22},"phpSettings":{"type":"PhpSettings","id":23},"pythonSettings":{"type":"PythonSettings","id":24},"nodeSettings":{"type":"NodeSettings","id":25},"dotnetSettings":{"type":"DotnetSettings","id":26},"rubySettings":{"type":"RubySettings","id":27},"goSettings":{"type":"GoSettings","id":28}}},"Publishing":{"fields":{"methodSettings":{"rule":"repeated","type":"MethodSettings","id":2},"newIssueUri":{"type":"string","id":101},"documentationUri":{"type":"string","id":102},"apiShortName":{"type":"string","id":103},"githubLabel":{"type":"string","id":104},"codeownerGithubTeams":{"rule":"repeated","type":"string","id":105},"docTagPrefix":{"type":"string","id":106},"organization":{"type":"ClientLibraryOrganization","id":107},"librarySettings":{"rule":"repeated","type":"ClientLibrarySettings","id":109},"protoReferenceDocumentationUri":{"type":"string","id":110},"restReferenceDocumentationUri":{"type":"string","id":111}}},"JavaSettings":{"fields":{"libraryPackage":{"type":"string","id":1},"serviceClassNames":{"keyType":"string","type":"string","id":2},"common":{"type":"CommonLanguageSettings","id":3}}},"CppSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"PhpSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"PythonSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"experimentalFeatures":{"type":"ExperimentalFeatures","id":2}},"nested":{"ExperimentalFeatures":{"fields":{"restAsyncIoEnabled":{"type":"bool","id":1},"protobufPythonicTypesEnabled":{"type":"bool","id":2}}}}},"NodeSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"DotnetSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"renamedServices":{"keyType":"string","type":"string","id":2},"renamedResources":{"keyType":"string","type":"string","id":3},"ignoredResources":{"rule":"repeated","type":"string","id":4},"forcedNamespaceAliases":{"rule":"repeated","type":"string","id":5},"handwrittenSignatures":{"rule":"repeated","type":"string","id":6}}},"RubySettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"GoSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"renamedServices":{"keyType":"string","type":"string","id":2}}},"MethodSettings":{"fields":{"selector":{"type":"string","id":1},"longRunning":{"type":"LongRunning","id":2},"autoPopulatedFields":{"rule":"repeated","type":"string","id":3}},"nested":{"LongRunning":{"fields":{"initialPollDelay":{"type":"google.protobuf.Duration","id":1},"pollDelayMultiplier":{"type":"float","id":2},"maxPollDelay":{"type":"google.protobuf.Duration","id":3},"totalPollTimeout":{"type":"google.protobuf.Duration","id":4}}}}},"ClientLibraryOrganization":{"values":{"CLIENT_LIBRARY_ORGANIZATION_UNSPECIFIED":0,"CLOUD":1,"ADS":2,"PHOTOS":3,"STREET_VIEW":4,"SHOPPING":5,"GEO":6,"GENERATIVE_AI":7}},"ClientLibraryDestination":{"values":{"CLIENT_LIBRARY_DESTINATION_UNSPECIFIED":0,"GITHUB":10,"PACKAGE_MANAGER":20}},"SelectiveGapicGeneration":{"fields":{"methods":{"rule":"repeated","type":"string","id":1},"generateOmittedAsInternal":{"type":"bool","id":2}}},"LaunchStage":{"values":{"LAUNCH_STAGE_UNSPECIFIED":0,"UNIMPLEMENTED":6,"PRELAUNCH":7,"EARLY_ACCESS":1,"ALPHA":2,"BETA":3,"GA":4,"DEPRECATED":5}},"fieldBehavior":{"rule":"repeated","type":"google.api.FieldBehavior","id":1052,"extend":"google.protobuf.FieldOptions","options":{"packed":false}},"FieldBehavior":{"values":{"FIELD_BEHAVIOR_UNSPECIFIED":0,"OPTIONAL":1,"REQUIRED":2,"OUTPUT_ONLY":3,"INPUT_ONLY":4,"IMMUTABLE":5,"UNORDERED_LIST":6,"NON_EMPTY_DEFAULT":7,"IDENTIFIER":8}},"resourceReference":{"type":"google.api.ResourceReference","id":1055,"extend":"google.protobuf.FieldOptions"},"resourceDefinition":{"rule":"repeated","type":"google.api.ResourceDescriptor","id":1053,"extend":"google.protobuf.FileOptions"},"resource":{"type":"google.api.ResourceDescriptor","id":1053,"extend":"google.protobuf.MessageOptions"},"ResourceDescriptor":{"fields":{"type":{"type":"string","id":1},"pattern":{"rule":"repeated","type":"string","id":2},"nameField":{"type":"string","id":3},"history":{"type":"History","id":4},"plural":{"type":"string","id":5},"singular":{"type":"string","id":6},"style":{"rule":"repeated","type":"Style","id":10}},"nested":{"History":{"values":{"HISTORY_UNSPECIFIED":0,"ORIGINALLY_SINGLE_PATTERN":1,"FUTURE_MULTI_PATTERN":2}},"Style":{"values":{"STYLE_UNSPECIFIED":0,"DECLARATIVE_FRIENDLY":1}}}},"ResourceReference":{"fields":{"type":{"type":"string","id":1},"childType":{"type":"string","id":2}}}}},"rpc":{"options":{"cc_enable_arenas":true,"go_package":"google.golang.org/genproto/googleapis/rpc/status;status","java_multiple_files":true,"java_outer_classname":"StatusProto","java_package":"com.google.rpc","objc_class_prefix":"RPC"},"nested":{"Status":{"fields":{"code":{"type":"int32","id":1},"message":{"type":"string","id":2},"details":{"rule":"repeated","type":"google.protobuf.Any","id":3}}}}}}}}'),require$$1={options,nested},interfaces={"google.firestore.v1beta1.Firestore":{retry_codes:{non_idempotent:[],idempotent:["DEADLINE_EXCEEDED","UNAVAILABLE"]},retry_params:{default:{initial_retry_delay_millis:100,retry_delay_multiplier:1.3,max_retry_delay_millis:6e4,initial_rpc_timeout_millis:6e4,rpc_timeout_multiplier:1,max_rpc_timeout_millis:6e4,total_timeout_millis:6e5}},methods:{GetDocument:{timeout_millis:6e4,retry_codes_name:"idempotent",retry_params_name:"default"},ListDocuments:{timeout_millis:6e4,retry_codes_name:"idempotent",retry_params_name:"default"},UpdateDocument:{timeout_millis:6e4,retry_codes_name:"non_idempotent",retry_params_name:"default"},DeleteDocument:{timeout_millis:6e4,retry_codes_name:"idempotent",retry_params_name:"default"},BatchGetDocuments:{timeout_millis:3e5,retry_codes_name:"idempotent",retry_params_name:"default"},BeginTransaction:{timeout_millis:6e4,retry_codes_name:"idempotent",retry_params_name:"default"},Commit:{timeout_millis:6e4,retry_codes_name:"non_idempotent",retry_params_name:"default"},Rollback:{timeout_millis:6e4,retry_codes_name:"idempotent",retry_params_name:"default"},RunQuery:{timeout_millis:3e5,retry_codes_name:"idempotent",retry_params_name:"default"},PartitionQuery:{retry_codes_name:"non_idempotent",retry_params_name:"default"},Write:{timeout_millis:864e5,retry_codes_name:"non_idempotent",retry_params_name:"default"},Listen:{timeout_millis:864e5,retry_codes_name:"idempotent",retry_params_name:"default"},ListCollectionIds:{timeout_millis:6e4,retry_codes_name:"idempotent",retry_params_name:"default"},BatchWrite:{retry_codes_name:"non_idempotent",retry_params_name:"default"},CreateDocument:{timeout_millis:6e4,retry_codes_name:"non_idempotent",retry_params_name:"default"}}}},require$$2={interfaces};var hasRequiredFirestore_client;function requireFirestore_client(){if(hasRequiredFirestore_client)return firestore_client;hasRequiredFirestore_client=1;var e={},t={};Object.defineProperty(firestore_client,"__esModule",{value:!0}),firestore_client.FirestoreClient=void 0;const s=require$$1$3,p=require$$1,g=require$$2,m=require$$33.version;class d{constructor(a,o){var h,v,_,y,w;this._terminated=!1,this.descriptors={page:{},stream:{},longrunning:{},batching:{}};const T=this.constructor;if(a?.universe_domain&&a?.universeDomain&&a?.universe_domain!==a?.universeDomain)throw new Error("Please set either universe_domain or universeDomain, but not both.");const I=typeof e=="object"&&typeof t=="object"?t.GOOGLE_CLOUD_UNIVERSE_DOMAIN:void 0;this._universeDomain=(_=(v=(h=a?.universeDomain)!==null&&h!==void 0?h:a?.universe_domain)!==null&&v!==void 0?v:I)!==null&&_!==void 0?_:"googleapis.com",this._servicePath="firestore."+this._universeDomain;const O=a?.servicePath||a?.apiEndpoint||this._servicePath;this._providedCustomServicePath=!!(a?.servicePath||a?.apiEndpoint);const E=a?.port||T.port,C=(y=a?.clientConfig)!==null&&y!==void 0?y:{},x=(w=a?.fallback)!==null&&w!==void 0?w:typeof window<"u"&&typeof window?.fetch=="function";a=Object.assign({servicePath:O,port:E,clientConfig:C,fallback:x},a),a.numericEnums=!0,O!==this._servicePath&&!("scopes"in a)&&(a.scopes=T.scopes),o||(o=requireFallback()),this._gaxModule=a.fallback?o.fallback:o,this._gaxGrpc=new this._gaxModule.GrpcClient(a),this._opts=a,this.auth=this._gaxGrpc.auth,this.auth.useJWTAccessWithScope=!0,this.auth.defaultServicePath=this._servicePath,O===this._servicePath&&(this.auth.defaultScopes=T.scopes);const j=[`gax/${this._gaxModule.version}`,`gapic/${m}`];typeof e=="object"&&"versions"in e?j.push(`gl-node/${e.versions.node}`):j.push(`gl-web/${this._gaxModule.version}`),a.fallback?j.push(`rest/${this._gaxGrpc.grpcVersion}`):j.push(`grpc/${this._gaxGrpc.grpcVersion}`),a.libName&&a.libVersion&&j.push(`${a.libName}/${a.libVersion}`),this._protos=this._gaxGrpc.loadProtoJSON(p),this.descriptors.page={listDocuments:new this._gaxModule.PageDescriptor("pageToken","nextPageToken","documents"),partitionQuery:new this._gaxModule.PageDescriptor("pageToken","nextPageToken","partitions"),listCollectionIds:new this._gaxModule.PageDescriptor("pageToken","nextPageToken","collectionIds")},this.descriptors.stream={batchGetDocuments:new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.SERVER_STREAMING,!!a.fallback,!!a.gaxServerStreamingRetries),runQuery:new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.SERVER_STREAMING,!!a.fallback,!!a.gaxServerStreamingRetries),write:new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.BIDI_STREAMING,!!a.fallback,!!a.gaxServerStreamingRetries),listen:new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.BIDI_STREAMING,!!a.fallback,!!a.gaxServerStreamingRetries)},this._defaults=this._gaxGrpc.constructSettings("google.firestore.v1beta1.Firestore",g,a.clientConfig||{},{"x-goog-api-client":j.join(" ")}),this.innerApiCalls={},this.warn=this._gaxModule.warn}initialize(){if(this.firestoreStub)return this.firestoreStub;this.firestoreStub=this._gaxGrpc.createStub(this._opts.fallback?this._protos.lookupService("google.firestore.v1beta1.Firestore"):this._protos.google.firestore.v1beta1.Firestore,this._opts,this._providedCustomServicePath);const a=["getDocument","listDocuments","updateDocument","deleteDocument","batchGetDocuments","beginTransaction","commit","rollback","runQuery","partitionQuery","write","listen","listCollectionIds","batchWrite","createDocument"];for(const o of a){const h=this.firestoreStub.then(y=>(...w)=>{if(this._terminated){if(o in this.descriptors.stream){const I=new s.PassThrough({objectMode:!0});return setImmediate(()=>{I.emit("error",new this._gaxModule.GoogleError("The client has already been closed."))}),I}return Promise.reject("The client has already been closed.")}return y[o].apply(y,w)},y=>()=>{throw y}),v=this.descriptors.page[o]||this.descriptors.stream[o]||void 0,_=this._gaxModule.createApiCall(h,this._defaults[o],v,this._opts.fallback);this.innerApiCalls[o]=_}return this.firestoreStub}static get servicePath(){return typeof e=="object"&&typeof e.emitWarning=="function"&&e.emitWarning("Static servicePath is deprecated, please use the instance method instead.","DeprecationWarning"),"firestore.googleapis.com"}static get apiEndpoint(){return typeof e=="object"&&typeof e.emitWarning=="function"&&e.emitWarning("Static apiEndpoint is deprecated, please use the instance method instead.","DeprecationWarning"),"firestore.googleapis.com"}get apiEndpoint(){return this._servicePath}get universeDomain(){return this._universeDomain}static get port(){return 443}static get scopes(){return["https://www.googleapis.com/auth/cloud-platform","https://www.googleapis.com/auth/datastore"]}getProjectId(a){if(a){this.auth.getProjectId(a);return}return this.auth.getProjectId()}getDocument(a,o,h){var v;a=a||{};let _;return typeof o=="function"&&h===void 0?(h=o,_={}):_=o,_=_||{},_.otherArgs=_.otherArgs||{},_.otherArgs.headers=_.otherArgs.headers||{},_.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(v=a.name)!==null&&v!==void 0?v:""}),this.initialize(),this.innerApiCalls.getDocument(a,_,h)}updateDocument(a,o,h){var v;a=a||{};let _;return typeof o=="function"&&h===void 0?(h=o,_={}):_=o,_=_||{},_.otherArgs=_.otherArgs||{},_.otherArgs.headers=_.otherArgs.headers||{},_.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({"document.name":(v=a.document.name)!==null&&v!==void 0?v:""}),this.initialize(),this.innerApiCalls.updateDocument(a,_,h)}deleteDocument(a,o,h){var v;a=a||{};let _;return typeof o=="function"&&h===void 0?(h=o,_={}):_=o,_=_||{},_.otherArgs=_.otherArgs||{},_.otherArgs.headers=_.otherArgs.headers||{},_.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(v=a.name)!==null&&v!==void 0?v:""}),this.initialize(),this.innerApiCalls.deleteDocument(a,_,h)}beginTransaction(a,o,h){var v;a=a||{};let _;return typeof o=="function"&&h===void 0?(h=o,_={}):_=o,_=_||{},_.otherArgs=_.otherArgs||{},_.otherArgs.headers=_.otherArgs.headers||{},_.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({database:(v=a.database)!==null&&v!==void 0?v:""}),this.initialize(),this.innerApiCalls.beginTransaction(a,_,h)}commit(a,o,h){var v;a=a||{};let _;return typeof o=="function"&&h===void 0?(h=o,_={}):_=o,_=_||{},_.otherArgs=_.otherArgs||{},_.otherArgs.headers=_.otherArgs.headers||{},_.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({database:(v=a.database)!==null&&v!==void 0?v:""}),this.initialize(),this.innerApiCalls.commit(a,_,h)}rollback(a,o,h){var v;a=a||{};let _;return typeof o=="function"&&h===void 0?(h=o,_={}):_=o,_=_||{},_.otherArgs=_.otherArgs||{},_.otherArgs.headers=_.otherArgs.headers||{},_.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({database:(v=a.database)!==null&&v!==void 0?v:""}),this.initialize(),this.innerApiCalls.rollback(a,_,h)}batchWrite(a,o,h){var v;a=a||{};let _;return typeof o=="function"&&h===void 0?(h=o,_={}):_=o,_=_||{},_.otherArgs=_.otherArgs||{},_.otherArgs.headers=_.otherArgs.headers||{},_.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({database:(v=a.database)!==null&&v!==void 0?v:""}),this.initialize(),this.innerApiCalls.batchWrite(a,_,h)}createDocument(a,o,h){var v,_;a=a||{};let y;return typeof o=="function"&&h===void 0?(h=o,y={}):y=o,y=y||{},y.otherArgs=y.otherArgs||{},y.otherArgs.headers=y.otherArgs.headers||{},y.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(v=a.parent)!==null&&v!==void 0?v:"",collection_id:(_=a.collectionId)!==null&&_!==void 0?_:""}),this.initialize(),this.innerApiCalls.createDocument(a,y,h)}batchGetDocuments(a,o){var h;return a=a||{},o=o||{},o.otherArgs=o.otherArgs||{},o.otherArgs.headers=o.otherArgs.headers||{},o.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({database:(h=a.database)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.batchGetDocuments(a,o)}runQuery(a,o){var h;return a=a||{},o=o||{},o.otherArgs=o.otherArgs||{},o.otherArgs.headers=o.otherArgs.headers||{},o.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=a.parent)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.runQuery(a,o)}write(a){return this.initialize(),this.innerApiCalls.write(null,a)}listen(a){return this.initialize(),this.innerApiCalls.listen(null,a)}listDocuments(a,o,h){var v,_;a=a||{};let y;return typeof o=="function"&&h===void 0?(h=o,y={}):y=o,y=y||{},y.otherArgs=y.otherArgs||{},y.otherArgs.headers=y.otherArgs.headers||{},y.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(v=a.parent)!==null&&v!==void 0?v:"",collection_id:(_=a.collectionId)!==null&&_!==void 0?_:""}),this.initialize(),this.innerApiCalls.listDocuments(a,y,h)}listDocumentsStream(a,o){var h,v;a=a||{},o=o||{},o.otherArgs=o.otherArgs||{},o.otherArgs.headers=o.otherArgs.headers||{},o.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=a.parent)!==null&&h!==void 0?h:"",collection_id:(v=a.collectionId)!==null&&v!==void 0?v:""});const y=this._defaults.listDocuments.merge(o);return this.initialize(),this.descriptors.page.listDocuments.createStream(this.innerApiCalls.listDocuments,a,y)}listDocumentsAsync(a,o){var h,v;a=a||{},o=o||{},o.otherArgs=o.otherArgs||{},o.otherArgs.headers=o.otherArgs.headers||{},o.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=a.parent)!==null&&h!==void 0?h:"",collection_id:(v=a.collectionId)!==null&&v!==void 0?v:""});const y=this._defaults.listDocuments.merge(o);return this.initialize(),this.descriptors.page.listDocuments.asyncIterate(this.innerApiCalls.listDocuments,a,y)}partitionQuery(a,o,h){var v;a=a||{};let _;return typeof o=="function"&&h===void 0?(h=o,_={}):_=o,_=_||{},_.otherArgs=_.otherArgs||{},_.otherArgs.headers=_.otherArgs.headers||{},_.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(v=a.parent)!==null&&v!==void 0?v:""}),this.initialize(),this.innerApiCalls.partitionQuery(a,_,h)}partitionQueryStream(a,o){var h;a=a||{},o=o||{},o.otherArgs=o.otherArgs||{},o.otherArgs.headers=o.otherArgs.headers||{},o.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=a.parent)!==null&&h!==void 0?h:""});const _=this._defaults.partitionQuery.merge(o);return this.initialize(),this.descriptors.page.partitionQuery.createStream(this.innerApiCalls.partitionQuery,a,_)}partitionQueryAsync(a,o){var h;a=a||{},o=o||{},o.otherArgs=o.otherArgs||{},o.otherArgs.headers=o.otherArgs.headers||{},o.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=a.parent)!==null&&h!==void 0?h:""});const _=this._defaults.partitionQuery.merge(o);return this.initialize(),this.descriptors.page.partitionQuery.asyncIterate(this.innerApiCalls.partitionQuery,a,_)}listCollectionIds(a,o,h){var v;a=a||{};let _;return typeof o=="function"&&h===void 0?(h=o,_={}):_=o,_=_||{},_.otherArgs=_.otherArgs||{},_.otherArgs.headers=_.otherArgs.headers||{},_.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(v=a.parent)!==null&&v!==void 0?v:""}),this.initialize(),this.innerApiCalls.listCollectionIds(a,_,h)}listCollectionIdsStream(a,o){var h;a=a||{},o=o||{},o.otherArgs=o.otherArgs||{},o.otherArgs.headers=o.otherArgs.headers||{},o.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=a.parent)!==null&&h!==void 0?h:""});const _=this._defaults.listCollectionIds.merge(o);return this.initialize(),this.descriptors.page.listCollectionIds.createStream(this.innerApiCalls.listCollectionIds,a,_)}listCollectionIdsAsync(a,o){var h;a=a||{},o=o||{},o.otherArgs=o.otherArgs||{},o.otherArgs.headers=o.otherArgs.headers||{},o.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=a.parent)!==null&&h!==void 0?h:""});const _=this._defaults.listCollectionIds.merge(o);return this.initialize(),this.descriptors.page.listCollectionIds.asyncIterate(this.innerApiCalls.listCollectionIds,a,_)}close(){return this.firestoreStub&&!this._terminated?this.firestoreStub.then(a=>{this._terminated=!0,a.close()}):Promise.resolve()}}return firestore_client.FirestoreClient=d,firestore_client}var hasRequiredV1beta1;function requireV1beta1(){return hasRequiredV1beta1||(hasRequiredV1beta1=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FirestoreClient=void 0;const s=requireFirestore_client();Object.defineProperty(t,"FirestoreClient",{enumerable:!0,get:function(){return s.FirestoreClient}});const p=e.exports;e.exports=s.FirestoreClient,e.exports=Object.assign(e.exports,p)})(v1beta1,v1beta1.exports)),v1beta1.exports}var hasRequiredSrc;function requireSrc(){return hasRequiredSrc||(hasRequiredSrc=1,(function(e,t){var s={};Object.defineProperty(t,"__esModule",{value:!0}),t.Firestore=t.DEFAULT_MAX_IDLE_CHANNELS=t.DEFAULT_MAX_TRANSACTION_ATTEMPTS=t.MAX_REQUEST_RETRIES=t.AggregateField=t.Aggregate=t.setLogFunction=t.QueryPartition=t.CollectionGroup=t.GeoPoint=t.FieldPath=t.DocumentChange=t.Timestamp=t.Transaction=t.WriteResult=t.WriteBatch=t.Filter=t.VectorValue=t.FieldValue=t.QueryDocumentSnapshot=t.DocumentSnapshot=t.BulkWriter=t.Query=t.QuerySnapshot=t.DocumentReference=t.CollectionReference=void 0;const p=require$$1$3,g=require$$1$3,m=requireBackoff(),d=requireBulkWriter(),l=requireBundle(),a=requireConvert(),o=requireDocumentReader(),h=requireDocument(),v=requireLogger(),_=requirePath(),y=requirePool(),w=requireCollectionReference(),T=requireDocumentReference(),I=requireSerializer(),O=requireTimestamp(),E=requireTransaction(),C=requireUtil(),x=requireValidate(),j=requireWriteBatch(),k=require$$19.interfaces["google.firestore.v1.Firestore"],q=requireCollectionGroup();Object.defineProperty(t,"CollectionGroup",{enumerable:!0,get:function(){return q.CollectionGroup}});const G=requireRecursiveDelete(),$=requireTraceUtil(),W=requireDisabledTraceUtil(),K=requireEnabledTraceUtil();var z=requireCollectionReference();Object.defineProperty(t,"CollectionReference",{enumerable:!0,get:function(){return z.CollectionReference}});var Q=requireDocumentReference();Object.defineProperty(t,"DocumentReference",{enumerable:!0,get:function(){return Q.DocumentReference}});var Y=requireQuerySnapshot();Object.defineProperty(t,"QuerySnapshot",{enumerable:!0,get:function(){return Y.QuerySnapshot}});var te=requireQuery();Object.defineProperty(t,"Query",{enumerable:!0,get:function(){return te.Query}});var ae=requireBulkWriter();Object.defineProperty(t,"BulkWriter",{enumerable:!0,get:function(){return ae.BulkWriter}});var ue=requireDocument();Object.defineProperty(t,"DocumentSnapshot",{enumerable:!0,get:function(){return ue.DocumentSnapshot}}),Object.defineProperty(t,"QueryDocumentSnapshot",{enumerable:!0,get:function(){return ue.QueryDocumentSnapshot}});var ee=requireFieldValue();Object.defineProperty(t,"FieldValue",{enumerable:!0,get:function(){return ee.FieldValue}}),Object.defineProperty(t,"VectorValue",{enumerable:!0,get:function(){return ee.VectorValue}});var oe=requireFilter();Object.defineProperty(t,"Filter",{enumerable:!0,get:function(){return oe.Filter}});var de=requireWriteBatch();Object.defineProperty(t,"WriteBatch",{enumerable:!0,get:function(){return de.WriteBatch}}),Object.defineProperty(t,"WriteResult",{enumerable:!0,get:function(){return de.WriteResult}});var he=requireTransaction();Object.defineProperty(t,"Transaction",{enumerable:!0,get:function(){return he.Transaction}});var Ee=requireTimestamp();Object.defineProperty(t,"Timestamp",{enumerable:!0,get:function(){return Ee.Timestamp}});var fe=requireDocumentChange();Object.defineProperty(t,"DocumentChange",{enumerable:!0,get:function(){return fe.DocumentChange}});var Se=requirePath();Object.defineProperty(t,"FieldPath",{enumerable:!0,get:function(){return Se.FieldPath}});var be=requireGeoPoint();Object.defineProperty(t,"GeoPoint",{enumerable:!0,get:function(){return be.GeoPoint}});var Oe=requireQueryPartition();Object.defineProperty(t,"QueryPartition",{enumerable:!0,get:function(){return Oe.QueryPartition}});var ge=requireLogger();Object.defineProperty(t,"setLogFunction",{enumerable:!0,get:function(){return ge.setLogFunction}});var J=requireAggregate();Object.defineProperty(t,"Aggregate",{enumerable:!0,get:function(){return J.Aggregate}}),Object.defineProperty(t,"AggregateField",{enumerable:!0,get:function(){return J.AggregateField}});const c=require$$33.version;(0,v.setLibVersion)(c);const N="google-cloud-resource-prefix";t.MAX_REQUEST_RETRIES=5,t.DEFAULT_MAX_TRANSACTION_ATTEMPTS=5;t.DEFAULT_MAX_IDLE_CHANNELS=1;const A=100;class V{getBulkWriter(){return this._bulkWriter||(this._bulkWriter=this.bulkWriter()),this._bulkWriter}constructor(ie){this._settings={},this._settingsFrozen=!1,this._serializer=null,this._projectId=void 0,this._databaseId=void 0,this.registeredListenersCount=0,this.bulkWritersCount=0;const u={libName:"gccl",libVersion:c};ie&&ie.firebaseVersion&&(u.libVersion+=" fire/"+ie.firebaseVersion),ie&&ie.firebaseAdminVersion&&(u.libVersion+=" fire-admin/"+ie.firebaseAdminVersion),this.validateAndApplySettings({...ie,...u}),this._traceUtil=this.newTraceUtilInstance(this._settings);const P=k.retry_params.default;this._backoffSettings={initialDelayMs:P.initial_retry_delay_millis,maxDelayMs:P.max_retry_delay_millis,backoffFactor:P.retry_delay_multiplier};const M=this._settings.maxIdleChannels===void 0?t.DEFAULT_MAX_IDLE_CHANNELS:this._settings.maxIdleChannels;this._clientPool=new y.ClientPool(A,M,n=>{var L;let U;const X=!this._settings.preferRest||n?!1:"rest";let me;if(X?this._gaxFallback?me=this._gaxFallback:me=this._gaxFallback=requireFallback():this._gax?me=this._gax:me=this._gax=requireFallback(),this._settings.ssl===!1){const ke={sslCreds:((L=this._settings.grpc)!==null&&L!==void 0?L:requireFallback().grpc).credentials.createInsecure(),...this._settings,fallback:X};X&&(ke.protocol="http"),U=new e.exports.v1(ke,me)}else U=new e.exports.v1({...this._settings,fallback:X},me);return(0,v.logger)("clientFactory",null,"Initialized Firestore GAPIC Client (useFallback: %s)",X),U},n=>n.close()),(0,v.logger)("Firestore",null,"Initialized Firestore")}settings(ie){if((0,x.validateObject)("settings",ie),(0,x.validateString)("settings.projectId",ie.projectId,{optional:!0}),(0,x.validateString)("settings.databaseId",ie.databaseId,{optional:!0}),this._settingsFrozen)throw new Error("Firestore has already been initialized. You can only call settings() once, and only before calling any other methods on a Firestore object.");const u={...this._settings,...ie};this.validateAndApplySettings(u),this._traceUtil=this.newTraceUtilInstance(this._settings),this._settingsFrozen=!0}validateAndApplySettings(ie){var u;ie.projectId!==void 0&&((0,x.validateString)("settings.projectId",ie.projectId),this._projectId=ie.projectId),ie.databaseId!==void 0&&((0,x.validateString)("settings.databaseId",ie.databaseId),this._databaseId=ie.databaseId);let P=null;const M=(0,C.tryGetPreferRestEnvironmentVariable)();ie.preferRest===void 0&&M!==void 0&&(ie={...ie,preferRest:M}),s.FIRESTORE_EMULATOR_HOST?((0,x.validateHost)("FIRESTORE_EMULATOR_HOST",s.FIRESTORE_EMULATOR_HOST),ie={...ie,host:s.FIRESTORE_EMULATOR_HOST,ssl:!1},P=new g.URL(`http://${ie.host}`)):ie.host!==void 0&&((0,x.validateHost)("settings.host",ie.host),P=new g.URL(`http://${ie.host}`)),P!==null&&((ie.servicePath!==void 0&&ie.servicePath!==P.hostname||ie.apiEndpoint!==void 0&&ie.apiEndpoint!==P.hostname)&&console.warn(`The provided host (${P.hostname}) in "settings" does not match the existing host (${(u=ie.servicePath)!==null&&u!==void 0?u:ie.apiEndpoint}). Using the provided host.`),ie.servicePath=P.hostname,P.port!==""&&ie.port===void 0&&(ie.port=Number(P.port)),delete ie.host,delete ie.apiEndpoint),ie.ssl!==void 0&&(0,x.validateBoolean)("settings.ssl",ie.ssl),ie.maxIdleChannels!==void 0&&(0,x.validateInteger)("settings.maxIdleChannels",ie.maxIdleChannels,{minValue:0}),this._settings=ie,this._settings.toJSON=function(){const n=Object.assign({},this);return n.credentials&&(n.credentials={private_key:"***",client_email:"***"}),n},this._serializer=new I.Serializer(this)}newTraceUtilInstance(ie){let u=!0;if("FIRESTORE_ENABLE_TRACING"in s){const P=s.FIRESTORE_ENABLE_TRACING.toLowerCase();(P==="on"||P==="true")&&(u=!0),(P==="off"||P==="false")&&(u=!1)}return u?new K.EnabledTraceUtil(ie):new W.DisabledTraceUtil}get projectId(){if(this._projectId===void 0)throw new Error("INTERNAL ERROR: Client is not yet ready to issue requests.");return this._projectId}get databaseId(){return this._databaseId||_.DEFAULT_DATABASE_ID}get formattedName(){return`projects/${this.projectId}/databases/${this.databaseId}`}doc(ie){(0,_.validateResourcePath)("documentPath",ie);const u=_.ResourcePath.EMPTY.append(ie);if(!u.isDocument)throw new Error(`Value for argument "documentPath" must point to a document, but was "${ie}". Your path does not contain an even number of components.`);return new T.DocumentReference(this,u)}collection(ie){(0,_.validateResourcePath)("collectionPath",ie);const u=_.ResourcePath.EMPTY.append(ie);if(!u.isCollection)throw new Error(`Value for argument "collectionPath" must point to a collection, but was "${ie}". Your path does not contain an odd number of components.`);return new w.CollectionReference(this,u)}collectionGroup(ie){if(ie.indexOf("/")!==-1)throw new Error(`Invalid collectionId '${ie}'. Collection IDs must not contain '/'.`);return new q.CollectionGroup(this,ie,void 0)}batch(){return new j.WriteBatch(this)}bulkWriter(ie){return new d.BulkWriter(this,ie)}snapshot_(ie,u,P){let M,n;if(P===void 0||P==="protobufJS")M=X=>X,n=X=>X;else if(P==="json")M=a.timestampFromJson,n=a.fieldsFromJson;else throw new Error(`Unsupported encoding format. Expected "json" or "protobufJS", but was "${P}".`);let L,U;return typeof ie=="string"?(L=new T.DocumentReference(this,_.QualifiedResourcePath.fromSlashSeparatedString(ie)),U=new h.DocumentSnapshotBuilder(L)):(L=new T.DocumentReference(this,_.QualifiedResourcePath.fromSlashSeparatedString(ie.name)),U=new h.DocumentSnapshotBuilder(L),U.fieldsProto=ie.fields?n(ie.fields):{},U.createTime=O.Timestamp.fromProto(M(ie.createTime,"documentOrName.createTime")),U.updateTime=O.Timestamp.fromProto(M(ie.updateTime,"documentOrName.updateTime"))),u&&(U.readTime=O.Timestamp.fromProto(M(u,"readTime"))),U.build()}bundle(ie){return new l.BundleBuilder(ie||(0,C.autoId)())}runTransaction(ie,u){(0,x.validateFunction)("updateFunction",ie);const P=(0,C.requestTag)();u&&((0,x.validateObject)("transactionOptions",u),(0,x.validateBoolean)("transactionOptions.readOnly",u.readOnly,{optional:!0}),u.readOnly?(0,x.validateTimestamp)("transactionOptions.readTime",u.readTime,{optional:!0}):(0,x.validateInteger)("transactionOptions.maxAttempts",u.maxAttempts,{optional:!0,minValue:1}));const M=new E.Transaction(this,P,u);return this.initializeIfNeeded(P).then(()=>M.runTransaction(ie))}listCollections(){return new T.DocumentReference(this,_.ResourcePath.EMPTY).listCollections()}getAll(...ie){return this._traceUtil.startActiveSpan($.SPAN_NAME_BATCH_GET_DOCUMENTS,()=>{(0,x.validateMinNumberOfArguments)("Firestore.getAll",ie,1);const{documents:u,fieldMask:P}=(0,E.parseGetAllArguments)(ie);this._traceUtil.currentSpan().setAttributes({[$.ATTRIBUTE_KEY_IS_TRANSACTIONAL]:!1,[$.ATTRIBUTE_KEY_DOC_COUNT]:u.length});const M=(0,C.requestTag)(),n=Error().stack;return this.initializeIfNeeded(M).then(()=>new o.DocumentReader(this,u,P).get(M)).catch(L=>{throw(0,C.wrapError)(L,n)})})}registerListener(){this.registeredListenersCount+=1}unregisterListener(){this.registeredListenersCount-=1}_incrementBulkWritersCount(){this.bulkWritersCount+=1}_decrementBulkWritersCount(){this.bulkWritersCount-=1}recursiveDelete(ie,u){return this._recursiveDelete(ie,G.RECURSIVE_DELETE_MAX_PENDING_OPS,G.RECURSIVE_DELETE_MIN_PENDING_OPS,u)}_recursiveDelete(ie,u,P,M){const n=M??this.getBulkWriter();return new G.RecursiveDelete(this,n,ie,u,P).run()}async terminate(){return this._bulkWriter&&(await this._bulkWriter.close(),this._bulkWriter=void 0),this.registeredListenersCount>0||this.bulkWritersCount>0?Promise.reject(`All onSnapshot() listeners must be unsubscribed, and all BulkWriter instances must be closed before terminating the client. There are ${this.registeredListenersCount} active listeners and ${this.bulkWritersCount} open BulkWriter instances.`):this._clientPool.terminate()}toJSON(){return{projectId:this._projectId}}async initializeIfNeeded(ie){if(this._settingsFrozen=!0,this._settings.ssl===!1&&(this._settings.customHeaders={Authorization:"Bearer owner",...this._settings.customHeaders}),this._projectId===void 0)try{this._projectId=await this._clientPool.run(ie,!1,u=>u.getProjectId()),(0,v.logger)("Firestore.initializeIfNeeded",null,"Detected project ID: %s",this._projectId),this._traceUtil.recordProjectId(this.projectId)}catch(u){return(0,v.logger)("Firestore.initializeIfNeeded",null,"Failed to detect project ID: %s",u),Promise.reject(u)}}createCallOptions(ie,u){var P;const M={otherArgs:{headers:{[N]:this.formattedName,...this._settings.customHeaders,...(P=this._settings[ie])===null||P===void 0?void 0:P.customHeaders}}};if(u){const n=(0,C.getRetryParams)(ie);M.retry=new(requireFallback()).RetryOptions(u,n)}return M}async _retry(ie,u,P){const M=new m.ExponentialBackoff;let n;for(let L=0;L<t.MAX_REQUEST_RETRIES;++L){n&&(0,v.logger)("Firestore._retry",u,"Retrying request that failed with error:",n);try{return await M.backoffAndWait(),await P()}catch(U){if(n=U,(0,C.isPermanentRpcError)(U,ie))break}}return(0,v.logger)("Firestore._retry",u,"Request failed with error:",n),Promise.reject(n)}_initializeStream(ie,u,P,M){const n=new p.PassThrough({objectMode:!0});n.pause();let L=!1;return new Promise((U,X)=>{function me(){L||(L=!0,(0,v.logger)("Firestore._initializeStream",P,"Stream ready"),U(n))}function Ie(){(0,v.logger)("Firestore._initializeStream",P,"Received stream end"),n.unpipe(ie),U(n),u.resolve()}function Le(ke){L?((0,v.logger)("Firestore._initializeStream",P,"Received stream error:",ke),setImmediate(()=>{n.emit("error",ke)})):((0,v.logger)("Firestore._initializeStream",P,"Received initial error:",ke),X(ke))}ie.on("data",()=>me()),ie.on("error",ke=>Le(ke)),ie.on("end",()=>Ie()),ie.on("close",()=>Ie()),ie.on("finish",()=>Ie()),ie.pipe(n),M&&((0,v.logger)("Firestore._initializeStream",P,"Sending request: %j",M),ie.write(M,"utf-8",ke=>{ke?Le(ke):((0,v.logger)("Firestore._initializeStream",P,"Marking stream as healthy"),me())}))})}request(ie,u,P,M){const n=this.createCallOptions(ie,M);return this._clientPool.run(P,!1,async L=>{try{(0,v.logger)("Firestore.request",P,"Sending request: %j",u);const[U]=await L[ie](u,n);return(0,v.logger)("Firestore.request",P,"Received response: %j",U),U}catch(U){return(0,v.logger)("Firestore.request",P,"Received error:",U),Promise.reject(U)}})}requestStream(ie,u,P,M){const n=this.createCallOptions(ie),L=ie==="listen";let U=0;const X=100;return this._retry(ie,M,()=>{const me=new C.Deferred;return this._clientPool.run(M,u,async Ie=>{(0,v.logger)("Firestore.requestStream",M,"Sending request: %j",P),this._traceUtil.currentSpan().addEvent(`Firestore.${ie}: Start`);try{const Le=L?Ie[ie](n):Ie[ie](P,n),ke=new p.Transform({objectMode:!0,transform:(bt,dt,Et)=>{(0,v.logger)("Firestore.requestStream",M,"Received response: %j",bt),U++,U===1?this._traceUtil.currentSpan().addEvent(`Firestore.${ie}: First response received`):U%X===0&&this._traceUtil.currentSpan().addEvent(`Firestore.${ie}: Received ${U} responses`),Et()}});Le.pipe(ke);const ze=new C.Deferred,nt=await this._initializeStream(Le,ze,M,L?P:void 0);return nt.on("end",()=>{Le.end(),this._traceUtil.currentSpan().addEvent(`Firestore.${ie}: Completed`,{[$.ATTRIBUTE_KEY_NUM_RESPONSES]:U})}),me.resolve(nt),ze.promise}catch(Le){me.reject(Le)}}),me.promise})}}t.Firestore=V,t.default=V;const ne=e.exports;e.exports=V,e.exports=Object.assign(e.exports,ne),Object.defineProperty(e.exports,"v1beta1",{get:()=>requireV1beta1()}),Object.defineProperty(e.exports,"v1",{get:()=>requireV1()}),Object.defineProperty(e.exports,"GrpcStatus",{get:()=>requireFallback().Status})})(src$2,src$2.exports)),src$2.exports}var machineLearning$1={},storage={},app={};var hasRequiredApp;function requireApp(){return hasRequiredApp||(hasRequiredApp=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SDK_VERSION=e.AppErrorCodes=e.FirebaseAppError=e.refreshToken=e.cert=e.applicationDefault=e.deleteApp=e.getApps=e.getApp=e.initializeApp=void 0;const t=requireUtils$2();var s=requireLifecycle();Object.defineProperty(e,"initializeApp",{enumerable:!0,get:function(){return s.initializeApp}}),Object.defineProperty(e,"getApp",{enumerable:!0,get:function(){return s.getApp}}),Object.defineProperty(e,"getApps",{enumerable:!0,get:function(){return s.getApps}}),Object.defineProperty(e,"deleteApp",{enumerable:!0,get:function(){return s.deleteApp}});var p=requireCredentialFactory();Object.defineProperty(e,"applicationDefault",{enumerable:!0,get:function(){return p.applicationDefault}}),Object.defineProperty(e,"cert",{enumerable:!0,get:function(){return p.cert}}),Object.defineProperty(e,"refreshToken",{enumerable:!0,get:function(){return p.refreshToken}});var g=requireError();Object.defineProperty(e,"FirebaseAppError",{enumerable:!0,get:function(){return g.FirebaseAppError}}),Object.defineProperty(e,"AppErrorCodes",{enumerable:!0,get:function(){return g.AppErrorCodes}}),e.SDK_VERSION=(0,t.getSdkVersion)()})(app)),app}var utils={};var hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1,Object.defineProperty(utils,"__esModule",{value:!0}),utils.getFirebaseMetadata=e;function e(t,s){const p=`${t}/b/${s.bucket.name}/o/${encodeURIComponent(s.name)}`;return new Promise((g,m)=>{s.storage.makeAuthenticatedRequest({method:"GET",uri:p},(d,l)=>{d?m(d):g(l)})})}return utils}var hasRequiredStorage;function requireStorage(){return hasRequiredStorage||(hasRequiredStorage=1,(function(e){var t={};Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=void 0,e.getStorage=l,e.getDownloadURL=a;const s=requireApp(),p=requireStorage$1(),g=requireError(),m=requireUtils();var d=requireStorage$1();Object.defineProperty(e,"Storage",{enumerable:!0,get:function(){return d.Storage}});function l(o){return typeof o>"u"&&(o=(0,s.getApp)()),o.getOrInitService("storage",v=>new p.Storage(v))}async function a(o){const h=(t.STORAGE_EMULATOR_HOST||"https://firebasestorage.googleapis.com")+"/v0",{downloadTokens:v}=await(0,m.getFirebaseMetadata)(h,o);if(!v)throw new g.FirebaseError({code:"storage/no-download-token",message:"No download token available. Please create one in the Firebase Console."});const[_]=v.split(",");return`${h}/b/${o.bucket.name}/o/${encodeURIComponent(o.name)}?alt=media&token=${_}`}})(storage)),storage}var machineLearningApiClient={},machineLearningUtils={};var hasRequiredMachineLearningUtils;function requireMachineLearningUtils(){if(hasRequiredMachineLearningUtils)return machineLearningUtils;hasRequiredMachineLearningUtils=1;Object.defineProperty(machineLearningUtils,"__esModule",{value:!0}),machineLearningUtils.FirebaseMachineLearningError=void 0;const e=requireError();class t extends e.PrefixedFirebaseError{static fromOperationError(p,g){switch(p){case 1:return new t("cancelled",g);case 2:return new t("unknown-error",g);case 3:return new t("invalid-argument",g);case 4:return new t("deadline-exceeded",g);case 5:return new t("not-found",g);case 6:return new t("already-exists",g);case 7:return new t("permission-denied",g);case 8:return new t("resource-exhausted",g);case 9:return new t("failed-precondition",g);case 10:return new t("aborted",g);case 11:return new t("out-of-range",g);case 13:return new t("internal-error",g);case 14:return new t("service-unavailable",g);case 15:return new t("data-loss",g);case 16:return new t("unauthenticated",g);default:return new t("unknown-error",g)}}constructor(p,g){super("machine-learning",p,g)}}return machineLearningUtils.FirebaseMachineLearningError=t,machineLearningUtils}var hasRequiredMachineLearningApiClient;function requireMachineLearningApiClient(){if(hasRequiredMachineLearningApiClient)return machineLearningApiClient;hasRequiredMachineLearningApiClient=1;Object.defineProperty(machineLearningApiClient,"__esModule",{value:!0}),machineLearningApiClient.MachineLearningApiClient=void 0,machineLearningApiClient.isGcsTfliteModelOptions=h;const e=requireApiRequest(),t=requireError(),s=requireUtils$2(),p=requireValidator$1(),g=requireMachineLearningUtils(),m="https://firebaseml.googleapis.com/v1beta2",d={"X-Firebase-Client":`fire-admin-node/${s.getSdkVersion()}`},l=12e4,a=3e3,o=3e4;function h(w){return typeof w?.tfliteModel?.gcsTfliteUri<"u"}class v{constructor(T){if(this.app=T,!p.isNonNullObject(T)||!("options"in T))throw new g.FirebaseMachineLearningError("invalid-argument","First argument passed to admin.machineLearning() must be a valid Firebase app instance.");this.httpClient=new e.AuthorizedHttpClient(T)}createModel(T){if(!p.isNonNullObject(T)||!p.isNonEmptyString(T.displayName)){const I=new g.FirebaseMachineLearningError("invalid-argument","Invalid model content.");return Promise.reject(I)}return this.getProjectUrl().then(I=>{const O={method:"POST",url:`${I}/models`,data:T};return this.sendRequest(O)})}updateModel(T,I,O){if(!p.isNonEmptyString(T)||!p.isNonNullObject(I)||!p.isNonEmptyArray(O)){const E=new g.FirebaseMachineLearningError("invalid-argument","Invalid model or mask content.");return Promise.reject(E)}return this.getProjectUrl().then(E=>{const C={method:"PATCH",url:`${E}/models/${T}?updateMask=${O.join()}`,data:I};return this.sendRequest(C)})}getModel(T){return Promise.resolve().then(()=>this.getModelName(T)).then(I=>this.getResourceWithShortName(I))}getOperation(T){return Promise.resolve().then(()=>this.getResourceWithFullName(T))}listModels(T={}){if(!p.isNonNullObject(T)){const I=new g.FirebaseMachineLearningError("invalid-argument","Invalid ListModelsOptions");return Promise.reject(I)}if(typeof T.filter<"u"&&!p.isNonEmptyString(T.filter)){const I=new g.FirebaseMachineLearningError("invalid-argument","Invalid list filter.");return Promise.reject(I)}if(typeof T.pageSize<"u"){if(!p.isNumber(T.pageSize)){const I=new g.FirebaseMachineLearningError("invalid-argument","Invalid page size.");return Promise.reject(I)}if(T.pageSize<1||T.pageSize>100){const I=new g.FirebaseMachineLearningError("invalid-argument","Page size must be between 1 and 100.");return Promise.reject(I)}}if(typeof T.pageToken<"u"&&!p.isNonEmptyString(T.pageToken)){const I=new g.FirebaseMachineLearningError("invalid-argument","Next page token must be a non-empty string.");return Promise.reject(I)}return this.getProjectUrl().then(I=>{const O={method:"GET",url:`${I}/models`,data:T};return this.sendRequest(O)})}deleteModel(T){return this.getProjectUrl().then(I=>{const O=this.getModelName(T),E={method:"DELETE",url:`${I}/${O}`};return this.sendRequest(E)})}handleOperation(T,I){if(T.done){if(T.response)return Promise.resolve(T.response);if(T.error){const C=g.FirebaseMachineLearningError.fromOperationError(T.error.code,T.error.message);return Promise.reject(C)}throw new g.FirebaseMachineLearningError("invalid-server-response","Invalid operation response.")}if(I?.wait)return this.pollOperationWithExponentialBackoff(T.name,I);const O=T.metadata||{};if(!(O["@type"]||"").includes("ModelOperationMetadata"))throw new g.FirebaseMachineLearningError("invalid-server-response",`Unknown Metadata type: ${JSON.stringify(O)}`);return this.getModel(y(O.name))}pollOperationWithExponentialBackoff(T,I){const O=I?.maxTimeMillis??l,E=I?.baseWaitMillis??a,C=I?.maxWaitMillis??o;return new e.ExponentialBackoffPoller(E,C,O).poll(()=>this.getOperation(T).then(j=>{if(!j.done)return null;if(j.error)throw g.FirebaseMachineLearningError.fromOperationError(j.error.code,j.error.message);return j.response}))}getResourceWithShortName(T){return this.getProjectUrl().then(I=>{const O={method:"GET",url:`${I}/${T}`};return this.sendRequest(O)})}getResourceWithFullName(T){const I={method:"GET",url:`${m}/${T}`};return this.sendRequest(I)}sendRequest(T){return T.headers=d,this.httpClient.send(T).then(I=>I.data).catch(I=>{throw this.toFirebaseError(I)})}toFirebaseError(T){if(T instanceof t.PrefixedFirebaseError)return T;const I=T.response;if(!I.isJson())return new g.FirebaseMachineLearningError("unknown-error",`Unexpected response with status: ${I.status} and body: ${I.text}`);const O=I.data.error||{};let E="unknown-error";O.status&&O.status in _&&(E=_[O.status]);const C=O.message||`Unknown server error: ${I.text}`;return new g.FirebaseMachineLearningError(E,C)}getProjectUrl(){return this.getProjectIdPrefix().then(T=>`${m}/${T}`)}getProjectIdPrefix(){return this.projectIdPrefix?Promise.resolve(this.projectIdPrefix):s.findProjectId(this.app).then(T=>{if(!p.isNonEmptyString(T))throw new g.FirebaseMachineLearningError("invalid-argument","Failed to determine project ID. Initialize the SDK with service account credentials, or set project ID as an app option. Alternatively, set the GOOGLE_CLOUD_PROJECT environment variable.");return this.projectIdPrefix=`projects/${T}`,this.projectIdPrefix})}getModelName(T){if(!p.isNonEmptyString(T))throw new g.FirebaseMachineLearningError("invalid-argument","Model ID must be a non-empty string.");if(T.indexOf("/")!==-1)throw new g.FirebaseMachineLearningError("invalid-argument",'Model ID must not contain any "/" characters.');return`models/${T}`}}machineLearningApiClient.MachineLearningApiClient=v;const _={INVALID_ARGUMENT:"invalid-argument",NOT_FOUND:"not-found",RESOURCE_EXHAUSTED:"resource-exhausted",UNAUTHENTICATED:"authentication-error",UNKNOWN:"unknown-error"};function y(w){return w.split("/").pop()}return machineLearningApiClient}var hasRequiredMachineLearning$1;function requireMachineLearning$1(){if(hasRequiredMachineLearning$1)return machineLearning$1;hasRequiredMachineLearning$1=1;Object.defineProperty(machineLearning$1,"__esModule",{value:!0}),machineLearning$1.Model=machineLearning$1.MachineLearning=void 0;const e=requireStorage(),t=requireError(),s=requireValidator$1(),p=requireDeepCopy(),g=requireUtils$2(),m=requireMachineLearningApiClient(),d=requireMachineLearningUtils();class l{constructor(v){if(!s.isNonNullObject(v)||!("options"in v))throw new t.FirebaseError({code:"machine-learning/invalid-argument",message:"First argument passed to admin.machineLearning() must be a valid Firebase app instance."});this.appInternal=v,this.client=new m.MachineLearningApiClient(v)}get app(){return this.appInternal}createModel(v){return this.signUrlIfPresent(v).then(_=>this.client.createModel(_)).then(_=>this.client.handleOperation(_)).then(_=>new a(_,this.client))}updateModel(v,_){const y=g.generateUpdateMask(_);return this.signUrlIfPresent(_).then(w=>this.client.updateModel(v,w,y)).then(w=>this.client.handleOperation(w)).then(w=>new a(w,this.client))}publishModel(v){return this.setPublishStatus(v,!0)}unpublishModel(v){return this.setPublishStatus(v,!1)}getModel(v){return this.client.getModel(v).then(_=>new a(_,this.client))}listModels(v={}){return this.client.listModels(v).then(_=>{if(!s.isNonNullObject(_))throw new d.FirebaseMachineLearningError("invalid-argument",`Invalid ListModels response: ${JSON.stringify(_)}`);let y=[];_.models&&(y=_.models.map(T=>new a(T,this.client)));const w={models:y};return _.nextPageToken&&(w.pageToken=_.nextPageToken),w})}deleteModel(v){return this.client.deleteModel(v)}setPublishStatus(v,_){const y=["state.published"],w={state:{published:_}};return this.client.updateModel(v,w,y).then(T=>this.client.handleOperation(T)).then(T=>new a(T,this.client))}signUrlIfPresent(v){const _=(0,p.deepCopy)(v);return(0,m.isGcsTfliteModelOptions)(_)?this.signUrl(_.tfliteModel.gcsTfliteUri).then(y=>(_.tfliteModel.gcsTfliteUri=y,_)).catch(y=>{throw new d.FirebaseMachineLearningError("internal-error",`Error during signing upload url: ${y.message}`)}):Promise.resolve(_)}signUrl(v){const T=/^gs:\/\/([a-z0-9_.-]{3,63})\/(.+)$/.exec(v);if(!T)throw new d.FirebaseMachineLearningError("invalid-argument",`Invalid unsigned url: ${v}`);const I=T[1],O=T[2];return(0,e.getStorage)(this.app).bucket(I).file(O).getSignedUrl({action:"read",expires:Date.now()+6e5}).then(x=>x[0])}}machineLearning$1.MachineLearning=l;class a{constructor(v,_){this.model=a.validateAndClone(v),this.client=_}get modelId(){return o(this.model.name)}get displayName(){return this.model.displayName}get tags(){return this.model.tags||[]}get createTime(){return new Date(this.model.createTime).toUTCString()}get updateTime(){return new Date(this.model.updateTime).toUTCString()}get validationError(){return this.model.state?.validationError?.message}get published(){return this.model.state?.published||!1}get etag(){return this.model.etag}get modelHash(){return this.model.modelHash}get tfliteModel(){return(0,p.deepCopy)(this.model.tfliteModel)}get locked(){return(this.model.activeOperations?.length??0)>0}toJSON(){const v={modelId:this.modelId,displayName:this.displayName,tags:this.tags,createTime:this.createTime,updateTime:this.updateTime,published:this.published,etag:this.etag,locked:this.locked};return this.validationError&&(v.validationError=this.validationError),this.modelHash&&(v.modelHash=this.modelHash),this.tfliteModel&&(v.tfliteModel=this.tfliteModel),v}waitForUnlocked(v){return(this.model.activeOperations?.length??0)>0?this.client.handleOperation(this.model.activeOperations[0],{wait:!0,maxTimeMillis:v}).then(_=>{this.model=a.validateAndClone(_)}):Promise.resolve()}static validateAndClone(v){if(!s.isNonNullObject(v)||!s.isNonEmptyString(v.name)||!s.isNonEmptyString(v.createTime)||!s.isNonEmptyString(v.updateTime)||!s.isNonEmptyString(v.displayName)||!s.isNonEmptyString(v.etag))throw new d.FirebaseMachineLearningError("invalid-server-response",`Invalid Model response: ${JSON.stringify(v)}`);const _=(0,p.deepCopy)(v);return v.tfliteModel&&!s.isNonEmptyString(v.tfliteModel.gcsTfliteUri)&&delete _.tfliteModel,_["@type"]&&delete _["@type"],_}}machineLearning$1.Model=a;function o(h){return h.split("/").pop()}return machineLearning$1}var installations$1={},installationsRequestHandler={};var hasRequiredInstallationsRequestHandler;function requireInstallationsRequestHandler(){if(hasRequiredInstallationsRequestHandler)return installationsRequestHandler;hasRequiredInstallationsRequestHandler=1;Object.defineProperty(installationsRequestHandler,"__esModule",{value:!0}),installationsRequestHandler.FirebaseInstallationsRequestHandler=void 0;const e=requireError(),t=requireApiRequest(),s=requireUtils$2(),p=requireValidator$1(),g="console.firebase.google.com",m="/v1/",d=1e4,l={400:"Malformed installation ID argument.",401:"Request not authorized.",403:"Project does not match installation ID or the client does not have sufficient privileges.",404:"Failed to find the installation ID.",409:"Already deleted.",429:"Request throttled out by the backend server.",500:"Internal server error.",503:"Backend servers are over capacity. Try again later."};class a{constructor(h){this.app=h,this.host=g,this.timeout=d,this.httpClient=new t.AuthorizedHttpClient(h)}deleteInstallation(h){return p.isNonEmptyString(h)?this.invokeRequestHandler(new t.ApiSettings(h,"DELETE")):Promise.reject(new e.FirebaseInstallationsError(e.InstallationsClientErrorCode.INVALID_INSTALLATION_ID,"Installation ID must be a non-empty string."))}invokeRequestHandler(h){return this.getPathPrefix().then(v=>{const _={url:`https://${this.host}${v}${h.getEndpoint()}`,method:h.getHttpMethod(),timeout:this.timeout};return this.httpClient.send(_)}).then(()=>{}).catch(v=>{if(v instanceof t.RequestResponseError){const _=v.response,y=_.isJson()&&"error"in _.data?_.data.error:_.text,w=l[_.status],T=w?`Installation ID "${h.getEndpoint()}": ${w}`:y;throw new e.FirebaseInstallationsError(e.InstallationsClientErrorCode.API_ERROR,T)}throw v})}getPathPrefix(){return this.path?Promise.resolve(this.path):s.findProjectId(this.app).then(h=>{if(!p.isNonEmptyString(h))throw new e.FirebaseInstallationsError(e.InstallationsClientErrorCode.INVALID_PROJECT_ID,"Failed to determine project ID for Installations. Initialize the SDK with service account credentials or set project ID as an app option. Alternatively set the GOOGLE_CLOUD_PROJECT environment variable.");return this.path=m+`project/${h}/instanceId/`,this.path})}}return installationsRequestHandler.FirebaseInstallationsRequestHandler=a,installationsRequestHandler}var hasRequiredInstallations$1;function requireInstallations$1(){if(hasRequiredInstallations$1)return installations$1;hasRequiredInstallations$1=1;Object.defineProperty(installations$1,"__esModule",{value:!0}),installations$1.Installations=void 0;const e=requireError(),t=requireInstallationsRequestHandler(),s=requireValidator$1();class p{constructor(m){if(!s.isNonNullObject(m)||!("options"in m))throw new e.FirebaseInstallationsError(e.InstallationsClientErrorCode.INVALID_ARGUMENT,"First argument passed to admin.installations() must be a valid Firebase app instance.");this.app_=m,this.requestHandler=new t.FirebaseInstallationsRequestHandler(m)}deleteInstallation(m){return this.requestHandler.deleteInstallation(m)}get app(){return this.app_}}return installations$1.Installations=p,installations$1}var instanceId$1={},installations={};var hasRequiredInstallations;function requireInstallations(){return hasRequiredInstallations||(hasRequiredInstallations=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InstallationsClientErrorCode=e.FirebaseInstallationsError=e.Installations=void 0,e.getInstallations=p;const t=requireApp(),s=requireInstallations$1();Object.defineProperty(e,"Installations",{enumerable:!0,get:function(){return s.Installations}});function p(m){return typeof m>"u"&&(m=(0,t.getApp)()),m.getOrInitService("installations",l=>new s.Installations(l))}var g=requireError();Object.defineProperty(e,"FirebaseInstallationsError",{enumerable:!0,get:function(){return g.FirebaseInstallationsError}}),Object.defineProperty(e,"InstallationsClientErrorCode",{enumerable:!0,get:function(){return g.InstallationsClientErrorCode}})})(installations)),installations}var hasRequiredInstanceId$1;function requireInstanceId$1(){if(hasRequiredInstanceId$1)return instanceId$1;hasRequiredInstanceId$1=1;Object.defineProperty(instanceId$1,"__esModule",{value:!0}),instanceId$1.InstanceId=void 0;const e=requireInstallations(),t=requireError(),s=requireValidator$1();class p{constructor(m){if(!s.isNonNullObject(m)||!("options"in m))throw new t.FirebaseInstanceIdError(t.InstanceIdClientErrorCode.INVALID_ARGUMENT,"First argument passed to instanceId() must be a valid Firebase app instance.");this.app_=m}deleteInstanceId(m){return(0,e.getInstallations)(this.app).deleteInstallation(m).catch(d=>{if(d instanceof t.FirebaseInstallationsError){let l=d.code.replace("installations/","");throw l===t.InstallationsClientErrorCode.INVALID_INSTALLATION_ID.code&&(l=t.InstanceIdClientErrorCode.INVALID_INSTANCE_ID.code),new t.FirebaseInstanceIdError({code:l,message:d.message})}throw d})}get app(){return this.app_}}return instanceId$1.InstanceId=p,instanceId$1}var projectManagement$1={},androidApp={},projectManagementApiRequestInternal={},hasRequiredProjectManagementApiRequestInternal;function requireProjectManagementApiRequestInternal(){if(hasRequiredProjectManagementApiRequestInternal)return projectManagementApiRequestInternal;hasRequiredProjectManagementApiRequestInternal=1;Object.defineProperty(projectManagementApiRequestInternal,"__esModule",{value:!0}),projectManagementApiRequestInternal.ProjectManagementRequestHandler=void 0,projectManagementApiRequestInternal.assertServerResponse=v;const e=requireApiRequest(),t=requireError(),s=requireUtils$2(),p=requireValidator$1(),g="firebase.googleapis.com:443",m="/v1/",d="/v1beta1/",l={"X-Client-Version":`Node/Admin/${(0,s.getSdkVersion)()}`},a=1e4,o=100,h={sha1:"SHA_1",sha256:"SHA_256"};function v(y,w,T){if(!y)throw new t.FirebaseProjectManagementError("invalid-server-response",`${T} Response data: ${JSON.stringify(w,null,2)}`)}class _{static wrapAndRethrowHttpError(w,T){let I,O;switch(w){case 400:I="invalid-argument",O="Invalid argument provided.";break;case 401:case 403:I="authentication-error",O="An error occurred when trying to authenticate. Make sure the credential used to authenticate this SDK has the proper permissions. See https://firebase.google.com/docs/admin/setup for setup instructions.";break;case 404:I="not-found",O="The specified entity could not be found.";break;case 409:I="already-exists",O="The specified entity already exists.";break;case 500:I="internal-error",O="An internal error has occurred. Please retry the request.";break;case 503:I="service-unavailable",O="The server could not process the request in time. See the error documentation for more details.";break;default:I="unknown-error",O="An unknown server error was returned."}throw T||(T="<missing>"),new t.FirebaseProjectManagementError(I,`${O} Status code: ${w}. Raw server response: "${T}".`)}constructor(w){this.baseUrl=`https://${g}${m}`,this.baseBetaUrl=`https://${g}${d}`,this.httpClient=new e.AuthorizedHttpClient(w)}listAndroidApps(w){return this.invokeRequestHandler("GET",`${w}/androidApps?page_size=${o}`,null,"v1beta1")}listIosApps(w){return this.invokeRequestHandler("GET",`${w}/iosApps?page_size=${o}`,null,"v1beta1")}listAppMetadata(w){return this.invokeRequestHandler("GET",`${w}:searchApps?page_size=${o}`,null,"v1beta1")}createAndroidApp(w,T,I){const O={packageName:T};return p.isNonEmptyString(I)&&(O.displayName=I),this.invokeRequestHandler("POST",`${w}/androidApps`,O,"v1beta1").then(E=>(v(p.isNonNullObject(E),E,"createAndroidApp's responseData must be a non-null object."),v(p.isNonEmptyString(E.name),E,"createAndroidApp's responseData.name must be a non-empty string."),this.pollRemoteOperationWithExponentialBackoff(E.name)))}createIosApp(w,T,I){const O={bundleId:T};return p.isNonEmptyString(I)&&(O.displayName=I),this.invokeRequestHandler("POST",`${w}/iosApps`,O,"v1beta1").then(E=>(v(p.isNonNullObject(E),E,"createIosApp's responseData must be a non-null object."),v(p.isNonEmptyString(E.name),E,"createIosApp's responseData.name must be a non-empty string."),this.pollRemoteOperationWithExponentialBackoff(E.name)))}setDisplayName(w,T){const I={displayName:T};return this.invokeRequestHandler("PATCH",`${w}?update_mask=display_name`,I,"v1beta1").then(()=>{})}getAndroidShaCertificates(w){return this.invokeRequestHandler("GET",`${w}/sha`,null,"v1beta1")}addAndroidShaCertificate(w,T){const I={shaHash:T.shaHash,certType:h[T.certType]};return this.invokeRequestHandler("POST",`${w}/sha`,I,"v1beta1").then(()=>{})}getConfig(w){return this.invokeRequestHandler("GET",`${w}/config`,null,"v1beta1")}getResource(w){return this.invokeRequestHandler("GET",w,null,"v1beta1")}deleteResource(w){return this.invokeRequestHandler("DELETE",w,null,"v1beta1").then(()=>{})}pollRemoteOperationWithExponentialBackoff(w){return new e.ExponentialBackoffPoller().poll(()=>this.invokeRequestHandler("GET",w,null).then(I=>{if(I.error){const O=I.error.code||500,E=I.error.message||JSON.stringify(I.error);_.wrapAndRethrowHttpError(O,E)}return I.done?I.response:null}))}invokeRequestHandler(w,T,I,O="v1"){const E=O==="v1"?this.baseUrl:this.baseBetaUrl,C={method:w,url:`${E}${T}`,headers:l,data:I,timeout:a};return this.httpClient.send(C).then(x=>{if(!x.isJson())throw new e.RequestResponseError(x);return x.data}).catch(x=>{throw x instanceof e.RequestResponseError&&_.wrapAndRethrowHttpError(x.response.status,x.response.text),x})}}return projectManagementApiRequestInternal.ProjectManagementRequestHandler=_,projectManagementApiRequestInternal}var appMetadata={};var hasRequiredAppMetadata;function requireAppMetadata(){if(hasRequiredAppMetadata)return appMetadata;hasRequiredAppMetadata=1;Object.defineProperty(appMetadata,"__esModule",{value:!0}),appMetadata.AppPlatform=void 0;var e;return(function(t){t.PLATFORM_UNKNOWN="PLATFORM_UNKNOWN",t.IOS="IOS",t.ANDROID="ANDROID"})(e||(appMetadata.AppPlatform=e={})),appMetadata}var hasRequiredAndroidApp;function requireAndroidApp(){if(hasRequiredAndroidApp)return androidApp;hasRequiredAndroidApp=1;Object.defineProperty(androidApp,"__esModule",{value:!0}),androidApp.ShaCertificate=androidApp.AndroidApp=void 0;const e=requireError(),t=requireValidator$1(),s=requireProjectManagementApiRequestInternal(),p=requireAppMetadata();class g{constructor(l,a){if(this.appId=l,this.requestHandler=a,!t.isNonEmptyString(l))throw new e.FirebaseProjectManagementError("invalid-argument","appId must be a non-empty string.");this.resourceName=`projects/-/androidApps/${l}`}getMetadata(){return this.requestHandler.getResource(this.resourceName).then(l=>((0,s.assertServerResponse)(t.isNonNullObject(l),l,"getMetadata()'s responseData must be a non-null object."),["name","appId","projectId","packageName"].forEach(h=>{(0,s.assertServerResponse)(t.isNonEmptyString(l[h]),l,`getMetadata()'s responseData.${h} must be a non-empty string.`)}),{platform:p.AppPlatform.ANDROID,resourceName:l.name,appId:l.appId,displayName:l.displayName||null,projectId:l.projectId,packageName:l.packageName}))}setDisplayName(l){return this.requestHandler.setDisplayName(this.resourceName,l)}getShaCertificates(){return this.requestHandler.getAndroidShaCertificates(this.resourceName).then(l=>{if((0,s.assertServerResponse)(t.isNonNullObject(l),l,"getShaCertificates()'s responseData must be a non-null object."),!l.certificates)return[];(0,s.assertServerResponse)(t.isArray(l.certificates),l,'"certificates" field must be present in the getShaCertificates() response data.');const a=["name","shaHash"];return l.certificates.map(o=>(a.forEach(h=>{(0,s.assertServerResponse)(t.isNonEmptyString(o[h]),l,`getShaCertificates()'s responseData.certificates[].${h} must be a non-empty string.`)}),new m(o.shaHash,o.name)))})}addShaCertificate(l){return this.requestHandler.addAndroidShaCertificate(this.resourceName,l)}deleteShaCertificate(l){if(!l.resourceName)throw new e.FirebaseProjectManagementError("invalid-argument","Specified certificate does not include a resourceName. (Use AndroidApp.getShaCertificates() to retrieve certificates with a resourceName.");return this.requestHandler.deleteResource(l.resourceName)}getConfig(){return this.requestHandler.getConfig(this.resourceName).then(l=>{(0,s.assertServerResponse)(t.isNonNullObject(l),l,"getConfig()'s responseData must be a non-null object.");const a=l.configFileContents;return(0,s.assertServerResponse)(t.isBase64String(a),l,"getConfig()'s responseData.configFileContents must be a base64 string."),Buffer.from(a,"base64").toString("utf8")})}}androidApp.AndroidApp=g;class m{constructor(l,a){if(this.shaHash=l,this.resourceName=a,/^[a-fA-F0-9]{40}$/.test(l))this.certType="sha1";else if(/^[a-fA-F0-9]{64}$/.test(l))this.certType="sha256";else throw new e.FirebaseProjectManagementError("invalid-argument","shaHash must be either a sha256 hash or a sha1 hash.")}}return androidApp.ShaCertificate=m,androidApp}var iosApp={};var hasRequiredIosApp;function requireIosApp(){if(hasRequiredIosApp)return iosApp;hasRequiredIosApp=1;Object.defineProperty(iosApp,"__esModule",{value:!0}),iosApp.IosApp=void 0;const e=requireError(),t=requireValidator$1(),s=requireProjectManagementApiRequestInternal(),p=requireAppMetadata();class g{constructor(d,l){if(this.appId=d,this.requestHandler=l,!t.isNonEmptyString(d))throw new e.FirebaseProjectManagementError("invalid-argument","appId must be a non-empty string.");this.resourceName=`projects/-/iosApps/${d}`}getMetadata(){return this.requestHandler.getResource(this.resourceName).then(d=>((0,s.assertServerResponse)(t.isNonNullObject(d),d,"getMetadata()'s responseData must be a non-null object."),["name","appId","projectId","bundleId"].forEach(o=>{(0,s.assertServerResponse)(t.isNonEmptyString(d[o]),d,`getMetadata()'s responseData.${o} must be a non-empty string.`)}),{platform:p.AppPlatform.IOS,resourceName:d.name,appId:d.appId,displayName:d.displayName||null,projectId:d.projectId,bundleId:d.bundleId}))}setDisplayName(d){return this.requestHandler.setDisplayName(this.resourceName,d)}getConfig(){return this.requestHandler.getConfig(this.resourceName).then(d=>{(0,s.assertServerResponse)(t.isNonNullObject(d),d,"getConfig()'s responseData must be a non-null object.");const l=d.configFileContents;return(0,s.assertServerResponse)(t.isBase64String(l),d,"getConfig()'s responseData.configFileContents must be a base64 string."),Buffer.from(l,"base64").toString("utf8")})}}return iosApp.IosApp=g,iosApp}var hasRequiredProjectManagement$1;function requireProjectManagement$1(){if(hasRequiredProjectManagement$1)return projectManagement$1;hasRequiredProjectManagement$1=1;Object.defineProperty(projectManagement$1,"__esModule",{value:!0}),projectManagement$1.ProjectManagement=void 0;const e=requireError(),t=requireUtils$2(),s=requireValidator$1(),p=requireAndroidApp(),g=requireIosApp(),m=requireProjectManagementApiRequestInternal(),d=requireAppMetadata();class l{constructor(o){if(this.app=o,!s.isNonNullObject(o)||!("options"in o))throw new e.FirebaseProjectManagementError("invalid-argument","First argument passed to admin.projectManagement() must be a valid Firebase app instance.");this.requestHandler=new m.ProjectManagementRequestHandler(o)}listAndroidApps(){return this.listPlatformApps("android","listAndroidApps()")}listIosApps(){return this.listPlatformApps("ios","listIosApps()")}androidApp(o){return new p.AndroidApp(o,this.requestHandler)}iosApp(o){return new g.IosApp(o,this.requestHandler)}shaCertificate(o){return new p.ShaCertificate(o)}createAndroidApp(o,h){return this.getResourceName().then(v=>this.requestHandler.createAndroidApp(v,o,h)).then(v=>((0,m.assertServerResponse)(s.isNonNullObject(v),v,"createAndroidApp()'s responseData must be a non-null object."),(0,m.assertServerResponse)(s.isNonEmptyString(v.appId),v,`"responseData.appId" field must be present in createAndroidApp()'s response data.`),new p.AndroidApp(v.appId,this.requestHandler)))}createIosApp(o,h){return this.getResourceName().then(v=>this.requestHandler.createIosApp(v,o,h)).then(v=>((0,m.assertServerResponse)(s.isNonNullObject(v),v,"createIosApp()'s responseData must be a non-null object."),(0,m.assertServerResponse)(s.isNonEmptyString(v.appId),v,`"responseData.appId" field must be present in createIosApp()'s response data.`),new g.IosApp(v.appId,this.requestHandler)))}listAppMetadata(){return this.getResourceName().then(o=>this.requestHandler.listAppMetadata(o)).then(o=>this.getProjectId().then(h=>this.transformResponseToAppMetadata(o,h)))}setDisplayName(o){return this.getResourceName().then(h=>this.requestHandler.setDisplayName(h,o))}transformResponseToAppMetadata(o,h){return this.assertListAppsResponseData(o,"listAppMetadata()"),o.apps?o.apps.map(v=>{(0,m.assertServerResponse)(s.isNonEmptyString(v.appId),o,'"apps[].appId" field must be present in the listAppMetadata() response data.'),(0,m.assertServerResponse)(s.isNonEmptyString(v.platform),o,'"apps[].platform" field must be present in the listAppMetadata() response data.');const _={appId:v.appId,platform:d.AppPlatform[v.platform]||d.AppPlatform.PLATFORM_UNKNOWN,projectId:h,resourceName:v.name};return v.displayName&&(_.displayName=v.displayName),_}):[]}getResourceName(){return this.getProjectId().then(o=>`projects/${o}`)}getProjectId(){return this.projectId?Promise.resolve(this.projectId):t.findProjectId(this.app).then(o=>{if(!s.isNonEmptyString(o))throw new e.FirebaseProjectManagementError("invalid-project-id","Failed to determine project ID. Initialize the SDK with service account credentials, or set project ID as an app option. Alternatively, set the GOOGLE_CLOUD_PROJECT environment variable.");return this.projectId=o,this.projectId})}listPlatformApps(o,h){return this.getResourceName().then(v=>o==="android"?this.requestHandler.listAndroidApps(v):this.requestHandler.listIosApps(v)).then(v=>(this.assertListAppsResponseData(v,h),v.apps?v.apps.map(_=>((0,m.assertServerResponse)(s.isNonEmptyString(_.appId),v,`"apps[].appId" field must be present in the ${h} response data.`),o==="android"?new p.AndroidApp(_.appId,this.requestHandler):new g.IosApp(_.appId,this.requestHandler))):[]))}assertListAppsResponseData(o,h){(0,m.assertServerResponse)(s.isNonNullObject(o),o,`${h}'s responseData must be a non-null object.`),o.apps&&(0,m.assertServerResponse)(s.isArray(o.apps),o,`"apps" field must be present in the ${h} response data.`)}}return projectManagement$1.ProjectManagement=l,projectManagement$1}var securityRules$1={},securityRulesApiClientInternal={},securityRulesInternal={};var hasRequiredSecurityRulesInternal;function requireSecurityRulesInternal(){if(hasRequiredSecurityRulesInternal)return securityRulesInternal;hasRequiredSecurityRulesInternal=1;Object.defineProperty(securityRulesInternal,"__esModule",{value:!0}),securityRulesInternal.FirebaseSecurityRulesError=void 0;const e=requireError();class t extends e.PrefixedFirebaseError{constructor(p,g){super("security-rules",p,g)}}return securityRulesInternal.FirebaseSecurityRulesError=t,securityRulesInternal}var hasRequiredSecurityRulesApiClientInternal;function requireSecurityRulesApiClientInternal(){if(hasRequiredSecurityRulesApiClientInternal)return securityRulesApiClientInternal;hasRequiredSecurityRulesApiClientInternal=1;Object.defineProperty(securityRulesApiClientInternal,"__esModule",{value:!0}),securityRulesApiClientInternal.SecurityRulesApiClient=void 0;const e=requireApiRequest(),t=requireError(),s=requireSecurityRulesInternal(),p=requireUtils$2(),g=requireValidator$1(),m="https://firebaserules.googleapis.com/v1",d={"X-Firebase-Client":`fire-admin-node/${p.getSdkVersion()}`};class l{constructor(h){if(this.app=h,!g.isNonNullObject(h)||!("options"in h))throw new s.FirebaseSecurityRulesError("invalid-argument","First argument passed to admin.securityRules() must be a valid Firebase app instance.");this.httpClient=new e.AuthorizedHttpClient(h)}getRuleset(h){return Promise.resolve().then(()=>this.getRulesetName(h)).then(v=>this.getResource(v))}createRuleset(h){if(!g.isNonNullObject(h)||!g.isNonNullObject(h.source)||!g.isNonEmptyArray(h.source.files)){const v=new s.FirebaseSecurityRulesError("invalid-argument","Invalid rules content.");return Promise.reject(v)}for(const v of h.source.files)if(!g.isNonNullObject(v)||!g.isNonEmptyString(v.name)||!g.isNonEmptyString(v.content)){const _=new s.FirebaseSecurityRulesError("invalid-argument",`Invalid rules file argument: ${JSON.stringify(v)}`);return Promise.reject(_)}return this.getUrl().then(v=>{const _={method:"POST",url:`${v}/rulesets`,data:h};return this.sendRequest(_)})}deleteRuleset(h){return this.getUrl().then(v=>{const _=this.getRulesetName(h),y={method:"DELETE",url:`${v}/${_}`};return this.sendRequest(y)})}listRulesets(h=100,v){if(!g.isNumber(h)){const y=new s.FirebaseSecurityRulesError("invalid-argument","Invalid page size.");return Promise.reject(y)}if(h<1||h>100){const y=new s.FirebaseSecurityRulesError("invalid-argument","Page size must be between 1 and 100.");return Promise.reject(y)}if(typeof v<"u"&&!g.isNonEmptyString(v)){const y=new s.FirebaseSecurityRulesError("invalid-argument","Next page token must be a non-empty string.");return Promise.reject(y)}const _={pageSize:h,pageToken:v};return v||delete _.pageToken,this.getUrl().then(y=>{const w={method:"GET",url:`${y}/rulesets`,data:_};return this.sendRequest(w)})}getRelease(h){return this.getResource(`releases/${h}`)}updateOrCreateRelease(h,v){return this.updateRelease(h,v).catch(_=>{if(_.code===`security-rules/${a.NOT_FOUND}`)return this.createRelease(h,v);throw _})}updateRelease(h,v){return this.getUrl().then(_=>this.getReleaseDescription(h,v).then(y=>{const w={method:"PATCH",url:`${_}/releases/${h}`,data:{release:y}};return this.sendRequest(w)}))}createRelease(h,v){return this.getUrl().then(_=>this.getReleaseDescription(h,v).then(y=>{const w={method:"POST",url:`${_}/releases`,data:y};return this.sendRequest(w)}))}getUrl(){return this.getProjectIdPrefix().then(h=>`${m}/${h}`)}getProjectIdPrefix(){return this.projectIdPrefix?Promise.resolve(this.projectIdPrefix):p.findProjectId(this.app).then(h=>{if(!g.isNonEmptyString(h))throw new s.FirebaseSecurityRulesError("invalid-argument","Failed to determine project ID. Initialize the SDK with service account credentials, or set project ID as an app option. Alternatively, set the GOOGLE_CLOUD_PROJECT environment variable.");return this.projectIdPrefix=`projects/${h}`,this.projectIdPrefix})}getResource(h){return this.getUrl().then(v=>{const _={method:"GET",url:`${v}/${h}`};return this.sendRequest(_)})}getReleaseDescription(h,v){return this.getProjectIdPrefix().then(_=>({name:`${_}/releases/${h}`,rulesetName:`${_}/${this.getRulesetName(v)}`}))}getRulesetName(h){if(!g.isNonEmptyString(h))throw new s.FirebaseSecurityRulesError("invalid-argument","Ruleset name must be a non-empty string.");if(h.indexOf("/")!==-1)throw new s.FirebaseSecurityRulesError("invalid-argument",'Ruleset name must not contain any "/" characters.');return`rulesets/${h}`}sendRequest(h){return h.headers=d,this.httpClient.send(h).then(v=>v.data).catch(v=>{throw this.toFirebaseError(v)})}toFirebaseError(h){if(h instanceof t.PrefixedFirebaseError)return h;const v=h.response;if(!v.isJson())return new s.FirebaseSecurityRulesError("unknown-error",`Unexpected response with status: ${v.status} and body: ${v.text}`);const _=v.data.error||{};let y="unknown-error";_.status&&_.status in a&&(y=a[_.status]);const w=_.message||`Unknown server error: ${v.text}`;return new s.FirebaseSecurityRulesError(y,w)}}securityRulesApiClientInternal.SecurityRulesApiClient=l;const a={INVALID_ARGUMENT:"invalid-argument",NOT_FOUND:"not-found",RESOURCE_EXHAUSTED:"resource-exhausted",UNAUTHENTICATED:"authentication-error",UNKNOWN:"unknown-error"};return securityRulesApiClientInternal}var hasRequiredSecurityRules$1;function requireSecurityRules$1(){if(hasRequiredSecurityRules$1)return securityRules$1;hasRequiredSecurityRules$1=1;Object.defineProperty(securityRules$1,"__esModule",{value:!0}),securityRules$1.SecurityRules=securityRules$1.Ruleset=securityRules$1.RulesetMetadataList=void 0;const e=requireValidator$1(),t=requireSecurityRulesApiClientInternal(),s=requireSecurityRulesInternal();class p{constructor(a){if(!e.isNonNullObject(a)||!e.isArray(a.rulesets))throw new s.FirebaseSecurityRulesError("invalid-argument",`Invalid ListRulesets response: ${JSON.stringify(a)}`);this.rulesets=a.rulesets.map(o=>({name:d(o.name),createTime:new Date(o.createTime).toUTCString()})),a.nextPageToken&&(this.nextPageToken=a.nextPageToken)}}securityRules$1.RulesetMetadataList=p;class g{constructor(a){if(!e.isNonNullObject(a)||!e.isNonEmptyString(a.name)||!e.isNonEmptyString(a.createTime)||!e.isNonNullObject(a.source))throw new s.FirebaseSecurityRulesError("invalid-argument",`Invalid Ruleset response: ${JSON.stringify(a)}`);this.name=d(a.name),this.createTime=new Date(a.createTime).toUTCString(),this.source=a.source.files||[]}}securityRules$1.Ruleset=g;class m{constructor(a){this.app=a,this.client=new t.SecurityRulesApiClient(a)}getRuleset(a){return this.client.getRuleset(a).then(o=>new g(o))}getFirestoreRuleset(){return this.getRulesetForRelease(m.CLOUD_FIRESTORE)}releaseFirestoreRulesetFromSource(a){return Promise.resolve().then(()=>{const o=this.createRulesFileFromSource("firestore.rules",a);return this.createRuleset(o)}).then(o=>this.releaseFirestoreRuleset(o).then(()=>o))}releaseFirestoreRuleset(a){return this.releaseRuleset(a,m.CLOUD_FIRESTORE)}getStorageRuleset(a){return Promise.resolve().then(()=>this.getBucketName(a)).then(o=>this.getRulesetForRelease(`${m.FIREBASE_STORAGE}/${o}`))}releaseStorageRulesetFromSource(a,o){return Promise.resolve().then(()=>{this.getBucketName(o);const h=this.createRulesFileFromSource("storage.rules",a);return this.createRuleset(h)}).then(h=>this.releaseStorageRuleset(h,o).then(()=>h))}releaseStorageRuleset(a,o){return Promise.resolve().then(()=>this.getBucketName(o)).then(h=>this.releaseRuleset(a,`${m.FIREBASE_STORAGE}/${h}`))}createRulesFileFromSource(a,o){if(!e.isNonEmptyString(a))throw new s.FirebaseSecurityRulesError("invalid-argument","Name must be a non-empty string.");let h;if(e.isNonEmptyString(o))h=o;else if(e.isBuffer(o))h=o.toString("utf-8");else throw new s.FirebaseSecurityRulesError("invalid-argument","Source must be a non-empty string or a Buffer.");return{name:a,content:h}}createRuleset(a){const o={source:{files:[a]}};return this.client.createRuleset(o).then(h=>new g(h))}deleteRuleset(a){return this.client.deleteRuleset(a)}listRulesetMetadata(a=100,o){return this.client.listRulesets(a,o).then(h=>new p(h))}getRulesetForRelease(a){return this.client.getRelease(a).then(o=>{const h=o.rulesetName;if(!e.isNonEmptyString(h))throw new s.FirebaseSecurityRulesError("not-found",`Ruleset name not found for ${a}.`);return this.getRuleset(d(h))})}releaseRuleset(a,o){if(!e.isNonEmptyString(a)&&(!e.isNonNullObject(a)||!e.isNonEmptyString(a.name))){const v=new s.FirebaseSecurityRulesError("invalid-argument","ruleset must be a non-empty name or a RulesetMetadata object.");return Promise.reject(v)}const h=e.isString(a)?a:a.name;return this.client.updateOrCreateRelease(o,h).then(()=>{})}getBucketName(a){const o=typeof a<"u"?a:this.app.options.storageBucket;if(!e.isNonEmptyString(o))throw new s.FirebaseSecurityRulesError("invalid-argument","Bucket name not specified or invalid. Specify a default bucket name via the storageBucket option when initializing the app, or specify the bucket name explicitly when calling the rules API.");return o}}securityRules$1.SecurityRules=m,m.CLOUD_FIRESTORE="cloud.firestore",m.FIREBASE_STORAGE="firebase.storage";function d(l){return l.split("/").pop()}return securityRules$1}var remoteConfig$1={},remoteConfigApiClientInternal={},hasRequiredRemoteConfigApiClientInternal;function requireRemoteConfigApiClientInternal(){if(hasRequiredRemoteConfigApiClientInternal)return remoteConfigApiClientInternal;hasRequiredRemoteConfigApiClientInternal=1;var e={};Object.defineProperty(remoteConfigApiClientInternal,"__esModule",{value:!0}),remoteConfigApiClientInternal.FirebaseRemoteConfigError=remoteConfigApiClientInternal.RemoteConfigApiClient=void 0;const t=requireApiRequest(),s=requireError(),p=requireUtils$2(),g=requireValidator$1(),m=requireDeepCopy(),d=e.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",l={"X-Firebase-Client":`fire-admin-node/${p.getSdkVersion()}`,"Accept-Encoding":"gzip"};class a{constructor(_){if(this.app=_,!g.isNonNullObject(_)||!("options"in _))throw new h("invalid-argument","First argument passed to admin.remoteConfig() must be a valid Firebase app instance.");this.httpClient=new t.AuthorizedHttpClient(_)}getTemplate(){return this.getUrl().then(_=>{const y={method:"GET",url:`${_}/remoteConfig`,headers:l};return this.httpClient.send(y)}).then(_=>this.toRemoteConfigTemplate(_)).catch(_=>{throw this.toFirebaseError(_)})}getTemplateAtVersion(_){const y={versionNumber:this.validateVersionNumber(_)};return this.getUrl().then(w=>{const T={method:"GET",url:`${w}/remoteConfig`,headers:l,data:y};return this.httpClient.send(T)}).then(w=>this.toRemoteConfigTemplate(w)).catch(w=>{throw this.toFirebaseError(w)})}validateTemplate(_){return _=this.validateInputRemoteConfigTemplate(_),this.sendPutRequest(_,_.etag,!0).then(y=>(this.validateEtag(y.headers.etag),this.toRemoteConfigTemplate(y,_.etag))).catch(y=>{throw this.toFirebaseError(y)})}publishTemplate(_,y){_=this.validateInputRemoteConfigTemplate(_);let w=_.etag;return y&&y.force===!0&&(w="*"),this.sendPutRequest(_,w).then(T=>this.toRemoteConfigTemplate(T)).catch(T=>{throw this.toFirebaseError(T)})}rollback(_){const y={versionNumber:this.validateVersionNumber(_)};return this.getUrl().then(w=>{const T={method:"POST",url:`${w}/remoteConfig:rollback`,headers:l,data:y};return this.httpClient.send(T)}).then(w=>this.toRemoteConfigTemplate(w)).catch(w=>{throw this.toFirebaseError(w)})}listVersions(_){return typeof _<"u"&&(_=this.validateListVersionsOptions(_)),this.getUrl().then(y=>{const w={method:"GET",url:`${y}/remoteConfig:listVersions`,headers:l,data:_};return this.httpClient.send(w)}).then(y=>y.data).catch(y=>{throw this.toFirebaseError(y)})}getServerTemplate(){return this.getUrl().then(_=>{const y={method:"GET",url:`${_}/namespaces/firebase-server/serverRemoteConfig`,headers:l};return this.httpClient.send(y)}).then(_=>this.toRemoteConfigServerTemplate(_)).catch(_=>{throw this.toFirebaseError(_)})}sendPutRequest(_,y,w){let T="remoteConfig";return w&&(T+="?validate_only=true"),this.getUrl().then(I=>{const O={method:"PUT",url:`${I}/${T}`,headers:{...l,"If-Match":y},data:{conditions:_.conditions,parameters:_.parameters,parameterGroups:_.parameterGroups,version:_.version}};return this.httpClient.send(O)})}getUrl(){return this.getProjectIdPrefix().then(_=>`${d}/v1/${_}`)}getProjectIdPrefix(){return this.projectIdPrefix?Promise.resolve(this.projectIdPrefix):p.findProjectId(this.app).then(_=>{if(!g.isNonEmptyString(_))throw new h("unknown-error","Failed to determine project ID. Initialize the SDK with service account credentials, or set project ID as an app option. Alternatively, set the GOOGLE_CLOUD_PROJECT environment variable.");return this.projectIdPrefix=`projects/${_}`,this.projectIdPrefix})}toFirebaseError(_){if(_ instanceof s.PrefixedFirebaseError)return _;const y=_.response;if(!y.isJson())return new h("unknown-error",`Unexpected response with status: ${y.status} and body: ${y.text}`);const w=y.data.error||{};let T="unknown-error";w.status&&w.status in o&&(T=o[w.status]);const I=w.message||`Unknown server error: ${y.text}`;return new h(T,I)}toRemoteConfigTemplate(_,y){const w=typeof y>"u"?_.headers.etag:y;return this.validateEtag(w),{conditions:_.data.conditions,parameters:_.data.parameters,parameterGroups:_.data.parameterGroups,etag:w,version:_.data.version}}toRemoteConfigServerTemplate(_,y){const w=typeof y>"u"?_.headers.etag:y;return this.validateEtag(w),{conditions:_.data.conditions,parameters:_.data.parameters,etag:w,version:_.data.version}}validateInputRemoteConfigTemplate(_){const y=(0,m.deepCopy)(_);if(!g.isNonNullObject(y))throw new h("invalid-argument",`Invalid Remote Config template: ${JSON.stringify(y)}`);if(!g.isNonEmptyString(y.etag))throw new h("invalid-argument","ETag must be a non-empty string.");if(!g.isNonNullObject(y.parameters))throw new h("invalid-argument","Remote Config parameters must be a non-null object");if(!g.isNonNullObject(y.parameterGroups))throw new h("invalid-argument","Remote Config parameter groups must be a non-null object");if(!g.isArray(y.conditions))throw new h("invalid-argument","Remote Config conditions must be an array");return typeof y.version<"u"&&(y.version={description:y.version.description}),y}validateVersionNumber(_,y="versionNumber"){if(!g.isNonEmptyString(_)&&!g.isNumber(_))throw new h("invalid-argument",`${y} must be a non-empty string in int64 format or a number`);if(!Number.isInteger(Number(_)))throw new h("invalid-argument",`${y} must be an integer or a string in int64 format`);return _.toString()}validateEtag(_){if(!g.isNonEmptyString(_))throw new h("invalid-argument","ETag header is not present in the server response.")}validateListVersionsOptions(_){const y=(0,m.deepCopy)(_);if(!g.isNonNullObject(y))throw new h("invalid-argument","ListVersionsOptions must be a non-null object.");if(typeof y.pageSize<"u"){if(!g.isNumber(y.pageSize))throw new h("invalid-argument","pageSize must be a number.");if(y.pageSize<1||y.pageSize>300)throw new h("invalid-argument","pageSize must be a number between 1 and 300 (inclusive).")}if(typeof y.pageToken<"u"&&!g.isNonEmptyString(y.pageToken))throw new h("invalid-argument","pageToken must be a string value.");if(typeof y.endVersionNumber<"u"&&(y.endVersionNumber=this.validateVersionNumber(y.endVersionNumber,"endVersionNumber")),typeof y.startTime<"u"){if(!(y.startTime instanceof Date)&&!g.isUTCDateString(y.startTime))throw new h("invalid-argument","startTime must be a valid Date object or a UTC date string.");y.startTime instanceof Date?y.startTime=y.startTime.toISOString():y.startTime=new Date(y.startTime).toISOString()}if(typeof y.endTime<"u"){if(!(y.endTime instanceof Date)&&!g.isUTCDateString(y.endTime))throw new h("invalid-argument","endTime must be a valid Date object or a UTC date string.");y.endTime instanceof Date?y.endTime=y.endTime.toISOString():y.endTime=new Date(y.endTime).toISOString()}return Object.keys(y).forEach(w=>typeof y[w]>"u"&&delete y[w]),y}}remoteConfigApiClientInternal.RemoteConfigApiClient=a;const o={ABORTED:"aborted",ALREADY_EXISTS:"already-exists",INVALID_ARGUMENT:"invalid-argument",INTERNAL:"internal-error",FAILED_PRECONDITION:"failed-precondition",NOT_FOUND:"not-found",OUT_OF_RANGE:"out-of-range",PERMISSION_DENIED:"permission-denied",RESOURCE_EXHAUSTED:"resource-exhausted",UNAUTHENTICATED:"unauthenticated",UNKNOWN:"unknown-error"};class h extends s.PrefixedFirebaseError{constructor(_,y){super("remote-config",_,y)}}return remoteConfigApiClientInternal.FirebaseRemoteConfigError=h,remoteConfigApiClientInternal}var conditionEvaluatorInternal={},remoteConfigApi={};var hasRequiredRemoteConfigApi;function requireRemoteConfigApi(){if(hasRequiredRemoteConfigApi)return remoteConfigApi;hasRequiredRemoteConfigApi=1;Object.defineProperty(remoteConfigApi,"__esModule",{value:!0}),remoteConfigApi.CustomSignalOperator=remoteConfigApi.PercentConditionOperator=void 0;var e;(function(s){s.UNKNOWN="UNKNOWN",s.LESS_OR_EQUAL="LESS_OR_EQUAL",s.GREATER_THAN="GREATER_THAN",s.BETWEEN="BETWEEN"})(e||(remoteConfigApi.PercentConditionOperator=e={}));var t;return(function(s){s.UNKNOWN="UNKNOWN",s.NUMERIC_LESS_THAN="NUMERIC_LESS_THAN",s.NUMERIC_LESS_EQUAL="NUMERIC_LESS_EQUAL",s.NUMERIC_EQUAL="NUMERIC_EQUAL",s.NUMERIC_NOT_EQUAL="NUMERIC_NOT_EQUAL",s.NUMERIC_GREATER_THAN="NUMERIC_GREATER_THAN",s.NUMERIC_GREATER_EQUAL="NUMERIC_GREATER_EQUAL",s.STRING_CONTAINS="STRING_CONTAINS",s.STRING_DOES_NOT_CONTAIN="STRING_DOES_NOT_CONTAIN",s.STRING_EXACTLY_MATCHES="STRING_EXACTLY_MATCHES",s.STRING_CONTAINS_REGEX="STRING_CONTAINS_REGEX",s.SEMANTIC_VERSION_LESS_THAN="SEMANTIC_VERSION_LESS_THAN",s.SEMANTIC_VERSION_LESS_EQUAL="SEMANTIC_VERSION_LESS_EQUAL",s.SEMANTIC_VERSION_EQUAL="SEMANTIC_VERSION_EQUAL",s.SEMANTIC_VERSION_NOT_EQUAL="SEMANTIC_VERSION_NOT_EQUAL",s.SEMANTIC_VERSION_GREATER_THAN="SEMANTIC_VERSION_GREATER_THAN",s.SEMANTIC_VERSION_GREATER_EQUAL="SEMANTIC_VERSION_GREATER_EQUAL"})(t||(remoteConfigApi.CustomSignalOperator=t={})),remoteConfigApi}var hasRequiredConditionEvaluatorInternal;function requireConditionEvaluatorInternal(){if(hasRequiredConditionEvaluatorInternal)return conditionEvaluatorInternal;hasRequiredConditionEvaluatorInternal=1;Object.defineProperty(conditionEvaluatorInternal,"__esModule",{value:!0}),conditionEvaluatorInternal.ConditionEvaluator=void 0;const e=requireRemoteConfigApi(),t=require$$1$3;class s{evaluateConditions(a,o){const h=new Map;for(const v of a)h.set(v.name,this.evaluateCondition(v.condition,o));return h}evaluateCondition(a,o,h=0){return h>=s.MAX_CONDITION_RECURSION_DEPTH?!1:a.orCondition?this.evaluateOrCondition(a.orCondition,o,h+1):a.andCondition?this.evaluateAndCondition(a.andCondition,o,h+1):a.true?!0:a.false?!1:a.percent?this.evaluatePercentCondition(a.percent,o):a.customSignal?this.evaluateCustomSignalCondition(a.customSignal,o):!1}evaluateOrCondition(a,o,h){const v=a.conditions||[];for(const _ of v){const y=this.evaluateCondition(_,o,h+1);if(y)return y}return!1}evaluateAndCondition(a,o,h){const v=a.conditions||[];for(const _ of v){const y=this.evaluateCondition(_,o,h+1);if(!y)return y}return!0}evaluatePercentCondition(a,o){if(!o.randomizationId)return!1;const{seed:h,percentOperator:v,microPercent:_,microPercentRange:y}=a;if(!v)return!1;const w=_||0,T=y?.microPercentUpperBound||0,I=y?.microPercentLowerBound||0,E=`${h&&h.length>0?`${h}.`:""}${o.randomizationId}`,x=s.hashSeededRandomizationId(E)%BigInt(100*1e6);switch(v){case e.PercentConditionOperator.LESS_OR_EQUAL:return x<=w;case e.PercentConditionOperator.GREATER_THAN:return x>w;case e.PercentConditionOperator.BETWEEN:return x>I&&x<=T;case e.PercentConditionOperator.UNKNOWN:}return!1}static hashSeededRandomizationId(a){const o=(0,t.createHash)("sha256").update(a).digest("hex");return BigInt(`0x${o}`)}evaluateCustomSignalCondition(a,o){const{customSignalOperator:h,customSignalKey:v,targetCustomSignalValues:_}=a;if(!h||!v||!_||!_.length)return!1;const y=o[v];if(y==null)return!1;switch(h){case e.CustomSignalOperator.STRING_CONTAINS:return p(_,y,(w,T)=>T.includes(w));case e.CustomSignalOperator.STRING_DOES_NOT_CONTAIN:return!p(_,y,(w,T)=>T.includes(w));case e.CustomSignalOperator.STRING_EXACTLY_MATCHES:return p(_,y,(w,T)=>T.trim()===w.trim());case e.CustomSignalOperator.STRING_CONTAINS_REGEX:return p(_,y,(w,T)=>new RegExp(w).test(T));case e.CustomSignalOperator.NUMERIC_LESS_THAN:return g(y,_[0],w=>w<0);case e.CustomSignalOperator.NUMERIC_LESS_EQUAL:return g(y,_[0],w=>w<=0);case e.CustomSignalOperator.NUMERIC_EQUAL:return g(y,_[0],w=>w===0);case e.CustomSignalOperator.NUMERIC_NOT_EQUAL:return g(y,_[0],w=>w!==0);case e.CustomSignalOperator.NUMERIC_GREATER_THAN:return g(y,_[0],w=>w>0);case e.CustomSignalOperator.NUMERIC_GREATER_EQUAL:return g(y,_[0],w=>w>=0);case e.CustomSignalOperator.SEMANTIC_VERSION_LESS_THAN:return d(y,_[0],w=>w<0);case e.CustomSignalOperator.SEMANTIC_VERSION_LESS_EQUAL:return d(y,_[0],w=>w<=0);case e.CustomSignalOperator.SEMANTIC_VERSION_EQUAL:return d(y,_[0],w=>w===0);case e.CustomSignalOperator.SEMANTIC_VERSION_NOT_EQUAL:return d(y,_[0],w=>w!==0);case e.CustomSignalOperator.SEMANTIC_VERSION_GREATER_THAN:return d(y,_[0],w=>w>0);case e.CustomSignalOperator.SEMANTIC_VERSION_GREATER_EQUAL:return d(y,_[0],w=>w>=0)}return!1}}conditionEvaluatorInternal.ConditionEvaluator=s,s.MAX_CONDITION_RECURSION_DEPTH=10;function p(l,a,o){const h=String(a);return l.some(v=>o(v,h))}function g(l,a,o){const h=Number(a),v=Number(l);return isNaN(h)||isNaN(v)?!1:o(v<h?-1:v>h?1:0)}const m=5;function d(l,a,o){const h=String(l).split(".").map(Number),v=a.split(".").map(Number);if(h.length>m||v.length>m)return!1;for(let _=0;_<m;_++){const y=h[_]!==void 0,w=v[_]!==void 0;if(y||(h[_]=0),w||(v[_]=0),isNaN(h[_])||isNaN(v[_]))return!1;if(h[_]<v[_])return o(-1);if(h[_]>v[_])return o(1)}return o(0)}return conditionEvaluatorInternal}var valueImpl={};var hasRequiredValueImpl;function requireValueImpl(){if(hasRequiredValueImpl)return valueImpl;hasRequiredValueImpl=1,Object.defineProperty(valueImpl,"__esModule",{value:!0}),valueImpl.ValueImpl=void 0;class e{constructor(s,p=e.DEFAULT_VALUE_FOR_STRING){this.source=s,this.value=p}asString(){return this.value}asBoolean(){return this.source==="static"?e.DEFAULT_VALUE_FOR_BOOLEAN:e.BOOLEAN_TRUTHY_VALUES.indexOf(this.value.toLowerCase())>=0}asNumber(){if(this.source==="static")return e.DEFAULT_VALUE_FOR_NUMBER;const s=Number(this.value);return isNaN(s)?e.DEFAULT_VALUE_FOR_NUMBER:s}getSource(){return this.source}}return valueImpl.ValueImpl=e,e.DEFAULT_VALUE_FOR_BOOLEAN=!1,e.DEFAULT_VALUE_FOR_STRING="",e.DEFAULT_VALUE_FOR_NUMBER=0,e.BOOLEAN_TRUTHY_VALUES=["1","true","t","yes","y","on"],valueImpl}var hasRequiredRemoteConfig$1;function requireRemoteConfig$1(){if(hasRequiredRemoteConfig$1)return remoteConfig$1;hasRequiredRemoteConfig$1=1;Object.defineProperty(remoteConfig$1,"__esModule",{value:!0}),remoteConfig$1.RemoteConfigFetchResponse=remoteConfig$1.RemoteConfig=void 0;const e=requireUtils$2(),t=requireValidator$1(),s=requireRemoteConfigApiClientInternal(),p=requireConditionEvaluatorInternal(),g=requireValueImpl();class m{constructor(T){this.app=T,this.client=new s.RemoteConfigApiClient(T)}getTemplate(){return this.client.getTemplate().then(T=>new d(T))}getTemplateAtVersion(T){return this.client.getTemplateAtVersion(T).then(I=>new d(I))}validateTemplate(T){return this.client.validateTemplate(T).then(I=>new d(I))}publishTemplate(T,I){return this.client.publishTemplate(T,I).then(O=>new d(O))}rollback(T){return this.client.rollback(T).then(I=>new d(I))}listVersions(T){return this.client.listVersions(T).then(I=>({versions:I.versions?.map(O=>new h(O))??[],nextPageToken:I.nextPageToken}))}createTemplateFromJSON(T){if(!t.isNonEmptyString(T))throw new s.FirebaseRemoteConfigError("invalid-argument","JSON string must be a valid non-empty string");let I;try{I=JSON.parse(T)}catch(O){throw new s.FirebaseRemoteConfigError("invalid-argument",`Failed to parse the JSON string: ${T}. `+O)}return new d(I)}async getServerTemplate(T){const I=this.initServerTemplate(T);return await I.load(),I}initServerTemplate(T){const I=new l(this.client,new p.ConditionEvaluator,T?.defaultConfig);return T?.template&&I.set(T?.template),I}}remoteConfig$1.RemoteConfig=m;class d{constructor(T){if(!t.isNonNullObject(T)||!t.isNonEmptyString(T.etag))throw new s.FirebaseRemoteConfigError("invalid-argument",`Invalid Remote Config template: ${JSON.stringify(T)}`);if(this.etagInternal=T.etag,typeof T.parameters<"u"){if(!t.isNonNullObject(T.parameters))throw new s.FirebaseRemoteConfigError("invalid-argument","Remote Config parameters must be a non-null object");this.parameters=T.parameters}else this.parameters={};if(typeof T.parameterGroups<"u"){if(!t.isNonNullObject(T.parameterGroups))throw new s.FirebaseRemoteConfigError("invalid-argument","Remote Config parameter groups must be a non-null object");this.parameterGroups=T.parameterGroups}else this.parameterGroups={};if(typeof T.conditions<"u"){if(!t.isArray(T.conditions))throw new s.FirebaseRemoteConfigError("invalid-argument","Remote Config conditions must be an array");this.conditions=T.conditions}else this.conditions=[];typeof T.version<"u"&&(this.version=new h(T.version))}get etag(){return this.etagInternal}toJSON(){return{conditions:this.conditions,parameters:this.parameters,parameterGroups:this.parameterGroups,etag:this.etag,version:this.version}}}class l{constructor(T,I,O={}){this.apiClient=T,this.conditionEvaluator=I,this.defaultConfig=O,this.stringifiedDefaultConfig={};for(const E in O)this.stringifiedDefaultConfig[E]=String(O[E])}load(){return this.apiClient.getServerTemplate().then(T=>{this.cache=new o(T)})}set(T){let I;if(t.isString(T))try{I=JSON.parse(T)}catch(O){throw new s.FirebaseRemoteConfigError("invalid-argument",`Failed to parse the JSON string: ${T}. `+O)}else I=T;this.cache=new o(I)}evaluate(T={}){if(!this.cache)throw new s.FirebaseRemoteConfigError("failed-precondition","No Remote Config Server template in cache. Call load() before calling evaluate().");const I=this.conditionEvaluator.evaluateConditions(this.cache.conditions,T),O={};for(const E in this.stringifiedDefaultConfig)O[E]=new g.ValueImpl("default",this.stringifiedDefaultConfig[E]);for(const[E,C]of Object.entries(this.cache.parameters)){const{conditionalValues:x,defaultValue:j}=C,D=x||{};let k;for(const[G,$]of I)if(D[G]&&$){k=D[G];break}if(k&&k.useInAppDefault)continue;if(k){const G=k.value;O[E]=new g.ValueImpl("remote",G);continue}if(!j||j.useInAppDefault)continue;const q=j.value;O[E]=new g.ValueImpl("remote",q)}return new a(O)}toJSON(){return this.cache}}class a{constructor(T){this.configValues=T}getBoolean(T){return this.getValue(T).asBoolean()}getNumber(T){return this.getValue(T).asNumber()}getString(T){return this.getValue(T).asString()}getValue(T){return this.configValues[T]||new g.ValueImpl("static")}getAll(){return{...this.configValues}}}class o{constructor(T){if(!t.isNonNullObject(T)||!t.isNonEmptyString(T.etag))throw new s.FirebaseRemoteConfigError("invalid-argument",`Invalid Remote Config template: ${JSON.stringify(T)}`);if(this.etag=T.etag,typeof T.parameters<"u"){if(!t.isNonNullObject(T.parameters))throw new s.FirebaseRemoteConfigError("invalid-argument","Remote Config parameters must be a non-null object");this.parameters=T.parameters}else this.parameters={};if(typeof T.conditions<"u"){if(!t.isArray(T.conditions))throw new s.FirebaseRemoteConfigError("invalid-argument","Remote Config conditions must be an array");this.conditions=T.conditions}else this.conditions=[];typeof T.version<"u"&&(this.version=new h(T.version))}}class h{constructor(T){if(!t.isNonNullObject(T))throw new s.FirebaseRemoteConfigError("invalid-argument",`Invalid Remote Config version instance: ${JSON.stringify(T)}`);if(typeof T.versionNumber<"u"){if(!t.isNonEmptyString(T.versionNumber)&&!t.isNumber(T.versionNumber))throw new s.FirebaseRemoteConfigError("invalid-argument","Version number must be a non-empty string in int64 format or a number");if(!Number.isInteger(Number(T.versionNumber)))throw new s.FirebaseRemoteConfigError("invalid-argument","Version number must be an integer or a string in int64 format");this.versionNumber=T.versionNumber}if(typeof T.updateOrigin<"u"){if(!t.isNonEmptyString(T.updateOrigin))throw new s.FirebaseRemoteConfigError("invalid-argument","Version update origin must be a non-empty string");this.updateOrigin=T.updateOrigin}if(typeof T.updateType<"u"){if(!t.isNonEmptyString(T.updateType))throw new s.FirebaseRemoteConfigError("invalid-argument","Version update type must be a non-empty string");this.updateType=T.updateType}if(typeof T.updateUser<"u"){if(!t.isNonNullObject(T.updateUser))throw new s.FirebaseRemoteConfigError("invalid-argument","Version update user must be a non-null object");this.updateUser=T.updateUser}if(typeof T.description<"u"){if(!t.isNonEmptyString(T.description))throw new s.FirebaseRemoteConfigError("invalid-argument","Version description must be a non-empty string");this.description=T.description}if(typeof T.rollbackSource<"u"){if(!t.isNonEmptyString(T.rollbackSource))throw new s.FirebaseRemoteConfigError("invalid-argument","Version rollback source must be a non-empty string");this.rollbackSource=T.rollbackSource}if(typeof T.isLegacy<"u"){if(!t.isBoolean(T.isLegacy))throw new s.FirebaseRemoteConfigError("invalid-argument","Version.isLegacy must be a boolean");this.isLegacy=T.isLegacy}if(typeof T.updateTime<"u"){if(!this.isValidTimestamp(T.updateTime))throw new s.FirebaseRemoteConfigError("invalid-argument","Version update time must be a valid date string");this.updateTime=new Date(T.updateTime).toUTCString()}}toJSON(){return{versionNumber:this.versionNumber,updateOrigin:this.updateOrigin,updateType:this.updateType,updateUser:this.updateUser,description:this.description,rollbackSource:this.rollbackSource,isLegacy:this.isLegacy,updateTime:this.updateTime}}isValidTimestamp(T){return t.isNonEmptyString(T)&&new Date(T).getTime()>0}}const v=304,_=200;class y{constructor(T,I,O){const E={};for(const[x,j]of Object.entries(I.getAll()))E[x]=j.asString();const C=this.processEtag(E,T);C===O?this.response={status:v,eTag:C}:this.response={status:_,eTag:C,config:E}}toJSON(){return this.response}processEtag(T,I){const O=JSON.stringify(T);let E=0;for(let j=0;j<O.length;j++){const D=O.charCodeAt(j);E=(E<<5)-E+D,E|=0}return["etag",e.getExplicitProjectId(I),"firebase-server","fetch",E].filter(j=>!!j).join("-")}}return remoteConfig$1.RemoteConfigFetchResponse=y,remoteConfig$1}var appCheck$1={},appCheckApiClientInternal={};var hasRequiredAppCheckApiClientInternal;function requireAppCheckApiClientInternal(){return hasRequiredAppCheckApiClientInternal||(hasRequiredAppCheckApiClientInternal=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FirebaseAppCheckError=e.APP_CHECK_ERROR_CODE_MAPPING=e.AppCheckApiClient=void 0;const t=requireApiRequest(),s=requireError(),p=requireUtils$2(),g=requireValidator$1(),m="https://firebaseappcheck.googleapis.com/v1/projects/{projectId}/apps/{appId}:exchangeCustomToken",d="https://firebaseappcheck.googleapis.com/v1beta/projects/{projectId}:verifyAppCheckToken",l={"X-Firebase-Client":`fire-admin-node/${p.getSdkVersion()}`};class a{constructor(v){if(this.app=v,!g.isNonNullObject(v)||!("options"in v))throw new o("invalid-argument","First argument passed to admin.appCheck() must be a valid Firebase app instance.");this.httpClient=new t.AuthorizedHttpClient(v)}exchangeToken(v,_){if(!g.isNonEmptyString(_))throw new o("invalid-argument","`appId` must be a non-empty string.");if(!g.isNonEmptyString(v))throw new o("invalid-argument","`customToken` must be a non-empty string.");return this.getUrl(_).then(y=>{const w={method:"POST",url:y,headers:l,data:{customToken:v}};return this.httpClient.send(w)}).then(y=>this.toAppCheckToken(y)).catch(y=>{throw this.toFirebaseError(y)})}verifyReplayProtection(v){if(!g.isNonEmptyString(v))throw new o("invalid-argument","`token` must be a non-empty string.");return this.getVerifyTokenUrl().then(_=>{const y={method:"POST",url:_,headers:l,data:{app_check_token:v}};return this.httpClient.send(y)}).then(_=>{if(typeof _.data.alreadyConsumed<"u"&&!g.isBoolean(_.data?.alreadyConsumed))throw new o("invalid-argument","`alreadyConsumed` must be a boolean value.");return _.data.alreadyConsumed||!1}).catch(_=>{throw this.toFirebaseError(_)})}getUrl(v){return this.getProjectId().then(_=>{const y={projectId:_,appId:v},w=p.formatString(m,y);return p.formatString(w)})}getVerifyTokenUrl(){return this.getProjectId().then(v=>{const _={projectId:v},y=p.formatString(d,_);return p.formatString(y)})}getProjectId(){return this.projectId?Promise.resolve(this.projectId):p.findProjectId(this.app).then(v=>{if(!g.isNonEmptyString(v))throw new o("unknown-error","Failed to determine project ID. Initialize the SDK with service account credentials or set project ID as an app option. Alternatively, set the GOOGLE_CLOUD_PROJECT environment variable.");return this.projectId=v,v})}toFirebaseError(v){if(v instanceof s.PrefixedFirebaseError)return v;const _=v.response;if(!_.isJson())return new o("unknown-error",`Unexpected response with status: ${_.status} and body: ${_.text}`);const y=_.data.error||{};let w="unknown-error";y.status&&y.status in e.APP_CHECK_ERROR_CODE_MAPPING&&(w=e.APP_CHECK_ERROR_CODE_MAPPING[y.status]);const T=y.message||`Unknown server error: ${_.text}`;return new o(w,T)}toAppCheckToken(v){const _=v.data.token,y=this.stringToMilliseconds(v.data.ttl);return{token:_,ttlMillis:y}}stringToMilliseconds(v){if(!g.isNonEmptyString(v)||!v.endsWith("s"))throw new o("invalid-argument","`ttl` must be a valid duration string with the suffix `s`.");const _=v.slice(0,-1);return Math.floor(Number(_)*1e3)}}e.AppCheckApiClient=a,e.APP_CHECK_ERROR_CODE_MAPPING={ABORTED:"aborted",INVALID_ARGUMENT:"invalid-argument",INVALID_CREDENTIAL:"invalid-credential",INTERNAL:"internal-error",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",NOT_FOUND:"not-found",UNKNOWN:"unknown-error"};class o extends s.PrefixedFirebaseError{constructor(v,_){super("app-check",v,_),this.__proto__=o.prototype}}e.FirebaseAppCheckError=o})(appCheckApiClientInternal)),appCheckApiClientInternal}var tokenGenerator={};var hasRequiredTokenGenerator;function requireTokenGenerator(){if(hasRequiredTokenGenerator)return tokenGenerator;hasRequiredTokenGenerator=1;Object.defineProperty(tokenGenerator,"__esModule",{value:!0}),tokenGenerator.AppCheckTokenGenerator=void 0,tokenGenerator.appCheckErrorFromCryptoSignerError=o;const e=requireValidator$1(),t=requireUtils$2(),s=requireCryptoSigner(),p=requireAppCheckApiClientInternal(),g=60,m=g*1e3,d=1440*60*1e3,l="https://firebaseappcheck.googleapis.com/google.firebase.appcheck.v1.TokenExchangeService";class a{constructor(_){if(!e.isNonNullObject(_))throw new p.FirebaseAppCheckError("invalid-argument","INTERNAL ASSERT: Must provide a CryptoSigner to use AppCheckTokenGenerator.");this.signer=_}createCustomToken(_,y){if(!e.isNonEmptyString(_))throw new p.FirebaseAppCheckError("invalid-argument","`appId` must be a non-empty string.");let w={};return typeof y<"u"&&(w=this.validateTokenOptions(y)),this.signer.getAccountId().then(T=>{const I={alg:this.signer.algorithm,typ:"JWT"},O=Math.floor(Date.now()/1e3),E={iss:T,sub:T,app_id:_,aud:l,exp:O+g*5,iat:O,...w},C=`${this.encodeSegment(I)}.${this.encodeSegment(E)}`;return this.signer.sign(Buffer.from(C)).then(x=>`${C}.${this.encodeSegment(x)}`)}).catch(T=>{throw o(T)})}encodeSegment(_){const y=_ instanceof Buffer?_:Buffer.from(JSON.stringify(_));return(0,t.toWebSafeBase64)(y).replace(/=+$/,"")}validateTokenOptions(_){if(!e.isNonNullObject(_))throw new p.FirebaseAppCheckError("invalid-argument","AppCheckTokenOptions must be a non-null object.");if(typeof _.ttlMillis<"u"){if(!e.isNumber(_.ttlMillis))throw new p.FirebaseAppCheckError("invalid-argument","ttlMillis must be a duration in milliseconds.");if(_.ttlMillis<m*30||_.ttlMillis>d*7)throw new p.FirebaseAppCheckError("invalid-argument","ttlMillis must be a duration in milliseconds between 30 minutes and 7 days (inclusive).");return{ttl:(0,t.transformMillisecondsToSecondsString)(_.ttlMillis)}}return{}}}tokenGenerator.AppCheckTokenGenerator=a;function o(v){if(!(v instanceof s.CryptoSignerError))return v;if(v.code===s.CryptoSignerErrorCode.SERVER_ERROR&&e.isNonNullObject(v.cause)){const _=v.cause,y=_.response.data;if(y?.error){const w=y.error.status,T=y.error.message||JSON.stringify(_.response);let I="unknown-error";return w&&w in p.APP_CHECK_ERROR_CODE_MAPPING&&(I=p.APP_CHECK_ERROR_CODE_MAPPING[w]),new p.FirebaseAppCheckError(I,`Error returned from server while signing a custom token: ${T}`)}return new p.FirebaseAppCheckError("internal-error","Error returned from server: "+JSON.stringify(y)+".")}return new p.FirebaseAppCheckError(h(v.code),v.message)}function h(v){switch(v){case s.CryptoSignerErrorCode.INVALID_CREDENTIAL:return"invalid-credential";case s.CryptoSignerErrorCode.INVALID_ARGUMENT:return"invalid-argument";default:return"internal-error"}}return tokenGenerator}var tokenVerifier={};var hasRequiredTokenVerifier;function requireTokenVerifier(){if(hasRequiredTokenVerifier)return tokenVerifier;hasRequiredTokenVerifier=1;Object.defineProperty(tokenVerifier,"__esModule",{value:!0}),tokenVerifier.AppCheckTokenVerifier=void 0;const e=requireValidator$1(),t=requireUtils$2(),s=requireAppCheckApiClientInternal(),p=requireJwt(),g="https://firebaseappcheck.googleapis.com/",m="https://firebaseappcheck.googleapis.com/v1/jwks";class d{constructor(a){this.app=a,this.signatureVerifier=p.PublicKeySignatureVerifier.withJwksUrl(m,a.options.httpAgent)}verifyToken(a){if(!e.isString(a))throw new s.FirebaseAppCheckError("invalid-argument","App check token must be a non-null string.");return this.ensureProjectId().then(o=>this.decodeAndVerify(a,o)).then(o=>{const h=o.payload;return h.app_id=h.sub,h})}ensureProjectId(){return t.findProjectId(this.app).then(a=>{if(!e.isNonEmptyString(a))throw new s.FirebaseAppCheckError("invalid-credential","Must initialize app with a cert credential or set your Firebase project ID as the GOOGLE_CLOUD_PROJECT environment variable to verify an App Check token.");return a})}decodeAndVerify(a,o){return this.safeDecode(a).then(h=>(this.verifyContent(h,o),this.verifySignature(a).then(()=>h)))}safeDecode(a){return(0,p.decodeJwt)(a).catch(()=>{const o="Decoding App Check token failed. Make sure you passed the entire string JWT which represents the Firebase App Check token.";throw new s.FirebaseAppCheckError("invalid-argument",o)})}verifyContent(a,o){const h=a.header,v=a.payload,_=" Make sure the App Check token comes from the same Firebase project as the service account used to authenticate this SDK.",y=`projects/${o}`;let w;if(h.alg!==p.ALGORITHM_RS256?w='The provided App Check token has incorrect algorithm. Expected "'+p.ALGORITHM_RS256+'" but got "'+h.alg+'".':!e.isNonEmptyArray(v.aud)||!v.aud.includes(y)?w='The provided App Check token has incorrect "aud" (audience) claim. Expected "'+y+'" but got "'+v.aud+'".'+_:typeof v.iss!="string"||!v.iss.startsWith(g)?w='The provided App Check token has incorrect "iss" (issuer) claim.':typeof v.sub!="string"?w='The provided App Check token has no "sub" (subject) claim.':v.sub===""&&(w='The provided App Check token has an empty string "sub" (subject) claim.'),w)throw new s.FirebaseAppCheckError("invalid-argument",w)}verifySignature(a){return this.signatureVerifier.verify(a).catch(o=>{throw this.mapJwtErrorToAppCheckError(o)})}mapJwtErrorToAppCheckError(a){if(a.code===p.JwtErrorCode.TOKEN_EXPIRED){const o="The provided App Check token has expired. Get a fresh App Check token from your client app and try again.";return new s.FirebaseAppCheckError("app-check-token-expired",o)}else if(a.code===p.JwtErrorCode.INVALID_SIGNATURE){const o="The provided App Check token has invalid signature.";return new s.FirebaseAppCheckError("invalid-argument",o)}else if(a.code===p.JwtErrorCode.NO_MATCHING_KID){const o='The provided App Check token has "kid" claim which does not correspond to a known public key. Most likely the provided App Check token is expired, so get a fresh token from your client app and try again.';return new s.FirebaseAppCheckError("invalid-argument",o)}return new s.FirebaseAppCheckError("invalid-argument",a.message)}}return tokenVerifier.AppCheckTokenVerifier=d,tokenVerifier}var hasRequiredAppCheck$1;function requireAppCheck$1(){if(hasRequiredAppCheck$1)return appCheck$1;hasRequiredAppCheck$1=1;Object.defineProperty(appCheck$1,"__esModule",{value:!0}),appCheck$1.AppCheck=void 0;const e=requireValidator$1(),t=requireAppCheckApiClientInternal(),s=requireTokenGenerator(),p=requireTokenVerifier(),g=requireCryptoSigner();class m{constructor(l){this.app=l,this.client=new t.AppCheckApiClient(l);try{this.tokenGenerator=new s.AppCheckTokenGenerator((0,g.cryptoSignerFromApp)(l))}catch(a){throw(0,s.appCheckErrorFromCryptoSignerError)(a)}this.appCheckTokenVerifier=new p.AppCheckTokenVerifier(l)}createToken(l,a){return this.tokenGenerator.createCustomToken(l,a).then(o=>this.client.exchangeToken(o,l))}verifyToken(l,a){return this.validateVerifyAppCheckTokenOptions(a),this.appCheckTokenVerifier.verifyToken(l).then(o=>a?.consume?this.client.verifyReplayProtection(l).then(h=>({alreadyConsumed:h,appId:o.app_id,token:o})):{appId:o.app_id,token:o})}validateVerifyAppCheckTokenOptions(l){if(!(typeof l>"u")&&!e.isNonNullObject(l))throw new t.FirebaseAppCheckError("invalid-argument","VerifyAppCheckTokenOptions must be a non-null object.")}}return appCheck$1.AppCheck=m,appCheck$1}var auth={};var hasRequiredAuth;function requireAuth(){return hasRequiredAuth||(hasRequiredAuth=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AuthClientErrorCode=e.FirebaseAuthError=e.UserRecord=e.UserMetadata=e.UserInfo=e.PhoneMultiFactorInfo=e.MultiFactorSettings=e.MultiFactorInfo=e.ProjectConfigManager=e.ProjectConfig=e.TenantManager=e.TenantAwareAuth=e.Tenant=e.BaseAuth=e.Auth=void 0,e.getAuth=p;const t=requireApp(),s=requireAuth$1();function p(_){return typeof _>"u"&&(_=(0,t.getApp)()),_.getOrInitService("auth",w=>new s.Auth(w))}var g=requireAuth$1();Object.defineProperty(e,"Auth",{enumerable:!0,get:function(){return g.Auth}});var m=requireBaseAuth();Object.defineProperty(e,"BaseAuth",{enumerable:!0,get:function(){return m.BaseAuth}});var d=requireTenant();Object.defineProperty(e,"Tenant",{enumerable:!0,get:function(){return d.Tenant}});var l=requireTenantManager();Object.defineProperty(e,"TenantAwareAuth",{enumerable:!0,get:function(){return l.TenantAwareAuth}}),Object.defineProperty(e,"TenantManager",{enumerable:!0,get:function(){return l.TenantManager}});var a=requireProjectConfig();Object.defineProperty(e,"ProjectConfig",{enumerable:!0,get:function(){return a.ProjectConfig}});var o=requireProjectConfigManager();Object.defineProperty(e,"ProjectConfigManager",{enumerable:!0,get:function(){return o.ProjectConfigManager}});var h=requireUserRecord();Object.defineProperty(e,"MultiFactorInfo",{enumerable:!0,get:function(){return h.MultiFactorInfo}}),Object.defineProperty(e,"MultiFactorSettings",{enumerable:!0,get:function(){return h.MultiFactorSettings}}),Object.defineProperty(e,"PhoneMultiFactorInfo",{enumerable:!0,get:function(){return h.PhoneMultiFactorInfo}}),Object.defineProperty(e,"UserInfo",{enumerable:!0,get:function(){return h.UserInfo}}),Object.defineProperty(e,"UserMetadata",{enumerable:!0,get:function(){return h.UserMetadata}}),Object.defineProperty(e,"UserRecord",{enumerable:!0,get:function(){return h.UserRecord}});var v=requireError();Object.defineProperty(e,"FirebaseAuthError",{enumerable:!0,get:function(){return v.FirebaseAuthError}}),Object.defineProperty(e,"AuthClientErrorCode",{enumerable:!0,get:function(){return v.AuthClientErrorCode}})})(auth)),auth}var appCheck={};var hasRequiredAppCheck;function requireAppCheck(){return hasRequiredAppCheck||(hasRequiredAppCheck=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AppCheck=void 0,e.getAppCheck=g;const t=requireApp(),s=requireAppCheck$1();var p=requireAppCheck$1();Object.defineProperty(e,"AppCheck",{enumerable:!0,get:function(){return p.AppCheck}});function g(m){return typeof m>"u"&&(m=(0,t.getApp)()),m.getOrInitService("appCheck",l=>new s.AppCheck(l))}})(appCheck)),appCheck}var database$1={},database={},hasRequiredDatabase$1;function requireDatabase$1(){if(hasRequiredDatabase$1)return database;hasRequiredDatabase$1=1;var e={};Object.defineProperty(database,"__esModule",{value:!0}),database.DatabaseService=void 0;const t=require$$1$3,s=require$$1$3,p=requireError(),g=requireValidator$1(),m=requireApiRequest(),d=requireUtils$2(),l=300*1e3;class a{constructor(y){if(this.databases={},!g.isNonNullObject(y)||!("options"in y))throw new p.FirebaseDatabaseError({code:"invalid-argument",message:"First argument passed to admin.database() must be a valid Firebase app instance."});this.appInternal=y}get firebaseApp(){return this.app}delete(){this.tokenListener&&(this.firebaseApp.INTERNAL.removeAuthTokenListener(this.tokenListener),clearTimeout(this.tokenRefreshTimeout));const y=[];for(const w of Object.keys(this.databases)){const T=this.databases[w];y.push(T.INTERNAL.delete())}return Promise.all(y).then(()=>{this.databases={}})}get app(){return this.appInternal}getDatabase(y){const w=this.ensureUrl(y);if(!g.isNonEmptyString(w))throw new p.FirebaseDatabaseError({code:"invalid-argument",message:"Database URL must be a valid, non-empty URL string."});let T=this.databases[w];if(typeof T>"u"){T=requireIndex_standalone().initStandalone(this.appInternal,w,(0,d.getSdkVersion)()).instance;const O=new h(this.app,w);T.getRules=()=>O.getRules(),T.getRulesJSON=()=>O.getRulesJSON(),T.setRules=E=>O.setRules(E),this.databases[w]=T}return this.tokenListener||(this.tokenListener=this.onTokenChange.bind(this),this.firebaseApp.INTERNAL.addAuthTokenListener(this.tokenListener)),T}onTokenChange(y){const w=this.firebaseApp.INTERNAL.getCachedToken();if(w){const T=w.expirationTime-l-Date.now();T>0&&this.scheduleTokenRefresh(T)}}scheduleTokenRefresh(y){clearTimeout(this.tokenRefreshTimeout),this.tokenRefreshTimeout=setTimeout(()=>{this.firebaseApp.INTERNAL.getToken(!0).catch(()=>{})},y)}ensureUrl(y){if(typeof y<"u")return y;if(typeof this.appInternal.options.databaseURL<"u")return this.appInternal.options.databaseURL;throw new p.FirebaseDatabaseError({code:"invalid-argument",message:"Can't determine Firebase Database URL."})}}database.DatabaseService=a;const o=".settings/rules.json";class h{constructor(y,w){let T=new t.URL(w);const I=e.FIREBASE_DATABASE_EMULATOR_HOST;if(I){const O=v(T);T=new t.URL(`http://${I}?ns=${O}`)}T.pathname=s.join(T.pathname,o),this.dbUrl=T.toString(),this.httpClient=new m.AuthorizedHttpClient(y)}getRules(){const y={method:"GET",url:this.dbUrl};return this.httpClient.send(y).then(w=>{if(!w.text)throw new p.FirebaseAppError(p.AppErrorCodes.INTERNAL_ERROR,"HTTP response missing data.");return w.text}).catch(w=>{throw this.handleError(w)})}getRulesJSON(){const y={method:"GET",url:this.dbUrl,data:{format:"strict"}};return this.httpClient.send(y).then(w=>w.data).catch(w=>{throw this.handleError(w)})}setRules(y){if(!g.isNonEmptyString(y)&&!g.isBuffer(y)&&!g.isNonNullObject(y)){const T=new p.FirebaseDatabaseError({code:"invalid-argument",message:"Source must be a non-empty string, Buffer or an object."});return Promise.reject(T)}const w={method:"PUT",url:this.dbUrl,data:y,headers:{"content-type":"application/json; charset=utf-8"}};return this.httpClient.send(w).then(()=>{}).catch(T=>{throw this.handleError(T)})}handleError(y){return y instanceof m.RequestResponseError?new p.FirebaseDatabaseError({code:p.AppErrorCodes.INTERNAL_ERROR,message:this.getErrorMessage(y)}):y}getErrorMessage(y){const w="Error while accessing security rules";try{const T=y.response.data;if(T&&T.error)return`${w}: ${T.error.trim()}`}catch{}return`${w}: ${y.response.text}`}}function v(_){const y=_.searchParams.get("ns");if(y)return y;const w=_.hostname,T=w.indexOf(".");return w.substring(0,T).toLowerCase()}return database}var hasRequiredDatabase;function requireDatabase(){return hasRequiredDatabase||(hasRequiredDatabase=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FirebaseDatabaseError=e.ServerValue=e.enableLogging=void 0,e.getDatabase=g,e.getDatabaseWithUrl=m;const t=requireIndex_standalone(),s=requireApp(),p=requireDatabase$1();e.enableLogging=t.enableLogging,e.ServerValue=t.ServerValue;function g(a){return d({app:a})}function m(a,o){return d({url:a,app:o})}function d(a){let{app:o}=a;return typeof o>"u"&&(o=(0,s.getApp)()),o.getOrInitService("database",_=>new p.DatabaseService(_)).getDatabase(a.url)}var l=requireError();Object.defineProperty(e,"FirebaseDatabaseError",{enumerable:!0,get:function(){return l.FirebaseDatabaseError}})})(database$1)),database$1}var messaging={};var hasRequiredMessaging;function requireMessaging(){return hasRequiredMessaging||(hasRequiredMessaging=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MessagingClientErrorCode=e.FirebaseMessagingError=e.Messaging=void 0,e.getMessaging=g;const t=requireApp(),s=requireMessaging$1();var p=requireMessaging$1();Object.defineProperty(e,"Messaging",{enumerable:!0,get:function(){return p.Messaging}});function g(d){return typeof d>"u"&&(d=(0,t.getApp)()),d.getOrInitService("messaging",a=>new s.Messaging(a))}var m=requireError();Object.defineProperty(e,"FirebaseMessagingError",{enumerable:!0,get:function(){return m.FirebaseMessagingError}}),Object.defineProperty(e,"MessagingClientErrorCode",{enumerable:!0,get:function(){return m.MessagingClientErrorCode}})})(messaging)),messaging}var firestore={},firestoreInternal={};var hasRequiredFirestoreInternal;function requireFirestoreInternal(){if(hasRequiredFirestoreInternal)return firestoreInternal;hasRequiredFirestoreInternal=1;Object.defineProperty(firestoreInternal,"__esModule",{value:!0}),firestoreInternal.FirestoreService=void 0,firestoreInternal.getFirestoreOptions=m;const e=requireError(),t=requireCredentialInternal(),s=requireValidator$1(),p=requireUtils$2();class g{constructor(a){this.databases=new Map,this.firestoreSettings=new Map,this.appInternal=a}initializeDatabase(a,o){const h=this.databases.get(a);if(h){const _=this.firestoreSettings.get(a)??{};if(this.checkIfSameSettings(o,_))return h;throw new e.FirebaseFirestoreError({code:"failed-precondition",message:"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance."})}const v=d(this.app,a,o);return this.databases.set(a,v),this.firestoreSettings.set(a,o),v}getDatabase(a){let o=this.databases.get(a);return o===void 0&&(o=d(this.app,a,{}),this.databases.set(a,o),this.firestoreSettings.set(a,{})),o}checkIfSameSettings(a,o){const h=a??{},v=o??{};return h.preferRest===v.preferRest}get app(){return this.appInternal}}firestoreInternal.FirestoreService=g;function m(l,a){if(!s.isNonNullObject(l)||!("options"in l))throw new e.FirebaseFirestoreError({code:"invalid-argument",message:"First argument passed to admin.firestore() must be a valid Firebase app instance."});const o=p.getExplicitProjectId(l),h=l.options.credential,v=p.getSdkVersion(),_=a?.preferRest;if(h instanceof t.ServiceAccountCredential)return{credentials:{private_key:h.privateKey,client_email:h.clientEmail},projectId:o,firebaseVersion:v,firebaseAdminVersion:v,preferRest:_};if((0,t.isApplicationDefault)(l.options.credential))return s.isNonEmptyString(o)?{projectId:o,firebaseVersion:v,firebaseAdminVersion:v,preferRest:_}:{firebaseVersion:v,firebaseAdminVersion:v,preferRest:_};throw new e.FirebaseFirestoreError({code:"invalid-credential",message:"Failed to initialize Google Cloud Firestore client with the available credentials. Must initialize the SDK with a certificate credential or application default credentials to use Cloud Firestore API."})}function d(l,a,o){const h=m(l,o);h.databaseId=a;let v;try{v=requireSrc().Firestore}catch(_){throw new e.FirebaseFirestoreError({code:"missing-dependencies",message:`Failed to import the Cloud Firestore client library for Node.js. Make sure to install the "@google-cloud/firestore" npm package. Original error: ${_}`})}return new v(h)}return firestoreInternal}var hasRequiredFirestore;function requireFirestore(){return hasRequiredFirestore||(hasRequiredFirestore=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FirebaseFirestoreError=e.setLogFunction=e.v1=e.WriteResult=e.WriteBatch=e.Transaction=e.Timestamp=e.QuerySnapshot=e.QueryPartition=e.QueryDocumentSnapshot=e.Query=e.GrpcStatus=e.GeoPoint=e.Firestore=e.Filter=e.FieldValue=e.FieldPath=e.DocumentSnapshot=e.DocumentReference=e.CollectionReference=e.CollectionGroup=e.BundleBuilder=e.BulkWriter=e.AggregateQuerySnapshot=e.AggregateQuery=e.AggregateField=void 0,e.getFirestore=m,e.initializeFirestore=d;const t=requireApp(),s=requireFirestoreInternal(),p=requirePath();var g=requireSrc();Object.defineProperty(e,"AggregateField",{enumerable:!0,get:function(){return g.AggregateField}}),Object.defineProperty(e,"AggregateQuery",{enumerable:!0,get:function(){return g.AggregateQuery}}),Object.defineProperty(e,"AggregateQuerySnapshot",{enumerable:!0,get:function(){return g.AggregateQuerySnapshot}}),Object.defineProperty(e,"BulkWriter",{enumerable:!0,get:function(){return g.BulkWriter}}),Object.defineProperty(e,"BundleBuilder",{enumerable:!0,get:function(){return g.BundleBuilder}}),Object.defineProperty(e,"CollectionGroup",{enumerable:!0,get:function(){return g.CollectionGroup}}),Object.defineProperty(e,"CollectionReference",{enumerable:!0,get:function(){return g.CollectionReference}}),Object.defineProperty(e,"DocumentReference",{enumerable:!0,get:function(){return g.DocumentReference}}),Object.defineProperty(e,"DocumentSnapshot",{enumerable:!0,get:function(){return g.DocumentSnapshot}}),Object.defineProperty(e,"FieldPath",{enumerable:!0,get:function(){return g.FieldPath}}),Object.defineProperty(e,"FieldValue",{enumerable:!0,get:function(){return g.FieldValue}}),Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return g.Filter}}),Object.defineProperty(e,"Firestore",{enumerable:!0,get:function(){return g.Firestore}}),Object.defineProperty(e,"GeoPoint",{enumerable:!0,get:function(){return g.GeoPoint}}),Object.defineProperty(e,"GrpcStatus",{enumerable:!0,get:function(){return g.GrpcStatus}}),Object.defineProperty(e,"Query",{enumerable:!0,get:function(){return g.Query}}),Object.defineProperty(e,"QueryDocumentSnapshot",{enumerable:!0,get:function(){return g.QueryDocumentSnapshot}}),Object.defineProperty(e,"QueryPartition",{enumerable:!0,get:function(){return g.QueryPartition}}),Object.defineProperty(e,"QuerySnapshot",{enumerable:!0,get:function(){return g.QuerySnapshot}}),Object.defineProperty(e,"Timestamp",{enumerable:!0,get:function(){return g.Timestamp}}),Object.defineProperty(e,"Transaction",{enumerable:!0,get:function(){return g.Transaction}}),Object.defineProperty(e,"WriteBatch",{enumerable:!0,get:function(){return g.WriteBatch}}),Object.defineProperty(e,"WriteResult",{enumerable:!0,get:function(){return g.WriteResult}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return g.v1}}),Object.defineProperty(e,"setLogFunction",{enumerable:!0,get:function(){return g.setLogFunction}});function m(a,o){const h=typeof a=="object"?a:(0,t.getApp)(),v=(typeof a=="string"?a:o)||p.DEFAULT_DATABASE_ID;return h.getOrInitService("firestore",w=>new s.FirestoreService(w)).getDatabase(v)}function d(a,o,h){return o??(o={}),h??(h=p.DEFAULT_DATABASE_ID),a.getOrInitService("firestore",y=>new s.FirestoreService(y)).initializeDatabase(h,o)}var l=requireError();Object.defineProperty(e,"FirebaseFirestoreError",{enumerable:!0,get:function(){return l.FirebaseFirestoreError}})})(firestore)),firestore}var instanceId={};var hasRequiredInstanceId;function requireInstanceId(){return hasRequiredInstanceId||(hasRequiredInstanceId=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InstanceIdClientErrorCode=e.FirebaseInstanceIdError=e.InstanceId=void 0,e.getInstanceId=p;const t=requireApp(),s=requireInstanceId$1();Object.defineProperty(e,"InstanceId",{enumerable:!0,get:function(){return s.InstanceId}});function p(m){return typeof m>"u"&&(m=(0,t.getApp)()),m.getOrInitService("instanceId",l=>new s.InstanceId(l))}var g=requireError();Object.defineProperty(e,"FirebaseInstanceIdError",{enumerable:!0,get:function(){return g.FirebaseInstanceIdError}}),Object.defineProperty(e,"InstanceIdClientErrorCode",{enumerable:!0,get:function(){return g.InstanceIdClientErrorCode}})})(instanceId)),instanceId}var machineLearning={};var hasRequiredMachineLearning;function requireMachineLearning(){return hasRequiredMachineLearning||(hasRequiredMachineLearning=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Model=e.MachineLearning=void 0,e.getMachineLearning=g;const t=requireApp(),s=requireMachineLearning$1();var p=requireMachineLearning$1();Object.defineProperty(e,"MachineLearning",{enumerable:!0,get:function(){return p.MachineLearning}}),Object.defineProperty(e,"Model",{enumerable:!0,get:function(){return p.Model}});function g(m){return typeof m>"u"&&(m=(0,t.getApp)()),m.getOrInitService("machineLearning",l=>new s.MachineLearning(l))}})(machineLearning)),machineLearning}var projectManagement={};var hasRequiredProjectManagement;function requireProjectManagement(){return hasRequiredProjectManagement||(hasRequiredProjectManagement=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FirebaseProjectManagementError=e.IosApp=e.ShaCertificate=e.AndroidApp=e.ProjectManagement=e.AppPlatform=void 0,e.getProjectManagement=l;const t=requireApp(),s=requireProjectManagement$1();var p=requireAppMetadata();Object.defineProperty(e,"AppPlatform",{enumerable:!0,get:function(){return p.AppPlatform}});var g=requireProjectManagement$1();Object.defineProperty(e,"ProjectManagement",{enumerable:!0,get:function(){return g.ProjectManagement}});var m=requireAndroidApp();Object.defineProperty(e,"AndroidApp",{enumerable:!0,get:function(){return m.AndroidApp}}),Object.defineProperty(e,"ShaCertificate",{enumerable:!0,get:function(){return m.ShaCertificate}});var d=requireIosApp();Object.defineProperty(e,"IosApp",{enumerable:!0,get:function(){return d.IosApp}});function l(o){return typeof o>"u"&&(o=(0,t.getApp)()),o.getOrInitService("projectManagement",v=>new s.ProjectManagement(v))}var a=requireError();Object.defineProperty(e,"FirebaseProjectManagementError",{enumerable:!0,get:function(){return a.FirebaseProjectManagementError}})})(projectManagement)),projectManagement}var securityRules={};var hasRequiredSecurityRules;function requireSecurityRules(){return hasRequiredSecurityRules||(hasRequiredSecurityRules=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SecurityRules=e.RulesetMetadataList=e.Ruleset=void 0,e.getSecurityRules=g;const t=requireApp(),s=requireSecurityRules$1();var p=requireSecurityRules$1();Object.defineProperty(e,"Ruleset",{enumerable:!0,get:function(){return p.Ruleset}}),Object.defineProperty(e,"RulesetMetadataList",{enumerable:!0,get:function(){return p.RulesetMetadataList}}),Object.defineProperty(e,"SecurityRules",{enumerable:!0,get:function(){return p.SecurityRules}});function g(m){return typeof m>"u"&&(m=(0,t.getApp)()),m.getOrInitService("securityRules",l=>new s.SecurityRules(l))}})(securityRules)),securityRules}var remoteConfig={};var hasRequiredRemoteConfig;function requireRemoteConfig(){return hasRequiredRemoteConfig||(hasRequiredRemoteConfig=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RemoteConfigFetchResponse=e.RemoteConfig=e.PercentConditionOperator=e.CustomSignalOperator=void 0,e.getRemoteConfig=m;const t=requireApp(),s=requireRemoteConfig$1();var p=requireRemoteConfigApi();Object.defineProperty(e,"CustomSignalOperator",{enumerable:!0,get:function(){return p.CustomSignalOperator}}),Object.defineProperty(e,"PercentConditionOperator",{enumerable:!0,get:function(){return p.PercentConditionOperator}});var g=requireRemoteConfig$1();Object.defineProperty(e,"RemoteConfig",{enumerable:!0,get:function(){return g.RemoteConfig}}),Object.defineProperty(e,"RemoteConfigFetchResponse",{enumerable:!0,get:function(){return g.RemoteConfigFetchResponse}});function m(d){return typeof d>"u"&&(d=(0,t.getApp)()),d.getOrInitService("remoteConfig",a=>new s.RemoteConfig(a))}})(remoteConfig)),remoteConfig}var hasRequiredFirebaseNamespace;function requireFirebaseNamespace(){if(hasRequiredFirebaseNamespace)return firebaseNamespace;hasRequiredFirebaseNamespace=1;Object.defineProperty(firebaseNamespace,"__esModule",{value:!0}),firebaseNamespace.defaultNamespace=firebaseNamespace.FirebaseNamespace=firebaseNamespace.FirebaseNamespaceInternals=void 0;const e=requireLifecycle(),t=requireCredentialFactory(),s=requireUtils$2();class p{constructor(a){this.appStore=a}initializeApp(a,o){const h=this.appStore.initializeApp(a,o);return d(h)}app(a){const o=this.appStore.getApp(a);return d(o)}get apps(){return this.appStore.getApps().map(a=>d(a))}}firebaseNamespace.FirebaseNamespaceInternals=p;const g={cert:t.cert,refreshToken:t.refreshToken,applicationDefault:t.applicationDefault};class m{constructor(a){this.__esModule=!0,this.credential=g,this.SDK_VERSION=(0,s.getSdkVersion)(),this.Promise=Promise,this.INTERNAL=new p(a??new e.AppStore)}get auth(){const a=h=>this.ensureApp(h).auth(),o=requireAuth$1().Auth;return Object.assign(a,{Auth:o})}get database(){return Object.assign(o=>this.ensureApp(o).database(),requireIndex_standalone())}get messaging(){const a=h=>this.ensureApp(h).messaging(),o=requireMessaging$1().Messaging;return Object.assign(a,{Messaging:o})}get storage(){const a=h=>this.ensureApp(h).storage(),o=requireStorage$1().Storage;return Object.assign(a,{Storage:o})}get firestore(){let a=h=>this.ensureApp(h).firestore();const o=requireSrc();return a=Object.assign(a,o.Firestore),Object.defineProperty(a,"v1beta1",{get:()=>o.v1beta1}),Object.defineProperty(a,"v1",{get:()=>o.v1}),a}get machineLearning(){const a=h=>this.ensureApp(h).machineLearning(),o=requireMachineLearning$1().MachineLearning;return Object.assign(a,{MachineLearning:o})}get installations(){const a=h=>this.ensureApp(h).installations(),o=requireInstallations$1().Installations;return Object.assign(a,{Installations:o})}get instanceId(){const a=h=>this.ensureApp(h).instanceId(),o=requireInstanceId$1().InstanceId;return Object.assign(a,{InstanceId:o})}get projectManagement(){const a=h=>this.ensureApp(h).projectManagement(),o=requireProjectManagement$1().ProjectManagement;return Object.assign(a,{ProjectManagement:o})}get securityRules(){const a=h=>this.ensureApp(h).securityRules(),o=requireSecurityRules$1().SecurityRules;return Object.assign(a,{SecurityRules:o})}get remoteConfig(){const a=h=>this.ensureApp(h).remoteConfig(),o=requireRemoteConfig$1().RemoteConfig;return Object.assign(a,{RemoteConfig:o})}get appCheck(){const a=h=>this.ensureApp(h).appCheck(),o=requireAppCheck$1().AppCheck;return Object.assign(a,{AppCheck:o})}initializeApp(a,o){return this.INTERNAL.initializeApp(a,o)}app(a){return this.INTERNAL.app(a)}get apps(){return this.INTERNAL.apps}ensureApp(a){return typeof a>"u"&&(a=this.app()),a}}firebaseNamespace.FirebaseNamespace=m,firebaseNamespace.defaultNamespace=new m(e.defaultAppStore);function d(l){const a=l;return a.__extended||(a.auth=()=>{const o=requireAuth().getAuth;return o(l)},a.appCheck=()=>{const o=requireAppCheck().getAppCheck;return o(l)},a.database=o=>{const h=requireDatabase().getDatabaseWithUrl;return h(o,l)},a.messaging=()=>{const o=requireMessaging().getMessaging;return o(l)},a.storage=()=>{const o=requireStorage().getStorage;return o(l)},a.firestore=()=>{const o=requireFirestore().getFirestore;return o(l)},a.instanceId=()=>{const o=requireInstanceId().getInstanceId;return o(l)},a.installations=()=>{const o=requireInstallations().getInstallations;return o(l)},a.machineLearning=()=>{const o=requireMachineLearning().getMachineLearning;return o(l)},a.projectManagement=()=>{const o=requireProjectManagement().getProjectManagement;return o(l)},a.securityRules=()=>{const o=requireSecurityRules().getSecurityRules;return o(l)},a.remoteConfig=()=>{const o=requireRemoteConfig().getRemoteConfig;return o(l)},a.__extended=!0),a}return firebaseNamespace}var defaultNamespace,hasRequiredDefaultNamespace;function requireDefaultNamespace(){if(hasRequiredDefaultNamespace)return defaultNamespace;hasRequiredDefaultNamespace=1;const e=requireFirebaseNamespace();return e.defaultNamespace.default=e.defaultNamespace,defaultNamespace=e.defaultNamespace,defaultNamespace}var lib,hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1;var e={};const t=requireDefaultNamespace(),s=typeof e<"u"?e:0;return Object.prototype.toString.call(s)!=="[object process]"&&console.error(`
======== WARNING! ========

firebase-admin appears to have been installed in an unsupported environment.
This package should only be used in server-side or backend Node.js environments,
and should not be used in web browsers or other client-side environments.

Use the Firebase JS SDK for client-side Firebase integrations:

https://firebase.google.com/docs/web/setup
`),lib=t,lib}var libExports=requireLib();const index=getDefaultExportFromCjs(libExports),index$1=_mergeNamespaces({__proto__:null,default:index},[libExports]);return exports.app_index_main=app_index_main,Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),exports})({});
