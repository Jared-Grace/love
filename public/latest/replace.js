(()=>{"use strict";function error(e){throw new Error(e)}function json_to(e){return JSON.stringify(e)}function undefined_is(e){return void 0===e}function undefined_not_is_assert_lambda(e,t){if(undefined_is(e)){error(json_to(t()))}}function property_get(e,t){let a=e[t];return undefined_not_is_assert_lambda(a,function object_get(){return{object:e,property_name:t}}),a}function html_component_element_get(e){return property_get(e,"element")}function html_text_set(e,t){html_component_element_get(e).innerHTML=t}function html_parent_append(e,t){let a=html_component_element_get(e),_=html_component_element_get(t);a.appendChild(_)}function html_style_set(e,t,a){html_component_element_get(e).style[t]=a}function html_component_wrap(e){return{element:e}}function html_element(e,t){let a=html_component_wrap(document.createElement(t));return html_parent_append(e,a),html_style_set(a,"box-sizing","border-box"),a}function html_document_head(){return html_component_wrap(document.head)}function html_style_button(e){!function html_style_head(e){html_text_set(html_element(html_document_head(),"style"),e)}("button { "+e+" }")}function html_attribute_set(e,t,a){html_component_element_get(e).setAttribute(t,a)}function html_stylesheet(e){let t=function html_link(){return html_element(html_document_head(),"link")}();html_attribute_set(t,"href",e),html_attribute_set(t,"rel","stylesheet")}function not(e){return!e}function property_set(e,t,a){e[t]=a}function property_exists(e,t){return e&&Object.hasOwn(e,t)}function assert(e){not(e)&&error()}function equal(e,t){return e===t}function arguments_assert(e,t){!function equal_assert(e,t){assert(equal(e,t))}(property_get(e,"length"),t)}function assert_json_get(e,t){!function assert_message_get(e,t){not(e)&&error(t())}(e,function json_get(){return json_to(t())})}function property_delete(e,t){!function property_exists_assert(e,t){assert_json_get(property_exists(e,t),function lambda(){return{object:e,property_name:t}})}(e,t),delete e[t]}function global_alternate_set(e){let t=global_get();!function global_function_set(e,t){property_set(global_get(),e.name,t)}(global_alternate_set,e);return function lambda(){property_delete(t,global_alternate_set.name)}}let e={};function global_get(){if(property_exists(e,global_alternate_set.name)){return property_get(e,global_alternate_set.name)}return e}function global_function_initialize_lambda(e,t){arguments_assert(arguments,2);let a=function property_initialize_lambda(e,t,a){not(property_exists(e,t))&&property_set(e,t,a());return property_get(e,t)}(global_get(),e.name,t);return a}function html_font_include(e,t){!function global_function_once(e,t){global_function_initialize_lambda(t,function value_get(){return e(),!0})}(function lambda(){html_stylesheet(t)},e)}function html_roboto_include(){html_font_include(html_roboto_include,"https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap")}function html_font_sans_serif_set_html(){let e=function html_document_root(){return html_component_wrap(document.documentElement)}();html_roboto_include();!function html_font_set(e,t){html_style_set(e,"font-family",t)}(e,'"Roboto", Arial, Helvetica, sans-serif');html_style_button(':font-family: "Roboto", Arial, Helvetica, sans-serif')}function each(e,t){for(let a of e)if(!0===t(a))return}function json_format_to_truncated(e){let t=function json_format_to(e){return JSON.stringify(e,null,1)}(e);return function text_take(e,t){let a=function text_slice(e,t,a){return e.slice(t,a)}(e,0,t);return a}(t,1e4)}function error_json(e){error(json_format_to_truncated(e))}function object_merge_generic(e,t,a){each(function properties_get(e){return Object.getOwnPropertyNames(e)}(a),function lambda(_){e&&property_exists(t,_)&&error_json({to:t,from:a,property_name:_});let n=property_get(a,_);property_set(t,_,n)})}function object_merge(e,t){return object_merge_generic(!0,e,t),e}function log_keep(e){console.log(e)}function log(e){log_keep(e)}function global_function_initialize(e,t){arguments_assert(arguments,2);let a=function lambda_get(e){return function value_get(){return e}}(t);return global_function_initialize_lambda(e,a)}function storage_local_specify_set(e,t){let a=json_to({value:t=function undefined_is_if_null(e){return undefined_is(e)&&(e=null),e}(t)});localStorage.setItem(e,a)}function storage_local_key_get(e,t){return e.name+" "+t}function storage_local_enabled(){return not(function global_function_exists(e){return property_exists(global_get(),e.name)}(storage_local_enabled))||!0===function global_function_get(e){return property_get(global_get(),e.name)}(storage_local_enabled)}function storage_local_set(e,t,a){let _=storage_local_key_get(e,t);storage_local_enabled()?storage_local_specify_set(_,a):function global_function_property_set(e,t,a){property_set(global_function_initialize(e,{}),t,a)}(storage_local_set,_,a)}function global_function_property_exists(e,t){let a=function global_function_initialize_object(e){return global_function_initialize(e,{})}(e);return property_exists(a,t)}function storage_local_get_global(e){let t=function storage_local_exists_global(e){return global_function_property_exists(storage_local_set,e)}(e),a=null;return t&&(a=function global_function_property_get(e,t){return property_get(global_function_initialize(e,{}),t)}(storage_local_set,e)),a}function null_not_is(e){return null!==e}function storage_local_specify_get(e){let t=function storage_local_specify_get_json(e){return localStorage.getItem(e)}(e),a=null;if(null_not_is(t)){let e=function json_from(e){return JSON.parse(e)}(t);a=property_get(e,"value")}return a}function storage_local_get(e,t){let a=storage_local_key_get(e,t);if(storage_local_enabled()){return storage_local_specify_get(a)}return storage_local_get_global(a)}function storage_local_initialize_context(e,t,a){let _=function storage_local_initialize(e,t,a){let _=storage_local_get(e,t),n=function null_is(e){return null===e}(_);return n&&(log({value_initial:a}),storage_local_set(e,t,a),_=storage_local_get(e,t)),_}(property_get(e,"app_fn"),t,a);return _}function app_replace_font_size(e){return storage_local_initialize_context(e,"font_size",20)}function html_style_font_size(e,t){html_style_set(e,"font-size",t)}function app_replace_font_size_refresh(e){html_style_font_size(property_get(e,"root"),app_replace_font_size(e)+"px")}function list_is(e){return Array.isArray(e)}function list_join(e,t){return not(list_is(e))&&error_json({list:e}),e.join(t)}function function_name_combine(e,t){return function function_name_combine_multiple(e){return list_join(e,"_")}([e,t])}function html_clear(e){html_text_set(e,"")}function html_document_body(){return html_component_wrap(document.body)}function property_equals_curry_right_2(e,t){return function object_property_equals_lambda_result(a){let _=function property_equals(e,t,a){return equal(property_get(e,t),a)}(a,e,t);return _}}function list_is_assert(e){!function list_is_assert_json(e,t){assert_json_get(list_is(e),t)}(e,function lambda(){return{list:e}})}function list_filter(e,t){return list_is_assert(e),e.filter(function list_filter_lambda(e){return t(e)})}function list_size(e){return list_is_assert(e),e.length}function list_size_1_assert_message(e,t){!function list_size_assert_message(e,t,a){not(list_size(e)===t)&&error_json({message:a,list:e,size:t})}(e,1,t)}function assert_json(e,t){!function assert_message(e,t){not(e)&&error(t)}(e,json_to(t))}function integer_is_assert(e){assert_json(function integer_is(e){return Number.isInteger(e)}(e),{index:e})}function list_get(e,t){integer_is_assert(t);let a=e[t];return undefined_not_is_assert_lambda(a,function object_get(){return{list:e,index:t}}),a}function list_single(e){!function list_size_1_assert(e){list_size_1_assert_message(e,{})}(e);let t=function list_first(e){return list_get(e,0)}(e);return t}function list_find_property(e,t,a){let _=function list_find(e,t){return list_single(list_filter(e,t))}(e,property_equals_curry_right_2(t,a));return _}async function app_shared_refresh(e){let t=property_get(e,"screens"),a=property_get(e,"app_fn");html_clear(html_document_body());let _=list_find_property(t,"name",storage_local_initialize_context(e,"screen",function_name_combine(property_get(a,"name"),"home")));await _(e)}function html_style_assign(e,t){!function object_assign(e,t){Object.assign(e,t)}(html_component_element_get(e).style,t)}function html_style_background_color_set(e,t){html_style_assign(e,{"background-color":t})}function html_span_text(e,t){let a=function html_span(e){return html_element(e,"span")}(e);return html_text_set(a,t),a}function html_border_none(e){html_style_set(e,"border","none")}function html_style_padding_y(e,t){html_style_assign(e,{"padding-top":t,"padding-bottom":t})}function html_margin(e,t){!function html_style_margin_x(e,t){html_style_assign(e,{"margin-left":t,"margin-right":t})}(e,t),function html_style_margin_y(e,t){html_style_assign(e,{"margin-top":t,"margin-bottom":t})}(e,t)}function html_border_radius_em(e,t){!function html_border_radius(e,t){html_style_assign(e,{"border-radius":t})}(e,t+"em")}function app_replace_button_symbol_style_inner(e){html_border_radius_em(e,.5),function html_margin_em(e,t){html_margin(e,t+"em")}(e,.09),html_border_none(e),function html_style_padding_x(e,t){html_style_assign(e,{"padding-left":t,"padding-right":t})}(e,"0.37em"),html_style_padding_y(e,"0.1em")}function app_replace_button_symbol_style(e){app_replace_button_symbol_style_inner(e),function html_display_inline_block(e){html_style_set(e,"display","inline-block")}(e),html_style_assign(e,{"line-height":1})}function app_replace_button_rule_style(e){app_replace_button_symbol_style(e),html_style_padding_y(e,"0.3em"),html_border_none(e)}function html_width_full(e){html_style_assign(e,{width:"100%"})}function html_style_padding_em(e,t){!function html_style_padding(e,t){html_style_assign(e,{padding:t})}(e,t+"em")}function html_on(e,t,a){!function function_is_assert(e){assert_json(function function_is(e){return"function"==typeof e}(e),{lambda:e})}(a),html_component_element_get(e).addEventListener(t,a)}function html_button_element(e){let t=html_element(e,"button");return function html_style_font_size_inherit(e){html_style_font_size(e,"inherit")}(t),t}function html_button_notext(e,t){let a=html_button_element(e);return function html_on_click(e,t){html_on(e,"click",t)}(a,t),a}function html_button(e,t,a){arguments_assert(arguments,3);let _=html_button_notext(e,a);return html_text_set(_,t),_}function app_replace_button(e,t,a){let _=html_button(e,t,a);return function app_replace_button_style(e){app_replace_button_symbol_style(e),html_style_background_color_set(e,"#dadadaff")}(_),html_style_padding_em(_,"0.3"),_}function app_replace_button_wide(e,t,a){let _=app_replace_button(e,t,a);return html_width_full(_),_}function string_pad_left_space(e){return" "+e}function emoji_check(){return"‚úÖ"}function app_replace_goals_generic(e,t,a,_,n){const r=not(t)&&a;let l=function add_1(e){return function add(e,t){return e+t}(e,1)}(_)+".";if(t){l+=string_pad_left_space("‚úÖ")}else if(r){l+=string_pad_left_space("üëâ")}let s=app_replace_button_wide(e,"",n);app_replace_button_rule_style(s);let i=function html_style_text_left_centered(e,t,a){html_style_assign(e,{display:"flex","align-items":"center"}),html_span_text(e,t);let _=html_span_text(e,a);return html_style_assign(_,{"flex-grow":"1","text-align":"center"}),{title:_}}(s,l,""),o=property_get(i,"title");html_style_set(o,"line-height",1.5);return function html_style_background_color_set_if(e,t,a){e&&html_style_background_color_set(t,a)}(r,s,"lightgreen"),o}function app_replace_goal_completed_initialize(e){return function property_get_or(e,t,a){let _=a;return property_exists(e,t)&&(_=property_get(e,t)),_}(e,"completed",!1)}function app_replace_rule_sets_data_initialize(e){return storage_local_initialize_context(e,"rule_sets_data",{})}function property_initialize_empty(e,t){let a=function property_initialize(e,t,a){return not(property_exists(e,t))&&property_set(e,t,a),property_get(e,t)}(e,t,{});return a}function app_replace_rule_sets_data_goal(e,t,a){let _=property_initialize_empty(e,t);return property_initialize_empty(_,json_to(a))}function each_index(e,t){let a=0;each(e,function lambda_each_index(e){t(e,a),a++})}function storage_local_set_context(e,t,a){let{app_fn:_}=e;storage_local_set(_,t,a)}function app_replace_font_size_adjust_curried(e){return async function app_replace_font_size_adjust_curried_result(t){let a=await async function app_replace_font_size_adjust(e,t){let a=await app_replace_font_size(e);a=t(a),storage_local_set_context(e,"font_size",a),app_replace_font_size_refresh(e)}(e,t);return a}}function app_replace_settings(e){let t=property_get(e,"root");app_replace_button_home(t,e);let a=function multiply_curried_right(e){return function multiply_curried_right_result(t){let a=function multiply(e,t){return e*t}(t,e);return a}}(1.1),_=function divide_curried_right(e){return function divide_curried_right_result(t){let a=function divide(e,t){return e/t}(t,e);return a}}(1.1),n=app_replace_font_size_adjust_curried(e);html_button(t,"üóö Font size larger",async function lambda2(){await n(a)});html_button(t,"üóõ Font size smaller",async function lambda3(){await n(_)})}function app_shared_screen_set(e,t){!function app_shared_refresh_screen(e,t){storage_local_set_context(e,"screen",t),app_shared_refresh(e)}(e,property_get(t,"name"))}function list_map(e,t){return list_is_assert(e),e.map(t)}function invoke(e){let t=e();return log({lambda:e}),t}function app_replace_rule_set_unary_to_binary_equations(){return{name:"Unary to Binary Equations",rules:["e = b > c e = b c","c c > c + b c","d b > b d","d c > a d","d e = > = d","d + > + d","0 a > 1","1 a > a 0","b a > b 1"],goals:[{start:"dbce=bc",end:"bdce=bc"},{start:"dbce=bc",end:"bade=bc"},{start:"dbce=bc",end:"b1de=bc"},{start:"dbce=bc",end:"b1=dbc"},{start:"dbce=bc",end:"b1=bdc"},{start:"dbce=bc",end:"b1=bad"},{start:"dbce=bc",end:"b1=b1d"}]}}function app_replace_rule_set_unary_to_binary_equations_preparation(){return{name:"Unary to Binary Equations Preparation",rules:["d e = > = d","= d > d f =","d > d d","d d > d e d","e d > e ="],goals:[{start:"d",end:"dd"},{start:"d",end:"ded"},{start:"d",end:"de="},{start:"de=",end:"=d"},{start:"de=",end:"df="},{start:"de=",end:"ddf="},{start:"de=",end:"dedf="},{start:"de=",end:"df=f="}]}}function app_replace_rule_set_grow_same_three_different(){return{name:"Grow Same Three Different",rules:["c e b c > e b"],goals:[{start:"cce=bcc",end:"e=b"},{start:"cccce=bcccc",end:"e=b"}]}}function app_replace_rule_set_two_different_grow_same(){return{name:"Two Different Grow Same",rules:["e b > c e b c"],goals:[{start:"eb",end:"ccebcc"},{start:"eb",end:"ccccebcccc"}]}}function app_replace_rule_set_shrink_same_three_different(){return{name:"Shrink Same Three Different",rules:["c e = b c > e = b"],goals:[{start:"cce=bcc",end:"e=b"},{start:"cccce=bcccc",end:"e=b"}]}}function app_replace_rule_set_three_different_grow_same(){return{name:"Three Different Grow Same",rules:["e = b > c e = b c"],goals:[{start:"e=b",end:"cce=bcc"},{start:"e=b",end:"cccce=bcccc"}]}}function app_replace_rule_set_binary_counting(){return{name:"Binary Counting",rules:["0 a > 1","1 a > a 0","c > a c","b a > b 1"],goals:[{start:"b0c",end:"b0ac"},{start:"b0c",end:"b1c"},{start:"b0c",end:"b10c"},{start:"b0c",end:"b11c"},{start:"b0c",end:"b101c"},{start:"b0c",end:"b111c"},{start:"b0c",end:"b1010c"}]}}function app_replace_rule_set_binary_counting_prepare_2(){return{name:"Binary Counting Prepare 2",rules:["0 a > 1","1 a > a 0","1 > 1 1"],goals:[{start:"01a",end:"10"},{start:"01a",end:"100"},{start:"01a",end:"10000"}]}}function app_replace_rule_set_binary_counting_prepare_1(){return{name:"Binary Counting Prepare 1",rules:["1 a > a 0","1 > 1 1"],goals:[{start:"1a",end:"1a0"},{start:"1a",end:"a000"}]}}function app_replace_rule_set_unary_equations_adding(){return{name:"Unary Equations Adding",rules:["= > 1 = 1","1 1 > 1 + 1"],goals:[{start:"1=1",end:"11=11"},{start:"1=1",end:"11=1+1"},{start:"1=1",end:"1+1=11"},{start:"1=1",end:"1+11=111"},{start:"1=1",end:"1+11=11+1"},{start:"1=1",end:"1+1+111=11111"}]}}function app_replace_rule_set_shrink_left_pair_replace_right_same(){return{name:"Shrink Left Pair Replace Right Same",rules:["b a > a","b c > b b"],goals:[{start:"baba",end:"aa"},{start:"bba",end:"a"},{start:"bca",end:"bba"},{start:"bbba",end:"a"},{start:"bcbca",end:"a"},{start:"bcbabcba",end:"aa"}]}}function app_replace_rule_set_grow_left_pair_change_right(){return{name:"Grow Left Pair Change Right",rules:["a > b a","b b > b c"],goals:[{start:"aa",end:"baba"},{start:"a",end:"bba"},{start:"bba",end:"bca"},{start:"a",end:"bbba"},{start:"a",end:"bcbca"},{start:"aa",end:"bcbabcba"}]}}function app_replace_rule_set_expand_collapse(){return{name:"Expand Collapse",rules:["a > b b","b b > c"],goals:[{start:"a",end:"c"},{start:"aa",end:"cc"},{start:"bab",end:"cc"},{start:"aa",end:"bcb"},{start:"aaa",end:"bccb"},{start:"aaaaa",end:"acbbca"}]}}function app_replace_rule_set_shrink_different_2(){return{name:"Shrink Different 2",rules:["b c > a","d e > b"],goals:[{start:"dec",end:"a"},{start:"decdec",end:"aa"},{start:"decbcbcdec",end:"aaaa"}]}}function app_replace_rule_set_grow_different_2(){return{name:"Grow Different 2",rules:["a > b c","b > d e"],goals:[{start:"a",end:"dec"},{start:"aa",end:"decdec"},{start:"aaaa",end:"decbcbcdec"}]}}function app_replace_rule_set_replace_flow(){return{name:"Replace Flow",rules:["a > b","b > c"],goals:[{start:"ab",end:"cc"},{start:"acb",end:"ccc"},{start:"cabadc",end:"ccbcdc"},{start:"caaaaac",end:"ccabccc"}]}}function app_replace_rule_set_replace_2(){return{name:"Replace 2",rules:["a > b","c > d"],goals:[{start:"ac",end:"bd"},{start:"aca",end:"bdb"},{start:"cabacd",end:"dbbbdd"},{start:"caaaaac",end:"dbababd"}]}}function app_replace_rule_set_shrink_between(){return{name:"Shrink Between",rules:["a b a > a a"],goals:[{start:"aaaba",end:"aaaa"},{start:"abaaaba",end:"aaaaa"},{start:"abaabaaba",end:"aaaaaa"}]}}function app_replace_rule_set_grow_between(){return{name:"Grow Between",rules:["a a > a b a"],goals:[{start:"aaa",end:"aaba"},{start:"aaaa",end:"abaaba"},{start:"aaaaaa",end:"abaabaaba"}]}}function app_replace_rule_set_shrink_both_same(){return{name:"Shrink Both Same",rules:["a b a > b"],goals:[{start:"cabac",end:"cbc"},{start:"aaabaaa",end:"aba"},{start:"aaaaabaaaaa",end:"aba"}]}}function app_replace_rule_set_unary_equations(){return{name:"Unary Equations",rules:["= > 1 = 1"],goals:[{start:"1=1",end:"11=11"},{start:"1=1",end:"111=111"},{start:"1=1",end:"11111=11111"}]}}function app_replace_rule_set_shrink_triple(){return{name:"Shrink Triple",rules:["a a a > a"],goals:[{start:"aaa",end:"a"},{start:"aaaaa",end:"a"},{start:"aaaaaaa",end:"a"}]}}function app_replace_rule_set_grow_triple(){return{name:"Grow Triple",rules:["a > a a a"],goals:[{start:"a",end:"aaa"},{start:"a",end:"aaaaa"},{start:"a",end:"aaaaaaa"}]}}function app_replace_rule_set_swap_change_left(){return{name:"Swap Change Left",rules:["b c > a b"],goals:[{start:"bcc",end:"aab"},{start:"bcbcbc",end:"bcbcab"},{start:"bcbcabbc",end:"abababab"},{start:"bcccc",end:"aaaab"},{start:"abbcabbcbcbc",end:"abababababab"}]}}function app_replace_rule_set_swap_change_right(){return{name:"Swap Change Right",rules:["a b > b c"],goals:[{start:"aab",end:"bcc"},{start:"ababab",end:"ababbc"},{start:"abababab",end:"bcbcabbc"},{start:"aaaab",end:"bcccc"},{start:"abababababab",end:"abbcabbcbcbc"}]}}function app_replace_rule_set_right_change(){return{name:"Right Change",rules:["a b > a c"],goals:[{start:"ababab",end:"ababac"},{start:"ababab",end:"acabac"},{start:"abaabaaabaaaab",end:"acaacaaacaaaac"}]}}function app_replace_rule_set_replace_left_same(){return{name:"Replace Left Same",rules:["b a > a a"],goals:[{start:"bababa",end:"baaaba"},{start:"baba",end:"aaaa"},{start:"baabaaba",end:"aaaaaaaa"}]}}function app_replace_rule_set_replace_right_same(){return{name:"Replace Right Same",rules:["a b > a a"],goals:[{start:"ababab",end:"abaaab"},{start:"abab",end:"aaaa"},{start:"abaabaab",end:"aaaaaaaa"}]}}function app_replace_rule_set_same_replace_left(){return{name:"Same Replace Left",rules:["a a > b a"],goals:[{start:"aaaa",end:"abaa"},{start:"aaaa",end:"baba"},{start:"aaaaaaaa",end:"baabaaba"}]}}function app_replace_rule_set_same_replace_right(){return{name:"Same Replace Right",rules:["a a > a b"],goals:[{start:"aaaa",end:"aaba"},{start:"aaaa",end:"abab"},{start:"aaaaaaaa",end:"abaabaab"}]}}function app_replace_rule_set_swap(){return{name:"Swap",rules:["a b > b a"],goals:[{start:"abb",end:"bba"},{start:"abbbb",end:"bbbba"},{start:"abbabb",end:"bbbbaa"}]}}function app_replace_rule_set_shrink_left(){return{name:"Shrink left",rules:["b a > a"],goals:[{start:"bba",end:"a"},{start:"babba",end:"aa"},{start:"bbbabba",end:"aa"},{start:"bbbabbaba",end:"aaa"}]}}function app_replace_rule_set_shrink_right(){return{name:"Shrink right",rules:["a b > a"],goals:[{start:"abb",end:"a"},{start:"abbab",end:"aa"},{start:"abbabbb",end:"aa"},{start:"ababbabbb",end:"aaa"}]}}function app_replace_rule_set_grow_left(){return{name:"Grow left",rules:["a > b a"],goals:[{start:"a",end:"bba"},{start:"aa",end:"babba"},{start:"aa",end:"bbbabba"},{start:"aaa",end:"bbbabbaba"}]}}function app_replace_rule_set_grow_right(){return{name:"Grow right",rules:["a > a b"],goals:[{start:"a",end:"abb"},{start:"aa",end:"abbab"},{start:"aa",end:"abbabbb"},{start:"aaa",end:"ababbabbb"}]}}function app_replace_rule_set_half(){return{name:"Half",rules:["a a > a"],goals:[{start:"aa",end:"a"},{start:"aaa",end:"a"},{start:"aaaaa",end:"a"}]}}function app_replace_rule_set_double(){return{name:"Double",rules:["a > a a"],goals:[{start:"a",end:"aa"},{start:"a",end:"aaa"},{start:"a",end:"aaaaa"}]}}function app_replace_rule_set_shrink_different(){return{name:"Shrink Different",rules:["b c > a"],goals:[{start:"bc",end:"a"},{start:"bcbc",end:"aa"},{start:"bcbcbcbc",end:"aaaa"}]}}function app_replace_rule_set_grow_different(){return{name:"Grow Different",rules:["a > b c"],goals:[{start:"a",end:"bc"},{start:"aa",end:"bcbc"},{start:"aaaa",end:"bcbcbcbc"}]}}function app_replace_rule_set_replace(){return{name:"Replace",rules:["a > b"],goals:[{start:"a",end:"b"},{start:"aa",end:"bb"},{start:"aaa",end:"bbb"},{start:"aaaa",end:"abba"},{start:"aaaaaaa",end:"abababa"}]}}function app_replace_rule_sets(){return function invoke_multiple(e){return list_map(e,invoke)}(function app_replace_rule_sets_fns(){return[app_replace_rule_set_replace,app_replace_rule_set_grow_different,app_replace_rule_set_shrink_different,app_replace_rule_set_double,app_replace_rule_set_half,app_replace_rule_set_grow_right,app_replace_rule_set_grow_left,app_replace_rule_set_shrink_right,app_replace_rule_set_shrink_left,app_replace_rule_set_swap,app_replace_rule_set_same_replace_right,app_replace_rule_set_same_replace_left,app_replace_rule_set_replace_right_same,app_replace_rule_set_replace_left_same,app_replace_rule_set_right_change,app_replace_rule_set_swap_change_right,app_replace_rule_set_swap_change_left,app_replace_rule_set_grow_triple,app_replace_rule_set_shrink_triple,app_replace_rule_set_unary_equations,app_replace_rule_set_shrink_both_same,app_replace_rule_set_grow_between,app_replace_rule_set_shrink_between,app_replace_rule_set_replace_2,app_replace_rule_set_replace_flow,app_replace_rule_set_grow_different_2,app_replace_rule_set_shrink_different_2,app_replace_rule_set_expand_collapse,app_replace_rule_set_grow_left_pair_change_right,app_replace_rule_set_shrink_left_pair_replace_right_same,app_replace_rule_set_unary_equations_adding,app_replace_rule_set_binary_counting_prepare_1,app_replace_rule_set_binary_counting_prepare_2,app_replace_rule_set_binary_counting,app_replace_rule_set_three_different_grow_same,app_replace_rule_set_shrink_same_three_different,app_replace_rule_set_two_different_grow_same,app_replace_rule_set_grow_same_three_different,app_replace_rule_set_unary_to_binary_equations_preparation,app_replace_rule_set_unary_to_binary_equations]}())}function app_replace_home(e){let t=property_get(e,"root");app_replace_button_wide(t,"‚öôÔ∏è Settings",function lambda4(){app_shared_screen_set(e,app_replace_settings)});let a=app_replace_rule_sets_data_initialize(e),_=app_replace_rule_sets(),n=!0;each_index(_,function each_item(_,r){let l=property_get(_,"name"),s=function list_all(e,t){return list_size(list_filter(e,t))===list_size(e)}(property_get(_,"goals"),function lambda2(e){return app_replace_goal_completed_initialize(app_replace_rule_sets_data_goal(a,l,e))});html_text_set(app_replace_goals_generic(t,s,n,r,function lambda(){!function on_click(t){storage_local_set_context(e,"rule_set_index",t),app_shared_screen_set(e,app_replace_goals)}(r)}),l),n=s})}function app_replace_button_screen(e,t,a,_){app_replace_button(a,_,function lambda2(){app_shared_screen_set(e,t)})}function app_replace_button_home(e,t){app_replace_button_screen(t,app_replace_home,e,"üè† Home")}function each_nested(e,t){let a=function each_curried_right(e){return function each_curried_right_result(t){return each(t,e)}}(t);each(e,a)}function html_style_set_or_remove(e,t,a,_){e?html_style_set(t,a,_):function html_style_remove(e,t){html_component_element_get(e).style.removeProperty(t)}(t,a)}function app_replace_button_symbol_style_box_shadow(e,t,a){html_style_set_or_remove(e,t,"box-shadow"," 0 0 0 0.1em "+a)}function ternary(e,t,a){let _=null;return _=e?t:a,_}function html_style_font_color_set_if(e,t,a,_){!function html_font_color_set(e,t){html_style_set(e,"color",t)}(t,ternary(e,a,_))}function html_disable_set(e,t){property_set(html_component_element_get(e),"disabled",t)}function html_disable(e){html_disable_set(e,!0)}function html_enable(e){html_disable_set(e,!1)}function html_enable_if(e,t){let a=null;a=ternary(t,html_enable,html_disable),a(e)}function app_replace_button_symbol_style_valid_if(e,t){html_enable_if(e,t),function html_style_background_color_set_if_else(e,t,a,_){html_style_background_color_set(t,ternary(e,a,_))}(t,e,"#00b400ff","#1e6c1eff"),html_style_font_color_set_if(t,e,"white","#b9fcb9ff");app_replace_button_symbol_style_box_shadow(t,e,"lightgreen")}function app_replace_button_symbol_style_valid_if_curried_right(e){return function app_replace_button_symbol_style_valid_curried_result(t){return app_replace_button_symbol_style_valid_if(t,e)}}function list_map_property_get(e,t){let a=function property_get_curried(e){return function property_get_curried_result(t){return property_get(e,t)}}(t);return list_map(e,a)}function app_replace_lefts_rights_style(e,t){each_nested(list_map_property_get(["rights","lefts"],e),app_replace_button_symbol_style_valid_if_curried_right(t))}function html_bold(e){html_style_set(e,"font-weight","bold")}function app_replace_button_side(e,t){return list_map(t,function symbol_each(t){let a=html_span_text(e,t);return app_replace_button_symbol_style(a),a})}function app_replace_button_rule_content(e,t,a){let _=app_replace_button_side(e,t),n=function text_pad_space(e){let t=function text_pad(e,t){return t+e+t}(e," ");return t}("‚ûú"),r=html_span_text(e,n);return html_bold(r),{lefts:_,rights:app_replace_button_side(e,a),arrow:r}}function app_replace_button_symbol_style_valid_multiple_nested(e){!function app_replace_button_symbol_style_valid_if_multiple_nested(e,t){each_nested(e,app_replace_button_symbol_style_valid_if_curried_right(t))}(e,!0)}function storage_local_transform_context(e,t,a,_){arguments_assert(arguments,4);let n=_(storage_local_initialize_context(e,t,a));!function undefined_not_is_assert(e){undefined_not_is_assert_lambda(e,function lambda2(){return{}})}(n),storage_local_set_context(e,t,n)}async function list_wait(e){return await Promise.all(e)}function list_add(e,t){e.push(t)}function list_adder(e){let t=function list_adder_generic(e,t){let a=[];return e(function list_adder_inner(e){t(a,e)}),a}(e,list_add);return t}function lists_get(e,t){const a=function lists_get_generic(e,t,a){return list_map(a,function lambda(a){return e(a,t)})}(list_get,t,e);return a}function range(e){let t=[];for(let a=0;a<e;a++)list_add(t,a);return t}function each_multiple_generic(e,t,a){let _=function lists_size_max(e){return function list_max(e){return e.reduce(function lambda(e,t){return e>t?e:t},-1/0)}(list_map(e,list_size))}(e);!function each_range(e,t){each(range(e),t)}(_,function lambda_each_range(_){let n=t(e,_);a(n)})}function each_multiple(e,t){each_multiple_generic(e,lists_get,t)}function each_pair(e,t,a){!function each_pair_generic(e,t,a,_){a([e,t],function lambda(e){let[t,a]=e;_(t,a)})}(e,t,each_multiple,a)}async function list_map_pairs_wait(e,t,a){let _=function list_map_pairs(e,t,a){return list_adder(function lambda_list_adder(_){each_pair(e,t,function lambda_each_pair(e,t){const n=a(e,t);_(n)})})}(e,t,a);return await list_wait(_)}async function sleep(e){await new Promise(function lambda5(t){return setTimeout(t,e)})}async function html_move_animate_translate(e,t,a,_){html_style_set(e,"transition",`transform ${_}ms`);const n=`translate(${t}px, ${a}px)`;html_component_element_get(e).style.transform=n,await sleep(_)}async function html_move_animate_rect(e,t,a,_){const n=a.left-t.left,r=a.top-t.top;await html_move_animate_translate(e,n,r,_);let l=function hypotenuse(e,t){return Math.hypot(e,t)}(n,r);return{distance:l}}function html_bounding_client_rect(e){return html_component_element_get(e).getBoundingClientRect()}async function html_move_animate_curried_right(e){return async function html_move_animate_curried_right_result(t,a){let _=await async function html_move_animate(e,t,a){const _=html_bounding_client_rect(e),n=html_bounding_client_rect(t);await html_move_animate_rect(e,_,n,a)}(t,a,e);return _}}async function html_move_animate_multiple(e,t,a){let _=await html_move_animate_curried_right(a);await list_map_pairs_wait(e,t,_)}function html_parent_remove(e){let t=html_component_element_get(e);t.parentNode.removeChild(t)}async function html_move_animate_multiple_parent_remove(e,t,a){await html_move_animate_multiple(e,t,a),function html_parent_remove_multiple(e){each(e,html_parent_remove)}(e)}async function html_request_animation_frame(){await new Promise(function lambda(e){return requestAnimationFrame(e)})}function html_visibility_hidden(e){html_style_assign(e,{visibility:"hidden"})}function html_insert(e,t,a){let _=html_component_element_get(e),n=html_component_element_get(t),r=_.children.length;!function less_than_equal_assert(e,t){assert(function less_than_equal(e,t){return e<=t}(e,t))}(a,r),a===r?html_parent_append(e,t):_.insertBefore(n,_.children[a])}function html_clone(e){return html_component_wrap(html_component_element_get(e).cloneNode(!0))}function list_slice(e,t,a){return e.slice(t,a)}function list_slice_count(e,t,a){return list_slice(e,t,t+a)}function html_centered(e){html_style_set(e,"text-align","center")}function html_p(e){return html_element(e,"p")}function html_p_text(e,t){let a=html_p(e);return html_text_set(a,t),a}function list_index_last(e){const t=function list_index_end(e,t){return list_size(e)-1-t}(e,0);return t}function list_empty_is(e){return 0===list_size(e)}function list_index_is(e,t){arguments_assert(arguments,2);let a=!1;return list_empty_is(e)||t<0?a:!(t>list_index_last(e))||a}function list_insert_generic(e,t,a,_){let n=function number_is(e){return"number"==typeof e&&isFinite(e)}(e);assert(n),function list_splice(e,t,a,_){e.splice(t,a,_)}(t,e,a,_)}function list_add_first(e,t){!function list_insert(e,t,a){list_insert_generic(t,e,0,a)}(e,0,t)}function list_take(e,t){return list_slice(e,0,t)}function random(){return Math.random()}function floor(e){return Math.floor(e)}function list_shuffle_take(e,t){return function list_shuffle(e){for(let t=e.length-1;t>0;t--){const a=floor(random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}}(e),list_take(e,t)}function emoji_party_face(){return"ü•≥"}function emoji_party_popper(){return"üéâ"}function emoji_clap(){return"üëè"}function emoji_100(){return"üíØ"}function emoji_medal_star(){return"üèÖ"}function emoji_medal_1(){return"ü•á"}function emoji_trophy(){return"üèÜ"}function json_equal(e,t){return function equal_by(e,t,a){return equal(a(e),a(t))}(e,t,json_to)}function storage_local_get_context(e,t){return storage_local_get(property_get(e,"app_fn"),t)}function app_replace_rule_set_get(e){let t=storage_local_get_context(e,"rule_set_index");return list_get(app_replace_rule_sets(),t)}function list_copy_reverse(e){let t=function list_copy(e){return[...e]}(e);return function list_reverse(e){e.reverse()}(t),t}function ternary_list(e,t,a){let _=a;return function each_pair_reverse(e,t,a){return each_pair(list_copy_reverse(e),list_copy_reverse(t),a)}(e,t,function lambda(e,t){_=ternary(e,t,_)}),_}function app_replace_rule_valid(e,t,a){let _=property_get(e,"left");return json_equal(_,list_slice_count(a,t,list_size(_)))}function property_set_exists_not(e,t,a){!function property_exists_not_assert(e,t){if(property_exists(e,t)){let a=property_get(e,t);log_keep(t),error_json({object:e,property_name:t,value:a})}}(e,t),property_set(e,t,a)}function list_any(e,t){let a=function list_empty_not_is(e){return not(list_empty_is(e))}(list_filter(e,t));return a}function html_div(e){return html_element(e,"div")}function list_concat_multiple(e){let t=[];return each(e,function lambda(e){t=function list_concat(e,t){return assert(list_is(e)),e.concat(t)}(t,e)}),t}function list_skip(e,t){return list_slice(e,t,list_size(e))}function html_text_set_if(e,t,a,_){html_text_set(_,ternary(e,t,a))}function list_map_index(e,t){let a=0;return list_map(e,function lambda(e){let _=t(e,a);return a++,_})}function text_split(e,t){return e.split(t)}function text_split_empty(e){return text_split(e,"")}function app_replace_rule_parse(e){let t=function text_split_space(e){return text_split(e," ")}(e),a=function list_index_of(e,t){let a=e.indexOf(t);return a<=-1&&error_json({list:e,item:t,index:a}),a}(t,">");return{left:list_take(t,a),right:list_skip(t,a+1)}}async function app_replace_rule_set(e){let t=property_get(e,"root");app_replace_button_home(t,e),app_replace_button_screen(e,app_replace_goals,t,"Goals"),app_replace_button_screen(e,app_replace_rule_set,t,"Start over");let a=app_replace_rule_set_get(e),_=property_get(a,"name");html_p_text(t,"Rule set: "+_);let n=storage_local_get_context(e,"goal_index"),r=property_get(a,"goals"),l=list_get(r,n),s=property_get(l,"start");let i=null,o=html_p(t),c=list_map(property_get(a,"rules"),app_replace_rule_parse),p={},u=html_div(t),m=html_p(t),b=html_div(t),f=text_split_empty(s),d=(html_p_text(t,"Goal:"),text_split_empty(property_get(l,"end"))),g=app_replace_button_side(html_p(t),d),h=app_replace_button_symbol_style_valid_if_curried_right(!1);each(g,h);let y="lightgreen",x=html_div(t),w=!1;async function refresh(){html_clear(u);let t=list_map_index(c,function each_rule(e,t){let a=property_get(e,"left"),_=property_get(e,"right"),n=function app_replace_button_rule(e,t,a,_){let n=html_button_notext(e,_);app_replace_button_rule_style(n);let r=app_replace_button_rule_content(n,t,a),l=property_get(r,"arrow"),s=property_get(r,"rights");return{b:n,lefts:property_get(r,"lefts"),rights:s,arrow:l}}(u,a,_,function lambda3(){p={},i=ternary(i===t,null,t),refresh()}),r=property_get(n,"arrow"),l=property_get(n,"rights"),s=property_get(n,"lefts"),o=property_get(n,"b");return html_disable(o),object_merge(o,{rule:e,lefts:s,rights:l,arrow:r}),o});each_index(t,function each_button_rule_refresh(e,t){let a=property_get(e,"rule"),_=range(list_size(f)),n=function app_replace_rule_valid_curried(e,t){return function app_replace_rule_valid_curried_result(a){return app_replace_rule_valid(e,a,t)}}(a,f),r=list_any(_,n);const l=t===i;r=null===i||l,r=!0,html_enable_if(e,r),app_replace_lefts_rights_style(e,r);let s=function ternary_nested(e,t,a,_,n){return ternary_list([e,a],[t,_],n)}(l,y,r,"#dadadaff","#a8a8a8ff");html_style_background_color_set(e,s),html_style_font_color_set_if(r,property_get(e,"arrow"),"black","#6a6a6a")}),html_clear(b);let a=html_div(b),s=null;if(s=list_map_index(f,function symbols_mapper(e,_){let n=null;n=html_button(a,e,async function symbol_on_click(){let e=list_get(c,i);if(app_replace_rule_valid(e,_,f)){p={},function app_replace_button_symbol_style_valid_if_multiple(e,t){each(e,app_replace_button_symbol_style_valid_if_curried_right(t))}(s,!0);let n=property_get(e,"right"),r=property_get(e,"left"),l=list_take(f,_),o=list_size(r),u=list_skip(f,_+o);f=list_concat_multiple([l,n,u]);let m=list_get(t,i),b=property_get(m,"lefts"),d=property_get(m,"rights"),g=list_size(b),h=list_slice_count(s,_,g);let y=list_skip(s,_+g),x=list_map(y,html_bounding_client_rect);await html_move_animate_multiple_parent_remove(h,b,555),await html_request_animation_frame();let w=list_map(d,html_clone);function lambda8(e,t){html_visibility_hidden(e),html_insert(a,e,_+t)}async function lambda9(e){let[t,a,_]=e,n=property_get(await html_move_animate_rect(t,a,_,0),"distance");t.offsetWidth,await html_request_animation_frame();const r=4*n;await html_move_animate_translate(t,0,0,r),await sleep(r),function html_translation_transition_clear(e){html_style_set(e,"transition",""),html_style_set(e,"transform","")}(t)}each_index(w,lambda8);let v=function lists_map(e,t){return list_adder(function lambda_list_adder(a){each_multiple(e,function lambda_each(e){const _=t(e);a(_)})})}([y,list_map(y,html_bounding_client_rect),x],lambda9);await list_wait(v),await html_move_animate_multiple(d,w,555),i=null}else property_set(p,_,!0);refresh()}),app_replace_button_symbol_style(n),property_set_exists_not(n,"index",_);let r=!1;if(null_not_is(i)){let e=property_get(n,"index");r=app_replace_rule_valid(list_get(c,i),e,f)}return app_replace_button_symbol_style_valid_if(n,null!==i),property_exists(p,_)&&function app_replace_button_symbol_style_invalid(e){html_style_background_color_set(e,"#D10000"),app_replace_button_symbol_style_box_shadow(!0,e,"#FF8A8A")}(n),n}),not(w)){if(json_equal(f,d)){function lambda5(e){return property_set(app_replace_rule_sets_data_goal(e,_,l),"completed",!0),e}w=!0,function storage_local_transform_empty_context(e,t,a){storage_local_transform_context(e,t,{},a)}(e,"rule_sets_data",lambda5);app_replace_button_symbol_style_valid_multiple_nested([g,s]),await html_move_animate_multiple(s,g,555),symbols_hide_on_success();let v=list_shuffle_take([emoji_trophy,emoji_100,emoji_clap,emoji_medal_star,emoji_medal_1,emoji_party_popper,emoji_party_face],3);list_add_first(v,emoji_check);let j=function list_invoke(e){return list_map(e,invoke)}(v),k=function list_join_empty(e){return list_join(e,"")}(j),z=html_p(x);html_style_background_color_set(z,y),app_replace_button_symbol_style_inner(z);html_style_padding_em(z,"0.3"),html_centered(z);let q=html_div(z);html_span_text(q,k),html_style_font_size(q,"1.5em");let S=html_div(z);let R=list_shuffle_take(["Congratulations","Success","Good job","Great job","Well done","Keep it up","Amazing","Way to go","Awesome"],2);function lambda(e){html_span_text(S,e+"! ")}html_bold(S),each(R,lambda);let C=html_p(x),G=n+1,A=list_index_is(r,G),B=storage_local_get_context(e,"rule_set_index"),D=app_replace_rule_sets(),P=B+1,E=list_index_is(D,P),O=!0;function lambda2(){A?storage_local_set_context(e,"goal_index",G):E?(storage_local_set_context(e,"rule_set_index",P),storage_local_set_context(e,"goal_index",0)):O=!1,app_shared_screen_set(e,app_replace_rule_set)}not(A)&&not(E)&&function html_p_text_centered(e,t){let a=html_p_text(e,t);return html_centered(a),a}(C,"You have completed all goals that are available at this time!"),html_width_full(app_replace_button(C,"‚û°Ô∏è Next",lambda2))}let h=null_not_is(i);html_text_set_if(h,"Rules:","Choose a rule:",o),html_text_set_if(h,"Choose a symbol:","Symbols:",m)}function symbols_hide_on_success(){html_visibility_hidden(a)}w&&symbols_hide_on_success()}refresh(),refresh()}function app_replace_goals(e){let t=property_get(e,"root");app_replace_button_home(t,e);let a=app_replace_rule_set_get(e),_=property_get(a,"name");html_p_text(t,"Rule set: "+_);let n=property_get(a,"goals"),r=!0,l=app_replace_rule_sets_data_initialize(e);each_index(n,function each_item(a,n){let s=app_replace_goal_completed_initialize(app_replace_rule_sets_data_goal(l,_,a)),i=text_split_empty(property_get(a,"start")),o=text_split_empty(property_get(a,"end"));app_replace_lefts_rights_style(app_replace_button_rule_content(app_replace_goals_generic(t,s,r,n,function lambda(){!function on_click(t){storage_local_set_context(e,"goal_index",t),app_shared_screen_set(e,app_replace_rule_set)}(n)}),i,o),s),r=s})}async function app_replace(){}!async function app_context_initialize(e){const t=html_document_body();await async function app_context_initialize_root(e,t){let a={root:e};await t(a)}(t,e)}(async function app_replace_main(e){let t=app_replace,a=function app_replace_screens(){return[app_replace_home,app_replace_rule_set,app_replace_settings,app_replace_goals]}();!function html_meta_viewport(){let e=html_element(html_document_head(),"meta");html_attribute_set(e,"name","viewport"),html_attribute_set(e,"content","width=device-width, initial-scale=1.0")}(),html_font_sans_serif_set_html(),object_merge(e,{app_fn:t,screens:a}),app_shared_refresh(e),app_replace_font_size_refresh(e)})})();